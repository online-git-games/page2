77u/Ly8gR2VuZXJhdGVkIGJ5IENvbnN0cnVjdCAyLCB0aGUgSFRNTDUgZ2FtZSBhbmQgYXBwIGNy
ZWF0b3IgOjogaHR0cHM6Ly93d3cuY29uc3RydWN0Lm5ldA0KdmFyIGNyID0ge307DQpjci5wbHVn
aW5zXyA9IHt9Ow0KY3IuYmVoYXZpb3JzID0ge307DQppZiAodHlwZW9mIE9iamVjdC5nZXRQcm90
b3R5cGVPZiAhPT0gImZ1bmN0aW9uIikNCnsNCglpZiAodHlwZW9mICJ0ZXN0Ii5fX3Byb3RvX18g
PT09ICJvYmplY3QiKQ0KCXsNCgkJT2JqZWN0LmdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24ob2Jq
ZWN0KSB7DQoJCQlyZXR1cm4gb2JqZWN0Ll9fcHJvdG9fXzsNCgkJfTsNCgl9DQoJZWxzZQ0KCXsN
CgkJT2JqZWN0LmdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24ob2JqZWN0KSB7DQoJCQlyZXR1cm4g
b2JqZWN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZTsNCgkJfTsNCgl9DQp9DQooZnVuY3Rpb24oKXsN
Cgljci5sb2dleHBvcnQgPSBmdW5jdGlvbiAobXNnKQ0KCXsNCgkJaWYgKHdpbmRvdy5jb25zb2xl
ICYmIHdpbmRvdy5jb25zb2xlLmxvZykNCgkJCXdpbmRvdy5jb25zb2xlLmxvZyhtc2cpOw0KCX07
DQoJY3IubG9nZXJyb3IgPSBmdW5jdGlvbiAobXNnKQ0KCXsNCgkJaWYgKHdpbmRvdy5jb25zb2xl
ICYmIHdpbmRvdy5jb25zb2xlLmVycm9yKQ0KCQkJd2luZG93LmNvbnNvbGUuZXJyb3IobXNnKTsN
Cgl9Ow0KCWNyLnNlYWwgPSBmdW5jdGlvbih4KQ0KCXsNCgkJcmV0dXJuIHg7DQoJfTsNCgljci5m
cmVlemUgPSBmdW5jdGlvbih4KQ0KCXsNCgkJcmV0dXJuIHg7DQoJfTsNCgljci5pc191bmRlZmlu
ZWQgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXJldHVybiB0eXBlb2YgeCA9PT0gInVuZGVmaW5lZCI7
DQoJfTsNCgljci5pc19udW1iZXIgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXJldHVybiB0eXBlb2Yg
eCA9PT0gIm51bWJlciI7DQoJfTsNCgljci5pc19zdHJpbmcgPSBmdW5jdGlvbiAoeCkNCgl7DQoJ
CXJldHVybiB0eXBlb2YgeCA9PT0gInN0cmluZyI7DQoJfTsNCgljci5pc1BPVCA9IGZ1bmN0aW9u
ICh4KQ0KCXsNCgkJcmV0dXJuIHggPiAwICYmICgoeCAtIDEpICYgeCkgPT09IDA7DQoJfTsNCglj
ci5uZXh0SGlnaGVzdFBvd2VyT2ZUd28gPSBmdW5jdGlvbih4KSB7DQoJCS0teDsNCgkJZm9yICh2
YXIgaSA9IDE7IGkgPCAzMjsgaSA8PD0gMSkgew0KCQkJeCA9IHggfCB4ID4+IGk7DQoJCX0NCgkJ
cmV0dXJuIHggKyAxOw0KCX0NCgljci5hYnMgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXJldHVybiAo
eCA8IDAgPyAteCA6IHgpOw0KCX07DQoJY3IubWF4ID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQly
ZXR1cm4gKGEgPiBiID8gYSA6IGIpOw0KCX07DQoJY3IubWluID0gZnVuY3Rpb24gKGEsIGIpDQoJ
ew0KCQlyZXR1cm4gKGEgPCBiID8gYSA6IGIpOw0KCX07DQoJY3IuUEkgPSBNYXRoLlBJOw0KCWNy
LnJvdW5kID0gZnVuY3Rpb24gKHgpDQoJew0KCQlyZXR1cm4gKHggKyAwLjUpIHwgMDsNCgl9Ow0K
CWNyLmZsb29yID0gZnVuY3Rpb24gKHgpDQoJew0KCQlpZiAoeCA+PSAwKQ0KCQkJcmV0dXJuIHgg
fCAwOw0KCQllbHNlDQoJCQlyZXR1cm4gKHggfCAwKSAtIDE7CQkvLyBjb3JyZWN0bHkgcm91bmQg
ZG93biB3aGVuIG5lZ2F0aXZlDQoJfTsNCgljci5jZWlsID0gZnVuY3Rpb24gKHgpDQoJew0KCQl2
YXIgZiA9IHggfCAwOw0KCQlyZXR1cm4gKGYgPT09IHggPyBmIDogZiArIDEpOw0KCX07DQoJZnVu
Y3Rpb24gVmVjdG9yMih4LCB5KQ0KCXsNCgkJdGhpcy54ID0geDsNCgkJdGhpcy55ID0geTsNCgkJ
Y3Iuc2VhbCh0aGlzKTsNCgl9Ow0KCVZlY3RvcjIucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9u
IChweCwgcHkpDQoJew0KCQl0aGlzLnggKz0gcHg7DQoJCXRoaXMueSArPSBweTsNCgkJcmV0dXJu
IHRoaXM7DQoJfTsNCglWZWN0b3IyLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiAocHgsIHB5KQ0K
CXsNCgkJdGhpcy54ICo9IHB4Ow0KCQl0aGlzLnkgKj0gcHk7DQoJCXJldHVybiB0aGlzOw0KCX07
DQoJY3IudmVjdG9yMiA9IFZlY3RvcjI7DQoJY3Iuc2VnbWVudHNfaW50ZXJzZWN0ID0gZnVuY3Rp
b24oYTF4LCBhMXksIGEyeCwgYTJ5LCBiMXgsIGIxeSwgYjJ4LCBiMnkpDQoJew0KCQl2YXIgbWF4
X2F4LCBtaW5fYXgsIG1heF9heSwgbWluX2F5LCBtYXhfYngsIG1pbl9ieCwgbWF4X2J5LCBtaW5f
Ynk7DQoJCWlmIChhMXggPCBhMngpDQoJCXsNCgkJCW1pbl9heCA9IGExeDsNCgkJCW1heF9heCA9
IGEyeDsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCW1pbl9heCA9IGEyeDsNCgkJCW1heF9heCA9IGEx
eDsNCgkJfQ0KCQlpZiAoYjF4IDwgYjJ4KQ0KCQl7DQoJCQltaW5fYnggPSBiMXg7DQoJCQltYXhf
YnggPSBiMng7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQltaW5fYnggPSBiMng7DQoJCQltYXhfYngg
PSBiMXg7DQoJCX0NCgkJaWYgKG1heF9heCA8IG1pbl9ieCB8fCBtaW5fYXggPiBtYXhfYngpDQoJ
CQlyZXR1cm4gZmFsc2U7DQoJCWlmIChhMXkgPCBhMnkpDQoJCXsNCgkJCW1pbl9heSA9IGExeTsN
CgkJCW1heF9heSA9IGEyeTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCW1pbl9heSA9IGEyeTsNCgkJ
CW1heF9heSA9IGExeTsNCgkJfQ0KCQlpZiAoYjF5IDwgYjJ5KQ0KCQl7DQoJCQltaW5fYnkgPSBi
MXk7DQoJCQltYXhfYnkgPSBiMnk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQltaW5fYnkgPSBiMnk7
DQoJCQltYXhfYnkgPSBiMXk7DQoJCX0NCgkJaWYgKG1heF9heSA8IG1pbl9ieSB8fCBtaW5fYXkg
PiBtYXhfYnkpDQoJCQlyZXR1cm4gZmFsc2U7DQoJCXZhciBkcHggPSBiMXggLSBhMXggKyBiMngg
LSBhMng7DQoJCXZhciBkcHkgPSBiMXkgLSBhMXkgKyBiMnkgLSBhMnk7DQoJCXZhciBxYXggPSBh
MnggLSBhMXg7DQoJCXZhciBxYXkgPSBhMnkgLSBhMXk7DQoJCXZhciBxYnggPSBiMnggLSBiMXg7
DQoJCXZhciBxYnkgPSBiMnkgLSBiMXk7DQoJCXZhciBkID0gY3IuYWJzKHFheSAqIHFieCAtIHFi
eSAqIHFheCk7DQoJCXZhciBsYSA9IHFieCAqIGRweSAtIHFieSAqIGRweDsNCgkJaWYgKGNyLmFi
cyhsYSkgPiBkKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQl2YXIgbGIgPSBxYXggKiBkcHkgLSBxYXkg
KiBkcHg7DQoJCXJldHVybiBjci5hYnMobGIpIDw9IGQ7DQoJfTsNCglmdW5jdGlvbiBSZWN0KGxl
ZnQsIHRvcCwgcmlnaHQsIGJvdHRvbSkNCgl7DQoJCXRoaXMuc2V0KGxlZnQsIHRvcCwgcmlnaHQs
IGJvdHRvbSk7DQoJCWNyLnNlYWwodGhpcyk7DQoJfTsNCglSZWN0LnByb3RvdHlwZS5zZXQgPSBm
dW5jdGlvbiAobGVmdCwgdG9wLCByaWdodCwgYm90dG9tKQ0KCXsNCgkJdGhpcy5sZWZ0ID0gbGVm
dDsNCgkJdGhpcy50b3AgPSB0b3A7DQoJCXRoaXMucmlnaHQgPSByaWdodDsNCgkJdGhpcy5ib3R0
b20gPSBib3R0b207DQoJfTsNCglSZWN0LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHIpDQoJ
ew0KCQl0aGlzLmxlZnQgPSByLmxlZnQ7DQoJCXRoaXMudG9wID0gci50b3A7DQoJCXRoaXMucmln
aHQgPSByLnJpZ2h0Ow0KCQl0aGlzLmJvdHRvbSA9IHIuYm90dG9tOw0KCX07DQoJUmVjdC5wcm90
b3R5cGUud2lkdGggPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMucmlnaHQgLSB0aGlz
LmxlZnQ7DQoJfTsNCglSZWN0LnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
cmV0dXJuIHRoaXMuYm90dG9tIC0gdGhpcy50b3A7DQoJfTsNCglSZWN0LnByb3RvdHlwZS5vZmZz
ZXQgPSBmdW5jdGlvbiAocHgsIHB5KQ0KCXsNCgkJdGhpcy5sZWZ0ICs9IHB4Ow0KCQl0aGlzLnRv
cCArPSBweTsNCgkJdGhpcy5yaWdodCArPSBweDsNCgkJdGhpcy5ib3R0b20gKz0gcHk7DQoJCXJl
dHVybiB0aGlzOw0KCX07DQoJUmVjdC5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXZhciB0ZW1wID0gMDsNCgkJaWYgKHRoaXMubGVmdCA+IHRoaXMucmlnaHQpDQoJCXsN
CgkJCXRlbXAgPSB0aGlzLmxlZnQ7DQoJCQl0aGlzLmxlZnQgPSB0aGlzLnJpZ2h0Ow0KCQkJdGhp
cy5yaWdodCA9IHRlbXA7DQoJCX0NCgkJaWYgKHRoaXMudG9wID4gdGhpcy5ib3R0b20pDQoJCXsN
CgkJCXRlbXAgPSB0aGlzLnRvcDsNCgkJCXRoaXMudG9wID0gdGhpcy5ib3R0b207DQoJCQl0aGlz
LmJvdHRvbSA9IHRlbXA7DQoJCX0NCgl9Ow0KCVJlY3QucHJvdG90eXBlLmludGVyc2VjdHNfcmVj
dCA9IGZ1bmN0aW9uIChyYykNCgl7DQoJCXJldHVybiAhKHJjLnJpZ2h0IDwgdGhpcy5sZWZ0IHx8
IHJjLmJvdHRvbSA8IHRoaXMudG9wIHx8IHJjLmxlZnQgPiB0aGlzLnJpZ2h0IHx8IHJjLnRvcCA+
IHRoaXMuYm90dG9tKTsNCgl9Ow0KCVJlY3QucHJvdG90eXBlLmludGVyc2VjdHNfcmVjdF9vZmYg
PSBmdW5jdGlvbiAocmMsIG94LCBveSkNCgl7DQoJCXJldHVybiAhKHJjLnJpZ2h0ICsgb3ggPCB0
aGlzLmxlZnQgfHwgcmMuYm90dG9tICsgb3kgPCB0aGlzLnRvcCB8fCByYy5sZWZ0ICsgb3ggPiB0
aGlzLnJpZ2h0IHx8IHJjLnRvcCArIG95ID4gdGhpcy5ib3R0b20pOw0KCX07DQoJUmVjdC5wcm90
b3R5cGUuY29udGFpbnNfcHQgPSBmdW5jdGlvbiAoeCwgeSkNCgl7DQoJCXJldHVybiAoeCA+PSB0
aGlzLmxlZnQgJiYgeCA8PSB0aGlzLnJpZ2h0KSAmJiAoeSA+PSB0aGlzLnRvcCAmJiB5IDw9IHRo
aXMuYm90dG9tKTsNCgl9Ow0KCVJlY3QucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChyKQ0K
CXsNCgkJcmV0dXJuIHRoaXMubGVmdCA9PT0gci5sZWZ0ICYmIHRoaXMudG9wID09PSByLnRvcCAm
JiB0aGlzLnJpZ2h0ID09PSByLnJpZ2h0ICYmIHRoaXMuYm90dG9tID09PSByLmJvdHRvbTsNCgl9
Ow0KCWNyLnJlY3QgPSBSZWN0Ow0KCWZ1bmN0aW9uIFF1YWQoKQ0KCXsNCgkJdGhpcy50bHggPSAw
Ow0KCQl0aGlzLnRseSA9IDA7DQoJCXRoaXMudHJ4ID0gMDsNCgkJdGhpcy50cnlfID0gMDsJLy8g
aXMgYSBrZXl3b3JkIG90aGVyd2lzZSENCgkJdGhpcy5icnggPSAwOw0KCQl0aGlzLmJyeSA9IDA7
DQoJCXRoaXMuYmx4ID0gMDsNCgkJdGhpcy5ibHkgPSAwOw0KCQljci5zZWFsKHRoaXMpOw0KCX07
DQoJUXVhZC5wcm90b3R5cGUuc2V0X2Zyb21fcmVjdCA9IGZ1bmN0aW9uIChyYykNCgl7DQoJCXRo
aXMudGx4ID0gcmMubGVmdDsNCgkJdGhpcy50bHkgPSByYy50b3A7DQoJCXRoaXMudHJ4ID0gcmMu
cmlnaHQ7DQoJCXRoaXMudHJ5XyA9IHJjLnRvcDsNCgkJdGhpcy5icnggPSByYy5yaWdodDsNCgkJ
dGhpcy5icnkgPSByYy5ib3R0b207DQoJCXRoaXMuYmx4ID0gcmMubGVmdDsNCgkJdGhpcy5ibHkg
PSByYy5ib3R0b207DQoJfTsNCglRdWFkLnByb3RvdHlwZS5zZXRfZnJvbV9yb3RhdGVkX3JlY3Qg
PSBmdW5jdGlvbiAocmMsIGEpDQoJew0KCQlpZiAoYSA9PT0gMCkNCgkJew0KCQkJdGhpcy5zZXRf
ZnJvbV9yZWN0KHJjKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXZhciBzaW5fYSA9IE1hdGguc2lu
KGEpOw0KCQkJdmFyIGNvc19hID0gTWF0aC5jb3MoYSk7DQoJCQl2YXIgbGVmdF9zaW5fYSA9IHJj
LmxlZnQgKiBzaW5fYTsNCgkJCXZhciB0b3Bfc2luX2EgPSByYy50b3AgKiBzaW5fYTsNCgkJCXZh
ciByaWdodF9zaW5fYSA9IHJjLnJpZ2h0ICogc2luX2E7DQoJCQl2YXIgYm90dG9tX3Npbl9hID0g
cmMuYm90dG9tICogc2luX2E7DQoJCQl2YXIgbGVmdF9jb3NfYSA9IHJjLmxlZnQgKiBjb3NfYTsN
CgkJCXZhciB0b3BfY29zX2EgPSByYy50b3AgKiBjb3NfYTsNCgkJCXZhciByaWdodF9jb3NfYSA9
IHJjLnJpZ2h0ICogY29zX2E7DQoJCQl2YXIgYm90dG9tX2Nvc19hID0gcmMuYm90dG9tICogY29z
X2E7DQoJCQl0aGlzLnRseCA9IGxlZnRfY29zX2EgLSB0b3Bfc2luX2E7DQoJCQl0aGlzLnRseSA9
IHRvcF9jb3NfYSArIGxlZnRfc2luX2E7DQoJCQl0aGlzLnRyeCA9IHJpZ2h0X2Nvc19hIC0gdG9w
X3Npbl9hOw0KCQkJdGhpcy50cnlfID0gdG9wX2Nvc19hICsgcmlnaHRfc2luX2E7DQoJCQl0aGlz
LmJyeCA9IHJpZ2h0X2Nvc19hIC0gYm90dG9tX3Npbl9hOw0KCQkJdGhpcy5icnkgPSBib3R0b21f
Y29zX2EgKyByaWdodF9zaW5fYTsNCgkJCXRoaXMuYmx4ID0gbGVmdF9jb3NfYSAtIGJvdHRvbV9z
aW5fYTsNCgkJCXRoaXMuYmx5ID0gYm90dG9tX2Nvc19hICsgbGVmdF9zaW5fYTsNCgkJfQ0KCX07
DQoJUXVhZC5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gKHB4LCBweSkNCgl7DQoJCXRoaXMu
dGx4ICs9IHB4Ow0KCQl0aGlzLnRseSArPSBweTsNCgkJdGhpcy50cnggKz0gcHg7DQoJCXRoaXMu
dHJ5XyArPSBweTsNCgkJdGhpcy5icnggKz0gcHg7DQoJCXRoaXMuYnJ5ICs9IHB5Ow0KCQl0aGlz
LmJseCArPSBweDsNCgkJdGhpcy5ibHkgKz0gcHk7DQoJCXJldHVybiB0aGlzOw0KCX07DQoJdmFy
IG1pbnJlc3VsdCA9IDA7DQoJdmFyIG1heHJlc3VsdCA9IDA7DQoJZnVuY3Rpb24gbWlubWF4NChh
LCBiLCBjLCBkKQ0KCXsNCgkJaWYgKGEgPCBiKQ0KCQl7DQoJCQlpZiAoYyA8IGQpDQoJCQl7DQoJ
CQkJaWYgKGEgPCBjKQ0KCQkJCQltaW5yZXN1bHQgPSBhOw0KCQkJCWVsc2UNCgkJCQkJbWlucmVz
dWx0ID0gYzsNCgkJCQlpZiAoYiA+IGQpDQoJCQkJCW1heHJlc3VsdCA9IGI7DQoJCQkJZWxzZQ0K
CQkJCQltYXhyZXN1bHQgPSBkOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmIChhIDwgZCkN
CgkJCQkJbWlucmVzdWx0ID0gYTsNCgkJCQllbHNlDQoJCQkJCW1pbnJlc3VsdCA9IGQ7DQoJCQkJ
aWYgKGIgPiBjKQ0KCQkJCQltYXhyZXN1bHQgPSBiOw0KCQkJCWVsc2UNCgkJCQkJbWF4cmVzdWx0
ID0gYzsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChjIDwgZCkNCgkJCXsNCgkJCQlp
ZiAoYiA8IGMpDQoJCQkJCW1pbnJlc3VsdCA9IGI7DQoJCQkJZWxzZQ0KCQkJCQltaW5yZXN1bHQg
PSBjOw0KCQkJCWlmIChhID4gZCkNCgkJCQkJbWF4cmVzdWx0ID0gYTsNCgkJCQllbHNlDQoJCQkJ
CW1heHJlc3VsdCA9IGQ7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKGIgPCBkKQ0KCQkJ
CQltaW5yZXN1bHQgPSBiOw0KCQkJCWVsc2UNCgkJCQkJbWlucmVzdWx0ID0gZDsNCgkJCQlpZiAo
YSA+IGMpDQoJCQkJCW1heHJlc3VsdCA9IGE7DQoJCQkJZWxzZQ0KCQkJCQltYXhyZXN1bHQgPSBj
Ow0KCQkJfQ0KCQl9DQoJfTsNCglRdWFkLnByb3RvdHlwZS5ib3VuZGluZ19ib3ggPSBmdW5jdGlv
biAocmMpDQoJew0KCQltaW5tYXg0KHRoaXMudGx4LCB0aGlzLnRyeCwgdGhpcy5icngsIHRoaXMu
Ymx4KTsNCgkJcmMubGVmdCA9IG1pbnJlc3VsdDsNCgkJcmMucmlnaHQgPSBtYXhyZXN1bHQ7DQoJ
CW1pbm1heDQodGhpcy50bHksIHRoaXMudHJ5XywgdGhpcy5icnksIHRoaXMuYmx5KTsNCgkJcmMu
dG9wID0gbWlucmVzdWx0Ow0KCQlyYy5ib3R0b20gPSBtYXhyZXN1bHQ7DQoJfTsNCglRdWFkLnBy
b3RvdHlwZS5jb250YWluc19wdCA9IGZ1bmN0aW9uICh4LCB5KQ0KCXsNCgkJdmFyIHRseCA9IHRo
aXMudGx4Ow0KCQl2YXIgdGx5ID0gdGhpcy50bHk7DQoJCXZhciB2MHggPSB0aGlzLnRyeCAtIHRs
eDsNCgkJdmFyIHYweSA9IHRoaXMudHJ5XyAtIHRseTsNCgkJdmFyIHYxeCA9IHRoaXMuYnJ4IC0g
dGx4Ow0KCQl2YXIgdjF5ID0gdGhpcy5icnkgLSB0bHk7DQoJCXZhciB2MnggPSB4IC0gdGx4Ow0K
CQl2YXIgdjJ5ID0geSAtIHRseTsNCgkJdmFyIGRvdDAwID0gdjB4ICogdjB4ICsgdjB5ICogdjB5
DQoJCXZhciBkb3QwMSA9IHYweCAqIHYxeCArIHYweSAqIHYxeQ0KCQl2YXIgZG90MDIgPSB2MHgg
KiB2MnggKyB2MHkgKiB2MnkNCgkJdmFyIGRvdDExID0gdjF4ICogdjF4ICsgdjF5ICogdjF5DQoJ
CXZhciBkb3QxMiA9IHYxeCAqIHYyeCArIHYxeSAqIHYyeQ0KCQl2YXIgaW52RGVub20gPSAxLjAg
LyAoZG90MDAgKiBkb3QxMSAtIGRvdDAxICogZG90MDEpOw0KCQl2YXIgdSA9IChkb3QxMSAqIGRv
dDAyIC0gZG90MDEgKiBkb3QxMikgKiBpbnZEZW5vbTsNCgkJdmFyIHYgPSAoZG90MDAgKiBkb3Qx
MiAtIGRvdDAxICogZG90MDIpICogaW52RGVub207DQoJCWlmICgodSA+PSAwLjApICYmICh2ID4g
MC4wKSAmJiAodSArIHYgPCAxKSkNCgkJCXJldHVybiB0cnVlOw0KCQl2MHggPSB0aGlzLmJseCAt
IHRseDsNCgkJdjB5ID0gdGhpcy5ibHkgLSB0bHk7DQoJCXZhciBkb3QwMCA9IHYweCAqIHYweCAr
IHYweSAqIHYweQ0KCQl2YXIgZG90MDEgPSB2MHggKiB2MXggKyB2MHkgKiB2MXkNCgkJdmFyIGRv
dDAyID0gdjB4ICogdjJ4ICsgdjB5ICogdjJ5DQoJCWludkRlbm9tID0gMS4wIC8gKGRvdDAwICog
ZG90MTEgLSBkb3QwMSAqIGRvdDAxKTsNCgkJdSA9IChkb3QxMSAqIGRvdDAyIC0gZG90MDEgKiBk
b3QxMikgKiBpbnZEZW5vbTsNCgkJdiA9IChkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikg
KiBpbnZEZW5vbTsNCgkJcmV0dXJuICh1ID49IDAuMCkgJiYgKHYgPiAwLjApICYmICh1ICsgdiA8
IDEpOw0KCX07DQoJUXVhZC5wcm90b3R5cGUuYXQgPSBmdW5jdGlvbiAoaSwgeG9yeSkNCgl7DQoJ
CWlmICh4b3J5KQ0KCQl7DQoJCQlzd2l0Y2ggKGkpDQoJCQl7DQoJCQkJY2FzZSAwOiByZXR1cm4g
dGhpcy50bHg7DQoJCQkJY2FzZSAxOiByZXR1cm4gdGhpcy50cng7DQoJCQkJY2FzZSAyOiByZXR1
cm4gdGhpcy5icng7DQoJCQkJY2FzZSAzOiByZXR1cm4gdGhpcy5ibHg7DQoJCQkJY2FzZSA0OiBy
ZXR1cm4gdGhpcy50bHg7DQoJCQkJZGVmYXVsdDogcmV0dXJuIHRoaXMudGx4Ow0KCQkJfQ0KCQl9
DQoJCWVsc2UNCgkJew0KCQkJc3dpdGNoIChpKQ0KCQkJew0KCQkJCWNhc2UgMDogcmV0dXJuIHRo
aXMudGx5Ow0KCQkJCWNhc2UgMTogcmV0dXJuIHRoaXMudHJ5XzsNCgkJCQljYXNlIDI6IHJldHVy
biB0aGlzLmJyeTsNCgkJCQljYXNlIDM6IHJldHVybiB0aGlzLmJseTsNCgkJCQljYXNlIDQ6IHJl
dHVybiB0aGlzLnRseTsNCgkJCQlkZWZhdWx0OiByZXR1cm4gdGhpcy50bHk7DQoJCQl9DQoJCX0N
Cgl9Ow0KCVF1YWQucHJvdG90eXBlLm1pZFggPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICh0
aGlzLnRseCArIHRoaXMudHJ4ICArIHRoaXMuYnJ4ICsgdGhpcy5ibHgpIC8gNDsNCgl9Ow0KCVF1
YWQucHJvdG90eXBlLm1pZFkgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICh0aGlzLnRseSAr
IHRoaXMudHJ5XyArIHRoaXMuYnJ5ICsgdGhpcy5ibHkpIC8gNDsNCgl9Ow0KCVF1YWQucHJvdG90
eXBlLmludGVyc2VjdHNfc2VnbWVudCA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5MikNCgl7DQoJ
CWlmICh0aGlzLmNvbnRhaW5zX3B0KHgxLCB5MSkgfHwgdGhpcy5jb250YWluc19wdCh4MiwgeTIp
KQ0KCQkJcmV0dXJuIHRydWU7DQoJCXZhciBhMXgsIGExeSwgYTJ4LCBhMnk7DQoJCXZhciBpOw0K
CQlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKQ0KCQl7DQoJCQlhMXggPSB0aGlzLmF0KGksIHRydWUp
Ow0KCQkJYTF5ID0gdGhpcy5hdChpLCBmYWxzZSk7DQoJCQlhMnggPSB0aGlzLmF0KGkgKyAxLCB0
cnVlKTsNCgkJCWEyeSA9IHRoaXMuYXQoaSArIDEsIGZhbHNlKTsNCgkJCWlmIChjci5zZWdtZW50
c19pbnRlcnNlY3QoeDEsIHkxLCB4MiwgeTIsIGExeCwgYTF5LCBhMngsIGEyeSkpDQoJCQkJcmV0
dXJuIHRydWU7DQoJCX0NCgkJcmV0dXJuIGZhbHNlOw0KCX07DQoJUXVhZC5wcm90b3R5cGUuaW50
ZXJzZWN0c19xdWFkID0gZnVuY3Rpb24gKHJocykNCgl7DQoJCXZhciBtaWR4ID0gcmhzLm1pZFgo
KTsNCgkJdmFyIG1pZHkgPSByaHMubWlkWSgpOw0KCQlpZiAodGhpcy5jb250YWluc19wdChtaWR4
LCBtaWR5KSkNCgkJCXJldHVybiB0cnVlOw0KCQltaWR4ID0gdGhpcy5taWRYKCk7DQoJCW1pZHkg
PSB0aGlzLm1pZFkoKTsNCgkJaWYgKHJocy5jb250YWluc19wdChtaWR4LCBtaWR5KSkNCgkJCXJl
dHVybiB0cnVlOw0KCQl2YXIgYTF4LCBhMXksIGEyeCwgYTJ5LCBiMXgsIGIxeSwgYjJ4LCBiMnk7
DQoJCXZhciBpLCBqOw0KCQlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKQ0KCQl7DQoJCQlmb3IgKGog
PSAwOyBqIDwgNDsgaisrKQ0KCQkJew0KCQkJCWExeCA9IHRoaXMuYXQoaSwgdHJ1ZSk7DQoJCQkJ
YTF5ID0gdGhpcy5hdChpLCBmYWxzZSk7DQoJCQkJYTJ4ID0gdGhpcy5hdChpICsgMSwgdHJ1ZSk7
DQoJCQkJYTJ5ID0gdGhpcy5hdChpICsgMSwgZmFsc2UpOw0KCQkJCWIxeCA9IHJocy5hdChqLCB0
cnVlKTsNCgkJCQliMXkgPSByaHMuYXQoaiwgZmFsc2UpOw0KCQkJCWIyeCA9IHJocy5hdChqICsg
MSwgdHJ1ZSk7DQoJCQkJYjJ5ID0gcmhzLmF0KGogKyAxLCBmYWxzZSk7DQoJCQkJaWYgKGNyLnNl
Z21lbnRzX2ludGVyc2VjdChhMXgsIGExeSwgYTJ4LCBhMnksIGIxeCwgYjF5LCBiMngsIGIyeSkp
DQoJCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCWNy
LnF1YWQgPSBRdWFkOw0KCWNyLlJHQiA9IGZ1bmN0aW9uIChyZWQsIGdyZWVuLCBibHVlKQ0KCXsN
CgkJcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHJlZCwgMjU1KSwgMCkNCgkJCSB8IChNYXRoLm1h
eChNYXRoLm1pbihncmVlbiwgMjU1KSwgMCkgPDwgOCkNCgkJCSB8IChNYXRoLm1heChNYXRoLm1p
bihibHVlLCAyNTUpLCAwKSA8PCAxNik7DQoJfTsNCgljci5HZXRSVmFsdWUgPSBmdW5jdGlvbiAo
cmdiKQ0KCXsNCgkJcmV0dXJuIHJnYiAmIDB4RkY7DQoJfTsNCgljci5HZXRHVmFsdWUgPSBmdW5j
dGlvbiAocmdiKQ0KCXsNCgkJcmV0dXJuIChyZ2IgJiAweEZGMDApID4+IDg7DQoJfTsNCgljci5H
ZXRCVmFsdWUgPSBmdW5jdGlvbiAocmdiKQ0KCXsNCgkJcmV0dXJuIChyZ2IgJiAweEZGMDAwMCkg
Pj4gMTY7DQoJfTsNCgljci5zaGFsbG93Q29weSA9IGZ1bmN0aW9uIChhLCBiLCBhbGxvd092ZXJ3
cml0ZSkNCgl7DQoJCXZhciBhdHRyOw0KCQlmb3IgKGF0dHIgaW4gYikNCgkJew0KCQkJaWYgKGIu
aGFzT3duUHJvcGVydHkoYXR0cikpDQoJCQl7DQo7DQoJCQkJYVthdHRyXSA9IGJbYXR0cl07DQoJ
CQl9DQoJCX0NCgkJcmV0dXJuIGE7DQoJfTsNCgljci5hcnJheVJlbW92ZSA9IGZ1bmN0aW9uIChh
cnIsIGluZGV4KQ0KCXsNCgkJdmFyIGksIGxlbjsNCgkJaW5kZXggPSBjci5mbG9vcihpbmRleCk7
DQoJCWlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gYXJyLmxlbmd0aCkNCgkJCXJldHVybjsJCQkJ
CQkJLy8gaW5kZXggb3V0IG9mIGJvdW5kcw0KCQlmb3IgKGkgPSBpbmRleCwgbGVuID0gYXJyLmxl
bmd0aCAtIDE7IGkgPCBsZW47IGkrKykNCgkJCWFycltpXSA9IGFycltpICsgMV07DQoJCWNyLnRy
dW5jYXRlQXJyYXkoYXJyLCBsZW4pOw0KCX07DQoJY3IudHJ1bmNhdGVBcnJheSA9IGZ1bmN0aW9u
IChhcnIsIGluZGV4KQ0KCXsNCgkJYXJyLmxlbmd0aCA9IGluZGV4Ow0KCX07DQoJY3IuY2xlYXJB
cnJheSA9IGZ1bmN0aW9uIChhcnIpDQoJew0KCQljci50cnVuY2F0ZUFycmF5KGFyciwgMCk7DQoJ
fTsNCgljci5zaGFsbG93QXNzaWduQXJyYXkgPSBmdW5jdGlvbiAoZGVzdCwgc3JjKQ0KCXsNCgkJ
Y3IuY2xlYXJBcnJheShkZXN0KTsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0g
c3JjLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQkJZGVzdFtpXSA9IHNyY1tpXTsNCgl9Ow0KCWNy
LmFwcGVuZEFycmF5ID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQlhLnB1c2guYXBwbHkoYSwgYik7
DQoJfTsNCgljci5mYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIChhcnIsIGl0ZW0pDQoJew0KCQl2YXIg
aSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJ
CXsNCgkJCWlmIChhcnJbaV0gPT09IGl0ZW0pDQoJCQkJcmV0dXJuIGk7DQoJCX0NCgkJcmV0dXJu
IC0xOw0KCX07DQoJY3IuYXJyYXlGaW5kUmVtb3ZlID0gZnVuY3Rpb24gKGFyciwgaXRlbSkNCgl7
DQoJCXZhciBpbmRleCA9IGNyLmZhc3RJbmRleE9mKGFyciwgaXRlbSk7DQoJCWlmIChpbmRleCAh
PT0gLTEpDQoJCQljci5hcnJheVJlbW92ZShhcnIsIGluZGV4KTsNCgl9Ow0KCWNyLmNsYW1wID0g
ZnVuY3Rpb24oeCwgYSwgYikNCgl7DQoJCWlmICh4IDwgYSkNCgkJCXJldHVybiBhOw0KCQllbHNl
IGlmICh4ID4gYikNCgkJCXJldHVybiBiOw0KCQllbHNlDQoJCQlyZXR1cm4geDsNCgl9Ow0KCWNy
LnRvX3JhZGlhbnMgPSBmdW5jdGlvbih4KQ0KCXsNCgkJcmV0dXJuIHggLyAoMTgwLjAgLyBjci5Q
SSk7DQoJfTsNCgljci50b19kZWdyZWVzID0gZnVuY3Rpb24oeCkNCgl7DQoJCXJldHVybiB4ICog
KDE4MC4wIC8gY3IuUEkpOw0KCX07DQoJY3IuY2xhbXBfYW5nbGVfZGVncmVlcyA9IGZ1bmN0aW9u
IChhKQ0KCXsNCgkJYSAlPSAzNjA7ICAgICAgIC8vIG5vdyBpbiAoLTM2MCwgMzYwKSByYW5nZQ0K
CQlpZiAoYSA8IDApDQoJCQlhICs9IDM2MDsgICAvLyBub3cgaW4gWzAsIDM2MCkgcmFuZ2UNCgkJ
cmV0dXJuIGE7DQoJfTsNCgljci5jbGFtcF9hbmdsZSA9IGZ1bmN0aW9uIChhKQ0KCXsNCgkJYSAl
PSAyICogY3IuUEk7ICAgICAgIC8vIG5vdyBpbiAoLTJwaSwgMnBpKSByYW5nZQ0KCQlpZiAoYSA8
IDApDQoJCQlhICs9IDIgKiBjci5QSTsgICAvLyBub3cgaW4gWzAsIDJwaSkgcmFuZ2UNCgkJcmV0
dXJuIGE7DQoJfTsNCgljci50b19jbGFtcGVkX2RlZ3JlZXMgPSBmdW5jdGlvbiAoeCkNCgl7DQoJ
CXJldHVybiBjci5jbGFtcF9hbmdsZV9kZWdyZWVzKGNyLnRvX2RlZ3JlZXMoeCkpOw0KCX07DQoJ
Y3IudG9fY2xhbXBlZF9yYWRpYW5zID0gZnVuY3Rpb24gKHgpDQoJew0KCQlyZXR1cm4gY3IuY2xh
bXBfYW5nbGUoY3IudG9fcmFkaWFucyh4KSk7DQoJfTsNCgljci5hbmdsZVRvID0gZnVuY3Rpb24o
eDEsIHkxLCB4MiwgeTIpDQoJew0KCQl2YXIgZHggPSB4MiAtIHgxOw0KICAgICAgICB2YXIgZHkg
PSB5MiAtIHkxOw0KCQlyZXR1cm4gTWF0aC5hdGFuMihkeSwgZHgpOw0KCX07DQoJY3IuYW5nbGVE
aWZmID0gZnVuY3Rpb24gKGExLCBhMikNCgl7DQoJCWlmIChhMSA9PT0gYTIpDQoJCQlyZXR1cm4g
MDsNCgkJdmFyIHMxID0gTWF0aC5zaW4oYTEpOw0KCQl2YXIgYzEgPSBNYXRoLmNvcyhhMSk7DQoJ
CXZhciBzMiA9IE1hdGguc2luKGEyKTsNCgkJdmFyIGMyID0gTWF0aC5jb3MoYTIpOw0KCQl2YXIg
biA9IHMxICogczIgKyBjMSAqIGMyOw0KCQlpZiAobiA+PSAxKQ0KCQkJcmV0dXJuIDA7DQoJCWlm
IChuIDw9IC0xKQ0KCQkJcmV0dXJuIGNyLlBJOw0KCQlyZXR1cm4gTWF0aC5hY29zKG4pOw0KCX07
DQoJY3IuYW5nbGVSb3RhdGUgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgc3RlcCkNCgl7DQoJCXZh
ciBzcyA9IE1hdGguc2luKHN0YXJ0KTsNCgkJdmFyIGNzID0gTWF0aC5jb3Moc3RhcnQpOw0KCQl2
YXIgc2UgPSBNYXRoLnNpbihlbmQpOw0KCQl2YXIgY2UgPSBNYXRoLmNvcyhlbmQpOw0KCQlpZiAo
TWF0aC5hY29zKHNzICogc2UgKyBjcyAqIGNlKSA+IHN0ZXApDQoJCXsNCgkJCWlmIChjcyAqIHNl
IC0gc3MgKiBjZSA+IDApDQoJCQkJcmV0dXJuIGNyLmNsYW1wX2FuZ2xlKHN0YXJ0ICsgc3RlcCk7
DQoJCQllbHNlDQoJCQkJcmV0dXJuIGNyLmNsYW1wX2FuZ2xlKHN0YXJ0IC0gc3RlcCk7DQoJCX0N
CgkJZWxzZQ0KCQkJcmV0dXJuIGNyLmNsYW1wX2FuZ2xlKGVuZCk7DQoJfTsNCgljci5hbmdsZUNs
b2Nrd2lzZSA9IGZ1bmN0aW9uIChhMSwgYTIpDQoJew0KCQl2YXIgczEgPSBNYXRoLnNpbihhMSk7
DQoJCXZhciBjMSA9IE1hdGguY29zKGExKTsNCgkJdmFyIHMyID0gTWF0aC5zaW4oYTIpOw0KCQl2
YXIgYzIgPSBNYXRoLmNvcyhhMik7DQoJCXJldHVybiBjMSAqIHMyIC0gczEgKiBjMiA8PSAwOw0K
CX07DQoJY3Iucm90YXRlUHRBcm91bmQgPSBmdW5jdGlvbiAocHgsIHB5LCBhLCBveCwgb3ksIGdl
dHgpDQoJew0KCQlpZiAoYSA9PT0gMCkNCgkJCXJldHVybiBnZXR4ID8gcHggOiBweTsNCgkJdmFy
IHNpbl9hID0gTWF0aC5zaW4oYSk7DQoJCXZhciBjb3NfYSA9IE1hdGguY29zKGEpOw0KCQlweCAt
PSBveDsNCgkJcHkgLT0gb3k7DQoJCXZhciBsZWZ0X3Npbl9hID0gcHggKiBzaW5fYTsNCgkJdmFy
IHRvcF9zaW5fYSA9IHB5ICogc2luX2E7DQoJCXZhciBsZWZ0X2Nvc19hID0gcHggKiBjb3NfYTsN
CgkJdmFyIHRvcF9jb3NfYSA9IHB5ICogY29zX2E7DQoJCXB4ID0gbGVmdF9jb3NfYSAtIHRvcF9z
aW5fYTsNCgkJcHkgPSB0b3BfY29zX2EgKyBsZWZ0X3Npbl9hOw0KCQlweCArPSBveDsNCgkJcHkg
Kz0gb3k7DQoJCXJldHVybiBnZXR4ID8gcHggOiBweTsNCgl9DQoJY3IuZGlzdGFuY2VUbyA9IGZ1
bmN0aW9uKHgxLCB5MSwgeDIsIHkyKQ0KCXsNCgkJdmFyIGR4ID0geDIgLSB4MTsNCiAgICAgICAg
dmFyIGR5ID0geTIgLSB5MTsNCgkJcmV0dXJuIE1hdGguc3FydChkeCpkeCArIGR5KmR5KTsNCgl9
Ow0KCWNyLnhvciA9IGZ1bmN0aW9uICh4LCB5KQ0KCXsNCgkJcmV0dXJuICF4ICE9PSAheTsNCgl9
Ow0KCWNyLmxlcnAgPSBmdW5jdGlvbiAoYSwgYiwgeCkNCgl7DQoJCXJldHVybiBhICsgKGIgLSBh
KSAqIHg7DQoJfTsNCgljci51bmxlcnAgPSBmdW5jdGlvbiAoYSwgYiwgYykNCgl7DQoJCWlmIChh
ID09PSBiKQ0KCQkJcmV0dXJuIDA7CQkvLyBhdm9pZCBkaXZpZGUgYnkgMA0KCQlyZXR1cm4gKGMg
LSBhKSAvIChiIC0gYSk7DQoJfTsNCgljci5hbmdsZWxlcnAgPSBmdW5jdGlvbiAoYSwgYiwgeCkN
Cgl7DQoJCXZhciBkaWZmID0gY3IuYW5nbGVEaWZmKGEsIGIpOw0KCQlpZiAoY3IuYW5nbGVDbG9j
a3dpc2UoYiwgYSkpDQoJCXsNCgkJCXJldHVybiBhICsgZGlmZiAqIHg7DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQlyZXR1cm4gYSAtIGRpZmYgKiB4Ow0KCQl9DQoJfTsNCgljci5xYXJwID0gZnVuY3Rp
b24gKGEsIGIsIGMsIHgpDQoJew0KCQlyZXR1cm4gY3IubGVycChjci5sZXJwKGEsIGIsIHgpLCBj
ci5sZXJwKGIsIGMsIHgpLCB4KTsNCgl9Ow0KCWNyLmN1YmljID0gZnVuY3Rpb24gKGEsIGIsIGMs
IGQsIHgpDQoJew0KCQlyZXR1cm4gY3IubGVycChjci5xYXJwKGEsIGIsIGMsIHgpLCBjci5xYXJw
KGIsIGMsIGQsIHgpLCB4KTsNCgl9Ow0KCWNyLmNvc3AgPSBmdW5jdGlvbiAoYSwgYiwgeCkNCgl7
DQoJCXJldHVybiAoYSArIGIgKyAoYSAtIGIpICogTWF0aC5jb3MoeCAqIE1hdGguUEkpKSAvIDI7
DQoJfTsNCgljci5oYXNBbnlPd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChvKQ0KCXsNCgkJdmFyIHA7
DQoJCWZvciAocCBpbiBvKQ0KCQl7DQoJCQlpZiAoby5oYXNPd25Qcm9wZXJ0eShwKSkNCgkJCQly
ZXR1cm4gdHJ1ZTsNCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCgljci53aXBlID0gZnVuY3Rp
b24gKG9iaikNCgl7DQoJCXZhciBwOw0KCQlmb3IgKHAgaW4gb2JqKQ0KCQl7DQoJCQlpZiAob2Jq
Lmhhc093blByb3BlcnR5KHApKQ0KCQkJCWRlbGV0ZSBvYmpbcF07DQoJCX0NCgl9Ow0KCXZhciBz
dGFydHVwX3RpbWUgPSArKG5ldyBEYXRlKCkpOw0KCWNyLnBlcmZvcm1hbmNlX25vdyA9IGZ1bmN0
aW9uKCkNCgl7DQoJCWlmICh0eXBlb2Ygd2luZG93WyJwZXJmb3JtYW5jZSJdICE9PSAidW5kZWZp
bmVkIikNCgkJew0KCQkJdmFyIHdpbnBlcmYgPSB3aW5kb3dbInBlcmZvcm1hbmNlIl07DQoJCQlp
ZiAodHlwZW9mIHdpbnBlcmYubm93ICE9PSAidW5kZWZpbmVkIikNCgkJCQlyZXR1cm4gd2lucGVy
Zi5ub3coKTsNCgkJCWVsc2UgaWYgKHR5cGVvZiB3aW5wZXJmWyJ3ZWJraXROb3ciXSAhPT0gInVu
ZGVmaW5lZCIpDQoJCQkJcmV0dXJuIHdpbnBlcmZbIndlYmtpdE5vdyJdKCk7DQoJCQllbHNlIGlm
ICh0eXBlb2Ygd2lucGVyZlsibW96Tm93Il0gIT09ICJ1bmRlZmluZWQiKQ0KCQkJCXJldHVybiB3
aW5wZXJmWyJtb3pOb3ciXSgpOw0KCQkJZWxzZSBpZiAodHlwZW9mIHdpbnBlcmZbIm1zTm93Il0g
IT09ICJ1bmRlZmluZWQiKQ0KCQkJCXJldHVybiB3aW5wZXJmWyJtc05vdyJdKCk7DQoJCX0NCgkJ
cmV0dXJuIERhdGUubm93KCkgLSBzdGFydHVwX3RpbWU7DQoJfTsNCgl2YXIgaXNDaHJvbWUgPSBm
YWxzZTsNCgl2YXIgaXNTYWZhcmkgPSBmYWxzZTsNCgl2YXIgaXNpT1MgPSBmYWxzZTsNCgl2YXIg
aXNFamVjdGEgPSBmYWxzZTsNCglpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpCQkv
LyBub3QgYzIgZWRpdG9yDQoJew0KCQlpc0Nocm9tZSA9IC9jaHJvbWUvaS50ZXN0KG5hdmlnYXRv
ci51c2VyQWdlbnQpIHx8IC9jaHJvbWl1bS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQoJ
CWlzU2FmYXJpID0gIWlzQ2hyb21lICYmIC9zYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdl
bnQpOw0KCQlpc2lPUyA9IC8oaXBob25lfGlwb2R8aXBhZCkvaS50ZXN0KG5hdmlnYXRvci51c2Vy
QWdlbnQpOw0KCQlpc0VqZWN0YSA9IHdpbmRvd1siYzJlamVjdGEiXTsNCgl9DQoJdmFyIHN1cHBv
cnRzX3NldCA9ICgoIWlzU2FmYXJpICYmICFpc0VqZWN0YSAmJiAhaXNpT1MpICYmICh0eXBlb2Yg
U2V0ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgU2V0LnByb3RvdHlwZVsiZm9yRWFjaCJdICE9
PSAidW5kZWZpbmVkIikpOw0KCWZ1bmN0aW9uIE9iamVjdFNldF8oKQ0KCXsNCgkJdGhpcy5zID0g
bnVsbDsNCgkJdGhpcy5pdGVtcyA9IG51bGw7CQkJLy8gbGF6eSBhbGxvY2F0ZWQgKGhvcGVmdWxs
eSByZXN1bHRzIGluIGJldHRlciBHQyBwZXJmb3JtYW5jZSkNCgkJdGhpcy5pdGVtX2NvdW50ID0g
MDsNCgkJaWYgKHN1cHBvcnRzX3NldCkNCgkJew0KCQkJdGhpcy5zID0gbmV3IFNldCgpOw0KCQl9
DQoJCXRoaXMudmFsdWVzX2NhY2hlID0gW107DQoJCXRoaXMuY2FjaGVfdmFsaWQgPSB0cnVlOw0K
CQljci5zZWFsKHRoaXMpOw0KCX07DQoJT2JqZWN0U2V0Xy5wcm90b3R5cGUuY29udGFpbnMgPSBm
dW5jdGlvbiAoeCkNCgl7DQoJCWlmICh0aGlzLmlzRW1wdHkoKSkNCgkJCXJldHVybiBmYWxzZTsN
CgkJaWYgKHN1cHBvcnRzX3NldCkNCgkJCXJldHVybiB0aGlzLnNbImhhcyJdKHgpOw0KCQllbHNl
DQoJCQlyZXR1cm4gKHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5oYXNPd25Qcm9wZXJ0eSh4KSk7
DQoJfTsNCglPYmplY3RTZXRfLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCWlm
IChzdXBwb3J0c19zZXQpDQoJCXsNCgkJCWlmICghdGhpcy5zWyJoYXMiXSh4KSkNCgkJCXsNCgkJ
CQl0aGlzLnNbImFkZCJdKHgpOw0KCQkJCXRoaXMuY2FjaGVfdmFsaWQgPSBmYWxzZTsNCgkJCX0N
CgkJfQ0KCQllbHNlDQoJCXsNCgkJCXZhciBzdHIgPSB4LnRvU3RyaW5nKCk7DQoJCQl2YXIgaXRl
bXMgPSB0aGlzLml0ZW1zOw0KCQkJaWYgKCFpdGVtcykNCgkJCXsNCgkJCQl0aGlzLml0ZW1zID0g
e307DQoJCQkJdGhpcy5pdGVtc1tzdHJdID0geDsNCgkJCQl0aGlzLml0ZW1fY291bnQgPSAxOw0K
CQkJCXRoaXMuY2FjaGVfdmFsaWQgPSBmYWxzZTsNCgkJCX0NCgkJCWVsc2UgaWYgKCFpdGVtcy5o
YXNPd25Qcm9wZXJ0eShzdHIpKQ0KCQkJew0KCQkJCWl0ZW1zW3N0cl0gPSB4Ow0KCQkJCXRoaXMu
aXRlbV9jb3VudCsrOw0KCQkJCXRoaXMuY2FjaGVfdmFsaWQgPSBmYWxzZTsNCgkJCX0NCgkJfQ0K
CX07DQoJT2JqZWN0U2V0Xy5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHgpDQoJew0KCQlp
ZiAodGhpcy5pc0VtcHR5KCkpDQoJCQlyZXR1cm47DQoJCWlmIChzdXBwb3J0c19zZXQpDQoJCXsN
CgkJCWlmICh0aGlzLnNbImhhcyJdKHgpKQ0KCQkJew0KCQkJCXRoaXMuc1siZGVsZXRlIl0oeCk7
DQoJCQkJdGhpcy5jYWNoZV92YWxpZCA9IGZhbHNlOw0KCQkJfQ0KCQl9DQoJCWVsc2UgaWYgKHRo
aXMuaXRlbXMpDQoJCXsNCgkJCXZhciBzdHIgPSB4LnRvU3RyaW5nKCk7DQoJCQl2YXIgaXRlbXMg
PSB0aGlzLml0ZW1zOw0KCQkJaWYgKGl0ZW1zLmhhc093blByb3BlcnR5KHN0cikpDQoJCQl7DQoJ
CQkJZGVsZXRlIGl0ZW1zW3N0cl07DQoJCQkJdGhpcy5pdGVtX2NvdW50LS07DQoJCQkJdGhpcy5j
YWNoZV92YWxpZCA9IGZhbHNlOw0KCQkJfQ0KCQl9DQoJfTsNCglPYmplY3RTZXRfLnByb3RvdHlw
ZS5jbGVhciA9IGZ1bmN0aW9uICgvKndpcGVfKi8pDQoJew0KCQlpZiAodGhpcy5pc0VtcHR5KCkp
DQoJCQlyZXR1cm47DQoJCWlmIChzdXBwb3J0c19zZXQpDQoJCXsNCgkJCXRoaXMuc1siY2xlYXIi
XSgpOwkJCS8vIGJlc3QhDQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQkJdGhpcy5pdGVtcyA9IG51bGw7
CQkvLyBjcmVhdGVzIGdhcmJhZ2U7IHdpbGwgbGF6eSBhbGxvY2F0ZSBvbiBuZXh0IGFkZCgpDQoJ
CQl0aGlzLml0ZW1fY291bnQgPSAwOw0KCQl9DQoJCWNyLmNsZWFyQXJyYXkodGhpcy52YWx1ZXNf
Y2FjaGUpOw0KCQl0aGlzLmNhY2hlX3ZhbGlkID0gdHJ1ZTsNCgl9Ow0KCU9iamVjdFNldF8ucHJv
dG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuY291bnQoKSA9
PT0gMDsNCgl9Ow0KCU9iamVjdFNldF8ucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKCkNCgl7
DQoJCWlmIChzdXBwb3J0c19zZXQpDQoJCQlyZXR1cm4gdGhpcy5zWyJzaXplIl07DQoJCWVsc2UN
CgkJCXJldHVybiB0aGlzLml0ZW1fY291bnQ7DQoJfTsNCgl2YXIgY3VycmVudF9hcnIgPSBudWxs
Ow0KCXZhciBjdXJyZW50X2luZGV4ID0gMDsNCglmdW5jdGlvbiBzZXRfYXBwZW5kX3RvX2Fycih4
KQ0KCXsNCgkJY3VycmVudF9hcnJbY3VycmVudF9pbmRleCsrXSA9IHg7DQoJfTsNCglPYmplY3RT
ZXRfLnByb3RvdHlwZS51cGRhdGVfY2FjaGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMu
Y2FjaGVfdmFsaWQpDQoJCQlyZXR1cm47DQoJCWlmIChzdXBwb3J0c19zZXQpDQoJCXsNCgkJCWNy
LmNsZWFyQXJyYXkodGhpcy52YWx1ZXNfY2FjaGUpOw0KCQkJY3VycmVudF9hcnIgPSB0aGlzLnZh
bHVlc19jYWNoZTsNCgkJCWN1cnJlbnRfaW5kZXggPSAwOw0KCQkJdGhpcy5zWyJmb3JFYWNoIl0o
c2V0X2FwcGVuZF90b19hcnIpOw0KOw0KCQkJY3VycmVudF9hcnIgPSBudWxsOw0KCQkJY3VycmVu
dF9pbmRleCA9IDA7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl2YXIgdmFsdWVzX2NhY2hlID0gdGhp
cy52YWx1ZXNfY2FjaGU7DQoJCQljci5jbGVhckFycmF5KHZhbHVlc19jYWNoZSk7DQoJCQl2YXIg
cCwgbiA9IDAsIGl0ZW1zID0gdGhpcy5pdGVtczsNCgkJCWlmIChpdGVtcykNCgkJCXsNCgkJCQlm
b3IgKHAgaW4gaXRlbXMpDQoJCQkJew0KCQkJCQlpZiAoaXRlbXMuaGFzT3duUHJvcGVydHkocCkp
DQoJCQkJCQl2YWx1ZXNfY2FjaGVbbisrXSA9IGl0ZW1zW3BdOw0KCQkJCX0NCgkJCX0NCjsNCgkJ
fQ0KCQl0aGlzLmNhY2hlX3ZhbGlkID0gdHJ1ZTsNCgl9Ow0KCU9iamVjdFNldF8ucHJvdG90eXBl
LnZhbHVlc1JlZiA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLnVwZGF0ZV9jYWNoZSgpOw0KCQly
ZXR1cm4gdGhpcy52YWx1ZXNfY2FjaGU7DQoJfTsNCgljci5PYmplY3RTZXQgPSBPYmplY3RTZXRf
Ow0KCXZhciB0bXBTZXQgPSBuZXcgY3IuT2JqZWN0U2V0KCk7DQoJY3IucmVtb3ZlQXJyYXlEdXBs
aWNhdGVzID0gZnVuY3Rpb24gKGFycikNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAs
IGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJdG1wU2V0LmFkZChhcnJb
aV0pOw0KCQl9DQoJCWNyLnNoYWxsb3dBc3NpZ25BcnJheShhcnIsIHRtcFNldC52YWx1ZXNSZWYo
KSk7DQoJCXRtcFNldC5jbGVhcigpOw0KCX07DQoJY3IuYXJyYXlSZW1vdmVBbGxGcm9tT2JqZWN0
U2V0ID0gZnVuY3Rpb24gKGFyciwgcmVtc2V0KQ0KCXsNCgkJaWYgKHN1cHBvcnRzX3NldCkNCgkJ
CWNyLmFycmF5UmVtb3ZlQWxsX3NldChhcnIsIHJlbXNldC5zKTsNCgkJZWxzZQ0KCQkJY3IuYXJy
YXlSZW1vdmVBbGxfYXJyKGFyciwgcmVtc2V0LnZhbHVlc1JlZigpKTsNCgl9Ow0KCWNyLmFycmF5
UmVtb3ZlQWxsX3NldCA9IGZ1bmN0aW9uIChhcnIsIHMpDQoJew0KCQl2YXIgaSwgaiwgbGVuLCBp
dGVtOw0KCQlmb3IgKGkgPSAwLCBqID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgKytp
KQ0KCQl7DQoJCQlpdGVtID0gYXJyW2ldOw0KCQkJaWYgKCFzWyJoYXMiXShpdGVtKSkJCQkJCS8v
IG5vdCBhbiBpdGVtIHRvIHJlbW92ZQ0KCQkJCWFycltqKytdID0gaXRlbTsJCQkJCS8vIGtlZXAg
aXQNCgkJfQ0KCQljci50cnVuY2F0ZUFycmF5KGFyciwgaik7DQoJfTsNCgljci5hcnJheVJlbW92
ZUFsbF9hcnIgPSBmdW5jdGlvbiAoYXJyLCByZW0pDQoJew0KCQl2YXIgaSwgaiwgbGVuLCBpdGVt
Ow0KCQlmb3IgKGkgPSAwLCBqID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0K
CQl7DQoJCQlpdGVtID0gYXJyW2ldOw0KCQkJaWYgKGNyLmZhc3RJbmRleE9mKHJlbSwgaXRlbSkg
PT09IC0xKQkvLyBub3QgYW4gaXRlbSB0byByZW1vdmUNCgkJCQlhcnJbaisrXSA9IGl0ZW07CQkJ
CQkvLyBrZWVwIGl0DQoJCX0NCgkJY3IudHJ1bmNhdGVBcnJheShhcnIsIGopOw0KCX07DQoJZnVu
Y3Rpb24gS2FoYW5BZGRlcl8oKQ0KCXsNCgkJdGhpcy5jID0gMDsNCiAgICAgICAgdGhpcy55ID0g
MDsNCiAgICAgICAgdGhpcy50ID0gMDsNCiAgICAgICAgdGhpcy5zdW0gPSAwOw0KCQljci5zZWFs
KHRoaXMpOw0KCX07DQoJS2FoYW5BZGRlcl8ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2KQ0K
CXsNCgkJdGhpcy55ID0gdiAtIHRoaXMuYzsNCgkgICAgdGhpcy50ID0gdGhpcy5zdW0gKyB0aGlz
Lnk7DQoJICAgIHRoaXMuYyA9ICh0aGlzLnQgLSB0aGlzLnN1bSkgLSB0aGlzLnk7DQoJICAgIHRo
aXMuc3VtID0gdGhpcy50Ow0KCX07DQogICAgS2FoYW5BZGRlcl8ucHJvdG90eXBlLnJlc2V0ID0g
ZnVuY3Rpb24gKCkNCiAgICB7DQogICAgICAgIHRoaXMuYyA9IDA7DQogICAgICAgIHRoaXMueSA9
IDA7DQogICAgICAgIHRoaXMudCA9IDA7DQogICAgICAgIHRoaXMuc3VtID0gMDsNCiAgICB9Ow0K
CWNyLkthaGFuQWRkZXIgPSBLYWhhbkFkZGVyXzsNCgljci5yZWdleHBfZXNjYXBlID0gZnVuY3Rp
b24odGV4dCkNCgl7DQoJCXJldHVybiB0ZXh0LnJlcGxhY2UoL1stW1xde30oKSorPy4sXFxeJHwj
XHNdL2csICJcXCQmIik7DQoJfTsNCglmdW5jdGlvbiBDb2xsaXNpb25Qb2x5XyhwdHNfYXJyYXlf
KQ0KCXsNCgkJdGhpcy5wdHNfY2FjaGUgPSBbXTsNCgkJdGhpcy5iYm94TGVmdCA9IDA7DQoJCXRo
aXMuYmJveFRvcCA9IDA7DQoJCXRoaXMuYmJveFJpZ2h0ID0gMDsNCgkJdGhpcy5iYm94Qm90dG9t
ID0gMDsNCgkJdGhpcy5jb252ZXhwb2x5cyA9IG51bGw7CQkvLyBmb3IgcGh5c2ljcyBiZWhhdmlv
ciB0byBjYWNoZSBzZXBhcmF0ZWQgcG9seXMNCgkJdGhpcy5zZXRfcHRzKHB0c19hcnJheV8pOw0K
CQljci5zZWFsKHRoaXMpOw0KCX07DQoJQ29sbGlzaW9uUG9seV8ucHJvdG90eXBlLnNldF9wdHMg
PSBmdW5jdGlvbihwdHNfYXJyYXlfKQ0KCXsNCgkJdGhpcy5wdHNfYXJyYXkgPSBwdHNfYXJyYXlf
Ow0KCQl0aGlzLnB0c19jb3VudCA9IHB0c19hcnJheV8ubGVuZ3RoIC8gMjsJCQkvLyB4LCB5LCB4
LCB5Li4uIGluIGFycmF5DQoJCXRoaXMucHRzX2NhY2hlLmxlbmd0aCA9IHB0c19hcnJheV8ubGVu
Z3RoOw0KCQl0aGlzLmNhY2hlX3dpZHRoID0gLTE7DQoJCXRoaXMuY2FjaGVfaGVpZ2h0ID0gLTE7
DQoJCXRoaXMuY2FjaGVfYW5nbGUgPSAwOw0KCX07DQoJQ29sbGlzaW9uUG9seV8ucHJvdG90eXBl
LmlzX2VtcHR5ID0gZnVuY3Rpb24oKQ0KCXsNCgkJcmV0dXJuICF0aGlzLnB0c19hcnJheS5sZW5n
dGg7DQoJfTsNCglDb2xsaXNpb25Qb2x5Xy5wcm90b3R5cGUudXBkYXRlX2Jib3ggPSBmdW5jdGlv
biAoKQ0KCXsNCgkJdmFyIG15cHRzY2FjaGUgPSB0aGlzLnB0c19jYWNoZTsNCgkJdmFyIGJib3hM
ZWZ0XyA9IG15cHRzY2FjaGVbMF07DQoJCXZhciBiYm94UmlnaHRfID0gYmJveExlZnRfOw0KCQl2
YXIgYmJveFRvcF8gPSBteXB0c2NhY2hlWzFdOw0KCQl2YXIgYmJveEJvdHRvbV8gPSBiYm94VG9w
XzsNCgkJdmFyIHgsIHksIGkgPSAxLCBpMiwgbGVuID0gdGhpcy5wdHNfY291bnQ7DQoJCWZvciAo
IDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlpMiA9IGkqMjsNCgkJCXggPSBteXB0c2NhY2hlW2ky
XTsNCgkJCXkgPSBteXB0c2NhY2hlW2kyKzFdOw0KCQkJaWYgKHggPCBiYm94TGVmdF8pDQoJCQkJ
YmJveExlZnRfID0geDsNCgkJCWlmICh4ID4gYmJveFJpZ2h0XykNCgkJCQliYm94UmlnaHRfID0g
eDsNCgkJCWlmICh5IDwgYmJveFRvcF8pDQoJCQkJYmJveFRvcF8gPSB5Ow0KCQkJaWYgKHkgPiBi
Ym94Qm90dG9tXykNCgkJCQliYm94Qm90dG9tXyA9IHk7DQoJCX0NCgkJdGhpcy5iYm94TGVmdCA9
IGJib3hMZWZ0XzsNCgkJdGhpcy5iYm94UmlnaHQgPSBiYm94UmlnaHRfOw0KCQl0aGlzLmJib3hU
b3AgPSBiYm94VG9wXzsNCgkJdGhpcy5iYm94Qm90dG9tID0gYmJveEJvdHRvbV87DQoJfTsNCglD
b2xsaXNpb25Qb2x5Xy5wcm90b3R5cGUuc2V0X2Zyb21fcmVjdCA9IGZ1bmN0aW9uKHJjLCBvZmZ4
LCBvZmZ5KQ0KCXsNCgkJdGhpcy5wdHNfY2FjaGUubGVuZ3RoID0gODsNCgkJdGhpcy5wdHNfY291
bnQgPSA0Ow0KCQl2YXIgbXlwdHNjYWNoZSA9IHRoaXMucHRzX2NhY2hlOw0KCQlteXB0c2NhY2hl
WzBdID0gcmMubGVmdCAtIG9mZng7DQoJCW15cHRzY2FjaGVbMV0gPSByYy50b3AgLSBvZmZ5Ow0K
CQlteXB0c2NhY2hlWzJdID0gcmMucmlnaHQgLSBvZmZ4Ow0KCQlteXB0c2NhY2hlWzNdID0gcmMu
dG9wIC0gb2ZmeTsNCgkJbXlwdHNjYWNoZVs0XSA9IHJjLnJpZ2h0IC0gb2ZmeDsNCgkJbXlwdHNj
YWNoZVs1XSA9IHJjLmJvdHRvbSAtIG9mZnk7DQoJCW15cHRzY2FjaGVbNl0gPSByYy5sZWZ0IC0g
b2ZmeDsNCgkJbXlwdHNjYWNoZVs3XSA9IHJjLmJvdHRvbSAtIG9mZnk7DQoJCXRoaXMuY2FjaGVf
d2lkdGggPSByYy5yaWdodCAtIHJjLmxlZnQ7DQoJCXRoaXMuY2FjaGVfaGVpZ2h0ID0gcmMuYm90
dG9tIC0gcmMudG9wOw0KCQl0aGlzLnVwZGF0ZV9iYm94KCk7DQoJfTsNCglDb2xsaXNpb25Qb2x5
Xy5wcm90b3R5cGUuc2V0X2Zyb21fcXVhZCA9IGZ1bmN0aW9uKHEsIG9mZngsIG9mZnksIHcsIGgp
DQoJew0KCQl0aGlzLnB0c19jYWNoZS5sZW5ndGggPSA4Ow0KCQl0aGlzLnB0c19jb3VudCA9IDQ7
DQoJCXZhciBteXB0c2NhY2hlID0gdGhpcy5wdHNfY2FjaGU7DQoJCW15cHRzY2FjaGVbMF0gPSBx
LnRseCAtIG9mZng7DQoJCW15cHRzY2FjaGVbMV0gPSBxLnRseSAtIG9mZnk7DQoJCW15cHRzY2Fj
aGVbMl0gPSBxLnRyeCAtIG9mZng7DQoJCW15cHRzY2FjaGVbM10gPSBxLnRyeV8gLSBvZmZ5Ow0K
CQlteXB0c2NhY2hlWzRdID0gcS5icnggLSBvZmZ4Ow0KCQlteXB0c2NhY2hlWzVdID0gcS5icnkg
LSBvZmZ5Ow0KCQlteXB0c2NhY2hlWzZdID0gcS5ibHggLSBvZmZ4Ow0KCQlteXB0c2NhY2hlWzdd
ID0gcS5ibHkgLSBvZmZ5Ow0KCQl0aGlzLmNhY2hlX3dpZHRoID0gdzsNCgkJdGhpcy5jYWNoZV9o
ZWlnaHQgPSBoOw0KCQl0aGlzLnVwZGF0ZV9iYm94KCk7DQoJfTsNCglDb2xsaXNpb25Qb2x5Xy5w
cm90b3R5cGUuc2V0X2Zyb21fcG9seSA9IGZ1bmN0aW9uIChyKQ0KCXsNCgkJdGhpcy5wdHNfY291
bnQgPSByLnB0c19jb3VudDsNCgkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHRoaXMucHRzX2NhY2hl
LCByLnB0c19jYWNoZSk7DQoJCXRoaXMuYmJveExlZnQgPSByLmJib3hMZWZ0Ow0KCQl0aGlzLmJi
b3hUb3AgPSByLmJib3hUb3A7DQoJCXRoaXMuYmJveFJpZ2h0ID0gci5iYm94UmlnaHQ7DQoJCXRo
aXMuYmJveEJvdHRvbSA9IHIuYmJveEJvdHRvbTsNCgl9Ow0KCUNvbGxpc2lvblBvbHlfLnByb3Rv
dHlwZS5jYWNoZV9wb2x5ID0gZnVuY3Rpb24odywgaCwgYSkNCgl7DQoJCWlmICh0aGlzLmNhY2hl
X3dpZHRoID09PSB3ICYmIHRoaXMuY2FjaGVfaGVpZ2h0ID09PSBoICYmIHRoaXMuY2FjaGVfYW5n
bGUgPT09IGEpDQoJCQlyZXR1cm47CQkvLyBjYWNoZSB1cC10by1kYXRlDQoJCXRoaXMuY2FjaGVf
d2lkdGggPSB3Ow0KCQl0aGlzLmNhY2hlX2hlaWdodCA9IGg7DQoJCXRoaXMuY2FjaGVfYW5nbGUg
PSBhOw0KCQl2YXIgaSwgaTIsIGkyMSwgbGVuLCB4LCB5Ow0KCQl2YXIgc2luYSA9IDA7DQoJCXZh
ciBjb3NhID0gMTsNCgkJdmFyIG15cHRzYXJyYXkgPSB0aGlzLnB0c19hcnJheTsNCgkJdmFyIG15
cHRzY2FjaGUgPSB0aGlzLnB0c19jYWNoZTsNCgkJaWYgKGEgIT09IDApDQoJCXsNCgkJCXNpbmEg
PSBNYXRoLnNpbihhKTsNCgkJCWNvc2EgPSBNYXRoLmNvcyhhKTsNCgkJfQ0KCQlmb3IgKGkgPSAw
LCBsZW4gPSB0aGlzLnB0c19jb3VudDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpMiA9IGkqMjsN
CgkJCWkyMSA9IGkyKzE7DQoJCQl4ID0gbXlwdHNhcnJheVtpMl0gKiB3Ow0KCQkJeSA9IG15cHRz
YXJyYXlbaTIxXSAqIGg7DQoJCQlteXB0c2NhY2hlW2kyXSA9ICh4ICogY29zYSkgLSAoeSAqIHNp
bmEpOw0KCQkJbXlwdHNjYWNoZVtpMjFdID0gKHkgKiBjb3NhKSArICh4ICogc2luYSk7DQoJCX0N
CgkJdGhpcy51cGRhdGVfYmJveCgpOw0KCX07DQoJQ29sbGlzaW9uUG9seV8ucHJvdG90eXBlLmNv
bnRhaW5zX3B0ID0gZnVuY3Rpb24gKGEyeCwgYTJ5KQ0KCXsNCgkJdmFyIG15cHRzY2FjaGUgPSB0
aGlzLnB0c19jYWNoZTsNCgkJaWYgKGEyeCA9PT0gbXlwdHNjYWNoZVswXSAmJiBhMnkgPT09IG15
cHRzY2FjaGVbMV0pDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJdmFyIGksIGkyLCBpbW9kLCBsZW4gPSB0
aGlzLnB0c19jb3VudDsNCgkJdmFyIGExeCA9IHRoaXMuYmJveExlZnQgLSAxMTA7DQoJCXZhciBh
MXkgPSB0aGlzLmJib3hUb3AgLSAxMDE7DQoJCXZhciBhM3ggPSB0aGlzLmJib3hSaWdodCArIDEz
MQ0KCQl2YXIgYTN5ID0gdGhpcy5iYm94Qm90dG9tICsgMTIwOw0KCQl2YXIgYjF4LCBiMXksIGIy
eCwgYjJ5Ow0KCQl2YXIgY291bnQxID0gMCwgY291bnQyID0gMDsNCgkJZm9yIChpID0gMDsgaSA8
IGxlbjsgaSsrKQ0KCQl7DQoJCQlpMiA9IGkqMjsNCgkJCWltb2QgPSAoKGkrMSklbGVuKSoyOw0K
CQkJYjF4ID0gbXlwdHNjYWNoZVtpMl07DQoJCQliMXkgPSBteXB0c2NhY2hlW2kyKzFdOw0KCQkJ
YjJ4ID0gbXlwdHNjYWNoZVtpbW9kXTsNCgkJCWIyeSA9IG15cHRzY2FjaGVbaW1vZCsxXTsNCgkJ
CWlmIChjci5zZWdtZW50c19pbnRlcnNlY3QoYTF4LCBhMXksIGEyeCwgYTJ5LCBiMXgsIGIxeSwg
YjJ4LCBiMnkpKQ0KCQkJCWNvdW50MSsrOw0KCQkJaWYgKGNyLnNlZ21lbnRzX2ludGVyc2VjdChh
M3gsIGEzeSwgYTJ4LCBhMnksIGIxeCwgYjF5LCBiMngsIGIyeSkpDQoJCQkJY291bnQyKys7DQoJ
CX0NCgkJcmV0dXJuIChjb3VudDEgJSAyID09PSAxKSB8fCAoY291bnQyICUgMiA9PT0gMSk7DQoJ
fTsNCglDb2xsaXNpb25Qb2x5Xy5wcm90b3R5cGUuaW50ZXJzZWN0c19wb2x5ID0gZnVuY3Rpb24g
KHJocywgb2ZmeCwgb2ZmeSkNCgl7DQoJCXZhciByaHNwdHMgPSByaHMucHRzX2NhY2hlOw0KCQl2
YXIgbXlwdHMgPSB0aGlzLnB0c19jYWNoZTsNCgkJaWYgKHRoaXMuY29udGFpbnNfcHQocmhzcHRz
WzBdICsgb2ZmeCwgcmhzcHRzWzFdICsgb2ZmeSkpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJaWYgKHJo
cy5jb250YWluc19wdChteXB0c1swXSAtIG9mZngsIG15cHRzWzFdIC0gb2ZmeSkpDQoJCQlyZXR1
cm4gdHJ1ZTsNCgkJdmFyIGksIGkyLCBpbW9kLCBsZW5pLCBqLCBqMiwgam1vZCwgbGVuajsNCgkJ
dmFyIGExeCwgYTF5LCBhMngsIGEyeSwgYjF4LCBiMXksIGIyeCwgYjJ5Ow0KCQlmb3IgKGkgPSAw
LCBsZW5pID0gdGhpcy5wdHNfY291bnQ7IGkgPCBsZW5pOyBpKyspDQoJCXsNCgkJCWkyID0gaSoy
Ow0KCQkJaW1vZCA9ICgoaSsxKSVsZW5pKSoyOw0KCQkJYTF4ID0gbXlwdHNbaTJdOw0KCQkJYTF5
ID0gbXlwdHNbaTIrMV07DQoJCQlhMnggPSBteXB0c1tpbW9kXTsNCgkJCWEyeSA9IG15cHRzW2lt
b2QrMV07DQoJCQlmb3IgKGogPSAwLCBsZW5qID0gcmhzLnB0c19jb3VudDsgaiA8IGxlbmo7IGor
KykNCgkJCXsNCgkJCQlqMiA9IGoqMjsNCgkJCQlqbW9kID0gKChqKzEpJWxlbmopKjI7DQoJCQkJ
YjF4ID0gcmhzcHRzW2oyXSArIG9mZng7DQoJCQkJYjF5ID0gcmhzcHRzW2oyKzFdICsgb2ZmeTsN
CgkJCQliMnggPSByaHNwdHNbam1vZF0gKyBvZmZ4Ow0KCQkJCWIyeSA9IHJoc3B0c1tqbW9kKzFd
ICsgb2ZmeTsNCgkJCQlpZiAoY3Iuc2VnbWVudHNfaW50ZXJzZWN0KGExeCwgYTF5LCBhMngsIGEy
eSwgYjF4LCBiMXksIGIyeCwgYjJ5KSkNCgkJCQkJcmV0dXJuIHRydWU7DQoJCQl9DQoJCX0NCgkJ
cmV0dXJuIGZhbHNlOw0KCX07DQoJQ29sbGlzaW9uUG9seV8ucHJvdG90eXBlLmludGVyc2VjdHNf
c2VnbWVudCA9IGZ1bmN0aW9uIChvZmZ4LCBvZmZ5LCB4MSwgeTEsIHgyLCB5MikNCgl7DQoJCXZh
ciBteXB0cyA9IHRoaXMucHRzX2NhY2hlOw0KCQlpZiAodGhpcy5jb250YWluc19wdCh4MSAtIG9m
ZngsIHkxIC0gb2ZmeSkpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJdmFyIGksIGxlbmksIGkyLCBpbW9k
Ow0KCQl2YXIgYTF4LCBhMXksIGEyeCwgYTJ5Ow0KCQlmb3IgKGkgPSAwLCBsZW5pID0gdGhpcy5w
dHNfY291bnQ7IGkgPCBsZW5pOyBpKyspDQoJCXsNCgkJCWkyID0gaSoyOw0KCQkJaW1vZCA9ICgo
aSsxKSVsZW5pKSoyOw0KCQkJYTF4ID0gbXlwdHNbaTJdICsgb2ZmeDsNCgkJCWExeSA9IG15cHRz
W2kyKzFdICsgb2ZmeTsNCgkJCWEyeCA9IG15cHRzW2ltb2RdICsgb2ZmeDsNCgkJCWEyeSA9IG15
cHRzW2ltb2QrMV0gKyBvZmZ5Ow0KCQkJaWYgKGNyLnNlZ21lbnRzX2ludGVyc2VjdCh4MSwgeTEs
IHgyLCB5MiwgYTF4LCBhMXksIGEyeCwgYTJ5KSkNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCQly
ZXR1cm4gZmFsc2U7DQoJfTsNCglDb2xsaXNpb25Qb2x5Xy5wcm90b3R5cGUubWlycm9yID0gZnVu
Y3Rpb24gKHB4KQ0KCXsNCgkJdmFyIGksIGxlbmksIGkyOw0KCQlmb3IgKGkgPSAwLCBsZW5pID0g
dGhpcy5wdHNfY291bnQ7IGkgPCBsZW5pOyArK2kpDQoJCXsNCgkJCWkyID0gaSoyOw0KCQkJdGhp
cy5wdHNfY2FjaGVbaTJdID0gcHggKiAyIC0gdGhpcy5wdHNfY2FjaGVbaTJdOw0KCQl9DQoJfTsN
CglDb2xsaXNpb25Qb2x5Xy5wcm90b3R5cGUuZmxpcCA9IGZ1bmN0aW9uIChweSkNCgl7DQoJCXZh
ciBpLCBsZW5pLCBpMjE7DQoJCWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLnB0c19jb3VudDsgaSA8
IGxlbmk7ICsraSkNCgkJew0KCQkJaTIxID0gaSoyKzE7DQoJCQl0aGlzLnB0c19jYWNoZVtpMjFd
ID0gcHkgKiAyIC0gdGhpcy5wdHNfY2FjaGVbaTIxXTsNCgkJfQ0KCX07DQoJQ29sbGlzaW9uUG9s
eV8ucHJvdG90eXBlLmRpYWcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxlbmksIGkyLCBp
MjEsIHRlbXA7DQoJCWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLnB0c19jb3VudDsgaSA8IGxlbmk7
ICsraSkNCgkJew0KCQkJaTIgPSBpKjI7DQoJCQlpMjEgPSBpMisxOw0KCQkJdGVtcCA9IHRoaXMu
cHRzX2NhY2hlW2kyXTsNCgkJCXRoaXMucHRzX2NhY2hlW2kyXSA9IHRoaXMucHRzX2NhY2hlW2ky
MV07DQoJCQl0aGlzLnB0c19jYWNoZVtpMjFdID0gdGVtcDsNCgkJfQ0KCX07DQoJY3IuQ29sbGlz
aW9uUG9seSA9IENvbGxpc2lvblBvbHlfOw0KCWZ1bmN0aW9uIFNwYXJzZUdyaWRfKGNlbGx3aWR0
aF8sIGNlbGxoZWlnaHRfKQ0KCXsNCgkJdGhpcy5jZWxsd2lkdGggPSBjZWxsd2lkdGhfOw0KCQl0
aGlzLmNlbGxoZWlnaHQgPSBjZWxsaGVpZ2h0XzsNCgkJdGhpcy5jZWxscyA9IHt9Ow0KCX07DQoJ
U3BhcnNlR3JpZF8ucHJvdG90eXBlLnRvdGFsQ2VsbENvdW50ID0gMDsNCglTcGFyc2VHcmlkXy5w
cm90b3R5cGUuZ2V0Q2VsbCA9IGZ1bmN0aW9uICh4XywgeV8sIGNyZWF0ZV9pZl9taXNzaW5nKQ0K
CXsNCgkJdmFyIHJldDsNCgkJdmFyIGNvbCA9IHRoaXMuY2VsbHNbeF9dOw0KCQlpZiAoIWNvbCkN
CgkJew0KCQkJaWYgKGNyZWF0ZV9pZl9taXNzaW5nKQ0KCQkJew0KCQkJCXJldCA9IGFsbG9jR3Jp
ZENlbGwodGhpcywgeF8sIHlfKTsNCgkJCQl0aGlzLmNlbGxzW3hfXSA9IHt9Ow0KCQkJCXRoaXMu
Y2VsbHNbeF9dW3lfXSA9IHJldDsNCgkJCQlyZXR1cm4gcmV0Ow0KCQkJfQ0KCQkJZWxzZQ0KCQkJ
CXJldHVybiBudWxsOw0KCQl9DQoJCXJldCA9IGNvbFt5X107DQoJCWlmIChyZXQpDQoJCQlyZXR1
cm4gcmV0Ow0KCQllbHNlIGlmIChjcmVhdGVfaWZfbWlzc2luZykNCgkJew0KCQkJcmV0ID0gYWxs
b2NHcmlkQ2VsbCh0aGlzLCB4XywgeV8pOw0KCQkJdGhpcy5jZWxsc1t4X11beV9dID0gcmV0Ow0K
CQkJcmV0dXJuIHJldDsNCgkJfQ0KCQllbHNlDQoJCQlyZXR1cm4gbnVsbDsNCgl9Ow0KCVNwYXJz
ZUdyaWRfLnByb3RvdHlwZS5YVG9DZWxsID0gZnVuY3Rpb24gKHhfKQ0KCXsNCgkJcmV0dXJuIGNy
LmZsb29yKHhfIC8gdGhpcy5jZWxsd2lkdGgpOw0KCX07DQoJU3BhcnNlR3JpZF8ucHJvdG90eXBl
LllUb0NlbGwgPSBmdW5jdGlvbiAoeV8pDQoJew0KCQlyZXR1cm4gY3IuZmxvb3IoeV8gLyB0aGlz
LmNlbGxoZWlnaHQpOw0KCX07DQoJU3BhcnNlR3JpZF8ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0
aW9uIChpbnN0LCBvbGRyYW5nZSwgbmV3cmFuZ2UpDQoJew0KCQl2YXIgeCwgbGVueCwgeSwgbGVu
eSwgY2VsbDsNCgkJaWYgKG9sZHJhbmdlKQ0KCQl7DQoJCQlmb3IgKHggPSBvbGRyYW5nZS5sZWZ0
LCBsZW54ID0gb2xkcmFuZ2UucmlnaHQ7IHggPD0gbGVueDsgKyt4KQ0KCQkJew0KCQkJCWZvciAo
eSA9IG9sZHJhbmdlLnRvcCwgbGVueSA9IG9sZHJhbmdlLmJvdHRvbTsgeSA8PSBsZW55OyArK3kp
DQoJCQkJew0KCQkJCQlpZiAobmV3cmFuZ2UgJiYgbmV3cmFuZ2UuY29udGFpbnNfcHQoeCwgeSkp
DQoJCQkJCQljb250aW51ZTsJLy8gaXMgc3RpbGwgaW4gdGhpcyBjZWxsDQoJCQkJCWNlbGwgPSB0
aGlzLmdldENlbGwoeCwgeSwgZmFsc2UpOwkvLyBkb24ndCBjcmVhdGUgaWYgbWlzc2luZw0KCQkJ
CQlpZiAoIWNlbGwpDQoJCQkJCQljb250aW51ZTsJLy8gY2VsbCBkb2VzIG5vdCBleGlzdCB5ZXQN
CgkJCQkJY2VsbC5yZW1vdmUoaW5zdCk7DQoJCQkJCWlmIChjZWxsLmlzRW1wdHkoKSkNCgkJCQkJ
ew0KCQkJCQkJZnJlZUdyaWRDZWxsKGNlbGwpOw0KCQkJCQkJdGhpcy5jZWxsc1t4XVt5XSA9IG51
bGw7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgkJaWYgKG5ld3JhbmdlKQ0KCQl7DQoJCQlm
b3IgKHggPSBuZXdyYW5nZS5sZWZ0LCBsZW54ID0gbmV3cmFuZ2UucmlnaHQ7IHggPD0gbGVueDsg
Kyt4KQ0KCQkJew0KCQkJCWZvciAoeSA9IG5ld3JhbmdlLnRvcCwgbGVueSA9IG5ld3JhbmdlLmJv
dHRvbTsgeSA8PSBsZW55OyArK3kpDQoJCQkJew0KCQkJCQlpZiAob2xkcmFuZ2UgJiYgb2xkcmFu
Z2UuY29udGFpbnNfcHQoeCwgeSkpDQoJCQkJCQljb250aW51ZTsJLy8gaXMgc3RpbGwgaW4gdGhp
cyBjZWxsDQoJCQkJCXRoaXMuZ2V0Q2VsbCh4LCB5LCB0cnVlKS5pbnNlcnQoaW5zdCk7DQoJCQkJ
fQ0KCQkJfQ0KCQl9DQoJfTsNCglTcGFyc2VHcmlkXy5wcm90b3R5cGUucXVlcnlSYW5nZSA9IGZ1
bmN0aW9uIChyYywgcmVzdWx0KQ0KCXsNCgkJdmFyIHgsIGxlbngsIHlzdGFydCwgeSwgbGVueSwg
Y2VsbDsNCgkJeCA9IHRoaXMuWFRvQ2VsbChyYy5sZWZ0KTsNCgkJeXN0YXJ0ID0gdGhpcy5ZVG9D
ZWxsKHJjLnRvcCk7DQoJCWxlbnggPSB0aGlzLlhUb0NlbGwocmMucmlnaHQpOw0KCQlsZW55ID0g
dGhpcy5ZVG9DZWxsKHJjLmJvdHRvbSk7DQoJCWZvciAoIDsgeCA8PSBsZW54OyArK3gpDQoJCXsN
CgkJCWZvciAoeSA9IHlzdGFydDsgeSA8PSBsZW55OyArK3kpDQoJCQl7DQoJCQkJY2VsbCA9IHRo
aXMuZ2V0Q2VsbCh4LCB5LCBmYWxzZSk7DQoJCQkJaWYgKCFjZWxsKQ0KCQkJCQljb250aW51ZTsN
CgkJCQljZWxsLmR1bXAocmVzdWx0KTsNCgkJCX0NCgkJfQ0KCX07DQoJY3IuU3BhcnNlR3JpZCA9
IFNwYXJzZUdyaWRfOw0KCWZ1bmN0aW9uIFJlbmRlckdyaWRfKGNlbGx3aWR0aF8sIGNlbGxoZWln
aHRfKQ0KCXsNCgkJdGhpcy5jZWxsd2lkdGggPSBjZWxsd2lkdGhfOw0KCQl0aGlzLmNlbGxoZWln
aHQgPSBjZWxsaGVpZ2h0XzsNCgkJdGhpcy5jZWxscyA9IHt9Ow0KCX07DQoJUmVuZGVyR3JpZF8u
cHJvdG90eXBlLnRvdGFsQ2VsbENvdW50ID0gMDsNCglSZW5kZXJHcmlkXy5wcm90b3R5cGUuZ2V0
Q2VsbCA9IGZ1bmN0aW9uICh4XywgeV8sIGNyZWF0ZV9pZl9taXNzaW5nKQ0KCXsNCgkJdmFyIHJl
dDsNCgkJdmFyIGNvbCA9IHRoaXMuY2VsbHNbeF9dOw0KCQlpZiAoIWNvbCkNCgkJew0KCQkJaWYg
KGNyZWF0ZV9pZl9taXNzaW5nKQ0KCQkJew0KCQkJCXJldCA9IGFsbG9jUmVuZGVyQ2VsbCh0aGlz
LCB4XywgeV8pOw0KCQkJCXRoaXMuY2VsbHNbeF9dID0ge307DQoJCQkJdGhpcy5jZWxsc1t4X11b
eV9dID0gcmV0Ow0KCQkJCXJldHVybiByZXQ7DQoJCQl9DQoJCQllbHNlDQoJCQkJcmV0dXJuIG51
bGw7DQoJCX0NCgkJcmV0ID0gY29sW3lfXTsNCgkJaWYgKHJldCkNCgkJCXJldHVybiByZXQ7DQoJ
CWVsc2UgaWYgKGNyZWF0ZV9pZl9taXNzaW5nKQ0KCQl7DQoJCQlyZXQgPSBhbGxvY1JlbmRlckNl
bGwodGhpcywgeF8sIHlfKTsNCgkJCXRoaXMuY2VsbHNbeF9dW3lfXSA9IHJldDsNCgkJCXJldHVy
biByZXQ7DQoJCX0NCgkJZWxzZQ0KCQkJcmV0dXJuIG51bGw7DQoJfTsNCglSZW5kZXJHcmlkXy5w
cm90b3R5cGUuWFRvQ2VsbCA9IGZ1bmN0aW9uICh4XykNCgl7DQoJCXJldHVybiBjci5mbG9vcih4
XyAvIHRoaXMuY2VsbHdpZHRoKTsNCgl9Ow0KCVJlbmRlckdyaWRfLnByb3RvdHlwZS5ZVG9DZWxs
ID0gZnVuY3Rpb24gKHlfKQ0KCXsNCgkJcmV0dXJuIGNyLmZsb29yKHlfIC8gdGhpcy5jZWxsaGVp
Z2h0KTsNCgl9Ow0KCVJlbmRlckdyaWRfLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoaW5z
dCwgb2xkcmFuZ2UsIG5ld3JhbmdlKQ0KCXsNCgkJdmFyIHgsIGxlbngsIHksIGxlbnksIGNlbGw7
DQoJCWlmIChvbGRyYW5nZSkNCgkJew0KCQkJZm9yICh4ID0gb2xkcmFuZ2UubGVmdCwgbGVueCA9
IG9sZHJhbmdlLnJpZ2h0OyB4IDw9IGxlbng7ICsreCkNCgkJCXsNCgkJCQlmb3IgKHkgPSBvbGRy
YW5nZS50b3AsIGxlbnkgPSBvbGRyYW5nZS5ib3R0b207IHkgPD0gbGVueTsgKyt5KQ0KCQkJCXsN
CgkJCQkJaWYgKG5ld3JhbmdlICYmIG5ld3JhbmdlLmNvbnRhaW5zX3B0KHgsIHkpKQ0KCQkJCQkJ
Y29udGludWU7CS8vIGlzIHN0aWxsIGluIHRoaXMgY2VsbA0KCQkJCQljZWxsID0gdGhpcy5nZXRD
ZWxsKHgsIHksIGZhbHNlKTsJLy8gZG9uJ3QgY3JlYXRlIGlmIG1pc3NpbmcNCgkJCQkJaWYgKCFj
ZWxsKQ0KCQkJCQkJY29udGludWU7CS8vIGNlbGwgZG9lcyBub3QgZXhpc3QgeWV0DQoJCQkJCWNl
bGwucmVtb3ZlKGluc3QpOw0KCQkJCQlpZiAoY2VsbC5pc0VtcHR5KCkpDQoJCQkJCXsNCgkJCQkJ
CWZyZWVSZW5kZXJDZWxsKGNlbGwpOw0KCQkJCQkJdGhpcy5jZWxsc1t4XVt5XSA9IG51bGw7DQoJ
CQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgkJaWYgKG5ld3JhbmdlKQ0KCQl7DQoJCQlmb3IgKHgg
PSBuZXdyYW5nZS5sZWZ0LCBsZW54ID0gbmV3cmFuZ2UucmlnaHQ7IHggPD0gbGVueDsgKyt4KQ0K
CQkJew0KCQkJCWZvciAoeSA9IG5ld3JhbmdlLnRvcCwgbGVueSA9IG5ld3JhbmdlLmJvdHRvbTsg
eSA8PSBsZW55OyArK3kpDQoJCQkJew0KCQkJCQlpZiAob2xkcmFuZ2UgJiYgb2xkcmFuZ2UuY29u
dGFpbnNfcHQoeCwgeSkpDQoJCQkJCQljb250aW51ZTsJLy8gaXMgc3RpbGwgaW4gdGhpcyBjZWxs
DQoJCQkJCXRoaXMuZ2V0Q2VsbCh4LCB5LCB0cnVlKS5pbnNlcnQoaW5zdCk7DQoJCQkJfQ0KCQkJ
fQ0KCQl9DQoJfTsNCglSZW5kZXJHcmlkXy5wcm90b3R5cGUucXVlcnlSYW5nZSA9IGZ1bmN0aW9u
IChsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20sIHJlc3VsdCkNCgl7DQoJCXZhciB4LCBsZW54LCB5
c3RhcnQsIHksIGxlbnksIGNlbGw7DQoJCXggPSB0aGlzLlhUb0NlbGwobGVmdCk7DQoJCXlzdGFy
dCA9IHRoaXMuWVRvQ2VsbCh0b3ApOw0KCQlsZW54ID0gdGhpcy5YVG9DZWxsKHJpZ2h0KTsNCgkJ
bGVueSA9IHRoaXMuWVRvQ2VsbChib3R0b20pOw0KCQlmb3IgKCA7IHggPD0gbGVueDsgKyt4KQ0K
CQl7DQoJCQlmb3IgKHkgPSB5c3RhcnQ7IHkgPD0gbGVueTsgKyt5KQ0KCQkJew0KCQkJCWNlbGwg
PSB0aGlzLmdldENlbGwoeCwgeSwgZmFsc2UpOw0KCQkJCWlmICghY2VsbCkNCgkJCQkJY29udGlu
dWU7DQoJCQkJY2VsbC5kdW1wKHJlc3VsdCk7DQoJCQl9DQoJCX0NCgl9Ow0KCVJlbmRlckdyaWRf
LnByb3RvdHlwZS5tYXJrUmFuZ2VDaGFuZ2VkID0gZnVuY3Rpb24gKHJjKQ0KCXsNCgkJdmFyIHgs
IGxlbngsIHlzdGFydCwgeSwgbGVueSwgY2VsbDsNCgkJeCA9IHJjLmxlZnQ7DQoJCXlzdGFydCA9
IHJjLnRvcDsNCgkJbGVueCA9IHJjLnJpZ2h0Ow0KCQlsZW55ID0gcmMuYm90dG9tOw0KCQlmb3Ig
KCA7IHggPD0gbGVueDsgKyt4KQ0KCQl7DQoJCQlmb3IgKHkgPSB5c3RhcnQ7IHkgPD0gbGVueTsg
Kyt5KQ0KCQkJew0KCQkJCWNlbGwgPSB0aGlzLmdldENlbGwoeCwgeSwgZmFsc2UpOw0KCQkJCWlm
ICghY2VsbCkNCgkJCQkJY29udGludWU7DQoJCQkJY2VsbC5pc19zb3J0ZWQgPSBmYWxzZTsNCgkJ
CX0NCgkJfQ0KCX07DQoJY3IuUmVuZGVyR3JpZCA9IFJlbmRlckdyaWRfOw0KCXZhciBncmlkY2Vs
bGNhY2hlID0gW107DQoJZnVuY3Rpb24gYWxsb2NHcmlkQ2VsbChncmlkXywgeF8sIHlfKQ0KCXsN
CgkJdmFyIHJldDsNCgkJU3BhcnNlR3JpZF8ucHJvdG90eXBlLnRvdGFsQ2VsbENvdW50Kys7DQoJ
CWlmIChncmlkY2VsbGNhY2hlLmxlbmd0aCkNCgkJew0KCQkJcmV0ID0gZ3JpZGNlbGxjYWNoZS5w
b3AoKTsNCgkJCXJldC5ncmlkID0gZ3JpZF87DQoJCQlyZXQueCA9IHhfOw0KCQkJcmV0LnkgPSB5
XzsNCgkJCXJldHVybiByZXQ7DQoJCX0NCgkJZWxzZQ0KCQkJcmV0dXJuIG5ldyBjci5HcmlkQ2Vs
bChncmlkXywgeF8sIHlfKTsNCgl9Ow0KCWZ1bmN0aW9uIGZyZWVHcmlkQ2VsbChjKQ0KCXsNCgkJ
U3BhcnNlR3JpZF8ucHJvdG90eXBlLnRvdGFsQ2VsbENvdW50LS07DQoJCWMub2JqZWN0cy5jbGVh
cigpOw0KCQlpZiAoZ3JpZGNlbGxjYWNoZS5sZW5ndGggPCAxMDAwKQ0KCQkJZ3JpZGNlbGxjYWNo
ZS5wdXNoKGMpOw0KCX07DQoJZnVuY3Rpb24gR3JpZENlbGxfKGdyaWRfLCB4XywgeV8pDQoJew0K
CQl0aGlzLmdyaWQgPSBncmlkXzsNCgkJdGhpcy54ID0geF87DQoJCXRoaXMueSA9IHlfOw0KCQl0
aGlzLm9iamVjdHMgPSBuZXcgY3IuT2JqZWN0U2V0KCk7DQoJfTsNCglHcmlkQ2VsbF8ucHJvdG90
eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMub2JqZWN0cy5pc0Vt
cHR5KCk7DQoJfTsNCglHcmlkQ2VsbF8ucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChpbnN0
KQ0KCXsNCgkJdGhpcy5vYmplY3RzLmFkZChpbnN0KTsNCgl9Ow0KCUdyaWRDZWxsXy5wcm90b3R5
cGUucmVtb3ZlID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQl0aGlzLm9iamVjdHMucmVtb3ZlKGlu
c3QpOw0KCX07DQoJR3JpZENlbGxfLnByb3RvdHlwZS5kdW1wID0gZnVuY3Rpb24gKHJlc3VsdCkN
Cgl7DQoJCWNyLmFwcGVuZEFycmF5KHJlc3VsdCwgdGhpcy5vYmplY3RzLnZhbHVlc1JlZigpKTsN
Cgl9Ow0KCWNyLkdyaWRDZWxsID0gR3JpZENlbGxfOw0KCXZhciByZW5kZXJjZWxsY2FjaGUgPSBb
XTsNCglmdW5jdGlvbiBhbGxvY1JlbmRlckNlbGwoZ3JpZF8sIHhfLCB5XykNCgl7DQoJCXZhciBy
ZXQ7DQoJCVJlbmRlckdyaWRfLnByb3RvdHlwZS50b3RhbENlbGxDb3VudCsrOw0KCQlpZiAocmVu
ZGVyY2VsbGNhY2hlLmxlbmd0aCkNCgkJew0KCQkJcmV0ID0gcmVuZGVyY2VsbGNhY2hlLnBvcCgp
Ow0KCQkJcmV0LmdyaWQgPSBncmlkXzsNCgkJCXJldC54ID0geF87DQoJCQlyZXQueSA9IHlfOw0K
CQkJcmV0dXJuIHJldDsNCgkJfQ0KCQllbHNlDQoJCQlyZXR1cm4gbmV3IGNyLlJlbmRlckNlbGwo
Z3JpZF8sIHhfLCB5Xyk7DQoJfTsNCglmdW5jdGlvbiBmcmVlUmVuZGVyQ2VsbChjKQ0KCXsNCgkJ
UmVuZGVyR3JpZF8ucHJvdG90eXBlLnRvdGFsQ2VsbENvdW50LS07DQoJCWMucmVzZXQoKTsNCgkJ
aWYgKHJlbmRlcmNlbGxjYWNoZS5sZW5ndGggPCAxMDAwKQ0KCQkJcmVuZGVyY2VsbGNhY2hlLnB1
c2goYyk7DQoJfTsNCglmdW5jdGlvbiBSZW5kZXJDZWxsXyhncmlkXywgeF8sIHlfKQ0KCXsNCgkJ
dGhpcy5ncmlkID0gZ3JpZF87DQoJCXRoaXMueCA9IHhfOw0KCQl0aGlzLnkgPSB5XzsNCgkJdGhp
cy5vYmplY3RzID0gW107CQkvLyBhcnJheSB3aGljaCBuZWVkcyB0byBiZSBzb3J0ZWQgYnkgWiBv
cmRlcg0KCQl0aGlzLmlzX3NvcnRlZCA9IHRydWU7CS8vIHdoZXRoZXIgYXJyYXkgaXMgaW4gY29y
cmVjdCBzb3J0IG9yZGVyIG9yIG5vdA0KCQl0aGlzLnBlbmRpbmdfcmVtb3ZhbCA9IG5ldyBjci5P
YmplY3RTZXQoKTsNCgkJdGhpcy5hbnlfcGVuZGluZ19yZW1vdmFsID0gZmFsc2U7DQoJfTsNCglS
ZW5kZXJDZWxsXy5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAoIXRo
aXMub2JqZWN0cy5sZW5ndGgpDQoJCXsNCjsNCjsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoJCWlm
ICh0aGlzLm9iamVjdHMubGVuZ3RoID4gdGhpcy5wZW5kaW5nX3JlbW92YWwuY291bnQoKSkNCgkJ
CXJldHVybiBmYWxzZTsNCjsNCgkJdGhpcy5mbHVzaF9wZW5kaW5nKCk7CQkvLyB0YWtlcyBmYXN0
IHBhdGggYW5kIGp1c3QgcmVzZXRzIHN0YXRlDQoJCXJldHVybiB0cnVlOw0KCX07DQoJUmVuZGVy
Q2VsbF8ucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChpbnN0KQ0KCXsNCgkJaWYgKHRoaXMu
cGVuZGluZ19yZW1vdmFsLmNvbnRhaW5zKGluc3QpKQ0KCQl7DQoJCQl0aGlzLnBlbmRpbmdfcmVt
b3ZhbC5yZW1vdmUoaW5zdCk7DQoJCQlpZiAodGhpcy5wZW5kaW5nX3JlbW92YWwuaXNFbXB0eSgp
KQ0KCQkJCXRoaXMuYW55X3BlbmRpbmdfcmVtb3ZhbCA9IGZhbHNlOw0KCQkJcmV0dXJuOw0KCQl9
DQoJCWlmICh0aGlzLm9iamVjdHMubGVuZ3RoKQ0KCQl7DQoJCQl2YXIgdG9wID0gdGhpcy5vYmpl
Y3RzW3RoaXMub2JqZWN0cy5sZW5ndGggLSAxXTsNCgkJCWlmICh0b3AuZ2V0X3ppbmRleCgpID4g
aW5zdC5nZXRfemluZGV4KCkpDQoJCQkJdGhpcy5pc19zb3J0ZWQgPSBmYWxzZTsJCS8vICdpbnN0
JyBzaG91bGQgYmUgc29tZXdoZXJlIGJlbmVhdGggJ3RvcCcNCgkJCXRoaXMub2JqZWN0cy5wdXNo
KGluc3QpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJdGhpcy5vYmplY3RzLnB1c2goaW5zdCk7DQoJ
CQl0aGlzLmlzX3NvcnRlZCA9IHRydWU7DQoJCX0NCjsNCgl9Ow0KCVJlbmRlckNlbGxfLnByb3Rv
dHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaW5zdCkNCgl7DQoJCXRoaXMucGVuZGluZ19yZW1vdmFs
LmFkZChpbnN0KTsNCgkJdGhpcy5hbnlfcGVuZGluZ19yZW1vdmFsID0gdHJ1ZTsNCgkJaWYgKHRo
aXMucGVuZGluZ19yZW1vdmFsLmNvdW50KCkgPj0gMzApDQoJCQl0aGlzLmZsdXNoX3BlbmRpbmco
KTsNCgl9Ow0KCVJlbmRlckNlbGxfLnByb3RvdHlwZS5mbHVzaF9wZW5kaW5nID0gZnVuY3Rpb24g
KCkNCgl7DQo7DQoJCWlmICghdGhpcy5hbnlfcGVuZGluZ19yZW1vdmFsKQ0KCQkJcmV0dXJuOwkJ
Ly8gbm90IGNoYW5nZWQNCgkJaWYgKHRoaXMucGVuZGluZ19yZW1vdmFsLmNvdW50KCkgPT09IHRo
aXMub2JqZWN0cy5sZW5ndGgpDQoJCXsNCgkJCXRoaXMucmVzZXQoKTsNCgkJCXJldHVybjsNCgkJ
fQ0KCQljci5hcnJheVJlbW92ZUFsbEZyb21PYmplY3RTZXQodGhpcy5vYmplY3RzLCB0aGlzLnBl
bmRpbmdfcmVtb3ZhbCk7DQoJCXRoaXMucGVuZGluZ19yZW1vdmFsLmNsZWFyKCk7DQoJCXRoaXMu
YW55X3BlbmRpbmdfcmVtb3ZhbCA9IGZhbHNlOw0KCX07DQoJZnVuY3Rpb24gc29ydEJ5SW5zdGFu
Y2VaSW5kZXgoYSwgYikNCgl7DQoJCXJldHVybiBhLnppbmRleCAtIGIuemluZGV4Ow0KCX07DQoJ
UmVuZGVyQ2VsbF8ucHJvdG90eXBlLmVuc3VyZV9zb3J0ZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
aWYgKHRoaXMuaXNfc29ydGVkKQ0KCQkJcmV0dXJuOwkJLy8gYWxyZWFkeSBzb3J0ZWQNCgkJdGhp
cy5vYmplY3RzLnNvcnQoc29ydEJ5SW5zdGFuY2VaSW5kZXgpOw0KCQl0aGlzLmlzX3NvcnRlZCA9
IHRydWU7DQoJfTsNCglSZW5kZXJDZWxsXy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJY3IuY2xlYXJBcnJheSh0aGlzLm9iamVjdHMpOw0KCQl0aGlzLmlzX3NvcnRlZCA9IHRy
dWU7DQoJCXRoaXMucGVuZGluZ19yZW1vdmFsLmNsZWFyKCk7DQoJCXRoaXMuYW55X3BlbmRpbmdf
cmVtb3ZhbCA9IGZhbHNlOw0KCX07DQoJUmVuZGVyQ2VsbF8ucHJvdG90eXBlLmR1bXAgPSBmdW5j
dGlvbiAocmVzdWx0KQ0KCXsNCgkJdGhpcy5mbHVzaF9wZW5kaW5nKCk7DQoJCXRoaXMuZW5zdXJl
X3NvcnRlZCgpOw0KCQlpZiAodGhpcy5vYmplY3RzLmxlbmd0aCkNCgkJCXJlc3VsdC5wdXNoKHRo
aXMub2JqZWN0cyk7DQoJfTsNCgljci5SZW5kZXJDZWxsID0gUmVuZGVyQ2VsbF87DQoJdmFyIGZ4
TmFtZXMgPSBbICJsaWdodGVyIiwNCgkJCQkJInhvciIsDQoJCQkJCSJjb3B5IiwNCgkJCQkJImRl
c3RpbmF0aW9uLW92ZXIiLA0KCQkJCQkic291cmNlLWluIiwNCgkJCQkJImRlc3RpbmF0aW9uLWlu
IiwNCgkJCQkJInNvdXJjZS1vdXQiLA0KCQkJCQkiZGVzdGluYXRpb24tb3V0IiwNCgkJCQkJInNv
dXJjZS1hdG9wIiwNCgkJCQkJImRlc3RpbmF0aW9uLWF0b3AiXTsNCgljci5lZmZlY3RUb0NvbXBv
c2l0ZU9wID0gZnVuY3Rpb24oZWZmZWN0KQ0KCXsNCgkJaWYgKGVmZmVjdCA8PSAwIHx8IGVmZmVj
dCA+PSAxMSkNCgkJCXJldHVybiAic291cmNlLW92ZXIiOw0KCQlyZXR1cm4gZnhOYW1lc1tlZmZl
Y3QgLSAxXTsJLy8gbm90IGluY2x1ZGluZyAibm9uZSIgc28gb2Zmc2V0IGJ5IDENCgl9Ow0KCWNy
LnNldEdMQmxlbmQgPSBmdW5jdGlvbih0aGlzXywgZWZmZWN0LCBnbCkNCgl7DQoJCWlmICghZ2wp
DQoJCQlyZXR1cm47DQoJCXRoaXNfLnNyY0JsZW5kID0gZ2wuT05FOw0KCQl0aGlzXy5kZXN0Qmxl
bmQgPSBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBOw0KCQlzd2l0Y2ggKGVmZmVjdCkgew0KCQljYXNl
IDE6CQkvLyBsaWdodGVyIChhZGRpdGl2ZSkNCgkJCXRoaXNfLnNyY0JsZW5kID0gZ2wuT05FOw0K
CQkJdGhpc18uZGVzdEJsZW5kID0gZ2wuT05FOw0KCQkJYnJlYWs7DQoJCWNhc2UgMjoJCS8vIHhv
cg0KCQkJYnJlYWs7CS8vIHRvZG8NCgkJY2FzZSAzOgkJLy8gY29weQ0KCQkJdGhpc18uc3JjQmxl
bmQgPSBnbC5PTkU7DQoJCQl0aGlzXy5kZXN0QmxlbmQgPSBnbC5aRVJPOw0KCQkJYnJlYWs7DQoJ
CWNhc2UgNDoJCS8vIGRlc3RpbmF0aW9uLW92ZXINCgkJCXRoaXNfLnNyY0JsZW5kID0gZ2wuT05F
X01JTlVTX0RTVF9BTFBIQTsNCgkJCXRoaXNfLmRlc3RCbGVuZCA9IGdsLk9ORTsNCgkJCWJyZWFr
Ow0KCQljYXNlIDU6CQkvLyBzb3VyY2UtaW4NCgkJCXRoaXNfLnNyY0JsZW5kID0gZ2wuRFNUX0FM
UEhBOw0KCQkJdGhpc18uZGVzdEJsZW5kID0gZ2wuWkVSTzsNCgkJCWJyZWFrOw0KCQljYXNlIDY6
CQkvLyBkZXN0aW5hdGlvbi1pbg0KCQkJdGhpc18uc3JjQmxlbmQgPSBnbC5aRVJPOw0KCQkJdGhp
c18uZGVzdEJsZW5kID0gZ2wuU1JDX0FMUEhBOw0KCQkJYnJlYWs7DQoJCWNhc2UgNzoJCS8vIHNv
dXJjZS1vdXQNCgkJCXRoaXNfLnNyY0JsZW5kID0gZ2wuT05FX01JTlVTX0RTVF9BTFBIQTsNCgkJ
CXRoaXNfLmRlc3RCbGVuZCA9IGdsLlpFUk87DQoJCQlicmVhazsNCgkJY2FzZSA4OgkJLy8gZGVz
dGluYXRpb24tb3V0DQoJCQl0aGlzXy5zcmNCbGVuZCA9IGdsLlpFUk87DQoJCQl0aGlzXy5kZXN0
QmxlbmQgPSBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBOw0KCQkJYnJlYWs7DQoJCWNhc2UgOToJCS8v
IHNvdXJjZS1hdG9wDQoJCQl0aGlzXy5zcmNCbGVuZCA9IGdsLkRTVF9BTFBIQTsNCgkJCXRoaXNf
LmRlc3RCbGVuZCA9IGdsLk9ORV9NSU5VU19TUkNfQUxQSEE7DQoJCQlicmVhazsNCgkJY2FzZSAx
MDoJLy8gZGVzdGluYXRpb24tYXRvcA0KCQkJdGhpc18uc3JjQmxlbmQgPSBnbC5PTkVfTUlOVVNf
RFNUX0FMUEhBOw0KCQkJdGhpc18uZGVzdEJsZW5kID0gZ2wuU1JDX0FMUEhBOw0KCQkJYnJlYWs7
DQoJCX0NCgl9Ow0KCWNyLnJvdW5kNmRwID0gZnVuY3Rpb24gKHgpDQoJew0KCQlyZXR1cm4gTWF0
aC5yb3VuZCh4ICogMTAwMDAwMCkgLyAxMDAwMDAwOw0KCX07DQoJLyoNCgl2YXIgbG9jYWxlQ29t
cGFyZV9vcHRpb25zID0gew0KCQkidXNhZ2UiOiAic2VhcmNoIiwNCgkJInNlbnNpdGl2aXR5Ijog
ImFjY2VudCINCgl9Ow0KCXZhciBoYXNfbG9jYWxlQ29tcGFyZSA9ICEhImEiLmxvY2FsZUNvbXBh
cmU7DQoJdmFyIGxvY2FsZUNvbXBhcmVfd29ya3MxID0gKGhhc19sb2NhbGVDb21wYXJlICYmICJh
Ii5sb2NhbGVDb21wYXJlKCJBIiwgdW5kZWZpbmVkLCBsb2NhbGVDb21wYXJlX29wdGlvbnMpID09
PSAwKTsNCgl2YXIgbG9jYWxlQ29tcGFyZV93b3JrczIgPSAoaGFzX2xvY2FsZUNvbXBhcmUgJiYg
ImEiLmxvY2FsZUNvbXBhcmUoIsOhIiwgdW5kZWZpbmVkLCBsb2NhbGVDb21wYXJlX29wdGlvbnMp
ICE9PSAwKTsNCgl2YXIgc3VwcG9ydHNfbG9jYWxlQ29tcGFyZSA9IChoYXNfbG9jYWxlQ29tcGFy
ZSAmJiBsb2NhbGVDb21wYXJlX3dvcmtzMSAmJiBsb2NhbGVDb21wYXJlX3dvcmtzMik7DQoJKi8N
Cgljci5lcXVhbHNfbm9jYXNlID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQlpZiAodHlwZW9mIGEg
IT09ICJzdHJpbmciIHx8IHR5cGVvZiBiICE9PSAic3RyaW5nIikNCgkJCXJldHVybiBmYWxzZTsN
CgkJaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkNCgkJCXJldHVybiBmYWxzZTsNCgkJaWYgKGEg
PT09IGIpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJLyoNCgkJaWYgKHN1cHBvcnRzX2xvY2FsZUNvbXBh
cmUpDQoJCXsNCgkJCXJldHVybiAoYS5sb2NhbGVDb21wYXJlKGIsIHVuZGVmaW5lZCwgbG9jYWxl
Q29tcGFyZV9vcHRpb25zKSA9PT0gMCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCSovDQoJCQlyZXR1
cm4gYS50b0xvd2VyQ2FzZSgpID09PSBiLnRvTG93ZXJDYXNlKCk7DQoJfTsNCgljci5pc0NhbnZh
c0lucHV0RXZlbnQgPSBmdW5jdGlvbiAoZSkNCgl7DQoJCXZhciB0YXJnZXQgPSBlLnRhcmdldDsN
CgkJaWYgKCF0YXJnZXQpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJaWYgKHRhcmdldCA9PT0gZG9jdW1l
bnQgfHwgdGFyZ2V0ID09PSB3aW5kb3cpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJaWYgKGRvY3VtZW50
ICYmIGRvY3VtZW50LmJvZHkgJiYgdGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KQ0KCQkJcmV0dXJu
IHRydWU7DQoJCWlmIChjci5lcXVhbHNfbm9jYXNlKHRhcmdldC50YWdOYW1lLCAiY2FudmFzIikp
DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJcmV0dXJuIGZhbHNlOw0KCX07DQp9KCkpOw0KdmFyIE1hdHJp
eEFycmF5PXR5cGVvZiBGbG9hdDMyQXJyYXkhPT0idW5kZWZpbmVkIj9GbG9hdDMyQXJyYXk6QXJy
YXksZ2xNYXRyaXhBcnJheVR5cGU9TWF0cml4QXJyYXksdmVjMz17fSxtYXQzPXt9LG1hdDQ9e30s
cXVhdDQ9e307dmVjMy5jcmVhdGU9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IE1hdHJpeEFycmF5KDMp
O2EmJihiWzBdPWFbMF0sYlsxXT1hWzFdLGJbMl09YVsyXSk7cmV0dXJuIGJ9O3ZlYzMuc2V0PWZ1
bmN0aW9uKGEsYil7YlswXT1hWzBdO2JbMV09YVsxXTtiWzJdPWFbMl07cmV0dXJuIGJ9O3ZlYzMu
YWRkPWZ1bmN0aW9uKGEsYixjKXtpZighY3x8YT09PWMpcmV0dXJuIGFbMF0rPWJbMF0sYVsxXSs9
YlsxXSxhWzJdKz1iWzJdLGE7Y1swXT1hWzBdK2JbMF07Y1sxXT1hWzFdK2JbMV07Y1syXT1hWzJd
K2JbMl07cmV0dXJuIGN9Ow0KdmVjMy5zdWJ0cmFjdD1mdW5jdGlvbihhLGIsYyl7aWYoIWN8fGE9
PT1jKXJldHVybiBhWzBdLT1iWzBdLGFbMV0tPWJbMV0sYVsyXS09YlsyXSxhO2NbMF09YVswXS1i
WzBdO2NbMV09YVsxXS1iWzFdO2NbMl09YVsyXS1iWzJdO3JldHVybiBjfTt2ZWMzLm5lZ2F0ZT1m
dW5jdGlvbihhLGIpe2J8fChiPWEpO2JbMF09LWFbMF07YlsxXT0tYVsxXTtiWzJdPS1hWzJdO3Jl
dHVybiBifTt2ZWMzLnNjYWxlPWZ1bmN0aW9uKGEsYixjKXtpZighY3x8YT09PWMpcmV0dXJuIGFb
MF0qPWIsYVsxXSo9YixhWzJdKj1iLGE7Y1swXT1hWzBdKmI7Y1sxXT1hWzFdKmI7Y1syXT1hWzJd
KmI7cmV0dXJuIGN9Ow0KdmVjMy5ub3JtYWxpemU9ZnVuY3Rpb24oYSxiKXtifHwoYj1hKTt2YXIg
Yz1hWzBdLGQ9YVsxXSxlPWFbMl0sZz1NYXRoLnNxcnQoYypjK2QqZCtlKmUpO2lmKGcpe2lmKGc9
PT0xKXJldHVybiBiWzBdPWMsYlsxXT1kLGJbMl09ZSxifWVsc2UgcmV0dXJuIGJbMF09MCxiWzFd
PTAsYlsyXT0wLGI7Zz0xL2c7YlswXT1jKmc7YlsxXT1kKmc7YlsyXT1lKmc7cmV0dXJuIGJ9O3Zl
YzMuY3Jvc3M9ZnVuY3Rpb24oYSxiLGMpe2N8fChjPWEpO3ZhciBkPWFbMF0sZT1hWzFdLGE9YVsy
XSxnPWJbMF0sZj1iWzFdLGI9YlsyXTtjWzBdPWUqYi1hKmY7Y1sxXT1hKmctZCpiO2NbMl09ZCpm
LWUqZztyZXR1cm4gY307dmVjMy5sZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGI9YVswXSxjPWFbMV0s
YT1hWzJdO3JldHVybiBNYXRoLnNxcnQoYipiK2MqYythKmEpfTt2ZWMzLmRvdD1mdW5jdGlvbihh
LGIpe3JldHVybiBhWzBdKmJbMF0rYVsxXSpiWzFdK2FbMl0qYlsyXX07DQp2ZWMzLmRpcmVjdGlv
bj1mdW5jdGlvbihhLGIsYyl7Y3x8KGM9YSk7dmFyIGQ9YVswXS1iWzBdLGU9YVsxXS1iWzFdLGE9
YVsyXS1iWzJdLGI9TWF0aC5zcXJ0KGQqZCtlKmUrYSphKTtpZighYilyZXR1cm4gY1swXT0wLGNb
MV09MCxjWzJdPTAsYztiPTEvYjtjWzBdPWQqYjtjWzFdPWUqYjtjWzJdPWEqYjtyZXR1cm4gY307
dmVjMy5sZXJwPWZ1bmN0aW9uKGEsYixjLGQpe2R8fChkPWEpO2RbMF09YVswXStjKihiWzBdLWFb
MF0pO2RbMV09YVsxXStjKihiWzFdLWFbMV0pO2RbMl09YVsyXStjKihiWzJdLWFbMl0pO3JldHVy
biBkfTt2ZWMzLnN0cj1mdW5jdGlvbihhKXtyZXR1cm4iWyIrYVswXSsiLCAiK2FbMV0rIiwgIith
WzJdKyJdIn07DQptYXQzLmNyZWF0ZT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgTWF0cml4QXJyYXko
OSk7YSYmKGJbMF09YVswXSxiWzFdPWFbMV0sYlsyXT1hWzJdLGJbM109YVszXSxiWzRdPWFbNF0s
Yls1XT1hWzVdLGJbNl09YVs2XSxiWzddPWFbN10sYls4XT1hWzhdKTtyZXR1cm4gYn07bWF0My5z
ZXQ9ZnVuY3Rpb24oYSxiKXtiWzBdPWFbMF07YlsxXT1hWzFdO2JbMl09YVsyXTtiWzNdPWFbM107
Yls0XT1hWzRdO2JbNV09YVs1XTtiWzZdPWFbNl07Yls3XT1hWzddO2JbOF09YVs4XTtyZXR1cm4g
Yn07bWF0My5pZGVudGl0eT1mdW5jdGlvbihhKXthWzBdPTE7YVsxXT0wO2FbMl09MDthWzNdPTA7
YVs0XT0xO2FbNV09MDthWzZdPTA7YVs3XT0wO2FbOF09MTtyZXR1cm4gYX07DQptYXQzLnRyYW5z
cG9zZT1mdW5jdGlvbihhLGIpe2lmKCFifHxhPT09Yil7dmFyIGM9YVsxXSxkPWFbMl0sZT1hWzVd
O2FbMV09YVszXTthWzJdPWFbNl07YVszXT1jO2FbNV09YVs3XTthWzZdPWQ7YVs3XT1lO3JldHVy
biBhfWJbMF09YVswXTtiWzFdPWFbM107YlsyXT1hWzZdO2JbM109YVsxXTtiWzRdPWFbNF07Yls1
XT1hWzddO2JbNl09YVsyXTtiWzddPWFbNV07Yls4XT1hWzhdO3JldHVybiBifTttYXQzLnRvTWF0
ND1mdW5jdGlvbihhLGIpe2J8fChiPW1hdDQuY3JlYXRlKCkpO2JbMTVdPTE7YlsxNF09MDtiWzEz
XT0wO2JbMTJdPTA7YlsxMV09MDtiWzEwXT1hWzhdO2JbOV09YVs3XTtiWzhdPWFbNl07Yls3XT0w
O2JbNl09YVs1XTtiWzVdPWFbNF07Yls0XT1hWzNdO2JbM109MDtiWzJdPWFbMl07YlsxXT1hWzFd
O2JbMF09YVswXTtyZXR1cm4gYn07DQptYXQzLnN0cj1mdW5jdGlvbihhKXtyZXR1cm4iWyIrYVsw
XSsiLCAiK2FbMV0rIiwgIithWzJdKyIsICIrYVszXSsiLCAiK2FbNF0rIiwgIithWzVdKyIsICIr
YVs2XSsiLCAiK2FbN10rIiwgIithWzhdKyJdIn07bWF0NC5jcmVhdGU9ZnVuY3Rpb24oYSl7dmFy
IGI9bmV3IE1hdHJpeEFycmF5KDE2KTthJiYoYlswXT1hWzBdLGJbMV09YVsxXSxiWzJdPWFbMl0s
YlszXT1hWzNdLGJbNF09YVs0XSxiWzVdPWFbNV0sYls2XT1hWzZdLGJbN109YVs3XSxiWzhdPWFb
OF0sYls5XT1hWzldLGJbMTBdPWFbMTBdLGJbMTFdPWFbMTFdLGJbMTJdPWFbMTJdLGJbMTNdPWFb
MTNdLGJbMTRdPWFbMTRdLGJbMTVdPWFbMTVdKTtyZXR1cm4gYn07DQptYXQ0LnNldD1mdW5jdGlv
bihhLGIpe2JbMF09YVswXTtiWzFdPWFbMV07YlsyXT1hWzJdO2JbM109YVszXTtiWzRdPWFbNF07
Yls1XT1hWzVdO2JbNl09YVs2XTtiWzddPWFbN107Yls4XT1hWzhdO2JbOV09YVs5XTtiWzEwXT1h
WzEwXTtiWzExXT1hWzExXTtiWzEyXT1hWzEyXTtiWzEzXT1hWzEzXTtiWzE0XT1hWzE0XTtiWzE1
XT1hWzE1XTtyZXR1cm4gYn07bWF0NC5pZGVudGl0eT1mdW5jdGlvbihhKXthWzBdPTE7YVsxXT0w
O2FbMl09MDthWzNdPTA7YVs0XT0wO2FbNV09MTthWzZdPTA7YVs3XT0wO2FbOF09MDthWzldPTA7
YVsxMF09MTthWzExXT0wO2FbMTJdPTA7YVsxM109MDthWzE0XT0wO2FbMTVdPTE7cmV0dXJuIGF9
Ow0KbWF0NC50cmFuc3Bvc2U9ZnVuY3Rpb24oYSxiKXtpZighYnx8YT09PWIpe3ZhciBjPWFbMV0s
ZD1hWzJdLGU9YVszXSxnPWFbNl0sZj1hWzddLGg9YVsxMV07YVsxXT1hWzRdO2FbMl09YVs4XTth
WzNdPWFbMTJdO2FbNF09YzthWzZdPWFbOV07YVs3XT1hWzEzXTthWzhdPWQ7YVs5XT1nO2FbMTFd
PWFbMTRdO2FbMTJdPWU7YVsxM109ZjthWzE0XT1oO3JldHVybiBhfWJbMF09YVswXTtiWzFdPWFb
NF07YlsyXT1hWzhdO2JbM109YVsxMl07Yls0XT1hWzFdO2JbNV09YVs1XTtiWzZdPWFbOV07Yls3
XT1hWzEzXTtiWzhdPWFbMl07Yls5XT1hWzZdO2JbMTBdPWFbMTBdO2JbMTFdPWFbMTRdO2JbMTJd
PWFbM107YlsxM109YVs3XTtiWzE0XT1hWzExXTtiWzE1XT1hWzE1XTtyZXR1cm4gYn07DQptYXQ0
LmRldGVybWluYW50PWZ1bmN0aW9uKGEpe3ZhciBiPWFbMF0sYz1hWzFdLGQ9YVsyXSxlPWFbM10s
Zz1hWzRdLGY9YVs1XSxoPWFbNl0saT1hWzddLGo9YVs4XSxrPWFbOV0sbD1hWzEwXSxuPWFbMTFd
LG89YVsxMl0sbT1hWzEzXSxwPWFbMTRdLGE9YVsxNV07cmV0dXJuIG8qaypoKmUtaiptKmgqZS1v
KmYqbCplK2cqbSpsKmUraipmKnAqZS1nKmsqcCplLW8qaypkKmkraiptKmQqaStvKmMqbCppLWIq
bSpsKmktaipjKnAqaStiKmsqcCppK28qZipkKm4tZyptKmQqbi1vKmMqaCpuK2IqbSpoKm4rZypj
KnAqbi1iKmYqcCpuLWoqZipkKmErZyprKmQqYStqKmMqaCphLWIqaypoKmEtZypjKmwqYStiKmYq
bCphfTsNCm1hdDQuaW52ZXJzZT1mdW5jdGlvbihhLGIpe2J8fChiPWEpO3ZhciBjPWFbMF0sZD1h
WzFdLGU9YVsyXSxnPWFbM10sZj1hWzRdLGg9YVs1XSxpPWFbNl0saj1hWzddLGs9YVs4XSxsPWFb
OV0sbj1hWzEwXSxvPWFbMTFdLG09YVsxMl0scD1hWzEzXSxyPWFbMTRdLHM9YVsxNV0sQT1jKmgt
ZCpmLEI9YyppLWUqZix0PWMqai1nKmYsdT1kKmktZSpoLHY9ZCpqLWcqaCx3PWUqai1nKmkseD1r
KnAtbCptLHk9aypyLW4qbSx6PWsqcy1vKm0sQz1sKnItbipwLEQ9bCpzLW8qcCxFPW4qcy1vKnIs
cT0xLyhBKkUtQipEK3QqQyt1Knotdip5K3cqeCk7YlswXT0oaCpFLWkqRCtqKkMpKnE7YlsxXT0o
LWQqRStlKkQtZypDKSpxO2JbMl09KHAqdy1yKnYrcyp1KSpxO2JbM109KC1sKncrbip2LW8qdSkq
cTtiWzRdPSgtZipFK2kqei1qKnkpKnE7Yls1XT0oYypFLWUqeitnKnkpKnE7Yls2XT0oLW0qdyty
KnQtcypCKSpxO2JbN109KGsqdy1uKnQrbypCKSpxO2JbOF09KGYqRC1oKnoraip4KSpxOw0KYls5
XT0oLWMqRCtkKnotZyp4KSpxO2JbMTBdPShtKnYtcCp0K3MqQSkqcTtiWzExXT0oLWsqditsKnQt
bypBKSpxO2JbMTJdPSgtZipDK2gqeS1pKngpKnE7YlsxM109KGMqQy1kKnkrZSp4KSpxO2JbMTRd
PSgtbSp1K3AqQi1yKkEpKnE7YlsxNV09KGsqdS1sKkIrbipBKSpxO3JldHVybiBifTttYXQ0LnRv
Um90YXRpb25NYXQ9ZnVuY3Rpb24oYSxiKXtifHwoYj1tYXQ0LmNyZWF0ZSgpKTtiWzBdPWFbMF07
YlsxXT1hWzFdO2JbMl09YVsyXTtiWzNdPWFbM107Yls0XT1hWzRdO2JbNV09YVs1XTtiWzZdPWFb
Nl07Yls3XT1hWzddO2JbOF09YVs4XTtiWzldPWFbOV07YlsxMF09YVsxMF07YlsxMV09YVsxMV07
YlsxMl09MDtiWzEzXT0wO2JbMTRdPTA7YlsxNV09MTtyZXR1cm4gYn07DQptYXQ0LnRvTWF0Mz1m
dW5jdGlvbihhLGIpe2J8fChiPW1hdDMuY3JlYXRlKCkpO2JbMF09YVswXTtiWzFdPWFbMV07Ylsy
XT1hWzJdO2JbM109YVs0XTtiWzRdPWFbNV07Yls1XT1hWzZdO2JbNl09YVs4XTtiWzddPWFbOV07
Yls4XT1hWzEwXTtyZXR1cm4gYn07bWF0NC50b0ludmVyc2VNYXQzPWZ1bmN0aW9uKGEsYil7dmFy
IGM9YVswXSxkPWFbMV0sZT1hWzJdLGc9YVs0XSxmPWFbNV0saD1hWzZdLGk9YVs4XSxqPWFbOV0s
az1hWzEwXSxsPWsqZi1oKmosbj0taypnK2gqaSxvPWoqZy1mKmksbT1jKmwrZCpuK2UqbztpZigh
bSlyZXR1cm4gbnVsbDttPTEvbTtifHwoYj1tYXQzLmNyZWF0ZSgpKTtiWzBdPWwqbTtiWzFdPSgt
aypkK2UqaikqbTtiWzJdPShoKmQtZSpmKSptO2JbM109biptO2JbNF09KGsqYy1lKmkpKm07Yls1
XT0oLWgqYytlKmcpKm07Yls2XT1vKm07Yls3XT0oLWoqYytkKmkpKm07Yls4XT0oZipjLWQqZykq
bTtyZXR1cm4gYn07DQptYXQ0Lm11bHRpcGx5PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz1hKTt2YXIg
ZD1hWzBdLGU9YVsxXSxnPWFbMl0sZj1hWzNdLGg9YVs0XSxpPWFbNV0saj1hWzZdLGs9YVs3XSxs
PWFbOF0sbj1hWzldLG89YVsxMF0sbT1hWzExXSxwPWFbMTJdLHI9YVsxM10scz1hWzE0XSxhPWFb
MTVdLEE9YlswXSxCPWJbMV0sdD1iWzJdLHU9YlszXSx2PWJbNF0sdz1iWzVdLHg9Yls2XSx5PWJb
N10sej1iWzhdLEM9Yls5XSxEPWJbMTBdLEU9YlsxMV0scT1iWzEyXSxGPWJbMTNdLEc9YlsxNF0s
Yj1iWzE1XTtjWzBdPUEqZCtCKmgrdCpsK3UqcDtjWzFdPUEqZStCKmkrdCpuK3UqcjtjWzJdPUEq
ZytCKmordCpvK3UqcztjWzNdPUEqZitCKmsrdCptK3UqYTtjWzRdPXYqZCt3KmgreCpsK3kqcDtj
WzVdPXYqZSt3KmkreCpuK3kqcjtjWzZdPXYqZyt3KmoreCpvK3kqcztjWzddPXYqZit3KmsreCpt
K3kqYTtjWzhdPXoqZCtDKmgrRCpsK0UqcDtjWzldPXoqZStDKmkrRCpuK0UqcjtjWzEwXT16Kmcr
QyoNCmorRCpvK0UqcztjWzExXT16KmYrQyprK0QqbStFKmE7Y1sxMl09cSpkK0YqaCtHKmwrYipw
O2NbMTNdPXEqZStGKmkrRypuK2IqcjtjWzE0XT1xKmcrRipqK0cqbytiKnM7Y1sxNV09cSpmK0Yq
aytHKm0rYiphO3JldHVybiBjfTttYXQ0Lm11bHRpcGx5VmVjMz1mdW5jdGlvbihhLGIsYyl7Y3x8
KGM9Yik7dmFyIGQ9YlswXSxlPWJbMV0sYj1iWzJdO2NbMF09YVswXSpkK2FbNF0qZSthWzhdKmIr
YVsxMl07Y1sxXT1hWzFdKmQrYVs1XSplK2FbOV0qYithWzEzXTtjWzJdPWFbMl0qZCthWzZdKmUr
YVsxMF0qYithWzE0XTtyZXR1cm4gY307DQptYXQ0Lm11bHRpcGx5VmVjND1mdW5jdGlvbihhLGIs
Yyl7Y3x8KGM9Yik7dmFyIGQ9YlswXSxlPWJbMV0sZz1iWzJdLGI9YlszXTtjWzBdPWFbMF0qZCth
WzRdKmUrYVs4XSpnK2FbMTJdKmI7Y1sxXT1hWzFdKmQrYVs1XSplK2FbOV0qZythWzEzXSpiO2Nb
Ml09YVsyXSpkK2FbNl0qZSthWzEwXSpnK2FbMTRdKmI7Y1szXT1hWzNdKmQrYVs3XSplK2FbMTFd
KmcrYVsxNV0qYjtyZXR1cm4gY307DQptYXQ0LnRyYW5zbGF0ZT1mdW5jdGlvbihhLGIsYyl7dmFy
IGQ9YlswXSxlPWJbMV0sYj1iWzJdLGcsZixoLGksaixrLGwsbixvLG0scCxyO2lmKCFjfHxhPT09
YylyZXR1cm4gYVsxMl09YVswXSpkK2FbNF0qZSthWzhdKmIrYVsxMl0sYVsxM109YVsxXSpkK2Fb
NV0qZSthWzldKmIrYVsxM10sYVsxNF09YVsyXSpkK2FbNl0qZSthWzEwXSpiK2FbMTRdLGFbMTVd
PWFbM10qZCthWzddKmUrYVsxMV0qYithWzE1XSxhO2c9YVswXTtmPWFbMV07aD1hWzJdO2k9YVsz
XTtqPWFbNF07az1hWzVdO2w9YVs2XTtuPWFbN107bz1hWzhdO209YVs5XTtwPWFbMTBdO3I9YVsx
MV07Y1swXT1nO2NbMV09ZjtjWzJdPWg7Y1szXT1pO2NbNF09ajtjWzVdPWs7Y1s2XT1sO2NbN109
bjtjWzhdPW87Y1s5XT1tO2NbMTBdPXA7Y1sxMV09cjtjWzEyXT1nKmQraiplK28qYithWzEyXTtj
WzEzXT1mKmQrayplK20qYithWzEzXTtjWzE0XT1oKmQrbCplK3AqYithWzE0XTtjWzE1XT1pKmQr
biplK3IqYithWzE1XTsNCnJldHVybiBjfTttYXQ0LnNjYWxlPWZ1bmN0aW9uKGEsYixjKXt2YXIg
ZD1iWzBdLGU9YlsxXSxiPWJbMl07aWYoIWN8fGE9PT1jKXJldHVybiBhWzBdKj1kLGFbMV0qPWQs
YVsyXSo9ZCxhWzNdKj1kLGFbNF0qPWUsYVs1XSo9ZSxhWzZdKj1lLGFbN10qPWUsYVs4XSo9Yixh
WzldKj1iLGFbMTBdKj1iLGFbMTFdKj1iLGE7Y1swXT1hWzBdKmQ7Y1sxXT1hWzFdKmQ7Y1syXT1h
WzJdKmQ7Y1szXT1hWzNdKmQ7Y1s0XT1hWzRdKmU7Y1s1XT1hWzVdKmU7Y1s2XT1hWzZdKmU7Y1s3
XT1hWzddKmU7Y1s4XT1hWzhdKmI7Y1s5XT1hWzldKmI7Y1sxMF09YVsxMF0qYjtjWzExXT1hWzEx
XSpiO2NbMTJdPWFbMTJdO2NbMTNdPWFbMTNdO2NbMTRdPWFbMTRdO2NbMTVdPWFbMTVdO3JldHVy
biBjfTsNCm1hdDQucm90YXRlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWNbMF0sZz1jWzFdLGM9
Y1syXSxmPU1hdGguc3FydChlKmUrZypnK2MqYyksaCxpLGosayxsLG4sbyxtLHAscixzLEEsQix0
LHUsdix3LHgseSx6O2lmKCFmKXJldHVybiBudWxsO2YhPT0xJiYoZj0xL2YsZSo9ZixnKj1mLGMq
PWYpO2g9TWF0aC5zaW4oYik7aT1NYXRoLmNvcyhiKTtqPTEtaTtiPWFbMF07Zj1hWzFdO2s9YVsy
XTtsPWFbM107bj1hWzRdO289YVs1XTttPWFbNl07cD1hWzddO3I9YVs4XTtzPWFbOV07QT1hWzEw
XTtCPWFbMTFdO3Q9ZSplKmoraTt1PWcqZSpqK2MqaDt2PWMqZSpqLWcqaDt3PWUqZypqLWMqaDt4
PWcqZypqK2k7eT1jKmcqaitlKmg7ej1lKmMqaitnKmg7ZT1nKmMqai1lKmg7Zz1jKmMqaitpO2Q/
YSE9PWQmJihkWzEyXT1hWzEyXSxkWzEzXT1hWzEzXSxkWzE0XT1hWzE0XSxkWzE1XT1hWzE1XSk6
ZD1hO2RbMF09Yip0K24qdStyKnY7ZFsxXT1mKnQrbyp1K3MqdjtkWzJdPWsqdCttKnUrQSoNCnY7
ZFszXT1sKnQrcCp1K0IqdjtkWzRdPWIqdytuKngrcip5O2RbNV09Zip3K28qeCtzKnk7ZFs2XT1r
KncrbSp4K0EqeTtkWzddPWwqdytwKngrQip5O2RbOF09Yip6K24qZStyKmc7ZFs5XT1mKnorbypl
K3MqZztkWzEwXT1rKnorbSplK0EqZztkWzExXT1sKnorcCplK0IqZztyZXR1cm4gZH07bWF0NC5y
b3RhdGVYPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1NYXRoLnNpbihiKSxiPU1hdGguY29zKGIpLGU9
YVs0XSxnPWFbNV0sZj1hWzZdLGg9YVs3XSxpPWFbOF0saj1hWzldLGs9YVsxMF0sbD1hWzExXTtj
P2EhPT1jJiYoY1swXT1hWzBdLGNbMV09YVsxXSxjWzJdPWFbMl0sY1szXT1hWzNdLGNbMTJdPWFb
MTJdLGNbMTNdPWFbMTNdLGNbMTRdPWFbMTRdLGNbMTVdPWFbMTVdKTpjPWE7Y1s0XT1lKmIraSpk
O2NbNV09ZypiK2oqZDtjWzZdPWYqYitrKmQ7Y1s3XT1oKmIrbCpkO2NbOF09ZSotZCtpKmI7Y1s5
XT1nKi1kK2oqYjtjWzEwXT1mKi1kK2sqYjtjWzExXT1oKi1kK2wqYjtyZXR1cm4gY307DQptYXQ0
LnJvdGF0ZVk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU1hdGguc2luKGIpLGI9TWF0aC5jb3MoYiks
ZT1hWzBdLGc9YVsxXSxmPWFbMl0saD1hWzNdLGk9YVs4XSxqPWFbOV0saz1hWzEwXSxsPWFbMTFd
O2M/YSE9PWMmJihjWzRdPWFbNF0sY1s1XT1hWzVdLGNbNl09YVs2XSxjWzddPWFbN10sY1sxMl09
YVsxMl0sY1sxM109YVsxM10sY1sxNF09YVsxNF0sY1sxNV09YVsxNV0pOmM9YTtjWzBdPWUqYitp
Ki1kO2NbMV09ZypiK2oqLWQ7Y1syXT1mKmIrayotZDtjWzNdPWgqYitsKi1kO2NbOF09ZSpkK2kq
YjtjWzldPWcqZCtqKmI7Y1sxMF09ZipkK2sqYjtjWzExXT1oKmQrbCpiO3JldHVybiBjfTsNCm1h
dDQucm90YXRlWj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWF0aC5zaW4oYiksYj1NYXRoLmNvcyhi
KSxlPWFbMF0sZz1hWzFdLGY9YVsyXSxoPWFbM10saT1hWzRdLGo9YVs1XSxrPWFbNl0sbD1hWzdd
O2M/YSE9PWMmJihjWzhdPWFbOF0sY1s5XT1hWzldLGNbMTBdPWFbMTBdLGNbMTFdPWFbMTFdLGNb
MTJdPWFbMTJdLGNbMTNdPWFbMTNdLGNbMTRdPWFbMTRdLGNbMTVdPWFbMTVdKTpjPWE7Y1swXT1l
KmIraSpkO2NbMV09ZypiK2oqZDtjWzJdPWYqYitrKmQ7Y1szXT1oKmIrbCpkO2NbNF09ZSotZCtp
KmI7Y1s1XT1nKi1kK2oqYjtjWzZdPWYqLWQraypiO2NbN109aCotZCtsKmI7cmV0dXJuIGN9Ow0K
bWF0NC5mcnVzdHVtPWZ1bmN0aW9uKGEsYixjLGQsZSxnLGYpe2Z8fChmPW1hdDQuY3JlYXRlKCkp
O3ZhciBoPWItYSxpPWQtYyxqPWctZTtmWzBdPWUqMi9oO2ZbMV09MDtmWzJdPTA7ZlszXT0wO2Zb
NF09MDtmWzVdPWUqMi9pO2ZbNl09MDtmWzddPTA7Zls4XT0oYithKS9oO2ZbOV09KGQrYykvaTtm
WzEwXT0tKGcrZSkvajtmWzExXT0tMTtmWzEyXT0wO2ZbMTNdPTA7ZlsxNF09LShnKmUqMikvajtm
WzE1XT0wO3JldHVybiBmfTttYXQ0LnBlcnNwZWN0aXZlPWZ1bmN0aW9uKGEsYixjLGQsZSl7YT1j
Kk1hdGgudGFuKGEqTWF0aC5QSS8zNjApO2IqPWE7cmV0dXJuIG1hdDQuZnJ1c3R1bSgtYixiLC1h
LGEsYyxkLGUpfTsNCm1hdDQub3J0aG89ZnVuY3Rpb24oYSxiLGMsZCxlLGcsZil7Znx8KGY9bWF0
NC5jcmVhdGUoKSk7dmFyIGg9Yi1hLGk9ZC1jLGo9Zy1lO2ZbMF09Mi9oO2ZbMV09MDtmWzJdPTA7
ZlszXT0wO2ZbNF09MDtmWzVdPTIvaTtmWzZdPTA7Zls3XT0wO2ZbOF09MDtmWzldPTA7ZlsxMF09
LTIvajtmWzExXT0wO2ZbMTJdPS0oYStiKS9oO2ZbMTNdPS0oZCtjKS9pO2ZbMTRdPS0oZytlKS9q
O2ZbMTVdPTE7cmV0dXJuIGZ9Ow0KbWF0NC5sb29rQXQ9ZnVuY3Rpb24oYSxiLGMsZCl7ZHx8KGQ9
bWF0NC5jcmVhdGUoKSk7dmFyIGUsZyxmLGgsaSxqLGssbCxuPWFbMF0sbz1hWzFdLGE9YVsyXTtn
PWNbMF07Zj1jWzFdO2U9Y1syXTtjPWJbMV07aj1iWzJdO2lmKG49PT1iWzBdJiZvPT09YyYmYT09
PWopcmV0dXJuIG1hdDQuaWRlbnRpdHkoZCk7Yz1uLWJbMF07aj1vLWJbMV07az1hLWJbMl07bD0x
L01hdGguc3FydChjKmMraipqK2sqayk7Yyo9bDtqKj1sO2sqPWw7Yj1mKmstZSpqO2U9ZSpjLWcq
aztnPWcqai1mKmM7KGw9TWF0aC5zcXJ0KGIqYitlKmUrZypnKSk/KGw9MS9sLGIqPWwsZSo9bCxn
Kj1sKTpnPWU9Yj0wO2Y9aipnLWsqZTtoPWsqYi1jKmc7aT1jKmUtaipiOyhsPU1hdGguc3FydChm
KmYraCpoK2kqaSkpPyhsPTEvbCxmKj1sLGgqPWwsaSo9bCk6aT1oPWY9MDtkWzBdPWI7ZFsxXT1m
O2RbMl09YztkWzNdPTA7ZFs0XT1lO2RbNV09aDtkWzZdPWo7ZFs3XT0wO2RbOF09ZztkWzldPWk7
ZFsxMF09aztkWzExXT0NCjA7ZFsxMl09LShiKm4rZSpvK2cqYSk7ZFsxM109LShmKm4raCpvK2kq
YSk7ZFsxNF09LShjKm4raipvK2sqYSk7ZFsxNV09MTtyZXR1cm4gZH07bWF0NC5mcm9tUm90YXRp
b25UcmFuc2xhdGlvbj1mdW5jdGlvbihhLGIsYyl7Y3x8KGM9bWF0NC5jcmVhdGUoKSk7dmFyIGQ9
YVswXSxlPWFbMV0sZz1hWzJdLGY9YVszXSxoPWQrZCxpPWUrZSxqPWcrZyxhPWQqaCxrPWQqaTtk
Kj1qO3ZhciBsPWUqaTtlKj1qO2cqPWo7aCo9ZjtpKj1mO2YqPWo7Y1swXT0xLShsK2cpO2NbMV09
aytmO2NbMl09ZC1pO2NbM109MDtjWzRdPWstZjtjWzVdPTEtKGErZyk7Y1s2XT1lK2g7Y1s3XT0w
O2NbOF09ZCtpO2NbOV09ZS1oO2NbMTBdPTEtKGErbCk7Y1sxMV09MDtjWzEyXT1iWzBdO2NbMTNd
PWJbMV07Y1sxNF09YlsyXTtjWzE1XT0xO3JldHVybiBjfTsNCm1hdDQuc3RyPWZ1bmN0aW9uKGEp
e3JldHVybiJbIithWzBdKyIsICIrYVsxXSsiLCAiK2FbMl0rIiwgIithWzNdKyIsICIrYVs0XSsi
LCAiK2FbNV0rIiwgIithWzZdKyIsICIrYVs3XSsiLCAiK2FbOF0rIiwgIithWzldKyIsICIrYVsx
MF0rIiwgIithWzExXSsiLCAiK2FbMTJdKyIsICIrYVsxM10rIiwgIithWzE0XSsiLCAiK2FbMTVd
KyJdIn07cXVhdDQuY3JlYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBNYXRyaXhBcnJheSg0KTth
JiYoYlswXT1hWzBdLGJbMV09YVsxXSxiWzJdPWFbMl0sYlszXT1hWzNdKTtyZXR1cm4gYn07cXVh
dDQuc2V0PWZ1bmN0aW9uKGEsYil7YlswXT1hWzBdO2JbMV09YVsxXTtiWzJdPWFbMl07YlszXT1h
WzNdO3JldHVybiBifTsNCnF1YXQ0LmNhbGN1bGF0ZVc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hWzBd
LGQ9YVsxXSxlPWFbMl07aWYoIWJ8fGE9PT1iKXJldHVybiBhWzNdPS1NYXRoLnNxcnQoTWF0aC5h
YnMoMS1jKmMtZCpkLWUqZSkpLGE7YlswXT1jO2JbMV09ZDtiWzJdPWU7YlszXT0tTWF0aC5zcXJ0
KE1hdGguYWJzKDEtYypjLWQqZC1lKmUpKTtyZXR1cm4gYn07cXVhdDQuaW52ZXJzZT1mdW5jdGlv
bihhLGIpe2lmKCFifHxhPT09YilyZXR1cm4gYVswXSo9LTEsYVsxXSo9LTEsYVsyXSo9LTEsYTti
WzBdPS1hWzBdO2JbMV09LWFbMV07YlsyXT0tYVsyXTtiWzNdPWFbM107cmV0dXJuIGJ9O3F1YXQ0
Lmxlbmd0aD1mdW5jdGlvbihhKXt2YXIgYj1hWzBdLGM9YVsxXSxkPWFbMl0sYT1hWzNdO3JldHVy
biBNYXRoLnNxcnQoYipiK2MqYytkKmQrYSphKX07DQpxdWF0NC5ub3JtYWxpemU9ZnVuY3Rpb24o
YSxiKXtifHwoYj1hKTt2YXIgYz1hWzBdLGQ9YVsxXSxlPWFbMl0sZz1hWzNdLGY9TWF0aC5zcXJ0
KGMqYytkKmQrZSplK2cqZyk7aWYoZj09PTApcmV0dXJuIGJbMF09MCxiWzFdPTAsYlsyXT0wLGJb
M109MCxiO2Y9MS9mO2JbMF09YypmO2JbMV09ZCpmO2JbMl09ZSpmO2JbM109ZypmO3JldHVybiBi
fTtxdWF0NC5tdWx0aXBseT1mdW5jdGlvbihhLGIsYyl7Y3x8KGM9YSk7dmFyIGQ9YVswXSxlPWFb
MV0sZz1hWzJdLGE9YVszXSxmPWJbMF0saD1iWzFdLGk9YlsyXSxiPWJbM107Y1swXT1kKmIrYSpm
K2UqaS1nKmg7Y1sxXT1lKmIrYSpoK2cqZi1kKmk7Y1syXT1nKmIrYSppK2QqaC1lKmY7Y1szXT1h
KmItZCpmLWUqaC1nKmk7cmV0dXJuIGN9Ow0KcXVhdDQubXVsdGlwbHlWZWMzPWZ1bmN0aW9uKGEs
YixjKXtjfHwoYz1iKTt2YXIgZD1iWzBdLGU9YlsxXSxnPWJbMl0sYj1hWzBdLGY9YVsxXSxoPWFb
Ml0sYT1hWzNdLGk9YSpkK2YqZy1oKmUsaj1hKmUraCpkLWIqZyxrPWEqZytiKmUtZipkLGQ9LWIq
ZC1mKmUtaCpnO2NbMF09aSphK2QqLWIraiotaC1rKi1mO2NbMV09aiphK2QqLWYrayotYi1pKi1o
O2NbMl09ayphK2QqLWgraSotZi1qKi1iO3JldHVybiBjfTtxdWF0NC50b01hdDM9ZnVuY3Rpb24o
YSxiKXtifHwoYj1tYXQzLmNyZWF0ZSgpKTt2YXIgYz1hWzBdLGQ9YVsxXSxlPWFbMl0sZz1hWzNd
LGY9YytjLGg9ZCtkLGk9ZStlLGo9YypmLGs9YypoO2MqPWk7dmFyIGw9ZCpoO2QqPWk7ZSo9aTtm
Kj1nO2gqPWc7Zyo9aTtiWzBdPTEtKGwrZSk7YlsxXT1rK2c7YlsyXT1jLWg7YlszXT1rLWc7Yls0
XT0xLShqK2UpO2JbNV09ZCtmO2JbNl09YytoO2JbN109ZC1mO2JbOF09MS0oaitsKTtyZXR1cm4g
Yn07DQpxdWF0NC50b01hdDQ9ZnVuY3Rpb24oYSxiKXtifHwoYj1tYXQ0LmNyZWF0ZSgpKTt2YXIg
Yz1hWzBdLGQ9YVsxXSxlPWFbMl0sZz1hWzNdLGY9YytjLGg9ZCtkLGk9ZStlLGo9YypmLGs9Yypo
O2MqPWk7dmFyIGw9ZCpoO2QqPWk7ZSo9aTtmKj1nO2gqPWc7Zyo9aTtiWzBdPTEtKGwrZSk7Ylsx
XT1rK2c7YlsyXT1jLWg7YlszXT0wO2JbNF09ay1nO2JbNV09MS0oaitlKTtiWzZdPWQrZjtiWzdd
PTA7Yls4XT1jK2g7Yls5XT1kLWY7YlsxMF09MS0oaitsKTtiWzExXT0wO2JbMTJdPTA7YlsxM109
MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIGJ9Ow0KcXVhdDQuc2xlcnA9ZnVuY3Rpb24oYSxiLGMs
ZCl7ZHx8KGQ9YSk7dmFyIGU9YVswXSpiWzBdK2FbMV0qYlsxXSthWzJdKmJbMl0rYVszXSpiWzNd
LGcsZjtpZihNYXRoLmFicyhlKT49MSlyZXR1cm4gZCE9PWEmJihkWzBdPWFbMF0sZFsxXT1hWzFd
LGRbMl09YVsyXSxkWzNdPWFbM10pLGQ7Zz1NYXRoLmFjb3MoZSk7Zj1NYXRoLnNxcnQoMS1lKmUp
O2lmKE1hdGguYWJzKGYpPDAuMDAxKXJldHVybiBkWzBdPWFbMF0qMC41K2JbMF0qMC41LGRbMV09
YVsxXSowLjUrYlsxXSowLjUsZFsyXT1hWzJdKjAuNStiWzJdKjAuNSxkWzNdPWFbM10qMC41K2Jb
M10qMC41LGQ7ZT1NYXRoLnNpbigoMS1jKSpnKS9mO2M9TWF0aC5zaW4oYypnKS9mO2RbMF09YVsw
XSplK2JbMF0qYztkWzFdPWFbMV0qZStiWzFdKmM7ZFsyXT1hWzJdKmUrYlsyXSpjO2RbM109YVsz
XSplK2JbM10qYztyZXR1cm4gZH07DQpxdWF0NC5zdHI9ZnVuY3Rpb24oYSl7cmV0dXJuIlsiK2Fb
MF0rIiwgIithWzFdKyIsICIrYVsyXSsiLCAiK2FbM10rIl0ifTsNCihmdW5jdGlvbigpDQp7DQoJ
dmFyIE1BWF9WRVJUSUNFUyA9IDgwMDA7CQkJCQkJLy8gZXF1YXRlcyB0byAyNTAwIG9iamVjdHMg
YmVpbmcgZHJhd24NCgl2YXIgTUFYX0lORElDRVMgPSAoTUFYX1ZFUlRJQ0VTIC8gMikgKiAzOwkJ
Ly8gNiBpbmRpY2VzIGZvciBldmVyeSA0IHZlcnRpY2VzDQoJdmFyIE1BWF9QT0lOVFMgPSA4MDAw
Ow0KCXZhciBNVUxUSV9CVUZGRVJTID0gNDsJCQkJCQkJLy8gY3ljbGUgNCBidWZmZXJzIHRvIHRy
eSBhbmQgYXZvaWQgYmxvY2tpbmcNCgl2YXIgQkFUQ0hfTlVMTCA9IDA7DQoJdmFyIEJBVENIX1FV
QUQgPSAxOw0KCXZhciBCQVRDSF9TRVRURVhUVVJFID0gMjsNCgl2YXIgQkFUQ0hfU0VUT1BBQ0lU
WSA9IDM7DQoJdmFyIEJBVENIX1NFVEJMRU5EID0gNDsNCgl2YXIgQkFUQ0hfVVBEQVRFTU9ERUxW
SUVXID0gNTsNCgl2YXIgQkFUQ0hfUkVOREVSVE9URVhUVVJFID0gNjsNCgl2YXIgQkFUQ0hfQ0xF
QVIgPSA3Ow0KCXZhciBCQVRDSF9QT0lOVFMgPSA4Ow0KCXZhciBCQVRDSF9TRVRQUk9HUkFNID0g
OTsNCgl2YXIgQkFUQ0hfU0VUUFJPR1JBTVBBUkFNRVRFUlMgPSAxMDsNCgl2YXIgQkFUQ0hfU0VU
VEVYVFVSRTEgPSAxMTsNCgl2YXIgQkFUQ0hfU0VUQ09MT1IgPSAxMjsNCgl2YXIgQkFUQ0hfU0VU
REVQVEhURVNUID0gMTM7DQoJdmFyIEJBVENIX1NFVEVBUkxZWk1PREUgPSAxNDsNCgkvKg0KCXZh
ciBsb3NlX2V4dCA9IG51bGw7DQoJd2luZG93Lmxvc2VfY29udGV4dCA9IGZ1bmN0aW9uICgpDQoJ
ew0KCQlpZiAoIWxvc2VfZXh0KQ0KCQl7DQoJCQljb25zb2xlLmxvZygiV0VCR0xfbG9zZV9jb250
ZXh0IG5vdCBzdXBwb3J0ZWQiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlsb3NlX2V4dC5sb3NlQ29u
dGV4dCgpOw0KCX07DQoJd2luZG93LnJlc3RvcmVfY29udGV4dCA9IGZ1bmN0aW9uICgpDQoJew0K
CQlpZiAoIWxvc2VfZXh0KQ0KCQl7DQoJCQljb25zb2xlLmxvZygiV0VCR0xfbG9zZV9jb250ZXh0
IG5vdCBzdXBwb3J0ZWQiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlsb3NlX2V4dC5yZXN0b3JlQ29u
dGV4dCgpOw0KCX07DQoJKi8NCgl2YXIgdGVtcE1hdDQgPSBtYXQ0LmNyZWF0ZSgpOw0KCWZ1bmN0
aW9uIEdMV3JhcF8oZ2wsIGlzTW9iaWxlLCBlbmFibGVGcm9udFRvQmFjaykNCgl7DQoJCXRoaXMu
aXNJRSA9IC9tc2llL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvdHJpZGVudC9pLnRl
c3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQoJCXRoaXMud2lkdGggPSAwOwkJLy8gbm90IHlldCBr
bm93biwgd2FpdCBmb3IgY2FsbCB0byBzZXRTaXplKCkNCgkJdGhpcy5oZWlnaHQgPSAwOw0KCQl0
aGlzLmVuYWJsZUZyb250VG9CYWNrID0gISFlbmFibGVGcm9udFRvQmFjazsNCgkJdGhpcy5pc0Vh
cmx5WlBhc3MgPSBmYWxzZTsNCgkJdGhpcy5pc0JhdGNoSW5FYXJseVpQYXNzID0gZmFsc2U7DQoJ
CXRoaXMuY3VycmVudFogPSAwOw0KCQl0aGlzLnpOZWFyID0gMTsNCgkJdGhpcy56RmFyID0gMTAw
MDsNCgkJdGhpcy56SW5jcmVtZW50ID0gKCh0aGlzLnpGYXIgLSB0aGlzLnpOZWFyKSAvIDMyNzY4
KTsNCgkJdGhpcy56QSA9IHRoaXMuekZhciAvICh0aGlzLnpGYXIgLSB0aGlzLnpOZWFyKTsNCgkJ
dGhpcy56QiA9IHRoaXMuekZhciAqIHRoaXMuek5lYXIgLyAodGhpcy56TmVhciAtIHRoaXMuekZh
cik7DQoJCXRoaXMua3pBID0gNjU1MzYgKiB0aGlzLnpBOw0KCQl0aGlzLmt6QiA9IDY1NTM2ICog
dGhpcy56QjsNCgkJdGhpcy5jYW0gPSB2ZWMzLmNyZWF0ZShbMCwgMCwgMTAwXSk7CQkJLy8gY2Ft
ZXJhIHBvc2l0aW9uDQoJCXRoaXMubG9vayA9IHZlYzMuY3JlYXRlKFswLCAwLCAwXSk7CQkJCS8v
IGxvb2thdCBwb3NpdGlvbg0KCQl0aGlzLnVwID0gdmVjMy5jcmVhdGUoWzAsIDEsIDBdKTsJCQkJ
Ly8gdXAgdmVjdG9yDQoJCXRoaXMud29ybGRTY2FsZSA9IHZlYzMuY3JlYXRlKFsxLCAxLCAxXSk7
CQkvLyB3b3JsZCBzY2FsaW5nIGZhY3Rvcg0KCQl0aGlzLmVuYWJsZV9taXBtYXBzID0gdHJ1ZTsN
CgkJdGhpcy5tYXRQID0gbWF0NC5jcmVhdGUoKTsJCQkJCQkvLyBwZXJzcGVjdGl2ZSBtYXRyaXgN
CgkJdGhpcy5tYXRNViA9IG1hdDQuY3JlYXRlKCk7CQkJCQkJLy8gbW9kZWwgdmlldyBtYXRyaXgN
CgkJdGhpcy5sYXN0TVYgPSBtYXQ0LmNyZWF0ZSgpOw0KCQl0aGlzLmN1cnJlbnRNViA9IG1hdDQu
Y3JlYXRlKCk7DQoJCXRoaXMuZ2wgPSBnbDsNCgkJdGhpcy52ZXJzaW9uID0gKHRoaXMuZ2wuZ2V0
UGFyYW1ldGVyKHRoaXMuZ2wuVkVSU0lPTikuaW5kZXhPZigiV2ViR0wgMiIpID09PSAwID8gMiA6
IDEpOw0KCQl0aGlzLmluaXRTdGF0ZSgpOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUuaW5pdFN0
YXRlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBnbCA9IHRoaXMuZ2w7DQoJCXZhciBpLCBsZW47
DQoJCXRoaXMubGFzdE9wYWNpdHkgPSAxOw0KCQl0aGlzLmxhc3RUZXh0dXJlMCA9IG51bGw7CQkJ
Ly8gbGFzdCBib3VuZCB0byBURVhUVVJFMA0KCQl0aGlzLmxhc3RUZXh0dXJlMSA9IG51bGw7CQkJ
Ly8gbGFzdCBib3VuZCB0byBURVhUVVJFMQ0KCQl0aGlzLmN1cnJlbnRPcGFjaXR5ID0gMTsNCgkJ
Z2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKTsNCgkJZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJ
VCk7DQoJCWdsLmVuYWJsZShnbC5CTEVORCk7DQogICAgICAgIGdsLmJsZW5kRnVuYyhnbC5PTkUs
IGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpOw0KCQlnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7DQoJ
CWdsLmRpc2FibGUoZ2wuU1RFTkNJTF9URVNUKTsNCgkJZ2wuZGlzYWJsZShnbC5ESVRIRVIpOw0K
CQlpZiAodGhpcy5lbmFibGVGcm9udFRvQmFjaykNCgkJew0KCQkJZ2wuZW5hYmxlKGdsLkRFUFRI
X1RFU1QpOw0KCQkJZ2wuZGVwdGhGdW5jKGdsLkxFUVVBTCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJ
CQlnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpOw0KCQl9DQoJCXRoaXMubWF4VGV4dHVyZVNpemUg
PSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfU0laRSk7DQoJCXRoaXMubGFzdFNyY0Js
ZW5kID0gZ2wuT05FOw0KCQl0aGlzLmxhc3REZXN0QmxlbmQgPSBnbC5PTkVfTUlOVVNfU1JDX0FM
UEhBOw0KCQl0aGlzLnZlcnRleERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KE1BWF9WRVJUSUNFUyAq
ICh0aGlzLmVuYWJsZUZyb250VG9CYWNrID8gMyA6IDIpKTsNCgkJdGhpcy50ZXhjb29yZERhdGEg
PSBuZXcgRmxvYXQzMkFycmF5KE1BWF9WRVJUSUNFUyAqIDIpOw0KCQl0aGlzLnBvaW50RGF0YSA9
IG5ldyBGbG9hdDMyQXJyYXkoTUFYX1BPSU5UUyAqIDQpOw0KCQl0aGlzLnBvaW50QnVmZmVyID0g
Z2wuY3JlYXRlQnVmZmVyKCk7DQoJCWdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlz
LnBvaW50QnVmZmVyKTsNCgkJZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMucG9p
bnREYXRhLmJ5dGVMZW5ndGgsIGdsLkRZTkFNSUNfRFJBVyk7DQoJCXRoaXMudmVydGV4QnVmZmVy
cyA9IG5ldyBBcnJheShNVUxUSV9CVUZGRVJTKTsNCgkJdGhpcy50ZXhjb29yZEJ1ZmZlcnMgPSBu
ZXcgQXJyYXkoTVVMVElfQlVGRkVSUyk7DQoJCWZvciAoaSA9IDA7IGkgPCBNVUxUSV9CVUZGRVJT
OyBpKyspDQoJCXsNCgkJCXRoaXMudmVydGV4QnVmZmVyc1tpXSA9IGdsLmNyZWF0ZUJ1ZmZlcigp
Ow0KCQkJZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyc1tp
XSk7DQoJCQlnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhEYXRhLmJ5
dGVMZW5ndGgsIGdsLkRZTkFNSUNfRFJBVyk7DQoJCQl0aGlzLnRleGNvb3JkQnVmZmVyc1tpXSA9
IGdsLmNyZWF0ZUJ1ZmZlcigpOw0KCQkJZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRo
aXMudGV4Y29vcmRCdWZmZXJzW2ldKTsNCgkJCWdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVS
LCB0aGlzLnRleGNvb3JkRGF0YS5ieXRlTGVuZ3RoLCBnbC5EWU5BTUlDX0RSQVcpOw0KCQl9DQoJ
CXRoaXMuY3VyQnVmZmVyID0gMDsNCgkJdGhpcy5pbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZl
cigpOw0KCQlnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4
QnVmZmVyKTsNCgkJdmFyIGluZGV4RGF0YSA9IG5ldyBVaW50MTZBcnJheShNQVhfSU5ESUNFUyk7
DQoJCWkgPSAwLCBsZW4gPSBNQVhfSU5ESUNFUzsNCgkJdmFyIGZ2ID0gMDsNCgkJd2hpbGUgKGkg
PCBsZW4pDQoJCXsNCgkJCWluZGV4RGF0YVtpKytdID0gZnY7CQkvLyB0b3AgbGVmdA0KCQkJaW5k
ZXhEYXRhW2krK10gPSBmdiArIDE7CS8vIHRvcCByaWdodA0KCQkJaW5kZXhEYXRhW2krK10gPSBm
diArIDI7CS8vIGJvdHRvbSByaWdodCAoZmlyc3QgdHJpKQ0KCQkJaW5kZXhEYXRhW2krK10gPSBm
djsJCS8vIHRvcCBsZWZ0DQoJCQlpbmRleERhdGFbaSsrXSA9IGZ2ICsgMjsJLy8gYm90dG9tIHJp
Z2h0DQoJCQlpbmRleERhdGFbaSsrXSA9IGZ2ICsgMzsJLy8gYm90dG9tIGxlZnQNCgkJCWZ2ICs9
IDQ7DQoJCX0NCgkJZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhE
YXRhLCBnbC5TVEFUSUNfRFJBVyk7DQoJCXRoaXMudmVydGV4UHRyID0gMDsNCgkJdGhpcy50ZXhQ
dHIgPSAwOw0KCQl0aGlzLnBvaW50UHRyID0gMDsNCgkJdmFyIGZzU291cmNlLCB2c1NvdXJjZTsN
CgkJdGhpcy5zaGFkZXJQcm9ncmFtcyA9IFtdOw0KCQlmc1NvdXJjZSA9IFsNCgkJCSJ2YXJ5aW5n
IG1lZGl1bXAgdmVjMiB2VGV4OyIsDQoJCQkidW5pZm9ybSBsb3dwIGZsb2F0IG9wYWNpdHk7IiwN
CgkJCSJ1bmlmb3JtIGxvd3Agc2FtcGxlcjJEIHNhbXBsZXJGcm9udDsiLA0KCQkJInZvaWQgbWFp
bih2b2lkKSB7IiwNCgkJCSIJZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHNhbXBsZXJGcm9udCwg
dlRleCk7IiwNCgkJCSIJZ2xfRnJhZ0NvbG9yICo9IG9wYWNpdHk7IiwNCgkJCSJ9Ig0KCQldLmpv
aW4oIlxuIik7DQoJCWlmICh0aGlzLmVuYWJsZUZyb250VG9CYWNrKQ0KCQl7DQoJCQl2c1NvdXJj
ZSA9IFsNCgkJCQkiYXR0cmlidXRlIGhpZ2hwIHZlYzMgYVBvczsiLA0KCQkJCSJhdHRyaWJ1dGUg
bWVkaXVtcCB2ZWMyIGFUZXg7IiwNCgkJCQkidmFyeWluZyBtZWRpdW1wIHZlYzIgdlRleDsiLA0K
CQkJCSJ1bmlmb3JtIGhpZ2hwIG1hdDQgbWF0UDsiLA0KCQkJCSJ1bmlmb3JtIGhpZ2hwIG1hdDQg
bWF0TVY7IiwNCgkJCQkidm9pZCBtYWluKHZvaWQpIHsiLA0KCQkJCSIJZ2xfUG9zaXRpb24gPSBt
YXRQICogbWF0TVYgKiB2ZWM0KGFQb3MueCwgYVBvcy55LCBhUG9zLnosIDEuMCk7IiwNCgkJCQki
CXZUZXggPSBhVGV4OyIsDQoJCQkJIn0iDQoJCQldLmpvaW4oIlxuIik7DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQl2c1NvdXJjZSA9IFsNCgkJCQkiYXR0cmlidXRlIGhpZ2hwIHZlYzIgYVBvczsiLA0K
CQkJCSJhdHRyaWJ1dGUgbWVkaXVtcCB2ZWMyIGFUZXg7IiwNCgkJCQkidmFyeWluZyBtZWRpdW1w
IHZlYzIgdlRleDsiLA0KCQkJCSJ1bmlmb3JtIGhpZ2hwIG1hdDQgbWF0UDsiLA0KCQkJCSJ1bmlm
b3JtIGhpZ2hwIG1hdDQgbWF0TVY7IiwNCgkJCQkidm9pZCBtYWluKHZvaWQpIHsiLA0KCQkJCSIJ
Z2xfUG9zaXRpb24gPSBtYXRQICogbWF0TVYgKiB2ZWM0KGFQb3MueCwgYVBvcy55LCAwLjAsIDEu
MCk7IiwNCgkJCQkiCXZUZXggPSBhVGV4OyIsDQoJCQkJIn0iDQoJCQldLmpvaW4oIlxuIik7DQoJ
CX0NCgkJdmFyIHNoYWRlclByb2cgPSB0aGlzLmNyZWF0ZVNoYWRlclByb2dyYW0oe3NyYzogZnNT
b3VyY2V9LCB2c1NvdXJjZSwgIjxkZWZhdWx0PiIpOw0KOw0KCQl0aGlzLnNoYWRlclByb2dyYW1z
LnB1c2goc2hhZGVyUHJvZyk7CQkvLyBEZWZhdWx0IHNoYWRlciBpcyBhbHdheXMgc2hhZGVyIDAN
CgkJZnNTb3VyY2UgPSBbDQoJCQkidW5pZm9ybSBtZWRpdW1wIHNhbXBsZXIyRCBzYW1wbGVyRnJv
bnQ7IiwNCgkJCSJ2YXJ5aW5nIGxvd3AgZmxvYXQgb3BhY2l0eTsiLA0KCQkJInZvaWQgbWFpbih2
b2lkKSB7IiwNCgkJCSIJZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHNhbXBsZXJGcm9udCwgZ2xf
UG9pbnRDb29yZCk7IiwNCgkJCSIJZ2xfRnJhZ0NvbG9yICo9IG9wYWNpdHk7IiwNCgkJCSJ9Ig0K
CQldLmpvaW4oIlxuIik7DQoJCXZhciBwb2ludFZzU291cmNlID0gWw0KCQkJImF0dHJpYnV0ZSB2
ZWM0IGFQb3M7IiwNCgkJCSJ2YXJ5aW5nIGZsb2F0IG9wYWNpdHk7IiwNCgkJCSJ1bmlmb3JtIG1h
dDQgbWF0UDsiLA0KCQkJInVuaWZvcm0gbWF0NCBtYXRNVjsiLA0KCQkJInZvaWQgbWFpbih2b2lk
KSB7IiwNCgkJCSIJZ2xfUG9zaXRpb24gPSBtYXRQICogbWF0TVYgKiB2ZWM0KGFQb3MueCwgYVBv
cy55LCAwLjAsIDEuMCk7IiwNCgkJCSIJZ2xfUG9pbnRTaXplID0gYVBvcy56OyIsDQoJCQkiCW9w
YWNpdHkgPSBhUG9zLnc7IiwNCgkJCSJ9Ig0KCQldLmpvaW4oIlxuIik7DQoJCXNoYWRlclByb2cg
PSB0aGlzLmNyZWF0ZVNoYWRlclByb2dyYW0oe3NyYzogZnNTb3VyY2V9LCBwb2ludFZzU291cmNl
LCAiPHBvaW50PiIpOw0KOw0KCQl0aGlzLnNoYWRlclByb2dyYW1zLnB1c2goc2hhZGVyUHJvZyk7
CQkvLyBQb2ludCBzaGFkZXIgaXMgYWx3YXlzIHNoYWRlciAxDQoJCWZzU291cmNlID0gWw0KCQkJ
InZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZUZXg7IiwNCgkJCSJ1bmlmb3JtIGxvd3Agc2FtcGxlcjJE
IHNhbXBsZXJGcm9udDsiLA0KCQkJInZvaWQgbWFpbih2b2lkKSB7IiwNCgkJCSIJaWYgKHRleHR1
cmUyRChzYW1wbGVyRnJvbnQsIHZUZXgpLmEgPCAxLjApIiwNCgkJCSIJCWRpc2NhcmQ7IiwJCQkJ
CQkvLyBkaXNjYXJkaW5nIG5vbi1vcGFxdWUgZnJhZ21lbnRzDQoJCQkifSINCgkJXS5qb2luKCJc
biIpOw0KCQl2YXIgc2hhZGVyUHJvZyA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbSh7c3JjOiBm
c1NvdXJjZX0sIHZzU291cmNlLCAiPGVhcmx5ej4iKTsNCjsNCgkJdGhpcy5zaGFkZXJQcm9ncmFt
cy5wdXNoKHNoYWRlclByb2cpOwkJLy8gRWFybHktWiBzaGFkZXIgaXMgYWx3YXlzIHNoYWRlciAy
DQoJCWZzU291cmNlID0gWw0KCQkJInVuaWZvcm0gbG93cCB2ZWM0IGNvbG9yRmlsbDsiLA0KCQkJ
InZvaWQgbWFpbih2b2lkKSB7IiwNCgkJCSIJZ2xfRnJhZ0NvbG9yID0gY29sb3JGaWxsOyIsDQoJ
CQkifSINCgkJXS5qb2luKCJcbiIpOw0KCQl2YXIgc2hhZGVyUHJvZyA9IHRoaXMuY3JlYXRlU2hh
ZGVyUHJvZ3JhbSh7c3JjOiBmc1NvdXJjZX0sIHZzU291cmNlLCAiPGZpbGw+Iik7DQo7DQoJCXRo
aXMuc2hhZGVyUHJvZ3JhbXMucHVzaChzaGFkZXJQcm9nKTsJCS8vIEZpbGwtY29sb3Igc2hhZGVy
IGlzIGFsd2F5cyBzaGFkZXIgMw0KCQlmb3IgKHZhciBzaGFkZXJfbmFtZSBpbiBjci5zaGFkZXJz
KQ0KCQl7DQoJCQlpZiAoY3Iuc2hhZGVycy5oYXNPd25Qcm9wZXJ0eShzaGFkZXJfbmFtZSkpDQoJ
CQkJdGhpcy5zaGFkZXJQcm9ncmFtcy5wdXNoKHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbShjci5z
aGFkZXJzW3NoYWRlcl9uYW1lXSwgdnNTb3VyY2UsIHNoYWRlcl9uYW1lKSk7DQoJCX0NCgkJZ2wu
YWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7DQoJCWdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVf
MkQsIG51bGwpOw0KCQl0aGlzLmJhdGNoID0gW107DQoJCXRoaXMuYmF0Y2hQdHIgPSAwOw0KCQl0
aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBm
YWxzZTsNCgkJdGhpcy5sYXN0UHJvZ3JhbSA9IC0xOwkJCQkvLyBzdGFydCAtMSBzbyBmaXJzdCBz
d2l0Y2hQcm9ncmFtIGNhbiBkbyB3b3JrDQoJCXRoaXMuY3VycmVudFByb2dyYW0gPSAtMTsJCQkv
LyBjdXJyZW50IHByb2dyYW0gZHVyaW5nIGJhdGNoIGV4ZWN1dGlvbg0KCQl0aGlzLmN1cnJlbnRT
aGFkZXIgPSBudWxsOw0KCQl0aGlzLmZibyA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7DQoJCXRo
aXMucmVuZGVyVG9UZXggPSBudWxsOw0KCQl0aGlzLmRlcHRoQnVmZmVyID0gbnVsbDsNCgkJdGhp
cy5hdHRhY2hlZERlcHRoQnVmZmVyID0gZmFsc2U7CS8vIHdhaXQgdW50aWwgZmlyc3Qgc2l6ZSBj
YWxsIHRvIGF0dGFjaCwgb3RoZXJ3aXNlIGl0IGhhcyBubyBzdG9yYWdlDQoJCWlmICh0aGlzLmVu
YWJsZUZyb250VG9CYWNrKQ0KCQl7DQoJCQl0aGlzLmRlcHRoQnVmZmVyID0gZ2wuY3JlYXRlUmVu
ZGVyYnVmZmVyKCk7DQoJCX0NCgkJdGhpcy50bXBWZWMzID0gdmVjMy5jcmVhdGUoWzAsIDAsIDBd
KTsNCjsNCgkJdmFyIHBvaW50c2l6ZXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQUxJQVNFRF9QT0lO
VF9TSVpFX1JBTkdFKTsNCgkJdGhpcy5taW5Qb2ludFNpemUgPSBwb2ludHNpemVzWzBdOw0KCQl0
aGlzLm1heFBvaW50U2l6ZSA9IHBvaW50c2l6ZXNbMV07DQoJCWlmICh0aGlzLm1heFBvaW50U2l6
ZSA+IDIwNDgpDQoJCQl0aGlzLm1heFBvaW50U2l6ZSA9IDIwNDg7DQo7DQoJCXRoaXMuc3dpdGNo
UHJvZ3JhbSgwKTsNCgkJY3Iuc2VhbCh0aGlzKTsNCgl9Ow0KCWZ1bmN0aW9uIEdMU2hhZGVyUHJv
Z3JhbShnbCwgc2hhZGVyUHJvZ3JhbSwgbmFtZSkNCgl7DQoJCXRoaXMuZ2wgPSBnbDsNCgkJdGhp
cy5zaGFkZXJQcm9ncmFtID0gc2hhZGVyUHJvZ3JhbTsNCgkJdGhpcy5uYW1lID0gbmFtZTsNCgkJ
dGhpcy5sb2NBUG9zID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgImFQb3Mi
KTsNCgkJdGhpcy5sb2NBVGV4ID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwg
ImFUZXgiKTsNCgkJdGhpcy5sb2NNYXRQID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclBy
b2dyYW0sICJtYXRQIik7DQoJCXRoaXMubG9jTWF0TVYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24o
c2hhZGVyUHJvZ3JhbSwgIm1hdE1WIik7DQoJCXRoaXMubG9jT3BhY2l0eSA9IGdsLmdldFVuaWZv
cm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAib3BhY2l0eSIpOw0KCQl0aGlzLmxvY0NvbG9yRmls
bCA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAiY29sb3JGaWxsIik7DQoJ
CXRoaXMubG9jU2FtcGxlckZyb250ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dy
YW0sICJzYW1wbGVyRnJvbnQiKTsNCgkJdGhpcy5sb2NTYW1wbGVyQmFjayA9IGdsLmdldFVuaWZv
cm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAic2FtcGxlckJhY2siKTsNCgkJdGhpcy5sb2NEZXN0
U3RhcnQgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgImRlc3RTdGFydCIp
Ow0KCQl0aGlzLmxvY0Rlc3RFbmQgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3Jh
bSwgImRlc3RFbmQiKTsNCgkJdGhpcy5sb2NTZWNvbmRzID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9u
KHNoYWRlclByb2dyYW0sICJzZWNvbmRzIik7DQoJCXRoaXMubG9jUGl4ZWxXaWR0aCA9IGdsLmdl
dFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAicGl4ZWxXaWR0aCIpOw0KCQl0aGlzLmxv
Y1BpeGVsSGVpZ2h0ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sICJwaXhl
bEhlaWdodCIpOw0KCQl0aGlzLmxvY0xheWVyU2NhbGUgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24o
c2hhZGVyUHJvZ3JhbSwgImxheWVyU2NhbGUiKTsNCgkJdGhpcy5sb2NMYXllckFuZ2xlID0gZ2wu
Z2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sICJsYXllckFuZ2xlIik7DQoJCXRoaXMu
bG9jVmlld09yaWdpbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAidmll
d09yaWdpbiIpOw0KCQl0aGlzLmxvY1Njcm9sbFBvcyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihz
aGFkZXJQcm9ncmFtLCAic2Nyb2xsUG9zIik7DQoJCXRoaXMuaGFzQW55T3B0aW9uYWxVbmlmb3Jt
cyA9ICEhKHRoaXMubG9jUGl4ZWxXaWR0aCB8fCB0aGlzLmxvY1BpeGVsSGVpZ2h0IHx8IHRoaXMu
bG9jU2Vjb25kcyB8fCB0aGlzLmxvY1NhbXBsZXJCYWNrIHx8IHRoaXMubG9jRGVzdFN0YXJ0IHx8
IHRoaXMubG9jRGVzdEVuZCB8fCB0aGlzLmxvY0xheWVyU2NhbGUgfHwgdGhpcy5sb2NMYXllckFu
Z2xlIHx8IHRoaXMubG9jVmlld09yaWdpbiB8fCB0aGlzLmxvY1Njcm9sbFBvcyk7DQoJCXRoaXMu
bHBQaXhlbFdpZHRoID0gLTk5OTsJCS8vIHNldCB0byBzb21ldGhpbmcgdW5saWtlbHkgc28gbmV2
ZXIgY291bnRzIGFzIGNhY2hlZCBvbiBmaXJzdCBzZXQNCgkJdGhpcy5scFBpeGVsSGVpZ2h0ID0g
LTk5OTsNCgkJdGhpcy5scE9wYWNpdHkgPSAxOw0KCQl0aGlzLmxwRGVzdFN0YXJ0WCA9IDAuMDsN
CgkJdGhpcy5scERlc3RTdGFydFkgPSAwLjA7DQoJCXRoaXMubHBEZXN0RW5kWCA9IDEuMDsNCgkJ
dGhpcy5scERlc3RFbmRZID0gMS4wOw0KCQl0aGlzLmxwTGF5ZXJTY2FsZSA9IDEuMDsNCgkJdGhp
cy5scExheWVyQW5nbGUgPSAwLjA7DQoJCXRoaXMubHBWaWV3T3JpZ2luWCA9IDAuMDsNCgkJdGhp
cy5scFZpZXdPcmlnaW5ZID0gMC4wOw0KCQl0aGlzLmxwU2Nyb2xsUG9zWCA9IDAuMDsNCgkJdGhp
cy5scFNjcm9sbFBvc1kgPSAwLjA7DQoJCXRoaXMubHBTZWNvbmRzID0gMC4wOw0KCQl0aGlzLmxh
c3RDdXN0b21QYXJhbXMgPSBbXTsNCgkJdGhpcy5scE1hdE1WID0gbWF0NC5jcmVhdGUoKTsNCgkJ
aWYgKHRoaXMubG9jT3BhY2l0eSkNCgkJCWdsLnVuaWZvcm0xZih0aGlzLmxvY09wYWNpdHksIDEp
Ow0KCQlpZiAodGhpcy5sb2NDb2xvckZpbGwpDQoJCQlnbC51bmlmb3JtNGYodGhpcy5sb2NDb2xv
ckZpbGwsIDEuMCwgMS4wLCAxLjAsIDEuMCk7DQoJCWlmICh0aGlzLmxvY1NhbXBsZXJGcm9udCkN
CgkJCWdsLnVuaWZvcm0xaSh0aGlzLmxvY1NhbXBsZXJGcm9udCwgMCk7DQoJCWlmICh0aGlzLmxv
Y1NhbXBsZXJCYWNrKQ0KCQkJZ2wudW5pZm9ybTFpKHRoaXMubG9jU2FtcGxlckJhY2ssIDEpOw0K
CQlpZiAodGhpcy5sb2NEZXN0U3RhcnQpDQoJCQlnbC51bmlmb3JtMmYodGhpcy5sb2NEZXN0U3Rh
cnQsIDAuMCwgMC4wKTsNCgkJaWYgKHRoaXMubG9jRGVzdEVuZCkNCgkJCWdsLnVuaWZvcm0yZih0
aGlzLmxvY0Rlc3RFbmQsIDEuMCwgMS4wKTsNCgkJaWYgKHRoaXMubG9jTGF5ZXJTY2FsZSkNCgkJ
CWdsLnVuaWZvcm0xZih0aGlzLmxvY0xheWVyU2NhbGUsIDEuMCk7DQoJCWlmICh0aGlzLmxvY0xh
eWVyQW5nbGUpDQoJCQlnbC51bmlmb3JtMWYodGhpcy5sb2NMYXllckFuZ2xlLCAwLjApOw0KCQlp
ZiAodGhpcy5sb2NWaWV3T3JpZ2luKQ0KCQkJZ2wudW5pZm9ybTJmKHRoaXMubG9jVmlld09yaWdp
biwgMC4wLCAwLjApOw0KCQlpZiAodGhpcy5sb2NTY3JvbGxQb3MpDQoJCQlnbC51bmlmb3JtMmYo
dGhpcy5sb2NTY3JvbGxQb3MsIDAuMCwgMC4wKTsNCgkJaWYgKHRoaXMubG9jU2Vjb25kcykNCgkJ
CWdsLnVuaWZvcm0xZih0aGlzLmxvY1NlY29uZHMsIDAuMCk7DQoJCXRoaXMuaGFzQ3VycmVudE1h
dE1WID0gZmFsc2U7CQkvLyBtYXRNViBuZWVkcyB1cGRhdGluZw0KCX07DQoJZnVuY3Rpb24gYXJl
TWF0NHNFcXVhbChhLCBiKQ0KCXsNCgkJcmV0dXJuIGFbMF09PT1iWzBdJiZhWzFdPT09YlsxXSYm
YVsyXT09PWJbMl0mJmFbM109PT1iWzNdJiYNCgkJCSAgIGFbNF09PT1iWzRdJiZhWzVdPT09Yls1
XSYmYVs2XT09PWJbNl0mJmFbN109PT1iWzddJiYNCgkJCSAgIGFbOF09PT1iWzhdJiZhWzldPT09
Yls5XSYmYVsxMF09PT1iWzEwXSYmYVsxMV09PT1iWzExXSYmDQoJCQkgICBhWzEyXT09PWJbMTJd
JiZhWzEzXT09PWJbMTNdJiZhWzE0XT09PWJbMTRdJiZhWzE1XT09PWJbMTVdOw0KCX07DQoJR0xT
aGFkZXJQcm9ncmFtLnByb3RvdHlwZS51cGRhdGVNYXRNViA9IGZ1bmN0aW9uIChtdikNCgl7DQoJ
CWlmIChhcmVNYXQ0c0VxdWFsKHRoaXMubHBNYXRNViwgbXYpKQ0KCQkJcmV0dXJuOwkJLy8gbm8g
Y2hhbmdlLCBzYXZlIHRoZSBleHBlbnNpdmUgR0wgY2FsbA0KCQltYXQ0LnNldChtdiwgdGhpcy5s
cE1hdE1WKTsNCgkJdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMubG9jTWF0TVYsIGZhbHNl
LCBtdik7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5jcmVhdGVTaGFkZXJQcm9ncmFtID0gZnVu
Y3Rpb24oc2hhZGVyRW50cnksIHZzU291cmNlLCBuYW1lKQ0KCXsNCgkJdmFyIGdsID0gdGhpcy5n
bDsNCgkJdmFyIGZyYWdtZW50U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NI
QURFUik7DQoJCWdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlciwgc2hhZGVyRW50cnkuc3Jj
KTsNCgkJZ2wuY29tcGlsZVNoYWRlcihmcmFnbWVudFNoYWRlcik7DQoJCWlmICghZ2wuZ2V0U2hh
ZGVyUGFyYW1ldGVyKGZyYWdtZW50U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpDQoJCXsNCgkJ
CXZhciBjb21waWxhdGlvbmxvZyA9IGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ21lbnRTaGFkZXIp
Ow0KCQkJZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTsNCgkJCXRocm93IG5ldyBFcnJv
cigiZXJyb3IgY29tcGlsaW5nIGZyYWdtZW50IHNoYWRlcjogIiArIGNvbXBpbGF0aW9ubG9nKTsN
CgkJfQ0KCQl2YXIgdmVydGV4U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFE
RVIpOw0KCQlnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLCB2c1NvdXJjZSk7DQoJCWdsLmNv
bXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKTsNCgkJaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIo
dmVydGV4U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpDQoJCXsNCgkJCXZhciBjb21waWxhdGlv
bmxvZyA9IGdsLmdldFNoYWRlckluZm9Mb2codmVydGV4U2hhZGVyKTsNCgkJCWdsLmRlbGV0ZVNo
YWRlcihmcmFnbWVudFNoYWRlcik7DQoJCQlnbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTsN
CgkJCXRocm93IG5ldyBFcnJvcigiZXJyb3IgY29tcGlsaW5nIHZlcnRleCBzaGFkZXI6ICIgKyBj
b21waWxhdGlvbmxvZyk7DQoJCX0NCgkJdmFyIHNoYWRlclByb2dyYW0gPSBnbC5jcmVhdGVQcm9n
cmFtKCk7DQoJCWdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7
DQoJCWdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpOw0KCQlnbC5s
aW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTsNCgkJaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVy
KHNoYWRlclByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkNCgkJew0KCQkJdmFyIGNvbXBpbGF0aW9u
bG9nID0gZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coc2hhZGVyUHJvZ3JhbSk7DQoJCQlnbC5kZWxldGVT
aGFkZXIoZnJhZ21lbnRTaGFkZXIpOw0KCQkJZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcik7
DQoJCQlnbC5kZWxldGVQcm9ncmFtKHNoYWRlclByb2dyYW0pOw0KCQkJdGhyb3cgbmV3IEVycm9y
KCJlcnJvciBsaW5raW5nIHNoYWRlciBwcm9ncmFtOiAiICsgY29tcGlsYXRpb25sb2cpOw0KCQl9
DQoJCWdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7DQoJCWdsLmRlbGV0ZVNoYWRlcihmcmFn
bWVudFNoYWRlcik7DQoJCWdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpOw0KCQl2YXIgcmV0
ID0gbmV3IEdMU2hhZGVyUHJvZ3JhbShnbCwgc2hhZGVyUHJvZ3JhbSwgbmFtZSk7DQoJCXJldC5l
eHRlbmRCb3hIb3Jpem9udGFsID0gc2hhZGVyRW50cnkuZXh0ZW5kQm94SG9yaXpvbnRhbCB8fCAw
Ow0KCQlyZXQuZXh0ZW5kQm94VmVydGljYWwgPSBzaGFkZXJFbnRyeS5leHRlbmRCb3hWZXJ0aWNh
bCB8fCAwOw0KCQlyZXQuY3Jvc3NTYW1wbGluZyA9ICEhc2hhZGVyRW50cnkuY3Jvc3NTYW1wbGlu
ZzsNCgkJcmV0LnByZXNlcnZlc09wYXF1ZW5lc3MgPSAhIXNoYWRlckVudHJ5LnByZXNlcnZlc09w
YXF1ZW5lc3M7DQoJCXJldC5hbmltYXRlZCA9ICEhc2hhZGVyRW50cnkuYW5pbWF0ZWQ7DQoJCXJl
dC5wYXJhbWV0ZXJzID0gc2hhZGVyRW50cnkucGFyYW1ldGVycyB8fCBbXTsNCgkJdmFyIGksIGxl
bjsNCgkJZm9yIChpID0gMCwgbGVuID0gcmV0LnBhcmFtZXRlcnMubGVuZ3RoOyBpIDwgbGVuOyBp
KyspDQoJCXsNCgkJCXJldC5wYXJhbWV0ZXJzW2ldWzFdID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9u
KHNoYWRlclByb2dyYW0sIHJldC5wYXJhbWV0ZXJzW2ldWzBdKTsNCgkJCXJldC5sYXN0Q3VzdG9t
UGFyYW1zLnB1c2goMCk7DQoJCQlnbC51bmlmb3JtMWYocmV0LnBhcmFtZXRlcnNbaV1bMV0sIDAp
Ow0KCQl9DQoJCWNyLnNlYWwocmV0KTsNCgkJcmV0dXJuIHJldDsNCgl9Ow0KCUdMV3JhcF8ucHJv
dG90eXBlLmdldFNoYWRlckluZGV4ID0gZnVuY3Rpb24obmFtZV8pDQoJew0KCQl2YXIgaSwgbGVu
Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnNoYWRlclByb2dyYW1zLmxlbmd0aDsgaSA8IGxl
bjsgaSsrKQ0KCQl7DQoJCQlpZiAodGhpcy5zaGFkZXJQcm9ncmFtc1tpXS5uYW1lID09PSBuYW1l
XykNCgkJCQlyZXR1cm4gaTsNCgkJfQ0KCQlyZXR1cm4gLTE7DQoJfTsNCglHTFdyYXBfLnByb3Rv
dHlwZS5wcm9qZWN0ID0gZnVuY3Rpb24gKHgsIHksIG91dCkNCgl7DQoJCXZhciBtdiA9IHRoaXMu
bWF0TVY7DQoJCXZhciBwcm9qID0gdGhpcy5tYXRQOw0KCQl2YXIgZlRlbXBvID0gWzAsIDAsIDAs
IDAsIDAsIDAsIDAsIDBdOw0KCQlmVGVtcG9bMF0gPSBtdlswXSp4K212WzRdKnkrbXZbMTJdOw0K
CQlmVGVtcG9bMV0gPSBtdlsxXSp4K212WzVdKnkrbXZbMTNdOw0KCQlmVGVtcG9bMl0gPSBtdlsy
XSp4K212WzZdKnkrbXZbMTRdOw0KCQlmVGVtcG9bM10gPSBtdlszXSp4K212WzddKnkrbXZbMTVd
Ow0KCQlmVGVtcG9bNF0gPSBwcm9qWzBdKmZUZW1wb1swXStwcm9qWzRdKmZUZW1wb1sxXStwcm9q
WzhdKmZUZW1wb1syXStwcm9qWzEyXSpmVGVtcG9bM107DQoJCWZUZW1wb1s1XSA9IHByb2pbMV0q
ZlRlbXBvWzBdK3Byb2pbNV0qZlRlbXBvWzFdK3Byb2pbOV0qZlRlbXBvWzJdK3Byb2pbMTNdKmZU
ZW1wb1szXTsNCgkJZlRlbXBvWzZdID0gcHJvalsyXSpmVGVtcG9bMF0rcHJvals2XSpmVGVtcG9b
MV0rcHJvalsxMF0qZlRlbXBvWzJdK3Byb2pbMTRdKmZUZW1wb1szXTsNCgkJZlRlbXBvWzddID0g
LWZUZW1wb1syXTsNCgkJaWYoZlRlbXBvWzddPT09MC4wKQkvL1RoZSB3IHZhbHVlDQoJCQlyZXR1
cm47DQoJCWZUZW1wb1s3XT0xLjAvZlRlbXBvWzddOw0KCQlmVGVtcG9bNF0qPWZUZW1wb1s3XTsN
CgkJZlRlbXBvWzVdKj1mVGVtcG9bN107DQoJCWZUZW1wb1s2XSo9ZlRlbXBvWzddOw0KCQlvdXRb
MF09KGZUZW1wb1s0XSowLjUrMC41KSp0aGlzLndpZHRoOw0KCQlvdXRbMV09KGZUZW1wb1s1XSow
LjUrMC41KSp0aGlzLmhlaWdodDsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnNldFNpemUgPSBm
dW5jdGlvbih3LCBoLCBmb3JjZSkNCgl7DQoJCWlmICh0aGlzLndpZHRoID09PSB3ICYmIHRoaXMu
aGVpZ2h0ID09PSBoICYmICFmb3JjZSkNCgkJCXJldHVybjsNCgkJdGhpcy5lbmRCYXRjaCgpOw0K
CQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQl0aGlzLndpZHRoID0gdzsNCgkJdGhpcy5oZWlnaHQgPSBo
Ow0KCQlnbC52aWV3cG9ydCgwLCAwLCB3LCBoKTsNCgkJbWF0NC5sb29rQXQodGhpcy5jYW0sIHRo
aXMubG9vaywgdGhpcy51cCwgdGhpcy5tYXRNVik7DQoJCWlmICh0aGlzLmVuYWJsZUZyb250VG9C
YWNrKQ0KCQl7DQoJCQltYXQ0Lm9ydGhvKC13LzIsIHcvMiwgaC8yLCAtaC8yLCB0aGlzLnpOZWFy
LCB0aGlzLnpGYXIsIHRoaXMubWF0UCk7DQoJCQl0aGlzLndvcmxkU2NhbGVbMF0gPSAxOw0KCQkJ
dGhpcy53b3JsZFNjYWxlWzFdID0gMTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCW1hdDQucGVyc3Bl
Y3RpdmUoNDUsIHcgLyBoLCB0aGlzLnpOZWFyLCB0aGlzLnpGYXIsIHRoaXMubWF0UCk7DQoJCQl2
YXIgdGwgPSBbMCwgMF07DQoJCQl2YXIgYnIgPSBbMCwgMF07DQoJCQl0aGlzLnByb2plY3QoMCwg
MCwgdGwpOw0KCQkJdGhpcy5wcm9qZWN0KDEsIDEsIGJyKTsNCgkJCXRoaXMud29ybGRTY2FsZVsw
XSA9IDEgLyAoYnJbMF0gLSB0bFswXSk7DQoJCQl0aGlzLndvcmxkU2NhbGVbMV0gPSAtMSAvIChi
clsxXSAtIHRsWzFdKTsNCgkJfQ0KCQl2YXIgaSwgbGVuLCBzOw0KCQlmb3IgKGkgPSAwLCBsZW4g
PSB0aGlzLnNoYWRlclByb2dyYW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlzID0g
dGhpcy5zaGFkZXJQcm9ncmFtc1tpXTsNCgkJCXMuaGFzQ3VycmVudE1hdE1WID0gZmFsc2U7DQoJ
CQlpZiAocy5sb2NNYXRQKQ0KCQkJew0KCQkJCWdsLnVzZVByb2dyYW0ocy5zaGFkZXJQcm9ncmFt
KTsNCgkJCQlnbC51bmlmb3JtTWF0cml4NGZ2KHMubG9jTWF0UCwgZmFsc2UsIHRoaXMubWF0UCk7
DQoJCQl9DQoJCX0NCgkJZ2wudXNlUHJvZ3JhbSh0aGlzLnNoYWRlclByb2dyYW1zW3RoaXMubGFz
dFByb2dyYW1dLnNoYWRlclByb2dyYW0pOw0KCQlnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJE
LCBudWxsKTsNCgkJZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMSk7DQoJCWdsLmJpbmRUZXh0
dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpOw0KCQlnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUw
KTsNCgkJdGhpcy5sYXN0VGV4dHVyZTAgPSBudWxsOw0KCQl0aGlzLmxhc3RUZXh0dXJlMSA9IG51
bGw7DQoJCWlmICh0aGlzLmRlcHRoQnVmZmVyKQ0KCQl7DQoJCQlnbC5iaW5kRnJhbWVidWZmZXIo
Z2wuRlJBTUVCVUZGRVIsIHRoaXMuZmJvKTsNCgkJCWdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVO
REVSQlVGRkVSLCB0aGlzLmRlcHRoQnVmZmVyKTsNCgkJCWdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2Uo
Z2wuUkVOREVSQlVGRkVSLCBnbC5ERVBUSF9DT01QT05FTlQxNiwgdGhpcy53aWR0aCwgdGhpcy5o
ZWlnaHQpOw0KCQkJaWYgKCF0aGlzLmF0dGFjaGVkRGVwdGhCdWZmZXIpDQoJCQl7DQoJCQkJZ2wu
ZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkRFUFRIX0FUVEFDSE1F
TlQsIGdsLlJFTkRFUkJVRkZFUiwgdGhpcy5kZXB0aEJ1ZmZlcik7DQoJCQkJdGhpcy5hdHRhY2hl
ZERlcHRoQnVmZmVyID0gdHJ1ZTsNCgkJCX0NCgkJCWdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVO
REVSQlVGRkVSLCBudWxsKTsNCgkJCWdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwg
bnVsbCk7DQoJCQl0aGlzLnJlbmRlclRvVGV4ID0gbnVsbDsNCgkJfQ0KCX07DQoJR0xXcmFwXy5w
cm90b3R5cGUucmVzZXRNb2RlbFZpZXcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJbWF0NC5sb29rQXQo
dGhpcy5jYW0sIHRoaXMubG9vaywgdGhpcy51cCwgdGhpcy5tYXRNVik7DQoJCW1hdDQuc2NhbGUo
dGhpcy5tYXRNViwgdGhpcy53b3JsZFNjYWxlKTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnRy
YW5zbGF0ZSA9IGZ1bmN0aW9uICh4LCB5KQ0KCXsNCgkJaWYgKHggPT09IDAgJiYgeSA9PT0gMCkN
CgkJCXJldHVybjsNCgkJdGhpcy50bXBWZWMzWzBdID0geDsvLyAqIHRoaXMud29ybGRTY2FsZVsw
XTsNCgkJdGhpcy50bXBWZWMzWzFdID0geTsvLyAqIHRoaXMud29ybGRTY2FsZVsxXTsNCgkJdGhp
cy50bXBWZWMzWzJdID0gMDsNCgkJbWF0NC50cmFuc2xhdGUodGhpcy5tYXRNViwgdGhpcy50bXBW
ZWMzKTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHgsIHkpDQoJ
ew0KCQlpZiAoeCA9PT0gMSAmJiB5ID09PSAxKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLnRtcFZlYzNb
MF0gPSB4Ow0KCQl0aGlzLnRtcFZlYzNbMV0gPSB5Ow0KCQl0aGlzLnRtcFZlYzNbMl0gPSAxOw0K
CQltYXQ0LnNjYWxlKHRoaXMubWF0TVYsIHRoaXMudG1wVmVjMyk7DQoJfTsNCglHTFdyYXBfLnBy
b3RvdHlwZS5yb3RhdGVaID0gZnVuY3Rpb24gKGEpDQoJew0KCQlpZiAoYSA9PT0gMCkNCgkJCXJl
dHVybjsNCgkJbWF0NC5yb3RhdGVaKHRoaXMubWF0TVYsIGEpOw0KCX07DQoJR0xXcmFwXy5wcm90
b3R5cGUudXBkYXRlTW9kZWxWaWV3ID0gZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKGFyZU1hdDRzRXF1
YWwodGhpcy5sYXN0TVYsIHRoaXMubWF0TVYpKQ0KCQkJcmV0dXJuOw0KCQl2YXIgYiA9IHRoaXMu
cHVzaEJhdGNoKCk7DQoJCWIudHlwZSA9IEJBVENIX1VQREFURU1PREVMVklFVzsNCgkJaWYgKGIu
bWF0NHBhcmFtKQ0KCQkJbWF0NC5zZXQodGhpcy5tYXRNViwgYi5tYXQ0cGFyYW0pOw0KCQllbHNl
DQoJCQliLm1hdDRwYXJhbSA9IG1hdDQuY3JlYXRlKHRoaXMubWF0TVYpOw0KCQltYXQ0LnNldCh0
aGlzLm1hdE1WLCB0aGlzLmxhc3RNVik7DQoJCXRoaXMuaGFzUXVhZEJhdGNoVG9wID0gZmFsc2U7
DQoJCXRoaXMuaGFzUG9pbnRCYXRjaFRvcCA9IGZhbHNlOw0KCX07DQoJLyoNCgl2YXIgZGVidWdC
YXRjaCA9IGZhbHNlOw0KCWpRdWVyeShkb2N1bWVudCkubW91c2Vkb3duKA0KCQlmdW5jdGlvbihp
bmZvKSB7DQoJCQlpZiAoaW5mby53aGljaCA9PT0gMikNCgkJCQlkZWJ1Z0JhdGNoID0gdHJ1ZTsN
CgkJfQ0KCSk7DQoJKi8NCglHTFdyYXBfLnByb3RvdHlwZS5zZXRFYXJseVpJbmRleCA9IGZ1bmN0
aW9uIChpKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZUZyb250VG9CYWNrKQ0KCQkJcmV0dXJuOw0K
CQlpZiAoaSA+IDMyNzYwKQ0KCQkJaSA9IDMyNzYwOw0KCQl0aGlzLmN1cnJlbnRaID0gdGhpcy5j
YW1bMl0gLSB0aGlzLnpOZWFyIC0gaSAqIHRoaXMuekluY3JlbWVudDsNCgl9Ow0KCWZ1bmN0aW9u
IEdMQmF0Y2hKb2IodHlwZV8sIGdsd3JhcF8pDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBlXzsNCgkJ
dGhpcy5nbHdyYXAgPSBnbHdyYXBfOw0KCQl0aGlzLmdsID0gZ2x3cmFwXy5nbDsNCgkJdGhpcy5v
cGFjaXR5UGFyYW0gPSAwOwkJLy8gZm9yIHNldE9wYWNpdHkoKQ0KCQl0aGlzLnN0YXJ0SW5kZXgg
PSAwOwkJLy8gZm9yIHF1YWQoKQ0KCQl0aGlzLmluZGV4Q291bnQgPSAwOwkJLy8gIg0KCQl0aGlz
LnRleFBhcmFtID0gbnVsbDsJCS8vIGZvciBzZXRUZXh0dXJlKCkNCgkJdGhpcy5tYXQ0cGFyYW0g
PSBudWxsOwkJLy8gZm9yIHVwZGF0ZU1vZGVsVmlldygpDQoJCXRoaXMuc2hhZGVyUGFyYW1zID0g
W107CQkvLyBmb3IgdXNlciBwYXJhbWV0ZXJzDQoJCWNyLnNlYWwodGhpcyk7DQoJfTsNCglHTEJh
dGNoSm9iLnByb3RvdHlwZS5kb1NldEVhcmx5WlBhc3MgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFy
IGdsID0gdGhpcy5nbDsNCgkJdmFyIGdsd3JhcCA9IHRoaXMuZ2x3cmFwOw0KCQlpZiAodGhpcy5z
dGFydEluZGV4ICE9PSAwKQkJLy8gZW5hYmxlDQoJCXsNCgkJCWdsLmRlcHRoTWFzayh0cnVlKTsJ
CQkvLyBlbmFibGUgZGVwdGggd3JpdGVzDQoJCQlnbC5jb2xvck1hc2soZmFsc2UsIGZhbHNlLCBm
YWxzZSwgZmFsc2UpOwkvLyBkaXNhYmxlIGNvbG9yIHdyaXRlcw0KCQkJZ2wuZGlzYWJsZShnbC5C
TEVORCk7CQkvLyBubyBjb2xvciB3cml0ZXMgc28gZGlzYWJsZSBibGVuZA0KCQkJZ2wuYmluZEZy
YW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbHdyYXAuZmJvKTsNCgkJCWdsLmZyYW1lYnVmZmVy
VGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVS
RV8yRCwgbnVsbCwgMCk7DQoJCQlnbC5jbGVhcihnbC5ERVBUSF9CVUZGRVJfQklUKTsJCS8vIGF1
dG8tY2xlYXIgZGVwdGggYnVmZmVyDQoJCQlnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZG
RVIsIG51bGwpOw0KCQkJZ2x3cmFwLmlzQmF0Y2hJbkVhcmx5WlBhc3MgPSB0cnVlOw0KCQl9DQoJ
CWVsc2UNCgkJew0KCQkJZ2wuZGVwdGhNYXNrKGZhbHNlKTsJCS8vIGRpc2FibGUgZGVwdGggd3Jp
dGVzLCBvbmx5IHRlc3QgZXhpc3RpbmcgZGVwdGggdmFsdWVzDQoJCQlnbC5jb2xvck1hc2sodHJ1
ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7CQkvLyBlbmFibGUgY29sb3Igd3JpdGVzDQoJCQlnbC5lbmFi
bGUoZ2wuQkxFTkQpOwkJLy8gdHVybiBibGVuZGluZyBiYWNrIG9uDQoJCQlnbHdyYXAuaXNCYXRj
aEluRWFybHlaUGFzcyA9IGZhbHNlOw0KCQl9DQoJfTsNCglHTEJhdGNoSm9iLnByb3RvdHlwZS5k
b1NldFRleHR1cmUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlz
LmdsLlRFWFRVUkVfMkQsIHRoaXMudGV4UGFyYW0pOw0KCX07DQoJR0xCYXRjaEpvYi5wcm90b3R5
cGUuZG9TZXRUZXh0dXJlMSA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0K
CQlnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUxKTsNCgkJZ2wuYmluZFRleHR1cmUoZ2wuVEVY
VFVSRV8yRCwgdGhpcy50ZXhQYXJhbSk7DQoJCWdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAp
Ow0KCX07DQoJR0xCYXRjaEpvYi5wcm90b3R5cGUuZG9TZXRPcGFjaXR5ID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXZhciBvID0gdGhpcy5vcGFjaXR5UGFyYW07DQoJCXZhciBnbHdyYXAgPSB0aGlzLmds
d3JhcDsNCgkJZ2x3cmFwLmN1cnJlbnRPcGFjaXR5ID0gbzsNCgkJdmFyIGN1clByb2cgPSBnbHdy
YXAuY3VycmVudFNoYWRlcjsNCgkJaWYgKGN1clByb2cubG9jT3BhY2l0eSAmJiBjdXJQcm9nLmxw
T3BhY2l0eSAhPT0gbykNCgkJew0KCQkJY3VyUHJvZy5scE9wYWNpdHkgPSBvOw0KCQkJdGhpcy5n
bC51bmlmb3JtMWYoY3VyUHJvZy5sb2NPcGFjaXR5LCBvKTsNCgkJfQ0KCX07DQoJR0xCYXRjaEpv
Yi5wcm90b3R5cGUuZG9RdWFkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuZ2wuZHJhd0VsZW1l
bnRzKHRoaXMuZ2wuVFJJQU5HTEVTLCB0aGlzLmluZGV4Q291bnQsIHRoaXMuZ2wuVU5TSUdORURf
U0hPUlQsIHRoaXMuc3RhcnRJbmRleCk7DQoJfTsNCglHTEJhdGNoSm9iLnByb3RvdHlwZS5kb1Nl
dEJsZW5kID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuZ2wuYmxlbmRGdW5jKHRoaXMuc3RhcnRJ
bmRleCwgdGhpcy5pbmRleENvdW50KTsNCgl9Ow0KCUdMQmF0Y2hKb2IucHJvdG90eXBlLmRvVXBk
YXRlTW9kZWxWaWV3ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBsZW4sIHMsIHNoYWRlclBy
b2dyYW1zID0gdGhpcy5nbHdyYXAuc2hhZGVyUHJvZ3JhbXMsIGN1cnJlbnRQcm9ncmFtID0gdGhp
cy5nbHdyYXAuY3VycmVudFByb2dyYW07DQoJCWZvciAoaSA9IDAsIGxlbiA9IHNoYWRlclByb2dy
YW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlzID0gc2hhZGVyUHJvZ3JhbXNbaV07
DQoJCQlpZiAoaSA9PT0gY3VycmVudFByb2dyYW0gJiYgcy5sb2NNYXRNVikNCgkJCXsNCgkJCQlz
LnVwZGF0ZU1hdE1WKHRoaXMubWF0NHBhcmFtKTsNCgkJCQlzLmhhc0N1cnJlbnRNYXRNViA9IHRy
dWU7DQoJCQl9DQoJCQllbHNlDQoJCQkJcy5oYXNDdXJyZW50TWF0TVYgPSBmYWxzZTsNCgkJfQ0K
CQltYXQ0LnNldCh0aGlzLm1hdDRwYXJhbSwgdGhpcy5nbHdyYXAuY3VycmVudE1WKTsNCgl9Ow0K
CUdMQmF0Y2hKb2IucHJvdG90eXBlLmRvUmVuZGVyVG9UZXh0dXJlID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXZhciBnbCA9IHRoaXMuZ2w7DQoJCXZhciBnbHdyYXAgPSB0aGlzLmdsd3JhcDsNCgkJaWYg
KHRoaXMudGV4UGFyYW0pDQoJCXsNCgkJCWlmIChnbHdyYXAubGFzdFRleHR1cmUxID09PSB0aGlz
LnRleFBhcmFtKQ0KCQkJew0KCQkJCWdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpOw0KCQkJ
CWdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpOw0KCQkJCWdsd3JhcC5sYXN0VGV4
dHVyZTEgPSBudWxsOw0KCQkJCWdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApOw0KCQkJfQ0K
CQkJZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbHdyYXAuZmJvKTsNCgkJCWlm
ICghZ2x3cmFwLmlzQmF0Y2hJbkVhcmx5WlBhc3MpDQoJCQl7DQoJCQkJZ2wuZnJhbWVidWZmZXJU
ZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJF
XzJELCB0aGlzLnRleFBhcmFtLCAwKTsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmICgh
Z2x3cmFwLmVuYWJsZUZyb250VG9CYWNrKQ0KCQkJew0KCQkJCWdsLmZyYW1lYnVmZmVyVGV4dHVy
ZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwg
bnVsbCwgMCk7DQoJCQl9DQoJCQlnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51
bGwpOw0KCQl9DQoJfTsNCglHTEJhdGNoSm9iLnByb3RvdHlwZS5kb0NsZWFyID0gZnVuY3Rpb24g
KCkNCgl7DQoJCXZhciBnbCA9IHRoaXMuZ2w7DQoJCXZhciBtb2RlID0gdGhpcy5zdGFydEluZGV4
Ow0KCQlpZiAobW9kZSA9PT0gMCkJCQkvLyBjbGVhciB3aG9sZSBzdXJmYWNlDQoJCXsNCgkJCWds
LmNsZWFyQ29sb3IodGhpcy5tYXQ0cGFyYW1bMF0sIHRoaXMubWF0NHBhcmFtWzFdLCB0aGlzLm1h
dDRwYXJhbVsyXSwgdGhpcy5tYXQ0cGFyYW1bM10pOw0KCQkJZ2wuY2xlYXIoZ2wuQ09MT1JfQlVG
RkVSX0JJVCk7DQoJCX0NCgkJZWxzZSBpZiAobW9kZSA9PT0gMSkJLy8gY2xlYXIgcmVjdGFuZ2xl
DQoJCXsNCgkJCWdsLmVuYWJsZShnbC5TQ0lTU09SX1RFU1QpOw0KCQkJZ2wuc2Npc3Nvcih0aGlz
Lm1hdDRwYXJhbVswXSwgdGhpcy5tYXQ0cGFyYW1bMV0sIHRoaXMubWF0NHBhcmFtWzJdLCB0aGlz
Lm1hdDRwYXJhbVszXSk7DQoJCQlnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApOw0KCQkJZ2wuY2xl
YXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7DQoJCQlnbC5kaXNhYmxlKGdsLlNDSVNTT1JfVEVTVCk7
DQoJCX0NCgkJZWxzZQkJCQkJLy8gY2xlYXIgZGVwdGgNCgkJew0KCQkJZ2wuY2xlYXIoZ2wuREVQ
VEhfQlVGRkVSX0JJVCk7DQoJCX0NCgl9Ow0KCUdMQmF0Y2hKb2IucHJvdG90eXBlLmRvU2V0RGVw
dGhUZXN0RW5hYmxlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQl2
YXIgZW5hYmxlID0gdGhpcy5zdGFydEluZGV4Ow0KCQlpZiAoZW5hYmxlICE9PSAwKQ0KCQl7DQoJ
CQlnbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlnbC5kaXNh
YmxlKGdsLkRFUFRIX1RFU1QpOw0KCQl9DQoJfTsNCglHTEJhdGNoSm9iLnByb3RvdHlwZS5kb1Bv
aW50cyA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQl2YXIgZ2x3cmFw
ID0gdGhpcy5nbHdyYXA7DQoJCWlmIChnbHdyYXAuZW5hYmxlRnJvbnRUb0JhY2spDQoJCQlnbC5k
aXNhYmxlKGdsLkRFUFRIX1RFU1QpOw0KCQl2YXIgcyA9IGdsd3JhcC5zaGFkZXJQcm9ncmFtc1sx
XTsNCgkJZ2wudXNlUHJvZ3JhbShzLnNoYWRlclByb2dyYW0pOw0KCQlpZiAoIXMuaGFzQ3VycmVu
dE1hdE1WICYmIHMubG9jTWF0TVYpDQoJCXsNCgkJCXMudXBkYXRlTWF0TVYoZ2x3cmFwLmN1cnJl
bnRNVik7DQoJCQlzLmhhc0N1cnJlbnRNYXRNViA9IHRydWU7DQoJCX0NCgkJZ2wuZW5hYmxlVmVy
dGV4QXR0cmliQXJyYXkocy5sb2NBUG9zKTsNCgkJZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZG
RVIsIGdsd3JhcC5wb2ludEJ1ZmZlcik7DQoJCWdsLnZlcnRleEF0dHJpYlBvaW50ZXIocy5sb2NB
UG9zLCA0LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApOw0KCQlnbC5kcmF3QXJyYXlzKGdsLlBPSU5U
UywgdGhpcy5zdGFydEluZGV4IC8gNCwgdGhpcy5pbmRleENvdW50KTsNCgkJcyA9IGdsd3JhcC5j
dXJyZW50U2hhZGVyOw0KCQlnbC51c2VQcm9ncmFtKHMuc2hhZGVyUHJvZ3JhbSk7DQoJCWlmIChz
LmxvY0FQb3MgPj0gMCkNCgkJew0KCQkJZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocy5sb2NB
UG9zKTsNCgkJCWdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBnbHdyYXAudmVydGV4QnVm
ZmVyc1tnbHdyYXAuY3VyQnVmZmVyXSk7DQoJCQlnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHMubG9j
QVBvcywgZ2x3cmFwLmVuYWJsZUZyb250VG9CYWNrID8gMyA6IDIsIGdsLkZMT0FULCBmYWxzZSwg
MCwgMCk7DQoJCX0NCgkJaWYgKHMubG9jQVRleCA+PSAwKQ0KCQl7DQoJCQlnbC5lbmFibGVWZXJ0
ZXhBdHRyaWJBcnJheShzLmxvY0FUZXgpOw0KCQkJZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZG
RVIsIGdsd3JhcC50ZXhjb29yZEJ1ZmZlcnNbZ2x3cmFwLmN1ckJ1ZmZlcl0pOw0KCQkJZ2wudmVy
dGV4QXR0cmliUG9pbnRlcihzLmxvY0FUZXgsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7DQoJ
CX0NCgkJaWYgKGdsd3JhcC5lbmFibGVGcm9udFRvQmFjaykNCgkJCWdsLmVuYWJsZShnbC5ERVBU
SF9URVNUKTsNCgl9Ow0KCUdMQmF0Y2hKb2IucHJvdG90eXBlLmRvU2V0UHJvZ3JhbSA9IGZ1bmN0
aW9uICgpDQoJew0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQl2YXIgZ2x3cmFwID0gdGhpcy5nbHdy
YXA7DQoJCXZhciBzID0gZ2x3cmFwLnNoYWRlclByb2dyYW1zW3RoaXMuc3RhcnRJbmRleF07CQkv
LyByZWN5Y2xlZCBwYXJhbSB0byBzYXZlIG1lbW9yeQ0KCQlnbHdyYXAuY3VycmVudFByb2dyYW0g
PSB0aGlzLnN0YXJ0SW5kZXg7CQkJLy8gY3VycmVudCBiYXRjaCBwcm9ncmFtDQoJCWdsd3JhcC5j
dXJyZW50U2hhZGVyID0gczsNCgkJZ2wudXNlUHJvZ3JhbShzLnNoYWRlclByb2dyYW0pOwkJCQkJ
CS8vIHN3aXRjaCB0bw0KCQlpZiAoIXMuaGFzQ3VycmVudE1hdE1WICYmIHMubG9jTWF0TVYpDQoJ
CXsNCgkJCXMudXBkYXRlTWF0TVYoZ2x3cmFwLmN1cnJlbnRNVik7DQoJCQlzLmhhc0N1cnJlbnRN
YXRNViA9IHRydWU7DQoJCX0NCgkJaWYgKHMubG9jT3BhY2l0eSAmJiBzLmxwT3BhY2l0eSAhPT0g
Z2x3cmFwLmN1cnJlbnRPcGFjaXR5KQ0KCQl7DQoJCQlzLmxwT3BhY2l0eSA9IGdsd3JhcC5jdXJy
ZW50T3BhY2l0eTsNCgkJCWdsLnVuaWZvcm0xZihzLmxvY09wYWNpdHksIGdsd3JhcC5jdXJyZW50
T3BhY2l0eSk7DQoJCX0NCgkJaWYgKHMubG9jQVBvcyA+PSAwKQ0KCQl7DQoJCQlnbC5lbmFibGVW
ZXJ0ZXhBdHRyaWJBcnJheShzLmxvY0FQb3MpOw0KCQkJZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9C
VUZGRVIsIGdsd3JhcC52ZXJ0ZXhCdWZmZXJzW2dsd3JhcC5jdXJCdWZmZXJdKTsNCgkJCWdsLnZl
cnRleEF0dHJpYlBvaW50ZXIocy5sb2NBUG9zLCBnbHdyYXAuZW5hYmxlRnJvbnRUb0JhY2sgPyAz
IDogMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTsNCgkJfQ0KCQlpZiAocy5sb2NBVGV4ID49IDAp
DQoJCXsNCgkJCWdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHMubG9jQVRleCk7DQoJCQlnbC5i
aW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZ2x3cmFwLnRleGNvb3JkQnVmZmVyc1tnbHdyYXAu
Y3VyQnVmZmVyXSk7DQoJCQlnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHMubG9jQVRleCwgMiwgZ2wu
RkxPQVQsIGZhbHNlLCAwLCAwKTsNCgkJfQ0KCX0NCglHTEJhdGNoSm9iLnByb3RvdHlwZS5kb1Nl
dENvbG9yID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBzID0gdGhpcy5nbHdyYXAuY3VycmVudFNo
YWRlcjsNCgkJdmFyIG1hdDRwYXJhbSA9IHRoaXMubWF0NHBhcmFtOw0KCQl0aGlzLmdsLnVuaWZv
cm00ZihzLmxvY0NvbG9yRmlsbCwgbWF0NHBhcmFtWzBdLCBtYXQ0cGFyYW1bMV0sIG1hdDRwYXJh
bVsyXSwgbWF0NHBhcmFtWzNdKTsNCgl9Ow0KCUdMQmF0Y2hKb2IucHJvdG90eXBlLmRvU2V0UHJv
Z3JhbVBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxlbiwgcyA9IHRoaXMu
Z2x3cmFwLmN1cnJlbnRTaGFkZXI7DQoJCXZhciBnbCA9IHRoaXMuZ2w7DQoJCXZhciBtYXQ0cGFy
YW0gPSB0aGlzLm1hdDRwYXJhbTsNCgkJaWYgKHMubG9jU2FtcGxlckJhY2sgJiYgdGhpcy5nbHdy
YXAubGFzdFRleHR1cmUxICE9PSB0aGlzLnRleFBhcmFtKQ0KCQl7DQoJCQlnbC5hY3RpdmVUZXh0
dXJlKGdsLlRFWFRVUkUxKTsNCgkJCWdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMu
dGV4UGFyYW0pOw0KCQkJdGhpcy5nbHdyYXAubGFzdFRleHR1cmUxID0gdGhpcy50ZXhQYXJhbTsN
CgkJCWdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApOw0KCQl9DQoJCXZhciB2ID0gbWF0NHBh
cmFtWzBdOw0KCQl2YXIgdjI7DQoJCWlmIChzLmxvY1BpeGVsV2lkdGggJiYgdiAhPT0gcy5scFBp
eGVsV2lkdGgpDQoJCXsNCgkJCXMubHBQaXhlbFdpZHRoID0gdjsNCgkJCWdsLnVuaWZvcm0xZihz
LmxvY1BpeGVsV2lkdGgsIHYpOw0KCQl9DQoJCXYgPSBtYXQ0cGFyYW1bMV07DQoJCWlmIChzLmxv
Y1BpeGVsSGVpZ2h0ICYmIHYgIT09IHMubHBQaXhlbEhlaWdodCkNCgkJew0KCQkJcy5scFBpeGVs
SGVpZ2h0ID0gdjsNCgkJCWdsLnVuaWZvcm0xZihzLmxvY1BpeGVsSGVpZ2h0LCB2KTsNCgkJfQ0K
CQl2ID0gbWF0NHBhcmFtWzJdOw0KCQl2MiA9IG1hdDRwYXJhbVszXTsNCgkJaWYgKHMubG9jRGVz
dFN0YXJ0ICYmICh2ICE9PSBzLmxwRGVzdFN0YXJ0WCB8fCB2MiAhPT0gcy5scERlc3RTdGFydFkp
KQ0KCQl7DQoJCQlzLmxwRGVzdFN0YXJ0WCA9IHY7DQoJCQlzLmxwRGVzdFN0YXJ0WSA9IHYyOw0K
CQkJZ2wudW5pZm9ybTJmKHMubG9jRGVzdFN0YXJ0LCB2LCB2Mik7DQoJCX0NCgkJdiA9IG1hdDRw
YXJhbVs0XTsNCgkJdjIgPSBtYXQ0cGFyYW1bNV07DQoJCWlmIChzLmxvY0Rlc3RFbmQgJiYgKHYg
IT09IHMubHBEZXN0RW5kWCB8fCB2MiAhPT0gcy5scERlc3RFbmRZKSkNCgkJew0KCQkJcy5scERl
c3RFbmRYID0gdjsNCgkJCXMubHBEZXN0RW5kWSA9IHYyOw0KCQkJZ2wudW5pZm9ybTJmKHMubG9j
RGVzdEVuZCwgdiwgdjIpOw0KCQl9DQoJCXYgPSBtYXQ0cGFyYW1bNl07DQoJCWlmIChzLmxvY0xh
eWVyU2NhbGUgJiYgdiAhPT0gcy5scExheWVyU2NhbGUpDQoJCXsNCgkJCXMubHBMYXllclNjYWxl
ID0gdjsNCgkJCWdsLnVuaWZvcm0xZihzLmxvY0xheWVyU2NhbGUsIHYpOw0KCQl9DQoJCXYgPSBt
YXQ0cGFyYW1bN107DQoJCWlmIChzLmxvY0xheWVyQW5nbGUgJiYgdiAhPT0gcy5scExheWVyQW5n
bGUpDQoJCXsNCgkJCXMubHBMYXllckFuZ2xlID0gdjsNCgkJCWdsLnVuaWZvcm0xZihzLmxvY0xh
eWVyQW5nbGUsIHYpOw0KCQl9DQoJCXYgPSBtYXQ0cGFyYW1bOF07DQoJCXYyID0gbWF0NHBhcmFt
WzldOw0KCQlpZiAocy5sb2NWaWV3T3JpZ2luICYmICh2ICE9PSBzLmxwVmlld09yaWdpblggfHwg
djIgIT09IHMubHBWaWV3T3JpZ2luWSkpDQoJCXsNCgkJCXMubHBWaWV3T3JpZ2luWCA9IHY7DQoJ
CQlzLmxwVmlld09yaWdpblkgPSB2MjsNCgkJCWdsLnVuaWZvcm0yZihzLmxvY1ZpZXdPcmlnaW4s
IHYsIHYyKTsNCgkJfQ0KCQl2ID0gbWF0NHBhcmFtWzEwXTsNCgkJdjIgPSBtYXQ0cGFyYW1bMTFd
Ow0KCQlpZiAocy5sb2NTY3JvbGxQb3MgJiYgKHYgIT09IHMubHBTY3JvbGxQb3NYIHx8IHYyICE9
PSBzLmxwU2Nyb2xsUG9zWSkpDQoJCXsNCgkJCXMubHBTY3JvbGxQb3NYID0gdjsNCgkJCXMubHBT
Y3JvbGxQb3NZID0gdjI7DQoJCQlnbC51bmlmb3JtMmYocy5sb2NTY3JvbGxQb3MsIHYsIHYyKTsN
CgkJfQ0KCQl2ID0gbWF0NHBhcmFtWzEyXTsNCgkJaWYgKHMubG9jU2Vjb25kcyAmJiB2ICE9PSBz
LmxwU2Vjb25kcykNCgkJew0KCQkJcy5scFNlY29uZHMgPSB2Ow0KCQkJZ2wudW5pZm9ybTFmKHMu
bG9jU2Vjb25kcywgdik7DQoJCX0NCgkJaWYgKHMucGFyYW1ldGVycy5sZW5ndGgpDQoJCXsNCgkJ
CWZvciAoaSA9IDAsIGxlbiA9IHMucGFyYW1ldGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJ
CXsNCgkJCQl2ID0gdGhpcy5zaGFkZXJQYXJhbXNbaV07DQoJCQkJaWYgKHYgIT09IHMubGFzdEN1
c3RvbVBhcmFtc1tpXSkNCgkJCQl7DQoJCQkJCXMubGFzdEN1c3RvbVBhcmFtc1tpXSA9IHY7DQoJ
CQkJCWdsLnVuaWZvcm0xZihzLnBhcmFtZXRlcnNbaV1bMV0sIHYpOw0KCQkJCX0NCgkJCX0NCgkJ
fQ0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUucHVzaEJhdGNoID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CWlmICh0aGlzLmJhdGNoUHRyID09PSB0aGlzLmJhdGNoLmxlbmd0aCkNCgkJCXRoaXMuYmF0Y2gu
cHVzaChuZXcgR0xCYXRjaEpvYihCQVRDSF9OVUxMLCB0aGlzKSk7DQoJCXJldHVybiB0aGlzLmJh
dGNoW3RoaXMuYmF0Y2hQdHIrK107DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5lbmRCYXRjaCA9
IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5iYXRjaFB0ciA9PT0gMCkNCgkJCXJldHVybjsN
CgkJaWYgKHRoaXMuZ2wuaXNDb250ZXh0TG9zdCgpKQ0KCQkJcmV0dXJuOw0KCQl2YXIgZ2wgPSB0
aGlzLmdsOw0KCQlpZiAodGhpcy5wb2ludFB0ciA+IDApDQoJCXsNCgkJCWdsLmJpbmRCdWZmZXIo
Z2wuQVJSQVlfQlVGRkVSLCB0aGlzLnBvaW50QnVmZmVyKTsNCgkJCWdsLmJ1ZmZlclN1YkRhdGEo
Z2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnBvaW50RGF0YS5zdWJhcnJheSgwLCB0aGlzLnBvaW50
UHRyKSk7DQoJCQlpZiAocyAmJiBzLmxvY0FQb3MgPj0gMCAmJiBzLm5hbWUgPT09ICI8cG9pbnQ+
IikNCgkJCQlnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHMubG9jQVBvcywgNCwgZ2wuRkxPQVQsIGZh
bHNlLCAwLCAwKTsNCgkJfQ0KCQlpZiAodGhpcy52ZXJ0ZXhQdHIgPiAwKQ0KCQl7DQoJCQl2YXIg
cyA9IHRoaXMuY3VycmVudFNoYWRlcjsNCgkJCWdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVS
LCB0aGlzLnZlcnRleEJ1ZmZlcnNbdGhpcy5jdXJCdWZmZXJdKTsNCgkJCWdsLmJ1ZmZlclN1YkRh
dGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRleERhdGEuc3ViYXJyYXkoMCwgdGhpcy52
ZXJ0ZXhQdHIpKTsNCgkJCWlmIChzICYmIHMubG9jQVBvcyA+PSAwICYmIHMubmFtZSAhPT0gIjxw
b2ludD4iKQ0KCQkJCWdsLnZlcnRleEF0dHJpYlBvaW50ZXIocy5sb2NBUG9zLCB0aGlzLmVuYWJs
ZUZyb250VG9CYWNrID8gMyA6IDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7DQoJCQlnbC5iaW5k
QnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy50ZXhjb29yZEJ1ZmZlcnNbdGhpcy5jdXJCdWZm
ZXJdKTsNCgkJCWdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnRleGNv
b3JkRGF0YS5zdWJhcnJheSgwLCB0aGlzLnRleFB0cikpOw0KCQkJaWYgKHMgJiYgcy5sb2NBVGV4
ID49IDAgJiYgcy5uYW1lICE9PSAiPHBvaW50PiIpDQoJCQkJZ2wudmVydGV4QXR0cmliUG9pbnRl
cihzLmxvY0FUZXgsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7DQoJCX0NCgkJdmFyIGksIGxl
biwgYjsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5iYXRjaFB0cjsgaSA8IGxlbjsgaSsrKQ0K
CQl7DQoJCQliID0gdGhpcy5iYXRjaFtpXTsNCgkJCXN3aXRjaCAoYi50eXBlKSB7DQoJCQljYXNl
IDE6DQoJCQkJYi5kb1F1YWQoKTsNCgkJCQlicmVhazsNCgkJCWNhc2UgMjoNCgkJCQliLmRvU2V0
VGV4dHVyZSgpOw0KCQkJCWJyZWFrOw0KCQkJY2FzZSAzOg0KCQkJCWIuZG9TZXRPcGFjaXR5KCk7
DQoJCQkJYnJlYWs7DQoJCQljYXNlIDQ6DQoJCQkJYi5kb1NldEJsZW5kKCk7DQoJCQkJYnJlYWs7
DQoJCQljYXNlIDU6DQoJCQkJYi5kb1VwZGF0ZU1vZGVsVmlldygpOw0KCQkJCWJyZWFrOw0KCQkJ
Y2FzZSA2Og0KCQkJCWIuZG9SZW5kZXJUb1RleHR1cmUoKTsNCgkJCQlicmVhazsNCgkJCWNhc2Ug
NzoNCgkJCQliLmRvQ2xlYXIoKTsNCgkJCQlicmVhazsNCgkJCWNhc2UgODoNCgkJCQliLmRvUG9p
bnRzKCk7DQoJCQkJYnJlYWs7DQoJCQljYXNlIDk6DQoJCQkJYi5kb1NldFByb2dyYW0oKTsNCgkJ
CQlicmVhazsNCgkJCWNhc2UgMTA6DQoJCQkJYi5kb1NldFByb2dyYW1QYXJhbWV0ZXJzKCk7DQoJ
CQkJYnJlYWs7DQoJCQljYXNlIDExOg0KCQkJCWIuZG9TZXRUZXh0dXJlMSgpOw0KCQkJCWJyZWFr
Ow0KCQkJY2FzZSAxMjoNCgkJCQliLmRvU2V0Q29sb3IoKTsNCgkJCQlicmVhazsNCgkJCWNhc2Ug
MTM6DQoJCQkJYi5kb1NldERlcHRoVGVzdEVuYWJsZWQoKTsNCgkJCQlicmVhazsNCgkJCWNhc2Ug
MTQ6DQoJCQkJYi5kb1NldEVhcmx5WlBhc3MoKTsNCgkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCQl0
aGlzLmJhdGNoUHRyID0gMDsNCgkJdGhpcy52ZXJ0ZXhQdHIgPSAwOw0KCQl0aGlzLnRleFB0ciA9
IDA7DQoJCXRoaXMucG9pbnRQdHIgPSAwOw0KCQl0aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNl
Ow0KCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgkJdGhpcy5pc0JhdGNoSW5FYXJs
eVpQYXNzID0gZmFsc2U7DQoJCXRoaXMuY3VyQnVmZmVyKys7DQoJCWlmICh0aGlzLmN1ckJ1ZmZl
ciA+PSBNVUxUSV9CVUZGRVJTKQ0KCQkJdGhpcy5jdXJCdWZmZXIgPSAwOw0KCX07DQoJR0xXcmFw
Xy5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uIChvcCkNCgl7DQoJCWlmIChvcCA9PT0g
dGhpcy5sYXN0T3BhY2l0eSkNCgkJCXJldHVybjsNCgkJaWYgKHRoaXMuaXNFYXJseVpQYXNzKQ0K
CQkJcmV0dXJuOwkJLy8gaWdub3JlDQoJCXZhciBiID0gdGhpcy5wdXNoQmF0Y2goKTsNCgkJYi50
eXBlID0gQkFUQ0hfU0VUT1BBQ0lUWTsNCgkJYi5vcGFjaXR5UGFyYW0gPSBvcDsNCgkJdGhpcy5s
YXN0T3BhY2l0eSA9IG9wOw0KCQl0aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQl0aGlz
Lmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnNldFRl
eHR1cmUgPSBmdW5jdGlvbiAodGV4KQ0KCXsNCgkJaWYgKHRleCA9PT0gdGhpcy5sYXN0VGV4dHVy
ZTApDQoJCQlyZXR1cm47DQo7DQoJCXZhciBiID0gdGhpcy5wdXNoQmF0Y2goKTsNCgkJYi50eXBl
ID0gQkFUQ0hfU0VUVEVYVFVSRTsNCgkJYi50ZXhQYXJhbSA9IHRleDsNCgkJdGhpcy5sYXN0VGV4
dHVyZTAgPSB0ZXg7DQoJCXRoaXMuaGFzUXVhZEJhdGNoVG9wID0gZmFsc2U7DQoJCXRoaXMuaGFz
UG9pbnRCYXRjaFRvcCA9IGZhbHNlOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUuc2V0QmxlbmQg
PSBmdW5jdGlvbiAocywgZCkNCgl7DQoJCWlmIChzID09PSB0aGlzLmxhc3RTcmNCbGVuZCAmJiBk
ID09PSB0aGlzLmxhc3REZXN0QmxlbmQpDQoJCQlyZXR1cm47DQoJCWlmICh0aGlzLmlzRWFybHla
UGFzcykNCgkJCXJldHVybjsJCS8vIGlnbm9yZQ0KCQl2YXIgYiA9IHRoaXMucHVzaEJhdGNoKCk7
DQoJCWIudHlwZSA9IEJBVENIX1NFVEJMRU5EOw0KCQliLnN0YXJ0SW5kZXggPSBzOwkJLy8gcmVj
eWNsZSBwYXJhbXMgdG8gc2F2ZSBtZW1vcnkNCgkJYi5pbmRleENvdW50ID0gZDsNCgkJdGhpcy5s
YXN0U3JjQmxlbmQgPSBzOw0KCQl0aGlzLmxhc3REZXN0QmxlbmQgPSBkOw0KCQl0aGlzLmhhc1F1
YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgl9
Ow0KCUdMV3JhcF8ucHJvdG90eXBlLmlzUHJlbXVsdGlwbGllZEFscGhhQmxlbmQgPSBmdW5jdGlv
biAoKQ0KCXsNCgkJcmV0dXJuICh0aGlzLmxhc3RTcmNCbGVuZCA9PT0gdGhpcy5nbC5PTkUgJiYg
dGhpcy5sYXN0RGVzdEJsZW5kID09PSB0aGlzLmdsLk9ORV9NSU5VU19TUkNfQUxQSEEpOw0KCX07
DQoJR0xXcmFwXy5wcm90b3R5cGUuc2V0QWxwaGFCbGVuZCA9IGZ1bmN0aW9uICgpDQoJew0KCQl0
aGlzLnNldEJsZW5kKHRoaXMuZ2wuT05FLCB0aGlzLmdsLk9ORV9NSU5VU19TUkNfQUxQSEEpOw0K
CX07DQoJR0xXcmFwXy5wcm90b3R5cGUuc2V0Tm9QcmVtdWx0aXBseUFscGhhQmxlbmQgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJdGhpcy5zZXRCbGVuZCh0aGlzLmdsLlNSQ19BTFBIQSwgdGhpcy5nbC5P
TkVfTUlOVVNfU1JDX0FMUEhBKTsNCgl9Ow0KCXZhciBMQVNUX1ZFUlRFWCA9IE1BWF9WRVJUSUNF
UyAqIDIgLSA4Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnF1YWQgPSBmdW5jdGlvbih0bHgsIHRseSwg
dHJ4LCB0cnlfLCBicngsIGJyeSwgYmx4LCBibHkpDQoJew0KCQlpZiAodGhpcy52ZXJ0ZXhQdHIg
Pj0gTEFTVF9WRVJURVgpDQoJCQl0aGlzLmVuZEJhdGNoKCk7DQoJCXZhciB2ID0gdGhpcy52ZXJ0
ZXhQdHI7CQkJLy8gdmVydGV4IGN1cnNvcg0KCQl2YXIgdCA9IHRoaXMudGV4UHRyOw0KCQl2YXIg
dmQgPSB0aGlzLnZlcnRleERhdGE7CQkvLyB2ZXJ0ZXggZGF0YSBhcnJheQ0KCQl2YXIgdGQgPSB0
aGlzLnRleGNvb3JkRGF0YTsJCS8vIHRleHR1cmUgY29vcmQgZGF0YSBhcnJheQ0KCQl2YXIgY3Vy
cmVudFogPSB0aGlzLmN1cnJlbnRaOw0KCQlpZiAodGhpcy5oYXNRdWFkQmF0Y2hUb3ApDQoJCXsN
CgkJCXRoaXMuYmF0Y2hbdGhpcy5iYXRjaFB0ciAtIDFdLmluZGV4Q291bnQgKz0gNjsNCgkJfQ0K
CQllbHNlDQoJCXsNCgkJCXZhciBiID0gdGhpcy5wdXNoQmF0Y2goKTsNCgkJCWIudHlwZSA9IEJB
VENIX1FVQUQ7DQoJCQliLnN0YXJ0SW5kZXggPSB0aGlzLmVuYWJsZUZyb250VG9CYWNrID8gdiA6
ICh2IC8gMikgKiAzOw0KCQkJYi5pbmRleENvdW50ID0gNjsNCgkJCXRoaXMuaGFzUXVhZEJhdGNo
VG9wID0gdHJ1ZTsNCgkJCXRoaXMuaGFzUG9pbnRCYXRjaFRvcCA9IGZhbHNlOw0KCQl9DQoJCWlm
ICh0aGlzLmVuYWJsZUZyb250VG9CYWNrKQ0KCQl7DQoJCQl2ZFt2KytdID0gdGx4Ow0KCQkJdmRb
disrXSA9IHRseTsNCgkJCXZkW3YrK10gPSBjdXJyZW50WjsNCgkJCXZkW3YrK10gPSB0cng7DQoJ
CQl2ZFt2KytdID0gdHJ5XzsNCgkJCXZkW3YrK10gPSBjdXJyZW50WjsNCgkJCXZkW3YrK10gPSBi
cng7DQoJCQl2ZFt2KytdID0gYnJ5Ow0KCQkJdmRbdisrXSA9IGN1cnJlbnRaOw0KCQkJdmRbdisr
XSA9IGJseDsNCgkJCXZkW3YrK10gPSBibHk7DQoJCQl2ZFt2KytdID0gY3VycmVudFo7DQoJCX0N
CgkJZWxzZQ0KCQl7DQoJCQl2ZFt2KytdID0gdGx4Ow0KCQkJdmRbdisrXSA9IHRseTsNCgkJCXZk
W3YrK10gPSB0cng7DQoJCQl2ZFt2KytdID0gdHJ5XzsNCgkJCXZkW3YrK10gPSBicng7DQoJCQl2
ZFt2KytdID0gYnJ5Ow0KCQkJdmRbdisrXSA9IGJseDsNCgkJCXZkW3YrK10gPSBibHk7DQoJCX0N
CgkJdGRbdCsrXSA9IDA7DQoJCXRkW3QrK10gPSAwOw0KCQl0ZFt0KytdID0gMTsNCgkJdGRbdCsr
XSA9IDA7DQoJCXRkW3QrK10gPSAxOw0KCQl0ZFt0KytdID0gMTsNCgkJdGRbdCsrXSA9IDA7DQoJ
CXRkW3QrK10gPSAxOw0KCQl0aGlzLnZlcnRleFB0ciA9IHY7DQoJCXRoaXMudGV4UHRyID0gdDsN
Cgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnF1YWRUZXggPSBmdW5jdGlvbih0bHgsIHRseSwgdHJ4
LCB0cnlfLCBicngsIGJyeSwgYmx4LCBibHksIHJjVGV4KQ0KCXsNCgkJaWYgKHRoaXMudmVydGV4
UHRyID49IExBU1RfVkVSVEVYKQ0KCQkJdGhpcy5lbmRCYXRjaCgpOw0KCQl2YXIgdiA9IHRoaXMu
dmVydGV4UHRyOwkJCS8vIHZlcnRleCBjdXJzb3INCgkJdmFyIHQgPSB0aGlzLnRleFB0cjsNCgkJ
dmFyIHZkID0gdGhpcy52ZXJ0ZXhEYXRhOwkJLy8gdmVydGV4IGRhdGEgYXJyYXkNCgkJdmFyIHRk
ID0gdGhpcy50ZXhjb29yZERhdGE7CQkvLyB0ZXh0dXJlIGNvb3JkIGRhdGEgYXJyYXkNCgkJdmFy
IGN1cnJlbnRaID0gdGhpcy5jdXJyZW50WjsNCgkJaWYgKHRoaXMuaGFzUXVhZEJhdGNoVG9wKQ0K
CQl7DQoJCQl0aGlzLmJhdGNoW3RoaXMuYmF0Y2hQdHIgLSAxXS5pbmRleENvdW50ICs9IDY7DQoJ
CX0NCgkJZWxzZQ0KCQl7DQoJCQl2YXIgYiA9IHRoaXMucHVzaEJhdGNoKCk7DQoJCQliLnR5cGUg
PSBCQVRDSF9RVUFEOw0KCQkJYi5zdGFydEluZGV4ID0gdGhpcy5lbmFibGVGcm9udFRvQmFjayA/
IHYgOiAodiAvIDIpICogMzsNCgkJCWIuaW5kZXhDb3VudCA9IDY7DQoJCQl0aGlzLmhhc1F1YWRC
YXRjaFRvcCA9IHRydWU7DQoJCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgkJfQ0K
CQl2YXIgcmNfbGVmdCA9IHJjVGV4LmxlZnQ7DQoJCXZhciByY190b3AgPSByY1RleC50b3A7DQoJ
CXZhciByY19yaWdodCA9IHJjVGV4LnJpZ2h0Ow0KCQl2YXIgcmNfYm90dG9tID0gcmNUZXguYm90
dG9tOw0KCQlpZiAodGhpcy5lbmFibGVGcm9udFRvQmFjaykNCgkJew0KCQkJdmRbdisrXSA9IHRs
eDsNCgkJCXZkW3YrK10gPSB0bHk7DQoJCQl2ZFt2KytdID0gY3VycmVudFo7DQoJCQl2ZFt2Kytd
ID0gdHJ4Ow0KCQkJdmRbdisrXSA9IHRyeV87DQoJCQl2ZFt2KytdID0gY3VycmVudFo7DQoJCQl2
ZFt2KytdID0gYnJ4Ow0KCQkJdmRbdisrXSA9IGJyeTsNCgkJCXZkW3YrK10gPSBjdXJyZW50WjsN
CgkJCXZkW3YrK10gPSBibHg7DQoJCQl2ZFt2KytdID0gYmx5Ow0KCQkJdmRbdisrXSA9IGN1cnJl
bnRaOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJdmRbdisrXSA9IHRseDsNCgkJCXZkW3YrK10gPSB0
bHk7DQoJCQl2ZFt2KytdID0gdHJ4Ow0KCQkJdmRbdisrXSA9IHRyeV87DQoJCQl2ZFt2KytdID0g
YnJ4Ow0KCQkJdmRbdisrXSA9IGJyeTsNCgkJCXZkW3YrK10gPSBibHg7DQoJCQl2ZFt2KytdID0g
Ymx5Ow0KCQl9DQoJCXRkW3QrK10gPSByY19sZWZ0Ow0KCQl0ZFt0KytdID0gcmNfdG9wOw0KCQl0
ZFt0KytdID0gcmNfcmlnaHQ7DQoJCXRkW3QrK10gPSByY190b3A7DQoJCXRkW3QrK10gPSByY19y
aWdodDsNCgkJdGRbdCsrXSA9IHJjX2JvdHRvbTsNCgkJdGRbdCsrXSA9IHJjX2xlZnQ7DQoJCXRk
W3QrK10gPSByY19ib3R0b207DQoJCXRoaXMudmVydGV4UHRyID0gdjsNCgkJdGhpcy50ZXhQdHIg
PSB0Ow0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUucXVhZFRleFVWID0gZnVuY3Rpb24odGx4LCB0
bHksIHRyeCwgdHJ5XywgYnJ4LCBicnksIGJseCwgYmx5LCB0bHUsIHRsdiwgdHJ1LCB0cnYsIGJy
dSwgYnJ2LCBibHUsIGJsdikNCgl7DQoJCWlmICh0aGlzLnZlcnRleFB0ciA+PSBMQVNUX1ZFUlRF
WCkNCgkJCXRoaXMuZW5kQmF0Y2goKTsNCgkJdmFyIHYgPSB0aGlzLnZlcnRleFB0cjsJCQkvLyB2
ZXJ0ZXggY3Vyc29yDQoJCXZhciB0ID0gdGhpcy50ZXhQdHI7DQoJCXZhciB2ZCA9IHRoaXMudmVy
dGV4RGF0YTsJCS8vIHZlcnRleCBkYXRhIGFycmF5DQoJCXZhciB0ZCA9IHRoaXMudGV4Y29vcmRE
YXRhOwkJLy8gdGV4dHVyZSBjb29yZCBkYXRhIGFycmF5DQoJCXZhciBjdXJyZW50WiA9IHRoaXMu
Y3VycmVudFo7DQoJCWlmICh0aGlzLmhhc1F1YWRCYXRjaFRvcCkNCgkJew0KCQkJdGhpcy5iYXRj
aFt0aGlzLmJhdGNoUHRyIC0gMV0uaW5kZXhDb3VudCArPSA2Ow0KCQl9DQoJCWVsc2UNCgkJew0K
CQkJdmFyIGIgPSB0aGlzLnB1c2hCYXRjaCgpOw0KCQkJYi50eXBlID0gQkFUQ0hfUVVBRDsNCgkJ
CWIuc3RhcnRJbmRleCA9IHRoaXMuZW5hYmxlRnJvbnRUb0JhY2sgPyB2IDogKHYgLyAyKSAqIDM7
DQoJCQliLmluZGV4Q291bnQgPSA2Ow0KCQkJdGhpcy5oYXNRdWFkQmF0Y2hUb3AgPSB0cnVlOw0K
CQkJdGhpcy5oYXNQb2ludEJhdGNoVG9wID0gZmFsc2U7DQoJCX0NCgkJaWYgKHRoaXMuZW5hYmxl
RnJvbnRUb0JhY2spDQoJCXsNCgkJCXZkW3YrK10gPSB0bHg7DQoJCQl2ZFt2KytdID0gdGx5Ow0K
CQkJdmRbdisrXSA9IGN1cnJlbnRaOw0KCQkJdmRbdisrXSA9IHRyeDsNCgkJCXZkW3YrK10gPSB0
cnlfOw0KCQkJdmRbdisrXSA9IGN1cnJlbnRaOw0KCQkJdmRbdisrXSA9IGJyeDsNCgkJCXZkW3Yr
K10gPSBicnk7DQoJCQl2ZFt2KytdID0gY3VycmVudFo7DQoJCQl2ZFt2KytdID0gYmx4Ow0KCQkJ
dmRbdisrXSA9IGJseTsNCgkJCXZkW3YrK10gPSBjdXJyZW50WjsNCgkJfQ0KCQllbHNlDQoJCXsN
CgkJCXZkW3YrK10gPSB0bHg7DQoJCQl2ZFt2KytdID0gdGx5Ow0KCQkJdmRbdisrXSA9IHRyeDsN
CgkJCXZkW3YrK10gPSB0cnlfOw0KCQkJdmRbdisrXSA9IGJyeDsNCgkJCXZkW3YrK10gPSBicnk7
DQoJCQl2ZFt2KytdID0gYmx4Ow0KCQkJdmRbdisrXSA9IGJseTsNCgkJfQ0KCQl0ZFt0KytdID0g
dGx1Ow0KCQl0ZFt0KytdID0gdGx2Ow0KCQl0ZFt0KytdID0gdHJ1Ow0KCQl0ZFt0KytdID0gdHJ2
Ow0KCQl0ZFt0KytdID0gYnJ1Ow0KCQl0ZFt0KytdID0gYnJ2Ow0KCQl0ZFt0KytdID0gYmx1Ow0K
CQl0ZFt0KytdID0gYmx2Ow0KCQl0aGlzLnZlcnRleFB0ciA9IHY7DQoJCXRoaXMudGV4UHRyID0g
dDsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLmNvbnZleFBvbHkgPSBmdW5jdGlvbihwdHMpDQoJ
ew0KCQl2YXIgcHRzX2NvdW50ID0gcHRzLmxlbmd0aCAvIDI7DQo7DQoJCXZhciB0cmlzID0gcHRz
X2NvdW50IC0gMjsJLy8gMyBwb2ludHMgPSAxIHRyaSwgNCBwb2ludHMgPSAyIHRyaXMsIDUgcG9p
bnRzID0gMyB0cmlzIGV0Yy4NCgkJdmFyIGxhc3RfdHJpID0gdHJpcyAtIDE7DQoJCXZhciBwMHgg
PSBwdHNbMF07DQoJCXZhciBwMHkgPSBwdHNbMV07DQoJCXZhciBpLCBpMiwgcDF4LCBwMXksIHAy
eCwgcDJ5LCBwM3gsIHAzeTsNCgkJZm9yIChpID0gMDsgaSA8IHRyaXM7IGkgKz0gMikJCS8vIGRy
YXcgMiB0cmlhbmdsZXMgYXQgYSB0aW1lDQoJCXsNCgkJCWkyID0gaSAqIDI7DQoJCQlwMXggPSBw
dHNbaTIgKyAyXTsNCgkJCXAxeSA9IHB0c1tpMiArIDNdOw0KCQkJcDJ4ID0gcHRzW2kyICsgNF07
DQoJCQlwMnkgPSBwdHNbaTIgKyA1XTsNCgkJCWlmIChpID09PSBsYXN0X3RyaSkNCgkJCXsNCgkJ
CQl0aGlzLnF1YWQocDB4LCBwMHksIHAxeCwgcDF5LCBwMngsIHAyeSwgcDJ4LCBwMnkpOw0KCQkJ
fQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXAzeCA9IHB0c1tpMiArIDZdOw0KCQkJCXAzeSA9IHB0c1tp
MiArIDddOw0KCQkJCXRoaXMucXVhZChwMHgsIHAweSwgcDF4LCBwMXksIHAyeCwgcDJ5LCBwM3gs
IHAzeSk7DQoJCQl9DQoJCX0NCgl9Ow0KCXZhciBMQVNUX1BPSU5UID0gTUFYX1BPSU5UUyAtIDQ7
DQoJR0xXcmFwXy5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbih4XywgeV8sIHNpemVfLCBvcGFj
aXR5XykNCgl7DQoJCWlmICh0aGlzLnBvaW50UHRyID49IExBU1RfUE9JTlQpDQoJCQl0aGlzLmVu
ZEJhdGNoKCk7DQoJCXZhciBwID0gdGhpcy5wb2ludFB0cjsJCQkvLyBwb2ludCBjdXJzb3INCgkJ
dmFyIHBkID0gdGhpcy5wb2ludERhdGE7CQkvLyBwb2ludCBkYXRhIGFycmF5DQoJCWlmICh0aGlz
Lmhhc1BvaW50QmF0Y2hUb3ApDQoJCXsNCgkJCXRoaXMuYmF0Y2hbdGhpcy5iYXRjaFB0ciAtIDFd
LmluZGV4Q291bnQrKzsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXZhciBiID0gdGhpcy5wdXNoQmF0
Y2goKTsNCgkJCWIudHlwZSA9IEJBVENIX1BPSU5UUzsNCgkJCWIuc3RhcnRJbmRleCA9IHA7DQoJ
CQliLmluZGV4Q291bnQgPSAxOw0KCQkJdGhpcy5oYXNQb2ludEJhdGNoVG9wID0gdHJ1ZTsNCgkJ
CXRoaXMuaGFzUXVhZEJhdGNoVG9wID0gZmFsc2U7DQoJCX0NCgkJcGRbcCsrXSA9IHhfOw0KCQlw
ZFtwKytdID0geV87DQoJCXBkW3ArK10gPSBzaXplXzsNCgkJcGRbcCsrXSA9IG9wYWNpdHlfOw0K
CQl0aGlzLnBvaW50UHRyID0gcDsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnN3aXRjaFByb2dy
YW0gPSBmdW5jdGlvbiAocHJvZ0luZGV4KQ0KCXsNCgkJaWYgKHRoaXMubGFzdFByb2dyYW0gPT09
IHByb2dJbmRleCkNCgkJCXJldHVybjsJCQkvLyBubyBjaGFuZ2UNCgkJdmFyIHNoYWRlclByb2cg
PSB0aGlzLnNoYWRlclByb2dyYW1zW3Byb2dJbmRleF07DQoJCWlmICghc2hhZGVyUHJvZykNCgkJ
ew0KCQkJaWYgKHRoaXMubGFzdFByb2dyYW0gPT09IDApDQoJCQkJcmV0dXJuOwkJCQkJCQkJLy8g
YWxyZWFkeSBvbiBkZWZhdWx0IHNoYWRlcg0KCQkJcHJvZ0luZGV4ID0gMDsNCgkJCXNoYWRlclBy
b2cgPSB0aGlzLnNoYWRlclByb2dyYW1zWzBdOw0KCQl9DQoJCXZhciBiID0gdGhpcy5wdXNoQmF0
Y2goKTsNCgkJYi50eXBlID0gQkFUQ0hfU0VUUFJPR1JBTTsNCgkJYi5zdGFydEluZGV4ID0gcHJv
Z0luZGV4Ow0KCQl0aGlzLmxhc3RQcm9ncmFtID0gcHJvZ0luZGV4Ow0KCQl0aGlzLmhhc1F1YWRC
YXRjaFRvcCA9IGZhbHNlOw0KCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgl9Ow0K
CUdMV3JhcF8ucHJvdG90eXBlLnByb2dyYW1Vc2VzRGVzdCA9IGZ1bmN0aW9uIChwcm9nSW5kZXgp
DQoJew0KCQl2YXIgcyA9IHRoaXMuc2hhZGVyUHJvZ3JhbXNbcHJvZ0luZGV4XTsNCgkJcmV0dXJu
ICEhKHMubG9jRGVzdFN0YXJ0IHx8IHMubG9jRGVzdEVuZCk7DQoJfTsNCglHTFdyYXBfLnByb3Rv
dHlwZS5wcm9ncmFtVXNlc0Nyb3NzU2FtcGxpbmcgPSBmdW5jdGlvbiAocHJvZ0luZGV4KQ0KCXsN
CgkJdmFyIHMgPSB0aGlzLnNoYWRlclByb2dyYW1zW3Byb2dJbmRleF07DQoJCXJldHVybiAhIShz
LmxvY0Rlc3RTdGFydCB8fCBzLmxvY0Rlc3RFbmQgfHwgcy5jcm9zc1NhbXBsaW5nKTsNCgl9Ow0K
CUdMV3JhcF8ucHJvdG90eXBlLnByb2dyYW1QcmVzZXJ2ZXNPcGFxdWVuZXNzID0gZnVuY3Rpb24g
KHByb2dJbmRleCkNCgl7DQoJCXJldHVybiB0aGlzLnNoYWRlclByb2dyYW1zW3Byb2dJbmRleF0u
cHJlc2VydmVzT3BhcXVlbmVzczsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnByb2dyYW1FeHRl
bmRzQm94ID0gZnVuY3Rpb24gKHByb2dJbmRleCkNCgl7DQoJCXZhciBzID0gdGhpcy5zaGFkZXJQ
cm9ncmFtc1twcm9nSW5kZXhdOw0KCQlyZXR1cm4gcy5leHRlbmRCb3hIb3Jpem9udGFsICE9PSAw
IHx8IHMuZXh0ZW5kQm94VmVydGljYWwgIT09IDA7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5n
ZXRQcm9ncmFtQm94RXh0ZW5kSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChwcm9nSW5kZXgpDQoJew0K
CQlyZXR1cm4gdGhpcy5zaGFkZXJQcm9ncmFtc1twcm9nSW5kZXhdLmV4dGVuZEJveEhvcml6b250
YWw7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5nZXRQcm9ncmFtQm94RXh0ZW5kVmVydGljYWwg
PSBmdW5jdGlvbiAocHJvZ0luZGV4KQ0KCXsNCgkJcmV0dXJuIHRoaXMuc2hhZGVyUHJvZ3JhbXNb
cHJvZ0luZGV4XS5leHRlbmRCb3hWZXJ0aWNhbDsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLmdl
dFByb2dyYW1QYXJhbWV0ZXJUeXBlID0gZnVuY3Rpb24gKHByb2dJbmRleCwgcGFyYW1JbmRleCkN
Cgl7DQoJCXJldHVybiB0aGlzLnNoYWRlclByb2dyYW1zW3Byb2dJbmRleF0ucGFyYW1ldGVyc1tw
YXJhbUluZGV4XVsyXTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnByb2dyYW1Jc0FuaW1hdGVk
ID0gZnVuY3Rpb24gKHByb2dJbmRleCkNCgl7DQoJCXJldHVybiB0aGlzLnNoYWRlclByb2dyYW1z
W3Byb2dJbmRleF0uYW5pbWF0ZWQ7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5zZXRQcm9ncmFt
UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChiYWNrVGV4LCBwaXhlbFdpZHRoLCBwaXhlbEhlaWdodCwg
ZGVzdFN0YXJ0WCwgZGVzdFN0YXJ0WSwgZGVzdEVuZFgsIGRlc3RFbmRZLCBsYXllclNjYWxlLCBs
YXllckFuZ2xlLCB2aWV3T3JpZ2luTGVmdCwgdmlld09yaWdpblRvcCwgc2Nyb2xsUG9zWCwgc2Ny
b2xsUG9zWSwgc2Vjb25kcywgcGFyYW1zKQ0KCXsNCgkJdmFyIGksIGxlbjsNCgkJdmFyIHMgPSB0
aGlzLnNoYWRlclByb2dyYW1zW3RoaXMubGFzdFByb2dyYW1dOw0KCQl2YXIgYiwgbWF0NHBhcmFt
LCBzaGFkZXJQYXJhbXM7DQoJCWlmIChzLmhhc0FueU9wdGlvbmFsVW5pZm9ybXMgfHwgcGFyYW1z
Lmxlbmd0aCkNCgkJew0KCQkJYiA9IHRoaXMucHVzaEJhdGNoKCk7DQoJCQliLnR5cGUgPSBCQVRD
SF9TRVRQUk9HUkFNUEFSQU1FVEVSUzsNCgkJCWlmIChiLm1hdDRwYXJhbSkNCgkJCQltYXQ0LnNl
dCh0aGlzLm1hdE1WLCBiLm1hdDRwYXJhbSk7DQoJCQllbHNlDQoJCQkJYi5tYXQ0cGFyYW0gPSBt
YXQ0LmNyZWF0ZSgpOw0KCQkJbWF0NHBhcmFtID0gYi5tYXQ0cGFyYW07DQoJCQltYXQ0cGFyYW1b
MF0gPSBwaXhlbFdpZHRoOw0KCQkJbWF0NHBhcmFtWzFdID0gcGl4ZWxIZWlnaHQ7DQoJCQltYXQ0
cGFyYW1bMl0gPSBkZXN0U3RhcnRYOw0KCQkJbWF0NHBhcmFtWzNdID0gZGVzdFN0YXJ0WTsNCgkJ
CW1hdDRwYXJhbVs0XSA9IGRlc3RFbmRYOw0KCQkJbWF0NHBhcmFtWzVdID0gZGVzdEVuZFk7DQoJ
CQltYXQ0cGFyYW1bNl0gPSBsYXllclNjYWxlOw0KCQkJbWF0NHBhcmFtWzddID0gbGF5ZXJBbmds
ZTsNCgkJCW1hdDRwYXJhbVs4XSA9IHZpZXdPcmlnaW5MZWZ0Ow0KCQkJbWF0NHBhcmFtWzldID0g
dmlld09yaWdpblRvcDsNCgkJCW1hdDRwYXJhbVsxMF0gPSBzY3JvbGxQb3NYOw0KCQkJbWF0NHBh
cmFtWzExXSA9IHNjcm9sbFBvc1k7DQoJCQltYXQ0cGFyYW1bMTJdID0gc2Vjb25kczsNCgkJCWlm
IChzLmxvY1NhbXBsZXJCYWNrKQ0KCQkJew0KOw0KCQkJCWIudGV4UGFyYW0gPSBiYWNrVGV4Ow0K
CQkJfQ0KCQkJZWxzZQ0KCQkJCWIudGV4UGFyYW0gPSBudWxsOw0KCQkJaWYgKHBhcmFtcy5sZW5n
dGgpDQoJCQl7DQoJCQkJc2hhZGVyUGFyYW1zID0gYi5zaGFkZXJQYXJhbXM7DQoJCQkJc2hhZGVy
UGFyYW1zLmxlbmd0aCA9IHBhcmFtcy5sZW5ndGg7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gcGFy
YW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCQlzaGFkZXJQYXJhbXNbaV0gPSBwYXJhbXNb
aV07DQoJCQl9DQoJCQl0aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQkJdGhpcy5oYXNQ
b2ludEJhdGNoVG9wID0gZmFsc2U7DQoJCX0NCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLmNsZWFy
ID0gZnVuY3Rpb24gKHIsIGcsIGJfLCBhKQ0KCXsNCgkJdmFyIGIgPSB0aGlzLnB1c2hCYXRjaCgp
Ow0KCQliLnR5cGUgPSBCQVRDSF9DTEVBUjsNCgkJYi5zdGFydEluZGV4ID0gMDsJCQkJCS8vIGNs
ZWFyIGFsbCBtb2RlDQoJCWlmICghYi5tYXQ0cGFyYW0pDQoJCQliLm1hdDRwYXJhbSA9IG1hdDQu
Y3JlYXRlKCk7DQoJCWIubWF0NHBhcmFtWzBdID0gcjsNCgkJYi5tYXQ0cGFyYW1bMV0gPSBnOw0K
CQliLm1hdDRwYXJhbVsyXSA9IGJfOw0KCQliLm1hdDRwYXJhbVszXSA9IGE7DQoJCXRoaXMuaGFz
UXVhZEJhdGNoVG9wID0gZmFsc2U7DQoJCXRoaXMuaGFzUG9pbnRCYXRjaFRvcCA9IGZhbHNlOw0K
CX07DQoJR0xXcmFwXy5wcm90b3R5cGUuY2xlYXJSZWN0ID0gZnVuY3Rpb24gKHgsIHksIHcsIGgp
DQoJew0KCQlpZiAodyA8IDAgfHwgaCA8IDApDQoJCQlyZXR1cm47CQkJCQkJCS8vIGludmFsaWQg
Y2xlYXIgYXJlYQ0KCQl2YXIgYiA9IHRoaXMucHVzaEJhdGNoKCk7DQoJCWIudHlwZSA9IEJBVENI
X0NMRUFSOw0KCQliLnN0YXJ0SW5kZXggPSAxOwkJCQkJLy8gY2xlYXIgcmVjdCBtb2RlDQoJCWlm
ICghYi5tYXQ0cGFyYW0pDQoJCQliLm1hdDRwYXJhbSA9IG1hdDQuY3JlYXRlKCk7DQoJCWIubWF0
NHBhcmFtWzBdID0geDsNCgkJYi5tYXQ0cGFyYW1bMV0gPSB5Ow0KCQliLm1hdDRwYXJhbVsyXSA9
IHc7DQoJCWIubWF0NHBhcmFtWzNdID0gaDsNCgkJdGhpcy5oYXNRdWFkQmF0Y2hUb3AgPSBmYWxz
ZTsNCgkJdGhpcy5oYXNQb2ludEJhdGNoVG9wID0gZmFsc2U7DQoJfTsNCglHTFdyYXBfLnByb3Rv
dHlwZS5jbGVhckRlcHRoID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBiID0gdGhpcy5wdXNoQmF0
Y2goKTsNCgkJYi50eXBlID0gQkFUQ0hfQ0xFQVI7DQoJCWIuc3RhcnRJbmRleCA9IDI7CQkJCQkv
LyBjbGVhciBkZXB0aCBtb2RlDQoJCXRoaXMuaGFzUXVhZEJhdGNoVG9wID0gZmFsc2U7DQoJCXRo
aXMuaGFzUG9pbnRCYXRjaFRvcCA9IGZhbHNlOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUuc2V0
RWFybHlaUGFzcyA9IGZ1bmN0aW9uIChlKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZUZyb250VG9C
YWNrKQ0KCQkJcmV0dXJuOwkJLy8gbm8gZGVwdGggYnVmZmVyIGluIHVzZQ0KCQllID0gISFlOw0K
CQlpZiAodGhpcy5pc0Vhcmx5WlBhc3MgPT09IGUpDQoJCQlyZXR1cm47CQkvLyBubyBjaGFuZ2UN
CgkJdmFyIGIgPSB0aGlzLnB1c2hCYXRjaCgpOw0KCQliLnR5cGUgPSBCQVRDSF9TRVRFQVJMWVpN
T0RFOw0KCQliLnN0YXJ0SW5kZXggPSAoZSA/IDEgOiAwKTsNCgkJdGhpcy5oYXNRdWFkQmF0Y2hU
b3AgPSBmYWxzZTsNCgkJdGhpcy5oYXNQb2ludEJhdGNoVG9wID0gZmFsc2U7DQoJCXRoaXMuaXNF
YXJseVpQYXNzID0gZTsNCgkJdGhpcy5yZW5kZXJUb1RleCA9IG51bGw7DQoJCWlmICh0aGlzLmlz
RWFybHlaUGFzcykNCgkJew0KCQkJdGhpcy5zd2l0Y2hQcm9ncmFtKDIpOwkJLy8gZWFybHkgWiBw
cm9ncmFtDQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGlzLnN3aXRjaFByb2dyYW0oMCk7CQkvLyBu
b3JtYWwgcmVuZGVyaW5nDQoJCX0NCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnNldERlcHRoVGVz
dEVuYWJsZWQgPSBmdW5jdGlvbiAoZSkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVGcm9udFRvQmFj
aykNCgkJCXJldHVybjsJCS8vIG5vIGRlcHRoIGJ1ZmZlciBpbiB1c2UNCgkJdmFyIGIgPSB0aGlz
LnB1c2hCYXRjaCgpOw0KCQliLnR5cGUgPSBCQVRDSF9TRVRERVBUSFRFU1Q7DQoJCWIuc3RhcnRJ
bmRleCA9IChlID8gMSA6IDApOw0KCQl0aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQl0
aGlzLmhhc1BvaW50QmF0Y2hUb3AgPSBmYWxzZTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLmZ1
bGxzY3JlZW5RdWFkID0gZnVuY3Rpb24gKCkNCgl7DQoJCW1hdDQuc2V0KHRoaXMubGFzdE1WLCB0
ZW1wTWF0NCk7DQoJCXRoaXMucmVzZXRNb2RlbFZpZXcoKTsNCgkJdGhpcy51cGRhdGVNb2RlbFZp
ZXcoKTsNCgkJdmFyIGhhbGZ3ID0gdGhpcy53aWR0aCAvIDI7DQoJCXZhciBoYWxmaCA9IHRoaXMu
aGVpZ2h0IC8gMjsNCgkJdGhpcy5xdWFkKC1oYWxmdywgaGFsZmgsIGhhbGZ3LCBoYWxmaCwgaGFs
ZncsIC1oYWxmaCwgLWhhbGZ3LCAtaGFsZmgpOw0KCQltYXQ0LnNldCh0ZW1wTWF0NCwgdGhpcy5t
YXRNVik7DQoJCXRoaXMudXBkYXRlTW9kZWxWaWV3KCk7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlw
ZS5zZXRDb2xvckZpbGxNb2RlID0gZnVuY3Rpb24gKHJfLCBnXywgYl8sIGFfKQ0KCXsNCgkJdGhp
cy5zd2l0Y2hQcm9ncmFtKDMpOw0KCQl2YXIgYiA9IHRoaXMucHVzaEJhdGNoKCk7DQoJCWIudHlw
ZSA9IEJBVENIX1NFVENPTE9SOw0KCQlpZiAoIWIubWF0NHBhcmFtKQ0KCQkJYi5tYXQ0cGFyYW0g
PSBtYXQ0LmNyZWF0ZSgpOw0KCQliLm1hdDRwYXJhbVswXSA9IHJfOw0KCQliLm1hdDRwYXJhbVsx
XSA9IGdfOw0KCQliLm1hdDRwYXJhbVsyXSA9IGJfOw0KCQliLm1hdDRwYXJhbVszXSA9IGFfOw0K
CQl0aGlzLmhhc1F1YWRCYXRjaFRvcCA9IGZhbHNlOw0KCQl0aGlzLmhhc1BvaW50QmF0Y2hUb3Ag
PSBmYWxzZTsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnNldFRleHR1cmVGaWxsTW9kZSA9IGZ1
bmN0aW9uICgpDQoJew0KOw0KCQl0aGlzLnN3aXRjaFByb2dyYW0oMCk7DQoJfTsNCglHTFdyYXBf
LnByb3RvdHlwZS5yZXN0b3JlRWFybHlaTW9kZSA9IGZ1bmN0aW9uICgpDQoJew0KOw0KCQl0aGlz
LnN3aXRjaFByb2dyYW0oMik7DQoJfTsNCglHTFdyYXBfLnByb3RvdHlwZS5wcmVzZW50ID0gZnVu
Y3Rpb24gKCkNCgl7DQoJCXRoaXMuZW5kQmF0Y2goKTsNCgkJdGhpcy5nbC5mbHVzaCgpOw0KCQkv
Kg0KCQlpZiAoZGVidWdCYXRjaCkNCgkJew0KOw0KCQkJZGVidWdCYXRjaCA9IGZhbHNlOw0KCQl9
DQoJCSovDQoJfTsNCglmdW5jdGlvbiBuZXh0SGlnaGVzdFBvd2VyT2ZUd28oeCkgew0KCQktLXg7
DQoJCWZvciAodmFyIGkgPSAxOyBpIDwgMzI7IGkgPDw9IDEpIHsNCgkJCXggPSB4IHwgeCA+PiBp
Ow0KCQl9DQoJCXJldHVybiB4ICsgMTsNCgl9DQoJdmFyIGFsbF90ZXh0dXJlcyA9IFtdOw0KCXZh
ciB0ZXh0dXJlc19ieV9zcmMgPSB7fTsNCglHTFdyYXBfLnByb3RvdHlwZS5jb250ZXh0TG9zdCA9
IGZ1bmN0aW9uICgpDQoJew0KCQljci5jbGVhckFycmF5KGFsbF90ZXh0dXJlcyk7DQoJCXRleHR1
cmVzX2J5X3NyYyA9IHt9Ow0KCX07DQoJdmFyIEJGX1JHQkE4ID0gMDsNCgl2YXIgQkZfUkdCOCA9
IDE7DQoJdmFyIEJGX1JHQkE0ID0gMjsNCgl2YXIgQkZfUkdCNV9BMSA9IDM7DQoJdmFyIEJGX1JH
QjU2NSA9IDQ7DQoJR0xXcmFwXy5wcm90b3R5cGUubG9hZFRleHR1cmUgPSBmdW5jdGlvbiAoaW1n
LCB0aWxpbmcsIGxpbmVhcnNhbXBsaW5nLCBwaXhlbGZvcm1hdCwgdGlsZXR5cGUsIG5vbWlwKQ0K
CXsNCgkJdGlsaW5nID0gISF0aWxpbmc7DQoJCWxpbmVhcnNhbXBsaW5nID0gISFsaW5lYXJzYW1w
bGluZzsNCgkJdmFyIHRleF9rZXkgPSBpbWcuc3JjICsgIiwiICsgdGlsaW5nICsgIiwiICsgbGlu
ZWFyc2FtcGxpbmcgKyAodGlsaW5nID8gKCIsIiArIHRpbGV0eXBlKSA6ICIiKTsNCgkJdmFyIHdl
YkdMX3RleHR1cmUgPSBudWxsOw0KCQlpZiAodHlwZW9mIGltZy5zcmMgIT09ICJ1bmRlZmluZWQi
ICYmIHRleHR1cmVzX2J5X3NyYy5oYXNPd25Qcm9wZXJ0eSh0ZXhfa2V5KSkNCgkJew0KCQkJd2Vi
R0xfdGV4dHVyZSA9IHRleHR1cmVzX2J5X3NyY1t0ZXhfa2V5XTsNCgkJCXdlYkdMX3RleHR1cmUu
YzJyZWZjb3VudCsrOw0KCQkJcmV0dXJuIHdlYkdMX3RleHR1cmU7DQoJCX0NCgkJdGhpcy5lbmRC
YXRjaCgpOw0KOw0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQl2YXIgaXNQT1QgPSAoY3IuaXNQT1Qo
aW1nLndpZHRoKSAmJiBjci5pc1BPVChpbWcuaGVpZ2h0KSk7DQoJCXdlYkdMX3RleHR1cmUgPSBn
bC5jcmVhdGVUZXh0dXJlKCk7DQoJCWdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHdlYkdM
X3RleHR1cmUpOw0KCQlnbC5waXhlbFN0b3JlaShnbFsiVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhB
X1dFQkdMIl0sIHRydWUpOw0KCQl2YXIgaW50ZXJuYWxmb3JtYXQgPSBnbC5SR0JBOw0KCQl2YXIg
Zm9ybWF0ID0gZ2wuUkdCQTsNCgkJdmFyIHR5cGUgPSBnbC5VTlNJR05FRF9CWVRFOw0KCQlpZiAo
cGl4ZWxmb3JtYXQgJiYgIXRoaXMuaXNJRSkNCgkJew0KCQkJc3dpdGNoIChwaXhlbGZvcm1hdCkg
ew0KCQkJY2FzZSBCRl9SR0I4Og0KCQkJCWludGVybmFsZm9ybWF0ID0gZ2wuUkdCOw0KCQkJCWZv
cm1hdCA9IGdsLlJHQjsNCgkJCQlicmVhazsNCgkJCWNhc2UgQkZfUkdCQTQ6DQoJCQkJdHlwZSA9
IGdsLlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7DQoJCQkJYnJlYWs7DQoJCQljYXNlIEJGX1JHQjVf
QTE6DQoJCQkJdHlwZSA9IGdsLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7DQoJCQkJYnJlYWs7DQoJ
CQljYXNlIEJGX1JHQjU2NToNCgkJCQlpbnRlcm5hbGZvcm1hdCA9IGdsLlJHQjsNCgkJCQlmb3Jt
YXQgPSBnbC5SR0I7DQoJCQkJdHlwZSA9IGdsLlVOU0lHTkVEX1NIT1JUXzVfNl81Ow0KCQkJCWJy
ZWFrOw0KCQkJfQ0KCQl9DQoJCWlmICh0aGlzLnZlcnNpb24gPT09IDEgJiYgIWlzUE9UICYmIHRp
bGluZykNCgkJew0KCQkJdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZh
cyIpOw0KCQkJY2FudmFzLndpZHRoID0gY3IubmV4dEhpZ2hlc3RQb3dlck9mVHdvKGltZy53aWR0
aCk7DQoJCQljYW52YXMuaGVpZ2h0ID0gY3IubmV4dEhpZ2hlc3RQb3dlck9mVHdvKGltZy5oZWln
aHQpOw0KCQkJdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOw0KCQkJaWYgKHR5cGVv
ZiBjdHhbImltYWdlU21vb3RoaW5nRW5hYmxlZCJdICE9PSAidW5kZWZpbmVkIikNCgkJCXsNCgkJ
CQljdHhbImltYWdlU21vb3RoaW5nRW5hYmxlZCJdID0gbGluZWFyc2FtcGxpbmc7DQoJCQl9DQoJ
CQllbHNlDQoJCQl7DQoJCQkJY3R4WyJ3ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQiXSA9IGxp
bmVhcnNhbXBsaW5nOw0KCQkJCWN0eFsibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIl0gPSBsaW5l
YXJzYW1wbGluZzsNCgkJCQljdHhbIm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkIl0gPSBsaW5lYXJz
YW1wbGluZzsNCgkJCX0NCgkJCWN0eC5kcmF3SW1hZ2UoaW1nLA0KCQkJCQkJICAwLCAwLCBpbWcu
d2lkdGgsIGltZy5oZWlnaHQsDQoJCQkJCQkgIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhl
aWdodCk7DQoJCQlnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGludGVybmFsZm9ybWF0
LCBmb3JtYXQsIHR5cGUsIGNhbnZhcyk7DQoJCX0NCgkJZWxzZQ0KCQkJZ2wudGV4SW1hZ2UyRChn
bC5URVhUVVJFXzJELCAwLCBpbnRlcm5hbGZvcm1hdCwgZm9ybWF0LCB0eXBlLCBpbWcpOw0KCQlp
ZiAodGlsaW5nKQ0KCQl7DQoJCQlpZiAodGlsZXR5cGUgPT09ICJyZXBlYXQteCIpDQoJCQl7DQoJ
CQkJZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wu
UkVQRUFUKTsNCgkJCQlnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVf
V1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTsNCgkJCX0NCgkJCWVsc2UgaWYgKHRpbGV0eXBlID09
PSAicmVwZWF0LXkiKQ0KCQkJew0KCQkJCWdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwg
Z2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpOw0KCQkJCWdsLnRleFBhcmFtZXRl
cmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVCk7DQoJCQl9DQoJ
CQllbHNlDQoJCQl7DQoJCQkJZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhU
VVJFX1dSQVBfUywgZ2wuUkVQRUFUKTsNCgkJCQlnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVf
MkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5SRVBFQVQpOw0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJ
ew0KCQkJZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywg
Z2wuQ0xBTVBfVE9fRURHRSk7DQoJCQlnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGds
LlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTsNCgkJfQ0KCQlpZiAobGluZWFyc2Ft
cGxpbmcpDQoJCXsNCgkJCWdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVS
RV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpOw0KCQkJaWYgKChpc1BPVCB8fCB0aGlzLnZlcnNpb24g
Pj0gMikgJiYgdGhpcy5lbmFibGVfbWlwbWFwcyAmJiAhbm9taXApDQoJCQl7DQoJCQkJZ2wudGV4
UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVB
Ul9NSVBNQVBfTElORUFSKTsNCgkJCQlnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKTsN
CgkJCX0NCgkJCWVsc2UNCgkJCQlnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRF
WFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWdsLnRl
eFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFS
RVNUKTsNCgkJCWdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5f
RklMVEVSLCBnbC5ORUFSRVNUKTsNCgkJfQ0KCQlnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJE
LCBudWxsKTsNCgkJdGhpcy5sYXN0VGV4dHVyZTAgPSBudWxsOw0KCQl3ZWJHTF90ZXh0dXJlLmMy
d2lkdGggPSBpbWcud2lkdGg7DQoJCXdlYkdMX3RleHR1cmUuYzJoZWlnaHQgPSBpbWcuaGVpZ2h0
Ow0KCQl3ZWJHTF90ZXh0dXJlLmMycmVmY291bnQgPSAxOw0KCQl3ZWJHTF90ZXh0dXJlLmMydGV4
a2V5ID0gdGV4X2tleTsNCgkJYWxsX3RleHR1cmVzLnB1c2god2ViR0xfdGV4dHVyZSk7DQoJCXRl
eHR1cmVzX2J5X3NyY1t0ZXhfa2V5XSA9IHdlYkdMX3RleHR1cmU7DQoJCXJldHVybiB3ZWJHTF90
ZXh0dXJlOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUuY3JlYXRlRW1wdHlUZXh0dXJlID0gZnVu
Y3Rpb24gKHcsIGgsIGxpbmVhcnNhbXBsaW5nLCBfMTZiaXQsIHRpbGluZykNCgl7DQoJCXRoaXMu
ZW5kQmF0Y2goKTsNCgkJdmFyIGdsID0gdGhpcy5nbDsNCgkJaWYgKHRoaXMuaXNJRSkNCgkJCV8x
NmJpdCA9IGZhbHNlOw0KCQl2YXIgd2ViR0xfdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTsN
CgkJZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgd2ViR0xfdGV4dHVyZSk7DQoJCWdsLnRl
eEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgdywgaCwgMCwgZ2wuUkdCQSwgXzE2
Yml0ID8gZ2wuVU5TSUdORURfU0hPUlRfNF80XzRfNCA6IGdsLlVOU0lHTkVEX0JZVEUsIG51bGwp
Ow0KCQlpZiAodGlsaW5nKQ0KCQl7DQoJCQlnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQs
IGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5SRVBFQVQpOw0KCQkJZ2wudGV4UGFyYW1ldGVyaShnbC5U
RVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTsNCgkJfQ0KCQllbHNlDQoJ
CXsNCgkJCWdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1Ms
IGdsLkNMQU1QX1RPX0VER0UpOw0KCQkJZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBn
bC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7DQoJCX0NCgkJZ2wudGV4UGFyYW1l
dGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGxpbmVhcnNhbXBsaW5n
ID8gZ2wuTElORUFSIDogZ2wuTkVBUkVTVCk7DQoJCWdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVS
RV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBsaW5lYXJzYW1wbGluZyA/IGdsLkxJTkVBUiA6
IGdsLk5FQVJFU1QpOw0KCQlnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTsNCgkJ
dGhpcy5sYXN0VGV4dHVyZTAgPSBudWxsOw0KCQl3ZWJHTF90ZXh0dXJlLmMyd2lkdGggPSB3Ow0K
CQl3ZWJHTF90ZXh0dXJlLmMyaGVpZ2h0ID0gaDsNCgkJYWxsX3RleHR1cmVzLnB1c2god2ViR0xf
dGV4dHVyZSk7DQoJCXJldHVybiB3ZWJHTF90ZXh0dXJlOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5
cGUudmlkZW9Ub1RleHR1cmUgPSBmdW5jdGlvbiAodmlkZW9fLCB0ZXh0dXJlXywgXzE2Yml0KQ0K
CXsNCgkJdGhpcy5lbmRCYXRjaCgpOw0KCQl2YXIgZ2wgPSB0aGlzLmdsOw0KCQlpZiAodGhpcy5p
c0lFKQ0KCQkJXzE2Yml0ID0gZmFsc2U7DQoJCWdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQs
IHRleHR1cmVfKTsNCgkJZ2wucGl4ZWxTdG9yZWkoZ2xbIlVOUEFDS19QUkVNVUxUSVBMWV9BTFBI
QV9XRUJHTCJdLCB0cnVlKTsNCgkJdHJ5IHsNCgkJCWdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8y
RCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgXzE2Yml0ID8gZ2wuVU5TSUdORURfU0hPUlRfNF80XzRf
NCA6IGdsLlVOU0lHTkVEX0JZVEUsIHZpZGVvXyk7DQoJCX0NCgkJY2F0Y2ggKGUpDQoJCXsNCgkJ
CWlmIChjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpDQoJCQkJY29uc29sZS5lcnJvcigiRXJyb3Ig
dXBkYXRpbmcgV2ViR0wgdGV4dHVyZTogIiwgZSk7DQoJCX0NCgkJZ2wuYmluZFRleHR1cmUoZ2wu
VEVYVFVSRV8yRCwgbnVsbCk7DQoJCXRoaXMubGFzdFRleHR1cmUwID0gbnVsbDsNCgl9Ow0KCUdM
V3JhcF8ucHJvdG90eXBlLmRlbGV0ZVRleHR1cmUgPSBmdW5jdGlvbiAodGV4KQ0KCXsNCgkJaWYg
KCF0ZXgpDQoJCQlyZXR1cm47DQoJCWlmICh0eXBlb2YgdGV4LmMycmVmY291bnQgIT09ICJ1bmRl
ZmluZWQiICYmIHRleC5jMnJlZmNvdW50ID4gMSkNCgkJew0KCQkJdGV4LmMycmVmY291bnQtLTsN
CgkJCXJldHVybjsNCgkJfQ0KCQl0aGlzLmVuZEJhdGNoKCk7DQoJCWlmICh0ZXggPT09IHRoaXMu
bGFzdFRleHR1cmUwKQ0KCQl7DQoJCQl0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVS
RV8yRCwgbnVsbCk7DQoJCQl0aGlzLmxhc3RUZXh0dXJlMCA9IG51bGw7DQoJCX0NCgkJaWYgKHRl
eCA9PT0gdGhpcy5sYXN0VGV4dHVyZTEpDQoJCXsNCgkJCXRoaXMuZ2wuYWN0aXZlVGV4dHVyZSh0
aGlzLmdsLlRFWFRVUkUxKTsNCgkJCXRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJF
XzJELCBudWxsKTsNCgkJCXRoaXMuZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkUwKTsN
CgkJCXRoaXMubGFzdFRleHR1cmUxID0gbnVsbDsNCgkJfQ0KCQljci5hcnJheUZpbmRSZW1vdmUo
YWxsX3RleHR1cmVzLCB0ZXgpOw0KCQlpZiAodHlwZW9mIHRleC5jMnRleGtleSAhPT0gInVuZGVm
aW5lZCIpDQoJCQlkZWxldGUgdGV4dHVyZXNfYnlfc3JjW3RleC5jMnRleGtleV07DQoJCXRoaXMu
Z2wuZGVsZXRlVGV4dHVyZSh0ZXgpOw0KCX07DQoJR0xXcmFwXy5wcm90b3R5cGUuZXN0aW1hdGVW
UkFNID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciB0b3RhbCA9IHRoaXMud2lkdGggKiB0aGlzLmhl
aWdodCAqIDQgKiAyOw0KCQl2YXIgaSwgbGVuLCB0Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhbGxf
dGV4dHVyZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXQgPSBhbGxfdGV4dHVyZXNb
aV07DQoJCQl0b3RhbCArPSAodC5jMndpZHRoICogdC5jMmhlaWdodCAqIDQpOw0KCQl9DQoJCXJl
dHVybiB0b3RhbDsNCgl9Ow0KCUdMV3JhcF8ucHJvdG90eXBlLnRleHR1cmVDb3VudCA9IGZ1bmN0
aW9uICgpDQoJew0KCQlyZXR1cm4gYWxsX3RleHR1cmVzLmxlbmd0aDsNCgl9Ow0KCUdMV3JhcF8u
cHJvdG90eXBlLnNldFJlbmRlcmluZ1RvVGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXgpDQoJew0KCQlp
ZiAodGV4ID09PSB0aGlzLnJlbmRlclRvVGV4KQ0KCQkJcmV0dXJuOw0KOw0KCQl2YXIgYiA9IHRo
aXMucHVzaEJhdGNoKCk7DQoJCWIudHlwZSA9IEJBVENIX1JFTkRFUlRPVEVYVFVSRTsNCgkJYi50
ZXhQYXJhbSA9IHRleDsNCgkJdGhpcy5yZW5kZXJUb1RleCA9IHRleDsNCgkJdGhpcy5oYXNRdWFk
QmF0Y2hUb3AgPSBmYWxzZTsNCgkJdGhpcy5oYXNQb2ludEJhdGNoVG9wID0gZmFsc2U7DQoJfTsN
Cgljci5HTFdyYXAgPSBHTFdyYXBfOw0KfSgpKTsNCjsNCihmdW5jdGlvbigpDQp7DQoJdmFyIHJh
ZiA9IHdpbmRvd1sicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0gfHwNCgkgIHdpbmRvd1sibW96UmVx
dWVzdEFuaW1hdGlvbkZyYW1lIl0gICAgfHwNCgkgIHdpbmRvd1sid2Via2l0UmVxdWVzdEFuaW1h
dGlvbkZyYW1lIl0gfHwNCgkgIHdpbmRvd1sibXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiXSAgICAg
fHwNCgkgIHdpbmRvd1sib1JlcXVlc3RBbmltYXRpb25GcmFtZSJdOw0KCWZ1bmN0aW9uIFJ1bnRp
bWUoY2FudmFzKQ0KCXsNCgkJaWYgKCFjYW52YXMgfHwgKCFjYW52YXMuZ2V0Q29udGV4dCAmJiAh
Y2FudmFzWyJkYyJdKSkNCgkJCXJldHVybjsNCgkJaWYgKGNhbnZhc1siYzJydW50aW1lIl0pDQoJ
CQlyZXR1cm47DQoJCWVsc2UNCgkJCWNhbnZhc1siYzJydW50aW1lIl0gPSB0aGlzOw0KCQl2YXIg
c2VsZiA9IHRoaXM7DQoJCXRoaXMuaXNDcm9zc3dhbGsgPSAvY3Jvc3N3YWxrL2kudGVzdChuYXZp
Z2F0b3IudXNlckFnZW50KSB8fCAveHdhbGsvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8
ICEhKHR5cGVvZiB3aW5kb3dbImMyaXNDcm9zc3dhbGsiXSAhPT0gInVuZGVmaW5lZCIgJiYgd2lu
ZG93WyJjMmlzQ3Jvc3N3YWxrIl0pOw0KCQl0aGlzLmlzQ29yZG92YSA9IHRoaXMuaXNDcm9zc3dh
bGsgfHwgKHR5cGVvZiB3aW5kb3dbImRldmljZSJdICE9PSAidW5kZWZpbmVkIiAmJiAodHlwZW9m
IHdpbmRvd1siZGV2aWNlIl1bImNvcmRvdmEiXSAhPT0gInVuZGVmaW5lZCIgfHwgdHlwZW9mIHdp
bmRvd1siZGV2aWNlIl1bInBob25lZ2FwIl0gIT09ICJ1bmRlZmluZWQiKSkgfHwgKHR5cGVvZiB3
aW5kb3dbImMyaXNjb3Jkb3ZhIl0gIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvd1siYzJpc2NvcmRv
dmEiXSk7DQoJCXRoaXMuaXNQaG9uZUdhcCA9IHRoaXMuaXNDb3Jkb3ZhOw0KCQl0aGlzLmlzRGly
ZWN0Q2FudmFzID0gISFjYW52YXNbImRjIl07DQoJCXRoaXMuaXNBcHBNb2JpID0gKHR5cGVvZiB3
aW5kb3dbIkFwcE1vYmkiXSAhPT0gInVuZGVmaW5lZCIgfHwgdGhpcy5pc0RpcmVjdENhbnZhcyk7
DQoJCXRoaXMuaXNDb2Nvb25KcyA9ICEhd2luZG93WyJjMmNvY29vbmpzIl07DQoJCXRoaXMuaXNF
amVjdGEgPSAhIXdpbmRvd1siYzJlamVjdGEiXTsNCgkJaWYgKHRoaXMuaXNDb2Nvb25KcykNCgkJ
ew0KCQkJQ29jb29uSlNbIkFwcCJdWyJvblN1c3BlbmRlZCJdLmFkZEV2ZW50TGlzdGVuZXIoZnVu
Y3Rpb24oKSB7DQoJCQkJc2VsZlsic2V0U3VzcGVuZGVkIl0odHJ1ZSk7DQoJCQl9KTsNCgkJCUNv
Y29vbkpTWyJBcHAiXVsib25BY3RpdmF0ZWQiXS5hZGRFdmVudExpc3RlbmVyKGZ1bmN0aW9uICgp
IHsNCgkJCQlzZWxmWyJzZXRTdXNwZW5kZWQiXShmYWxzZSk7DQoJCQl9KTsNCgkJfQ0KCQlpZiAo
dGhpcy5pc0VqZWN0YSkNCgkJew0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicGFnZWhp
ZGUiLCBmdW5jdGlvbigpIHsNCgkJCQlzZWxmWyJzZXRTdXNwZW5kZWQiXSh0cnVlKTsNCgkJCX0p
Ow0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicGFnZXNob3ciLCBmdW5jdGlvbigpIHsN
CgkJCQlzZWxmWyJzZXRTdXNwZW5kZWQiXShmYWxzZSk7DQoJCQl9KTsNCgkJCWRvY3VtZW50LmFk
ZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGZ1bmN0aW9uICgpIHsNCgkJCQlzZWxmWyJzZXRTaXpl
Il0od2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7DQoJCQl9KTsNCgkJfQ0K
CQl0aGlzLmlzRG9tRnJlZSA9ICh0aGlzLmlzRGlyZWN0Q2FudmFzIHx8IHRoaXMuaXNDb2Nvb25K
cyB8fCB0aGlzLmlzRWplY3RhKTsNCgkJdGhpcy5pc01pY3Jvc29mdEVkZ2UgPSAvZWRnZVwvL2ku
dGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsNCgkJdGhpcy5pc0lFID0gKC9tc2llL2kudGVzdChu
YXZpZ2F0b3IudXNlckFnZW50KSB8fCAvdHJpZGVudC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2Vu
dCkgfHwgL2llbW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgJiYgIXRoaXMuaXNN
aWNyb3NvZnRFZGdlOw0KCQl0aGlzLmlzVGl6ZW4gPSAvdGl6ZW4vaS50ZXN0KG5hdmlnYXRvci51
c2VyQWdlbnQpOw0KCQl0aGlzLmlzQW5kcm9pZCA9IC9hbmRyb2lkL2kudGVzdChuYXZpZ2F0b3Iu
dXNlckFnZW50KSAmJiAhdGhpcy5pc1RpemVuICYmICF0aGlzLmlzSUUgJiYgIXRoaXMuaXNNaWNy
b3NvZnRFZGdlOwkJLy8gSUUgbW9iaWxlIGFuZCBUaXplbiBtYXNxdWVyYWRlIGFzIEFuZHJvaWQN
CgkJdGhpcy5pc2lQaG9uZSA9ICgvaXBob25lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8
fCAvaXBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpICYmICF0aGlzLmlzSUUgJiYgIXRo
aXMuaXNNaWNyb3NvZnRFZGdlOwkvLyB0cmVhdCBpcG9kIGFzIGFuIGlwaG9uZTsgSUUgbW9iaWxl
IG1hc3F1ZXJhZGVzIGFzIGlQaG9uZQ0KCQl0aGlzLmlzaVBhZCA9IC9pcGFkL2kudGVzdChuYXZp
Z2F0b3IudXNlckFnZW50KTsNCgkJdGhpcy5pc2lPUyA9IHRoaXMuaXNpUGhvbmUgfHwgdGhpcy5p
c2lQYWQgfHwgdGhpcy5pc0VqZWN0YTsNCgkJdGhpcy5pc2lQaG9uZWlPUzYgPSAodGhpcy5pc2lQ
aG9uZSAmJiAvb3NcczYvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTsNCgkJdGhpcy5pc0No
cm9tZSA9ICgvY2hyb21lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvY2hyb21pdW0v
aS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSAmJiAhdGhpcy5pc0lFICYmICF0aGlzLmlzTWlj
cm9zb2Z0RWRnZTsJLy8gbm90ZSB0cnVlIG9uIENocm9taXVtLWJhc2VkIHdlYnZpZXcgb24gQW5k
cm9pZCA0LjQrOyBJRSAnRWRnZScgbW9kZSBhbHNvIHByZXRlbmRzIHRvIGJlIENocm9tZQ0KCQl0
aGlzLmlzQW1hem9uV2ViQXBwID0gL2FtYXpvbndlYmFwcHBsYXRmb3JtL2kudGVzdChuYXZpZ2F0
b3IudXNlckFnZW50KTsNCgkJdGhpcy5pc0ZpcmVmb3ggPSAvZmlyZWZveC9pLnRlc3QobmF2aWdh
dG9yLnVzZXJBZ2VudCk7DQoJCXRoaXMuaXNTYWZhcmkgPSAvc2FmYXJpL2kudGVzdChuYXZpZ2F0
b3IudXNlckFnZW50KSAmJiAhdGhpcy5pc0Nocm9tZSAmJiAhdGhpcy5pc0lFICYmICF0aGlzLmlz
TWljcm9zb2Z0RWRnZTsJCS8vIENocm9tZSBhbmQgSUUgTW9iaWxlIG1hc3F1ZXJhZGUgYXMgU2Fm
YXJpDQoJCXRoaXMuaXNXaW5kb3dzID0gL3dpbmRvd3MvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdl
bnQpOw0KCQl0aGlzLmlzTldqcyA9ICh0eXBlb2Ygd2luZG93WyJjMm5vZGV3ZWJraXQiXSAhPT0g
InVuZGVmaW5lZCIgfHwgdHlwZW9mIHdpbmRvd1siYzJud2pzIl0gIT09ICJ1bmRlZmluZWQiIHx8
IC9ub2Rld2Via2l0L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvbndqcy9pLnRlc3Qo
bmF2aWdhdG9yLnVzZXJBZ2VudCkpOw0KCQl0aGlzLmlzTm9kZVdlYmtpdCA9IHRoaXMuaXNOV2pz
OwkJLy8gb2xkIG5hbWUgZm9yIGJhY2t3YXJkcyBjb21wYXQNCgkJdGhpcy5pc0FyY2FkZSA9ICh0
eXBlb2Ygd2luZG93WyJpc19zY2lycmFfYXJjYWRlIl0gIT09ICJ1bmRlZmluZWQiKTsNCgkJdGhp
cy5pc1dpbmRvd3M4QXBwID0gISEodHlwZW9mIHdpbmRvd1siYzJpc1dpbmRvd3M4Il0gIT09ICJ1
bmRlZmluZWQiICYmIHdpbmRvd1siYzJpc1dpbmRvd3M4Il0pOw0KCQl0aGlzLmlzV2luZG93czhD
YXBhYmxlID0gISEodHlwZW9mIHdpbmRvd1siYzJpc1dpbmRvd3M4Q2FwYWJsZSJdICE9PSAidW5k
ZWZpbmVkIiAmJiB3aW5kb3dbImMyaXNXaW5kb3dzOENhcGFibGUiXSk7DQoJCXRoaXMuaXNXaW5k
b3dzUGhvbmU4ID0gISEodHlwZW9mIHdpbmRvd1siYzJpc1dpbmRvd3NQaG9uZTgiXSAhPT0gInVu
ZGVmaW5lZCIgJiYgd2luZG93WyJjMmlzV2luZG93c1Bob25lOCJdKTsNCgkJdGhpcy5pc1dpbmRv
d3NQaG9uZTgxID0gISEodHlwZW9mIHdpbmRvd1siYzJpc1dpbmRvd3NQaG9uZTgxIl0gIT09ICJ1
bmRlZmluZWQiICYmIHdpbmRvd1siYzJpc1dpbmRvd3NQaG9uZTgxIl0pOw0KCQl0aGlzLmlzV2lu
ZG93czEwID0gISF3aW5kb3dbImNyX3dpbmRvd3MxMCJdOw0KCQl0aGlzLmlzV2luSlMgPSAodGhp
cy5pc1dpbmRvd3M4QXBwIHx8IHRoaXMuaXNXaW5kb3dzOENhcGFibGUgfHwgdGhpcy5pc1dpbmRv
d3NQaG9uZTgxIHx8IHRoaXMuaXNXaW5kb3dzMTApOwkvLyBub3RlIG5vdCBXUDguMA0KCQl0aGlz
LmlzQmxhY2tiZXJyeTEwID0gISEodHlwZW9mIHdpbmRvd1siYzJpc0JsYWNrYmVycnkxMCJdICE9
PSAidW5kZWZpbmVkIiAmJiB3aW5kb3dbImMyaXNCbGFja2JlcnJ5MTAiXSk7DQoJCXRoaXMuaXNB
bmRyb2lkU3RvY2tCcm93c2VyID0gKHRoaXMuaXNBbmRyb2lkICYmICF0aGlzLmlzQ2hyb21lICYm
ICF0aGlzLmlzQ3Jvc3N3YWxrICYmICF0aGlzLmlzRmlyZWZveCAmJiAhdGhpcy5pc0FtYXpvbldl
YkFwcCAmJiAhdGhpcy5pc0RvbUZyZWUpOw0KCQl0aGlzLmRldmljZVBpeGVsUmF0aW8gPSAxOw0K
CQl0aGlzLmlzTW9iaWxlID0gKHRoaXMuaXNDb3Jkb3ZhIHx8IHRoaXMuaXNDcm9zc3dhbGsgfHwg
dGhpcy5pc0FwcE1vYmkgfHwgdGhpcy5pc0NvY29vbkpzIHx8IHRoaXMuaXNBbmRyb2lkIHx8IHRo
aXMuaXNpT1MgfHwgdGhpcy5pc1dpbmRvd3NQaG9uZTggfHwgdGhpcy5pc1dpbmRvd3NQaG9uZTgx
IHx8IHRoaXMuaXNCbGFja2JlcnJ5MTAgfHwgdGhpcy5pc1RpemVuIHx8IHRoaXMuaXNFamVjdGEp
Ow0KCQlpZiAoIXRoaXMuaXNNb2JpbGUpDQoJCXsNCgkJCXRoaXMuaXNNb2JpbGUgPSAvKGJsYWNr
YmVycnl8YmIxMHxwbGF5Ym9va3xwYWxtfHN5bWJpYW58bm9raWF8d2luZG93c1xzK2NlfHBob25l
fG1vYmlsZXx0YWJsZXR8a2luZGxlfHNpbGspL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsN
CgkJfQ0KCQl0aGlzLmlzV0tXZWJWaWV3ID0gISEodGhpcy5pc2lPUyAmJiB0aGlzLmlzQ29yZG92
YSAmJiB3aW5kb3dbIndlYmtpdCJdKTsNCgkJaWYgKHR5cGVvZiBjcl9pc19wcmV2aWV3ICE9PSAi
dW5kZWZpbmVkIiAmJiAhdGhpcy5pc05XanMgJiYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggPT09
ICI/bnciIHx8IC9ub2Rld2Via2l0L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvbndq
cy9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpKQ0KCQl7DQoJCQl0aGlzLmlzTldqcyA9IHRy
dWU7DQoJCX0NCgkJdGhpcy5pc0RlYnVnID0gKHR5cGVvZiBjcl9pc19wcmV2aWV3ICE9PSAidW5k
ZWZpbmVkIiAmJiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoImRlYnVnIikgPiAtMSk7
DQoJCXRoaXMuY2FudmFzID0gY2FudmFzOw0KCQl0aGlzLmNhbnZhc2RpdiA9IGRvY3VtZW50Lmdl
dEVsZW1lbnRCeUlkKCJjMmNhbnZhc2RpdiIpOw0KCQl0aGlzLmdsID0gbnVsbDsNCgkJdGhpcy5n
bHdyYXAgPSBudWxsOw0KCQl0aGlzLmdsVW5tYXNrZWRSZW5kZXJlciA9ICIodW5hdmFpbGFibGUp
IjsNCgkJdGhpcy5lbmFibGVGcm9udFRvQmFjayA9IGZhbHNlOw0KCQl0aGlzLmVhcmx5el9pbmRl
eCA9IDA7DQoJCXRoaXMuY3R4ID0gbnVsbDsNCgkJdGhpcy5maXJzdEluRnVsbHNjcmVlbiA9IGZh
bHNlOw0KCQl0aGlzLm9sZFdpZHRoID0gMDsJCS8vIGZvciByZXN0b3Jpbmcgbm9uLWZ1bGxzY3Jl
ZW4gY2FudmFzIGFmdGVyIGZ1bGxzY3JlZW4NCgkJdGhpcy5vbGRIZWlnaHQgPSAwOw0KCQl0aGlz
LmNhbnZhcy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKGUpIHsgaWYgKGUucHJldmVudERlZmF1
bHQpIGUucHJldmVudERlZmF1bHQoKTsgcmV0dXJuIGZhbHNlOyB9Ow0KCQl0aGlzLmNhbnZhcy5v
bnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24gKGUpIHsgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJl
dmVudERlZmF1bHQoKTsgcmV0dXJuIGZhbHNlOyB9Ow0KCQl0aGlzLmNhbnZhcy5vbnRvdWNoc3Rh
cnQgPSBmdW5jdGlvbiAoZSkgeyBpZihlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0
KCk7IHJldHVybiBmYWxzZTsgfTsNCgkJaWYgKHRoaXMuaXNEaXJlY3RDYW52YXMpDQoJCQl3aW5k
b3dbImMycnVudGltZSJdID0gdGhpczsNCgkJaWYgKHRoaXMuaXNOV2pzKQ0KCQl7DQoJCQl3aW5k
b3dbIm9uZHJhZ292ZXIiXSA9IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyByZXR1
cm4gZmFsc2U7IH07DQoJCQl3aW5kb3dbIm9uZHJvcCJdID0gZnVuY3Rpb24oZSkgeyBlLnByZXZl
bnREZWZhdWx0KCk7IHJldHVybiBmYWxzZTsgfTsNCgkJCWlmICh3aW5kb3dbIm53Z3VpIl0gJiYg
d2luZG93WyJud2d1aSJdWyJBcHAiXVsiY2xlYXJDYWNoZSJdKQ0KCQkJCXdpbmRvd1sibndndWki
XVsiQXBwIl1bImNsZWFyQ2FjaGUiXSgpOw0KCQl9DQoJCWlmICh0aGlzLmlzQW5kcm9pZFN0b2Nr
QnJvd3NlciAmJiB0eXBlb2YgalF1ZXJ5ICE9PSAidW5kZWZpbmVkIikNCgkJew0KCQkJalF1ZXJ5
KCJjYW52YXMiKS5wYXJlbnRzKCIqIikuY3NzKCJvdmVyZmxvdyIsICJ2aXNpYmxlIik7DQoJCX0N
CgkJdGhpcy53aWR0aCA9IGNhbnZhcy53aWR0aDsNCgkJdGhpcy5oZWlnaHQgPSBjYW52YXMuaGVp
Z2h0Ow0KCQl0aGlzLmRyYXdfd2lkdGggPSB0aGlzLndpZHRoOw0KCQl0aGlzLmRyYXdfaGVpZ2h0
ID0gdGhpcy5oZWlnaHQ7DQoJCXRoaXMuY3NzV2lkdGggPSB0aGlzLndpZHRoOw0KCQl0aGlzLmNz
c0hlaWdodCA9IHRoaXMuaGVpZ2h0Ow0KCQl0aGlzLmxhc3RXaW5kb3dXaWR0aCA9IHdpbmRvdy5p
bm5lcldpZHRoOw0KCQl0aGlzLmxhc3RXaW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7
DQoJCXRoaXMuZm9yY2VDYW52YXNBbHBoYSA9IGZhbHNlOwkJLy8gbm90ZTogbm93IHVudXNlZCwg
bGVmdCBmb3IgYmFja3dhcmRzIGNvbXBhdCBzaW5jZSBwbHVnaW5zIGNvdWxkIG1vZGlmeSBpdA0K
CQl0aGlzLnJlZHJhdyA9IHRydWU7DQoJCXRoaXMuaXNTdXNwZW5kZWQgPSBmYWxzZTsNCgkJaWYg
KCFEYXRlLm5vdykgew0KCQkgIERhdGUubm93ID0gZnVuY3Rpb24gbm93KCkgew0KCQkJcmV0dXJu
ICtuZXcgRGF0ZSgpOw0KCQkgIH07DQoJCX0NCgkJdGhpcy5wbHVnaW5zID0gW107DQoJCXRoaXMu
dHlwZXMgPSB7fTsNCgkJdGhpcy50eXBlc19ieV9pbmRleCA9IFtdOw0KCQl0aGlzLmJlaGF2aW9y
cyA9IFtdOw0KCQl0aGlzLmxheW91dHMgPSB7fTsNCgkJdGhpcy5sYXlvdXRzX2J5X2luZGV4ID0g
W107DQoJCXRoaXMuZXZlbnRzaGVldHMgPSB7fTsNCgkJdGhpcy5ldmVudHNoZWV0c19ieV9pbmRl
eCA9IFtdOw0KCQl0aGlzLndhaXRfZm9yX3RleHR1cmVzID0gW107ICAgICAgICAvLyBmb3IgYmxv
Y2tpbmcgdW50aWwgdGV4dHVyZXMgbG9hZGVkDQoJCXRoaXMudHJpZ2dlcnNfdG9fcG9zdGluaXQg
PSBbXTsNCgkJdGhpcy5hbGxfZ2xvYmFsX3ZhcnMgPSBbXTsNCgkJdGhpcy5hbGxfbG9jYWxfdmFy
cyA9IFtdOw0KCQl0aGlzLnNvbGlkQmVoYXZpb3IgPSBudWxsOw0KCQl0aGlzLmp1bXB0aHJ1QmVo
YXZpb3IgPSBudWxsOw0KCQl0aGlzLnNoYWRvd2Nhc3RlckJlaGF2aW9yID0gbnVsbDsNCgkJdGhp
cy5kZWF0aFJvdyA9IHt9Ow0KCQl0aGlzLmhhc1BlbmRpbmdJbnN0YW5jZXMgPSBmYWxzZTsJCS8v
IHRydWUgaWYgYW55dGhpbmcgZXhpc3RzIGluIGNyZWF0ZSByb3cgb3IgZGVhdGggcm93DQoJCXRo
aXMuaXNJbkNsZWFyRGVhdGhSb3cgPSBmYWxzZTsNCgkJdGhpcy5pc0luT25EZXN0cm95ID0gMDsJ
CQkJCS8vIG5lZWRzIHRvIHN1cHBvcnQgcmVjdXJzaW9uIHNvIGluY3JlbWVudHMgYW5kIGRlY3Jl
bWVudHMgYW5kIGlzIHRydWUgaWYgPiAwDQoJCXRoaXMuaXNSdW5uaW5nRXZlbnRzID0gZmFsc2U7
DQoJCXRoaXMuaXNFbmRpbmdMYXlvdXQgPSBmYWxzZTsNCgkJdGhpcy5jcmVhdGVSb3cgPSBbXTsN
CgkJdGhpcy5pc0xvYWRpbmdTdGF0ZSA9IGZhbHNlOw0KCQl0aGlzLnNhdmVUb1Nsb3QgPSAiIjsN
CgkJdGhpcy5sb2FkRnJvbVNsb3QgPSAiIjsNCgkJdGhpcy5sb2FkRnJvbUpzb24gPSBudWxsOwkJ
CS8vIHNldCB0byBzdHJpbmcgd2hlbiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gdHJ5IHRvIGxvYWQN
CgkJdGhpcy5sYXN0U2F2ZUpzb24gPSAiIjsNCgkJdGhpcy5zaWduYWxsZWRDb250aW51b3VzUHJl
dmlldyA9IGZhbHNlOw0KCQl0aGlzLnN1c3BlbmREcmF3aW5nID0gZmFsc2U7CQkvLyBmb3IgaGlk
aW5nIGRpc3BsYXkgdW50aWwgY29udGludW91cyBwcmV2aWV3IGxvYWRzDQoJCXRoaXMuZmlyZU9u
Q3JlYXRlQWZ0ZXJMb2FkID0gW107CS8vIGZvciBkZWxheWluZyAiT24gY3JlYXRlIiB0cmlnZ2Vy
cyB1bnRpbCBsb2FkaW5nIGNvbXBsZXRlDQoJCXRoaXMuZHQgPSAwOw0KICAgICAgICB0aGlzLmR0
MSA9IDA7DQoJCXRoaXMubWluaW11bUZyYW1lcmF0ZSA9IDMwOw0KCQl0aGlzLmxvZ2ljdGltZSA9
IDA7CQkJLy8gdXNlZCB0byBjYWxjdWxhdGUgQ1BVVXRpbGlzYXRpb24NCgkJdGhpcy5jcHV1dGls
aXNhdGlvbiA9IDA7DQogICAgICAgIHRoaXMudGltZXNjYWxlID0gMS4wOw0KICAgICAgICB0aGlz
LmthaGFuVGltZSA9IG5ldyBjci5LYWhhbkFkZGVyKCk7DQoJCXRoaXMud2FsbFRpbWUgPSBuZXcg
Y3IuS2FoYW5BZGRlcigpOw0KCQl0aGlzLmxhc3RfdGlja190aW1lID0gMDsNCgkJdGhpcy5mcHMg
PSAwOw0KCQl0aGlzLmxhc3RfZnBzX3RpbWUgPSAwOw0KCQl0aGlzLnRpY2tjb3VudCA9IDA7DQoJ
CXRoaXMudGlja2NvdW50X25vc2F2ZSA9IDA7CS8vIHNhbWUgYXMgdGlja2NvdW50IGJ1dCBuZXZl
ciBzYXZlZC9sb2FkZWQNCgkJdGhpcy5leGVjY291bnQgPSAwOw0KCQl0aGlzLmZyYW1lY291bnQg
PSAwOyAgICAgICAgLy8gZm9yIGZwcw0KCQl0aGlzLm9iamVjdGNvdW50ID0gMDsNCgkJdGhpcy5j
aGFuZ2VsYXlvdXQgPSBudWxsOw0KCQl0aGlzLmRlc3Ryb3ljYWxsYmFja3MgPSBbXTsNCgkJdGhp
cy5ldmVudF9zdGFjayA9IFtdOw0KCQl0aGlzLmV2ZW50X3N0YWNrX2luZGV4ID0gLTE7DQoJCXRo
aXMubG9jYWx2YXJfc3RhY2sgPSBbW11dOw0KCQl0aGlzLmxvY2FsdmFyX3N0YWNrX2luZGV4ID0g
MDsNCgkJdGhpcy50cmlnZ2VyX2RlcHRoID0gMDsJCS8vIHJlY3Vyc2lvbiBkZXB0aCBmb3IgdHJp
Z2dlcnMNCgkJdGhpcy5wdXNoRXZlbnRTdGFjayhudWxsKTsNCgkJdGhpcy5sb29wX3N0YWNrID0g
W107DQoJCXRoaXMubG9vcF9zdGFja19pbmRleCA9IC0xOw0KCQl0aGlzLm5leHRfdWlkID0gMDsN
CgkJdGhpcy5uZXh0X3B1aWQgPSAwOwkJLy8gcGVybWFuZW50IHVuaXF1ZSBpZHMNCgkJdGhpcy5s
YXlvdXRfZmlyc3RfdGljayA9IHRydWU7DQoJCXRoaXMuZmFtaWx5X2NvdW50ID0gMDsNCgkJdGhp
cy5zdXNwZW5kX2V2ZW50cyA9IFtdOw0KCQl0aGlzLnJhZl9pZCA9IC0xOw0KCQl0aGlzLnRpbWVv
dXRfaWQgPSAtMTsNCgkJdGhpcy5pc2xvYWRpbmcgPSB0cnVlOw0KCQl0aGlzLmxvYWRpbmdwcm9n
cmVzcyA9IDA7DQoJCXRoaXMuaXNOb2RlRnVsbHNjcmVlbiA9IGZhbHNlOw0KCQl0aGlzLnN0YWNr
TG9jYWxDb3VudCA9IDA7CS8vIG51bWJlciBvZiBzdGFjay1iYXNlZCBsb2NhbCB2YXJzIGZvciBy
ZWN1cnNpb24NCgkJdGhpcy5hdWRpb0luc3RhbmNlID0gbnVsbDsNCgkJdGhpcy5oYWRfYV9jbGlj
ayA9IGZhbHNlOw0KCQl0aGlzLmlzSW5Vc2VySW5wdXRFdmVudCA9IGZhbHNlOw0KCQl0aGlzLm9i
amVjdHNfdG9fcHJldGljayA9IG5ldyBjci5PYmplY3RTZXQoKTsNCiAgICAgICAgdGhpcy5vYmpl
Y3RzX3RvX3RpY2sgPSBuZXcgY3IuT2JqZWN0U2V0KCk7DQoJCXRoaXMub2JqZWN0c190b190aWNr
MiA9IG5ldyBjci5PYmplY3RTZXQoKTsNCgkJdGhpcy5yZWdpc3RlcmVkX2NvbGxpc2lvbnMgPSBb
XTsNCgkJdGhpcy50ZW1wX3BvbHkgPSBuZXcgY3IuQ29sbGlzaW9uUG9seShbXSk7DQoJCXRoaXMu
dGVtcF9wb2x5MiA9IG5ldyBjci5Db2xsaXNpb25Qb2x5KFtdKTsNCgkJdGhpcy5hbGxHcm91cHMg
PSBbXTsJCQkJLy8gYXJyYXkgb2YgYWxsIGV2ZW50IGdyb3Vwcw0KICAgICAgICB0aGlzLmdyb3Vw
c19ieV9uYW1lID0ge307DQoJCXRoaXMuY25kc0J5U2lkID0ge307DQoJCXRoaXMuYWN0c0J5U2lk
ID0ge307DQoJCXRoaXMudmFyc0J5U2lkID0ge307DQoJCXRoaXMuYmxvY2tzQnlTaWQgPSB7fTsN
CgkJdGhpcy5ydW5uaW5nX2xheW91dCA9IG51bGw7CQkJLy8gY3VycmVudGx5IHJ1bm5pbmcgbGF5
b3V0DQoJCXRoaXMubGF5ZXJfY2FudmFzID0gbnVsbDsJCQkvLyBmb3IgbGF5ZXJzICJyZW5kZXIt
dG8tdGV4dHVyZSINCgkJdGhpcy5sYXllcl9jdHggPSBudWxsOw0KCQl0aGlzLmxheWVyX3RleCA9
IG51bGw7DQoJCXRoaXMubGF5b3V0X3RleCA9IG51bGw7DQoJCXRoaXMubGF5b3V0X2NhbnZhcyA9
IG51bGw7DQoJCXRoaXMubGF5b3V0X2N0eCA9IG51bGw7DQoJCXRoaXMuaXNfV2ViR0xfY29udGV4
dF9sb3N0ID0gZmFsc2U7DQoJCXRoaXMudXNlc19iYWNrZ3JvdW5kX2JsZW5kaW5nID0gZmFsc2U7
CS8vIGlmIGFueSBzaGFkZXIgdXNlcyBiYWNrZ3JvdW5kIGJsZW5kaW5nLCBzbyBlbnRpcmUgbGF5
b3V0IHJlbmRlcnMgdG8gdGV4dHVyZQ0KCQl0aGlzLmZ4X3RleCA9IFtudWxsLCBudWxsXTsNCgkJ
dGhpcy5mdWxsc2NyZWVuX3NjYWxpbmcgPSAwOw0KCQl0aGlzLmZpbGVzX3N1YmZvbGRlciA9ICIi
OwkJCS8vIHBhdGggd2l0aCBwcm9qZWN0IGZpbGVzDQoJCXRoaXMub2JqZWN0c0J5VWlkID0ge307
CQkJCS8vIG1hcHMgZXZlcnkgaW4tdXNlIFVJRCAoYXMgYSBzdHJpbmcpIHRvIGl0cyBpbnN0YW5j
ZQ0KCQl0aGlzLmxvYWRlcmxvZ29zID0gbnVsbDsNCgkJdGhpcy5zbmFwc2hvdENhbnZhcyA9IG51
bGw7DQoJCXRoaXMuc25hcHNob3REYXRhID0gIiI7DQoJCXRoaXMub2JqZWN0UmVmVGFibGUgPSBb
XTsNCgkJdGhpcy5yZXF1ZXN0UHJvamVjdERhdGEoKTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBl
LnJlcXVlc3RQcm9qZWN0RGF0YSA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgc2VsZiA9IHRoaXM7
DQoJCWlmICh0aGlzLmlzV0tXZWJWaWV3KQ0KCQl7DQoJCQl0aGlzLmZldGNoTG9jYWxGaWxlVmlh
Q29yZG92YUFzVGV4dCgiZGF0YS5qcyIsIGZ1bmN0aW9uIChzdHIpDQoJCQl7DQoJCQkJc2VsZi5s
b2FkUHJvamVjdChKU09OLnBhcnNlKHN0cikpOw0KCQkJfSwgZnVuY3Rpb24gKGVycikNCgkJCXsN
CgkJCQlhbGVydCgiRXJyb3IgZmV0Y2hpbmcgZGF0YS5qcyIpOw0KCQkJfSk7DQoJCQlyZXR1cm47
DQoJCX0NCgkJdmFyIHhocjsNCgkJaWYgKHRoaXMuaXNXaW5kb3dzUGhvbmU4KQ0KCQkJeGhyID0g
bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7DQoJCWVsc2UNCgkJCXhociA9
IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KCQl2YXIgZGF0YWpzX2ZpbGVuYW1lID0gImRhdGEuanMi
Ow0KCQlpZiAodGhpcy5pc1dpbmRvd3M4QXBwIHx8IHRoaXMuaXNXaW5kb3dzUGhvbmU4IHx8IHRo
aXMuaXNXaW5kb3dzUGhvbmU4MSB8fCB0aGlzLmlzV2luZG93czEwKQ0KCQkJZGF0YWpzX2ZpbGVu
YW1lID0gImRhdGEuanNvbiI7DQoJCXhoci5vcGVuKCJHRVQiLCBkYXRhanNfZmlsZW5hbWUsIHRy
dWUpOw0KCQl2YXIgc3VwcG9ydHNKc29uUmVzcG9uc2UgPSBmYWxzZTsNCgkJaWYgKCF0aGlzLmlz
RG9tRnJlZSAmJiAoInJlc3BvbnNlIiBpbiB4aHIpICYmICgicmVzcG9uc2VUeXBlIiBpbiB4aHIp
KQ0KCQl7DQoJCQl0cnkgew0KCQkJCXhoclsicmVzcG9uc2VUeXBlIl0gPSAianNvbiI7DQoJCQkJ
c3VwcG9ydHNKc29uUmVzcG9uc2UgPSAoeGhyWyJyZXNwb25zZVR5cGUiXSA9PT0gImpzb24iKTsN
CgkJCX0NCgkJCWNhdGNoIChlKSB7DQoJCQkJc3VwcG9ydHNKc29uUmVzcG9uc2UgPSBmYWxzZTsN
CgkJCX0NCgkJfQ0KCQlpZiAoIXN1cHBvcnRzSnNvblJlc3BvbnNlICYmICgicmVzcG9uc2VUeXBl
IiBpbiB4aHIpKQ0KCQl7DQoJCQl0cnkgew0KCQkJCXhoclsicmVzcG9uc2VUeXBlIl0gPSAidGV4
dCI7DQoJCQl9DQoJCQljYXRjaCAoZSkge30NCgkJfQ0KCQlpZiAoIm92ZXJyaWRlTWltZVR5cGUi
IGluIHhocikNCgkJew0KCQkJdHJ5IHsNCgkJCQl4aHJbIm92ZXJyaWRlTWltZVR5cGUiXSgiYXBw
bGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIpOw0KCQkJfQ0KCQkJY2F0Y2ggKGUpIHt9DQoJ
CX0NCgkJaWYgKHRoaXMuaXNXaW5kb3dzUGhvbmU4KQ0KCQl7DQoJCQl4aHIub25yZWFkeXN0YXRl
Y2hhbmdlID0gZnVuY3Rpb24gKCkNCgkJCXsNCgkJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IDQp
DQoJCQkJCXJldHVybjsNCgkJCQlzZWxmLmxvYWRQcm9qZWN0KEpTT04ucGFyc2UoeGhyWyJyZXNw
b25zZVRleHQiXSkpOw0KCQkJfTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXhoci5vbmxvYWQgPSBm
dW5jdGlvbiAoKQ0KCQkJew0KCQkJCWlmIChzdXBwb3J0c0pzb25SZXNwb25zZSkNCgkJCQl7DQoJ
CQkJCXNlbGYubG9hZFByb2plY3QoeGhyWyJyZXNwb25zZSJdKTsJCQkJCS8vIGFscmVhZHkgcGFy
c2VkIGJ5IGJyb3dzZXINCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJaWYgKHNlbGYuaXNF
amVjdGEpDQoJCQkJCXsNCgkJCQkJCXZhciBzdHIgPSB4aHJbInJlc3BvbnNlVGV4dCJdOw0KCQkJ
CQkJc3RyID0gc3RyLnN1YnN0cihzdHIuaW5kZXhPZigieyIpKTsJCS8vIHRyaW0gYW55IEJPTQ0K
CQkJCQkJc2VsZi5sb2FkUHJvamVjdChKU09OLnBhcnNlKHN0cikpOw0KCQkJCQl9DQoJCQkJCWVs
c2UNCgkJCQkJew0KCQkJCQkJc2VsZi5sb2FkUHJvamVjdChKU09OLnBhcnNlKHhoclsicmVzcG9u
c2VUZXh0Il0pKTsJLy8gZm9yY2VkIHRvIHN5bmMgcGFyc2UgSlNPTg0KCQkJCQl9DQoJCQkJfQ0K
CQkJfTsNCgkJCXhoci5vbmVycm9yID0gZnVuY3Rpb24gKGUpDQoJCQl7DQoJCQkJY3IubG9nZXJy
b3IoIkVycm9yIHJlcXVlc3RpbmcgIiArIGRhdGFqc19maWxlbmFtZSArICI6Iik7DQoJCQkJY3Iu
bG9nZXJyb3IoZSk7DQoJCQl9Ow0KCQl9DQoJCXhoci5zZW5kKCk7DQoJfTsNCglSdW50aW1lLnBy
b3RvdHlwZS5pbml0UmVuZGVyZXJBbmRMb2FkZXIgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIHNl
bGYgPSB0aGlzOw0KCQl2YXIgaSwgbGVuLCBqLCBsZW5qLCBrLCBsZW5rLCB0LCBzLCBsLCB5Ow0K
CQl0aGlzLmlzUmV0aW5hID0gKCghdGhpcy5pc0RvbUZyZWUgfHwgdGhpcy5pc0VqZWN0YSB8fCB0
aGlzLmlzQ29yZG92YSkgJiYgdGhpcy51c2VIaWdoRHBpICYmICF0aGlzLmlzQW5kcm9pZFN0b2Nr
QnJvd3Nlcik7DQoJCWlmICh0aGlzLmZ1bGxzY3JlZW5fbW9kZSA9PT0gMCAmJiB0aGlzLmlzaU9T
KQ0KCQkJdGhpcy5pc1JldGluYSA9IGZhbHNlOw0KCQl0aGlzLmRldmljZVBpeGVsUmF0aW8gPSAo
dGhpcy5pc1JldGluYSA/ICh3aW5kb3dbImRldmljZVBpeGVsUmF0aW8iXSB8fCB3aW5kb3dbIndl
YmtpdERldmljZVBpeGVsUmF0aW8iXSB8fCB3aW5kb3dbIm1vekRldmljZVBpeGVsUmF0aW8iXSB8
fCB3aW5kb3dbIm1zRGV2aWNlUGl4ZWxSYXRpbyJdIHx8IDEpIDogMSk7DQoJCWlmICh0eXBlb2Yg
d2luZG93WyJTdGF0dXNCYXIiXSA9PT0gIm9iamVjdCIpDQoJCQl3aW5kb3dbIlN0YXR1c0JhciJd
WyJoaWRlIl0oKTsNCgkJdGhpcy5DbGVhckRlYXRoUm93KCk7DQoJCXZhciBhdHRyaWJzOw0KCQlp
ZiAodGhpcy5mdWxsc2NyZWVuX21vZGUgPiAwKQ0KCQkJdGhpc1sic2V0U2l6ZSJdKHdpbmRvdy5p
bm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQsIHRydWUpOw0KCQl0aGlzLmNhbnZhcy5hZGRF
dmVudExpc3RlbmVyKCJ3ZWJnbGNvbnRleHRsb3N0IiwgZnVuY3Rpb24gKGV2KSB7DQoJCQlldi5w
cmV2ZW50RGVmYXVsdCgpOw0KCQkJc2VsZi5vbkNvbnRleHRMb3N0KCk7DQoJCQljci5sb2dleHBv
cnQoIltDb25zdHJ1Y3QgMl0gV2ViR0wgY29udGV4dCBsb3N0Iik7DQoJCQl3aW5kb3dbImNyX3Nl
dFN1c3BlbmRlZCJdKHRydWUpOwkJLy8gc3RvcCByZW5kZXJpbmcNCgkJfSwgZmFsc2UpOw0KCQl0
aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ3ZWJnbGNvbnRleHRyZXN0b3JlZCIsIGZ1bmN0
aW9uIChldikgew0KCQkJc2VsZi5nbHdyYXAuaW5pdFN0YXRlKCk7DQoJCQlzZWxmLmdsd3JhcC5z
ZXRTaXplKHNlbGYuZ2x3cmFwLndpZHRoLCBzZWxmLmdsd3JhcC5oZWlnaHQsIHRydWUpOw0KCQkJ
c2VsZi5sYXllcl90ZXggPSBudWxsOw0KCQkJc2VsZi5sYXlvdXRfdGV4ID0gbnVsbDsNCgkJCXNl
bGYuZnhfdGV4WzBdID0gbnVsbDsNCgkJCXNlbGYuZnhfdGV4WzFdID0gbnVsbDsNCgkJCXNlbGYu
b25Db250ZXh0UmVzdG9yZWQoKTsNCgkJCXNlbGYucmVkcmF3ID0gdHJ1ZTsNCgkJCWNyLmxvZ2V4
cG9ydCgiW0NvbnN0cnVjdCAyXSBXZWJHTCBjb250ZXh0IHJlc3RvcmVkIik7DQoJCQl3aW5kb3db
ImNyX3NldFN1c3BlbmRlZCJdKGZhbHNlKTsJCS8vIHJlc3VtZSByZW5kZXJpbmcNCgkJfSwgZmFs
c2UpOw0KCQl0cnkgew0KCQkJaWYgKHRoaXMuZW5hYmxlV2ViR0wgJiYgKHRoaXMuaXNDb2Nvb25K
cyB8fCB0aGlzLmlzRWplY3RhIHx8ICF0aGlzLmlzRG9tRnJlZSkpDQoJCQl7DQoJCQkJYXR0cmli
cyA9IHsNCgkJCQkJImFscGhhIjogdHJ1ZSwNCgkJCQkJImRlcHRoIjogZmFsc2UsDQoJCQkJCSJh
bnRpYWxpYXMiOiBmYWxzZSwNCgkJCQkJInBvd2VyUHJlZmVyZW5jZSI6ICJoaWdoLXBlcmZvcm1h
bmNlIiwNCgkJCQkJImZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQiOiB0cnVlDQoJCQkJfTsN
CgkJCQlpZiAoIXRoaXMuaXNBbmRyb2lkKQ0KCQkJCQl0aGlzLmdsID0gdGhpcy5jYW52YXMuZ2V0
Q29udGV4dCgid2ViZ2wyIiwgYXR0cmlicyk7DQoJCQkJaWYgKCF0aGlzLmdsKQ0KCQkJCXsNCgkJ
CQkJdGhpcy5nbCA9ICh0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbCIsIGF0dHJpYnMpIHx8
DQoJCQkJCQkJICAgdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiZXhwZXJpbWVudGFsLXdlYmdsIiwg
YXR0cmlicykpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQljYXRjaCAoZSkgew0KCQl9DQoJCWlmICh0
aGlzLmdsKQ0KCQl7DQoJCQl2YXIgaXNXZWJHTDIgPSAodGhpcy5nbC5nZXRQYXJhbWV0ZXIodGhp
cy5nbC5WRVJTSU9OKS5pbmRleE9mKCJXZWJHTCAyIikgPT09IDApOw0KCQkJdmFyIGRlYnVnX2V4
dCA9IHRoaXMuZ2wuZ2V0RXh0ZW5zaW9uKCJXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvIik7DQoJ
CQlpZiAoZGVidWdfZXh0KQ0KCQkJew0KCQkJCXZhciB1bm1hc2tlZF92ZW5kb3IgPSB0aGlzLmds
LmdldFBhcmFtZXRlcihkZWJ1Z19leHQuVU5NQVNLRURfVkVORE9SX1dFQkdMKTsNCgkJCQl2YXIg
dW5tYXNrZWRfcmVuZGVyZXIgPSB0aGlzLmdsLmdldFBhcmFtZXRlcihkZWJ1Z19leHQuVU5NQVNL
RURfUkVOREVSRVJfV0VCR0wpOw0KCQkJCXRoaXMuZ2xVbm1hc2tlZFJlbmRlcmVyID0gdW5tYXNr
ZWRfcmVuZGVyZXIgKyAiIFsiICsgdW5tYXNrZWRfdmVuZG9yICsgIl0iOw0KCQkJfQ0KCQkJaWYg
KHRoaXMuZW5hYmxlRnJvbnRUb0JhY2spDQoJCQkJdGhpcy5nbFVubWFza2VkUmVuZGVyZXIgKz0g
IiBbZnJvbnQtdG8tYmFjayBlbmFibGVkXSI7DQo7DQoJCQlpZiAoIXRoaXMuaXNEb21GcmVlKQ0K
CQkJew0KCQkJCXRoaXMub3ZlcmxheV9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJj
YW52YXMiKTsNCgkJCQlqUXVlcnkodGhpcy5vdmVybGF5X2NhbnZhcykuYXBwZW5kVG8odGhpcy5j
YW52YXMucGFyZW50Tm9kZSk7DQoJCQkJdGhpcy5vdmVybGF5X2NhbnZhcy5vbmNvbnRleHRtZW51
ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGZhbHNlOyB9Ow0KCQkJCXRoaXMub3ZlcmxheV9jYW52
YXMub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBmYWxzZTsgfTsNCgkJCQl0
aGlzLm92ZXJsYXlfY2FudmFzLndpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmNzc1dpZHRoICogdGhp
cy5kZXZpY2VQaXhlbFJhdGlvKTsNCgkJCQl0aGlzLm92ZXJsYXlfY2FudmFzLmhlaWdodCA9IE1h
dGgucm91bmQodGhpcy5jc3NIZWlnaHQgKiB0aGlzLmRldmljZVBpeGVsUmF0aW8pOw0KCQkJCWpR
dWVyeSh0aGlzLm92ZXJsYXlfY2FudmFzKS5jc3MoeyJ3aWR0aCI6IHRoaXMuY3NzV2lkdGggKyAi
cHgiLA0KCQkJCQkJCQkJCQkJImhlaWdodCI6IHRoaXMuY3NzSGVpZ2h0ICsgInB4In0pOw0KCQkJ
CXRoaXMucG9zaXRpb25PdmVybGF5Q2FudmFzKCk7DQoJCQkJdGhpcy5vdmVybGF5X2N0eCA9IHRo
aXMub3ZlcmxheV9jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsNCgkJCX0NCgkJCXRoaXMuZ2x3cmFw
ID0gbmV3IGNyLkdMV3JhcCh0aGlzLmdsLCB0aGlzLmlzTW9iaWxlLCB0aGlzLmVuYWJsZUZyb250
VG9CYWNrKTsNCgkJCXRoaXMuZ2x3cmFwLnNldFNpemUodGhpcy5jYW52YXMud2lkdGgsIHRoaXMu
Y2FudmFzLmhlaWdodCk7DQoJCQl0aGlzLmdsd3JhcC5lbmFibGVfbWlwbWFwcyA9ICh0aGlzLmRv
d25zY2FsaW5nUXVhbGl0eSAhPT0gMCk7DQoJCQl0aGlzLmN0eCA9IG51bGw7DQoJCQlmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLnR5cGVzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJ
ew0KCQkJCXQgPSB0aGlzLnR5cGVzX2J5X2luZGV4W2ldOw0KCQkJCWZvciAoaiA9IDAsIGxlbmog
PSB0LmVmZmVjdF90eXBlcy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQkJew0KCQkJCQlzID0g
dC5lZmZlY3RfdHlwZXNbal07DQoJCQkJCXMuc2hhZGVyaW5kZXggPSB0aGlzLmdsd3JhcC5nZXRT
aGFkZXJJbmRleChzLmlkKTsNCgkJCQkJcy5wcmVzZXJ2ZXNPcGFxdWVuZXNzID0gdGhpcy5nbHdy
YXAucHJvZ3JhbVByZXNlcnZlc09wYXF1ZW5lc3Mocy5zaGFkZXJpbmRleCk7DQoJCQkJCXRoaXMu
dXNlc19iYWNrZ3JvdW5kX2JsZW5kaW5nID0gdGhpcy51c2VzX2JhY2tncm91bmRfYmxlbmRpbmcg
fHwgdGhpcy5nbHdyYXAucHJvZ3JhbVVzZXNEZXN0KHMuc2hhZGVyaW5kZXgpOw0KCQkJCX0NCgkJ
CX0NCgkJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMubGF5b3V0c19ieV9pbmRleC5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJCXsNCgkJCQlsID0gdGhpcy5sYXlvdXRzX2J5X2luZGV4W2ldOw0KCQkJ
CWZvciAoaiA9IDAsIGxlbmogPSBsLmVmZmVjdF90eXBlcy5sZW5ndGg7IGogPCBsZW5qOyBqKysp
DQoJCQkJew0KCQkJCQlzID0gbC5lZmZlY3RfdHlwZXNbal07DQoJCQkJCXMuc2hhZGVyaW5kZXgg
PSB0aGlzLmdsd3JhcC5nZXRTaGFkZXJJbmRleChzLmlkKTsNCgkJCQkJcy5wcmVzZXJ2ZXNPcGFx
dWVuZXNzID0gdGhpcy5nbHdyYXAucHJvZ3JhbVByZXNlcnZlc09wYXF1ZW5lc3Mocy5zaGFkZXJp
bmRleCk7DQoJCQkJfQ0KCQkJCWwudXBkYXRlQWN0aXZlRWZmZWN0cygpOwkJLy8gdXBkYXRlIHBy
ZXNlcnZlcyBvcGFxdWVuZXNzIGZsYWcNCgkJCQlmb3IgKGogPSAwLCBsZW5qID0gbC5sYXllcnMu
bGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCXsNCgkJCQkJeSA9IGwubGF5ZXJzW2pdOw0KCQkJ
CQlmb3IgKGsgPSAwLCBsZW5rID0geS5lZmZlY3RfdHlwZXMubGVuZ3RoOyBrIDwgbGVuazsgaysr
KQ0KCQkJCQl7DQoJCQkJCQlzID0geS5lZmZlY3RfdHlwZXNba107DQoJCQkJCQlzLnNoYWRlcmlu
ZGV4ID0gdGhpcy5nbHdyYXAuZ2V0U2hhZGVySW5kZXgocy5pZCk7DQoJCQkJCQlzLnByZXNlcnZl
c09wYXF1ZW5lc3MgPSB0aGlzLmdsd3JhcC5wcm9ncmFtUHJlc2VydmVzT3BhcXVlbmVzcyhzLnNo
YWRlcmluZGV4KTsNCgkJCQkJCXRoaXMudXNlc19iYWNrZ3JvdW5kX2JsZW5kaW5nID0gdGhpcy51
c2VzX2JhY2tncm91bmRfYmxlbmRpbmcgfHwgdGhpcy5nbHdyYXAucHJvZ3JhbVVzZXNEZXN0KHMu
c2hhZGVyaW5kZXgpOw0KCQkJCQl9DQoJCQkJCXkudXBkYXRlQWN0aXZlRWZmZWN0cygpOwkJLy8g
dXBkYXRlIHByZXNlcnZlcyBvcGFxdWVuZXNzIGZsYWcNCgkJCQl9DQoJCQl9DQoJCX0NCgkJZWxz
ZQ0KCQl7DQoJCQlpZiAodGhpcy5mdWxsc2NyZWVuX21vZGUgPiAwICYmIHRoaXMuaXNEaXJlY3RD
YW52YXMpDQoJCQl7DQo7DQoJCQkJdGhpcy5jYW52YXMgPSBudWxsOw0KCQkJCWRvY3VtZW50Lm9u
Y29udGV4dG1lbnUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZmFsc2U7IH07DQoJCQkJZG9jdW1l
bnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBmYWxzZTsgfTsNCgkJCQl0
aGlzLmN0eCA9IEFwcE1vYmlbImNhbnZhcyJdWyJnZXRDb250ZXh0Il0oIjJkIik7DQoJCQkJdHJ5
IHsNCgkJCQkJdGhpcy5jdHhbInNhbXBsaW5nTW9kZSJdID0gdGhpcy5saW5lYXJTYW1wbGluZyA/
ICJzbW9vdGgiIDogInNoYXJwIjsNCgkJCQkJdGhpcy5jdHhbImdsb2JhbFNjYWxlIl0gPSAxOw0K
CQkJCQl0aGlzLmN0eFsiSFRNTDVDb21wYXRpYmlsaXR5TW9kZSJdID0gdHJ1ZTsNCgkJCQkJdGhp
cy5jdHhbImltYWdlU21vb3RoaW5nRW5hYmxlZCJdID0gdGhpcy5saW5lYXJTYW1wbGluZzsNCgkJ
CQl9IGNhdGNoKGUpe30NCgkJCQlpZiAodGhpcy53aWR0aCAhPT0gMCAmJiB0aGlzLmhlaWdodCAh
PT0gMCkNCgkJCQl7DQoJCQkJCXRoaXMuY3R4LndpZHRoID0gdGhpcy53aWR0aDsNCgkJCQkJdGhp
cy5jdHguaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7DQoJCQkJfQ0KCQkJfQ0KCQkJaWYgKCF0aGlzLmN0
eCkNCgkJCXsNCjsNCgkJCQlpZiAodGhpcy5pc0NvY29vbkpzKQ0KCQkJCXsNCgkJCQkJYXR0cmli
cyA9IHsNCgkJCQkJCSJhbnRpYWxpYXMiOiAhIXRoaXMubGluZWFyU2FtcGxpbmcsDQoJCQkJCQki
YWxwaGEiOiB0cnVlDQoJCQkJCX07DQoJCQkJCXRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29u
dGV4dCgiMmQiLCBhdHRyaWJzKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJYXR0cmli
cyA9IHsNCgkJCQkJCSJhbHBoYSI6IHRydWUNCgkJCQkJfTsNCgkJCQkJdGhpcy5jdHggPSB0aGlz
LmNhbnZhcy5nZXRDb250ZXh0KCIyZCIsIGF0dHJpYnMpOw0KCQkJCX0NCgkJCQl0aGlzLnNldEN0
eEltYWdlU21vb3RoaW5nRW5hYmxlZCh0aGlzLmN0eCwgdGhpcy5saW5lYXJTYW1wbGluZyk7DQoJ
CQl9DQoJCQl0aGlzLm92ZXJsYXlfY2FudmFzID0gbnVsbDsNCgkJCXRoaXMub3ZlcmxheV9jdHgg
PSBudWxsOw0KCQl9DQoJCXRoaXMudGlja0Z1bmMgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7IHNl
bGYudGljayhmYWxzZSwgdGltZXN0YW1wKTsgfTsNCgkJaWYgKHdpbmRvdyAhPSB3aW5kb3cudG9w
ICYmICF0aGlzLmlzRG9tRnJlZSAmJiAhdGhpcy5pc1dpbkpTICYmICF0aGlzLmlzV2luZG93c1Bo
b25lOCkNCgkJew0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZnVu
Y3Rpb24gKCkgew0KCQkJCXdpbmRvdy5mb2N1cygpOw0KCQkJfSwgdHJ1ZSk7DQoJCQlkb2N1bWVu
dC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24gKCkgew0KCQkJCXdpbmRv
dy5mb2N1cygpOw0KCQkJfSwgdHJ1ZSk7DQoJCX0NCgkJaWYgKHR5cGVvZiBjcl9pc19wcmV2aWV3
ICE9PSAidW5kZWZpbmVkIikNCgkJew0KCQkJaWYgKHRoaXMuaXNDb2Nvb25KcykNCgkJCQljb25z
b2xlLmxvZygiW0NvbnN0cnVjdCAyXSBJbiBwcmV2aWV3LW92ZXItd2lmaSB2aWEgQ29jb29uSlMg
bW9kZSIpOw0KCQkJaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigiY29udGludW91
cyIpID4gLTEpDQoJCQl7DQoJCQkJY3IubG9nZXhwb3J0KCJSZWxvYWRpbmcgZm9yIGNvbnRpbnVv
dXMgcHJldmlldyIpOw0KCQkJCXRoaXMubG9hZEZyb21TbG90ID0gIl9fYzJfY29udGludW91c3By
ZXZpZXciOw0KCQkJCXRoaXMuc3VzcGVuZERyYXdpbmcgPSB0cnVlOw0KCQkJfQ0KCQkJaWYgKHRo
aXMucGF1c2VPbkJsdXIgJiYgIXRoaXMuaXNNb2JpbGUpDQoJCQl7DQoJCQkJalF1ZXJ5KHdpbmRv
dykuZm9jdXMoZnVuY3Rpb24gKCkNCgkJCQl7DQoJCQkJCXNlbGZbInNldFN1c3BlbmRlZCJdKGZh
bHNlKTsNCgkJCQl9KTsNCgkJCQlqUXVlcnkod2luZG93KS5ibHVyKGZ1bmN0aW9uICgpDQoJCQkJ
ew0KCQkJCQl2YXIgcGFyZW50ID0gd2luZG93LnBhcmVudDsNCgkJCQkJaWYgKCFwYXJlbnQgfHwg
IXBhcmVudC5kb2N1bWVudC5oYXNGb2N1cygpKQ0KCQkJCQkJc2VsZlsic2V0U3VzcGVuZGVkIl0o
dHJ1ZSk7DQoJCQkJfSk7DQoJCQl9DQoJCX0NCgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJs
dXIiLCBmdW5jdGlvbiAoKSB7DQoJCQlzZWxmLm9uV2luZG93Qmx1cigpOw0KCQl9KTsNCgkJaWYg
KCF0aGlzLmlzRG9tRnJlZSkNCgkJew0KCQkJdmFyIHVuZm9jdXNGb3JtQ29udHJvbEZ1bmMgPSBm
dW5jdGlvbiAoZSkgew0KCQkJCWlmIChjci5pc0NhbnZhc0lucHV0RXZlbnQoZSkgJiYgZG9jdW1l
bnRbImFjdGl2ZUVsZW1lbnQiXSAmJiBkb2N1bWVudFsiYWN0aXZlRWxlbWVudCJdICE9PSBkb2N1
bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdICYmIGRvY3VtZW50WyJhY3RpdmVF
bGVtZW50Il0uYmx1cikNCgkJCQl7DQoJCQkJCXRyeSB7DQoJCQkJCQlkb2N1bWVudFsiYWN0aXZl
RWxlbWVudCJdLmJsdXIoKTsNCgkJCQkJfQ0KCQkJCQljYXRjaCAoZSkge30NCgkJCQl9DQoJCQl9
DQoJCQlpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0gInVuZGVmaW5lZCIpDQoJCQl7DQoJCQkJ
ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB1bmZvY3VzRm9ybUNvbnRy
b2xGdW5jKTsNCgkJCX0NCgkJCWVsc2UgaWYgKHdpbmRvdy5uYXZpZ2F0b3JbIm1zUG9pbnRlckVu
YWJsZWQiXSkNCgkJCXsNCgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJNU1BvaW50ZXJE
b3duIiwgdW5mb2N1c0Zvcm1Db250cm9sRnVuYyk7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJ
ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIHVuZm9jdXNGb3JtQ29udHJv
bEZ1bmMpOw0KCQkJfQ0KCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwg
dW5mb2N1c0Zvcm1Db250cm9sRnVuYyk7DQoJCX0NCgkJaWYgKHRoaXMuZnVsbHNjcmVlbl9tb2Rl
ID09PSAwICYmIHRoaXMuaXNSZXRpbmEgJiYgdGhpcy5kZXZpY2VQaXhlbFJhdGlvID4gMSkNCgkJ
ew0KCQkJdGhpc1sic2V0U2l6ZSJdKHRoaXMub3JpZ2luYWxfd2lkdGgsIHRoaXMub3JpZ2luYWxf
aGVpZ2h0LCB0cnVlKTsNCgkJfQ0KCQl0aGlzLnRyeUxvY2tPcmllbnRhdGlvbigpOw0KCQl0aGlz
LmdldHJlYWR5KCk7CS8vIGRldGVybWluZSB0aGluZ3MgdG8gcHJlbG9hZA0KCQl0aGlzLmdvKCk7
CQkJLy8gcnVuIGxvYWRpbmcgc2NyZWVuDQoJCXRoaXMuZXh0cmEgPSB7fTsNCgkJY3Iuc2VhbCh0
aGlzKTsNCgl9Ow0KCXZhciB3ZWJraXRSZXBhaW50RmxhZyA9IGZhbHNlOw0KCVJ1bnRpbWUucHJv
dG90eXBlWyJzZXRTaXplIl0gPSBmdW5jdGlvbiAodywgaCwgZm9yY2UpDQoJew0KCQl2YXIgb2Zm
eCA9IDAsIG9mZnkgPSAwOw0KCQl2YXIgbmV3dyA9IDAsIG5ld2ggPSAwLCBpbnRzY2FsZSA9IDA7
DQoJCWlmICh0aGlzLmxhc3RXaW5kb3dXaWR0aCA9PT0gdyAmJiB0aGlzLmxhc3RXaW5kb3dIZWln
aHQgPT09IGggJiYgIWZvcmNlKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLmxhc3RXaW5kb3dXaWR0aCA9
IHc7DQoJCXRoaXMubGFzdFdpbmRvd0hlaWdodCA9IGg7DQoJCXZhciBtb2RlID0gdGhpcy5mdWxs
c2NyZWVuX21vZGU7DQoJCXZhciBvcmlnX2FzcGVjdCwgY3VyX2FzcGVjdDsNCgkJdmFyIGlzZnVs
bHNjcmVlbiA9IChkb2N1bWVudFsibW96RnVsbFNjcmVlbiJdIHx8IGRvY3VtZW50WyJ3ZWJraXRJ
c0Z1bGxTY3JlZW4iXSB8fCAhIWRvY3VtZW50WyJtc0Z1bGxzY3JlZW5FbGVtZW50Il0gfHwgZG9j
dW1lbnRbImZ1bGxTY3JlZW4iXSB8fCB0aGlzLmlzTm9kZUZ1bGxzY3JlZW4pICYmICF0aGlzLmlz
Q29yZG92YTsNCgkJaWYgKCFpc2Z1bGxzY3JlZW4gJiYgdGhpcy5mdWxsc2NyZWVuX21vZGUgPT09
IDAgJiYgIWZvcmNlKQ0KCQkJcmV0dXJuOwkJCS8vIGlnbm9yZSBzaXplIGV2ZW50cyB3aGVuIG5v
dCBmdWxsc2NyZWVuIGFuZCBub3QgdXNpbmcgYSBmdWxsc2NyZWVuLWluLWJyb3dzZXIgbW9kZQ0K
CQlpZiAoaXNmdWxsc2NyZWVuKQ0KCQkJbW9kZSA9IHRoaXMuZnVsbHNjcmVlbl9zY2FsaW5nOw0K
CQl2YXIgZHByID0gdGhpcy5kZXZpY2VQaXhlbFJhdGlvOw0KCQlpZiAobW9kZSA+PSA0KQ0KCQl7
DQoJCQlpZiAobW9kZSA9PT0gNSAmJiBkcHIgIT09IDEpCS8vIGludGVnZXIgc2NhbGluZw0KCQkJ
ew0KCQkJCXcgKz0gMTsNCgkJCQloICs9IDE7DQoJCQl9DQoJCQlvcmlnX2FzcGVjdCA9IHRoaXMu
b3JpZ2luYWxfd2lkdGggLyB0aGlzLm9yaWdpbmFsX2hlaWdodDsNCgkJCWN1cl9hc3BlY3QgPSB3
IC8gaDsNCgkJCWlmIChjdXJfYXNwZWN0ID4gb3JpZ19hc3BlY3QpDQoJCQl7DQoJCQkJbmV3dyA9
IGggKiBvcmlnX2FzcGVjdDsNCgkJCQlpZiAobW9kZSA9PT0gNSkJLy8gaW50ZWdlciBzY2FsaW5n
DQoJCQkJew0KCQkJCQlpbnRzY2FsZSA9IChuZXd3ICogZHByKSAvIHRoaXMub3JpZ2luYWxfd2lk
dGg7DQoJCQkJCWlmIChpbnRzY2FsZSA+IDEpDQoJCQkJCQlpbnRzY2FsZSA9IE1hdGguZmxvb3Io
aW50c2NhbGUpOw0KCQkJCQllbHNlIGlmIChpbnRzY2FsZSA8IDEpDQoJCQkJCQlpbnRzY2FsZSA9
IDEgLyBNYXRoLmNlaWwoMSAvIGludHNjYWxlKTsNCgkJCQkJbmV3dyA9IHRoaXMub3JpZ2luYWxf
d2lkdGggKiBpbnRzY2FsZSAvIGRwcjsNCgkJCQkJbmV3aCA9IHRoaXMub3JpZ2luYWxfaGVpZ2h0
ICogaW50c2NhbGUgLyBkcHI7DQoJCQkJCW9mZnggPSAodyAtIG5ld3cpIC8gMjsNCgkJCQkJb2Zm
eSA9IChoIC0gbmV3aCkgLyAyOw0KCQkJCQl3ID0gbmV3dzsNCgkJCQkJaCA9IG5ld2g7DQoJCQkJ
fQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCW9mZnggPSAodyAtIG5ld3cpIC8gMjsNCgkJCQkJdyA9
IG5ld3c7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCW5ld2ggPSB3IC8gb3JpZ19h
c3BlY3Q7DQoJCQkJaWYgKG1vZGUgPT09IDUpCS8vIGludGVnZXIgc2NhbGluZw0KCQkJCXsNCgkJ
CQkJaW50c2NhbGUgPSAobmV3aCAqIGRwcikgLyB0aGlzLm9yaWdpbmFsX2hlaWdodDsNCgkJCQkJ
aWYgKGludHNjYWxlID4gMSkNCgkJCQkJCWludHNjYWxlID0gTWF0aC5mbG9vcihpbnRzY2FsZSk7
DQoJCQkJCWVsc2UgaWYgKGludHNjYWxlIDwgMSkNCgkJCQkJCWludHNjYWxlID0gMSAvIE1hdGgu
Y2VpbCgxIC8gaW50c2NhbGUpOw0KCQkJCQluZXd3ID0gdGhpcy5vcmlnaW5hbF93aWR0aCAqIGlu
dHNjYWxlIC8gZHByOw0KCQkJCQluZXdoID0gdGhpcy5vcmlnaW5hbF9oZWlnaHQgKiBpbnRzY2Fs
ZSAvIGRwcjsNCgkJCQkJb2ZmeCA9ICh3IC0gbmV3dykgLyAyOw0KCQkJCQlvZmZ5ID0gKGggLSBu
ZXdoKSAvIDI7DQoJCQkJCXcgPSBuZXd3Ow0KCQkJCQloID0gbmV3aDsNCgkJCQl9DQoJCQkJZWxz
ZQ0KCQkJCXsNCgkJCQkJb2ZmeSA9IChoIC0gbmV3aCkgLyAyOw0KCQkJCQloID0gbmV3aDsNCgkJ
CQl9DQoJCQl9DQoJCX0NCgkJZWxzZSBpZiAoaXNmdWxsc2NyZWVuICYmIG1vZGUgPT09IDApDQoJ
CXsNCgkJCW9mZnggPSBNYXRoLmZsb29yKCh3IC0gdGhpcy5vcmlnaW5hbF93aWR0aCkgLyAyKTsN
CgkJCW9mZnkgPSBNYXRoLmZsb29yKChoIC0gdGhpcy5vcmlnaW5hbF9oZWlnaHQpIC8gMik7DQoJ
CQl3ID0gdGhpcy5vcmlnaW5hbF93aWR0aDsNCgkJCWggPSB0aGlzLm9yaWdpbmFsX2hlaWdodDsN
CgkJfQ0KCQlpZiAobW9kZSA8IDIpDQoJCQl0aGlzLmFzcGVjdF9zY2FsZSA9IGRwcjsNCgkJdGhp
cy5jc3NXaWR0aCA9IE1hdGgucm91bmQodyk7DQoJCXRoaXMuY3NzSGVpZ2h0ID0gTWF0aC5yb3Vu
ZChoKTsNCgkJdGhpcy53aWR0aCA9IE1hdGgucm91bmQodyAqIGRwcik7DQoJCXRoaXMuaGVpZ2h0
ID0gTWF0aC5yb3VuZChoICogZHByKTsNCgkJdGhpcy5yZWRyYXcgPSB0cnVlOw0KCQlpZiAodGhp
cy53YW50RnVsbHNjcmVlblNjYWxpbmdRdWFsaXR5KQ0KCQl7DQoJCQl0aGlzLmRyYXdfd2lkdGgg
PSB0aGlzLndpZHRoOw0KCQkJdGhpcy5kcmF3X2hlaWdodCA9IHRoaXMuaGVpZ2h0Ow0KCQkJdGhp
cy5mdWxsc2NyZWVuU2NhbGluZ1F1YWxpdHkgPSB0cnVlOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJ
aWYgKCh0aGlzLndpZHRoIDwgdGhpcy5vcmlnaW5hbF93aWR0aCAmJiB0aGlzLmhlaWdodCA8IHRo
aXMub3JpZ2luYWxfaGVpZ2h0KSB8fCBtb2RlID09PSAxKQ0KCQkJew0KCQkJCXRoaXMuZHJhd193
aWR0aCA9IHRoaXMud2lkdGg7DQoJCQkJdGhpcy5kcmF3X2hlaWdodCA9IHRoaXMuaGVpZ2h0Ow0K
CQkJCXRoaXMuZnVsbHNjcmVlblNjYWxpbmdRdWFsaXR5ID0gdHJ1ZTsNCgkJCX0NCgkJCWVsc2UN
CgkJCXsNCgkJCQl0aGlzLmRyYXdfd2lkdGggPSB0aGlzLm9yaWdpbmFsX3dpZHRoOw0KCQkJCXRo
aXMuZHJhd19oZWlnaHQgPSB0aGlzLm9yaWdpbmFsX2hlaWdodDsNCgkJCQl0aGlzLmZ1bGxzY3Jl
ZW5TY2FsaW5nUXVhbGl0eSA9IGZhbHNlOw0KCQkJCS8qdmFyIG9yaWdfYXNwZWN0ID0gdGhpcy5v
cmlnaW5hbF93aWR0aCAvIHRoaXMub3JpZ2luYWxfaGVpZ2h0Ow0KCQkJCXZhciBjdXJfYXNwZWN0
ID0gdGhpcy53aWR0aCAvIHRoaXMuaGVpZ2h0Ow0KCQkJCWlmICgodGhpcy5mdWxsc2NyZWVuX21v
ZGUgIT09IDIgJiYgY3VyX2FzcGVjdCA+IG9yaWdfYXNwZWN0KSB8fCAodGhpcy5mdWxsc2NyZWVu
X21vZGUgPT09IDIgJiYgY3VyX2FzcGVjdCA8IG9yaWdfYXNwZWN0KSkNCgkJCQkJdGhpcy5hc3Bl
Y3Rfc2NhbGUgPSB0aGlzLmhlaWdodCAvIHRoaXMub3JpZ2luYWxfaGVpZ2h0Ow0KCQkJCWVsc2UN
CgkJCQkJdGhpcy5hc3BlY3Rfc2NhbGUgPSB0aGlzLndpZHRoIC8gdGhpcy5vcmlnaW5hbF93aWR0
aDsqLw0KCQkJCWlmIChtb2RlID09PSAyKQkJLy8gc2NhbGUgaW5uZXINCgkJCQl7DQoJCQkJCW9y
aWdfYXNwZWN0ID0gdGhpcy5vcmlnaW5hbF93aWR0aCAvIHRoaXMub3JpZ2luYWxfaGVpZ2h0Ow0K
CQkJCQljdXJfYXNwZWN0ID0gdGhpcy5sYXN0V2luZG93V2lkdGggLyB0aGlzLmxhc3RXaW5kb3dI
ZWlnaHQ7DQoJCQkJCWlmIChjdXJfYXNwZWN0IDwgb3JpZ19hc3BlY3QpDQoJCQkJCQl0aGlzLmRy
YXdfd2lkdGggPSB0aGlzLmRyYXdfaGVpZ2h0ICogY3VyX2FzcGVjdDsNCgkJCQkJZWxzZSBpZiAo
Y3VyX2FzcGVjdCA+IG9yaWdfYXNwZWN0KQ0KCQkJCQkJdGhpcy5kcmF3X2hlaWdodCA9IHRoaXMu
ZHJhd193aWR0aCAvIGN1cl9hc3BlY3Q7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKG1vZGUgPT09IDMp
DQoJCQkJew0KCQkJCQlvcmlnX2FzcGVjdCA9IHRoaXMub3JpZ2luYWxfd2lkdGggLyB0aGlzLm9y
aWdpbmFsX2hlaWdodDsNCgkJCQkJY3VyX2FzcGVjdCA9IHRoaXMubGFzdFdpbmRvd1dpZHRoIC8g
dGhpcy5sYXN0V2luZG93SGVpZ2h0Ow0KCQkJCQlpZiAoY3VyX2FzcGVjdCA+IG9yaWdfYXNwZWN0
KQ0KCQkJCQkJdGhpcy5kcmF3X3dpZHRoID0gdGhpcy5kcmF3X2hlaWdodCAqIGN1cl9hc3BlY3Q7
DQoJCQkJCWVsc2UgaWYgKGN1cl9hc3BlY3QgPCBvcmlnX2FzcGVjdCkNCgkJCQkJCXRoaXMuZHJh
d19oZWlnaHQgPSB0aGlzLmRyYXdfd2lkdGggLyBjdXJfYXNwZWN0Ow0KCQkJCX0NCgkJCX0NCgkJ
fQ0KCQlpZiAodGhpcy5jYW52YXNkaXYgJiYgIXRoaXMuaXNEb21GcmVlKQ0KCQl7DQoJCQlqUXVl
cnkodGhpcy5jYW52YXNkaXYpLmNzcyh7IndpZHRoIjogTWF0aC5yb3VuZCh3KSArICJweCIsDQoJ
CQkJCQkJCQkJImhlaWdodCI6IE1hdGgucm91bmQoaCkgKyAicHgiLA0KCQkJCQkJCQkJCSJtYXJn
aW4tbGVmdCI6IE1hdGguZmxvb3Iob2ZmeCkgKyAicHgiLA0KCQkJCQkJCQkJCSJtYXJnaW4tdG9w
IjogTWF0aC5mbG9vcihvZmZ5KSArICJweCJ9KTsNCgkJCWlmICh0eXBlb2YgY3JfaXNfcHJldmll
dyAhPT0gInVuZGVmaW5lZCIpDQoJCQl7DQoJCQkJalF1ZXJ5KCIjYm9yZGVyd3JhcCIpLmNzcyh7
IndpZHRoIjogTWF0aC5yb3VuZCh3KSArICJweCIsDQoJCQkJCQkJCQkJCSJoZWlnaHQiOiBNYXRo
LnJvdW5kKGgpICsgInB4In0pOw0KCQkJfQ0KCQl9DQoJCWlmICh0aGlzLmNhbnZhcykNCgkJew0K
CQkJdGhpcy5jYW52YXMud2lkdGggPSBNYXRoLnJvdW5kKHcgKiBkcHIpOw0KCQkJdGhpcy5jYW52
YXMuaGVpZ2h0ID0gTWF0aC5yb3VuZChoICogZHByKTsNCgkJCWlmICh0aGlzLmlzRWplY3RhKQ0K
CQkJew0KCQkJCXRoaXMuY2FudmFzLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKG9mZngpICsgInB4
IjsNCgkJCQl0aGlzLmNhbnZhcy5zdHlsZS50b3AgPSBNYXRoLmZsb29yKG9mZnkpICsgInB4IjsN
CgkJCQl0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IE1hdGgucm91bmQodykgKyAicHgiOw0KCQkJ
CXRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IE1hdGgucm91bmQoaCkgKyAicHgiOw0KCQkJfQ0K
CQkJZWxzZSBpZiAodGhpcy5pc1JldGluYSAmJiAhdGhpcy5pc0RvbUZyZWUpDQoJCQl7DQoJCQkJ
dGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBNYXRoLnJvdW5kKHcpICsgInB4IjsNCgkJCQl0aGlz
LmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBNYXRoLnJvdW5kKGgpICsgInB4IjsNCgkJCX0NCgkJfQ0K
CQlpZiAodGhpcy5vdmVybGF5X2NhbnZhcykNCgkJew0KCQkJdGhpcy5vdmVybGF5X2NhbnZhcy53
aWR0aCA9IE1hdGgucm91bmQodyAqIGRwcik7DQoJCQl0aGlzLm92ZXJsYXlfY2FudmFzLmhlaWdo
dCA9IE1hdGgucm91bmQoaCAqIGRwcik7DQoJCQl0aGlzLm92ZXJsYXlfY2FudmFzLnN0eWxlLndp
ZHRoID0gdGhpcy5jc3NXaWR0aCArICJweCI7DQoJCQl0aGlzLm92ZXJsYXlfY2FudmFzLnN0eWxl
LmhlaWdodCA9IHRoaXMuY3NzSGVpZ2h0ICsgInB4IjsNCgkJfQ0KCQlpZiAodGhpcy5nbHdyYXAp
DQoJCXsNCgkJCXRoaXMuZ2x3cmFwLnNldFNpemUoTWF0aC5yb3VuZCh3ICogZHByKSwgTWF0aC5y
b3VuZChoICogZHByKSk7DQoJCX0NCgkJaWYgKHRoaXMuaXNEaXJlY3RDYW52YXMgJiYgdGhpcy5j
dHgpDQoJCXsNCgkJCXRoaXMuY3R4LndpZHRoID0gTWF0aC5yb3VuZCh3KTsNCgkJCXRoaXMuY3R4
LmhlaWdodCA9IE1hdGgucm91bmQoaCk7DQoJCX0NCgkJaWYgKHRoaXMuY3R4KQ0KCQl7DQoJCQl0
aGlzLnNldEN0eEltYWdlU21vb3RoaW5nRW5hYmxlZCh0aGlzLmN0eCwgdGhpcy5saW5lYXJTYW1w
bGluZyk7DQoJCX0NCgkJdGhpcy50cnlMb2NrT3JpZW50YXRpb24oKTsNCgkJaWYgKHRoaXMuaXNp
UGhvbmUgJiYgIXRoaXMuaXNDb3Jkb3ZhKQ0KCQl7DQoJCQl3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7
DQoJCX0NCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnRyeUxvY2tPcmllbnRhdGlvbiA9IGZ1bmN0
aW9uICgpDQoJew0KCQlpZiAoIXRoaXMuYXV0b0xvY2tPcmllbnRhdGlvbiB8fCB0aGlzLm9yaWVu
dGF0aW9ucyA9PT0gMCkNCgkJCXJldHVybjsNCgkJdmFyIG9yaWVudGF0aW9uID0gInBvcnRyYWl0
IjsNCgkJaWYgKHRoaXMub3JpZW50YXRpb25zID09PSAyKQ0KCQkJb3JpZW50YXRpb24gPSAibGFu
ZHNjYXBlIjsNCgkJdHJ5IHsNCgkJCWlmIChzY3JlZW5bIm9yaWVudGF0aW9uIl0gJiYgc2NyZWVu
WyJvcmllbnRhdGlvbiJdWyJsb2NrIl0pDQoJCQkJc2NyZWVuWyJvcmllbnRhdGlvbiJdWyJsb2Nr
Il0ob3JpZW50YXRpb24pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7DQoJCQllbHNlIGlmIChzY3JlZW5b
ImxvY2tPcmllbnRhdGlvbiJdKQ0KCQkJCXNjcmVlblsibG9ja09yaWVudGF0aW9uIl0ob3JpZW50
YXRpb24pOw0KCQkJZWxzZSBpZiAoc2NyZWVuWyJ3ZWJraXRMb2NrT3JpZW50YXRpb24iXSkNCgkJ
CQlzY3JlZW5bIndlYmtpdExvY2tPcmllbnRhdGlvbiJdKG9yaWVudGF0aW9uKTsNCgkJCWVsc2Ug
aWYgKHNjcmVlblsibW96TG9ja09yaWVudGF0aW9uIl0pDQoJCQkJc2NyZWVuWyJtb3pMb2NrT3Jp
ZW50YXRpb24iXShvcmllbnRhdGlvbik7DQoJCQllbHNlIGlmIChzY3JlZW5bIm1zTG9ja09yaWVu
dGF0aW9uIl0pDQoJCQkJc2NyZWVuWyJtc0xvY2tPcmllbnRhdGlvbiJdKG9yaWVudGF0aW9uKTsN
CgkJfQ0KCQljYXRjaCAoZSkNCgkJew0KCQkJaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKQ0K
CQkJCWNvbnNvbGUud2FybigiRmFpbGVkIHRvIGxvY2sgb3JpZW50YXRpb246ICIsIGUpOw0KCQl9
DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5vbkNvbnRleHRMb3N0ID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXRoaXMuZ2x3cmFwLmNvbnRleHRMb3N0KCk7DQoJCXRoaXMuaXNfV2ViR0xfY29udGV4dF9s
b3N0ID0gdHJ1ZTsNCgkJdmFyIGksIGxlbiwgdDsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50
eXBlc19ieV9pbmRleC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJdCA9IHRoaXMudHlw
ZXNfYnlfaW5kZXhbaV07DQoJCQlpZiAodC5vbkxvc3RXZWJHTENvbnRleHQpDQoJCQkJdC5vbkxv
c3RXZWJHTENvbnRleHQoKTsNCgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUub25Db250ZXh0
UmVzdG9yZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5pc19XZWJHTF9jb250ZXh0X2xvc3Qg
PSBmYWxzZTsNCgkJdmFyIGksIGxlbiwgdDsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50eXBl
c19ieV9pbmRleC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJdCA9IHRoaXMudHlwZXNf
YnlfaW5kZXhbaV07DQoJCQlpZiAodC5vblJlc3RvcmVXZWJHTENvbnRleHQpDQoJCQkJdC5vblJl
c3RvcmVXZWJHTENvbnRleHQoKTsNCgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUucG9zaXRp
b25PdmVybGF5Q2FudmFzID0gZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKHRoaXMuaXNEb21GcmVlKQ0K
CQkJcmV0dXJuOw0KCQl2YXIgaXNmdWxsc2NyZWVuID0gKGRvY3VtZW50WyJtb3pGdWxsU2NyZWVu
Il0gfHwgZG9jdW1lbnRbIndlYmtpdElzRnVsbFNjcmVlbiJdIHx8IGRvY3VtZW50WyJmdWxsU2Ny
ZWVuIl0gfHwgISFkb2N1bWVudFsibXNGdWxsc2NyZWVuRWxlbWVudCJdIHx8IHRoaXMuaXNOb2Rl
RnVsbHNjcmVlbikgJiYgIXRoaXMuaXNDb3Jkb3ZhOw0KCQl2YXIgb3ZlcmxheV9wb3NpdGlvbiA9
IGlzZnVsbHNjcmVlbiA/IGpRdWVyeSh0aGlzLmNhbnZhcykub2Zmc2V0KCkgOiBqUXVlcnkodGhp
cy5jYW52YXMpLnBvc2l0aW9uKCk7DQoJCW92ZXJsYXlfcG9zaXRpb24ucG9zaXRpb24gPSAiYWJz
b2x1dGUiOw0KCQlqUXVlcnkodGhpcy5vdmVybGF5X2NhbnZhcykuY3NzKG92ZXJsYXlfcG9zaXRp
b24pOw0KCX07DQoJdmFyIGNhZiA9IHdpbmRvd1siY2FuY2VsQW5pbWF0aW9uRnJhbWUiXSB8fA0K
CSAgd2luZG93WyJtb3pDYW5jZWxBbmltYXRpb25GcmFtZSJdICAgIHx8DQoJICB3aW5kb3dbIndl
YmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIl0gfHwNCgkgIHdpbmRvd1sibXNDYW5jZWxBbmltYXRp
b25GcmFtZSJdICAgICB8fA0KCSAgd2luZG93WyJvQ2FuY2VsQW5pbWF0aW9uRnJhbWUiXTsNCglS
dW50aW1lLnByb3RvdHlwZVsic2V0U3VzcGVuZGVkIl0gPSBmdW5jdGlvbiAocykNCgl7DQoJCXZh
ciBpLCBsZW47DQoJCXZhciBzZWxmID0gdGhpczsNCgkJaWYgKHMgJiYgIXRoaXMuaXNTdXNwZW5k
ZWQpDQoJCXsNCgkJCWNyLmxvZ2V4cG9ydCgiW0NvbnN0cnVjdCAyXSBTdXNwZW5kaW5nIik7DQoJ
CQl0aGlzLmlzU3VzcGVuZGVkID0gdHJ1ZTsJCQkvLyBuZXh0IHRpY2sgd2lsbCBiZSBsYXN0DQoJ
CQlpZiAodGhpcy5yYWZfaWQgIT09IC0xICYmIGNhZikJCS8vIG5vdGU6IENvY29vbkpTIGRvZXMg
bm90IGltcGxlbWVudCBjYW5jZWxBbmltYXRpb25GcmFtZQ0KCQkJCWNhZih0aGlzLnJhZl9pZCk7
DQoJCQlpZiAodGhpcy50aW1lb3V0X2lkICE9PSAtMSkNCgkJCQljbGVhclRpbWVvdXQodGhpcy50
aW1lb3V0X2lkKTsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuc3VzcGVuZF9ldmVudHMubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJdGhpcy5zdXNwZW5kX2V2ZW50c1tpXSh0cnVlKTsNCgkJ
fQ0KCQllbHNlIGlmICghcyAmJiB0aGlzLmlzU3VzcGVuZGVkKQ0KCQl7DQoJCQljci5sb2dleHBv
cnQoIltDb25zdHJ1Y3QgMl0gUmVzdW1pbmciKTsNCgkJCXRoaXMuaXNTdXNwZW5kZWQgPSBmYWxz
ZTsNCgkJCXRoaXMubGFzdF90aWNrX3RpbWUgPSBjci5wZXJmb3JtYW5jZV9ub3coKTsJLy8gZW5z
dXJlIGZpcnN0IHRpY2sgaXMgYSB6ZXJvLWR0IG9uZQ0KCQkJdGhpcy5sYXN0X2Zwc190aW1lID0g
Y3IucGVyZm9ybWFuY2Vfbm93KCk7CS8vIHJlc2V0IEZQUyBjb3VudGVyDQoJCQl0aGlzLmZyYW1l
Y291bnQgPSAwOw0KCQkJdGhpcy5sb2dpY3RpbWUgPSAwOw0KCQkJZm9yIChpID0gMCwgbGVuID0g
dGhpcy5zdXNwZW5kX2V2ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQl0aGlzLnN1c3Bl
bmRfZXZlbnRzW2ldKGZhbHNlKTsNCgkJCXRoaXMudGljayhmYWxzZSk7CQkJCQkJLy8ga2ljayBv
ZmYgcnVudGltZSBhZ2Fpbg0KCQl9DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5hZGRTdXNwZW5k
Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZikNCgl7DQoJCXRoaXMuc3VzcGVuZF9ldmVudHMucHVzaChm
KTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLkdldE9iamVjdFJlZmVyZW5jZSA9IGZ1bmN0aW9u
IChpKQ0KCXsNCjsNCgkJcmV0dXJuIHRoaXMub2JqZWN0UmVmVGFibGVbaV07DQoJfTsNCglSdW50
aW1lLnByb3RvdHlwZS5sb2FkUHJvamVjdCA9IGZ1bmN0aW9uIChkYXRhX3Jlc3BvbnNlKQ0KCXsN
CjsNCgkJaWYgKCFkYXRhX3Jlc3BvbnNlIHx8ICFkYXRhX3Jlc3BvbnNlWyJwcm9qZWN0Il0pDQoJ
CQljci5sb2dlcnJvcigiUHJvamVjdCBtb2RlbCB1bmF2YWlsYWJsZSIpOw0KCQl2YXIgcG0gPSBk
YXRhX3Jlc3BvbnNlWyJwcm9qZWN0Il07DQoJCXRoaXMubmFtZSA9IHBtWzBdOw0KCQl0aGlzLmZp
cnN0X2xheW91dCA9IHBtWzFdOw0KCQl0aGlzLmZ1bGxzY3JlZW5fbW9kZSA9IHBtWzEyXTsJLy8g
MCA9IG9mZiwgMSA9IGNyb3AsIDIgPSBzY2FsZSBpbm5lciwgMyA9IHNjYWxlIG91dGVyLCA0ID0g
bGV0dGVyYm94IHNjYWxlLCA1ID0gaW50ZWdlciBsZXR0ZXJib3ggc2NhbGUNCgkJdGhpcy5mdWxs
c2NyZWVuX21vZGVfc2V0ID0gcG1bMTJdOw0KCQl0aGlzLm9yaWdpbmFsX3dpZHRoID0gcG1bMTBd
Ow0KCQl0aGlzLm9yaWdpbmFsX2hlaWdodCA9IHBtWzExXTsNCgkJdGhpcy5wYXJhbGxheF94X29y
aWdpbiA9IHRoaXMub3JpZ2luYWxfd2lkdGggLyAyOw0KCQl0aGlzLnBhcmFsbGF4X3lfb3JpZ2lu
ID0gdGhpcy5vcmlnaW5hbF9oZWlnaHQgLyAyOw0KCQlpZiAodGhpcy5pc0RvbUZyZWUgJiYgIXRo
aXMuaXNFamVjdGEgJiYgKHBtWzEyXSA+PSA0IHx8IHBtWzEyXSA9PT0gMCkpDQoJCXsNCgkJCWNy
LmxvZ2V4cG9ydCgiW0NvbnN0cnVjdCAyXSBMZXR0ZXJib3ggc2NhbGUgZnVsbHNjcmVlbiBtb2Rl
cyBhcmUgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtIC0gZmFsbGluZyBiYWNrIHRvICdT
Y2FsZSBvdXRlciciKTsNCgkJCXRoaXMuZnVsbHNjcmVlbl9tb2RlID0gMzsNCgkJCXRoaXMuZnVs
bHNjcmVlbl9tb2RlX3NldCA9IDM7DQoJCX0NCgkJdGhpcy51c2VzX2xvYWRlcl9sYXlvdXQgPSBw
bVsxOF07DQoJCXRoaXMubG9hZGVyc3R5bGUgPSBwbVsxOV07DQoJCWlmICh0aGlzLmxvYWRlcnN0
eWxlID09PSAwKQ0KCQl7DQoJCQl2YXIgbG9hZGVySW1hZ2UgPSBuZXcgSW1hZ2UoKTsNCgkJCWxv
YWRlckltYWdlLmNyb3NzT3JpZ2luID0gImFub255bW91cyI7DQoJCQl0aGlzLnNldEltYWdlU3Jj
KGxvYWRlckltYWdlLCAibG9hZGluZy1sb2dvLnBuZyIpOw0KCQkJdGhpcy5sb2FkZXJsb2dvcyA9
IHsNCgkJCQlsb2dvOiBsb2FkZXJJbWFnZQ0KCQkJfTsNCgkJfQ0KCQllbHNlIGlmICh0aGlzLmxv
YWRlcnN0eWxlID09PSA0KQkvLyBjMiBzcGxhc2gNCgkJew0KCQkJdmFyIGxvYWRlckMybG9nb18x
MDI0ID0gbmV3IEltYWdlKCk7DQoJCQlsb2FkZXJDMmxvZ29fMTAyNC5zcmMgPSAiIjsNCgkJCXZh
ciBsb2FkZXJDMmxvZ29fNTEyID0gbmV3IEltYWdlKCk7DQoJCQlsb2FkZXJDMmxvZ29fNTEyLnNy
YyA9ICIiOw0KCQkJdmFyIGxvYWRlckMybG9nb18yNTYgPSBuZXcgSW1hZ2UoKTsNCgkJCWxvYWRl
ckMybG9nb18yNTYuc3JjID0gIiI7DQoJCQl2YXIgbG9hZGVyQzJsb2dvXzEyOCA9IG5ldyBJbWFn
ZSgpOw0KCQkJbG9hZGVyQzJsb2dvXzEyOC5zcmMgPSAiIjsNCgkJCXZhciBsb2FkZXJQb3dlcmVk
XzEwMjQgPSBuZXcgSW1hZ2UoKTsNCgkJCWxvYWRlclBvd2VyZWRfMTAyNC5zcmMgPSAiIjsNCgkJ
CXZhciBsb2FkZXJQb3dlcmVkXzUxMiA9IG5ldyBJbWFnZSgpOw0KCQkJbG9hZGVyUG93ZXJlZF81
MTIuc3JjID0gIiI7DQoJCQl2YXIgbG9hZGVyUG93ZXJlZF8yNTYgPSBuZXcgSW1hZ2UoKTsNCgkJ
CWxvYWRlclBvd2VyZWRfMjU2LnNyYyA9ICIiOw0KCQkJdmFyIGxvYWRlclBvd2VyZWRfMTI4ID0g
bmV3IEltYWdlKCk7DQoJCQlsb2FkZXJQb3dlcmVkXzEyOC5zcmMgPSAiIjsNCgkJCXZhciBsb2Fk
ZXJXZWJzaXRlXzEwMjQgPSBuZXcgSW1hZ2UoKTsNCgkJCWxvYWRlcldlYnNpdGVfMTAyNC5zcmMg
PSAiIjsNCgkJCXZhciBsb2FkZXJXZWJzaXRlXzUxMiA9IG5ldyBJbWFnZSgpOw0KCQkJbG9hZGVy
V2Vic2l0ZV81MTIuc3JjID0gIiI7DQoJCQl2YXIgbG9hZGVyV2Vic2l0ZV8yNTYgPSBuZXcgSW1h
Z2UoKTsNCgkJCWxvYWRlcldlYnNpdGVfMjU2LnNyYyA9ICIiOw0KCQkJdmFyIGxvYWRlcldlYnNp
dGVfMTI4ID0gbmV3IEltYWdlKCk7DQoJCQlsb2FkZXJXZWJzaXRlXzEyOC5zcmMgPSAiIjsNCgkJ
CXRoaXMubG9hZGVybG9nb3MgPSB7DQoJCQkJbG9nbzogW2xvYWRlckMybG9nb18xMDI0LCBsb2Fk
ZXJDMmxvZ29fNTEyLCBsb2FkZXJDMmxvZ29fMjU2LCBsb2FkZXJDMmxvZ29fMTI4XSwNCgkJCQlw
b3dlcmVkOiBbbG9hZGVyUG93ZXJlZF8xMDI0LCBsb2FkZXJQb3dlcmVkXzUxMiwgbG9hZGVyUG93
ZXJlZF8yNTYsIGxvYWRlclBvd2VyZWRfMTI4XSwNCgkJCQl3ZWJzaXRlOiBbbG9hZGVyV2Vic2l0
ZV8xMDI0LCBsb2FkZXJXZWJzaXRlXzUxMiwgbG9hZGVyV2Vic2l0ZV8yNTYsIGxvYWRlcldlYnNp
dGVfMTI4XQ0KCQkJfTsNCgkJfQ0KCQl0aGlzLm5leHRfdWlkID0gcG1bMjFdOw0KCQl0aGlzLm9i
amVjdFJlZlRhYmxlID0gY3IuZ2V0T2JqZWN0UmVmVGFibGUoKTsNCgkJdGhpcy5zeXN0ZW0gPSBu
ZXcgY3Iuc3lzdGVtX29iamVjdCh0aGlzKTsNCgkJdmFyIGksIGxlbiwgaiwgbGVuaiwgaywgbGVu
aywgaWRzdHIsIG0sIGIsIHQsIGYsIHA7DQoJCXZhciBwbHVnaW4sIHBsdWdpbl9jdG9yOw0KCQlm
b3IgKGkgPSAwLCBsZW4gPSBwbVsyXS5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJbSA9
IHBtWzJdW2ldOw0KCQkJcCA9IHRoaXMuR2V0T2JqZWN0UmVmZXJlbmNlKG1bMF0pOw0KOw0KCQkJ
Y3IuYWRkX2NvbW1vbl9hY2VzKG0sIHAucHJvdG90eXBlKTsNCgkJCXBsdWdpbiA9IG5ldyBwKHRo
aXMpOw0KCQkJcGx1Z2luLnNpbmdsZWdsb2JhbCA9IG1bMV07DQoJCQlwbHVnaW4uaXNfd29ybGQg
PSBtWzJdOw0KCQkJcGx1Z2luLmlzX3JvdGF0YWJsZSA9IG1bNV07DQoJCQlwbHVnaW4ubXVzdF9w
cmVkcmF3ID0gbVs5XTsNCgkJCWlmIChwbHVnaW4ub25DcmVhdGUpDQoJCQkJcGx1Z2luLm9uQ3Jl
YXRlKCk7ICAvLyBvcHBvcnR1bml0eSB0byBvdmVycmlkZSBkZWZhdWx0IEFDRXMNCgkJCWNyLnNl
YWwocGx1Z2luKTsNCgkJCXRoaXMucGx1Z2lucy5wdXNoKHBsdWdpbik7DQoJCX0NCgkJdGhpcy5v
YmplY3RSZWZUYWJsZSA9IGNyLmdldE9iamVjdFJlZlRhYmxlKCk7DQoJCWZvciAoaSA9IDAsIGxl
biA9IHBtWzNdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQltID0gcG1bM11baV07DQoJ
CQlwbHVnaW5fY3RvciA9IHRoaXMuR2V0T2JqZWN0UmVmZXJlbmNlKG1bMV0pOw0KOw0KCQkJcGx1
Z2luID0gbnVsbDsNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0aGlzLnBsdWdpbnMubGVuZ3RoOyBq
IDwgbGVuajsgaisrKQ0KCQkJew0KCQkJCWlmICh0aGlzLnBsdWdpbnNbal0gaW5zdGFuY2VvZiBw
bHVnaW5fY3RvcikNCgkJCQl7DQoJCQkJCXBsdWdpbiA9IHRoaXMucGx1Z2luc1tqXTsNCgkJCQkJ
YnJlYWs7DQoJCQkJfQ0KCQkJfQ0KOw0KOw0KCQkJdmFyIHR5cGVfaW5zdCA9IG5ldyBwbHVnaW4u
VHlwZShwbHVnaW4pOw0KOw0KCQkJdHlwZV9pbnN0Lm5hbWUgPSBtWzBdOw0KCQkJdHlwZV9pbnN0
LmlzX2ZhbWlseSA9IG1bMl07DQoJCQl0eXBlX2luc3QuaW5zdHZhcl9zaWRzID0gbVszXS5zbGlj
ZSgwKTsNCgkJCXR5cGVfaW5zdC52YXJzX2NvdW50ID0gbVszXS5sZW5ndGg7DQoJCQl0eXBlX2lu
c3QuYmVoc19jb3VudCA9IG1bNF07DQoJCQl0eXBlX2luc3QuZnhfY291bnQgPSBtWzVdOw0KCQkJ
dHlwZV9pbnN0LnNpZCA9IG1bMTFdOw0KCQkJaWYgKHR5cGVfaW5zdC5pc19mYW1pbHkpDQoJCQl7
DQoJCQkJdHlwZV9pbnN0Lm1lbWJlcnMgPSBbXTsJCQkJLy8gdHlwZXMgaW4gdGhpcyBmYW1pbHkN
CgkJCQl0eXBlX2luc3QuZmFtaWx5X2luZGV4ID0gdGhpcy5mYW1pbHlfY291bnQrKzsNCgkJCQl0
eXBlX2luc3QuZmFtaWxpZXMgPSBudWxsOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXR5cGVf
aW5zdC5tZW1iZXJzID0gbnVsbDsNCgkJCQl0eXBlX2luc3QuZmFtaWx5X2luZGV4ID0gLTE7DQoJ
CQkJdHlwZV9pbnN0LmZhbWlsaWVzID0gW107CQkJLy8gZmFtaWxpZXMgdGhpcyB0eXBlIGJlbG9u
Z3MgdG8NCgkJCX0NCgkJCXR5cGVfaW5zdC5mYW1pbHlfdmFyX21hcCA9IG51bGw7DQoJCQl0eXBl
X2luc3QuZmFtaWx5X2JlaF9tYXAgPSBudWxsOw0KCQkJdHlwZV9pbnN0LmZhbWlseV9meF9tYXAg
PSBudWxsOw0KCQkJdHlwZV9pbnN0LmlzX2NvbnRhaW5lZCA9IGZhbHNlOw0KCQkJdHlwZV9pbnN0
LmNvbnRhaW5lciA9IG51bGw7DQoJCQlpZiAobVs2XSkNCgkJCXsNCgkJCQl0eXBlX2luc3QudGV4
dHVyZV9maWxlID0gbVs2XVswXTsNCgkJCQl0eXBlX2luc3QudGV4dHVyZV9maWxlc2l6ZSA9IG1b
Nl1bMV07DQoJCQkJdHlwZV9pbnN0LnRleHR1cmVfcGl4ZWxmb3JtYXQgPSBtWzZdWzJdOw0KCQkJ
fQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXR5cGVfaW5zdC50ZXh0dXJlX2ZpbGUgPSBudWxsOw0KCQkJ
CXR5cGVfaW5zdC50ZXh0dXJlX2ZpbGVzaXplID0gMDsNCgkJCQl0eXBlX2luc3QudGV4dHVyZV9w
aXhlbGZvcm1hdCA9IDA7CQkvLyByZ2JhOA0KCQkJfQ0KCQkJaWYgKG1bN10pDQoJCQl7DQoJCQkJ
dHlwZV9pbnN0LmFuaW1hdGlvbnMgPSBtWzddOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXR5
cGVfaW5zdC5hbmltYXRpb25zID0gbnVsbDsNCgkJCX0NCgkJCXR5cGVfaW5zdC5pbmRleCA9IGk7
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIGluZGV4IGluIHRvIHR5cGVz
IGFycmF5IGluIHR5cGUNCgkJCXR5cGVfaW5zdC5pbnN0YW5jZXMgPSBbXTsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAvLyBhbGwgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZQ0KCQkJdHlwZV9pbnN0
LmRlYWRDYWNoZSA9IFtdOwkJCQkJCQkvLyBkZXN0cm95ZWQgaW5zdGFuY2VzIHRvIHJlY3ljbGUg
bmV4dCBjcmVhdGUNCgkJCXR5cGVfaW5zdC5zb2xzdGFjayA9IFtuZXcgY3Iuc2VsZWN0aW9uKHR5
cGVfaW5zdCldOyAvLyBpbml0aWFsaXNlIFNPTCBzdGFjayB3aXRoIG9uZSBlbXB0eSBTT0wNCgkJ
CXR5cGVfaW5zdC5jdXJfc29sID0gMDsNCgkJCXR5cGVfaW5zdC5kZWZhdWx0X2luc3RhbmNlID0g
bnVsbDsNCgkJCXR5cGVfaW5zdC5kZWZhdWx0X2xheWVyaW5kZXggPSAwOw0KCQkJdHlwZV9pbnN0
LnN0YWxlX2lpZHMgPSB0cnVlOw0KCQkJdHlwZV9pbnN0LnVwZGF0ZUlJRHMgPSBjci50eXBlX3Vw
ZGF0ZUlJRHM7DQoJCQl0eXBlX2luc3QuZ2V0Rmlyc3RQaWNrZWQgPSBjci50eXBlX2dldEZpcnN0
UGlja2VkOw0KCQkJdHlwZV9pbnN0LmdldFBhaXJlZEluc3RhbmNlID0gY3IudHlwZV9nZXRQYWly
ZWRJbnN0YW5jZTsNCgkJCXR5cGVfaW5zdC5nZXRDdXJyZW50U29sID0gY3IudHlwZV9nZXRDdXJy
ZW50U29sOw0KCQkJdHlwZV9pbnN0LnB1c2hDbGVhblNvbCA9IGNyLnR5cGVfcHVzaENsZWFuU29s
Ow0KCQkJdHlwZV9pbnN0LnB1c2hDb3B5U29sID0gY3IudHlwZV9wdXNoQ29weVNvbDsNCgkJCXR5
cGVfaW5zdC5wb3BTb2wgPSBjci50eXBlX3BvcFNvbDsNCgkJCXR5cGVfaW5zdC5nZXRCZWhhdmlv
ckJ5TmFtZSA9IGNyLnR5cGVfZ2V0QmVoYXZpb3JCeU5hbWU7DQoJCQl0eXBlX2luc3QuZ2V0QmVo
YXZpb3JJbmRleEJ5TmFtZSA9IGNyLnR5cGVfZ2V0QmVoYXZpb3JJbmRleEJ5TmFtZTsNCgkJCXR5
cGVfaW5zdC5nZXRFZmZlY3RJbmRleEJ5TmFtZSA9IGNyLnR5cGVfZ2V0RWZmZWN0SW5kZXhCeU5h
bWU7DQoJCQl0eXBlX2luc3QuYXBwbHlTb2xUb0NvbnRhaW5lciA9IGNyLnR5cGVfYXBwbHlTb2xU
b0NvbnRhaW5lcjsNCgkJCXR5cGVfaW5zdC5nZXRJbnN0YW5jZUJ5SUlEID0gY3IudHlwZV9nZXRJ
bnN0YW5jZUJ5SUlEOw0KCQkJdHlwZV9pbnN0LmNvbGxpc2lvbl9ncmlkID0gbmV3IGNyLlNwYXJz
ZUdyaWQodGhpcy5vcmlnaW5hbF93aWR0aCwgdGhpcy5vcmlnaW5hbF9oZWlnaHQpOw0KCQkJdHlw
ZV9pbnN0LmFueV9jZWxsX2NoYW5nZWQgPSB0cnVlOw0KCQkJdHlwZV9pbnN0LmFueV9pbnN0YW5j
ZV9wYXJhbGxheGVkID0gZmFsc2U7DQoJCQl0eXBlX2luc3QuZXh0cmEgPSB7fTsNCgkJCXR5cGVf
aW5zdC50b1N0cmluZyA9IGNyLnR5cGVfdG9TdHJpbmc7DQoJCQl0eXBlX2luc3QuYmVoYXZpb3Jz
ID0gW107DQoJCQlmb3IgKGogPSAwLCBsZW5qID0gbVs4XS5sZW5ndGg7IGogPCBsZW5qOyBqKysp
DQoJCQl7DQoJCQkJYiA9IG1bOF1bal07DQoJCQkJdmFyIGJlaGF2aW9yX2N0b3IgPSB0aGlzLkdl
dE9iamVjdFJlZmVyZW5jZShiWzFdKTsNCgkJCQl2YXIgYmVoYXZpb3JfcGx1Z2luID0gbnVsbDsN
CgkJCQlmb3IgKGsgPSAwLCBsZW5rID0gdGhpcy5iZWhhdmlvcnMubGVuZ3RoOyBrIDwgbGVuazsg
aysrKQ0KCQkJCXsNCgkJCQkJaWYgKHRoaXMuYmVoYXZpb3JzW2tdIGluc3RhbmNlb2YgYmVoYXZp
b3JfY3RvcikNCgkJCQkJew0KCQkJCQkJYmVoYXZpb3JfcGx1Z2luID0gdGhpcy5iZWhhdmlvcnNb
a107DQoJCQkJCQlicmVhazsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlpZiAoIWJlaGF2aW9yX3BsdWdp
bikNCgkJCQl7DQoJCQkJCWJlaGF2aW9yX3BsdWdpbiA9IG5ldyBiZWhhdmlvcl9jdG9yKHRoaXMp
Ow0KCQkJCQliZWhhdmlvcl9wbHVnaW4ubXlfdHlwZXMgPSBbXTsJCQkJCQkvLyB0eXBlcyB1c2lu
ZyB0aGlzIGJlaGF2aW9yDQoJCQkJCWJlaGF2aW9yX3BsdWdpbi5teV9pbnN0YW5jZXMgPSBuZXcg
Y3IuT2JqZWN0U2V0KCk7IAkvLyBpbnN0YW5jZXMgb2YgdGhpcyBiZWhhdmlvcg0KCQkJCQlpZiAo
YmVoYXZpb3JfcGx1Z2luLm9uQ3JlYXRlKQ0KCQkJCQkJYmVoYXZpb3JfcGx1Z2luLm9uQ3JlYXRl
KCk7DQoJCQkJCWNyLnNlYWwoYmVoYXZpb3JfcGx1Z2luKTsNCgkJCQkJdGhpcy5iZWhhdmlvcnMu
cHVzaChiZWhhdmlvcl9wbHVnaW4pOw0KCQkJCQlpZiAoY3IuYmVoYXZpb3JzLnNvbGlkICYmIGJl
aGF2aW9yX3BsdWdpbiBpbnN0YW5jZW9mIGNyLmJlaGF2aW9ycy5zb2xpZCkNCgkJCQkJCXRoaXMu
c29saWRCZWhhdmlvciA9IGJlaGF2aW9yX3BsdWdpbjsNCgkJCQkJaWYgKGNyLmJlaGF2aW9ycy5q
dW1wdGhydSAmJiBiZWhhdmlvcl9wbHVnaW4gaW5zdGFuY2VvZiBjci5iZWhhdmlvcnMuanVtcHRo
cnUpDQoJCQkJCQl0aGlzLmp1bXB0aHJ1QmVoYXZpb3IgPSBiZWhhdmlvcl9wbHVnaW47DQoJCQkJ
CWlmIChjci5iZWhhdmlvcnMuc2hhZG93Y2FzdGVyICYmIGJlaGF2aW9yX3BsdWdpbiBpbnN0YW5j
ZW9mIGNyLmJlaGF2aW9ycy5zaGFkb3djYXN0ZXIpDQoJCQkJCQl0aGlzLnNoYWRvd2Nhc3RlckJl
aGF2aW9yID0gYmVoYXZpb3JfcGx1Z2luOw0KCQkJCX0NCgkJCQlpZiAoYmVoYXZpb3JfcGx1Z2lu
Lm15X3R5cGVzLmluZGV4T2YodHlwZV9pbnN0KSA9PT0gLTEpDQoJCQkJCWJlaGF2aW9yX3BsdWdp
bi5teV90eXBlcy5wdXNoKHR5cGVfaW5zdCk7DQoJCQkJdmFyIGJlaGF2aW9yX3R5cGUgPSBuZXcg
YmVoYXZpb3JfcGx1Z2luLlR5cGUoYmVoYXZpb3JfcGx1Z2luLCB0eXBlX2luc3QpOw0KCQkJCWJl
aGF2aW9yX3R5cGUubmFtZSA9IGJbMF07DQoJCQkJYmVoYXZpb3JfdHlwZS5zaWQgPSBiWzJdOw0K
CQkJCWJlaGF2aW9yX3R5cGUub25DcmVhdGUoKTsNCgkJCQljci5zZWFsKGJlaGF2aW9yX3R5cGUp
Ow0KCQkJCXR5cGVfaW5zdC5iZWhhdmlvcnMucHVzaChiZWhhdmlvcl90eXBlKTsNCgkJCX0NCgkJ
CXR5cGVfaW5zdC5nbG9iYWwgPSBtWzldOw0KCQkJdHlwZV9pbnN0LmlzT25Mb2FkZXJMYXlvdXQg
PSBtWzEwXTsNCgkJCXR5cGVfaW5zdC5lZmZlY3RfdHlwZXMgPSBbXTsNCgkJCWZvciAoaiA9IDAs
IGxlbmogPSBtWzEyXS5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJdHlwZV9pbnN0
LmVmZmVjdF90eXBlcy5wdXNoKHsNCgkJCQkJaWQ6IG1bMTJdW2pdWzBdLA0KCQkJCQluYW1lOiBt
WzEyXVtqXVsxXSwNCgkJCQkJc2hhZGVyaW5kZXg6IC0xLA0KCQkJCQlwcmVzZXJ2ZXNPcGFxdWVu
ZXNzOiBmYWxzZSwNCgkJCQkJYWN0aXZlOiB0cnVlLA0KCQkJCQlpbmRleDogag0KCQkJCX0pOw0K
CQkJfQ0KCQkJdHlwZV9pbnN0LnRpbGVfcG9seV9kYXRhID0gbVsxM107DQoJCQlpZiAoIXRoaXMu
dXNlc19sb2FkZXJfbGF5b3V0IHx8IHR5cGVfaW5zdC5pc19mYW1pbHkgfHwgdHlwZV9pbnN0Lmlz
T25Mb2FkZXJMYXlvdXQgfHwgIXBsdWdpbi5pc193b3JsZCkNCgkJCXsNCgkJCQl0eXBlX2luc3Qu
b25DcmVhdGUoKTsNCgkJCQljci5zZWFsKHR5cGVfaW5zdCk7DQoJCQl9DQoJCQlpZiAodHlwZV9p
bnN0Lm5hbWUpDQoJCQkJdGhpcy50eXBlc1t0eXBlX2luc3QubmFtZV0gPSB0eXBlX2luc3Q7DQoJ
CQl0aGlzLnR5cGVzX2J5X2luZGV4LnB1c2godHlwZV9pbnN0KTsNCgkJCWlmIChwbHVnaW4uc2lu
Z2xlZ2xvYmFsKQ0KCQkJew0KCQkJCXZhciBpbnN0YW5jZSA9IG5ldyBwbHVnaW4uSW5zdGFuY2Uo
dHlwZV9pbnN0KTsNCgkJCQlpbnN0YW5jZS51aWQgPSB0aGlzLm5leHRfdWlkKys7DQoJCQkJaW5z
dGFuY2UucHVpZCA9IHRoaXMubmV4dF9wdWlkKys7DQoJCQkJaW5zdGFuY2UuaWlkID0gMDsNCgkJ
CQlpbnN0YW5jZS5nZXRfaWlkID0gY3IuaW5zdF9nZXRfaWlkOw0KCQkJCWluc3RhbmNlLnRvU3Ry
aW5nID0gY3IuaW5zdF90b1N0cmluZzsNCgkJCQlpbnN0YW5jZS5wcm9wZXJ0aWVzID0gbVsxNF07
DQoJCQkJaW5zdGFuY2Uub25DcmVhdGUoKTsNCgkJCQljci5zZWFsKGluc3RhbmNlKTsNCgkJCQl0
eXBlX2luc3QuaW5zdGFuY2VzLnB1c2goaW5zdGFuY2UpOw0KCQkJCXRoaXMub2JqZWN0c0J5VWlk
W2luc3RhbmNlLnVpZC50b1N0cmluZygpXSA9IGluc3RhbmNlOw0KCQkJfQ0KCQl9DQoJCWZvciAo
aSA9IDAsIGxlbiA9IHBtWzRdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIgZmFt
aWx5ZGF0YSA9IHBtWzRdW2ldOw0KCQkJdmFyIGZhbWlseXR5cGUgPSB0aGlzLnR5cGVzX2J5X2lu
ZGV4W2ZhbWlseWRhdGFbMF1dOw0KCQkJdmFyIGZhbWlseW1lbWJlcjsNCgkJCWZvciAoaiA9IDEs
IGxlbmogPSBmYW1pbHlkYXRhLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCXsNCgkJCQlmYW1p
bHltZW1iZXIgPSB0aGlzLnR5cGVzX2J5X2luZGV4W2ZhbWlseWRhdGFbal1dOw0KCQkJCWZhbWls
eW1lbWJlci5mYW1pbGllcy5wdXNoKGZhbWlseXR5cGUpOw0KCQkJCWZhbWlseXR5cGUubWVtYmVy
cy5wdXNoKGZhbWlseW1lbWJlcik7DQoJCQl9DQoJCX0NCgkJZm9yIChpID0gMCwgbGVuID0gcG1b
MjhdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIgY29udGFpbmVyZGF0YSA9IHBt
WzI4XVtpXTsNCgkJCXZhciBjb250YWluZXJ0eXBlcyA9IFtdOw0KCQkJZm9yIChqID0gMCwgbGVu
aiA9IGNvbnRhaW5lcmRhdGEubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCWNvbnRhaW5lcnR5
cGVzLnB1c2godGhpcy50eXBlc19ieV9pbmRleFtjb250YWluZXJkYXRhW2pdXSk7DQoJCQlmb3Ig
KGogPSAwLCBsZW5qID0gY29udGFpbmVydHlwZXMubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJ
ew0KCQkJCWNvbnRhaW5lcnR5cGVzW2pdLmlzX2NvbnRhaW5lZCA9IHRydWU7DQoJCQkJY29udGFp
bmVydHlwZXNbal0uY29udGFpbmVyID0gY29udGFpbmVydHlwZXM7DQoJCQl9DQoJCX0NCgkJaWYg
KHRoaXMuZmFtaWx5X2NvdW50ID4gMCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50
eXBlc19ieV9pbmRleC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXsNCgkJCQl0ID0gdGhpcy50
eXBlc19ieV9pbmRleFtpXTsNCgkJCQlpZiAodC5pc19mYW1pbHkgfHwgIXQuZmFtaWxpZXMubGVu
Z3RoKQ0KCQkJCQljb250aW51ZTsNCgkJCQl0LmZhbWlseV92YXJfbWFwID0gbmV3IEFycmF5KHRo
aXMuZmFtaWx5X2NvdW50KTsNCgkJCQl0LmZhbWlseV9iZWhfbWFwID0gbmV3IEFycmF5KHRoaXMu
ZmFtaWx5X2NvdW50KTsNCgkJCQl0LmZhbWlseV9meF9tYXAgPSBuZXcgQXJyYXkodGhpcy5mYW1p
bHlfY291bnQpOw0KCQkJCXZhciBhbGxfZnggPSBbXTsNCgkJCQl2YXIgdmFyc3VtID0gMDsNCgkJ
CQl2YXIgYmVoc3VtID0gMDsNCgkJCQl2YXIgZnhzdW0gPSAwOw0KCQkJCWZvciAoaiA9IDAsIGxl
bmogPSB0LmZhbWlsaWVzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQl7DQoJCQkJCWYgPSB0
LmZhbWlsaWVzW2pdOw0KCQkJCQl0LmZhbWlseV92YXJfbWFwW2YuZmFtaWx5X2luZGV4XSA9IHZh
cnN1bTsNCgkJCQkJdmFyc3VtICs9IGYudmFyc19jb3VudDsNCgkJCQkJdC5mYW1pbHlfYmVoX21h
cFtmLmZhbWlseV9pbmRleF0gPSBiZWhzdW07DQoJCQkJCWJlaHN1bSArPSBmLmJlaHNfY291bnQ7
DQoJCQkJCXQuZmFtaWx5X2Z4X21hcFtmLmZhbWlseV9pbmRleF0gPSBmeHN1bTsNCgkJCQkJZnhz
dW0gKz0gZi5meF9jb3VudDsNCgkJCQkJZm9yIChrID0gMCwgbGVuayA9IGYuZWZmZWN0X3R5cGVz
Lmxlbmd0aDsgayA8IGxlbms7IGsrKykNCgkJCQkJCWFsbF9meC5wdXNoKGNyLnNoYWxsb3dDb3B5
KHt9LCBmLmVmZmVjdF90eXBlc1trXSkpOw0KCQkJCX0NCgkJCQl0LmVmZmVjdF90eXBlcyA9IGFs
bF9meC5jb25jYXQodC5lZmZlY3RfdHlwZXMpOw0KCQkJCWZvciAoaiA9IDAsIGxlbmogPSB0LmVm
ZmVjdF90eXBlcy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQkJCXQuZWZmZWN0X3R5cGVzW2pd
LmluZGV4ID0gajsNCgkJCX0NCgkJfQ0KCQlmb3IgKGkgPSAwLCBsZW4gPSBwbVs1XS5sZW5ndGg7
IGkgPCBsZW47IGkrKykNCgkJew0KCQkJbSA9IHBtWzVdW2ldOw0KCQkJdmFyIGxheW91dCA9IG5l
dyBjci5sYXlvdXQodGhpcywgbSk7DQoJCQljci5zZWFsKGxheW91dCk7DQoJCQl0aGlzLmxheW91
dHNbbGF5b3V0Lm5hbWVdID0gbGF5b3V0Ow0KCQkJdGhpcy5sYXlvdXRzX2J5X2luZGV4LnB1c2go
bGF5b3V0KTsNCgkJfQ0KCQlmb3IgKGkgPSAwLCBsZW4gPSBwbVs2XS5sZW5ndGg7IGkgPCBsZW47
IGkrKykNCgkJew0KCQkJbSA9IHBtWzZdW2ldOw0KCQkJdmFyIHNoZWV0ID0gbmV3IGNyLmV2ZW50
c2hlZXQodGhpcywgbSk7DQoJCQljci5zZWFsKHNoZWV0KTsNCgkJCXRoaXMuZXZlbnRzaGVldHNb
c2hlZXQubmFtZV0gPSBzaGVldDsNCgkJCXRoaXMuZXZlbnRzaGVldHNfYnlfaW5kZXgucHVzaChz
aGVldCk7DQoJCX0NCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5ldmVudHNoZWV0c19ieV9pbmRl
eC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXRoaXMuZXZlbnRzaGVldHNfYnlfaW5kZXhbaV0u
cG9zdEluaXQoKTsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5ldmVudHNoZWV0c19ieV9pbmRl
eC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXRoaXMuZXZlbnRzaGVldHNfYnlfaW5kZXhbaV0u
dXBkYXRlRGVlcEluY2x1ZGVzKCk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudHJpZ2dlcnNf
dG9fcG9zdGluaXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl0aGlzLnRyaWdnZXJzX3RvX3Bv
c3Rpbml0W2ldLnBvc3RJbml0KCk7DQoJCWNyLmNsZWFyQXJyYXkodGhpcy50cmlnZ2Vyc190b19w
b3N0aW5pdCkNCgkJdGhpcy5hdWRpb190b19wcmVsb2FkID0gcG1bN107DQoJCXRoaXMuZmlsZXNf
c3ViZm9sZGVyID0gcG1bOF07DQoJCXRoaXMucGl4ZWxfcm91bmRpbmcgPSBwbVs5XTsNCgkJdGhp
cy5hc3BlY3Rfc2NhbGUgPSAxLjA7DQoJCXRoaXMuZW5hYmxlV2ViR0wgPSBwbVsxM107DQoJCXRo
aXMubGluZWFyU2FtcGxpbmcgPSBwbVsxNF07DQoJCXRoaXMuY2xlYXJCYWNrZ3JvdW5kID0gcG1b
MTVdOw0KCQl0aGlzLnZlcnNpb25zdHIgPSBwbVsxNl07DQoJCXRoaXMudXNlSGlnaERwaSA9IHBt
WzE3XTsNCgkJdGhpcy5vcmllbnRhdGlvbnMgPSBwbVsyMF07CQkvLyAwID0gYW55LCAxID0gcG9y
dHJhaXQsIDIgPSBsYW5kc2NhcGUNCgkJdGhpcy5hdXRvTG9ja09yaWVudGF0aW9uID0gKHRoaXMu
b3JpZW50YXRpb25zID4gMCk7DQoJCXRoaXMucGF1c2VPbkJsdXIgPSBwbVsyMl07DQoJCXRoaXMu
d2FudEZ1bGxzY3JlZW5TY2FsaW5nUXVhbGl0eSA9IHBtWzIzXTsJCS8vIGZhbHNlID0gbG93IHF1
YWxpdHksIHRydWUgPSBoaWdoIHF1YWxpdHkNCgkJdGhpcy5mdWxsc2NyZWVuU2NhbGluZ1F1YWxp
dHkgPSB0aGlzLndhbnRGdWxsc2NyZWVuU2NhbGluZ1F1YWxpdHk7DQoJCXRoaXMuZG93bnNjYWxp
bmdRdWFsaXR5ID0gcG1bMjRdOwkvLyAwID0gbG93IChtaXBzIG9mZiksIDEgPSBtZWRpdW0gKG1p
cHMgb24sIGRlbnNlIHNwcml0ZXNoZWV0KSwgMiA9IGhpZ2ggKG1pcHMgb24sIHNwYXJzZSBzcHJp
dGVzaGVldCkNCgkJdGhpcy5wcmVsb2FkU291bmRzID0gcG1bMjVdOwkJLy8gMCA9IG5vLCAxID0g
eWVzDQoJCXRoaXMucHJvamVjdE5hbWUgPSBwbVsyNl07DQoJCXRoaXMuZW5hYmxlRnJvbnRUb0Jh
Y2sgPSBwbVsyN10gJiYgIXRoaXMuaXNJRTsJCS8vIGZyb250LXRvLWJhY2sgcmVuZGVyZXIgZGlz
YWJsZWQgaW4gSUUgKGJ1dCBub3QgRWRnZSkNCgkJdGhpcy5zdGFydF90aW1lID0gRGF0ZS5ub3co
KTsNCgkJY3IuY2xlYXJBcnJheSh0aGlzLm9iamVjdFJlZlRhYmxlKTsNCgkJdGhpcy5pbml0UmVu
ZGVyZXJBbmRMb2FkZXIoKTsNCgl9Ow0KCXZhciBhbnlJbWFnZUhhZEVycm9yID0gZmFsc2U7DQoJ
dmFyIE1BWF9QQVJBTExFTF9JTUFHRV9MT0FEUyA9IDEwMDsNCgl2YXIgY3VycmVudGx5QWN0aXZl
SW1hZ2VMb2FkcyA9IDA7DQoJdmFyIGltYWdlTG9hZFF1ZXVlID0gW107CQkvLyBhcnJheSBvZiBb
aW1nLCBzcmNUb1NldF0NCglSdW50aW1lLnByb3RvdHlwZS5xdWV1ZUltYWdlTG9hZCA9IGZ1bmN0
aW9uIChpbWdfLCBzcmNfKQ0KCXsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQl2YXIgZG9uZUZ1bmMg
PSBmdW5jdGlvbiAoKQ0KCQl7DQoJCQljdXJyZW50bHlBY3RpdmVJbWFnZUxvYWRzLS07DQoJCQlz
ZWxmLm1heWJlTG9hZE5leHRJbWFnZXMoKTsNCgkJfTsNCgkJaW1nXy5hZGRFdmVudExpc3RlbmVy
KCJsb2FkIiwgZG9uZUZ1bmMpOw0KCQlpbWdfLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgZG9u
ZUZ1bmMpOw0KCQlpbWFnZUxvYWRRdWV1ZS5wdXNoKFtpbWdfLCBzcmNfXSk7DQoJCXRoaXMubWF5
YmVMb2FkTmV4dEltYWdlcygpOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUubWF5YmVMb2FkTmV4
dEltYWdlcyA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgbmV4dDsNCgkJd2hpbGUgKGltYWdlTG9h
ZFF1ZXVlLmxlbmd0aCAmJiBjdXJyZW50bHlBY3RpdmVJbWFnZUxvYWRzIDwgTUFYX1BBUkFMTEVM
X0lNQUdFX0xPQURTKQ0KCQl7DQoJCQljdXJyZW50bHlBY3RpdmVJbWFnZUxvYWRzKys7DQoJCQlu
ZXh0ID0gaW1hZ2VMb2FkUXVldWUuc2hpZnQoKTsNCgkJCXRoaXMuc2V0SW1hZ2VTcmMobmV4dFsw
XSwgbmV4dFsxXSk7DQoJCX0NCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLndhaXRGb3JJbWFnZUxv
YWQgPSBmdW5jdGlvbiAoaW1nXywgc3JjXykNCgl7DQoJCWltZ19bImNvY29vbkxhenlMb2FkIl0g
PSB0cnVlOw0KCQlpbWdfLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkNCgkJew0KCQkJaW1nXy5jMmVy
cm9yID0gdHJ1ZTsNCgkJCWFueUltYWdlSGFkRXJyb3IgPSB0cnVlOw0KCQkJaWYgKGNvbnNvbGUg
JiYgY29uc29sZS5lcnJvcikNCgkJCQljb25zb2xlLmVycm9yKCJFcnJvciBsb2FkaW5nIGltYWdl
ICciICsgaW1nXy5zcmMgKyAiJzogIiwgZSk7DQoJCX07DQoJCWlmICh0aGlzLmlzRWplY3RhKQ0K
CQl7DQoJCQlpbWdfLnNyYyA9IHNyY187DQoJCX0NCgkJZWxzZSBpZiAoIWltZ18uc3JjKQ0KCQl7
DQoJCQlpZiAodHlwZW9mIFhBUEtSZWFkZXIgIT09ICJ1bmRlZmluZWQiKQ0KCQkJew0KCQkJCVhB
UEtSZWFkZXIuZ2V0KHNyY18sIGZ1bmN0aW9uIChleHBhbmRlZF91cmwpDQoJCQkJew0KCQkJCQlp
bWdfLnNyYyA9IGV4cGFuZGVkX3VybDsNCgkJCQl9LCBmdW5jdGlvbiAoZSkNCgkJCQl7DQoJCQkJ
CWltZ18uYzJlcnJvciA9IHRydWU7DQoJCQkJCWFueUltYWdlSGFkRXJyb3IgPSB0cnVlOw0KCQkJ
CQlpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKQ0KCQkJCQkJY29uc29sZS5lcnJvcigiRXJy
b3IgZXh0cmFjdGluZyBpbWFnZSAnIiArIHNyY18gKyAiJyBmcm9tIGV4cGFuc2lvbiBmaWxlOiAi
LCBlKTsNCgkJCQl9KTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlpbWdfLmNyb3NzT3JpZ2lu
ID0gImFub255bW91cyI7CQkJLy8gcmVxdWlyZWQgZm9yIEFyY2FkZSBzYW5kYm94IGNvbXBhdGli
aWxpdHkNCgkJCQl0aGlzLnF1ZXVlSW1hZ2VMb2FkKGltZ18sIHNyY18pOwkJLy8gdXNlIGEgcXVl
dWUgdG8gYXZvaWQgcmVxdWVzdGluZyBhbGwgaW1hZ2VzIHNpbXVsdGFuZW91c2x5DQoJCQl9DQoJ
CX0NCgkJdGhpcy53YWl0X2Zvcl90ZXh0dXJlcy5wdXNoKGltZ18pOw0KCX07DQoJUnVudGltZS5w
cm90b3R5cGUuZmluZFdhaXRpbmdUZXh0dXJlID0gZnVuY3Rpb24gKHNyY18pDQoJew0KCQl2YXIg
aSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLndhaXRfZm9yX3RleHR1cmVzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpZiAodGhpcy53YWl0X2Zvcl90ZXh0dXJlc1tpXS5j
cl9zcmMgPT09IHNyY18pDQoJCQkJcmV0dXJuIHRoaXMud2FpdF9mb3JfdGV4dHVyZXNbaV07DQoJ
CX0NCgkJcmV0dXJuIG51bGw7DQoJfTsNCgl2YXIgYXVkaW9fcHJlbG9hZF90b3RhbHNpemUgPSAw
Ow0KCXZhciBhdWRpb19wcmVsb2FkX3N0YXJ0ZWQgPSBmYWxzZTsNCglSdW50aW1lLnByb3RvdHlw
ZS5nZXRyZWFkeSA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAoIXRoaXMuYXVkaW9JbnN0YW5jZSkN
CgkJCXJldHVybjsNCgkJYXVkaW9fcHJlbG9hZF90b3RhbHNpemUgPSB0aGlzLmF1ZGlvSW5zdGFu
Y2Uuc2V0UHJlbG9hZExpc3QodGhpcy5hdWRpb190b19wcmVsb2FkKTsNCgl9Ow0KCVJ1bnRpbWUu
cHJvdG90eXBlLmFyZUFsbFRleHR1cmVzQW5kU291bmRzTG9hZGVkID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXZhciB0b3RhbHNpemUgPSBhdWRpb19wcmVsb2FkX3RvdGFsc2l6ZTsNCgkJdmFyIGNvbXBs
ZXRlZHNpemUgPSAwOw0KCQl2YXIgYXVkaW9jb21wbGV0ZWRzaXplID0gMDsNCgkJdmFyIHJldCA9
IHRydWU7DQoJCXZhciBpLCBsZW4sIGltZzsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy53YWl0
X2Zvcl90ZXh0dXJlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaW1nID0gdGhpcy53
YWl0X2Zvcl90ZXh0dXJlc1tpXTsNCgkJCXZhciBmaWxlc2l6ZSA9IGltZy5jcl9maWxlc2l6ZTsN
CgkJCWlmICghZmlsZXNpemUgfHwgZmlsZXNpemUgPD0gMCkNCgkJCQlmaWxlc2l6ZSA9IDUwMDAw
Ow0KCQkJdG90YWxzaXplICs9IGZpbGVzaXplOw0KCQkJaWYgKCEhaW1nLnNyYyAmJiAoaW1nLmNv
bXBsZXRlIHx8IGltZ1sibG9hZGVkIl0pICYmICFpbWcuYzJlcnJvcikNCgkJCQljb21wbGV0ZWRz
aXplICs9IGZpbGVzaXplOw0KCQkJZWxzZQ0KCQkJCXJldCA9IGZhbHNlOyAgICAvLyBub3QgYWxs
IHRleHR1cmVzIGxvYWRlZA0KCQl9DQoJCWlmIChyZXQgJiYgdGhpcy5wcmVsb2FkU291bmRzICYm
IHRoaXMuYXVkaW9JbnN0YW5jZSkNCgkJew0KCQkJaWYgKCFhdWRpb19wcmVsb2FkX3N0YXJ0ZWQp
DQoJCQl7DQoJCQkJdGhpcy5hdWRpb0luc3RhbmNlLnN0YXJ0UHJlbG9hZHMoKTsNCgkJCQlhdWRp
b19wcmVsb2FkX3N0YXJ0ZWQgPSB0cnVlOw0KCQkJfQ0KCQkJYXVkaW9jb21wbGV0ZWRzaXplID0g
dGhpcy5hdWRpb0luc3RhbmNlLmdldFByZWxvYWRlZFNpemUoKTsNCgkJCWNvbXBsZXRlZHNpemUg
Kz0gYXVkaW9jb21wbGV0ZWRzaXplOw0KCQkJaWYgKGF1ZGlvY29tcGxldGVkc2l6ZSA8IGF1ZGlv
X3ByZWxvYWRfdG90YWxzaXplKQ0KCQkJCXJldCA9IGZhbHNlOwkJLy8gbm90IGRvbmUgeWV0DQoJ
CX0NCgkJaWYgKHRvdGFsc2l6ZSA9PSAwKQ0KCQkJdGhpcy5wcm9ncmVzcyA9IDE7CQkvLyBpbmRp
Y2F0ZSB0byBDMiBzcGxhc2ggbG9hZGVyIHRoYXQgaXQgY2FuIGZpbmlzaCBub3cNCgkJZWxzZQ0K
CQkJdGhpcy5wcm9ncmVzcyA9IChjb21wbGV0ZWRzaXplIC8gdG90YWxzaXplKTsNCgkJcmV0dXJu
IHJldDsNCgl9Ow0KCXZhciBpc0MyU3BsYXNoRG9uZSA9IGZhbHNlOw0KCVJ1bnRpbWUucHJvdG90
eXBlLmdvID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhpcy5jdHggJiYgIXRoaXMuZ2x3cmFw
KQ0KCQkJcmV0dXJuOw0KCQl2YXIgY3R4ID0gdGhpcy5jdHggfHwgdGhpcy5vdmVybGF5X2N0eDsN
CgkJaWYgKHRoaXMub3ZlcmxheV9jYW52YXMpDQoJCQl0aGlzLnBvc2l0aW9uT3ZlcmxheUNhbnZh
cygpOw0KCQl2YXIgY3Vyd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsNCgkJdmFyIGN1cmhlaWdo
dCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCgkJaWYgKHRoaXMubGFzdFdpbmRvd1dpZHRoICE9PSBj
dXJ3aWR0aCB8fCB0aGlzLmxhc3RXaW5kb3dIZWlnaHQgIT09IGN1cmhlaWdodCkNCgkJew0KCQkJ
dGhpc1sic2V0U2l6ZSJdKGN1cndpZHRoLCBjdXJoZWlnaHQpOw0KCQl9DQoJCXRoaXMucHJvZ3Jl
c3MgPSAwOw0KCQl0aGlzLmxhc3RfcHJvZ3Jlc3MgPSAtMTsNCgkJdmFyIHNlbGYgPSB0aGlzOw0K
CQlpZiAodGhpcy5hcmVBbGxUZXh0dXJlc0FuZFNvdW5kc0xvYWRlZCgpICYmICh0aGlzLmxvYWRl
cnN0eWxlICE9PSA0IHx8IGlzQzJTcGxhc2hEb25lKSkNCgkJew0KCQkJdGhpcy5nb19sb2FkaW5n
X2ZpbmlzaGVkKCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl2YXIgbXNfZWxhcHNlZCA9IERhdGUu
bm93KCkgLSB0aGlzLnN0YXJ0X3RpbWU7DQoJCQlpZiAoY3R4KQ0KCQkJew0KCQkJCXZhciBvdmVy
bGF5X3dpZHRoID0gdGhpcy53aWR0aDsNCgkJCQl2YXIgb3ZlcmxheV9oZWlnaHQgPSB0aGlzLmhl
aWdodDsNCgkJCQl2YXIgZHByID0gdGhpcy5kZXZpY2VQaXhlbFJhdGlvOw0KCQkJCWlmICh0aGlz
LmxvYWRlcnN0eWxlIDwgMyAmJiAodGhpcy5pc0NvY29vbkpzIHx8IChtc19lbGFwc2VkID49IDUw
MCAmJiB0aGlzLmxhc3RfcHJvZ3Jlc3MgIT0gdGhpcy5wcm9ncmVzcykpKQ0KCQkJCXsNCgkJCQkJ
Y3R4LmNsZWFyUmVjdCgwLCAwLCBvdmVybGF5X3dpZHRoLCBvdmVybGF5X2hlaWdodCk7DQoJCQkJ
CXZhciBteCA9IG92ZXJsYXlfd2lkdGggLyAyOw0KCQkJCQl2YXIgbXkgPSBvdmVybGF5X2hlaWdo
dCAvIDI7DQoJCQkJCXZhciBoYXNsb2dvID0gKHRoaXMubG9hZGVyc3R5bGUgPT09IDAgJiYgdGhp
cy5sb2FkZXJsb2dvcy5sb2dvLmNvbXBsZXRlKTsNCgkJCQkJdmFyIGhsdyA9IDQwICogZHByOw0K
CQkJCQl2YXIgaGxoID0gMDsNCgkJCQkJdmFyIGxvZ293aWR0aCA9IDgwICogZHByOw0KCQkJCQl2
YXIgbG9nb2hlaWdodDsNCgkJCQkJaWYgKGhhc2xvZ28pDQoJCQkJCXsNCgkJCQkJCXZhciBsb2Fk
ZXJMb2dvSW1hZ2UgPSB0aGlzLmxvYWRlcmxvZ29zLmxvZ287DQoJCQkJCQlsb2dvd2lkdGggPSBs
b2FkZXJMb2dvSW1hZ2Uud2lkdGggKiBkcHI7DQoJCQkJCQlsb2dvaGVpZ2h0ID0gbG9hZGVyTG9n
b0ltYWdlLmhlaWdodCAqIGRwcjsNCgkJCQkJCWhsdyA9IGxvZ293aWR0aCAvIDI7DQoJCQkJCQlo
bGggPSBsb2dvaGVpZ2h0IC8gMjsNCgkJCQkJCWN0eC5kcmF3SW1hZ2UobG9hZGVyTG9nb0ltYWdl
LCBjci5mbG9vcihteCAtIGhsdyksIGNyLmZsb29yKG15IC0gaGxoKSwgbG9nb3dpZHRoLCBsb2dv
aGVpZ2h0KTsNCgkJCQkJfQ0KCQkJCQlpZiAodGhpcy5sb2FkZXJzdHlsZSA8PSAxKQ0KCQkJCQl7
DQoJCQkJCQlteSArPSBobGggKyAoaGFzbG9nbyA/IDEyICogZHByIDogMCk7DQoJCQkJCQlteCAt
PSBobHc7DQoJCQkJCQlteCA9IGNyLmZsb29yKG14KSArIDAuNTsNCgkJCQkJCW15ID0gY3IuZmxv
b3IobXkpICsgMC41Ow0KCQkJCQkJY3R4LmZpbGxTdHlsZSA9IGFueUltYWdlSGFkRXJyb3IgPyAi
cmVkIiA6ICJEb2RnZXJCbHVlIjsNCgkJCQkJCWN0eC5maWxsUmVjdChteCwgbXksIE1hdGguZmxv
b3IobG9nb3dpZHRoICogdGhpcy5wcm9ncmVzcyksIDYgKiBkcHIpOw0KCQkJCQkJY3R4LnN0cm9r
ZVN0eWxlID0gImJsYWNrIjsNCgkJCQkJCWN0eC5zdHJva2VSZWN0KG14LCBteSwgbG9nb3dpZHRo
LCA2ICogZHByKTsNCgkJCQkJCWN0eC5zdHJva2VTdHlsZSA9ICJ3aGl0ZSI7DQoJCQkJCQljdHgu
c3Ryb2tlUmVjdChteCAtIDEgKiBkcHIsIG15IC0gMSAqIGRwciwgbG9nb3dpZHRoICsgMiAqIGRw
ciwgOCAqIGRwcik7DQoJCQkJCX0NCgkJCQkJZWxzZSBpZiAodGhpcy5sb2FkZXJzdHlsZSA9PT0g
MikNCgkJCQkJew0KCQkJCQkJY3R4LmZvbnQgPSAodGhpcy5pc0VqZWN0YSA/ICIxMnB0IEFyaWFs
TVQiIDogIjEycHQgQXJpYWwiKTsNCgkJCQkJCWN0eC5maWxsU3R5bGUgPSBhbnlJbWFnZUhhZEVy
cm9yID8gIiNmMDAiIDogIiM5OTkiOw0KCQkJCQkJY3R4LnRleHRCYXNlTGluZSA9ICJtaWRkbGUi
Ow0KCQkJCQkJdmFyIHBlcmNlbnRfdGV4dCA9IE1hdGgucm91bmQodGhpcy5wcm9ncmVzcyAqIDEw
MCkgKyAiJSI7DQoJCQkJCQl2YXIgdGV4dF9kaW0gPSBjdHgubWVhc3VyZVRleHQgPyBjdHgubWVh
c3VyZVRleHQocGVyY2VudF90ZXh0KSA6IG51bGw7DQoJCQkJCQl2YXIgdGV4dF93aWR0aCA9IHRl
eHRfZGltID8gdGV4dF9kaW0ud2lkdGggOiAwOw0KCQkJCQkJY3R4LmZpbGxUZXh0KHBlcmNlbnRf
dGV4dCwgbXggLSAodGV4dF93aWR0aCAvIDIpLCBteSk7DQoJCQkJCX0NCgkJCQkJdGhpcy5sYXN0
X3Byb2dyZXNzID0gdGhpcy5wcm9ncmVzczsNCgkJCQl9DQoJCQkJZWxzZSBpZiAodGhpcy5sb2Fk
ZXJzdHlsZSA9PT0gNCkNCgkJCQl7DQoJCQkJCXRoaXMuZHJhd19jMl9zcGxhc2hfbG9hZGVyKGN0
eCk7DQoJCQkJCWlmIChyYWYpDQoJCQkJCQlyYWYoZnVuY3Rpb24oKSB7IHNlbGYuZ28oKTsgfSk7
DQoJCQkJCWVsc2UNCgkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHNlbGYuZ28oKTsgfSwg
MTYpOw0KCQkJCQlyZXR1cm47DQoJCQkJfQ0KCQkJfQ0KCQkJc2V0VGltZW91dChmdW5jdGlvbigp
IHsgc2VsZi5nbygpOyB9LCAodGhpcy5pc0NvY29vbkpzID8gMTAgOiAxMDApKTsNCgkJfQ0KCX07
DQoJdmFyIHNwbGFzaFN0YXJ0VGltZSA9IC0xOw0KCXZhciBzcGxhc2hGYWRlSW5EdXJhdGlvbiA9
IDMwMDsNCgl2YXIgc3BsYXNoRmFkZU91dER1cmF0aW9uID0gMzAwOw0KCXZhciBzcGxhc2hBZnRl
ckZhZGVPdXRXYWl0ID0gKHR5cGVvZiBjcl9pc19wcmV2aWV3ID09PSAidW5kZWZpbmVkIiA/IDIw
MCA6IDApOw0KCXZhciBzcGxhc2hJc0ZhZGVJbiA9IHRydWU7DQoJdmFyIHNwbGFzaElzRmFkZU91
dCA9IGZhbHNlOw0KCXZhciBzcGxhc2hGYWRlSW5GaW5pc2ggPSAwOw0KCXZhciBzcGxhc2hGYWRl
T3V0U3RhcnQgPSAwOw0KCXZhciBzcGxhc2hNaW5EaXNwbGF5VGltZSA9ICh0eXBlb2YgY3JfaXNf
cHJldmlldyA9PT0gInVuZGVmaW5lZCIgPyAzMDAwIDogMCk7DQoJdmFyIHJlbmRlclZpYUNhbnZh
cyA9IG51bGw7DQoJdmFyIHJlbmRlclZpYUN0eCA9IG51bGw7DQoJdmFyIHNwbGFzaEZyYW1lTnVt
YmVyID0gMDsNCglmdW5jdGlvbiBtYXliZUNyZWF0ZVJlbmRlclZpYUNhbnZhcyh3LCBoKQ0KCXsN
CgkJaWYgKCFyZW5kZXJWaWFDYW52YXMgfHwgcmVuZGVyVmlhQ2FudmFzLndpZHRoICE9PSB3IHx8
IHJlbmRlclZpYUNhbnZhcy5oZWlnaHQgIT09IGgpDQoJCXsNCgkJCXJlbmRlclZpYUNhbnZhcyA9
IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOw0KCQkJcmVuZGVyVmlhQ2FudmFzLndp
ZHRoID0gdzsNCgkJCXJlbmRlclZpYUNhbnZhcy5oZWlnaHQgPSBoOw0KCQkJcmVuZGVyVmlhQ3R4
ID0gcmVuZGVyVmlhQ2FudmFzLmdldENvbnRleHQoIjJkIik7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9u
IG1pcEltYWdlKGFyciwgc2l6ZSkNCgl7DQoJCWlmIChzaXplIDw9IDEyOCkNCgkJCXJldHVybiBh
cnJbM107DQoJCWVsc2UgaWYgKHNpemUgPD0gMjU2KQ0KCQkJcmV0dXJuIGFyclsyXTsNCgkJZWxz
ZSBpZiAoc2l6ZSA8PSA1MTIpDQoJCQlyZXR1cm4gYXJyWzFdOw0KCQllbHNlDQoJCQlyZXR1cm4g
YXJyWzBdOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuZHJhd19jMl9zcGxhc2hfbG9hZGVyID0g
ZnVuY3Rpb24oY3R4KQ0KCXsNCgkJaWYgKGlzQzJTcGxhc2hEb25lKQ0KCQkJcmV0dXJuOw0KCQl2
YXIgdyA9IE1hdGguY2VpbCh0aGlzLndpZHRoKTsNCgkJdmFyIGggPSBNYXRoLmNlaWwodGhpcy5o
ZWlnaHQpOw0KCQl2YXIgZHByID0gdGhpcy5kZXZpY2VQaXhlbFJhdGlvOw0KCQl2YXIgbG9nb2lt
YWdlcyA9IHRoaXMubG9hZGVybG9nb3MubG9nbzsNCgkJdmFyIHBvd2VyZWRpbWFnZXMgPSB0aGlz
LmxvYWRlcmxvZ29zLnBvd2VyZWQ7DQoJCXZhciB3ZWJzaXRlaW1hZ2VzID0gdGhpcy5sb2FkZXJs
b2dvcy53ZWJzaXRlOw0KCQlmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkNCgkJew0KCQkJaWYg
KCFsb2dvaW1hZ2VzW2ldLmNvbXBsZXRlIHx8ICFwb3dlcmVkaW1hZ2VzW2ldLmNvbXBsZXRlIHx8
ICF3ZWJzaXRlaW1hZ2VzW2ldLmNvbXBsZXRlKQ0KCQkJCXJldHVybjsNCgkJfQ0KCQlpZiAoc3Bs
YXNoRnJhbWVOdW1iZXIgPT09IDApDQoJCQlzcGxhc2hTdGFydFRpbWUgPSBEYXRlLm5vdygpOw0K
CQl2YXIgbm93VGltZSA9IERhdGUubm93KCk7DQoJCXZhciBpc1JlbmRlcmluZ1ZpYSA9IGZhbHNl
Ow0KCQl2YXIgcmVuZGVyVG9DdHggPSBjdHg7DQoJCXZhciBkcmF3VywgZHJhd0g7DQoJCWlmIChz
cGxhc2hJc0ZhZGVJbiB8fCBzcGxhc2hJc0ZhZGVPdXQpDQoJCXsNCgkJCWN0eC5jbGVhclJlY3Qo
MCwgMCwgdywgaCk7DQoJCQltYXliZUNyZWF0ZVJlbmRlclZpYUNhbnZhcyh3LCBoKTsNCgkJCXJl
bmRlclRvQ3R4ID0gcmVuZGVyVmlhQ3R4Ow0KCQkJaXNSZW5kZXJpbmdWaWEgPSB0cnVlOw0KCQkJ
aWYgKHNwbGFzaElzRmFkZUluICYmIHNwbGFzaEZyYW1lTnVtYmVyID09PSAxKQ0KCQkJCXNwbGFz
aFN0YXJ0VGltZSA9IERhdGUubm93KCk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQljdHguZ2xvYmFs
QWxwaGEgPSAxOw0KCQl9DQoJCXJlbmRlclRvQ3R4LmZpbGxTdHlsZSA9ICIjMzMzMzMzIjsNCgkJ
cmVuZGVyVG9DdHguZmlsbFJlY3QoMCwgMCwgdywgaCk7DQoJCWlmICh0aGlzLmNzc0hlaWdodCA+
IDI1NikNCgkJew0KCQkJZHJhd1cgPSBjci5jbGFtcChoICogMC4yMiwgMTA1LCB3ICogMC42KTsN
CgkJCWRyYXdIID0gZHJhd1cgKiAwLjI1Ow0KCQkJcmVuZGVyVG9DdHguZHJhd0ltYWdlKG1pcElt
YWdlKHBvd2VyZWRpbWFnZXMsIGRyYXdXKSwgdyAqIDAuNSAtIGRyYXdXLzIsIGggKiAwLjIgLSBk
cmF3SC8yLCBkcmF3VywgZHJhd0gpOw0KCQkJZHJhd1cgPSBNYXRoLm1pbihoICogMC4zOTUsIHcg
KiAwLjk1KTsNCgkJCWRyYXdIID0gZHJhd1c7DQoJCQlyZW5kZXJUb0N0eC5kcmF3SW1hZ2UobWlw
SW1hZ2UobG9nb2ltYWdlcywgZHJhd1cpLCB3ICogMC41IC0gZHJhd1cvMiwgaCAqIDAuNDg1IC0g
ZHJhd0gvMiwgZHJhd1csIGRyYXdIKTsNCgkJCWRyYXdXID0gY3IuY2xhbXAoaCAqIDAuMjIsIDEw
NSwgdyAqIDAuNik7DQoJCQlkcmF3SCA9IGRyYXdXICogMC4yNTsNCgkJCXJlbmRlclRvQ3R4LmRy
YXdJbWFnZShtaXBJbWFnZSh3ZWJzaXRlaW1hZ2VzLCBkcmF3VyksIHcgKiAwLjUgLSBkcmF3Vy8y
LCBoICogMC44NjggLSBkcmF3SC8yLCBkcmF3VywgZHJhd0gpOw0KCQkJcmVuZGVyVG9DdHguZmls
bFN0eWxlID0gIiMzQzNDM0MiOw0KCQkJZHJhd1cgPSB3Ow0KCQkJZHJhd0ggPSBNYXRoLm1heCho
ICogMC4wMDUsIDIpOw0KCQkJcmVuZGVyVG9DdHguZmlsbFJlY3QoMCwgaCAqIDAuOCAtIGRyYXdI
LzIsIGRyYXdXLCBkcmF3SCk7DQoJCQlyZW5kZXJUb0N0eC5maWxsU3R5bGUgPSBhbnlJbWFnZUhh
ZEVycm9yID8gInJlZCIgOiAiI0UwRkY2NSI7DQoJCQlkcmF3VyA9IHcgKiB0aGlzLnByb2dyZXNz
Ow0KCQkJcmVuZGVyVG9DdHguZmlsbFJlY3QodyAqIDAuNSAtIGRyYXdXLzIsIGggKiAwLjggLSBk
cmF3SC8yLCBkcmF3VywgZHJhd0gpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJZHJhd1cgPSBoICog
MC41NTsNCgkJCWRyYXdIID0gZHJhd1c7DQoJCQlyZW5kZXJUb0N0eC5kcmF3SW1hZ2UobWlwSW1h
Z2UobG9nb2ltYWdlcywgZHJhd1cpLCB3ICogMC41IC0gZHJhd1cvMiwgaCAqIDAuNDUgLSBkcmF3
SC8yLCBkcmF3VywgZHJhd0gpOw0KCQkJcmVuZGVyVG9DdHguZmlsbFN0eWxlID0gIiMzQzNDM0Mi
Ow0KCQkJZHJhd1cgPSB3Ow0KCQkJZHJhd0ggPSBNYXRoLm1heChoICogMC4wMDUsIDIpOw0KCQkJ
cmVuZGVyVG9DdHguZmlsbFJlY3QoMCwgaCAqIDAuODUgLSBkcmF3SC8yLCBkcmF3VywgZHJhd0gp
Ow0KCQkJcmVuZGVyVG9DdHguZmlsbFN0eWxlID0gYW55SW1hZ2VIYWRFcnJvciA/ICJyZWQiIDog
IiNFMEZGNjUiOw0KCQkJZHJhd1cgPSB3ICogdGhpcy5wcm9ncmVzczsNCgkJCXJlbmRlclRvQ3R4
LmZpbGxSZWN0KHcgKiAwLjUgLSBkcmF3Vy8yLCBoICogMC44NSAtIGRyYXdILzIsIGRyYXdXLCBk
cmF3SCk7DQoJCX0NCgkJaWYgKGlzUmVuZGVyaW5nVmlhKQ0KCQl7DQoJCQlpZiAoc3BsYXNoSXNG
YWRlSW4pDQoJCQl7DQoJCQkJaWYgKHNwbGFzaEZyYW1lTnVtYmVyID09PSAwKQ0KCQkJCQljdHgu
Z2xvYmFsQWxwaGEgPSAwOw0KCQkJCWVsc2UNCgkJCQkJY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5t
aW4oKG5vd1RpbWUgLSBzcGxhc2hTdGFydFRpbWUpIC8gc3BsYXNoRmFkZUluRHVyYXRpb24sIDEp
Ow0KCQkJfQ0KCQkJZWxzZSBpZiAoc3BsYXNoSXNGYWRlT3V0KQ0KCQkJew0KCQkJCWN0eC5nbG9i
YWxBbHBoYSA9IE1hdGgubWF4KDEgLSAobm93VGltZSAtIHNwbGFzaEZhZGVPdXRTdGFydCkgLyBz
cGxhc2hGYWRlT3V0RHVyYXRpb24sIDApOw0KCQkJfQ0KCQkJY3R4LmRyYXdJbWFnZShyZW5kZXJW
aWFDYW52YXMsIDAsIDAsIHcsIGgpOw0KCQl9DQoJCWlmIChzcGxhc2hJc0ZhZGVJbiAmJiBub3dU
aW1lIC0gc3BsYXNoU3RhcnRUaW1lID49IHNwbGFzaEZhZGVJbkR1cmF0aW9uICYmIHNwbGFzaEZy
YW1lTnVtYmVyID49IDIpDQoJCXsNCgkJCXNwbGFzaElzRmFkZUluID0gZmFsc2U7DQoJCQlzcGxh
c2hGYWRlSW5GaW5pc2ggPSBub3dUaW1lOw0KCQl9DQoJCWlmICghc3BsYXNoSXNGYWRlSW4gJiYg
bm93VGltZSAtIHNwbGFzaEZhZGVJbkZpbmlzaCA+PSBzcGxhc2hNaW5EaXNwbGF5VGltZSAmJiAh
c3BsYXNoSXNGYWRlT3V0ICYmIHRoaXMucHJvZ3Jlc3MgPj0gMSkNCgkJew0KCQkJc3BsYXNoSXNG
YWRlT3V0ID0gdHJ1ZTsNCgkJCXNwbGFzaEZhZGVPdXRTdGFydCA9IG5vd1RpbWU7DQoJCX0NCgkJ
aWYgKChzcGxhc2hJc0ZhZGVPdXQgJiYgbm93VGltZSAtIHNwbGFzaEZhZGVPdXRTdGFydCA+PSBz
cGxhc2hGYWRlT3V0RHVyYXRpb24gKyBzcGxhc2hBZnRlckZhZGVPdXRXYWl0KSB8fA0KCQkJKHR5
cGVvZiBjcl9pc19wcmV2aWV3ICE9PSAidW5kZWZpbmVkIiAmJiB0aGlzLnByb2dyZXNzID49IDEg
JiYgRGF0ZS5ub3coKSAtIHNwbGFzaFN0YXJ0VGltZSA8IDUwMCkpDQoJCXsNCgkJCWlzQzJTcGxh
c2hEb25lID0gdHJ1ZTsNCgkJCXNwbGFzaElzRmFkZUluID0gZmFsc2U7DQoJCQlzcGxhc2hJc0Zh
ZGVPdXQgPSBmYWxzZTsNCgkJCXJlbmRlclZpYUNhbnZhcyA9IG51bGw7DQoJCQlyZW5kZXJWaWFD
dHggPSBudWxsOw0KCQkJdGhpcy5sb2FkZXJsb2dvcyA9IG51bGw7DQoJCX0NCgkJKytzcGxhc2hG
cmFtZU51bWJlcjsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdvX2xvYWRpbmdfZmluaXNoZWQg
PSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMub3ZlcmxheV9jYW52YXMpDQoJCXsNCgkJCXRo
aXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5vdmVybGF5X2NhbnZhcyk7DQoJ
CQl0aGlzLm92ZXJsYXlfY3R4ID0gbnVsbDsNCgkJCXRoaXMub3ZlcmxheV9jYW52YXMgPSBudWxs
Ow0KCQl9DQoJCXRoaXMuc3RhcnRfdGltZSA9IERhdGUubm93KCk7DQoJCXRoaXMubGFzdF9mcHNf
dGltZSA9IGNyLnBlcmZvcm1hbmNlX25vdygpOyAgICAgICAvLyBmb3IgY291bnRpbmcgZnJhbWVy
YXRlDQoJCXZhciBpLCBsZW4sIHQ7DQoJCWlmICh0aGlzLnVzZXNfbG9hZGVyX2xheW91dCkNCgkJ
ew0KCQkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50eXBlc19ieV9pbmRleC5sZW5ndGg7IGkgPCBs
ZW47IGkrKykNCgkJCXsNCgkJCQl0ID0gdGhpcy50eXBlc19ieV9pbmRleFtpXTsNCgkJCQlpZiAo
IXQuaXNfZmFtaWx5ICYmICF0LmlzT25Mb2FkZXJMYXlvdXQgJiYgdC5wbHVnaW4uaXNfd29ybGQp
DQoJCQkJew0KCQkJCQl0Lm9uQ3JlYXRlKCk7DQoJCQkJCWNyLnNlYWwodCk7DQoJCQkJfQ0KCQkJ
fQ0KCQl9DQoJCWVsc2UNCgkJCXRoaXMuaXNsb2FkaW5nID0gZmFsc2U7DQoJCWZvciAoaSA9IDAs
IGxlbiA9IHRoaXMubGF5b3V0c19ieV9pbmRleC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0K
CQkJdGhpcy5sYXlvdXRzX2J5X2luZGV4W2ldLmNyZWF0ZUdsb2JhbE5vbldvcmxkcygpOw0KCQl9
DQoJCWlmICh0aGlzLmZ1bGxzY3JlZW5fbW9kZSA+PSAyKQ0KCQl7DQoJCQl2YXIgb3JpZ19hc3Bl
Y3QgPSB0aGlzLm9yaWdpbmFsX3dpZHRoIC8gdGhpcy5vcmlnaW5hbF9oZWlnaHQ7DQoJCQl2YXIg
Y3VyX2FzcGVjdCA9IHRoaXMud2lkdGggLyB0aGlzLmhlaWdodDsNCgkJCWlmICgodGhpcy5mdWxs
c2NyZWVuX21vZGUgIT09IDIgJiYgY3VyX2FzcGVjdCA+IG9yaWdfYXNwZWN0KSB8fCAodGhpcy5m
dWxsc2NyZWVuX21vZGUgPT09IDIgJiYgY3VyX2FzcGVjdCA8IG9yaWdfYXNwZWN0KSkNCgkJCQl0
aGlzLmFzcGVjdF9zY2FsZSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy5vcmlnaW5hbF9oZWlnaHQ7DQoJ
CQllbHNlDQoJCQkJdGhpcy5hc3BlY3Rfc2NhbGUgPSB0aGlzLndpZHRoIC8gdGhpcy5vcmlnaW5h
bF93aWR0aDsNCgkJfQ0KCQlpZiAodGhpcy5maXJzdF9sYXlvdXQpDQoJCQl0aGlzLmxheW91dHNb
dGhpcy5maXJzdF9sYXlvdXRdLnN0YXJ0UnVubmluZygpOw0KCQllbHNlDQoJCQl0aGlzLmxheW91
dHNfYnlfaW5kZXhbMF0uc3RhcnRSdW5uaW5nKCk7DQo7DQoJCWlmICghdGhpcy51c2VzX2xvYWRl
cl9sYXlvdXQpDQoJCXsNCgkJCXRoaXMubG9hZGluZ3Byb2dyZXNzID0gMTsNCgkJCXRoaXMudHJp
Z2dlcihjci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLk9uTG9hZEZpbmlzaGVkLCBudWxs
KTsNCgkJCWlmICh3aW5kb3dbIkMyX1JlZ2lzdGVyU1ciXSkJCS8vIG5vdGUgbm90IGFsbCBwbGF0
Zm9ybXMgdXNlIFNXDQoJCQkJd2luZG93WyJDMl9SZWdpc3RlclNXIl0oKTsNCgkJfQ0KCQlpZiAo
bmF2aWdhdG9yWyJzcGxhc2hzY3JlZW4iXSAmJiBuYXZpZ2F0b3JbInNwbGFzaHNjcmVlbiJdWyJo
aWRlIl0pDQoJCQluYXZpZ2F0b3JbInNwbGFzaHNjcmVlbiJdWyJoaWRlIl0oKTsNCgkJZm9yIChp
ID0gMCwgbGVuID0gdGhpcy50eXBlc19ieV9pbmRleC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJ
ew0KCQkJdCA9IHRoaXMudHlwZXNfYnlfaW5kZXhbaV07DQoJCQlpZiAodC5vbkFwcEJlZ2luKQ0K
CQkJCXQub25BcHBCZWdpbigpOw0KCQl9DQoJCWlmIChkb2N1bWVudFsiaGlkZGVuIl0gfHwgZG9j
dW1lbnRbIndlYmtpdEhpZGRlbiJdIHx8IGRvY3VtZW50WyJtb3pIaWRkZW4iXSB8fCBkb2N1bWVu
dFsibXNIaWRkZW4iXSkNCgkJew0KCQkJd2luZG93WyJjcl9zZXRTdXNwZW5kZWQiXSh0cnVlKTsJ
CS8vIHN0b3AgcmVuZGVyaW5nDQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGlzLnRpY2soZmFsc2Up
Ow0KCQl9DQoJCWlmICh0aGlzLmlzRGlyZWN0Q2FudmFzKQ0KCQkJQXBwTW9iaVsid2VidmlldyJd
WyJleGVjdXRlIl0oIm9uR2FtZVJlYWR5KCk7Iik7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS50
aWNrID0gZnVuY3Rpb24gKGJhY2tncm91bmRfd2FrZSwgdGltZXN0YW1wLCBkZWJ1Z19zdGVwKQ0K
CXsNCgkJaWYgKCF0aGlzLnJ1bm5pbmdfbGF5b3V0KQ0KCQkJcmV0dXJuOw0KCQl2YXIgbm93dGlt
ZSA9IGNyLnBlcmZvcm1hbmNlX25vdygpOw0KCQl2YXIgbG9naWNfc3RhcnQgPSBub3d0aW1lOw0K
CQlpZiAoIWRlYnVnX3N0ZXAgJiYgdGhpcy5pc1N1c3BlbmRlZCAmJiAhYmFja2dyb3VuZF93YWtl
KQ0KCQkJcmV0dXJuOw0KCQlpZiAoIWJhY2tncm91bmRfd2FrZSkNCgkJew0KCQkJaWYgKHJhZikN
CgkJCQl0aGlzLnJhZl9pZCA9IHJhZih0aGlzLnRpY2tGdW5jKTsNCgkJCWVsc2UNCgkJCXsNCgkJ
CQl0aGlzLnRpbWVvdXRfaWQgPSBzZXRUaW1lb3V0KHRoaXMudGlja0Z1bmMsIHRoaXMuaXNNb2Jp
bGUgPyAxIDogMTYpOw0KCQkJfQ0KCQl9DQoJCXZhciByYWZfdGltZSA9IHRpbWVzdGFtcCB8fCBu
b3d0aW1lOw0KCQl2YXIgZnNtb2RlID0gdGhpcy5mdWxsc2NyZWVuX21vZGU7DQoJCXZhciBpc2Z1
bGxzY3JlZW4gPSAoZG9jdW1lbnRbIm1vekZ1bGxTY3JlZW4iXSB8fCBkb2N1bWVudFsid2Via2l0
SXNGdWxsU2NyZWVuIl0gfHwgZG9jdW1lbnRbImZ1bGxTY3JlZW4iXSB8fCAhIWRvY3VtZW50WyJt
c0Z1bGxzY3JlZW5FbGVtZW50Il0pICYmICF0aGlzLmlzQ29yZG92YTsNCgkJaWYgKChpc2Z1bGxz
Y3JlZW4gfHwgdGhpcy5pc05vZGVGdWxsc2NyZWVuKSAmJiB0aGlzLmZ1bGxzY3JlZW5fc2NhbGlu
ZyA+IDApDQoJCQlmc21vZGUgPSB0aGlzLmZ1bGxzY3JlZW5fc2NhbGluZzsNCgkJaWYgKGZzbW9k
ZSA+IDApCS8vIHIyMjI6IGV4cGVyaW1lbnRhbGx5IGVuYWJsaW5nIHRoaXMgd29ya2Fyb3VuZCBm
b3IgYWxsIHBsYXRmb3Jtcw0KCQl7DQoJCQl2YXIgY3Vyd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0
aDsNCgkJCXZhciBjdXJoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQoJCQlpZiAodGhpcy5s
YXN0V2luZG93V2lkdGggIT09IGN1cndpZHRoIHx8IHRoaXMubGFzdFdpbmRvd0hlaWdodCAhPT0g
Y3VyaGVpZ2h0KQ0KCQkJew0KCQkJCXRoaXNbInNldFNpemUiXShjdXJ3aWR0aCwgY3VyaGVpZ2h0
KTsNCgkJCX0NCgkJfQ0KCQlpZiAoIXRoaXMuaXNEb21GcmVlKQ0KCQl7DQoJCQlpZiAoaXNmdWxs
c2NyZWVuKQ0KCQkJew0KCQkJCWlmICghdGhpcy5maXJzdEluRnVsbHNjcmVlbikNCgkJCQkJdGhp
cy5maXJzdEluRnVsbHNjcmVlbiA9IHRydWU7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYg
KHRoaXMuZmlyc3RJbkZ1bGxzY3JlZW4pDQoJCQkJew0KCQkJCQl0aGlzLmZpcnN0SW5GdWxsc2Ny
ZWVuID0gZmFsc2U7DQoJCQkJCWlmICh0aGlzLmZ1bGxzY3JlZW5fbW9kZSA9PT0gMCkNCgkJCQkJ
ew0KCQkJCQkJdGhpc1sic2V0U2l6ZSJdKE1hdGgucm91bmQodGhpcy5vbGRXaWR0aCAvIHRoaXMu
ZGV2aWNlUGl4ZWxSYXRpbyksIE1hdGgucm91bmQodGhpcy5vbGRIZWlnaHQgLyB0aGlzLmRldmlj
ZVBpeGVsUmF0aW8pLCB0cnVlKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJ
CQl0aGlzLm9sZFdpZHRoID0gdGhpcy53aWR0aDsNCgkJCQkJdGhpcy5vbGRIZWlnaHQgPSB0aGlz
LmhlaWdodDsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJaWYgKHRoaXMuaXNsb2FkaW5nKQ0KCQl7DQoJ
CQl2YXIgZG9uZSA9IHRoaXMuYXJlQWxsVGV4dHVyZXNBbmRTb3VuZHNMb2FkZWQoKTsJCS8vIHVw
ZGF0ZXMgdGhpcy5wcm9ncmVzcw0KCQkJdGhpcy5sb2FkaW5ncHJvZ3Jlc3MgPSB0aGlzLnByb2dy
ZXNzOw0KCQkJaWYgKGRvbmUpDQoJCQl7DQoJCQkJdGhpcy5pc2xvYWRpbmcgPSBmYWxzZTsNCgkJ
CQl0aGlzLnByb2dyZXNzID0gMTsNCgkJCQl0aGlzLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5w
cm90b3R5cGUuY25kcy5PbkxvYWRGaW5pc2hlZCwgbnVsbCk7DQoJCQkJaWYgKHdpbmRvd1siQzJf
UmVnaXN0ZXJTVyJdKQ0KCQkJCQl3aW5kb3dbIkMyX1JlZ2lzdGVyU1ciXSgpOw0KCQkJfQ0KCQl9
DQoJCXRoaXMubG9naWMocmFmX3RpbWUpOw0KCQlpZiAoKHRoaXMucmVkcmF3IHx8IHRoaXMuaXND
b2Nvb25KcykgJiYgIXRoaXMuaXNfV2ViR0xfY29udGV4dF9sb3N0ICYmICF0aGlzLnN1c3BlbmRE
cmF3aW5nICYmICFiYWNrZ3JvdW5kX3dha2UpDQoJCXsNCgkJCXRoaXMucmVkcmF3ID0gZmFsc2U7
DQoJCQlpZiAodGhpcy5nbHdyYXApDQoJCQkJdGhpcy5kcmF3R0woKTsNCgkJCWVsc2UNCgkJCQl0
aGlzLmRyYXcoKTsNCgkJCWlmICh0aGlzLnNuYXBzaG90Q2FudmFzKQ0KCQkJew0KCQkJCWlmICh0
aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy50b0RhdGFVUkwpDQoJCQkJew0KCQkJCQl0aGlzLnNu
YXBzaG90RGF0YSA9IHRoaXMuY2FudmFzLnRvRGF0YVVSTCh0aGlzLnNuYXBzaG90Q2FudmFzWzBd
LCB0aGlzLnNuYXBzaG90Q2FudmFzWzFdKTsNCgkJCQkJaWYgKHdpbmRvd1siY3Jfb25TbmFwc2hv
dCJdKQ0KCQkJCQkJd2luZG93WyJjcl9vblNuYXBzaG90Il0odGhpcy5zbmFwc2hvdERhdGEpOw0K
CQkJCQl0aGlzLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuY25kcy5PbkNhbnZh
c1NuYXBzaG90LCBudWxsKTsNCgkJCQl9DQoJCQkJdGhpcy5zbmFwc2hvdENhbnZhcyA9IG51bGw7
DQoJCQl9DQoJCX0NCgkJaWYgKCF0aGlzLmhpdF9icmVha3BvaW50KQ0KCQl7DQoJCQl0aGlzLnRp
Y2tjb3VudCsrOw0KCQkJdGhpcy50aWNrY291bnRfbm9zYXZlKys7DQoJCQl0aGlzLmV4ZWNjb3Vu
dCsrOw0KCQkJdGhpcy5mcmFtZWNvdW50Kys7DQoJCX0NCgkJdGhpcy5sb2dpY3RpbWUgKz0gY3Iu
cGVyZm9ybWFuY2Vfbm93KCkgLSBsb2dpY19zdGFydDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBl
LmxvZ2ljID0gZnVuY3Rpb24gKGN1cl90aW1lKQ0KCXsNCgkJdmFyIGksIGxlbmksIGosIGxlbmos
IGssIGxlbmssIHR5cGUsIGluc3QsIGJpbnN0Ow0KCQlpZiAoY3VyX3RpbWUgLSB0aGlzLmxhc3Rf
ZnBzX3RpbWUgPj0gMTAwMCkgIC8vIGV2ZXJ5IDEgc2Vjb25kDQoJCXsNCgkJCXRoaXMubGFzdF9m
cHNfdGltZSArPSAxMDAwOw0KCQkJaWYgKGN1cl90aW1lIC0gdGhpcy5sYXN0X2Zwc190aW1lID49
IDEwMDApDQoJCQkJdGhpcy5sYXN0X2Zwc190aW1lID0gY3VyX3RpbWU7DQoJCQl0aGlzLmZwcyA9
IHRoaXMuZnJhbWVjb3VudDsNCgkJCXRoaXMuZnJhbWVjb3VudCA9IDA7DQoJCQl0aGlzLmNwdXV0
aWxpc2F0aW9uID0gdGhpcy5sb2dpY3RpbWU7DQoJCQl0aGlzLmxvZ2ljdGltZSA9IDA7DQoJCX0N
CgkJdmFyIHdhbGxEdCA9IDA7DQoJCWlmICh0aGlzLmxhc3RfdGlja190aW1lICE9PSAwKQ0KCQl7
DQoJCQl2YXIgbXNfZGlmZiA9IGN1cl90aW1lIC0gdGhpcy5sYXN0X3RpY2tfdGltZTsNCgkJCWlm
IChtc19kaWZmIDwgMCkNCgkJCQltc19kaWZmID0gMDsNCgkJCXdhbGxEdCA9IG1zX2RpZmYgLyAx
MDAwLjA7IC8vIGR0IG1lYXN1cmVkIGluIHNlY29uZHMNCgkJCXRoaXMuZHQxID0gd2FsbER0Ow0K
CQkJaWYgKHRoaXMuZHQxID4gMC41KQ0KCQkJCXRoaXMuZHQxID0gMDsNCgkJCWVsc2UgaWYgKHRo
aXMuZHQxID4gMSAvIHRoaXMubWluaW11bUZyYW1lcmF0ZSkNCgkJCQl0aGlzLmR0MSA9IDEgLyB0
aGlzLm1pbmltdW1GcmFtZXJhdGU7DQoJCX0NCgkJdGhpcy5sYXN0X3RpY2tfdGltZSA9IGN1cl90
aW1lOw0KICAgICAgICB0aGlzLmR0ID0gdGhpcy5kdDEgKiB0aGlzLnRpbWVzY2FsZTsNCiAgICAg
ICAgdGhpcy5rYWhhblRpbWUuYWRkKHRoaXMuZHQpOw0KCQl0aGlzLndhbGxUaW1lLmFkZCh3YWxs
RHQpOwkJLy8gcHJldmVudCBtaW4vbWF4IGZyYW1lcmF0ZSBhZmZlY3Rpbmcgd2FsbCBjbG9jaw0K
CQl2YXIgaXNmdWxsc2NyZWVuID0gKGRvY3VtZW50WyJtb3pGdWxsU2NyZWVuIl0gfHwgZG9jdW1l
bnRbIndlYmtpdElzRnVsbFNjcmVlbiJdIHx8IGRvY3VtZW50WyJmdWxsU2NyZWVuIl0gfHwgISFk
b2N1bWVudFsibXNGdWxsc2NyZWVuRWxlbWVudCJdIHx8IHRoaXMuaXNOb2RlRnVsbHNjcmVlbikg
JiYgIXRoaXMuaXNDb3Jkb3ZhOw0KCQlpZiAodGhpcy5mdWxsc2NyZWVuX21vZGUgPj0gMiAvKiBz
Y2FsZSAqLyB8fCAoaXNmdWxsc2NyZWVuICYmIHRoaXMuZnVsbHNjcmVlbl9zY2FsaW5nID4gMCkp
DQoJCXsNCgkJCXZhciBvcmlnX2FzcGVjdCA9IHRoaXMub3JpZ2luYWxfd2lkdGggLyB0aGlzLm9y
aWdpbmFsX2hlaWdodDsNCgkJCXZhciBjdXJfYXNwZWN0ID0gdGhpcy53aWR0aCAvIHRoaXMuaGVp
Z2h0Ow0KCQkJdmFyIG1vZGUgPSB0aGlzLmZ1bGxzY3JlZW5fbW9kZTsNCgkJCWlmIChpc2Z1bGxz
Y3JlZW4gJiYgdGhpcy5mdWxsc2NyZWVuX3NjYWxpbmcgPiAwKQ0KCQkJCW1vZGUgPSB0aGlzLmZ1
bGxzY3JlZW5fc2NhbGluZzsNCgkJCWlmICgobW9kZSAhPT0gMiAmJiBjdXJfYXNwZWN0ID4gb3Jp
Z19hc3BlY3QpIHx8IChtb2RlID09PSAyICYmIGN1cl9hc3BlY3QgPCBvcmlnX2FzcGVjdCkpDQoJ
CQl7DQoJCQkJdGhpcy5hc3BlY3Rfc2NhbGUgPSB0aGlzLmhlaWdodCAvIHRoaXMub3JpZ2luYWxf
aGVpZ2h0Ow0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRoaXMuYXNwZWN0X3NjYWxlID0gdGhp
cy53aWR0aCAvIHRoaXMub3JpZ2luYWxfd2lkdGg7DQoJCQl9DQoJCQlpZiAodGhpcy5ydW5uaW5n
X2xheW91dCkNCgkJCXsNCgkJCQl0aGlzLnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFRvWCh0aGlzLnJ1
bm5pbmdfbGF5b3V0LnNjcm9sbFgpOw0KCQkJCXRoaXMucnVubmluZ19sYXlvdXQuc2Nyb2xsVG9Z
KHRoaXMucnVubmluZ19sYXlvdXQuc2Nyb2xsWSk7DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQkJdGhp
cy5hc3BlY3Rfc2NhbGUgPSAodGhpcy5pc1JldGluYSA/IHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA6
IDEpOw0KCQl0aGlzLkNsZWFyRGVhdGhSb3coKTsNCgkJdGhpcy5pc0luT25EZXN0cm95Kys7DQoJ
CXRoaXMuc3lzdGVtLnJ1bldhaXRzKCk7CQkvLyBwcmV2ZW50IGluc3RhbmNlIGxpc3QgY2hhbmdp
bmcNCgkJdGhpcy5pc0luT25EZXN0cm95LS07DQoJCXRoaXMuQ2xlYXJEZWF0aFJvdygpOwkJLy8g
YWxsb3cgaW5zdGFuY2UgbGlzdCBjaGFuZ2luZw0KCQl0aGlzLmlzSW5PbkRlc3Ryb3krKzsNCiAg
ICAgICAgdmFyIHRpY2thcnIgPSB0aGlzLm9iamVjdHNfdG9fcHJldGljay52YWx1ZXNSZWYoKTsN
CiAgICAgICAgZm9yIChpID0gMCwgbGVuaSA9IHRpY2thcnIubGVuZ3RoOyBpIDwgbGVuaTsgaSsr
KQ0KICAgICAgICAgICAgdGlja2FycltpXS5wcmV0aWNrKCk7DQoJCWZvciAoaSA9IDAsIGxlbmkg
PSB0aGlzLnR5cGVzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJew0KCQkJdHlw
ZSA9IHRoaXMudHlwZXNfYnlfaW5kZXhbaV07DQoJCQlpZiAodHlwZS5pc19mYW1pbHkgfHwgKCF0
eXBlLmJlaGF2aW9ycy5sZW5ndGggJiYgIXR5cGUuZmFtaWxpZXMubGVuZ3RoKSkNCgkJCQljb250
aW51ZTsNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBlLmluc3RhbmNlcy5sZW5ndGg7IGogPCBs
ZW5qOyBqKyspDQoJCQl7DQoJCQkJaW5zdCA9IHR5cGUuaW5zdGFuY2VzW2pdOw0KCQkJCWZvciAo
ayA9IDAsIGxlbmsgPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsgayA8IGxlbms7IGsrKykN
CgkJCQl7DQoJCQkJCWluc3QuYmVoYXZpb3JfaW5zdHNba10udGljaygpOw0KCQkJCX0NCgkJCX0N
CgkJfQ0KCQlmb3IgKGkgPSAwLCBsZW5pID0gdGhpcy50eXBlc19ieV9pbmRleC5sZW5ndGg7IGkg
PCBsZW5pOyBpKyspDQoJCXsNCgkJCXR5cGUgPSB0aGlzLnR5cGVzX2J5X2luZGV4W2ldOw0KCQkJ
aWYgKHR5cGUuaXNfZmFtaWx5IHx8ICghdHlwZS5iZWhhdmlvcnMubGVuZ3RoICYmICF0eXBlLmZh
bWlsaWVzLmxlbmd0aCkpDQoJCQkJY29udGludWU7CS8vIHR5cGUgZG9lc24ndCBoYXZlIGFueSBi
ZWhhdmlvcnMNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBlLmluc3RhbmNlcy5sZW5ndGg7IGog
PCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJaW5zdCA9IHR5cGUuaW5zdGFuY2VzW2pdOw0KCQkJCWZv
ciAoayA9IDAsIGxlbmsgPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsgayA8IGxlbms7IGsr
KykNCgkJCQl7DQoJCQkJCWJpbnN0ID0gaW5zdC5iZWhhdmlvcl9pbnN0c1trXTsNCgkJCQkJaWYg
KGJpbnN0LnBvc3R0aWNrKQ0KCQkJCQkJYmluc3QucG9zdHRpY2soKTsNCgkJCQl9DQoJCQl9DQoJ
CX0NCiAgICAgICAgdGlja2FyciA9IHRoaXMub2JqZWN0c190b190aWNrLnZhbHVlc1JlZigpOw0K
ICAgICAgICBmb3IgKGkgPSAwLCBsZW5pID0gdGlja2Fyci5sZW5ndGg7IGkgPCBsZW5pOyBpKysp
DQogICAgICAgICAgICB0aWNrYXJyW2ldLnRpY2soKTsNCgkJdGhpcy5pc0luT25EZXN0cm95LS07
CQkvLyBlbmQgcHJldmVudGluZyBpbnN0YW5jZSBsaXN0cyBmcm9tIGJlaW5nIGNoYW5nZWQNCgkJ
dGhpcy5oYW5kbGVTYXZlTG9hZCgpOwkJLy8gc2F2ZS9sb2FkIG5vdyBpZiBxdWV1ZWQNCgkJaSA9
IDA7DQoJCXdoaWxlICh0aGlzLmNoYW5nZWxheW91dCAmJiBpKysgPCAxMCkNCgkJew0KCQkJdGhp
cy5kb0NoYW5nZUxheW91dCh0aGlzLmNoYW5nZWxheW91dCk7DQoJCX0NCiAgICAgICAgZm9yIChp
ID0gMCwgbGVuaSA9IHRoaXMuZXZlbnRzaGVldHNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuaTsg
aSsrKQ0KICAgICAgICAgICAgdGhpcy5ldmVudHNoZWV0c19ieV9pbmRleFtpXS5oYXNSdW4gPSBm
YWxzZTsNCgkJaWYgKHRoaXMucnVubmluZ19sYXlvdXQuZXZlbnRfc2hlZXQpDQoJCQl0aGlzLnJ1
bm5pbmdfbGF5b3V0LmV2ZW50X3NoZWV0LnJ1bigpOw0KCQljci5jbGVhckFycmF5KHRoaXMucmVn
aXN0ZXJlZF9jb2xsaXNpb25zKTsNCgkJdGhpcy5sYXlvdXRfZmlyc3RfdGljayA9IGZhbHNlOw0K
CQl0aGlzLmlzSW5PbkRlc3Ryb3krKzsJCS8vIHByZXZlbnQgaW5zdGFuY2UgbGlzdHMgZnJvbSBi
ZWluZyBjaGFuZ2VkDQoJCWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLnR5cGVzX2J5X2luZGV4Lmxl
bmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJew0KCQkJdHlwZSA9IHRoaXMudHlwZXNfYnlfaW5kZXhb
aV07DQoJCQlpZiAodHlwZS5pc19mYW1pbHkgfHwgKCF0eXBlLmJlaGF2aW9ycy5sZW5ndGggJiYg
IXR5cGUuZmFtaWxpZXMubGVuZ3RoKSkNCgkJCQljb250aW51ZTsJLy8gdHlwZSBkb2Vzbid0IGhh
dmUgYW55IGJlaGF2aW9ycw0KCQkJZm9yIChqID0gMCwgbGVuaiA9IHR5cGUuaW5zdGFuY2VzLmxl
bmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCXsNCgkJCQl2YXIgaW5zdCA9IHR5cGUuaW5zdGFuY2Vz
W2pdOw0KCQkJCWZvciAoayA9IDAsIGxlbmsgPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsg
ayA8IGxlbms7IGsrKykNCgkJCQl7DQoJCQkJCWJpbnN0ID0gaW5zdC5iZWhhdmlvcl9pbnN0c1tr
XTsNCgkJCQkJaWYgKGJpbnN0LnRpY2syKQ0KCQkJCQkJYmluc3QudGljazIoKTsNCgkJCQl9DQoJ
CQl9DQoJCX0NCiAgICAgICAgdGlja2FyciA9IHRoaXMub2JqZWN0c190b190aWNrMi52YWx1ZXNS
ZWYoKTsNCiAgICAgICAgZm9yIChpID0gMCwgbGVuaSA9IHRpY2thcnIubGVuZ3RoOyBpIDwgbGVu
aTsgaSsrKQ0KICAgICAgICAgICAgdGlja2FycltpXS50aWNrMigpOw0KCQl0aGlzLmlzSW5PbkRl
c3Ryb3ktLTsJCS8vIGVuZCBwcmV2ZW50aW5nIGluc3RhbmNlIGxpc3RzIGZyb20gYmVpbmcgY2hh
bmdlZA0KCX07DQoJUnVudGltZS5wcm90b3R5cGUub25XaW5kb3dCbHVyID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXZhciBpLCBsZW5pLCBqLCBsZW5qLCBrLCBsZW5rLCB0eXBlLCBpbnN0LCBiaW5zdDsN
CgkJZm9yIChpID0gMCwgbGVuaSA9IHRoaXMudHlwZXNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVu
aTsgaSsrKQ0KCQl7DQoJCQl0eXBlID0gdGhpcy50eXBlc19ieV9pbmRleFtpXTsNCgkJCWlmICh0
eXBlLmlzX2ZhbWlseSkNCgkJCQljb250aW51ZTsNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBl
Lmluc3RhbmNlcy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJaW5zdCA9IHR5cGUu
aW5zdGFuY2VzW2pdOw0KCQkJCWlmIChpbnN0Lm9uV2luZG93Qmx1cikNCgkJCQkJaW5zdC5vbldp
bmRvd0JsdXIoKTsNCgkJCQlpZiAoIWluc3QuYmVoYXZpb3JfaW5zdHMpDQoJCQkJCWNvbnRpbnVl
OwkvLyBzaW5nbGUtZ2xvYmFscyBkb24ndCBoYXZlIGJlaGF2aW9yX2luc3RzDQoJCQkJZm9yIChr
ID0gMCwgbGVuayA9IGluc3QuYmVoYXZpb3JfaW5zdHMubGVuZ3RoOyBrIDwgbGVuazsgaysrKQ0K
CQkJCXsNCgkJCQkJYmluc3QgPSBpbnN0LmJlaGF2aW9yX2luc3RzW2tdOw0KCQkJCQlpZiAoYmlu
c3Qub25XaW5kb3dCbHVyKQ0KCQkJCQkJYmluc3Qub25XaW5kb3dCbHVyKCk7DQoJCQkJfQ0KCQkJ
fQ0KCQl9DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5kb0NoYW5nZUxheW91dCA9IGZ1bmN0aW9u
IChjaGFuZ2VUb0xheW91dCkNCgl7DQoJCXZhciBwcmV2X2xheW91dCA9IHRoaXMucnVubmluZ19s
YXlvdXQ7DQoJCXRoaXMucnVubmluZ19sYXlvdXQuc3RvcFJ1bm5pbmcoKTsNCgkJdmFyIGksIGxl
biwgaiwgbGVuaiwgaywgbGVuaywgdHlwZSwgaW5zdCwgYmluc3Q7DQoJCWlmICh0aGlzLmdsd3Jh
cCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50eXBlc19ieV9pbmRleC5sZW5ndGg7
IGkgPCBsZW47IGkrKykNCgkJCXsNCgkJCQl0eXBlID0gdGhpcy50eXBlc19ieV9pbmRleFtpXTsN
CgkJCQlpZiAodHlwZS5pc19mYW1pbHkpDQoJCQkJCWNvbnRpbnVlOw0KCQkJCWlmICh0eXBlLnVu
bG9hZFRleHR1cmVzICYmICghdHlwZS5nbG9iYWwgfHwgdHlwZS5pbnN0YW5jZXMubGVuZ3RoID09
PSAwKSAmJiBjaGFuZ2VUb0xheW91dC5pbml0aWFsX3R5cGVzLmluZGV4T2YodHlwZSkgPT09IC0x
KQ0KCQkJCXsNCgkJCQkJdHlwZS51bmxvYWRUZXh0dXJlcygpOw0KCQkJCX0NCgkJCX0NCgkJfQ0K
CQlpZiAocHJldl9sYXlvdXQgPT0gY2hhbmdlVG9MYXlvdXQpDQoJCQljci5jbGVhckFycmF5KHRo
aXMuc3lzdGVtLndhaXRzKTsNCgkJY3IuY2xlYXJBcnJheSh0aGlzLnJlZ2lzdGVyZWRfY29sbGlz
aW9ucyk7DQoJCXRoaXMucnVuTGF5b3V0Q2hhbmdlTWV0aG9kcyh0cnVlKTsNCgkJY2hhbmdlVG9M
YXlvdXQuc3RhcnRSdW5uaW5nKCk7DQoJCXRoaXMucnVuTGF5b3V0Q2hhbmdlTWV0aG9kcyhmYWxz
ZSk7DQoJCXRoaXMucmVkcmF3ID0gdHJ1ZTsNCgkJdGhpcy5sYXlvdXRfZmlyc3RfdGljayA9IHRy
dWU7DQoJCXRoaXMuQ2xlYXJEZWF0aFJvdygpOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUucnVu
TGF5b3V0Q2hhbmdlTWV0aG9kcyA9IGZ1bmN0aW9uIChpc0JlZm9yZUNoYW5nZSkNCgl7DQoJCXZh
ciBpLCBsZW4sIGJlaCwgdHlwZSwgaiwgbGVuaiwgaW5zdCwgaywgbGVuaywgYmluc3Q7DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IHRoaXMuYmVoYXZpb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7
DQoJCQliZWggPSB0aGlzLmJlaGF2aW9yc1tpXTsNCgkJCWlmIChpc0JlZm9yZUNoYW5nZSkNCgkJ
CXsNCgkJCQlpZiAoYmVoLm9uQmVmb3JlTGF5b3V0Q2hhbmdlKQ0KCQkJCQliZWgub25CZWZvcmVM
YXlvdXRDaGFuZ2UoKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAoYmVoLm9uTGF5b3V0
Q2hhbmdlKQ0KCQkJCQliZWgub25MYXlvdXRDaGFuZ2UoKTsNCgkJCX0NCgkJfQ0KCQlmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLnR5cGVzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7
DQoJCQl0eXBlID0gdGhpcy50eXBlc19ieV9pbmRleFtpXTsNCgkJCWlmICghdHlwZS5nbG9iYWwg
JiYgIXR5cGUucGx1Z2luLnNpbmdsZWdsb2JhbCkNCgkJCQljb250aW51ZTsNCgkJCWZvciAoaiA9
IDAsIGxlbmogPSB0eXBlLmluc3RhbmNlcy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJ
CQkJaW5zdCA9IHR5cGUuaW5zdGFuY2VzW2pdOw0KCQkJCWlmIChpc0JlZm9yZUNoYW5nZSkNCgkJ
CQl7DQoJCQkJCWlmIChpbnN0Lm9uQmVmb3JlTGF5b3V0Q2hhbmdlKQ0KCQkJCQkJaW5zdC5vbkJl
Zm9yZUxheW91dENoYW5nZSgpOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQlpZiAoaW5z
dC5vbkxheW91dENoYW5nZSkNCgkJCQkJCWluc3Qub25MYXlvdXRDaGFuZ2UoKTsNCgkJCQl9DQoJ
CQkJaWYgKGluc3QuYmVoYXZpb3JfaW5zdHMpDQoJCQkJew0KCQkJCQlmb3IgKGsgPSAwLCBsZW5r
ID0gaW5zdC5iZWhhdmlvcl9pbnN0cy5sZW5ndGg7IGsgPCBsZW5rOyBrKyspDQoJCQkJCXsNCgkJ
CQkJCWJpbnN0ID0gaW5zdC5iZWhhdmlvcl9pbnN0c1trXTsNCgkJCQkJCWlmIChpc0JlZm9yZUNo
YW5nZSkNCgkJCQkJCXsNCgkJCQkJCQlpZiAoYmluc3Qub25CZWZvcmVMYXlvdXRDaGFuZ2UpDQoJ
CQkJCQkJCWJpbnN0Lm9uQmVmb3JlTGF5b3V0Q2hhbmdlKCk7DQoJCQkJCQl9DQoJCQkJCQllbHNl
DQoJCQkJCQl7DQoJCQkJCQkJaWYgKGJpbnN0Lm9uTGF5b3V0Q2hhbmdlKQ0KCQkJCQkJCQliaW5z
dC5vbkxheW91dENoYW5nZSgpOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJ
fTsNCglSdW50aW1lLnByb3RvdHlwZS5wcmV0aWNrTWUgPSBmdW5jdGlvbiAoaW5zdCkNCiAgICB7
DQogICAgICAgIHRoaXMub2JqZWN0c190b19wcmV0aWNrLmFkZChpbnN0KTsNCiAgICB9Ow0KCVJ1
bnRpbWUucHJvdG90eXBlLnVucHJldGlja01lID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQl0aGlz
Lm9iamVjdHNfdG9fcHJldGljay5yZW1vdmUoaW5zdCk7DQoJfTsNCiAgICBSdW50aW1lLnByb3Rv
dHlwZS50aWNrTWUgPSBmdW5jdGlvbiAoaW5zdCkNCiAgICB7DQogICAgICAgIHRoaXMub2JqZWN0
c190b190aWNrLmFkZChpbnN0KTsNCiAgICB9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnVudGlja01l
ID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQl0aGlzLm9iamVjdHNfdG9fdGljay5yZW1vdmUoaW5z
dCk7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS50aWNrMk1lID0gZnVuY3Rpb24gKGluc3QpDQog
ICAgew0KICAgICAgICB0aGlzLm9iamVjdHNfdG9fdGljazIuYWRkKGluc3QpOw0KICAgIH07DQoJ
UnVudGltZS5wcm90b3R5cGUudW50aWNrMk1lID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQl0aGlz
Lm9iamVjdHNfdG9fdGljazIucmVtb3ZlKGluc3QpOw0KCX07DQogICAgUnVudGltZS5wcm90b3R5
cGUuZ2V0RHQgPSBmdW5jdGlvbiAoaW5zdCkNCiAgICB7DQogICAgICAgIGlmICghaW5zdCB8fCBp
bnN0Lm15X3RpbWVzY2FsZSA9PT0gLTEuMCkNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmR0Ow0K
ICAgICAgICByZXR1cm4gdGhpcy5kdDEgKiBpbnN0Lm15X3RpbWVzY2FsZTsNCiAgICB9Ow0KCVJ1
bnRpbWUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5ydW5uaW5nX2xh
eW91dC5kcmF3KHRoaXMuY3R4KTsNCgkJaWYgKHRoaXMuaXNEaXJlY3RDYW52YXMpDQoJCQl0aGlz
LmN0eFsicHJlc2VudCJdKCk7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5kcmF3R0wgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMuZW5hYmxlRnJvbnRUb0JhY2spDQoJCXsNCgkJCXRoaXMu
ZWFybHl6X2luZGV4ID0gMTsJCS8vIHN0YXJ0IGZyb20gZnJvbnQsIDEtYmFzZWQgdG8gYXZvaWQg
ZXhhY3RseSBlcXVhbGxpbmcgbmVhciBwbGFuZSBaIHZhbHVlDQoJCQl0aGlzLnJ1bm5pbmdfbGF5
b3V0LmRyYXdHTF9lYXJseVpQYXNzKHRoaXMuZ2x3cmFwKTsNCgkJfQ0KCQl0aGlzLnJ1bm5pbmdf
bGF5b3V0LmRyYXdHTCh0aGlzLmdsd3JhcCk7DQoJCXRoaXMuZ2x3cmFwLnByZXNlbnQoKTsNCgl9
Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmFkZERlc3Ryb3lDYWxsYmFjayA9IGZ1bmN0aW9uIChmKQ0K
CXsNCgkJaWYgKGYpDQoJCQl0aGlzLmRlc3Ryb3ljYWxsYmFja3MucHVzaChmKTsNCgl9Ow0KCVJ1
bnRpbWUucHJvdG90eXBlLnJlbW92ZURlc3Ryb3lDYWxsYmFjayA9IGZ1bmN0aW9uIChmKQ0KCXsN
CgkJY3IuYXJyYXlGaW5kUmVtb3ZlKHRoaXMuZGVzdHJveWNhbGxiYWNrcywgZik7DQoJfTsNCglS
dW50aW1lLnByb3RvdHlwZS5nZXRPYmplY3RCeVVJRCA9IGZ1bmN0aW9uICh1aWRfKQ0KCXsNCjsN
CgkJdmFyIHVpZHN0ciA9IHVpZF8udG9TdHJpbmcoKTsNCgkJaWYgKHRoaXMub2JqZWN0c0J5VWlk
Lmhhc093blByb3BlcnR5KHVpZHN0cikpDQoJCQlyZXR1cm4gdGhpcy5vYmplY3RzQnlVaWRbdWlk
c3RyXTsNCgkJZWxzZQ0KCQkJcmV0dXJuIG51bGw7DQoJfTsNCgl2YXIgb2JqZWN0c2V0X2NhY2hl
ID0gW107DQoJZnVuY3Rpb24gYWxsb2Nfb2JqZWN0c2V0KCkNCgl7DQoJCWlmIChvYmplY3RzZXRf
Y2FjaGUubGVuZ3RoKQ0KCQkJcmV0dXJuIG9iamVjdHNldF9jYWNoZS5wb3AoKTsNCgkJZWxzZQ0K
CQkJcmV0dXJuIG5ldyBjci5PYmplY3RTZXQoKTsNCgl9Ow0KCWZ1bmN0aW9uIGZyZWVfb2JqZWN0
c2V0KHMpDQoJew0KCQlzLmNsZWFyKCk7DQoJCW9iamVjdHNldF9jYWNoZS5wdXNoKHMpOw0KCX07
DQoJUnVudGltZS5wcm90b3R5cGUuRGVzdHJveUluc3RhbmNlID0gZnVuY3Rpb24gKGluc3QpDQoJ
ew0KCQl2YXIgaSwgbGVuOw0KCQl2YXIgdHlwZSA9IGluc3QudHlwZTsNCgkJdmFyIHR5cGVuYW1l
ID0gdHlwZS5uYW1lOw0KCQl2YXIgaGFzX3R5cGVuYW1lID0gdGhpcy5kZWF0aFJvdy5oYXNPd25Q
cm9wZXJ0eSh0eXBlbmFtZSk7DQoJCXZhciBvYmpfc2V0ID0gbnVsbDsNCgkJaWYgKGhhc190eXBl
bmFtZSkNCgkJew0KCQkJb2JqX3NldCA9IHRoaXMuZGVhdGhSb3dbdHlwZW5hbWVdOw0KCQkJaWYg
KG9ial9zZXQuY29udGFpbnMoaW5zdCkpDQoJCQkJcmV0dXJuOwkJLy8gYWxyZWFkeSBoYWQgRGVz
dHJveUluc3RhbmNlIGNhbGxlZA0KCQl9DQoJCWVsc2UNCgkJew0KCQkJb2JqX3NldCA9IGFsbG9j
X29iamVjdHNldCgpOw0KCQkJdGhpcy5kZWF0aFJvd1t0eXBlbmFtZV0gPSBvYmpfc2V0Ow0KCQl9
DQoJCW9ial9zZXQuYWRkKGluc3QpOw0KCQl0aGlzLmhhc1BlbmRpbmdJbnN0YW5jZXMgPSB0cnVl
Ow0KCQlpZiAoaW5zdC5pc19jb250YWluZWQpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGlu
c3Quc2libGluZ3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJdGhpcy5EZXN0cm95
SW5zdGFuY2UoaW5zdC5zaWJsaW5nc1tpXSk7DQoJCQl9DQoJCX0NCgkJaWYgKHRoaXMuaXNJbkNs
ZWFyRGVhdGhSb3cpDQoJCQlvYmpfc2V0LnZhbHVlc19jYWNoZS5wdXNoKGluc3QpOw0KCQlpZiAo
IXRoaXMuaXNFbmRpbmdMYXlvdXQpDQoJCXsNCgkJCXRoaXMuaXNJbk9uRGVzdHJveSsrOwkJLy8g
c3VwcG9ydCByZWN1cnNpb24NCgkJCXRoaXMudHJpZ2dlcihPYmplY3QuZ2V0UHJvdG90eXBlT2Yo
aW5zdC50eXBlLnBsdWdpbikuY25kcy5PbkRlc3Ryb3llZCwgaW5zdCk7DQoJCQl0aGlzLmlzSW5P
bkRlc3Ryb3ktLTsNCgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuQ2xlYXJEZWF0aFJvdyA9
IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAoIXRoaXMuaGFzUGVuZGluZ0luc3RhbmNlcykNCgkJCXJl
dHVybjsNCgkJdmFyIGluc3QsIHR5cGUsIGluc3RhbmNlczsNCgkJdmFyIGksIGosIGxlbmksIGxl
bmosIG9ial9zZXQ7DQoJCXRoaXMuaXNJbkNsZWFyRGVhdGhSb3cgPSB0cnVlOw0KCQlmb3IgKGkg
PSAwLCBsZW5pID0gdGhpcy5jcmVhdGVSb3cubGVuZ3RoOyBpIDwgbGVuaTsgKytpKQ0KCQl7DQoJ
CQlpbnN0ID0gdGhpcy5jcmVhdGVSb3dbaV07DQoJCQl0eXBlID0gaW5zdC50eXBlOw0KCQkJdHlw
ZS5pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBlLmZhbWls
aWVzLmxlbmd0aDsgaiA8IGxlbmo7ICsraikNCgkJCXsNCgkJCQl0eXBlLmZhbWlsaWVzW2pdLmlu
c3RhbmNlcy5wdXNoKGluc3QpOw0KCQkJCXR5cGUuZmFtaWxpZXNbal0uc3RhbGVfaWlkcyA9IHRy
dWU7DQoJCQl9DQoJCX0NCgkJY3IuY2xlYXJBcnJheSh0aGlzLmNyZWF0ZVJvdyk7DQoJCXRoaXMu
SXRlcmF0ZURlYXRoUm93KCk7CQkvLyBtb3ZlZCB0byBzZXBhcmF0ZSBmdW5jdGlvbiBzbyBmb3It
aW4gcGVyZm9ybWFuY2UgZG9lc24ndCBob2JibGUgZW50aXJlIGZ1bmN0aW9uDQoJCWNyLndpcGUo
dGhpcy5kZWF0aFJvdyk7CQkvLyBhbGwgb2JqZWN0c2V0cyBoYXZlIGFscmVhZHkgYmVlbiByZWN5
Y2xlZA0KCQl0aGlzLmlzSW5DbGVhckRlYXRoUm93ID0gZmFsc2U7DQoJCXRoaXMuaGFzUGVuZGlu
Z0luc3RhbmNlcyA9IGZhbHNlOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuSXRlcmF0ZURlYXRo
Um93ID0gZnVuY3Rpb24gKCkNCgl7DQoJCWZvciAodmFyIHAgaW4gdGhpcy5kZWF0aFJvdykNCgkJ
ew0KCQkJaWYgKHRoaXMuZGVhdGhSb3cuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJdGhp
cy5DbGVhckRlYXRoUm93Rm9yVHlwZSh0aGlzLmRlYXRoUm93W3BdKTsNCgkJCX0NCgkJfQ0KCX07
DQoJUnVudGltZS5wcm90b3R5cGUuQ2xlYXJEZWF0aFJvd0ZvclR5cGUgPSBmdW5jdGlvbiAob2Jq
X3NldCkNCgl7DQoJCXZhciBhcnIgPSBvYmpfc2V0LnZhbHVlc1JlZigpOwkJCS8vIGdldCBhcnJh
eSBvZiBpdGVtcyBmcm9tIHNldA0KOw0KCQl2YXIgdHlwZSA9IGFyclswXS50eXBlOw0KOw0KOw0K
CQl2YXIgaSwgbGVuLCBqLCBsZW5qLCB3LCBmLCBsYXllcl9pbnN0YW5jZXMsIGluc3Q7DQoJCWNy
LmFycmF5UmVtb3ZlQWxsRnJvbU9iamVjdFNldCh0eXBlLmluc3RhbmNlcywgb2JqX3NldCk7DQoJ
CXR5cGUuc3RhbGVfaWlkcyA9IHRydWU7DQoJCWlmICh0eXBlLmluc3RhbmNlcy5sZW5ndGggPT09
IDApDQoJCQl0eXBlLmFueV9pbnN0YW5jZV9wYXJhbGxheGVkID0gZmFsc2U7DQoJCWZvciAoaSA9
IDAsIGxlbiA9IHR5cGUuZmFtaWxpZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCWYg
PSB0eXBlLmZhbWlsaWVzW2ldOw0KCQkJY3IuYXJyYXlSZW1vdmVBbGxGcm9tT2JqZWN0U2V0KGYu
aW5zdGFuY2VzLCBvYmpfc2V0KTsNCgkJCWYuc3RhbGVfaWlkcyA9IHRydWU7DQoJCX0NCgkJZm9y
IChpID0gMCwgbGVuID0gdGhpcy5zeXN0ZW0ud2FpdHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJ
CXsNCgkJCXcgPSB0aGlzLnN5c3RlbS53YWl0c1tpXTsNCgkJCWlmICh3LnNvbHMuaGFzT3duUHJv
cGVydHkodHlwZS5pbmRleCkpDQoJCQkJY3IuYXJyYXlSZW1vdmVBbGxGcm9tT2JqZWN0U2V0KHcu
c29sc1t0eXBlLmluZGV4XS5pbnN0cywgb2JqX3NldCk7DQoJCQlpZiAoIXR5cGUuaXNfZmFtaWx5
KQ0KCQkJew0KCQkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBlLmZhbWlsaWVzLmxlbmd0aDsgaiA8
IGxlbmo7ICsraikNCgkJCQl7DQoJCQkJCWYgPSB0eXBlLmZhbWlsaWVzW2pdOw0KCQkJCQlpZiAo
dy5zb2xzLmhhc093blByb3BlcnR5KGYuaW5kZXgpKQ0KCQkJCQkJY3IuYXJyYXlSZW1vdmVBbGxG
cm9tT2JqZWN0U2V0KHcuc29sc1tmLmluZGV4XS5pbnN0cywgb2JqX3NldCk7DQoJCQkJfQ0KCQkJ
fQ0KCQl9DQoJCXZhciBmaXJzdF9sYXllciA9IGFyclswXS5sYXllcjsNCgkJaWYgKGZpcnN0X2xh
eWVyKQ0KCQl7DQoJCQlpZiAoZmlyc3RfbGF5ZXIudXNlUmVuZGVyQ2VsbHMpDQoJCQl7DQoJCQkJ
bGF5ZXJfaW5zdGFuY2VzID0gZmlyc3RfbGF5ZXIuaW5zdGFuY2VzOw0KCQkJCWZvciAoaSA9IDAs
IGxlbiA9IGxheWVyX2luc3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCQl7DQoJCQkJ
CWluc3QgPSBsYXllcl9pbnN0YW5jZXNbaV07DQoJCQkJCWlmICghb2JqX3NldC5jb250YWlucyhp
bnN0KSkNCgkJCQkJCWNvbnRpbnVlOwkJLy8gbm90IGRlc3Ryb3lpbmcgdGhpcyBpbnN0YW5jZQ0K
CQkJCQlpbnN0LnVwZGF0ZV9iYm94KCk7DQoJCQkJCWZpcnN0X2xheWVyLnJlbmRlcl9ncmlkLnVw
ZGF0ZShpbnN0LCBpbnN0LnJlbmRlcmNlbGxzLCBudWxsKTsNCgkJCQkJaW5zdC5yZW5kZXJjZWxs
cy5zZXQoMCwgMCwgLTEsIC0xKTsNCgkJCQl9DQoJCQl9DQoJCQljci5hcnJheVJlbW92ZUFsbEZy
b21PYmplY3RTZXQoZmlyc3RfbGF5ZXIuaW5zdGFuY2VzLCBvYmpfc2V0KTsNCgkJCWZpcnN0X2xh
eWVyLnNldFpJbmRpY2VzU3RhbGVGcm9tKDApOw0KCQl9DQoJCWZvciAoaSA9IDA7IGkgPCBhcnIu
bGVuZ3RoOyArK2kpCQkvLyBjaGVjayBhcnJheSBsZW5ndGggZXZlcnkgdGltZSBpbiBjYXNlIGl0
IGNoYW5nZXMNCgkJew0KCQkJdGhpcy5DbGVhckRlYXRoUm93Rm9yU2luZ2xlSW5zdGFuY2UoYXJy
W2ldLCB0eXBlKTsNCgkJfQ0KCQlmcmVlX29iamVjdHNldChvYmpfc2V0KTsNCgkJdGhpcy5yZWRy
YXcgPSB0cnVlOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuQ2xlYXJEZWF0aFJvd0ZvclNpbmds
ZUluc3RhbmNlID0gZnVuY3Rpb24gKGluc3QsIHR5cGUpDQoJew0KCQl2YXIgaSwgbGVuLCBiaW5z
dDsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5kZXN0cm95Y2FsbGJhY2tzLmxlbmd0aDsgaSA8
IGxlbjsgKytpKQ0KCQkJdGhpcy5kZXN0cm95Y2FsbGJhY2tzW2ldKGluc3QpOw0KCQlpZiAoaW5z
dC5jb2xsY2VsbHMpDQoJCXsNCgkJCXR5cGUuY29sbGlzaW9uX2dyaWQudXBkYXRlKGluc3QsIGlu
c3QuY29sbGNlbGxzLCBudWxsKTsNCgkJfQ0KCQl2YXIgbGF5ZXIgPSBpbnN0LmxheWVyOw0KCQlp
ZiAobGF5ZXIpDQoJCXsNCgkJCWxheWVyLnJlbW92ZUZyb21JbnN0YW5jZUxpc3QoaW5zdCwgdHJ1
ZSk7CQkvLyByZW1vdmUgZnJvbSBib3RoIGluc3RhbmNlIGxpc3QgYW5kIHJlbmRlciBncmlkDQoJ
CX0NCgkJaWYgKGluc3QuYmVoYXZpb3JfaW5zdHMpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9
IGluc3QuYmVoYXZpb3JfaW5zdHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCQl7DQoJCQkJYmlu
c3QgPSBpbnN0LmJlaGF2aW9yX2luc3RzW2ldOw0KCQkJCWlmIChiaW5zdC5vbkRlc3Ryb3kpDQoJ
CQkJCWJpbnN0Lm9uRGVzdHJveSgpOw0KCQkJCWJpbnN0LmJlaGF2aW9yLm15X2luc3RhbmNlcy5y
ZW1vdmUoaW5zdCk7DQoJCQl9DQoJCX0NCgkJdGhpcy5vYmplY3RzX3RvX3ByZXRpY2sucmVtb3Zl
KGluc3QpOw0KCQl0aGlzLm9iamVjdHNfdG9fdGljay5yZW1vdmUoaW5zdCk7DQoJCXRoaXMub2Jq
ZWN0c190b190aWNrMi5yZW1vdmUoaW5zdCk7DQoJCWlmIChpbnN0Lm9uRGVzdHJveSkNCgkJCWlu
c3Qub25EZXN0cm95KCk7DQoJCWlmICh0aGlzLm9iamVjdHNCeVVpZC5oYXNPd25Qcm9wZXJ0eShp
bnN0LnVpZC50b1N0cmluZygpKSkNCgkJCWRlbGV0ZSB0aGlzLm9iamVjdHNCeVVpZFtpbnN0LnVp
ZC50b1N0cmluZygpXTsNCgkJdGhpcy5vYmplY3Rjb3VudC0tOw0KCQlpZiAodHlwZS5kZWFkQ2Fj
aGUubGVuZ3RoIDwgMTAwKQ0KCQkJdHlwZS5kZWFkQ2FjaGUucHVzaChpbnN0KTsNCgl9Ow0KCVJ1
bnRpbWUucHJvdG90eXBlLmNyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24gKHR5cGUsIGxheWVyLCBz
eCwgc3kpDQoJew0KCQlpZiAodHlwZS5pc19mYW1pbHkpDQoJCXsNCgkJCXZhciBpID0gY3IuZmxv
b3IoTWF0aC5yYW5kb20oKSAqIHR5cGUubWVtYmVycy5sZW5ndGgpOw0KCQkJcmV0dXJuIHRoaXMu
Y3JlYXRlSW5zdGFuY2UodHlwZS5tZW1iZXJzW2ldLCBsYXllciwgc3gsIHN5KTsNCgkJfQ0KCQlp
ZiAoIXR5cGUuZGVmYXVsdF9pbnN0YW5jZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCgkJ
cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2VGcm9tSW5pdCh0eXBlLmRlZmF1bHRfaW5zdGFuY2Us
IGxheWVyLCBmYWxzZSwgc3gsIHN5LCBmYWxzZSk7DQoJfTsNCgl2YXIgYWxsX2JlaGF2aW9ycyA9
IFtdOw0KCVJ1bnRpbWUucHJvdG90eXBlLmNyZWF0ZUluc3RhbmNlRnJvbUluaXQgPSBmdW5jdGlv
biAoaW5pdGlhbF9pbnN0LCBsYXllciwgaXNfc3RhcnR1cF9pbnN0YW5jZSwgc3gsIHN5LCBza2lw
X3NpYmxpbmdzKQ0KCXsNCgkJdmFyIGksIGxlbiwgaiwgbGVuaiwgcCwgZWZmZWN0X2ZhbGxiYWNr
LCB4LCB5Ow0KCQlpZiAoIWluaXRpYWxfaW5zdCkNCgkJCXJldHVybiBudWxsOw0KCQl2YXIgdHlw
ZSA9IHRoaXMudHlwZXNfYnlfaW5kZXhbaW5pdGlhbF9pbnN0WzFdXTsNCjsNCjsNCgkJdmFyIGlz
X3dvcmxkID0gdHlwZS5wbHVnaW4uaXNfd29ybGQ7DQo7DQoJCWlmICh0aGlzLmlzbG9hZGluZyAm
JiBpc193b3JsZCAmJiAhdHlwZS5pc09uTG9hZGVyTGF5b3V0KQ0KCQkJcmV0dXJuIG51bGw7DQoJ
CWlmIChpc193b3JsZCAmJiAhdGhpcy5nbHdyYXAgJiYgaW5pdGlhbF9pbnN0WzBdWzExXSA9PT0g
MTEpDQoJCQlyZXR1cm4gbnVsbDsNCgkJdmFyIG9yaWdpbmFsX2xheWVyID0gbGF5ZXI7DQoJCWlm
ICghaXNfd29ybGQpDQoJCQlsYXllciA9IG51bGw7DQoJCXZhciBpbnN0Ow0KCQlpZiAodHlwZS5k
ZWFkQ2FjaGUubGVuZ3RoKQ0KCQl7DQoJCQlpbnN0ID0gdHlwZS5kZWFkQ2FjaGUucG9wKCk7DQoJ
CQlpbnN0LnJlY3ljbGVkID0gdHJ1ZTsNCgkJCXR5cGUucGx1Z2luLkluc3RhbmNlLmNhbGwoaW5z
dCwgdHlwZSk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpbnN0ID0gbmV3IHR5cGUucGx1Z2luLklu
c3RhbmNlKHR5cGUpOw0KCQkJaW5zdC5yZWN5Y2xlZCA9IGZhbHNlOw0KCQl9DQoJCWlmIChpc19z
dGFydHVwX2luc3RhbmNlICYmICFza2lwX3NpYmxpbmdzICYmICF0aGlzLm9iamVjdHNCeVVpZC5o
YXNPd25Qcm9wZXJ0eShpbml0aWFsX2luc3RbMl0udG9TdHJpbmcoKSkpDQoJCQlpbnN0LnVpZCA9
IGluaXRpYWxfaW5zdFsyXTsNCgkJZWxzZQ0KCQkJaW5zdC51aWQgPSB0aGlzLm5leHRfdWlkKys7
DQoJCXRoaXMub2JqZWN0c0J5VWlkW2luc3QudWlkLnRvU3RyaW5nKCldID0gaW5zdDsNCgkJaW5z
dC5wdWlkID0gdGhpcy5uZXh0X3B1aWQrKzsNCgkJaW5zdC5paWQgPSB0eXBlLmluc3RhbmNlcy5s
ZW5ndGg7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuY3JlYXRlUm93Lmxlbmd0aDsgaSA8IGxl
bjsgKytpKQ0KCQl7DQoJCQlpZiAodGhpcy5jcmVhdGVSb3dbaV0udHlwZSA9PT0gdHlwZSkNCgkJ
CQlpbnN0LmlpZCsrOw0KCQl9DQoJCWluc3QuZ2V0X2lpZCA9IGNyLmluc3RfZ2V0X2lpZDsNCgkJ
aW5zdC50b1N0cmluZyA9IGNyLmluc3RfdG9TdHJpbmc7DQoJCXZhciBpbml0aWFsX3ZhcnMgPSBp
bml0aWFsX2luc3RbM107DQoJCWlmIChpbnN0LnJlY3ljbGVkKQ0KCQl7DQoJCQljci53aXBlKGlu
c3QuZXh0cmEpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaW5zdC5leHRyYSA9IHt9Ow0KCQkJaWYg
KHR5cGVvZiBjcl9pc19wcmV2aWV3ICE9PSAidW5kZWZpbmVkIikNCgkJCXsNCgkJCQlpbnN0Lmlu
c3RhbmNlX3Zhcl9uYW1lcyA9IFtdOw0KCQkJCWluc3QuaW5zdGFuY2VfdmFyX25hbWVzLmxlbmd0
aCA9IGluaXRpYWxfdmFycy5sZW5ndGg7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gaW5pdGlhbF92
YXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCQlpbnN0Lmluc3RhbmNlX3Zhcl9uYW1lc1tp
XSA9IGluaXRpYWxfdmFyc1tpXVsxXTsNCgkJCX0NCgkJCWluc3QuaW5zdGFuY2VfdmFycyA9IFtd
Ow0KCQkJaW5zdC5pbnN0YW5jZV92YXJzLmxlbmd0aCA9IGluaXRpYWxfdmFycy5sZW5ndGg7DQoJ
CX0NCgkJZm9yIChpID0gMCwgbGVuID0gaW5pdGlhbF92YXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsr
KQ0KCQkJaW5zdC5pbnN0YW5jZV92YXJzW2ldID0gaW5pdGlhbF92YXJzW2ldWzBdOw0KCQlpZiAo
aXNfd29ybGQpDQoJCXsNCgkJCXZhciB3bSA9IGluaXRpYWxfaW5zdFswXTsNCjsNCgkJCWluc3Qu
eCA9IGNyLmlzX3VuZGVmaW5lZChzeCkgPyB3bVswXSA6IHN4Ow0KCQkJaW5zdC55ID0gY3IuaXNf
dW5kZWZpbmVkKHN5KSA/IHdtWzFdIDogc3k7DQoJCQlpbnN0LnogPSB3bVsyXTsNCgkJCWluc3Qu
d2lkdGggPSB3bVszXTsNCgkJCWluc3QuaGVpZ2h0ID0gd21bNF07DQoJCQlpbnN0LmRlcHRoID0g
d21bNV07DQoJCQlpbnN0LmFuZ2xlID0gd21bNl07DQoJCQlpbnN0Lm9wYWNpdHkgPSB3bVs3XTsN
CgkJCWluc3QuaG90c3BvdFggPSB3bVs4XTsNCgkJCWluc3QuaG90c3BvdFkgPSB3bVs5XTsNCgkJ
CWluc3QuYmxlbmRfbW9kZSA9IHdtWzEwXTsNCgkJCWVmZmVjdF9mYWxsYmFjayA9IHdtWzExXTsN
CgkJCWlmICghdGhpcy5nbHdyYXAgJiYgdHlwZS5lZmZlY3RfdHlwZXMubGVuZ3RoKQkvLyBubyBX
ZWJHTCByZW5kZXJlciBhbmQgc2hhZGVycyB1c2VkDQoJCQkJaW5zdC5ibGVuZF9tb2RlID0gZWZm
ZWN0X2ZhbGxiYWNrOwkJCS8vIHVzZSBmYWxsYmFjayBibGVuZCBtb2RlIC0gZGVzdHJveSBtb2Rl
IHdhcyBoYW5kbGVkIGFib3ZlDQoJCQlpbnN0LmNvbXBvc2l0ZU9wID0gY3IuZWZmZWN0VG9Db21w
b3NpdGVPcChpbnN0LmJsZW5kX21vZGUpOw0KCQkJaWYgKHRoaXMuZ2wpDQoJCQkJY3Iuc2V0R0xC
bGVuZChpbnN0LCBpbnN0LmJsZW5kX21vZGUsIHRoaXMuZ2wpOw0KCQkJaWYgKGluc3QucmVjeWNs
ZWQpDQoJCQl7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gd21bMTJdLmxlbmd0aDsgaSA8IGxlbjsg
aSsrKQ0KCQkJCXsNCgkJCQkJZm9yIChqID0gMCwgbGVuaiA9IHdtWzEyXVtpXS5sZW5ndGg7IGog
PCBsZW5qOyBqKyspDQoJCQkJCQlpbnN0LmVmZmVjdF9wYXJhbXNbaV1bal0gPSB3bVsxMl1baV1b
al07DQoJCQkJfQ0KCQkJCWluc3QuYmJveC5zZXQoMCwgMCwgMCwgMCk7DQoJCQkJaW5zdC5jb2xs
Y2VsbHMuc2V0KDAsIDAsIC0xLCAtMSk7DQoJCQkJaW5zdC5yZW5kZXJjZWxscy5zZXQoMCwgMCwg
LTEsIC0xKTsNCgkJCQlpbnN0LmJxdWFkLnNldF9mcm9tX3JlY3QoaW5zdC5iYm94KTsNCgkJCQlj
ci5jbGVhckFycmF5KGluc3QuYmJveF9jaGFuZ2VkX2NhbGxiYWNrcyk7DQoJCQl9DQoJCQllbHNl
DQoJCQl7DQoJCQkJaW5zdC5lZmZlY3RfcGFyYW1zID0gd21bMTJdLnNsaWNlKDApOw0KCQkJCWZv
ciAoaSA9IDAsIGxlbiA9IGluc3QuZWZmZWN0X3BhcmFtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykN
CgkJCQkJaW5zdC5lZmZlY3RfcGFyYW1zW2ldID0gd21bMTJdW2ldLnNsaWNlKDApOw0KCQkJCWlu
c3QuYWN0aXZlX2VmZmVjdF90eXBlcyA9IFtdOw0KCQkJCWluc3QuYWN0aXZlX2VmZmVjdF9mbGFn
cyA9IFtdOw0KCQkJCWluc3QuYWN0aXZlX2VmZmVjdF9mbGFncy5sZW5ndGggPSB0eXBlLmVmZmVj
dF90eXBlcy5sZW5ndGg7DQoJCQkJaW5zdC5iYm94ID0gbmV3IGNyLnJlY3QoMCwgMCwgMCwgMCk7
DQoJCQkJaW5zdC5jb2xsY2VsbHMgPSBuZXcgY3IucmVjdCgwLCAwLCAtMSwgLTEpOw0KCQkJCWlu
c3QucmVuZGVyY2VsbHMgPSBuZXcgY3IucmVjdCgwLCAwLCAtMSwgLTEpOw0KCQkJCWluc3QuYnF1
YWQgPSBuZXcgY3IucXVhZCgpOw0KCQkJCWluc3QuYmJveF9jaGFuZ2VkX2NhbGxiYWNrcyA9IFtd
Ow0KCQkJCWluc3Quc2V0X2Jib3hfY2hhbmdlZCA9IGNyLnNldF9iYm94X2NoYW5nZWQ7DQoJCQkJ
aW5zdC5hZGRfYmJveF9jaGFuZ2VkX2NhbGxiYWNrID0gY3IuYWRkX2Jib3hfY2hhbmdlZF9jYWxs
YmFjazsNCgkJCQlpbnN0LmNvbnRhaW5zX3B0ID0gY3IuaW5zdF9jb250YWluc19wdDsNCgkJCQlp
bnN0LnVwZGF0ZV9iYm94ID0gY3IudXBkYXRlX2Jib3g7DQoJCQkJaW5zdC51cGRhdGVfcmVuZGVy
X2NlbGwgPSBjci51cGRhdGVfcmVuZGVyX2NlbGw7DQoJCQkJaW5zdC51cGRhdGVfY29sbGlzaW9u
X2NlbGwgPSBjci51cGRhdGVfY29sbGlzaW9uX2NlbGw7DQoJCQkJaW5zdC5nZXRfemluZGV4ID0g
Y3IuaW5zdF9nZXRfemluZGV4Ow0KCQkJfQ0KCQkJaW5zdC50aWxlbWFwX2V4aXN0cyA9IGZhbHNl
Ow0KCQkJaW5zdC50aWxlbWFwX3dpZHRoID0gMDsNCgkJCWluc3QudGlsZW1hcF9oZWlnaHQgPSAw
Ow0KCQkJaW5zdC50aWxlbWFwX2RhdGEgPSBudWxsOw0KCQkJaWYgKHdtLmxlbmd0aCA9PT0gMTQp
DQoJCQl7DQoJCQkJaW5zdC50aWxlbWFwX2V4aXN0cyA9IHRydWU7DQoJCQkJaW5zdC50aWxlbWFw
X3dpZHRoID0gd21bMTNdWzBdOw0KCQkJCWluc3QudGlsZW1hcF9oZWlnaHQgPSB3bVsxM11bMV07
DQoJCQkJaW5zdC50aWxlbWFwX2RhdGEgPSB3bVsxM11bMl07DQoJCQl9DQoJCQlmb3IgKGkgPSAw
LCBsZW4gPSB0eXBlLmVmZmVjdF90eXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQlpbnN0
LmFjdGl2ZV9lZmZlY3RfZmxhZ3NbaV0gPSB0cnVlOw0KCQkJaW5zdC5zaGFkZXJzX3ByZXNlcnZl
X29wYXF1ZW5lc3MgPSB0cnVlOw0KCQkJaW5zdC51cGRhdGVBY3RpdmVFZmZlY3RzID0gY3IuaW5z
dF91cGRhdGVBY3RpdmVFZmZlY3RzOw0KCQkJaW5zdC51cGRhdGVBY3RpdmVFZmZlY3RzKCk7DQoJ
CQlpbnN0LnVzZXNfc2hhZGVycyA9ICEhaW5zdC5hY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aDsN
CgkJCWluc3QuYmJveF9jaGFuZ2VkID0gdHJ1ZTsNCgkJCWluc3QuY2VsbF9jaGFuZ2VkID0gdHJ1
ZTsNCgkJCXR5cGUuYW55X2NlbGxfY2hhbmdlZCA9IHRydWU7DQoJCQlpbnN0LnZpc2libGUgPSB0
cnVlOw0KICAgICAgICAgICAgaW5zdC5teV90aW1lc2NhbGUgPSAtMS4wOw0KCQkJaW5zdC5sYXll
ciA9IGxheWVyOw0KCQkJaW5zdC56aW5kZXggPSBsYXllci5pbnN0YW5jZXMubGVuZ3RoOwkvLyB3
aWxsIGJlIHBsYWNlZCBhdCB0b3Agb2YgY3VycmVudCBsYXllcg0KCQkJaW5zdC5lYXJseXpfaW5k
ZXggPSAwOw0KCQkJaWYgKHR5cGVvZiBpbnN0LmNvbGxpc2lvbl9wb2x5ID09PSAidW5kZWZpbmVk
IikNCgkJCQlpbnN0LmNvbGxpc2lvbl9wb2x5ID0gbnVsbDsNCgkJCWluc3QuY29sbGlzaW9uc0Vu
YWJsZWQgPSB0cnVlOw0KCQkJdGhpcy5yZWRyYXcgPSB0cnVlOw0KCQl9DQoJCXZhciBpbml0aWFs
X3Byb3BzLCBiaW5zdDsNCgkJY3IuY2xlYXJBcnJheShhbGxfYmVoYXZpb3JzKTsNCgkJZm9yIChp
ID0gMCwgbGVuID0gdHlwZS5mYW1pbGllcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJ
YWxsX2JlaGF2aW9ycy5wdXNoLmFwcGx5KGFsbF9iZWhhdmlvcnMsIHR5cGUuZmFtaWxpZXNbaV0u
YmVoYXZpb3JzKTsNCgkJfQ0KCQlhbGxfYmVoYXZpb3JzLnB1c2guYXBwbHkoYWxsX2JlaGF2aW9y
cywgdHlwZS5iZWhhdmlvcnMpOw0KCQlpZiAoaW5zdC5yZWN5Y2xlZCkNCgkJew0KCQkJZm9yIChp
ID0gMCwgbGVuID0gYWxsX2JlaGF2aW9ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXsNCgkJ
CQl2YXIgYnR5cGUgPSBhbGxfYmVoYXZpb3JzW2ldOw0KCQkJCWJpbnN0ID0gaW5zdC5iZWhhdmlv
cl9pbnN0c1tpXTsNCgkJCQliaW5zdC5yZWN5Y2xlZCA9IHRydWU7DQoJCQkJYnR5cGUuYmVoYXZp
b3IuSW5zdGFuY2UuY2FsbChiaW5zdCwgYnR5cGUsIGluc3QpOw0KCQkJCWluaXRpYWxfcHJvcHMg
PSBpbml0aWFsX2luc3RbNF1baV07DQoJCQkJZm9yIChqID0gMCwgbGVuaiA9IGluaXRpYWxfcHJv
cHMubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCQliaW5zdC5wcm9wZXJ0aWVzW2pdID0gaW5p
dGlhbF9wcm9wc1tqXTsNCgkJCQliaW5zdC5vbkNyZWF0ZSgpOw0KCQkJCWJ0eXBlLmJlaGF2aW9y
Lm15X2luc3RhbmNlcy5hZGQoaW5zdCk7DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpbnN0
LmJlaGF2aW9yX2luc3RzID0gW107DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBhbGxfYmVoYXZpb3Jz
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCXZhciBidHlwZSA9IGFsbF9iZWhhdmlv
cnNbaV07DQoJCQkJdmFyIGJpbnN0ID0gbmV3IGJ0eXBlLmJlaGF2aW9yLkluc3RhbmNlKGJ0eXBl
LCBpbnN0KTsNCgkJCQliaW5zdC5yZWN5Y2xlZCA9IGZhbHNlOw0KCQkJCWJpbnN0LnByb3BlcnRp
ZXMgPSBpbml0aWFsX2luc3RbNF1baV0uc2xpY2UoMCk7DQoJCQkJYmluc3Qub25DcmVhdGUoKTsN
CgkJCQljci5zZWFsKGJpbnN0KTsNCgkJCQlpbnN0LmJlaGF2aW9yX2luc3RzLnB1c2goYmluc3Qp
Ow0KCQkJCWJ0eXBlLmJlaGF2aW9yLm15X2luc3RhbmNlcy5hZGQoaW5zdCk7DQoJCQl9DQoJCX0N
CgkJaW5pdGlhbF9wcm9wcyA9IGluaXRpYWxfaW5zdFs1XTsNCgkJaWYgKGluc3QucmVjeWNsZWQp
DQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGluaXRpYWxfcHJvcHMubGVuZ3RoOyBpIDwgbGVu
OyBpKyspDQoJCQkJaW5zdC5wcm9wZXJ0aWVzW2ldID0gaW5pdGlhbF9wcm9wc1tpXTsNCgkJfQ0K
CQllbHNlDQoJCQlpbnN0LnByb3BlcnRpZXMgPSBpbml0aWFsX3Byb3BzLnNsaWNlKDApOw0KCQl0
aGlzLmNyZWF0ZVJvdy5wdXNoKGluc3QpOw0KCQl0aGlzLmhhc1BlbmRpbmdJbnN0YW5jZXMgPSB0
cnVlOw0KCQlpZiAobGF5ZXIpDQoJCXsNCjsNCgkJCWxheWVyLmFwcGVuZFRvSW5zdGFuY2VMaXN0
KGluc3QsIHRydWUpOw0KCQkJaWYgKGxheWVyLnBhcmFsbGF4WCAhPT0gMSB8fCBsYXllci5wYXJh
bGxheFkgIT09IDEpDQoJCQkJdHlwZS5hbnlfaW5zdGFuY2VfcGFyYWxsYXhlZCA9IHRydWU7DQoJ
CX0NCgkJdGhpcy5vYmplY3Rjb3VudCsrOw0KCQlpZiAodHlwZS5pc19jb250YWluZWQpDQoJCXsN
CgkJCWluc3QuaXNfY29udGFpbmVkID0gdHJ1ZTsNCgkJCWlmIChpbnN0LnJlY3ljbGVkKQ0KCQkJ
CWNyLmNsZWFyQXJyYXkoaW5zdC5zaWJsaW5ncyk7DQoJCQllbHNlDQoJCQkJaW5zdC5zaWJsaW5n
cyA9IFtdOwkJCS8vIG5vdGU6IHNob3VsZCBub3QgaW5jbHVkZSBzZWxmIGluIHNpYmxpbmdzDQoJ
CQlpZiAoIWlzX3N0YXJ0dXBfaW5zdGFuY2UgJiYgIXNraXBfc2libGluZ3MpCS8vIGxheW91dCBs
aW5rcyBpbml0aWFsIGluc3RhbmNlcw0KCQkJew0KCQkJCWZvciAoaSA9IDAsIGxlbiA9IHR5cGUu
Y29udGFpbmVyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCXsNCgkJCQkJaWYgKHR5cGUuY29u
dGFpbmVyW2ldID09PSB0eXBlKQ0KCQkJCQkJY29udGludWU7DQoJCQkJCWlmICghdHlwZS5jb250
YWluZXJbaV0uZGVmYXVsdF9pbnN0YW5jZSkNCgkJCQkJew0KCQkJCQkJcmV0dXJuIG51bGw7DQoJ
CQkJCX0NCgkJCQkJaW5zdC5zaWJsaW5ncy5wdXNoKHRoaXMuY3JlYXRlSW5zdGFuY2VGcm9tSW5p
dCh0eXBlLmNvbnRhaW5lcltpXS5kZWZhdWx0X2luc3RhbmNlLCBvcmlnaW5hbF9sYXllciwgZmFs
c2UsIGlzX3dvcmxkID8gaW5zdC54IDogc3gsIGlzX3dvcmxkID8gaW5zdC55IDogc3ksIHRydWUp
KTsNCgkJCQl9DQoJCQkJZm9yIChpID0gMCwgbGVuID0gaW5zdC5zaWJsaW5ncy5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCWluc3Quc2libGluZ3NbaV0uc2libGluZ3MucHVzaChp
bnN0KTsNCgkJCQkJZm9yIChqID0gMDsgaiA8IGxlbjsgaisrKQ0KCQkJCQl7DQoJCQkJCQlpZiAo
aSAhPT0gaikNCgkJCQkJCQlpbnN0LnNpYmxpbmdzW2ldLnNpYmxpbmdzLnB1c2goaW5zdC5zaWJs
aW5nc1tqXSk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpbnN0
LmlzX2NvbnRhaW5lZCA9IGZhbHNlOw0KCQkJaW5zdC5zaWJsaW5ncyA9IG51bGw7DQoJCX0NCgkJ
aW5zdC5vbkNyZWF0ZSgpOw0KCQlpZiAoIWluc3QucmVjeWNsZWQpDQoJCQljci5zZWFsKGluc3Qp
Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsgaSA8IGxl
bjsgaSsrKQ0KCQl7DQoJCQlpZiAoaW5zdC5iZWhhdmlvcl9pbnN0c1tpXS5wb3N0Q3JlYXRlKQ0K
CQkJCWluc3QuYmVoYXZpb3JfaW5zdHNbaV0ucG9zdENyZWF0ZSgpOw0KCQl9DQoJCXJldHVybiBp
bnN0Ow0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuZ2V0TGF5ZXJCeU5hbWUgPSBmdW5jdGlvbiAo
bGF5ZXJfbmFtZSkNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMu
cnVubmluZ19sYXlvdXQubGF5ZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIg
bGF5ZXIgPSB0aGlzLnJ1bm5pbmdfbGF5b3V0LmxheWVyc1tpXTsNCgkJCWlmIChjci5lcXVhbHNf
bm9jYXNlKGxheWVyLm5hbWUsIGxheWVyX25hbWUpKQ0KCQkJCXJldHVybiBsYXllcjsNCgkJfQ0K
CQlyZXR1cm4gbnVsbDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldExheWVyQnlOdW1iZXIg
PSBmdW5jdGlvbiAoaW5kZXgpDQoJew0KCQlpbmRleCA9IGNyLmZsb29yKGluZGV4KTsNCgkJaWYg
KGluZGV4IDwgMCkNCgkJCWluZGV4ID0gMDsNCgkJaWYgKGluZGV4ID49IHRoaXMucnVubmluZ19s
YXlvdXQubGF5ZXJzLmxlbmd0aCkNCgkJCWluZGV4ID0gdGhpcy5ydW5uaW5nX2xheW91dC5sYXll
cnMubGVuZ3RoIC0gMTsNCgkJcmV0dXJuIHRoaXMucnVubmluZ19sYXlvdXQubGF5ZXJzW2luZGV4
XTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldExheWVyID0gZnVuY3Rpb24gKGwpDQoJew0K
CQlpZiAoY3IuaXNfbnVtYmVyKGwpKQ0KCQkJcmV0dXJuIHRoaXMuZ2V0TGF5ZXJCeU51bWJlcihs
KTsNCgkJZWxzZQ0KCQkJcmV0dXJuIHRoaXMuZ2V0TGF5ZXJCeU5hbWUobC50b1N0cmluZygpKTsN
Cgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmNsZWFyU29sID0gZnVuY3Rpb24gKHNvbE1vZGlmaWVy
cykNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHNvbE1vZGlmaWVycy5s
ZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJc29sTW9kaWZpZXJzW2ldLmdldEN1cnJlbnRT
b2woKS5zZWxlY3RfYWxsID0gdHJ1ZTsNCgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUucHVz
aENsZWFuU29sID0gZnVuY3Rpb24gKHNvbE1vZGlmaWVycykNCgl7DQoJCXZhciBpLCBsZW47DQoJ
CWZvciAoaSA9IDAsIGxlbiA9IHNvbE1vZGlmaWVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJ
ew0KCQkJc29sTW9kaWZpZXJzW2ldLnB1c2hDbGVhblNvbCgpOw0KCQl9DQoJfTsNCglSdW50aW1l
LnByb3RvdHlwZS5wdXNoQ29weVNvbCA9IGZ1bmN0aW9uIChzb2xNb2RpZmllcnMpDQoJew0KCQl2
YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBzb2xNb2RpZmllcnMubGVuZ3RoOyBpIDwg
bGVuOyBpKyspDQoJCXsNCgkJCXNvbE1vZGlmaWVyc1tpXS5wdXNoQ29weVNvbCgpOw0KCQl9DQoJ
fTsNCglSdW50aW1lLnByb3RvdHlwZS5wb3BTb2wgPSBmdW5jdGlvbiAoc29sTW9kaWZpZXJzKQ0K
CXsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gc29sTW9kaWZpZXJzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlzb2xNb2RpZmllcnNbaV0ucG9wU29sKCk7DQoJCX0N
Cgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnVwZGF0ZUFsbENlbGxzID0gZnVuY3Rpb24gKHR5cGUp
DQoJew0KCQlpZiAoIXR5cGUuYW55X2NlbGxfY2hhbmdlZCkNCgkJCXJldHVybjsJCS8vIGFsbCBp
bnN0YW5jZXMgbXVzdCBhbHJlYWR5IGJlIHVwLXRvLWRhdGUNCgkJdmFyIGksIGxlbiwgaW5zdGFu
Y2VzID0gdHlwZS5pbnN0YW5jZXM7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGluc3RhbmNlcy5sZW5n
dGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJaW5zdGFuY2VzW2ldLnVwZGF0ZV9jb2xsaXNpb25f
Y2VsbCgpOw0KCQl9DQoJCXZhciBjcmVhdGVSb3cgPSB0aGlzLmNyZWF0ZVJvdzsNCgkJZm9yIChp
ID0gMCwgbGVuID0gY3JlYXRlUm93Lmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlpZiAo
Y3JlYXRlUm93W2ldLnR5cGUgPT09IHR5cGUpDQoJCQkJY3JlYXRlUm93W2ldLnVwZGF0ZV9jb2xs
aXNpb25fY2VsbCgpOw0KCQl9DQoJCXR5cGUuYW55X2NlbGxfY2hhbmdlZCA9IGZhbHNlOw0KCX07
DQoJUnVudGltZS5wcm90b3R5cGUuZ2V0Q29sbGlzaW9uQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uIChs
YXllciwgcnR5cGUsIGJib3gsIGNhbmRpZGF0ZXMpDQoJew0KCQl2YXIgaSwgbGVuLCB0Ow0KCQl2
YXIgaXNfcGFyYWxsYXhlZCA9IChsYXllciA/IChsYXllci5wYXJhbGxheFggIT09IDEgfHwgbGF5
ZXIucGFyYWxsYXhZICE9PSAxKSA6IGZhbHNlKTsNCgkJaWYgKHJ0eXBlLmlzX2ZhbWlseSkNCgkJ
ew0KCQkJZm9yIChpID0gMCwgbGVuID0gcnR5cGUubWVtYmVycy5sZW5ndGg7IGkgPCBsZW47ICsr
aSkNCgkJCXsNCgkJCQl0ID0gcnR5cGUubWVtYmVyc1tpXTsNCgkJCQlpZiAoaXNfcGFyYWxsYXhl
ZCB8fCB0LmFueV9pbnN0YW5jZV9wYXJhbGxheGVkKQ0KCQkJCXsNCgkJCQkJY3IuYXBwZW5kQXJy
YXkoY2FuZGlkYXRlcywgdC5pbnN0YW5jZXMpOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJ
CQl0aGlzLnVwZGF0ZUFsbENlbGxzKHQpOw0KCQkJCQl0LmNvbGxpc2lvbl9ncmlkLnF1ZXJ5UmFu
Z2UoYmJveCwgY2FuZGlkYXRlcyk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJ
aWYgKGlzX3BhcmFsbGF4ZWQgfHwgcnR5cGUuYW55X2luc3RhbmNlX3BhcmFsbGF4ZWQpDQoJCQl7
DQoJCQkJY3IuYXBwZW5kQXJyYXkoY2FuZGlkYXRlcywgcnR5cGUuaW5zdGFuY2VzKTsNCgkJCX0N
CgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLnVwZGF0ZUFsbENlbGxzKHJ0eXBlKTsNCgkJCQlydHlw
ZS5jb2xsaXNpb25fZ3JpZC5xdWVyeVJhbmdlKGJib3gsIGNhbmRpZGF0ZXMpOw0KCQkJfQ0KCQl9
DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRUeXBlc0NvbGxpc2lvbkNhbmRpZGF0ZXMgPSBm
dW5jdGlvbiAobGF5ZXIsIHR5cGVzLCBiYm94LCBjYW5kaWRhdGVzKQ0KCXsNCgkJdmFyIGksIGxl
bjsNCgkJZm9yIChpID0gMCwgbGVuID0gdHlwZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsN
CgkJCXRoaXMuZ2V0Q29sbGlzaW9uQ2FuZGlkYXRlcyhsYXllciwgdHlwZXNbaV0sIGJib3gsIGNh
bmRpZGF0ZXMpOw0KCQl9DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRTb2xpZENvbGxpc2lv
bkNhbmRpZGF0ZXMgPSBmdW5jdGlvbiAobGF5ZXIsIGJib3gsIGNhbmRpZGF0ZXMpDQoJew0KCQl2
YXIgc29saWQgPSB0aGlzLmdldFNvbGlkQmVoYXZpb3IoKTsNCgkJaWYgKCFzb2xpZCkNCgkJCXJl
dHVybiBudWxsOw0KCQl0aGlzLmdldFR5cGVzQ29sbGlzaW9uQ2FuZGlkYXRlcyhsYXllciwgc29s
aWQubXlfdHlwZXMsIGJib3gsIGNhbmRpZGF0ZXMpOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUu
Z2V0SnVtcHRocnVDb2xsaXNpb25DYW5kaWRhdGVzID0gZnVuY3Rpb24gKGxheWVyLCBiYm94LCBj
YW5kaWRhdGVzKQ0KCXsNCgkJdmFyIGp1bXB0aHJ1ID0gdGhpcy5nZXRKdW1wdGhydUJlaGF2aW9y
KCk7DQoJCWlmICghanVtcHRocnUpDQoJCQlyZXR1cm4gbnVsbDsNCgkJdGhpcy5nZXRUeXBlc0Nv
bGxpc2lvbkNhbmRpZGF0ZXMobGF5ZXIsIGp1bXB0aHJ1Lm15X3R5cGVzLCBiYm94LCBjYW5kaWRh
dGVzKTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnRlc3RBbmRTZWxlY3RDYW52YXNQb2ludE92
ZXJsYXAgPSBmdW5jdGlvbiAodHlwZSwgcHR4LCBwdHksIGludmVydGVkKQ0KCXsNCgkJdmFyIHNv
bCA9IHR5cGUuZ2V0Q3VycmVudFNvbCgpOw0KCQl2YXIgaSwgaiwgaW5zdCwgbGVuOw0KCQl2YXIg
b3JibG9jayA9IHRoaXMuZ2V0Q3VycmVudEV2ZW50U3RhY2soKS5jdXJyZW50X2V2ZW50Lm9yYmxv
Y2s7DQoJCXZhciBseCwgbHksIGFycjsNCgkJaWYgKHNvbC5zZWxlY3RfYWxsKQ0KCQl7DQoJCQlp
ZiAoIWludmVydGVkKQ0KCQkJew0KCQkJCXNvbC5zZWxlY3RfYWxsID0gZmFsc2U7DQoJCQkJY3Iu
Y2xlYXJBcnJheShzb2wuaW5zdGFuY2VzKTsgICAvLyBjbGVhciBjb250ZW50cw0KCQkJfQ0KCQkJ
Zm9yIChpID0gMCwgbGVuID0gdHlwZS5pbnN0YW5jZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJ
CQl7DQoJCQkJaW5zdCA9IHR5cGUuaW5zdGFuY2VzW2ldOw0KCQkJCWluc3QudXBkYXRlX2Jib3go
KTsNCgkJCQlseCA9IGluc3QubGF5ZXIuY2FudmFzVG9MYXllcihwdHgsIHB0eSwgdHJ1ZSk7DQoJ
CQkJbHkgPSBpbnN0LmxheWVyLmNhbnZhc1RvTGF5ZXIocHR4LCBwdHksIGZhbHNlKTsNCgkJCQlp
ZiAoaW5zdC5jb250YWluc19wdChseCwgbHkpKQ0KCQkJCXsNCgkJCQkJaWYgKGludmVydGVkKQ0K
CQkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCQllbHNlDQoJCQkJCQlzb2wuaW5zdGFuY2VzLnB1c2go
aW5zdCk7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKG9yYmxvY2spDQoJCQkJCXNvbC5lbHNlX2luc3Rh
bmNlcy5wdXNoKGluc3QpOw0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaiA9IDA7DQoJCQlh
cnIgPSAob3JibG9jayA/IHNvbC5lbHNlX2luc3RhbmNlcyA6IHNvbC5pbnN0YW5jZXMpOw0KCQkJ
Zm9yIChpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCWlu
c3QgPSBhcnJbaV07DQoJCQkJaW5zdC51cGRhdGVfYmJveCgpOw0KCQkJCWx4ID0gaW5zdC5sYXll
ci5jYW52YXNUb0xheWVyKHB0eCwgcHR5LCB0cnVlKTsNCgkJCQlseSA9IGluc3QubGF5ZXIuY2Fu
dmFzVG9MYXllcihwdHgsIHB0eSwgZmFsc2UpOw0KCQkJCWlmIChpbnN0LmNvbnRhaW5zX3B0KGx4
LCBseSkpDQoJCQkJew0KCQkJCQlpZiAoaW52ZXJ0ZWQpDQoJCQkJCQlyZXR1cm4gZmFsc2U7DQoJ
CQkJCWVsc2UgaWYgKG9yYmxvY2spDQoJCQkJCQlzb2wuaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJ
CQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJc29sLmluc3RhbmNlc1tqXSA9IHNvbC5pbnN0YW5jZXNb
aV07DQoJCQkJCQlqKys7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCQlpZiAoIWludmVydGVkKQ0K
CQkJCWFyci5sZW5ndGggPSBqOw0KCQl9DQoJCXR5cGUuYXBwbHlTb2xUb0NvbnRhaW5lcigpOw0K
CQlpZiAoaW52ZXJ0ZWQpDQoJCQlyZXR1cm4gdHJ1ZTsJCS8vIGRpZCBub3QgZmluZCBhbnl0aGlu
ZyBvdmVybGFwcGluZw0KCQllbHNlDQoJCQlyZXR1cm4gc29sLmhhc09iamVjdHMoKTsNCgl9Ow0K
CVJ1bnRpbWUucHJvdG90eXBlLnRlc3RPdmVybGFwID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQlp
ZiAoIWEgfHwgIWIgfHwgYSA9PT0gYiB8fCAhYS5jb2xsaXNpb25zRW5hYmxlZCB8fCAhYi5jb2xs
aXNpb25zRW5hYmxlZCkNCgkJCXJldHVybiBmYWxzZTsNCgkJYS51cGRhdGVfYmJveCgpOw0KCQli
LnVwZGF0ZV9iYm94KCk7DQoJCXZhciBsYXllcmEgPSBhLmxheWVyOw0KCQl2YXIgbGF5ZXJiID0g
Yi5sYXllcjsNCgkJdmFyIGRpZmZlcmVudF9sYXllcnMgPSAobGF5ZXJhICE9PSBsYXllcmIgJiYg
KGxheWVyYS5wYXJhbGxheFggIT09IGxheWVyYi5wYXJhbGxheFggfHwgbGF5ZXJiLnBhcmFsbGF4
WSAhPT0gbGF5ZXJiLnBhcmFsbGF4WSB8fCBsYXllcmEuc2NhbGUgIT09IGxheWVyYi5zY2FsZSB8
fCBsYXllcmEuYW5nbGUgIT09IGxheWVyYi5hbmdsZSB8fCBsYXllcmEuem9vbVJhdGUgIT09IGxh
eWVyYi56b29tUmF0ZSkpOw0KCQl2YXIgaSwgbGVuLCBpMiwgaTIxLCB4LCB5LCBoYXNwb2x5YSwg
aGFzcG9seWIsIHBvbHlhLCBwb2x5YjsNCgkJaWYgKCFkaWZmZXJlbnRfbGF5ZXJzKQkvLyBzYW1l
IGxheWVyczogZWFzeSBjaGVjaw0KCQl7DQoJCQlpZiAoIWEuYmJveC5pbnRlcnNlY3RzX3JlY3Qo
Yi5iYm94KSkNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQlpZiAoIWEuYnF1YWQuaW50ZXJzZWN0c19x
dWFkKGIuYnF1YWQpKQ0KCQkJCXJldHVybiBmYWxzZTsNCgkJCWlmIChhLnRpbGVtYXBfZXhpc3Rz
ICYmIGIudGlsZW1hcF9leGlzdHMpDQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJaWYgKGEudGlsZW1h
cF9leGlzdHMpDQoJCQkJcmV0dXJuIHRoaXMudGVzdFRpbGVtYXBPdmVybGFwKGEsIGIpOw0KCQkJ
aWYgKGIudGlsZW1hcF9leGlzdHMpDQoJCQkJcmV0dXJuIHRoaXMudGVzdFRpbGVtYXBPdmVybGFw
KGIsIGEpOw0KCQkJaGFzcG9seWEgPSAoYS5jb2xsaXNpb25fcG9seSAmJiAhYS5jb2xsaXNpb25f
cG9seS5pc19lbXB0eSgpKTsNCgkJCWhhc3BvbHliID0gKGIuY29sbGlzaW9uX3BvbHkgJiYgIWIu
Y29sbGlzaW9uX3BvbHkuaXNfZW1wdHkoKSk7DQoJCQlpZiAoIWhhc3BvbHlhICYmICFoYXNwb2x5
YikNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCWlmIChoYXNwb2x5YSkNCgkJCXsNCgkJCQlhLmNvbGxp
c2lvbl9wb2x5LmNhY2hlX3BvbHkoYS53aWR0aCwgYS5oZWlnaHQsIGEuYW5nbGUpOw0KCQkJCXBv
bHlhID0gYS5jb2xsaXNpb25fcG9seTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLnRl
bXBfcG9seS5zZXRfZnJvbV9xdWFkKGEuYnF1YWQsIGEueCwgYS55LCBhLndpZHRoLCBhLmhlaWdo
dCk7DQoJCQkJcG9seWEgPSB0aGlzLnRlbXBfcG9seTsNCgkJCX0NCgkJCWlmIChoYXNwb2x5YikN
CgkJCXsNCgkJCQliLmNvbGxpc2lvbl9wb2x5LmNhY2hlX3BvbHkoYi53aWR0aCwgYi5oZWlnaHQs
IGIuYW5nbGUpOw0KCQkJCXBvbHliID0gYi5jb2xsaXNpb25fcG9seTsNCgkJCX0NCgkJCWVsc2UN
CgkJCXsNCgkJCQl0aGlzLnRlbXBfcG9seS5zZXRfZnJvbV9xdWFkKGIuYnF1YWQsIGIueCwgYi55
LCBiLndpZHRoLCBiLmhlaWdodCk7DQoJCQkJcG9seWIgPSB0aGlzLnRlbXBfcG9seTsNCgkJCX0N
CgkJCXJldHVybiBwb2x5YS5pbnRlcnNlY3RzX3BvbHkocG9seWIsIGIueCAtIGEueCwgYi55IC0g
YS55KTsNCgkJfQ0KCQllbHNlCS8vIGRpZmZlcmVudCBsYXllcnM6IG5lZWQgdG8gZG8gZnVsbCB0
cmFuc2xhdGVkIGNoZWNrDQoJCXsNCgkJCWhhc3BvbHlhID0gKGEuY29sbGlzaW9uX3BvbHkgJiYg
IWEuY29sbGlzaW9uX3BvbHkuaXNfZW1wdHkoKSk7DQoJCQloYXNwb2x5YiA9IChiLmNvbGxpc2lv
bl9wb2x5ICYmICFiLmNvbGxpc2lvbl9wb2x5LmlzX2VtcHR5KCkpOw0KCQkJaWYgKGhhc3BvbHlh
KQ0KCQkJew0KCQkJCWEuY29sbGlzaW9uX3BvbHkuY2FjaGVfcG9seShhLndpZHRoLCBhLmhlaWdo
dCwgYS5hbmdsZSk7DQoJCQkJdGhpcy50ZW1wX3BvbHkuc2V0X2Zyb21fcG9seShhLmNvbGxpc2lv
bl9wb2x5KTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLnRlbXBfcG9seS5zZXRfZnJv
bV9xdWFkKGEuYnF1YWQsIGEueCwgYS55LCBhLndpZHRoLCBhLmhlaWdodCk7DQoJCQl9DQoJCQlw
b2x5YSA9IHRoaXMudGVtcF9wb2x5Ow0KCQkJaWYgKGhhc3BvbHliKQ0KCQkJew0KCQkJCWIuY29s
bGlzaW9uX3BvbHkuY2FjaGVfcG9seShiLndpZHRoLCBiLmhlaWdodCwgYi5hbmdsZSk7DQoJCQkJ
dGhpcy50ZW1wX3BvbHkyLnNldF9mcm9tX3BvbHkoYi5jb2xsaXNpb25fcG9seSk7DQoJCQl9DQoJ
CQllbHNlDQoJCQl7DQoJCQkJdGhpcy50ZW1wX3BvbHkyLnNldF9mcm9tX3F1YWQoYi5icXVhZCwg
Yi54LCBiLnksIGIud2lkdGgsIGIuaGVpZ2h0KTsNCgkJCX0NCgkJCXBvbHliID0gdGhpcy50ZW1w
X3BvbHkyOw0KCQkJZm9yIChpID0gMCwgbGVuID0gcG9seWEucHRzX2NvdW50OyBpIDwgbGVuOyBp
KyspDQoJCQl7DQoJCQkJaTIgPSBpICogMjsNCgkJCQlpMjEgPSBpMiArIDE7DQoJCQkJeCA9IHBv
bHlhLnB0c19jYWNoZVtpMl07DQoJCQkJeSA9IHBvbHlhLnB0c19jYWNoZVtpMjFdOw0KCQkJCXBv
bHlhLnB0c19jYWNoZVtpMl0gPSBsYXllcmEubGF5ZXJUb0NhbnZhcyh4ICsgYS54LCB5ICsgYS55
LCB0cnVlKTsNCgkJCQlwb2x5YS5wdHNfY2FjaGVbaTIxXSA9IGxheWVyYS5sYXllclRvQ2FudmFz
KHggKyBhLngsIHkgKyBhLnksIGZhbHNlKTsNCgkJCX0NCgkJCXBvbHlhLnVwZGF0ZV9iYm94KCk7
DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBwb2x5Yi5wdHNfY291bnQ7IGkgPCBsZW47IGkrKykNCgkJ
CXsNCgkJCQlpMiA9IGkgKiAyOw0KCQkJCWkyMSA9IGkyICsgMTsNCgkJCQl4ID0gcG9seWIucHRz
X2NhY2hlW2kyXTsNCgkJCQl5ID0gcG9seWIucHRzX2NhY2hlW2kyMV07DQoJCQkJcG9seWIucHRz
X2NhY2hlW2kyXSA9IGxheWVyYi5sYXllclRvQ2FudmFzKHggKyBiLngsIHkgKyBiLnksIHRydWUp
Ow0KCQkJCXBvbHliLnB0c19jYWNoZVtpMjFdID0gbGF5ZXJiLmxheWVyVG9DYW52YXMoeCArIGIu
eCwgeSArIGIueSwgZmFsc2UpOw0KCQkJfQ0KCQkJcG9seWIudXBkYXRlX2Jib3goKTsNCgkJCXJl
dHVybiBwb2x5YS5pbnRlcnNlY3RzX3BvbHkocG9seWIsIDAsIDApOw0KCQl9DQoJfTsNCgl2YXIg
dG1wUXVhZCA9IG5ldyBjci5xdWFkKCk7DQoJdmFyIHRtcFJlY3QgPSBuZXcgY3IucmVjdCgwLCAw
LCAwLCAwKTsNCgl2YXIgY29sbHJlY3RfY2FuZGlkYXRlcyA9IFtdOw0KCVJ1bnRpbWUucHJvdG90
eXBlLnRlc3RUaWxlbWFwT3ZlcmxhcCA9IGZ1bmN0aW9uICh0bSwgYSkNCgl7DQoJCXZhciBpLCBs
ZW4sIGMsIHJjOw0KCQl2YXIgYmJveCA9IGEuYmJveDsNCgkJdmFyIHRteCA9IHRtLng7DQoJCXZh
ciB0bXkgPSB0bS55Ow0KCQl0bS5nZXRDb2xsaXNpb25SZWN0Q2FuZGlkYXRlcyhiYm94LCBjb2xs
cmVjdF9jYW5kaWRhdGVzKTsNCgkJdmFyIGNvbGxyZWN0cyA9IGNvbGxyZWN0X2NhbmRpZGF0ZXM7
DQoJCXZhciBoYXNwb2x5YSA9IChhLmNvbGxpc2lvbl9wb2x5ICYmICFhLmNvbGxpc2lvbl9wb2x5
LmlzX2VtcHR5KCkpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBjb2xscmVjdHMubGVuZ3RoOyBpIDwg
bGVuOyArK2kpDQoJCXsNCgkJCWMgPSBjb2xscmVjdHNbaV07DQoJCQlyYyA9IGMucmM7DQoJCQlp
ZiAoYmJveC5pbnRlcnNlY3RzX3JlY3Rfb2ZmKHJjLCB0bXgsIHRteSkpDQoJCQl7DQoJCQkJdG1w
UXVhZC5zZXRfZnJvbV9yZWN0KHJjKTsNCgkJCQl0bXBRdWFkLm9mZnNldCh0bXgsIHRteSk7DQoJ
CQkJaWYgKHRtcFF1YWQuaW50ZXJzZWN0c19xdWFkKGEuYnF1YWQpKQ0KCQkJCXsNCgkJCQkJaWYg
KGhhc3BvbHlhKQ0KCQkJCQl7DQoJCQkJCQlhLmNvbGxpc2lvbl9wb2x5LmNhY2hlX3BvbHkoYS53
aWR0aCwgYS5oZWlnaHQsIGEuYW5nbGUpOw0KCQkJCQkJaWYgKGMucG9seSkNCgkJCQkJCXsNCgkJ
CQkJCQlpZiAoYy5wb2x5LmludGVyc2VjdHNfcG9seShhLmNvbGxpc2lvbl9wb2x5LCBhLnggLSAo
dG14ICsgcmMubGVmdCksIGEueSAtICh0bXkgKyByYy50b3ApKSkNCgkJCQkJCQl7DQoJCQkJCQkJ
CWNyLmNsZWFyQXJyYXkoY29sbHJlY3RfY2FuZGlkYXRlcyk7DQoJCQkJCQkJCXJldHVybiB0cnVl
Ow0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCWVsc2UNCgkJCQkJCXsNCgkJCQkJCQl0aGlzLnRl
bXBfcG9seS5zZXRfZnJvbV9xdWFkKHRtcFF1YWQsIDAsIDAsIHJjLnJpZ2h0IC0gcmMubGVmdCwg
cmMuYm90dG9tIC0gcmMudG9wKTsNCgkJCQkJCQlpZiAodGhpcy50ZW1wX3BvbHkuaW50ZXJzZWN0
c19wb2x5KGEuY29sbGlzaW9uX3BvbHksIGEueCwgYS55KSkNCgkJCQkJCQl7DQoJCQkJCQkJCWNy
LmNsZWFyQXJyYXkoY29sbHJlY3RfY2FuZGlkYXRlcyk7DQoJCQkJCQkJCXJldHVybiB0cnVlOw0K
CQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCWlmIChj
LnBvbHkpDQoJCQkJCQl7DQoJCQkJCQkJdGhpcy50ZW1wX3BvbHkuc2V0X2Zyb21fcXVhZChhLmJx
dWFkLCAwLCAwLCBhLndpZHRoLCBhLmhlaWdodCk7DQoJCQkJCQkJaWYgKGMucG9seS5pbnRlcnNl
Y3RzX3BvbHkodGhpcy50ZW1wX3BvbHksIC0odG14ICsgcmMubGVmdCksIC0odG15ICsgcmMudG9w
KSkpDQoJCQkJCQkJew0KCQkJCQkJCQljci5jbGVhckFycmF5KGNvbGxyZWN0X2NhbmRpZGF0ZXMp
Ow0KCQkJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCQllbHNlDQoJ
CQkJCQl7DQoJCQkJCQkJY3IuY2xlYXJBcnJheShjb2xscmVjdF9jYW5kaWRhdGVzKTsNCgkJCQkJ
CQlyZXR1cm4gdHJ1ZTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KCQljci5j
bGVhckFycmF5KGNvbGxyZWN0X2NhbmRpZGF0ZXMpOw0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCglS
dW50aW1lLnByb3RvdHlwZS50ZXN0UmVjdE92ZXJsYXAgPSBmdW5jdGlvbiAociwgYikNCgl7DQoJ
CWlmICghYiB8fCAhYi5jb2xsaXNpb25zRW5hYmxlZCkNCgkJCXJldHVybiBmYWxzZTsNCgkJYi51
cGRhdGVfYmJveCgpOw0KCQl2YXIgbGF5ZXJiID0gYi5sYXllcjsNCgkJdmFyIGhhc3BvbHliLCBw
b2x5YjsNCgkJaWYgKCFiLmJib3guaW50ZXJzZWN0c19yZWN0KHIpKQ0KCQkJcmV0dXJuIGZhbHNl
Ow0KCQlpZiAoYi50aWxlbWFwX2V4aXN0cykNCgkJew0KCQkJYi5nZXRDb2xsaXNpb25SZWN0Q2Fu
ZGlkYXRlcyhyLCBjb2xscmVjdF9jYW5kaWRhdGVzKTsNCgkJCXZhciBjb2xscmVjdHMgPSBjb2xs
cmVjdF9jYW5kaWRhdGVzOw0KCQkJdmFyIGksIGxlbiwgYywgdGlsZXJjOw0KCQkJdmFyIHRteCA9
IGIueDsNCgkJCXZhciB0bXkgPSBiLnk7DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBjb2xscmVjdHMu
bGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCQl7DQoJCQkJYyA9IGNvbGxyZWN0c1tpXTsNCgkJCQl0
aWxlcmMgPSBjLnJjOw0KCQkJCWlmIChyLmludGVyc2VjdHNfcmVjdF9vZmYodGlsZXJjLCB0bXgs
IHRteSkpDQoJCQkJew0KCQkJCQlpZiAoYy5wb2x5KQ0KCQkJCQl7DQoJCQkJCQl0aGlzLnRlbXBf
cG9seS5zZXRfZnJvbV9yZWN0KHIsIDAsIDApOw0KCQkJCQkJaWYgKGMucG9seS5pbnRlcnNlY3Rz
X3BvbHkodGhpcy50ZW1wX3BvbHksIC0odG14ICsgdGlsZXJjLmxlZnQpLCAtKHRteSArIHRpbGVy
Yy50b3ApKSkNCgkJCQkJCXsNCgkJCQkJCQljci5jbGVhckFycmF5KGNvbGxyZWN0X2NhbmRpZGF0
ZXMpOw0KCQkJCQkJCXJldHVybiB0cnVlOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJ
CQkJew0KCQkJCQkJY3IuY2xlYXJBcnJheShjb2xscmVjdF9jYW5kaWRhdGVzKTsNCgkJCQkJCXJl
dHVybiB0cnVlOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJY3IuY2xlYXJBcnJheShjb2xscmVj
dF9jYW5kaWRhdGVzKTsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRt
cFF1YWQuc2V0X2Zyb21fcmVjdChyKTsNCgkJCWlmICghYi5icXVhZC5pbnRlcnNlY3RzX3F1YWQo
dG1wUXVhZCkpDQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJaGFzcG9seWIgPSAoYi5jb2xsaXNpb25f
cG9seSAmJiAhYi5jb2xsaXNpb25fcG9seS5pc19lbXB0eSgpKTsNCgkJCWlmICghaGFzcG9seWIp
DQoJCQkJcmV0dXJuIHRydWU7DQoJCQliLmNvbGxpc2lvbl9wb2x5LmNhY2hlX3BvbHkoYi53aWR0
aCwgYi5oZWlnaHQsIGIuYW5nbGUpOw0KCQkJdG1wUXVhZC5vZmZzZXQoLXIubGVmdCwgLXIudG9w
KTsNCgkJCXRoaXMudGVtcF9wb2x5LnNldF9mcm9tX3F1YWQodG1wUXVhZCwgMCwgMCwgMSwgMSk7
DQoJCQlyZXR1cm4gYi5jb2xsaXNpb25fcG9seS5pbnRlcnNlY3RzX3BvbHkodGhpcy50ZW1wX3Bv
bHksIHIubGVmdCAtIGIueCwgci50b3AgLSBiLnkpOw0KCQl9DQoJfTsNCglSdW50aW1lLnByb3Rv
dHlwZS50ZXN0U2VnbWVudE92ZXJsYXAgPSBmdW5jdGlvbiAoeDEsIHkxLCB4MiwgeTIsIGIpDQoJ
ew0KCQlpZiAoIWIgfHwgIWIuY29sbGlzaW9uc0VuYWJsZWQpDQoJCQlyZXR1cm4gZmFsc2U7DQoJ
CWIudXBkYXRlX2Jib3goKTsNCgkJdmFyIGxheWVyYiA9IGIubGF5ZXI7DQoJCXZhciBoYXNwb2x5
YiwgcG9seWI7DQoJCXRtcFJlY3Quc2V0KGNyLm1pbih4MSwgeDIpLCBjci5taW4oeTEsIHkyKSwg
Y3IubWF4KHgxLCB4MiksIGNyLm1heCh5MSwgeTIpKTsNCgkJaWYgKCFiLmJib3guaW50ZXJzZWN0
c19yZWN0KHRtcFJlY3QpKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQlpZiAoYi50aWxlbWFwX2V4aXN0
cykNCgkJew0KCQkJYi5nZXRDb2xsaXNpb25SZWN0Q2FuZGlkYXRlcyh0bXBSZWN0LCBjb2xscmVj
dF9jYW5kaWRhdGVzKTsNCgkJCXZhciBjb2xscmVjdHMgPSBjb2xscmVjdF9jYW5kaWRhdGVzOw0K
CQkJdmFyIGksIGxlbiwgYywgdGlsZXJjOw0KCQkJdmFyIHRteCA9IGIueDsNCgkJCXZhciB0bXkg
PSBiLnk7DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBjb2xscmVjdHMubGVuZ3RoOyBpIDwgbGVuOyAr
K2kpDQoJCQl7DQoJCQkJYyA9IGNvbGxyZWN0c1tpXTsNCgkJCQl0aWxlcmMgPSBjLnJjOw0KCQkJ
CWlmICh0bXBSZWN0LmludGVyc2VjdHNfcmVjdF9vZmYodGlsZXJjLCB0bXgsIHRteSkpDQoJCQkJ
ew0KCQkJCQl0bXBRdWFkLnNldF9mcm9tX3JlY3QodGlsZXJjKTsNCgkJCQkJdG1wUXVhZC5vZmZz
ZXQodG14LCB0bXkpOw0KCQkJCQlpZiAodG1wUXVhZC5pbnRlcnNlY3RzX3NlZ21lbnQoeDEsIHkx
LCB4MiwgeTIpKQ0KCQkJCQl7DQoJCQkJCQlpZiAoYy5wb2x5KQ0KCQkJCQkJew0KCQkJCQkJCWlm
IChjLnBvbHkuaW50ZXJzZWN0c19zZWdtZW50KHRteCArIHRpbGVyYy5sZWZ0LCB0bXkgKyB0aWxl
cmMudG9wLCB4MSwgeTEsIHgyLCB5MikpDQoJCQkJCQkJew0KCQkJCQkJCQljci5jbGVhckFycmF5
KGNvbGxyZWN0X2NhbmRpZGF0ZXMpOw0KCQkJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJCQl9DQoJ
CQkJCQl9DQoJCQkJCQllbHNlDQoJCQkJCQl7DQoJCQkJCQkJY3IuY2xlYXJBcnJheShjb2xscmVj
dF9jYW5kaWRhdGVzKTsNCgkJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJ
CX0NCgkJCX0NCgkJCWNyLmNsZWFyQXJyYXkoY29sbHJlY3RfY2FuZGlkYXRlcyk7DQoJCQlyZXR1
cm4gZmFsc2U7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpZiAoIWIuYnF1YWQuaW50ZXJzZWN0c19z
ZWdtZW50KHgxLCB5MSwgeDIsIHkyKSkNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQloYXNwb2x5YiA9
IChiLmNvbGxpc2lvbl9wb2x5ICYmICFiLmNvbGxpc2lvbl9wb2x5LmlzX2VtcHR5KCkpOw0KCQkJ
aWYgKCFoYXNwb2x5YikNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCWIuY29sbGlzaW9uX3BvbHkuY2Fj
aGVfcG9seShiLndpZHRoLCBiLmhlaWdodCwgYi5hbmdsZSk7DQoJCQlyZXR1cm4gYi5jb2xsaXNp
b25fcG9seS5pbnRlcnNlY3RzX3NlZ21lbnQoYi54LCBiLnksIHgxLCB5MSwgeDIsIHkyKTsNCgkJ
fQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUudHlwZUhhc0JlaGF2aW9yID0gZnVuY3Rpb24gKHQs
IGIpDQoJew0KCQlpZiAoIWIpDQoJCQlyZXR1cm4gZmFsc2U7DQoJCXZhciBpLCBsZW4sIGosIGxl
bmosIGY7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHQuYmVoYXZpb3JzLmxlbmd0aDsgaSA8IGxlbjsg
aSsrKQ0KCQl7DQoJCQlpZiAodC5iZWhhdmlvcnNbaV0uYmVoYXZpb3IgaW5zdGFuY2VvZiBiKQ0K
CQkJCXJldHVybiB0cnVlOw0KCQl9DQoJCWlmICghdC5pc19mYW1pbHkpDQoJCXsNCgkJCWZvciAo
aSA9IDAsIGxlbiA9IHQuZmFtaWxpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJ
ZiA9IHQuZmFtaWxpZXNbaV07DQoJCQkJZm9yIChqID0gMCwgbGVuaiA9IGYuYmVoYXZpb3JzLmxl
bmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQl7DQoJCQkJCWlmIChmLmJlaGF2aW9yc1tqXS5iZWhh
dmlvciBpbnN0YW5jZW9mIGIpDQoJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQl9DQoJCQl9DQoJCX0N
CgkJcmV0dXJuIGZhbHNlOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUudHlwZUhhc05vU2F2ZUJl
aGF2aW9yID0gZnVuY3Rpb24gKHQpDQoJew0KCQlyZXR1cm4gdGhpcy50eXBlSGFzQmVoYXZpb3Io
dCwgY3IuYmVoYXZpb3JzLk5vU2F2ZSk7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS50eXBlSGFz
UGVyc2lzdEJlaGF2aW9yID0gZnVuY3Rpb24gKHQpDQoJew0KCQlyZXR1cm4gdGhpcy50eXBlSGFz
QmVoYXZpb3IodCwgY3IuYmVoYXZpb3JzLlBlcnNpc3QpOw0KCX07DQoJUnVudGltZS5wcm90b3R5
cGUuZ2V0U29saWRCZWhhdmlvciA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5zb2xp
ZEJlaGF2aW9yOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuZ2V0SnVtcHRocnVCZWhhdmlvciA9
IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5qdW1wdGhydUJlaGF2aW9yOw0KCX07DQoJ
dmFyIGNhbmRpZGF0ZXMgPSBbXTsNCglSdW50aW1lLnByb3RvdHlwZS50ZXN0T3ZlcmxhcFNvbGlk
ID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQl2YXIgaSwgbGVuLCBzOw0KCQlpbnN0LnVwZGF0ZV9i
Ym94KCk7DQoJCXRoaXMuZ2V0U29saWRDb2xsaXNpb25DYW5kaWRhdGVzKGluc3QubGF5ZXIsIGlu
c3QuYmJveCwgY2FuZGlkYXRlcyk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVu
Z3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCXMgPSBjYW5kaWRhdGVzW2ldOw0KCQkJaWYgKCFz
LmV4dHJhWyJzb2xpZEVuYWJsZWQiXSkNCgkJCQljb250aW51ZTsNCgkJCWlmICh0aGlzLnRlc3RP
dmVybGFwKGluc3QsIHMpKQ0KCQkJew0KCQkJCWNyLmNsZWFyQXJyYXkoY2FuZGlkYXRlcyk7DQoJ
CQkJcmV0dXJuIHM7DQoJCQl9DQoJCX0NCgkJY3IuY2xlYXJBcnJheShjYW5kaWRhdGVzKTsNCgkJ
cmV0dXJuIG51bGw7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS50ZXN0UmVjdE92ZXJsYXBTb2xp
ZCA9IGZ1bmN0aW9uIChyKQ0KCXsNCgkJdmFyIGksIGxlbiwgczsNCgkJdGhpcy5nZXRTb2xpZENv
bGxpc2lvbkNhbmRpZGF0ZXMobnVsbCwgciwgY2FuZGlkYXRlcyk7DQoJCWZvciAoaSA9IDAsIGxl
biA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCXMgPSBjYW5kaWRh
dGVzW2ldOw0KCQkJaWYgKCFzLmV4dHJhWyJzb2xpZEVuYWJsZWQiXSkNCgkJCQljb250aW51ZTsN
CgkJCWlmICh0aGlzLnRlc3RSZWN0T3ZlcmxhcChyLCBzKSkNCgkJCXsNCgkJCQljci5jbGVhckFy
cmF5KGNhbmRpZGF0ZXMpOw0KCQkJCXJldHVybiBzOw0KCQkJfQ0KCQl9DQoJCWNyLmNsZWFyQXJy
YXkoY2FuZGlkYXRlcyk7DQoJCXJldHVybiBudWxsOw0KCX07DQoJdmFyIGp1bXB0aHJ1X2FycmF5
X3JldCA9IFtdOw0KCVJ1bnRpbWUucHJvdG90eXBlLnRlc3RPdmVybGFwSnVtcFRocnUgPSBmdW5j
dGlvbiAoaW5zdCwgYWxsKQ0KCXsNCgkJdmFyIHJldCA9IG51bGw7DQoJCWlmIChhbGwpDQoJCXsN
CgkJCXJldCA9IGp1bXB0aHJ1X2FycmF5X3JldDsNCgkJCWNyLmNsZWFyQXJyYXkocmV0KTsNCgkJ
fQ0KCQlpbnN0LnVwZGF0ZV9iYm94KCk7DQoJCXRoaXMuZ2V0SnVtcHRocnVDb2xsaXNpb25DYW5k
aWRhdGVzKGluc3QubGF5ZXIsIGluc3QuYmJveCwgY2FuZGlkYXRlcyk7DQoJCXZhciBpLCBsZW4s
IGo7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kp
DQoJCXsNCgkJCWogPSBjYW5kaWRhdGVzW2ldOw0KCQkJaWYgKCFqLmV4dHJhWyJqdW1wdGhydUVu
YWJsZWQiXSkNCgkJCQljb250aW51ZTsNCgkJCWlmICh0aGlzLnRlc3RPdmVybGFwKGluc3QsIGop
KQ0KCQkJew0KCQkJCWlmIChhbGwpDQoJCQkJCXJldC5wdXNoKGopOw0KCQkJCWVsc2UNCgkJCQl7
DQoJCQkJCWNyLmNsZWFyQXJyYXkoY2FuZGlkYXRlcyk7DQoJCQkJCXJldHVybiBqOw0KCQkJCX0N
CgkJCX0NCgkJfQ0KCQljci5jbGVhckFycmF5KGNhbmRpZGF0ZXMpOw0KCQlyZXR1cm4gcmV0Ow0K
CX07DQoJUnVudGltZS5wcm90b3R5cGUucHVzaE91dFNvbGlkID0gZnVuY3Rpb24gKGluc3QsIHhk
aXIsIHlkaXIsIGRpc3QsIGluY2x1ZGVfanVtcHRocnVzLCBzcGVjaWZpY19qdW1wdGhydSkNCgl7
DQoJCXZhciBwdXNoX2Rpc3QgPSBkaXN0IHx8IDUwOw0KCQl2YXIgb2xkeCA9IGluc3QueA0KCQl2
YXIgb2xkeSA9IGluc3QueTsNCgkJdmFyIGk7DQoJCXZhciBsYXN0X292ZXJsYXBwZWQgPSBudWxs
LCBzZWNvbmRsYXN0X292ZXJsYXBwZWQgPSBudWxsOw0KCQlmb3IgKGkgPSAwOyBpIDwgcHVzaF9k
aXN0OyBpKyspDQoJCXsNCgkJCWluc3QueCA9IChvbGR4ICsgKHhkaXIgKiBpKSk7DQoJCQlpbnN0
LnkgPSAob2xkeSArICh5ZGlyICogaSkpOw0KCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJ
CQlpZiAoIXRoaXMudGVzdE92ZXJsYXAoaW5zdCwgbGFzdF9vdmVybGFwcGVkKSkNCgkJCXsNCgkJ
CQlsYXN0X292ZXJsYXBwZWQgPSB0aGlzLnRlc3RPdmVybGFwU29saWQoaW5zdCk7DQoJCQkJaWYg
KGxhc3Rfb3ZlcmxhcHBlZCkNCgkJCQkJc2Vjb25kbGFzdF9vdmVybGFwcGVkID0gbGFzdF9vdmVy
bGFwcGVkOw0KCQkJCWlmICghbGFzdF9vdmVybGFwcGVkKQ0KCQkJCXsNCgkJCQkJaWYgKGluY2x1
ZGVfanVtcHRocnVzKQ0KCQkJCQl7DQoJCQkJCQlpZiAoc3BlY2lmaWNfanVtcHRocnUpDQoJCQkJ
CQkJbGFzdF9vdmVybGFwcGVkID0gKHRoaXMudGVzdE92ZXJsYXAoaW5zdCwgc3BlY2lmaWNfanVt
cHRocnUpID8gc3BlY2lmaWNfanVtcHRocnUgOiBudWxsKTsNCgkJCQkJCWVsc2UNCgkJCQkJCQls
YXN0X292ZXJsYXBwZWQgPSB0aGlzLnRlc3RPdmVybGFwSnVtcFRocnUoaW5zdCk7DQoJCQkJCQlp
ZiAobGFzdF9vdmVybGFwcGVkKQ0KCQkJCQkJCXNlY29uZGxhc3Rfb3ZlcmxhcHBlZCA9IGxhc3Rf
b3ZlcmxhcHBlZDsNCgkJCQkJfQ0KCQkJCQlpZiAoIWxhc3Rfb3ZlcmxhcHBlZCkNCgkJCQkJew0K
CQkJCQkJaWYgKHNlY29uZGxhc3Rfb3ZlcmxhcHBlZCkNCgkJCQkJCQl0aGlzLnB1c2hJbkZyYWN0
aW9uYWwoaW5zdCwgeGRpciwgeWRpciwgc2Vjb25kbGFzdF9vdmVybGFwcGVkLCAxNik7DQoJCQkJ
CQlyZXR1cm4gdHJ1ZTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlpbnN0LnggPSBvbGR4
Ow0KCQlpbnN0LnkgPSBvbGR5Ow0KCQlpbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJcmV0dXJu
IGZhbHNlOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUucHVzaE91dFNvbGlkQXhpcyA9IGZ1bmN0
aW9uKGluc3QsIHhkaXIsIHlkaXIsIGRpc3QpDQoJew0KCQlkaXN0ID0gZGlzdCB8fCA1MDsNCgkJ
dmFyIG9sZFggPSBpbnN0Lng7DQoJCXZhciBvbGRZID0gaW5zdC55Ow0KCQl2YXIgbGFzdE92ZXJs
YXBwZWQgPSBudWxsOw0KCQl2YXIgc2Vjb25kTGFzdE92ZXJsYXBwZWQgPSBudWxsOw0KCQl2YXIg
aSwgd2hpY2gsIHNpZ247DQoJCWZvciAoaSA9IDA7IGkgPCBkaXN0OyArK2kpDQoJCXsNCgkJCWZv
ciAod2hpY2ggPSAwOyB3aGljaCA8IDI7ICsrd2hpY2gpDQoJCQl7DQoJCQkJc2lnbiA9IHdoaWNo
ICogMiAtIDE7CQkvLyAtMSBvciAxDQoJCQkJaW5zdC54ID0gb2xkWCArICh4ZGlyICogaSAqIHNp
Z24pOw0KCQkJCWluc3QueSA9IG9sZFkgKyAoeWRpciAqIGkgKiBzaWduKTsNCgkJCQlpbnN0LnNl
dF9iYm94X2NoYW5nZWQoKTsNCgkJCQlpZiAoIXRoaXMudGVzdE92ZXJsYXAoaW5zdCwgbGFzdE92
ZXJsYXBwZWQpKQ0KCQkJCXsNCgkJCQkJbGFzdE92ZXJsYXBwZWQgPSB0aGlzLnRlc3RPdmVybGFw
U29saWQoaW5zdCk7DQoJCQkJCWlmIChsYXN0T3ZlcmxhcHBlZCkNCgkJCQkJew0KCQkJCQkJc2Vj
b25kTGFzdE92ZXJsYXBwZWQgPSBsYXN0T3ZlcmxhcHBlZDsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJ
CQkJCXsNCgkJCQkJCWlmIChzZWNvbmRMYXN0T3ZlcmxhcHBlZCkNCgkJCQkJCQl0aGlzLnB1c2hJ
bkZyYWN0aW9uYWwoaW5zdCwgeGRpciAqIHNpZ24sIHlkaXIgKiBzaWduLCBzZWNvbmRMYXN0T3Zl
cmxhcHBlZCwgMTYpOw0KCQkJCQkJcmV0dXJuIHRydWU7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJ
CX0NCgkJaW5zdC54ID0gb2xkWDsNCgkJaW5zdC55ID0gb2xkWTsNCgkJaW5zdC5zZXRfYmJveF9j
aGFuZ2VkKCk7DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnB1c2hP
dXQgPSBmdW5jdGlvbiAoaW5zdCwgeGRpciwgeWRpciwgZGlzdCwgb3RoZXJpbnN0KQ0KCXsNCgkJ
dmFyIHB1c2hfZGlzdCA9IGRpc3QgfHwgNTA7DQoJCXZhciBvbGR4ID0gaW5zdC54DQoJCXZhciBv
bGR5ID0gaW5zdC55Ow0KCQl2YXIgaTsNCgkJZm9yIChpID0gMDsgaSA8IHB1c2hfZGlzdDsgaSsr
KQ0KCQl7DQoJCQlpbnN0LnggPSAob2xkeCArICh4ZGlyICogaSkpOw0KCQkJaW5zdC55ID0gKG9s
ZHkgKyAoeWRpciAqIGkpKTsNCgkJCWluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJaWYgKCF0
aGlzLnRlc3RPdmVybGFwKGluc3QsIG90aGVyaW5zdCkpDQoJCQkJcmV0dXJuIHRydWU7DQoJCX0N
CgkJaW5zdC54ID0gb2xkeDsNCgkJaW5zdC55ID0gb2xkeTsNCgkJaW5zdC5zZXRfYmJveF9jaGFu
Z2VkKCk7DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnB1c2hJbkZy
YWN0aW9uYWwgPSBmdW5jdGlvbiAoaW5zdCwgeGRpciwgeWRpciwgb2JqLCBsaW1pdCkNCgl7DQoJ
CXZhciBkaXZpc29yID0gMjsNCgkJdmFyIGZyYWM7DQoJCXZhciBmb3J3YXJkID0gZmFsc2U7DQoJ
CXZhciBvdmVybGFwcGluZyA9IGZhbHNlOw0KCQl2YXIgYmVzdHggPSBpbnN0Lng7DQoJCXZhciBi
ZXN0eSA9IGluc3QueTsNCgkJd2hpbGUgKGRpdmlzb3IgPD0gbGltaXQpDQoJCXsNCgkJCWZyYWMg
PSAxIC8gZGl2aXNvcjsNCgkJCWRpdmlzb3IgKj0gMjsNCgkJCWluc3QueCArPSB4ZGlyICogZnJh
YyAqIChmb3J3YXJkID8gMSA6IC0xKTsNCgkJCWluc3QueSArPSB5ZGlyICogZnJhYyAqIChmb3J3
YXJkID8gMSA6IC0xKTsNCgkJCWluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJaWYgKHRoaXMu
dGVzdE92ZXJsYXAoaW5zdCwgb2JqKSkNCgkJCXsNCgkJCQlmb3J3YXJkID0gdHJ1ZTsNCgkJCQlv
dmVybGFwcGluZyA9IHRydWU7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJZm9yd2FyZCA9IGZh
bHNlOw0KCQkJCW92ZXJsYXBwaW5nID0gZmFsc2U7DQoJCQkJYmVzdHggPSBpbnN0Lng7DQoJCQkJ
YmVzdHkgPSBpbnN0Lnk7DQoJCQl9DQoJCX0NCgkJaWYgKG92ZXJsYXBwaW5nKQ0KCQl7DQoJCQlp
bnN0LnggPSBiZXN0eDsNCgkJCWluc3QueSA9IGJlc3R5Ow0KCQkJaW5zdC5zZXRfYmJveF9jaGFu
Z2VkKCk7DQoJCX0NCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnB1c2hPdXRTb2xpZE5lYXJlc3Qg
PSBmdW5jdGlvbiAoaW5zdCwgbWF4X2Rpc3RfKQ0KCXsNCgkJdmFyIG1heF9kaXN0ID0gKGNyLmlz
X3VuZGVmaW5lZChtYXhfZGlzdF8pID8gMTAwIDogbWF4X2Rpc3RfKTsNCgkJdmFyIGRpc3QgPSAw
Ow0KCQl2YXIgb2xkeCA9IGluc3QueA0KCQl2YXIgb2xkeSA9IGluc3QueTsNCgkJdmFyIGRpciA9
IDA7DQoJCXZhciBkeCA9IDAsIGR5ID0gMDsNCgkJdmFyIGxhc3Rfb3ZlcmxhcHBlZCA9IHRoaXMu
dGVzdE92ZXJsYXBTb2xpZChpbnN0KTsNCgkJaWYgKCFsYXN0X292ZXJsYXBwZWQpDQoJCQlyZXR1
cm4gdHJ1ZTsJCS8vIGFscmVhZHkgY2xlYXIgb2Ygc29saWRzDQoJCXdoaWxlIChkaXN0IDw9IG1h
eF9kaXN0KQ0KCQl7DQoJCQlzd2l0Y2ggKGRpcikgew0KCQkJY2FzZSAwOgkJZHggPSAwOyBkeSA9
IC0xOyBkaXN0Kys7IGJyZWFrOw0KCQkJY2FzZSAxOgkJZHggPSAxOyBkeSA9IC0xOyBicmVhazsN
CgkJCWNhc2UgMjoJCWR4ID0gMTsgZHkgPSAwOyBicmVhazsNCgkJCWNhc2UgMzoJCWR4ID0gMTsg
ZHkgPSAxOyBicmVhazsNCgkJCWNhc2UgNDoJCWR4ID0gMDsgZHkgPSAxOyBicmVhazsNCgkJCWNh
c2UgNToJCWR4ID0gLTE7IGR5ID0gMTsgYnJlYWs7DQoJCQljYXNlIDY6CQlkeCA9IC0xOyBkeSA9
IDA7IGJyZWFrOw0KCQkJY2FzZSA3OgkJZHggPSAtMTsgZHkgPSAtMTsgYnJlYWs7DQoJCQl9DQoJ
CQlkaXIgPSAoZGlyICsgMSkgJSA4Ow0KCQkJaW5zdC54ID0gY3IuZmxvb3Iob2xkeCArIChkeCAq
IGRpc3QpKTsNCgkJCWluc3QueSA9IGNyLmZsb29yKG9sZHkgKyAoZHkgKiBkaXN0KSk7DQoJCQlp
bnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCWlmICghdGhpcy50ZXN0T3ZlcmxhcChpbnN0LCBs
YXN0X292ZXJsYXBwZWQpKQ0KCQkJew0KCQkJCWxhc3Rfb3ZlcmxhcHBlZCA9IHRoaXMudGVzdE92
ZXJsYXBTb2xpZChpbnN0KTsNCgkJCQlpZiAoIWxhc3Rfb3ZlcmxhcHBlZCkNCgkJCQkJcmV0dXJu
IHRydWU7DQoJCQl9DQoJCX0NCgkJaW5zdC54ID0gb2xkeDsNCgkJaW5zdC55ID0gb2xkeTsNCgkJ
aW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCVJ1bnRpbWUu
cHJvdG90eXBlLnJlZ2lzdGVyQ29sbGlzaW9uID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQlpZiAo
IWEuY29sbGlzaW9uc0VuYWJsZWQgfHwgIWIuY29sbGlzaW9uc0VuYWJsZWQpDQoJCQlyZXR1cm47
DQoJCXRoaXMucmVnaXN0ZXJlZF9jb2xsaXNpb25zLnB1c2goW2EsIGJdKTsNCgl9Ow0KCVJ1bnRp
bWUucHJvdG90eXBlLmFkZFJlZ2lzdGVyZWRDb2xsaXNpb25DYW5kaWRhdGVzID0gZnVuY3Rpb24g
KGluc3QsIG90aGVyVHlwZSwgYXJyKQ0KCXsNCgkJdmFyIGksIGxlbiwgciwgb3RoZXJJbnN0Ow0K
CQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnJlZ2lzdGVyZWRfY29sbGlzaW9ucy5sZW5ndGg7IGkg
PCBsZW47ICsraSkNCgkJew0KCQkJciA9IHRoaXMucmVnaXN0ZXJlZF9jb2xsaXNpb25zW2ldOw0K
CQkJaWYgKHJbMF0gPT09IGluc3QpDQoJCQkJb3RoZXJJbnN0ID0gclsxXTsNCgkJCWVsc2UgaWYg
KHJbMV0gPT09IGluc3QpDQoJCQkJb3RoZXJJbnN0ID0gclswXTsNCgkJCWVsc2UNCgkJCQljb250
aW51ZTsNCgkJCWlmIChvdGhlclR5cGUuaXNfZmFtaWx5KQ0KCQkJew0KCQkJCWlmIChvdGhlclR5
cGUubWVtYmVycy5pbmRleE9mKG90aGVyVHlwZSkgPT09IC0xKQ0KCQkJCQljb250aW51ZTsNCgkJ
CX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAob3RoZXJJbnN0LnR5cGUgIT09IG90aGVyVHlwZSkN
CgkJCQkJY29udGludWU7DQoJCQl9DQoJCQlpZiAoYXJyLmluZGV4T2Yob3RoZXJJbnN0KSA9PT0g
LTEpDQoJCQkJYXJyLnB1c2gob3RoZXJJbnN0KTsNCgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5
cGUuY2hlY2tSZWdpc3RlcmVkQ29sbGlzaW9uID0gZnVuY3Rpb24gKGEsIGIpDQoJew0KCQl2YXIg
aSwgbGVuLCB4Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnJlZ2lzdGVyZWRfY29sbGlzaW9u
cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJeCA9IHRoaXMucmVnaXN0ZXJlZF9jb2xs
aXNpb25zW2ldOw0KCQkJaWYgKCh4WzBdID09PSBhICYmIHhbMV0gPT09IGIpIHx8ICh4WzBdID09
PSBiICYmIHhbMV0gPT09IGEpKQ0KCQkJCXJldHVybiB0cnVlOw0KCQl9DQoJCXJldHVybiBmYWxz
ZTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmNhbGN1bGF0ZVNvbGlkQm91bmNlQW5nbGUgPSBm
dW5jdGlvbihpbnN0LCBzdGFydHgsIHN0YXJ0eSwgb2JqKQ0KCXsNCgkJdmFyIG9ianggPSBpbnN0
Lng7DQoJCXZhciBvYmp5ID0gaW5zdC55Ow0KCQl2YXIgcmFkaXVzID0gY3IubWF4KDEwLCBjci5k
aXN0YW5jZVRvKHN0YXJ0eCwgc3RhcnR5LCBvYmp4LCBvYmp5KSk7DQoJCXZhciBzdGFydGFuZ2xl
ID0gY3IuYW5nbGVUbyhzdGFydHgsIHN0YXJ0eSwgb2JqeCwgb2JqeSk7DQoJCXZhciBmaXJzdHNv
bGlkID0gb2JqIHx8IHRoaXMudGVzdE92ZXJsYXBTb2xpZChpbnN0KTsNCgkJaWYgKCFmaXJzdHNv
bGlkKQ0KCQkJcmV0dXJuIGNyLmNsYW1wX2FuZ2xlKHN0YXJ0YW5nbGUgKyBjci5QSSk7DQoJCXZh
ciBjdXJzb2xpZCA9IGZpcnN0c29saWQ7DQoJCXZhciBpLCBjdXJhbmdsZSwgYW50aWNsb2Nrd2lz
ZV9mcmVlX2FuZ2xlLCBjbG9ja3dpc2VfZnJlZV9hbmdsZTsNCgkJdmFyIGluY3JlbWVudCA9IGNy
LnRvX3JhZGlhbnMoNSk7CS8vIDUgZGVncmVlIGluY3JlbWVudHMNCgkJZm9yIChpID0gMTsgaSA8
IDM2OyBpKyspDQoJCXsNCgkJCWN1cmFuZ2xlID0gc3RhcnRhbmdsZSAtIGkgKiBpbmNyZW1lbnQ7
DQoJCQlpbnN0LnggPSBzdGFydHggKyBNYXRoLmNvcyhjdXJhbmdsZSkgKiByYWRpdXM7DQoJCQlp
bnN0LnkgPSBzdGFydHkgKyBNYXRoLnNpbihjdXJhbmdsZSkgKiByYWRpdXM7DQoJCQlpbnN0LnNl
dF9iYm94X2NoYW5nZWQoKTsNCgkJCWlmICghdGhpcy50ZXN0T3ZlcmxhcChpbnN0LCBjdXJzb2xp
ZCkpDQoJCQl7DQoJCQkJY3Vyc29saWQgPSBvYmogPyBudWxsIDogdGhpcy50ZXN0T3ZlcmxhcFNv
bGlkKGluc3QpOw0KCQkJCWlmICghY3Vyc29saWQpDQoJCQkJew0KCQkJCQlhbnRpY2xvY2t3aXNl
X2ZyZWVfYW5nbGUgPSBjdXJhbmdsZTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJ
CWlmIChpID09PSAzNikNCgkJCWFudGljbG9ja3dpc2VfZnJlZV9hbmdsZSA9IGNyLmNsYW1wX2Fu
Z2xlKHN0YXJ0YW5nbGUgKyBjci5QSSk7DQoJCXZhciBjdXJzb2xpZCA9IGZpcnN0c29saWQ7DQoJ
CWZvciAoaSA9IDE7IGkgPCAzNjsgaSsrKQ0KCQl7DQoJCQljdXJhbmdsZSA9IHN0YXJ0YW5nbGUg
KyBpICogaW5jcmVtZW50Ow0KCQkJaW5zdC54ID0gc3RhcnR4ICsgTWF0aC5jb3MoY3VyYW5nbGUp
ICogcmFkaXVzOw0KCQkJaW5zdC55ID0gc3RhcnR5ICsgTWF0aC5zaW4oY3VyYW5nbGUpICogcmFk
aXVzOw0KCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQlpZiAoIXRoaXMudGVzdE92ZXJs
YXAoaW5zdCwgY3Vyc29saWQpKQ0KCQkJew0KCQkJCWN1cnNvbGlkID0gb2JqID8gbnVsbCA6IHRo
aXMudGVzdE92ZXJsYXBTb2xpZChpbnN0KTsNCgkJCQlpZiAoIWN1cnNvbGlkKQ0KCQkJCXsNCgkJ
CQkJY2xvY2t3aXNlX2ZyZWVfYW5nbGUgPSBjdXJhbmdsZTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0K
CQkJfQ0KCQl9DQoJCWlmIChpID09PSAzNikNCgkJCWNsb2Nrd2lzZV9mcmVlX2FuZ2xlID0gY3Iu
Y2xhbXBfYW5nbGUoc3RhcnRhbmdsZSArIGNyLlBJKTsNCgkJaW5zdC54ID0gb2JqeDsNCgkJaW5z
dC55ID0gb2JqeTsNCgkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCWlmIChjbG9ja3dpc2Vf
ZnJlZV9hbmdsZSA9PT0gYW50aWNsb2Nrd2lzZV9mcmVlX2FuZ2xlKQ0KCQkJcmV0dXJuIGNsb2Nr
d2lzZV9mcmVlX2FuZ2xlOw0KCQl2YXIgaGFsZl9kaWZmID0gY3IuYW5nbGVEaWZmKGNsb2Nrd2lz
ZV9mcmVlX2FuZ2xlLCBhbnRpY2xvY2t3aXNlX2ZyZWVfYW5nbGUpIC8gMjsNCgkJdmFyIG5vcm1h
bDsNCgkJaWYgKGNyLmFuZ2xlQ2xvY2t3aXNlKGNsb2Nrd2lzZV9mcmVlX2FuZ2xlLCBhbnRpY2xv
Y2t3aXNlX2ZyZWVfYW5nbGUpKQ0KCQl7DQoJCQlub3JtYWwgPSBjci5jbGFtcF9hbmdsZShhbnRp
Y2xvY2t3aXNlX2ZyZWVfYW5nbGUgKyBoYWxmX2RpZmYgKyBjci5QSSk7DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQlub3JtYWwgPSBjci5jbGFtcF9hbmdsZShjbG9ja3dpc2VfZnJlZV9hbmdsZSArIGhh
bGZfZGlmZik7DQoJCX0NCjsNCgkJdmFyIHZ4ID0gTWF0aC5jb3Moc3RhcnRhbmdsZSk7DQoJCXZh
ciB2eSA9IE1hdGguc2luKHN0YXJ0YW5nbGUpOw0KCQl2YXIgbnggPSBNYXRoLmNvcyhub3JtYWwp
Ow0KCQl2YXIgbnkgPSBNYXRoLnNpbihub3JtYWwpOw0KCQl2YXIgdl9kb3RfbiA9IHZ4ICogbngg
KyB2eSAqIG55Ow0KCQl2YXIgcnggPSB2eCAtIDIgKiB2X2RvdF9uICogbng7DQoJCXZhciByeSA9
IHZ5IC0gMiAqIHZfZG90X24gKiBueTsNCgkJcmV0dXJuIGNyLmFuZ2xlVG8oMCwgMCwgcngsIHJ5
KTsNCgl9Ow0KCXZhciB0cmlnZ2VyU2hlZXRJbmRleCA9IC0xOw0KCVJ1bnRpbWUucHJvdG90eXBl
LnRyaWdnZXIgPSBmdW5jdGlvbiAobWV0aG9kLCBpbnN0LCB2YWx1ZSAvKiBmb3IgZmFzdCB0cmln
Z2VycyAqLykNCgl7DQo7DQoJCWlmICghdGhpcy5ydW5uaW5nX2xheW91dCkNCgkJCXJldHVybiBm
YWxzZTsNCgkJdmFyIHNoZWV0ID0gdGhpcy5ydW5uaW5nX2xheW91dC5ldmVudF9zaGVldDsNCgkJ
aWYgKCFzaGVldCkNCgkJCXJldHVybiBmYWxzZTsgICAgIC8vIG5vIGV2ZW50IHNoZWV0IGFjdGl2
ZTsgbm90aGluZyB0byB0cmlnZ2VyDQoJCXZhciByZXQgPSBmYWxzZTsNCgkJdmFyIHIsIGksIGxl
bjsNCgkJdHJpZ2dlclNoZWV0SW5kZXgrKzsNCgkJdmFyIGRlZXBfaW5jbHVkZXMgPSBzaGVldC5k
ZWVwX2luY2x1ZGVzOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBkZWVwX2luY2x1ZGVzLmxlbmd0aDsg
aSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlyID0gdGhpcy50cmlnZ2VyT25TaGVldChtZXRob2QsIGlu
c3QsIGRlZXBfaW5jbHVkZXNbaV0sIHZhbHVlKTsNCgkJCXJldCA9IHJldCB8fCByOw0KCQl9DQoJ
CXIgPSB0aGlzLnRyaWdnZXJPblNoZWV0KG1ldGhvZCwgaW5zdCwgc2hlZXQsIHZhbHVlKTsNCgkJ
cmV0ID0gcmV0IHx8IHI7DQoJCXRyaWdnZXJTaGVldEluZGV4LS07DQoJCXJldHVybiByZXQ7DQog
ICAgfTsNCiAgICBSdW50aW1lLnByb3RvdHlwZS50cmlnZ2VyT25TaGVldCA9IGZ1bmN0aW9uICht
ZXRob2QsIGluc3QsIHNoZWV0LCB2YWx1ZSkNCiAgICB7DQogICAgICAgIHZhciByZXQgPSBmYWxz
ZTsNCgkJdmFyIGksIGxlbmksIHIsIGZhbWlsaWVzOw0KCQlpZiAoIWluc3QpDQoJCXsNCgkJCXIg
PSB0aGlzLnRyaWdnZXJPblNoZWV0Rm9yVHlwZU5hbWUobWV0aG9kLCBpbnN0LCAic3lzdGVtIiwg
c2hlZXQsIHZhbHVlKTsNCgkJCXJldCA9IHJldCB8fCByOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJ
ciA9IHRoaXMudHJpZ2dlck9uU2hlZXRGb3JUeXBlTmFtZShtZXRob2QsIGluc3QsIGluc3QudHlw
ZS5uYW1lLCBzaGVldCwgdmFsdWUpOw0KCQkJcmV0ID0gcmV0IHx8IHI7DQoJCQlmYW1pbGllcyA9
IGluc3QudHlwZS5mYW1pbGllczsNCgkJCWZvciAoaSA9IDAsIGxlbmkgPSBmYW1pbGllcy5sZW5n
dGg7IGkgPCBsZW5pOyArK2kpDQoJCQl7DQoJCQkJciA9IHRoaXMudHJpZ2dlck9uU2hlZXRGb3JU
eXBlTmFtZShtZXRob2QsIGluc3QsIGZhbWlsaWVzW2ldLm5hbWUsIHNoZWV0LCB2YWx1ZSk7DQoJ
CQkJcmV0ID0gcmV0IHx8IHI7DQoJCQl9DQoJCX0NCgkJcmV0dXJuIHJldDsgICAgICAgICAgICAg
Ly8gdHJ1ZSBpZiBhbnl0aGluZyBnb3QgdHJpZ2dlcmVkDQoJfTsNCglSdW50aW1lLnByb3RvdHlw
ZS50cmlnZ2VyT25TaGVldEZvclR5cGVOYW1lID0gZnVuY3Rpb24gKG1ldGhvZCwgaW5zdCwgdHlw
ZV9uYW1lLCBzaGVldCwgdmFsdWUpDQoJew0KCQl2YXIgaSwgbGVuaTsNCgkJdmFyIHJldCA9IGZh
bHNlLCByZXQyID0gZmFsc2U7DQoJCXZhciB0cmlnLCBpbmRleDsNCgkJdmFyIGZhc3R0cmlnZ2Vy
ID0gKHR5cGVvZiB2YWx1ZSAhPT0gInVuZGVmaW5lZCIpOw0KCQl2YXIgdHJpZ2dlcnMgPSAoZmFz
dHRyaWdnZXIgPyBzaGVldC5mYXN0dHJpZ2dlcnMgOiBzaGVldC50cmlnZ2Vycyk7DQoJCXZhciBv
YmpfZW50cnkgPSB0cmlnZ2Vyc1t0eXBlX25hbWVdOw0KCQlpZiAoIW9ial9lbnRyeSkNCgkJCXJl
dHVybiByZXQ7DQoJCXZhciB0cmlnZ2Vyc19saXN0ID0gbnVsbDsNCgkJZm9yIChpID0gMCwgbGVu
aSA9IG9ial9lbnRyeS5sZW5ndGg7IGkgPCBsZW5pOyArK2kpDQoJCXsNCgkJCWlmIChvYmpfZW50
cnlbaV0ubWV0aG9kID09IG1ldGhvZCkNCgkJCXsNCgkJCQl0cmlnZ2Vyc19saXN0ID0gb2JqX2Vu
dHJ5W2ldLmV2czsNCgkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCQlpZiAoIXRyaWdnZXJzX2xpc3Qp
DQoJCQlyZXR1cm4gcmV0Ow0KCQl2YXIgdHJpZ2dlcnNfdG9fZmlyZTsNCgkJaWYgKGZhc3R0cmln
Z2VyKQ0KCQl7DQoJCQl0cmlnZ2Vyc190b19maXJlID0gdHJpZ2dlcnNfbGlzdFt2YWx1ZV07DQoJ
CX0NCgkJZWxzZQ0KCQl7DQoJCQl0cmlnZ2Vyc190b19maXJlID0gdHJpZ2dlcnNfbGlzdDsNCgkJ
fQ0KCQlpZiAoIXRyaWdnZXJzX3RvX2ZpcmUpDQoJCQlyZXR1cm4gbnVsbDsNCgkJZm9yIChpID0g
MCwgbGVuaSA9IHRyaWdnZXJzX3RvX2ZpcmUubGVuZ3RoOyBpIDwgbGVuaTsgaSsrKQ0KCQl7DQoJ
CQl0cmlnID0gdHJpZ2dlcnNfdG9fZmlyZVtpXVswXTsNCgkJCWluZGV4ID0gdHJpZ2dlcnNfdG9f
ZmlyZVtpXVsxXTsNCgkJCXJldDIgPSB0aGlzLmV4ZWN1dGVTaW5nbGVUcmlnZ2VyKGluc3QsIHR5
cGVfbmFtZSwgdHJpZywgaW5kZXgpOw0KCQkJcmV0ID0gcmV0IHx8IHJldDI7DQoJCX0NCgkJcmV0
dXJuIHJldDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmV4ZWN1dGVTaW5nbGVUcmlnZ2VyID0g
ZnVuY3Rpb24gKGluc3QsIHR5cGVfbmFtZSwgdHJpZywgaW5kZXgpDQoJew0KCQl2YXIgaSwgbGVu
aTsNCgkJdmFyIHJldCA9IGZhbHNlOw0KCQl0aGlzLnRyaWdnZXJfZGVwdGgrKzsNCgkJdmFyIGN1
cnJlbnRfZXZlbnQgPSB0aGlzLmdldEN1cnJlbnRFdmVudFN0YWNrKCkuY3VycmVudF9ldmVudDsN
CgkJaWYgKGN1cnJlbnRfZXZlbnQpDQoJCQl0aGlzLnB1c2hDbGVhblNvbChjdXJyZW50X2V2ZW50
LnNvbE1vZGlmaWVyc0luY2x1ZGluZ1BhcmVudHMpOw0KCQl2YXIgaXNyZWN1cnNpdmUgPSAodGhp
cy50cmlnZ2VyX2RlcHRoID4gMSk7CQkvLyBjYWxsaW5nIHRyaWdnZXIgZnJvbSBpbnNpZGUgYW5v
dGhlciB0cmlnZ2VyDQoJCXRoaXMucHVzaENsZWFuU29sKHRyaWcuc29sTW9kaWZpZXJzSW5jbHVk
aW5nUGFyZW50cyk7DQoJCWlmIChpc3JlY3Vyc2l2ZSkNCgkJCXRoaXMucHVzaExvY2FsVmFyU3Rh
Y2soKTsNCgkJdmFyIGV2ZW50X3N0YWNrID0gdGhpcy5wdXNoRXZlbnRTdGFjayh0cmlnKTsNCgkJ
ZXZlbnRfc3RhY2suY3VycmVudF9ldmVudCA9IHRyaWc7DQoJCWlmIChpbnN0KQ0KCQl7DQoJCQl2
YXIgc29sID0gdGhpcy50eXBlc1t0eXBlX25hbWVdLmdldEN1cnJlbnRTb2woKTsNCgkJCXNvbC5z
ZWxlY3RfYWxsID0gZmFsc2U7DQoJCQljci5jbGVhckFycmF5KHNvbC5pbnN0YW5jZXMpOw0KCQkJ
c29sLmluc3RhbmNlc1swXSA9IGluc3Q7DQoJCQl0aGlzLnR5cGVzW3R5cGVfbmFtZV0uYXBwbHlT
b2xUb0NvbnRhaW5lcigpOw0KCQl9DQoJCXZhciBva190b19ydW4gPSB0cnVlOw0KCQlpZiAodHJp
Zy5wYXJlbnQpDQoJCXsNCgkJCXZhciB0ZW1wX3BhcmVudHNfYXJyID0gZXZlbnRfc3RhY2sudGVt
cF9wYXJlbnRzX2FycjsNCgkJCXZhciBjdXJfcGFyZW50ID0gdHJpZy5wYXJlbnQ7DQoJCQl3aGls
ZSAoY3VyX3BhcmVudCkNCgkJCXsNCgkJCQl0ZW1wX3BhcmVudHNfYXJyLnB1c2goY3VyX3BhcmVu
dCk7DQoJCQkJY3VyX3BhcmVudCA9IGN1cl9wYXJlbnQucGFyZW50Ow0KCQkJfQ0KCQkJdGVtcF9w
YXJlbnRzX2Fyci5yZXZlcnNlKCk7DQoJCQlmb3IgKGkgPSAwLCBsZW5pID0gdGVtcF9wYXJlbnRz
X2Fyci5sZW5ndGg7IGkgPCBsZW5pOyBpKyspDQoJCQl7DQoJCQkJaWYgKCF0ZW1wX3BhcmVudHNf
YXJyW2ldLnJ1bl9wcmV0cmlnZ2VyKCkpICAgLy8gcGFyZW50IGV2ZW50IGZhaWxlZA0KCQkJCXsN
CgkJCQkJb2tfdG9fcnVuID0gZmFsc2U7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCX0NCgkJfQ0K
CQlpZiAob2tfdG9fcnVuKQ0KCQl7DQoJCQl0aGlzLmV4ZWNjb3VudCsrOw0KCQkJaWYgKHRyaWcu
b3JibG9jaykNCgkJCQl0cmlnLnJ1bl9vcmJsb2NrdHJpZ2dlcihpbmRleCk7DQoJCQllbHNlDQoJ
CQkJdHJpZy5ydW4oKTsNCgkJCXJldCA9IHJldCB8fCBldmVudF9zdGFjay5sYXN0X2V2ZW50X3Ry
dWU7DQoJCX0NCgkJdGhpcy5wb3BFdmVudFN0YWNrKCk7DQoJCWlmIChpc3JlY3Vyc2l2ZSkNCgkJ
CXRoaXMucG9wTG9jYWxWYXJTdGFjaygpOw0KCQl0aGlzLnBvcFNvbCh0cmlnLnNvbE1vZGlmaWVy
c0luY2x1ZGluZ1BhcmVudHMpOw0KCQlpZiAoY3VycmVudF9ldmVudCkNCgkJCXRoaXMucG9wU29s
KGN1cnJlbnRfZXZlbnQuc29sTW9kaWZpZXJzSW5jbHVkaW5nUGFyZW50cyk7DQoJCWlmICh0aGlz
Lmhhc1BlbmRpbmdJbnN0YW5jZXMgJiYgdGhpcy5pc0luT25EZXN0cm95ID09PSAwICYmIHRyaWdn
ZXJTaGVldEluZGV4ID09PSAwICYmICF0aGlzLmlzUnVubmluZ0V2ZW50cykNCgkJew0KCQkJdGhp
cy5DbGVhckRlYXRoUm93KCk7DQoJCX0NCgkJdGhpcy50cmlnZ2VyX2RlcHRoLS07DQoJCXJldHVy
biByZXQ7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRDdXJyZW50Q29uZGl0aW9uID0gZnVu
Y3Rpb24gKCkNCgl7DQoJCXZhciBldmluZm8gPSB0aGlzLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7
DQoJCXJldHVybiBldmluZm8uY3VycmVudF9ldmVudC5jb25kaXRpb25zW2V2aW5mby5jbmRpbmRl
eF07DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRDdXJyZW50Q29uZGl0aW9uT2JqZWN0VHlw
ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgY25kID0gdGhpcy5nZXRDdXJyZW50Q29uZGl0aW9u
KCk7DQoJCXJldHVybiBjbmQudHlwZTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmlzQ3VycmVu
dENvbmRpdGlvbkZpcnN0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBldmluZm8gPSB0aGlzLmdl
dEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCXJldHVybiBldmluZm8uY25kaW5kZXggPT09IDA7DQoJ
fTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRDdXJyZW50QWN0aW9uID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXZhciBldmluZm8gPSB0aGlzLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCXJldHVybiBl
dmluZm8uY3VycmVudF9ldmVudC5hY3Rpb25zW2V2aW5mby5hY3RpbmRleF07DQoJfTsNCglSdW50
aW1lLnByb3RvdHlwZS5wdXNoTG9jYWxWYXJTdGFjayA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlz
LmxvY2FsdmFyX3N0YWNrX2luZGV4Kys7DQoJCWlmICh0aGlzLmxvY2FsdmFyX3N0YWNrX2luZGV4
ID49IHRoaXMubG9jYWx2YXJfc3RhY2subGVuZ3RoKQ0KCQkJdGhpcy5sb2NhbHZhcl9zdGFjay5w
dXNoKFtdKTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnBvcExvY2FsVmFyU3RhY2sgPSBmdW5j
dGlvbiAoKQ0KCXsNCjsNCgkJdGhpcy5sb2NhbHZhcl9zdGFja19pbmRleC0tOw0KCX07DQoJUnVu
dGltZS5wcm90b3R5cGUuZ2V0Q3VycmVudExvY2FsVmFyU3RhY2sgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJcmV0dXJuIHRoaXMubG9jYWx2YXJfc3RhY2tbdGhpcy5sb2NhbHZhcl9zdGFja19pbmRleF07
DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5wdXNoRXZlbnRTdGFjayA9IGZ1bmN0aW9uIChjdXJf
ZXZlbnQpDQoJew0KCQl0aGlzLmV2ZW50X3N0YWNrX2luZGV4Kys7DQoJCWlmICh0aGlzLmV2ZW50
X3N0YWNrX2luZGV4ID49IHRoaXMuZXZlbnRfc3RhY2subGVuZ3RoKQ0KCQkJdGhpcy5ldmVudF9z
dGFjay5wdXNoKG5ldyBjci5ldmVudFN0YWNrRnJhbWUoKSk7DQoJCXZhciByZXQgPSB0aGlzLmdl
dEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCXJldC5yZXNldChjdXJfZXZlbnQpOw0KCQlyZXR1cm4g
cmV0Ow0KCX07DQoJUnVudGltZS5wcm90b3R5cGUucG9wRXZlbnRTdGFjayA9IGZ1bmN0aW9uICgp
DQoJew0KOw0KCQl0aGlzLmV2ZW50X3N0YWNrX2luZGV4LS07DQoJfTsNCglSdW50aW1lLnByb3Rv
dHlwZS5nZXRDdXJyZW50RXZlbnRTdGFjayA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhp
cy5ldmVudF9zdGFja1t0aGlzLmV2ZW50X3N0YWNrX2luZGV4XTsNCgl9Ow0KCVJ1bnRpbWUucHJv
dG90eXBlLnB1c2hMb29wU3RhY2sgPSBmdW5jdGlvbiAobmFtZV8pDQoJew0KCQl0aGlzLmxvb3Bf
c3RhY2tfaW5kZXgrKzsNCgkJaWYgKHRoaXMubG9vcF9zdGFja19pbmRleCA+PSB0aGlzLmxvb3Bf
c3RhY2subGVuZ3RoKQ0KCQl7DQoJCQl0aGlzLmxvb3Bfc3RhY2sucHVzaChjci5zZWFsKHsgbmFt
ZTogbmFtZV8sIGluZGV4OiAwLCBzdG9wcGVkOiBmYWxzZSB9KSk7DQoJCX0NCgkJdmFyIHJldCA9
IHRoaXMuZ2V0Q3VycmVudExvb3AoKTsNCgkJcmV0Lm5hbWUgPSBuYW1lXzsNCgkJcmV0LmluZGV4
ID0gMDsNCgkJcmV0LnN0b3BwZWQgPSBmYWxzZTsNCgkJcmV0dXJuIHJldDsNCgl9Ow0KCVJ1bnRp
bWUucHJvdG90eXBlLnBvcExvb3BTdGFjayA9IGZ1bmN0aW9uICgpDQoJew0KOw0KCQl0aGlzLmxv
b3Bfc3RhY2tfaW5kZXgtLTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldEN1cnJlbnRMb29w
ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlzLmxvb3Bfc3RhY2tbdGhpcy5sb29wX3N0
YWNrX2luZGV4XTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldEV2ZW50VmFyaWFibGVCeU5h
bWUgPSBmdW5jdGlvbiAobmFtZSwgc2NvcGUpDQoJew0KCQl2YXIgaSwgbGVuaSwgaiwgbGVuaiwg
c2hlZXQsIGU7DQoJCXdoaWxlIChzY29wZSkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuaSA9IHNj
b3BlLnN1YmV2ZW50cy5sZW5ndGg7IGkgPCBsZW5pOyBpKyspDQoJCQl7DQoJCQkJZSA9IHNjb3Bl
LnN1YmV2ZW50c1tpXTsNCgkJCQlpZiAoZSBpbnN0YW5jZW9mIGNyLmV2ZW50dmFyaWFibGUgJiYg
Y3IuZXF1YWxzX25vY2FzZShuYW1lLCBlLm5hbWUpKQ0KCQkJCQlyZXR1cm4gZTsNCgkJCX0NCgkJ
CXNjb3BlID0gc2NvcGUucGFyZW50Ow0KCQl9DQoJCWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLmV2
ZW50c2hlZXRzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJew0KCQkJc2hlZXQg
PSB0aGlzLmV2ZW50c2hlZXRzX2J5X2luZGV4W2ldOw0KCQkJZm9yIChqID0gMCwgbGVuaiA9IHNo
ZWV0LmV2ZW50cy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJZSA9IHNoZWV0LmV2
ZW50c1tqXTsNCgkJCQlpZiAoZSBpbnN0YW5jZW9mIGNyLmV2ZW50dmFyaWFibGUgJiYgY3IuZXF1
YWxzX25vY2FzZShuYW1lLCBlLm5hbWUpKQ0KCQkJCQlyZXR1cm4gZTsNCgkJCX0NCgkJfQ0KCQly
ZXR1cm4gbnVsbDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldExheW91dEJ5U2lkID0gZnVu
Y3Rpb24gKHNpZF8pDQoJew0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlz
LmxheW91dHNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWlmICh0aGlz
LmxheW91dHNfYnlfaW5kZXhbaV0uc2lkID09PSBzaWRfKQ0KCQkJCXJldHVybiB0aGlzLmxheW91
dHNfYnlfaW5kZXhbaV07DQoJCX0NCgkJcmV0dXJuIG51bGw7DQoJfTsNCglSdW50aW1lLnByb3Rv
dHlwZS5nZXRPYmplY3RUeXBlQnlTaWQgPSBmdW5jdGlvbiAoc2lkXykNCgl7DQoJCXZhciBpLCBs
ZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudHlwZXNfYnlfaW5kZXgubGVuZ3RoOyBpIDwg
bGVuOyBpKyspDQoJCXsNCgkJCWlmICh0aGlzLnR5cGVzX2J5X2luZGV4W2ldLnNpZCA9PT0gc2lk
XykNCgkJCQlyZXR1cm4gdGhpcy50eXBlc19ieV9pbmRleFtpXTsNCgkJfQ0KCQlyZXR1cm4gbnVs
bDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldEdyb3VwQnlTaWQgPSBmdW5jdGlvbiAoc2lk
XykNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuYWxsR3JvdXBz
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpZiAodGhpcy5hbGxHcm91cHNbaV0uc2lk
ID09PSBzaWRfKQ0KCQkJCXJldHVybiB0aGlzLmFsbEdyb3Vwc1tpXTsNCgkJfQ0KCQlyZXR1cm4g
bnVsbDsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmRvQ2FudmFzU25hcHNob3QgPSBmdW5jdGlv
biAoZm9ybWF0XywgcXVhbGl0eV8pDQoJew0KCQl0aGlzLnNuYXBzaG90Q2FudmFzID0gW2Zvcm1h
dF8sIHF1YWxpdHlfXTsNCgkJdGhpcy5yZWRyYXcgPSB0cnVlOwkJLy8gZm9yY2UgcmVkcmF3IHNv
IHNuYXBzaG90IGlzIGFsd2F5cyB0YWtlbg0KCX07DQoJZnVuY3Rpb24gSXNJbmRleGVkREJBdmFp
bGFibGUoKQ0KCXsNCgkJdHJ5IHsNCgkJCXJldHVybiAhIXdpbmRvdy5pbmRleGVkREI7DQoJCX0N
CgkJY2F0Y2ggKGUpDQoJCXsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KCX07DQoJZnVuY3Rpb24g
bWFrZVNhdmVEYihlKQ0KCXsNCgkJdmFyIGRiID0gZS50YXJnZXQucmVzdWx0Ow0KCQlkYi5jcmVh
dGVPYmplY3RTdG9yZSgic2F2ZXMiLCB7IGtleVBhdGg6ICJzbG90IiB9KTsNCgl9Ow0KCWZ1bmN0
aW9uIEluZGV4ZWREQl9Xcml0ZVNsb3Qoc2xvdF8sIGRhdGFfLCBvbmNvbXBsZXRlXywgb25lcnJv
cl8pDQoJew0KCQl0cnkgew0KCQkJdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbigiX0MyU2F2
ZVN0YXRlcyIpOw0KCQkJcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBtYWtlU2F2ZURiOw0KCQkJ
cmVxdWVzdC5vbmVycm9yID0gb25lcnJvcl87DQoJCQlyZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0
aW9uIChlKQ0KCQkJew0KCQkJCXZhciBkYiA9IGUudGFyZ2V0LnJlc3VsdDsNCgkJCQlkYi5vbmVy
cm9yID0gb25lcnJvcl87DQoJCQkJdmFyIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oWyJz
YXZlcyJdLCAicmVhZHdyaXRlIik7DQoJCQkJdmFyIG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24u
b2JqZWN0U3RvcmUoInNhdmVzIik7DQoJCQkJdmFyIHB1dFJlcSA9IG9iamVjdFN0b3JlLnB1dCh7
InNsb3QiOiBzbG90XywgImRhdGEiOiBkYXRhXyB9KTsNCgkJCQlwdXRSZXEub25zdWNjZXNzID0g
b25jb21wbGV0ZV87DQoJCQl9Ow0KCQl9DQoJCWNhdGNoIChlcnIpDQoJCXsNCgkJCW9uZXJyb3Jf
KGVycik7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIEluZGV4ZWREQl9SZWFkU2xvdChzbG90Xywgb25j
b21wbGV0ZV8sIG9uZXJyb3JfKQ0KCXsNCgkJdHJ5IHsNCgkJCXZhciByZXF1ZXN0ID0gaW5kZXhl
ZERCLm9wZW4oIl9DMlNhdmVTdGF0ZXMiKTsNCgkJCXJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0g
bWFrZVNhdmVEYjsNCgkJCXJlcXVlc3Qub25lcnJvciA9IG9uZXJyb3JfOw0KCQkJcmVxdWVzdC5v
bnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSkNCgkJCXsNCgkJCQl2YXIgZGIgPSBlLnRhcmdldC5yZXN1
bHQ7DQoJCQkJZGIub25lcnJvciA9IG9uZXJyb3JfOw0KCQkJCXZhciB0cmFuc2FjdGlvbiA9IGRi
LnRyYW5zYWN0aW9uKFsic2F2ZXMiXSk7DQoJCQkJdmFyIG9iamVjdFN0b3JlID0gdHJhbnNhY3Rp
b24ub2JqZWN0U3RvcmUoInNhdmVzIik7DQoJCQkJdmFyIHJlYWRSZXEgPSBvYmplY3RTdG9yZS5n
ZXQoc2xvdF8pOw0KCQkJCXJlYWRSZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGUpDQoJCQkJew0K
CQkJCQlpZiAocmVhZFJlcS5yZXN1bHQpDQoJCQkJCQlvbmNvbXBsZXRlXyhyZWFkUmVxLnJlc3Vs
dFsiZGF0YSJdKTsNCgkJCQkJZWxzZQ0KCQkJCQkJb25jb21wbGV0ZV8obnVsbCk7DQoJCQkJfTsN
CgkJCX07DQoJCX0NCgkJY2F0Y2ggKGVycikNCgkJew0KCQkJb25lcnJvcl8oZXJyKTsNCgkJfQ0K
CX07DQoJUnVudGltZS5wcm90b3R5cGUuc2lnbmFsQ29udGludW91c1ByZXZpZXcgPSBmdW5jdGlv
biAoKQ0KCXsNCgkJdGhpcy5zaWduYWxsZWRDb250aW51b3VzUHJldmlldyA9IHRydWU7DQoJfTsN
CglmdW5jdGlvbiBkb0NvbnRpbnVvdXNQcmV2aWV3UmVsb2FkKCkNCgl7DQoJCWNyLmxvZ2V4cG9y
dCgiUmVsb2FkaW5nIGZvciBjb250aW51b3VzIHByZXZpZXciKTsNCgkJaWYgKCEhd2luZG93WyJj
MmNvY29vbmpzIl0pDQoJCXsNCgkJCUNvY29vbkpTWyJBcHAiXVsicmVsb2FkIl0oKTsNCgkJfQ0K
CQllbHNlDQoJCXsNCgkJCWlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoImNvbnRp
bnVvdXMiKSA+IC0xKQ0KCQkJCXdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7DQoJCQllbHNl
DQoJCQkJd2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uICsgIj9jb250aW51b3VzIjsN
CgkJfQ0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuaGFuZGxlU2F2ZUxvYWQgPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQl2YXIgc2F2aW5nVG9TbG90ID0gdGhpcy5zYXZl
VG9TbG90Ow0KCQl2YXIgc2F2aW5nSnNvbiA9IHRoaXMubGFzdFNhdmVKc29uOw0KCQl2YXIgbG9h
ZGluZ0Zyb21TbG90ID0gdGhpcy5sb2FkRnJvbVNsb3Q7DQoJCXZhciBjb250aW51b3VzID0gZmFs
c2U7DQoJCWlmICh0aGlzLnNpZ25hbGxlZENvbnRpbnVvdXNQcmV2aWV3KQ0KCQl7DQoJCQljb250
aW51b3VzID0gdHJ1ZTsNCgkJCXNhdmluZ1RvU2xvdCA9ICJfX2MyX2NvbnRpbnVvdXNwcmV2aWV3
IjsNCgkJCXRoaXMuc2lnbmFsbGVkQ29udGludW91c1ByZXZpZXcgPSBmYWxzZTsNCgkJfQ0KCQlp
ZiAoc2F2aW5nVG9TbG90Lmxlbmd0aCkNCgkJew0KCQkJdGhpcy5DbGVhckRlYXRoUm93KCk7DQoJ
CQlzYXZpbmdKc29uID0gdGhpcy5zYXZlVG9KU09OU3RyaW5nKCk7DQoJCQlpZiAoSXNJbmRleGVk
REJBdmFpbGFibGUoKSAmJiAhdGhpcy5pc0NvY29vbkpzKQ0KCQkJew0KCQkJCUluZGV4ZWREQl9X
cml0ZVNsb3Qoc2F2aW5nVG9TbG90LCBzYXZpbmdKc29uLCBmdW5jdGlvbiAoKQ0KCQkJCXsNCgkJ
CQkJY3IubG9nZXhwb3J0KCJTYXZlZCBzdGF0ZSB0byBJbmRleGVkREIgc3RvcmFnZSAoIiArIHNh
dmluZ0pzb24ubGVuZ3RoICsgIiBieXRlcykiKTsNCgkJCQkJc2VsZi5sYXN0U2F2ZUpzb24gPSBz
YXZpbmdKc29uOw0KCQkJCQlzZWxmLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUu
Y25kcy5PblNhdmVDb21wbGV0ZSwgbnVsbCk7DQoJCQkJCXNlbGYubGFzdFNhdmVKc29uID0gIiI7
DQoJCQkJCXNhdmluZ0pzb24gPSAiIjsNCgkJCQkJaWYgKGNvbnRpbnVvdXMpDQoJCQkJCQlkb0Nv
bnRpbnVvdXNQcmV2aWV3UmVsb2FkKCk7DQoJCQkJfSwgZnVuY3Rpb24gKGUpDQoJCQkJew0KCQkJ
CQl0cnkgew0KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oIl9fYzJzYXZlXyIgKyBzYXZpbmdU
b1Nsb3QsIHNhdmluZ0pzb24pOw0KCQkJCQkJY3IubG9nZXhwb3J0KCJTYXZlZCBzdGF0ZSB0byBX
ZWJTdG9yYWdlICgiICsgc2F2aW5nSnNvbi5sZW5ndGggKyAiIGJ5dGVzKSIpOw0KCQkJCQkJc2Vs
Zi5sYXN0U2F2ZUpzb24gPSBzYXZpbmdKc29uOw0KCQkJCQkJc2VsZi50cmlnZ2VyKGNyLnN5c3Rl
bV9vYmplY3QucHJvdG90eXBlLmNuZHMuT25TYXZlQ29tcGxldGUsIG51bGwpOw0KCQkJCQkJc2Vs
Zi5sYXN0U2F2ZUpzb24gPSAiIjsNCgkJCQkJCXNhdmluZ0pzb24gPSAiIjsNCgkJCQkJCWlmIChj
b250aW51b3VzKQ0KCQkJCQkJCWRvQ29udGludW91c1ByZXZpZXdSZWxvYWQoKTsNCgkJCQkJfQ0K
CQkJCQljYXRjaCAoZikNCgkJCQkJew0KCQkJCQkJY3IubG9nZXhwb3J0KCJGYWlsZWQgdG8gc2F2
ZSBnYW1lIHN0YXRlOiAiICsgZSArICI7ICIgKyBmKTsNCgkJCQkJCXNlbGYudHJpZ2dlcihjci5z
eXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLk9uU2F2ZUZhaWxlZCwgbnVsbCk7DQoJCQkJCX0N
CgkJCQl9KTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0cnkgew0KCQkJCQlsb2NhbFN0b3Jh
Z2Uuc2V0SXRlbSgiX19jMnNhdmVfIiArIHNhdmluZ1RvU2xvdCwgc2F2aW5nSnNvbik7DQoJCQkJ
CWNyLmxvZ2V4cG9ydCgiU2F2ZWQgc3RhdGUgdG8gV2ViU3RvcmFnZSAoIiArIHNhdmluZ0pzb24u
bGVuZ3RoICsgIiBieXRlcykiKTsNCgkJCQkJc2VsZi5sYXN0U2F2ZUpzb24gPSBzYXZpbmdKc29u
Ow0KCQkJCQl0aGlzLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuY25kcy5PblNh
dmVDb21wbGV0ZSwgbnVsbCk7DQoJCQkJCXNlbGYubGFzdFNhdmVKc29uID0gIiI7DQoJCQkJCXNh
dmluZ0pzb24gPSAiIjsNCgkJCQkJaWYgKGNvbnRpbnVvdXMpDQoJCQkJCQlkb0NvbnRpbnVvdXNQ
cmV2aWV3UmVsb2FkKCk7DQoJCQkJfQ0KCQkJCWNhdGNoIChlKQ0KCQkJCXsNCgkJCQkJY3IubG9n
ZXhwb3J0KCJFcnJvciBzYXZpbmcgdG8gV2ViU3RvcmFnZTogIiArIGUpOw0KCQkJCQlzZWxmLnRy
aWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuY25kcy5PblNhdmVGYWlsZWQsIG51bGwp
Ow0KCQkJCX0NCgkJCX0NCgkJCXRoaXMuc2F2ZVRvU2xvdCA9ICIiOw0KCQkJdGhpcy5sb2FkRnJv
bVNsb3QgPSAiIjsNCgkJCXRoaXMubG9hZEZyb21Kc29uID0gbnVsbDsNCgkJfQ0KCQlpZiAobG9h
ZGluZ0Zyb21TbG90Lmxlbmd0aCkNCgkJew0KCQkJaWYgKElzSW5kZXhlZERCQXZhaWxhYmxlKCkg
JiYgIXRoaXMuaXNDb2Nvb25KcykNCgkJCXsNCgkJCQlJbmRleGVkREJfUmVhZFNsb3QobG9hZGlu
Z0Zyb21TbG90LCBmdW5jdGlvbiAocmVzdWx0XykNCgkJCQl7DQoJCQkJCWlmIChyZXN1bHRfKQ0K
CQkJCQl7DQoJCQkJCQlzZWxmLmxvYWRGcm9tSnNvbiA9IHJlc3VsdF87DQoJCQkJCQljci5sb2dl
eHBvcnQoIkxvYWRlZCBzdGF0ZSBmcm9tIEluZGV4ZWREQiBzdG9yYWdlICgiICsgc2VsZi5sb2Fk
RnJvbUpzb24ubGVuZ3RoICsgIiBieXRlcykiKTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsN
CgkJCQkJCXNlbGYubG9hZEZyb21Kc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9fYzJzYXZl
XyIgKyBsb2FkaW5nRnJvbVNsb3QpIHx8ICIiOw0KCQkJCQkJY3IubG9nZXhwb3J0KCJMb2FkZWQg
c3RhdGUgZnJvbSBXZWJTdG9yYWdlICgiICsgc2VsZi5sb2FkRnJvbUpzb24ubGVuZ3RoICsgIiBi
eXRlcykiKTsNCgkJCQkJfQ0KCQkJCQlzZWxmLnN1c3BlbmREcmF3aW5nID0gZmFsc2U7DQoJCQkJ
CWlmICghc2VsZi5sb2FkRnJvbUpzb24pDQoJCQkJCXsNCgkJCQkJCXNlbGYubG9hZEZyb21Kc29u
ID0gbnVsbDsNCgkJCQkJCXNlbGYudHJpZ2dlcihjci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5j
bmRzLk9uTG9hZEZhaWxlZCwgbnVsbCk7DQoJCQkJCX0NCgkJCQl9LCBmdW5jdGlvbiAoZSkNCgkJ
CQl7DQoJCQkJCXNlbGYubG9hZEZyb21Kc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9fYzJz
YXZlXyIgKyBsb2FkaW5nRnJvbVNsb3QpIHx8ICIiOw0KCQkJCQljci5sb2dleHBvcnQoIkxvYWRl
ZCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UgKCIgKyBzZWxmLmxvYWRGcm9tSnNvbi5sZW5ndGggKyAi
IGJ5dGVzKSIpOw0KCQkJCQlzZWxmLnN1c3BlbmREcmF3aW5nID0gZmFsc2U7DQoJCQkJCWlmICgh
c2VsZi5sb2FkRnJvbUpzb24pDQoJCQkJCXsNCgkJCQkJCXNlbGYubG9hZEZyb21Kc29uID0gbnVs
bDsNCgkJCQkJCXNlbGYudHJpZ2dlcihjci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLk9u
TG9hZEZhaWxlZCwgbnVsbCk7DQoJCQkJCX0NCgkJCQl9KTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsN
CgkJCQl0cnkgew0KCQkJCQl0aGlzLmxvYWRGcm9tSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVt
KCJfX2Myc2F2ZV8iICsgbG9hZGluZ0Zyb21TbG90KSB8fCAiIjsNCgkJCQkJY3IubG9nZXhwb3J0
KCJMb2FkZWQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlICgiICsgdGhpcy5sb2FkRnJvbUpzb24ubGVu
Z3RoICsgIiBieXRlcykiKTsNCgkJCQl9DQoJCQkJY2F0Y2ggKGUpDQoJCQkJew0KCQkJCQl0aGlz
LmxvYWRGcm9tSnNvbiA9IG51bGw7DQoJCQkJfQ0KCQkJCXRoaXMuc3VzcGVuZERyYXdpbmcgPSBm
YWxzZTsNCgkJCQlpZiAoIXNlbGYubG9hZEZyb21Kc29uKQ0KCQkJCXsNCgkJCQkJc2VsZi5sb2Fk
RnJvbUpzb24gPSBudWxsOw0KCQkJCQlzZWxmLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90
b3R5cGUuY25kcy5PbkxvYWRGYWlsZWQsIG51bGwpOw0KCQkJCX0NCgkJCX0NCgkJCXRoaXMubG9h
ZEZyb21TbG90ID0gIiI7DQoJCQl0aGlzLnNhdmVUb1Nsb3QgPSAiIjsNCgkJfQ0KCQlpZiAodGhp
cy5sb2FkRnJvbUpzb24gIT09IG51bGwpDQoJCXsNCgkJCXRoaXMuQ2xlYXJEZWF0aFJvdygpOw0K
CQkJdmFyIG9rID0gdGhpcy5sb2FkRnJvbUpTT05TdHJpbmcodGhpcy5sb2FkRnJvbUpzb24pOw0K
CQkJaWYgKG9rKQ0KCQkJew0KCQkJCXRoaXMubGFzdFNhdmVKc29uID0gdGhpcy5sb2FkRnJvbUpz
b247DQoJCQkJdGhpcy50cmlnZ2VyKGNyLnN5c3RlbV9vYmplY3QucHJvdG90eXBlLmNuZHMuT25M
b2FkQ29tcGxldGUsIG51bGwpOw0KCQkJCXRoaXMubGFzdFNhdmVKc29uID0gIiI7DQoJCQl9DQoJ
CQllbHNlDQoJCQl7DQoJCQkJc2VsZi50cmlnZ2VyKGNyLnN5c3RlbV9vYmplY3QucHJvdG90eXBl
LmNuZHMuT25Mb2FkRmFpbGVkLCBudWxsKTsNCgkJCX0NCgkJCXRoaXMubG9hZEZyb21Kc29uID0g
bnVsbDsNCgkJfQ0KCX07DQoJZnVuY3Rpb24gQ29weUV4dHJhT2JqZWN0KGV4dHJhKQ0KCXsNCgkJ
dmFyIHAsIHJldCA9IHt9Ow0KCQlmb3IgKHAgaW4gZXh0cmEpDQoJCXsNCgkJCWlmIChleHRyYS5o
YXNPd25Qcm9wZXJ0eShwKSkNCgkJCXsNCgkJCQlpZiAoZXh0cmFbcF0gaW5zdGFuY2VvZiBjci5P
YmplY3RTZXQpDQoJCQkJCWNvbnRpbnVlOw0KCQkJCWlmIChleHRyYVtwXSAmJiB0eXBlb2YgZXh0
cmFbcF0uYzJ1c2VyZGF0YSAhPT0gInVuZGVmaW5lZCIpDQoJCQkJCWNvbnRpbnVlOw0KCQkJCWlm
IChwID09PSAic3ByaXRlQ3JlYXRlZERlc3Ryb3lDYWxsYmFjayIpDQoJCQkJCWNvbnRpbnVlOw0K
CQkJCXJldFtwXSA9IGV4dHJhW3BdOw0KCQkJfQ0KCQl9DQoJCXJldHVybiByZXQ7DQoJfTsNCglS
dW50aW1lLnByb3RvdHlwZS5zYXZlVG9KU09OU3RyaW5nID0gZnVuY3Rpb24oKQ0KCXsNCgkJdmFy
IGksIGxlbiwgaiwgbGVuaiwgdHlwZSwgbGF5b3V0LCB0eXBlb2JqLCBnLCBjLCBhLCB2LCBwOw0K
CQl2YXIgbyA9IHsNCgkJCSJjMnNhdmUiOgkJCQl0cnVlLA0KCQkJInZlcnNpb24iOgkJCQkxLA0K
CQkJInJ0Ijogew0KCQkJCSJ0aW1lIjoJCQkJdGhpcy5rYWhhblRpbWUuc3VtLA0KCQkJCSJ3YWxs
dGltZSI6CQkJdGhpcy53YWxsVGltZS5zdW0sDQoJCQkJInRpbWVzY2FsZSI6CQl0aGlzLnRpbWVz
Y2FsZSwNCgkJCQkidGlja2NvdW50IjoJCXRoaXMudGlja2NvdW50LA0KCQkJCSJleGVjY291bnQi
OgkJdGhpcy5leGVjY291bnQsDQoJCQkJIm5leHRfdWlkIjoJCQl0aGlzLm5leHRfdWlkLA0KCQkJ
CSJydW5uaW5nX2xheW91dCI6CXRoaXMucnVubmluZ19sYXlvdXQuc2lkLA0KCQkJCSJzdGFydF90
aW1lX29mZnNldCI6IChEYXRlLm5vdygpIC0gdGhpcy5zdGFydF90aW1lKQ0KCQkJfSwNCgkJCSJ0
eXBlcyI6IHt9LA0KCQkJImxheW91dHMiOiB7fSwNCgkJCSJldmVudHMiOiB7DQoJCQkJImdyb3Vw
cyI6IHt9LA0KCQkJCSJjbmRzIjoge30sDQoJCQkJImFjdHMiOiB7fSwNCgkJCQkidmFycyI6IHt9
DQoJCQl9DQoJCX07DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudHlwZXNfYnlfaW5kZXgubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXR5cGUgPSB0aGlzLnR5cGVzX2J5X2luZGV4W2ld
Ow0KCQkJaWYgKHR5cGUuaXNfZmFtaWx5IHx8IHRoaXMudHlwZUhhc05vU2F2ZUJlaGF2aW9yKHR5
cGUpKQ0KCQkJCWNvbnRpbnVlOw0KCQkJdHlwZW9iaiA9IHsNCgkJCQkiaW5zdGFuY2VzIjogW10N
CgkJCX07DQoJCQlpZiAoY3IuaGFzQW55T3duUHJvcGVydHkodHlwZS5leHRyYSkpDQoJCQkJdHlw
ZW9ialsiZXgiXSA9IENvcHlFeHRyYU9iamVjdCh0eXBlLmV4dHJhKTsNCgkJCWZvciAoaiA9IDAs
IGxlbmogPSB0eXBlLmluc3RhbmNlcy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJ
dHlwZW9ialsiaW5zdGFuY2VzIl0ucHVzaCh0aGlzLnNhdmVJbnN0YW5jZVRvSlNPTih0eXBlLmlu
c3RhbmNlc1tqXSkpOw0KCQkJfQ0KCQkJb1sidHlwZXMiXVt0eXBlLnNpZC50b1N0cmluZygpXSA9
IHR5cGVvYmo7DQoJCX0NCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5sYXlvdXRzX2J5X2luZGV4
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlsYXlvdXQgPSB0aGlzLmxheW91dHNfYnlf
aW5kZXhbaV07DQoJCQlvWyJsYXlvdXRzIl1bbGF5b3V0LnNpZC50b1N0cmluZygpXSA9IGxheW91
dC5zYXZlVG9KU09OKCk7DQoJCX0NCgkJdmFyIG9ncm91cHMgPSBvWyJldmVudHMiXVsiZ3JvdXBz
Il07DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuYWxsR3JvdXBzLmxlbmd0aDsgaSA8IGxlbjsg
aSsrKQ0KCQl7DQoJCQlnID0gdGhpcy5hbGxHcm91cHNbaV07DQoJCQlvZ3JvdXBzW2cuc2lkLnRv
U3RyaW5nKCldID0gdGhpcy5ncm91cHNfYnlfbmFtZVtnLmdyb3VwX25hbWVdLmdyb3VwX2FjdGl2
ZTsNCgkJfQ0KCQl2YXIgb2NuZHMgPSBvWyJldmVudHMiXVsiY25kcyJdOw0KCQlmb3IgKHAgaW4g
dGhpcy5jbmRzQnlTaWQpDQoJCXsNCgkJCWlmICh0aGlzLmNuZHNCeVNpZC5oYXNPd25Qcm9wZXJ0
eShwKSkNCgkJCXsNCgkJCQljID0gdGhpcy5jbmRzQnlTaWRbcF07DQoJCQkJaWYgKGNyLmhhc0Fu
eU93blByb3BlcnR5KGMuZXh0cmEpKQ0KCQkJCQlvY25kc1twXSA9IHsgImV4IjogQ29weUV4dHJh
T2JqZWN0KGMuZXh0cmEpIH07DQoJCQl9DQoJCX0NCgkJdmFyIG9hY3RzID0gb1siZXZlbnRzIl1b
ImFjdHMiXTsNCgkJZm9yIChwIGluIHRoaXMuYWN0c0J5U2lkKQ0KCQl7DQoJCQlpZiAodGhpcy5h
Y3RzQnlTaWQuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJYSA9IHRoaXMuYWN0c0J5U2lk
W3BdOw0KCQkJCWlmIChjci5oYXNBbnlPd25Qcm9wZXJ0eShhLmV4dHJhKSkNCgkJCQkJb2FjdHNb
cF0gPSB7ICJleCI6IENvcHlFeHRyYU9iamVjdChhLmV4dHJhKSB9Ow0KCQkJfQ0KCQl9DQoJCXZh
ciBvdmFycyA9IG9bImV2ZW50cyJdWyJ2YXJzIl07DQoJCWZvciAocCBpbiB0aGlzLnZhcnNCeVNp
ZCkNCgkJew0KCQkJaWYgKHRoaXMudmFyc0J5U2lkLmhhc093blByb3BlcnR5KHApKQ0KCQkJew0K
CQkJCXYgPSB0aGlzLnZhcnNCeVNpZFtwXTsNCgkJCQlpZiAoIXYuaXNfY29uc3RhbnQgJiYgKCF2
LnBhcmVudCB8fCB2LmlzX3N0YXRpYykpDQoJCQkJCW92YXJzW3BdID0gdi5kYXRhOw0KCQkJfQ0K
CQl9DQoJCW9bInN5c3RlbSJdID0gdGhpcy5zeXN0ZW0uc2F2ZVRvSlNPTigpOw0KCQlyZXR1cm4g
SlNPTi5zdHJpbmdpZnkobyk7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5yZWZyZXNoVWlkTWFw
ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBsZW4sIHR5cGUsIGosIGxlbmosIGluc3Q7DQoJ
CXRoaXMub2JqZWN0c0J5VWlkID0ge307DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudHlwZXNf
YnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXR5cGUgPSB0aGlzLnR5cGVz
X2J5X2luZGV4W2ldOw0KCQkJaWYgKHR5cGUuaXNfZmFtaWx5KQ0KCQkJCWNvbnRpbnVlOw0KCQkJ
Zm9yIChqID0gMCwgbGVuaiA9IHR5cGUuaW5zdGFuY2VzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykN
CgkJCXsNCgkJCQlpbnN0ID0gdHlwZS5pbnN0YW5jZXNbal07DQoJCQkJdGhpcy5vYmplY3RzQnlV
aWRbaW5zdC51aWQudG9TdHJpbmcoKV0gPSBpbnN0Ow0KCQkJfQ0KCQl9DQoJfTsNCglSdW50aW1l
LnByb3RvdHlwZS5sb2FkRnJvbUpTT05TdHJpbmcgPSBmdW5jdGlvbiAoc3RyKQ0KCXsNCgkJdmFy
IG87DQoJCXRyeSB7DQoJCQlvID0gSlNPTi5wYXJzZShzdHIpOw0KCQl9DQoJCWNhdGNoIChlKSB7
DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgkJaWYgKCFvWyJjMnNhdmUiXSkNCgkJCXJldHVybiBm
YWxzZTsJCS8vIHByb2JhYmx5IG5vdCBhIGMyIHNhdmUgc3RhdGUNCgkJaWYgKG9bInZlcnNpb24i
XSA+IDEpDQoJCQlyZXR1cm4gZmFsc2U7CQkvLyBmcm9tIGZ1dHVyZSB2ZXJzaW9uIG9mIGMyOyBh
c3N1bWUgbm90IGNvbXBhdGlibGUNCgkJdGhpcy5pc0xvYWRpbmdTdGF0ZSA9IHRydWU7DQoJCXZh
ciBydCA9IG9bInJ0Il07DQoJCXRoaXMua2FoYW5UaW1lLnJlc2V0KCk7DQoJCXRoaXMua2FoYW5U
aW1lLnN1bSA9IHJ0WyJ0aW1lIl07DQoJCXRoaXMud2FsbFRpbWUucmVzZXQoKTsNCgkJdGhpcy53
YWxsVGltZS5zdW0gPSBydFsid2FsbHRpbWUiXSB8fCAwOw0KCQl0aGlzLnRpbWVzY2FsZSA9IHJ0
WyJ0aW1lc2NhbGUiXTsNCgkJdGhpcy50aWNrY291bnQgPSBydFsidGlja2NvdW50Il07DQoJCXRo
aXMuZXhlY2NvdW50ID0gcnRbImV4ZWNjb3VudCJdOw0KCQl0aGlzLnN0YXJ0X3RpbWUgPSBEYXRl
Lm5vdygpIC0gcnRbInN0YXJ0X3RpbWVfb2Zmc2V0Il07DQoJCXZhciBsYXlvdXRfc2lkID0gcnRb
InJ1bm5pbmdfbGF5b3V0Il07DQoJCWlmIChsYXlvdXRfc2lkICE9PSB0aGlzLnJ1bm5pbmdfbGF5
b3V0LnNpZCkNCgkJew0KCQkJdmFyIGNoYW5nZVRvTGF5b3V0ID0gdGhpcy5nZXRMYXlvdXRCeVNp
ZChsYXlvdXRfc2lkKTsNCgkJCWlmIChjaGFuZ2VUb0xheW91dCkNCgkJCQl0aGlzLmRvQ2hhbmdl
TGF5b3V0KGNoYW5nZVRvTGF5b3V0KTsNCgkJCWVsc2UNCgkJCQlyZXR1cm47CQkvLyBsYXlvdXQg
dGhhdCB3YXMgc2F2ZWQgb24gaGFzIGdvbmUgbWlzc2luZyAoZGVsZXRlZD8pDQoJCX0NCgkJdmFy
IGksIGxlbiwgaiwgbGVuaiwgaywgbGVuaywgcCwgdHlwZSwgZXhpc3RpbmdfaW5zdHMsIGxvYWRf
aW5zdHMsIGluc3QsIGJpbnN0LCBsYXlvdXQsIGxheWVyLCBnLCBpaWQsIHQ7DQoJCXZhciBvdHlw
ZXMgPSBvWyJ0eXBlcyJdOw0KCQlmb3IgKHAgaW4gb3R5cGVzKQ0KCQl7DQoJCQlpZiAob3R5cGVz
Lmhhc093blByb3BlcnR5KHApKQ0KCQkJew0KCQkJCXR5cGUgPSB0aGlzLmdldE9iamVjdFR5cGVC
eVNpZChwYXJzZUludChwLCAxMCkpOw0KCQkJCWlmICghdHlwZSB8fCB0eXBlLmlzX2ZhbWlseSB8
fCB0aGlzLnR5cGVIYXNOb1NhdmVCZWhhdmlvcih0eXBlKSkNCgkJCQkJY29udGludWU7DQoJCQkJ
aWYgKG90eXBlc1twXVsiZXgiXSkNCgkJCQkJdHlwZS5leHRyYSA9IG90eXBlc1twXVsiZXgiXTsN
CgkJCQllbHNlDQoJCQkJCWNyLndpcGUodHlwZS5leHRyYSk7DQoJCQkJZXhpc3RpbmdfaW5zdHMg
PSB0eXBlLmluc3RhbmNlczsNCgkJCQlsb2FkX2luc3RzID0gb3R5cGVzW3BdWyJpbnN0YW5jZXMi
XTsNCgkJCQlmb3IgKGkgPSAwLCBsZW4gPSBjci5taW4oZXhpc3RpbmdfaW5zdHMubGVuZ3RoLCBs
b2FkX2luc3RzLmxlbmd0aCk7IGkgPCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCXRoaXMubG9hZElu
c3RhbmNlRnJvbUpTT04oZXhpc3RpbmdfaW5zdHNbaV0sIGxvYWRfaW5zdHNbaV0pOw0KCQkJCX0N
CgkJCQlmb3IgKGkgPSBsb2FkX2luc3RzLmxlbmd0aCwgbGVuID0gZXhpc3RpbmdfaW5zdHMubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJCXRoaXMuRGVzdHJveUluc3RhbmNlKGV4aXN0aW5nX2lu
c3RzW2ldKTsNCgkJCQlmb3IgKGkgPSBleGlzdGluZ19pbnN0cy5sZW5ndGgsIGxlbiA9IGxvYWRf
aW5zdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJCQlsYXllciA9IG51bGw7DQoJ
CQkJCWlmICh0eXBlLnBsdWdpbi5pc193b3JsZCkNCgkJCQkJew0KCQkJCQkJbGF5ZXIgPSB0aGlz
LnJ1bm5pbmdfbGF5b3V0LmdldExheWVyQnlTaWQobG9hZF9pbnN0c1tpXVsidyJdWyJsIl0pOw0K
CQkJCQkJaWYgKCFsYXllcikNCgkJCQkJCQljb250aW51ZTsNCgkJCQkJfQ0KCQkJCQlpbnN0ID0g
dGhpcy5jcmVhdGVJbnN0YW5jZUZyb21Jbml0KHR5cGUuZGVmYXVsdF9pbnN0YW5jZSwgbGF5ZXIs
IGZhbHNlLCAwLCAwLCB0cnVlKTsNCgkJCQkJdGhpcy5sb2FkSW5zdGFuY2VGcm9tSlNPTihpbnN0
LCBsb2FkX2luc3RzW2ldKTsNCgkJCQl9DQoJCQkJdHlwZS5zdGFsZV9paWRzID0gdHJ1ZTsNCgkJ
CX0NCgkJfQ0KCQl0aGlzLkNsZWFyRGVhdGhSb3coKTsNCgkJdGhpcy5yZWZyZXNoVWlkTWFwKCk7
DQoJCXZhciBvbGF5b3V0cyA9IG9bImxheW91dHMiXTsNCgkJZm9yIChwIGluIG9sYXlvdXRzKQ0K
CQl7DQoJCQlpZiAob2xheW91dHMuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJbGF5b3V0
ID0gdGhpcy5nZXRMYXlvdXRCeVNpZChwYXJzZUludChwLCAxMCkpOw0KCQkJCWlmICghbGF5b3V0
KQ0KCQkJCQljb250aW51ZTsJCS8vIG11c3QndmUgZ29uZSBtaXNzaW5nDQoJCQkJbGF5b3V0Lmxv
YWRGcm9tSlNPTihvbGF5b3V0c1twXSk7DQoJCQl9DQoJCX0NCgkJdmFyIG9ncm91cHMgPSBvWyJl
dmVudHMiXVsiZ3JvdXBzIl07DQoJCWZvciAocCBpbiBvZ3JvdXBzKQ0KCQl7DQoJCQlpZiAob2dy
b3Vwcy5oYXNPd25Qcm9wZXJ0eShwKSkNCgkJCXsNCgkJCQlnID0gdGhpcy5nZXRHcm91cEJ5U2lk
KHBhcnNlSW50KHAsIDEwKSk7DQoJCQkJaWYgKGcgJiYgdGhpcy5ncm91cHNfYnlfbmFtZVtnLmdy
b3VwX25hbWVdKQ0KCQkJCQl0aGlzLmdyb3Vwc19ieV9uYW1lW2cuZ3JvdXBfbmFtZV0uc2V0R3Jv
dXBBY3RpdmUob2dyb3Vwc1twXSk7DQoJCQl9DQoJCX0NCgkJdmFyIG9jbmRzID0gb1siZXZlbnRz
Il1bImNuZHMiXTsNCgkJZm9yIChwIGluIHRoaXMuY25kc0J5U2lkKQ0KCQl7DQoJCQlpZiAodGhp
cy5jbmRzQnlTaWQuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJaWYgKG9jbmRzLmhhc093
blByb3BlcnR5KHApKQ0KCQkJCXsNCgkJCQkJdGhpcy5jbmRzQnlTaWRbcF0uZXh0cmEgPSBvY25k
c1twXVsiZXgiXTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJdGhpcy5jbmRzQnlTaWRb
cF0uZXh0cmEgPSB7fTsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJdmFyIG9hY3RzID0gb1siZXZlbnRz
Il1bImFjdHMiXTsNCgkJZm9yIChwIGluIHRoaXMuYWN0c0J5U2lkKQ0KCQl7DQoJCQlpZiAodGhp
cy5hY3RzQnlTaWQuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJaWYgKG9hY3RzLmhhc093
blByb3BlcnR5KHApKQ0KCQkJCXsNCgkJCQkJdGhpcy5hY3RzQnlTaWRbcF0uZXh0cmEgPSBvYWN0
c1twXVsiZXgiXTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJdGhpcy5hY3RzQnlTaWRb
cF0uZXh0cmEgPSB7fTsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJdmFyIG92YXJzID0gb1siZXZlbnRz
Il1bInZhcnMiXTsNCgkJZm9yIChwIGluIG92YXJzKQ0KCQl7DQoJCQlpZiAob3ZhcnMuaGFzT3du
UHJvcGVydHkocCkgJiYgdGhpcy52YXJzQnlTaWQuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJ
CQkJdGhpcy52YXJzQnlTaWRbcF0uZGF0YSA9IG92YXJzW3BdOw0KCQkJfQ0KCQl9DQoJCXRoaXMu
bmV4dF91aWQgPSBydFsibmV4dF91aWQiXTsNCgkJdGhpcy5pc0xvYWRpbmdTdGF0ZSA9IGZhbHNl
Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmZpcmVPbkNyZWF0ZUFmdGVyTG9hZC5sZW5ndGg7
IGkgPCBsZW47ICsraSkNCgkJew0KCQkJaW5zdCA9IHRoaXMuZmlyZU9uQ3JlYXRlQWZ0ZXJMb2Fk
W2ldOw0KCQkJdGhpcy50cmlnZ2VyKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0LnR5cGUucGx1
Z2luKS5jbmRzLk9uQ3JlYXRlZCwgaW5zdCk7DQoJCX0NCgkJY3IuY2xlYXJBcnJheSh0aGlzLmZp
cmVPbkNyZWF0ZUFmdGVyTG9hZCk7DQoJCXRoaXMuc3lzdGVtLmxvYWRGcm9tSlNPTihvWyJzeXN0
ZW0iXSk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudHlwZXNfYnlfaW5kZXgubGVuZ3RoOyBp
IDwgbGVuOyBpKyspDQoJCXsNCgkJCXR5cGUgPSB0aGlzLnR5cGVzX2J5X2luZGV4W2ldOw0KCQkJ
aWYgKHR5cGUuaXNfZmFtaWx5IHx8IHRoaXMudHlwZUhhc05vU2F2ZUJlaGF2aW9yKHR5cGUpKQ0K
CQkJCWNvbnRpbnVlOw0KCQkJZm9yIChqID0gMCwgbGVuaiA9IHR5cGUuaW5zdGFuY2VzLmxlbmd0
aDsgaiA8IGxlbmo7IGorKykNCgkJCXsNCgkJCQlpbnN0ID0gdHlwZS5pbnN0YW5jZXNbal07DQoJ
CQkJaWYgKHR5cGUuaXNfY29udGFpbmVkKQ0KCQkJCXsNCgkJCQkJaWlkID0gaW5zdC5nZXRfaWlk
KCk7DQoJCQkJCWNyLmNsZWFyQXJyYXkoaW5zdC5zaWJsaW5ncyk7DQoJCQkJCWZvciAoayA9IDAs
IGxlbmsgPSB0eXBlLmNvbnRhaW5lci5sZW5ndGg7IGsgPCBsZW5rOyBrKyspDQoJCQkJCXsNCgkJ
CQkJCXQgPSB0eXBlLmNvbnRhaW5lcltrXTsNCgkJCQkJCWlmICh0eXBlID09PSB0KQ0KCQkJCQkJ
CWNvbnRpbnVlOw0KOw0KCQkJCQkJaW5zdC5zaWJsaW5ncy5wdXNoKHQuaW5zdGFuY2VzW2lpZF0p
Ow0KCQkJCQl9DQoJCQkJfQ0KCQkJCWlmIChpbnN0LmFmdGVyTG9hZCkNCgkJCQkJaW5zdC5hZnRl
ckxvYWQoKTsNCgkJCQlpZiAoaW5zdC5iZWhhdmlvcl9pbnN0cykNCgkJCQl7DQoJCQkJCWZvciAo
ayA9IDAsIGxlbmsgPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsgayA8IGxlbms7IGsrKykN
CgkJCQkJew0KCQkJCQkJYmluc3QgPSBpbnN0LmJlaGF2aW9yX2luc3RzW2tdOw0KCQkJCQkJaWYg
KGJpbnN0LmFmdGVyTG9hZCkNCgkJCQkJCQliaW5zdC5hZnRlckxvYWQoKTsNCgkJCQkJfQ0KCQkJ
CX0NCgkJCX0NCgkJfQ0KCQl0aGlzLnJlZHJhdyA9IHRydWU7DQoJCXJldHVybiB0cnVlOw0KCX07
DQoJUnVudGltZS5wcm90b3R5cGUuc2F2ZUluc3RhbmNlVG9KU09OID0gZnVuY3Rpb24oaW5zdCwg
c3RhdGVfb25seSkNCgl7DQoJCXZhciBpLCBsZW4sIHdvcmxkLCBiZWhpbnN0LCBldDsNCgkJdmFy
IHR5cGUgPSBpbnN0LnR5cGU7DQoJCXZhciBwbHVnaW4gPSB0eXBlLnBsdWdpbjsNCgkJdmFyIG8g
PSB7fTsNCgkJaWYgKHN0YXRlX29ubHkpDQoJCQlvWyJjMiJdID0gdHJ1ZTsJCS8vIG1hcmsgYXMg
a25vd24ganNvbiBkYXRhIGZyb20gQ29uc3RydWN0IDINCgkJZWxzZQ0KCQkJb1sidWlkIl0gPSBp
bnN0LnVpZDsNCgkJaWYgKGNyLmhhc0FueU93blByb3BlcnR5KGluc3QuZXh0cmEpKQ0KCQkJb1si
ZXgiXSA9IENvcHlFeHRyYU9iamVjdChpbnN0LmV4dHJhKTsNCgkJaWYgKGluc3QuaW5zdGFuY2Vf
dmFycyAmJiBpbnN0Lmluc3RhbmNlX3ZhcnMubGVuZ3RoKQ0KCQl7DQoJCQlvWyJpdnMiXSA9IHt9
Ow0KCQkJZm9yIChpID0gMCwgbGVuID0gaW5zdC5pbnN0YW5jZV92YXJzLmxlbmd0aDsgaSA8IGxl
bjsgaSsrKQ0KCQkJew0KCQkJCW9bIml2cyJdW2luc3QudHlwZS5pbnN0dmFyX3NpZHNbaV0udG9T
dHJpbmcoKV0gPSBpbnN0Lmluc3RhbmNlX3ZhcnNbaV07DQoJCQl9DQoJCX0NCgkJaWYgKHBsdWdp
bi5pc193b3JsZCkNCgkJew0KCQkJd29ybGQgPSB7DQoJCQkJIngiOiBpbnN0LngsDQoJCQkJInki
OiBpbnN0LnksDQoJCQkJInciOiBpbnN0LndpZHRoLA0KCQkJCSJoIjogaW5zdC5oZWlnaHQsDQoJ
CQkJImwiOiBpbnN0LmxheWVyLnNpZCwNCgkJCQkiemkiOiBpbnN0LmdldF96aW5kZXgoKQ0KCQkJ
fTsNCgkJCWlmIChpbnN0LmFuZ2xlICE9PSAwKQ0KCQkJCXdvcmxkWyJhIl0gPSBpbnN0LmFuZ2xl
Ow0KCQkJaWYgKGluc3Qub3BhY2l0eSAhPT0gMSkNCgkJCQl3b3JsZFsibyJdID0gaW5zdC5vcGFj
aXR5Ow0KCQkJaWYgKGluc3QuaG90c3BvdFggIT09IDAuNSkNCgkJCQl3b3JsZFsiaFgiXSA9IGlu
c3QuaG90c3BvdFg7DQoJCQlpZiAoaW5zdC5ob3RzcG90WSAhPT0gMC41KQ0KCQkJCXdvcmxkWyJo
WSJdID0gaW5zdC5ob3RzcG90WTsNCgkJCWlmIChpbnN0LmJsZW5kX21vZGUgIT09IDApDQoJCQkJ
d29ybGRbImJtIl0gPSBpbnN0LmJsZW5kX21vZGU7DQoJCQlpZiAoIWluc3QudmlzaWJsZSkNCgkJ
CQl3b3JsZFsidiJdID0gaW5zdC52aXNpYmxlOw0KCQkJaWYgKCFpbnN0LmNvbGxpc2lvbnNFbmFi
bGVkKQ0KCQkJCXdvcmxkWyJjZSJdID0gaW5zdC5jb2xsaXNpb25zRW5hYmxlZDsNCgkJCWlmIChp
bnN0Lm15X3RpbWVzY2FsZSAhPT0gLTEpDQoJCQkJd29ybGRbIm10cyJdID0gaW5zdC5teV90aW1l
c2NhbGU7DQoJCQlpZiAodHlwZS5lZmZlY3RfdHlwZXMubGVuZ3RoKQ0KCQkJew0KCQkJCXdvcmxk
WyJmeCJdID0gW107DQoJCQkJZm9yIChpID0gMCwgbGVuID0gdHlwZS5lZmZlY3RfdHlwZXMubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJCQlldCA9IHR5cGUuZWZmZWN0X3R5cGVzW2ld
Ow0KCQkJCQl3b3JsZFsiZngiXS5wdXNoKHsibmFtZSI6IGV0Lm5hbWUsDQoJCQkJCQkJCQkgICJh
Y3RpdmUiOiBpbnN0LmFjdGl2ZV9lZmZlY3RfZmxhZ3NbZXQuaW5kZXhdLA0KCQkJCQkJCQkJICAi
cGFyYW1zIjogaW5zdC5lZmZlY3RfcGFyYW1zW2V0LmluZGV4XSB9KTsNCgkJCQl9DQoJCQl9DQoJ
CQlvWyJ3Il0gPSB3b3JsZDsNCgkJfQ0KCQlpZiAoaW5zdC5iZWhhdmlvcl9pbnN0cyAmJiBpbnN0
LmJlaGF2aW9yX2luc3RzLmxlbmd0aCkNCgkJew0KCQkJb1siYmVocyJdID0ge307DQoJCQlmb3Ig
KGkgPSAwLCBsZW4gPSBpbnN0LmJlaGF2aW9yX2luc3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0K
CQkJew0KCQkJCWJlaGluc3QgPSBpbnN0LmJlaGF2aW9yX2luc3RzW2ldOw0KCQkJCWlmIChiZWhp
bnN0LnNhdmVUb0pTT04pDQoJCQkJCW9bImJlaHMiXVtiZWhpbnN0LnR5cGUuc2lkLnRvU3RyaW5n
KCldID0gYmVoaW5zdC5zYXZlVG9KU09OKCk7DQoJCQl9DQoJCX0NCgkJaWYgKGluc3Quc2F2ZVRv
SlNPTikNCgkJCW9bImRhdGEiXSA9IGluc3Quc2F2ZVRvSlNPTigpOw0KCQlyZXR1cm4gbzsNCgl9
Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmdldEluc3RhbmNlVmFySW5kZXhCeVNpZCA9IGZ1bmN0aW9u
ICh0eXBlLCBzaWRfKQ0KCXsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gdHlw
ZS5pbnN0dmFyX3NpZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWlmICh0eXBlLmlu
c3R2YXJfc2lkc1tpXSA9PT0gc2lkXykNCgkJCQlyZXR1cm4gaTsNCgkJfQ0KCQlyZXR1cm4gLTE7
DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5nZXRCZWhhdmlvckluZGV4QnlTaWQgPSBmdW5jdGlv
biAoaW5zdCwgc2lkXykNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IGlu
c3QuYmVoYXZpb3JfaW5zdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWlmIChpbnN0
LmJlaGF2aW9yX2luc3RzW2ldLnR5cGUuc2lkID09PSBzaWRfKQ0KCQkJCXJldHVybiBpOw0KCQl9
DQoJCXJldHVybiAtMTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmxvYWRJbnN0YW5jZUZyb21K
U09OID0gZnVuY3Rpb24oaW5zdCwgbywgc3RhdGVfb25seSkNCgl7DQoJCXZhciBwLCBpLCBsZW4s
IGl2LCBvaXZzLCB3b3JsZCwgZnhpbmRleCwgb2JlaHMsIGJlaGluZGV4LCB2YWx1ZTsNCgkJdmFy
IG9sZGxheWVyOw0KCQl2YXIgdHlwZSA9IGluc3QudHlwZTsNCgkJdmFyIHBsdWdpbiA9IHR5cGUu
cGx1Z2luOw0KCQlpZiAoc3RhdGVfb25seSkNCgkJew0KCQkJaWYgKCFvWyJjMiJdKQ0KCQkJCXJl
dHVybjsNCgkJfQ0KCQllbHNlDQoJCQlpbnN0LnVpZCA9IG9bInVpZCJdOw0KCQlpZiAob1siZXgi
XSkNCgkJCWluc3QuZXh0cmEgPSBvWyJleCJdOw0KCQllbHNlDQoJCQljci53aXBlKGluc3QuZXh0
cmEpOw0KCQlvaXZzID0gb1siaXZzIl07DQoJCWlmIChvaXZzKQ0KCQl7DQoJCQlmb3IgKHAgaW4g
b2l2cykNCgkJCXsNCgkJCQlpZiAob2l2cy5oYXNPd25Qcm9wZXJ0eShwKSkNCgkJCQl7DQoJCQkJ
CWl2ID0gdGhpcy5nZXRJbnN0YW5jZVZhckluZGV4QnlTaWQodHlwZSwgcGFyc2VJbnQocCwgMTAp
KTsNCgkJCQkJaWYgKGl2IDwgMCB8fCBpdiA+PSBpbnN0Lmluc3RhbmNlX3ZhcnMubGVuZ3RoKQ0K
CQkJCQkJY29udGludWU7CQkvLyBtdXN0J3ZlIGdvbmUgbWlzc2luZw0KCQkJCQl2YWx1ZSA9IG9p
dnNbcF07DQoJCQkJCWlmICh2YWx1ZSA9PT0gbnVsbCkNCgkJCQkJCXZhbHVlID0gTmFOOw0KCQkJ
CQlpbnN0Lmluc3RhbmNlX3ZhcnNbaXZdID0gdmFsdWU7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCWlm
IChwbHVnaW4uaXNfd29ybGQpDQoJCXsNCgkJCXdvcmxkID0gb1sidyJdOw0KCQkJaWYgKGluc3Qu
bGF5ZXIuc2lkICE9PSB3b3JsZFsibCJdKQ0KCQkJew0KCQkJCW9sZGxheWVyID0gaW5zdC5sYXll
cjsNCgkJCQlpbnN0LmxheWVyID0gdGhpcy5ydW5uaW5nX2xheW91dC5nZXRMYXllckJ5U2lkKHdv
cmxkWyJsIl0pOw0KCQkJCWlmIChpbnN0LmxheWVyKQ0KCQkJCXsNCgkJCQkJb2xkbGF5ZXIucmVt
b3ZlRnJvbUluc3RhbmNlTGlzdChpbnN0LCB0cnVlKTsNCgkJCQkJaW5zdC5sYXllci5hcHBlbmRU
b0luc3RhbmNlTGlzdChpbnN0LCB0cnVlKTsNCgkJCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7
DQoJCQkJCWluc3QubGF5ZXIuc2V0WkluZGljZXNTdGFsZUZyb20oMCk7DQoJCQkJfQ0KCQkJCWVs
c2UNCgkJCQl7DQoJCQkJCWluc3QubGF5ZXIgPSBvbGRsYXllcjsNCgkJCQkJaWYgKCFzdGF0ZV9v
bmx5KQ0KCQkJCQkJdGhpcy5EZXN0cm95SW5zdGFuY2UoaW5zdCk7DQoJCQkJfQ0KCQkJfQ0KCQkJ
aW5zdC54ID0gd29ybGRbIngiXTsNCgkJCWluc3QueSA9IHdvcmxkWyJ5Il07DQoJCQlpbnN0Lndp
ZHRoID0gd29ybGRbInciXTsNCgkJCWluc3QuaGVpZ2h0ID0gd29ybGRbImgiXTsNCgkJCWluc3Qu
emluZGV4ID0gd29ybGRbInppIl07DQoJCQlpbnN0LmFuZ2xlID0gd29ybGQuaGFzT3duUHJvcGVy
dHkoImEiKSA/IHdvcmxkWyJhIl0gOiAwOw0KCQkJaW5zdC5vcGFjaXR5ID0gd29ybGQuaGFzT3du
UHJvcGVydHkoIm8iKSA/IHdvcmxkWyJvIl0gOiAxOw0KCQkJaW5zdC5ob3RzcG90WCA9IHdvcmxk
Lmhhc093blByb3BlcnR5KCJoWCIpID8gd29ybGRbImhYIl0gOiAwLjU7DQoJCQlpbnN0LmhvdHNw
b3RZID0gd29ybGQuaGFzT3duUHJvcGVydHkoImhZIikgPyB3b3JsZFsiaFkiXSA6IDAuNTsNCgkJ
CWluc3QudmlzaWJsZSA9IHdvcmxkLmhhc093blByb3BlcnR5KCJ2IikgPyB3b3JsZFsidiJdIDog
dHJ1ZTsNCgkJCWluc3QuY29sbGlzaW9uc0VuYWJsZWQgPSB3b3JsZC5oYXNPd25Qcm9wZXJ0eSgi
Y2UiKSA/IHdvcmxkWyJjZSJdIDogdHJ1ZTsNCgkJCWluc3QubXlfdGltZXNjYWxlID0gd29ybGQu
aGFzT3duUHJvcGVydHkoIm10cyIpID8gd29ybGRbIm10cyJdIDogLTE7DQoJCQlpbnN0LmJsZW5k
X21vZGUgPSB3b3JsZC5oYXNPd25Qcm9wZXJ0eSgiYm0iKSA/IHdvcmxkWyJibSJdIDogMDs7DQoJ
CQlpbnN0LmNvbXBvc2l0ZU9wID0gY3IuZWZmZWN0VG9Db21wb3NpdGVPcChpbnN0LmJsZW5kX21v
ZGUpOw0KCQkJaWYgKHRoaXMuZ2wpDQoJCQkJY3Iuc2V0R0xCbGVuZChpbnN0LCBpbnN0LmJsZW5k
X21vZGUsIHRoaXMuZ2wpOw0KCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQlpZiAod29y
bGQuaGFzT3duUHJvcGVydHkoImZ4IikpDQoJCQl7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gd29y
bGRbImZ4Il0ubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJCQlmeGluZGV4ID0gdHlw
ZS5nZXRFZmZlY3RJbmRleEJ5TmFtZSh3b3JsZFsiZngiXVtpXVsibmFtZSJdKTsNCgkJCQkJaWYg
KGZ4aW5kZXggPCAwKQ0KCQkJCQkJY29udGludWU7CQkvLyBtdXN0J3ZlIGdvbmUgbWlzc2luZw0K
CQkJCQlpbnN0LmFjdGl2ZV9lZmZlY3RfZmxhZ3NbZnhpbmRleF0gPSB3b3JsZFsiZngiXVtpXVsi
YWN0aXZlIl07DQoJCQkJCWluc3QuZWZmZWN0X3BhcmFtc1tmeGluZGV4XSA9IHdvcmxkWyJmeCJd
W2ldWyJwYXJhbXMiXTsNCgkJCQl9DQoJCQl9DQoJCQlpbnN0LnVwZGF0ZUFjdGl2ZUVmZmVjdHMo
KTsNCgkJfQ0KCQlvYmVocyA9IG9bImJlaHMiXTsNCgkJaWYgKG9iZWhzKQ0KCQl7DQoJCQlmb3Ig
KHAgaW4gb2JlaHMpDQoJCQl7DQoJCQkJaWYgKG9iZWhzLmhhc093blByb3BlcnR5KHApKQ0KCQkJ
CXsNCgkJCQkJYmVoaW5kZXggPSB0aGlzLmdldEJlaGF2aW9ySW5kZXhCeVNpZChpbnN0LCBwYXJz
ZUludChwLCAxMCkpOw0KCQkJCQlpZiAoYmVoaW5kZXggPCAwKQ0KCQkJCQkJY29udGludWU7CQkv
LyBtdXN0J3ZlIGdvbmUgbWlzc2luZw0KCQkJCQlpbnN0LmJlaGF2aW9yX2luc3RzW2JlaGluZGV4
XS5sb2FkRnJvbUpTT04ob2JlaHNbcF0pOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlpZiAob1siZGF0
YSJdKQ0KCQkJaW5zdC5sb2FkRnJvbUpTT04ob1siZGF0YSJdKTsNCgl9Ow0KCVJ1bnRpbWUucHJv
dG90eXBlLmZldGNoTG9jYWxGaWxlVmlhQ29yZG92YSA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgc3Vj
Y2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKQ0KCXsNCgkJdmFyIHBhdGggPSBjb3Jkb3ZhWyJm
aWxlIl1bImFwcGxpY2F0aW9uRGlyZWN0b3J5Il0gKyAid3d3LyIgKyBmaWxlbmFtZTsNCgkJd2lu
ZG93WyJyZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMIl0ocGF0aCwgZnVuY3Rpb24gKGVudHJ5KQ0K
CQl7DQoJCQllbnRyeS5maWxlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7DQoJCX0s
IGVycm9yQ2FsbGJhY2spOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuZmV0Y2hMb2NhbEZpbGVW
aWFDb3Jkb3ZhQXNUZXh0ID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBzdWNjZXNzQ2FsbGJhY2ssIGVy
cm9yQ2FsbGJhY2spDQoJew0KCQl0aGlzLmZldGNoTG9jYWxGaWxlVmlhQ29yZG92YShmaWxlbmFt
ZSwgZnVuY3Rpb24gKGZpbGUpDQoJCXsNCgkJCXZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigp
Ow0KCQkJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKQ0KCQkJew0KCQkJCXN1Y2Nlc3NDYWxs
YmFjayhlLnRhcmdldC5yZXN1bHQpOw0KCQkJfTsNCgkJCXJlYWRlci5vbmVycm9yID0gZXJyb3JD
YWxsYmFjazsNCgkJCXJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOw0KCQl9LCBlcnJvckNhbGxiYWNr
KTsNCgl9Ow0KCXZhciBxdWV1ZWRBcnJheUJ1ZmZlclJlYWRzID0gW107DQoJdmFyIGFjdGl2ZUFy
cmF5QnVmZmVyUmVhZHMgPSAwOw0KCXZhciBNQVhfQVJSQVlCVUZGRVJfUkVBRFMgPSA4Ow0KCVJ1
bnRpbWUucHJvdG90eXBlLm1heWJlU3RhcnROZXh0QXJyYXlCdWZmZXJSZWFkID0gZnVuY3Rpb24o
KQ0KCXsNCgkJaWYgKCFxdWV1ZWRBcnJheUJ1ZmZlclJlYWRzLmxlbmd0aCkNCgkJCXJldHVybjsJ
CS8vIG5vbmUgbGVmdA0KCQlpZiAoYWN0aXZlQXJyYXlCdWZmZXJSZWFkcyA+PSBNQVhfQVJSQVlC
VUZGRVJfUkVBRFMpDQoJCQlyZXR1cm47CQkvLyBhbHJlYWR5IGdvdCBtYXhpbXVtIG51bWJlciBp
bi1mbGlnaHQNCgkJYWN0aXZlQXJyYXlCdWZmZXJSZWFkcysrOw0KCQl2YXIgam9iID0gcXVldWVk
QXJyYXlCdWZmZXJSZWFkcy5zaGlmdCgpOw0KCQl0aGlzLmRvRmV0Y2hMb2NhbEZpbGVWaWFDb3Jk
b3ZhQXNBcnJheUJ1ZmZlcihqb2IuZmlsZW5hbWUsIGpvYi5zdWNjZXNzQ2FsbGJhY2ssIGpvYi5l
cnJvckNhbGxiYWNrKTsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLmZldGNoTG9jYWxGaWxlVmlh
Q29yZG92YUFzQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoZmlsZW5hbWUsIHN1Y2Nlc3NDYWxsYmFj
a18sIGVycm9yQ2FsbGJhY2tfKQ0KCXsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQlxdWV1ZWRBcnJh
eUJ1ZmZlclJlYWRzLnB1c2goew0KCQkJZmlsZW5hbWU6IGZpbGVuYW1lLA0KCQkJc3VjY2Vzc0Nh
bGxiYWNrOiBmdW5jdGlvbiAocmVzdWx0KQ0KCQkJew0KCQkJCWFjdGl2ZUFycmF5QnVmZmVyUmVh
ZHMtLTsNCgkJCQlzZWxmLm1heWJlU3RhcnROZXh0QXJyYXlCdWZmZXJSZWFkKCk7DQoJCQkJc3Vj
Y2Vzc0NhbGxiYWNrXyhyZXN1bHQpOw0KCQkJfSwNCgkJCWVycm9yQ2FsbGJhY2s6IGZ1bmN0aW9u
IChlcnIpDQoJCQl7DQoJCQkJYWN0aXZlQXJyYXlCdWZmZXJSZWFkcy0tOw0KCQkJCXNlbGYubWF5
YmVTdGFydE5leHRBcnJheUJ1ZmZlclJlYWQoKTsNCgkJCQllcnJvckNhbGxiYWNrXyhlcnIpOw0K
CQkJfQ0KCQl9KTsNCgkJdGhpcy5tYXliZVN0YXJ0TmV4dEFycmF5QnVmZmVyUmVhZCgpOw0KCX07
DQoJUnVudGltZS5wcm90b3R5cGUuZG9GZXRjaExvY2FsRmlsZVZpYUNvcmRvdmFBc0FycmF5QnVm
ZmVyID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2sp
DQoJew0KCQl0aGlzLmZldGNoTG9jYWxGaWxlVmlhQ29yZG92YShmaWxlbmFtZSwgZnVuY3Rpb24g
KGZpbGUpDQoJCXsNCgkJCXZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KCQkJcmVhZGVy
Lm9ubG9hZCA9IGZ1bmN0aW9uIChlKQ0KCQkJew0KCQkJCXN1Y2Nlc3NDYWxsYmFjayhlLnRhcmdl
dC5yZXN1bHQpOw0KCQkJfTsNCgkJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsNCgkJ
fSwgZXJyb3JDYWxsYmFjayk7DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5mZXRjaExvY2FsRmls
ZVZpYUNvcmRvdmFBc1VSTCA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgc3VjY2Vzc0NhbGxiYWNrLCBl
cnJvckNhbGxiYWNrKQ0KCXsNCgkJdmFyIGJsb2JUeXBlID0gIiI7DQoJCXZhciBsb3dlcm5hbWUg
PSBmaWxlbmFtZS50b0xvd2VyQ2FzZSgpOw0KCQl2YXIgZXh0MyA9IGxvd2VybmFtZS5zdWJzdHIo
bG93ZXJuYW1lLmxlbmd0aCAtIDQpOw0KCQl2YXIgZXh0NCA9IGxvd2VybmFtZS5zdWJzdHIobG93
ZXJuYW1lLmxlbmd0aCAtIDUpOw0KCQlpZiAoZXh0MyA9PT0gIi5tcDQiKQ0KCQkJYmxvYlR5cGUg
PSAidmlkZW8vbXA0IjsNCgkJZWxzZSBpZiAoZXh0NCA9PT0gIi53ZWJtIikNCgkJCWJsb2JUeXBl
ID0gInZpZGVvL3dlYm0iOwkJLy8gdXNlIHZpZGVvIHR5cGUgYnV0IGhvcGVmdWxseSB3b3JrcyB3
aXRoIGF1ZGlvIHRvbw0KCQllbHNlIGlmIChleHQzID09PSAiLm00YSIpDQoJCQlibG9iVHlwZSA9
ICJhdWRpby9tcDQiOw0KCQllbHNlIGlmIChleHQzID09PSAiLm1wMyIpDQoJCQlibG9iVHlwZSA9
ICJhdWRpby9tcGVnIjsNCgkJdGhpcy5mZXRjaExvY2FsRmlsZVZpYUNvcmRvdmFBc0FycmF5QnVm
ZmVyKGZpbGVuYW1lLCBmdW5jdGlvbiAoYXJyYXlCdWZmZXIpDQoJCXsNCgkJCXZhciBibG9iID0g
bmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiBibG9iVHlwZSB9KTsNCgkJCXZhciB1cmwg
PSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KCQkJc3VjY2Vzc0NhbGxiYWNrKHVybCk7DQoJ
CX0sIGVycm9yQ2FsbGJhY2spOw0KCX07DQoJUnVudGltZS5wcm90b3R5cGUuaXNBYnNvbHV0ZVVy
bCA9IGZ1bmN0aW9uICh1cmwpDQoJew0KCQlyZXR1cm4gL14oPzpbYS16XSs6KT9cL1wvLy50ZXN0
KHVybCkgfHwgdXJsLnN1YnN0cigwLCA1KSA9PT0gImRhdGE6IiAgfHwgdXJsLnN1YnN0cigwLCA1
KSA9PT0gImJsb2I6IjsNCgl9Ow0KCVJ1bnRpbWUucHJvdG90eXBlLnNldEltYWdlU3JjID0gZnVu
Y3Rpb24gKGltZywgc3JjKQ0KCXsNCgkJaWYgKHRoaXMuaXNXS1dlYlZpZXcgJiYgIXRoaXMuaXNB
YnNvbHV0ZVVybChzcmMpKQ0KCQl7DQoJCQl0aGlzLmZldGNoTG9jYWxGaWxlVmlhQ29yZG92YUFz
VVJMKHNyYywgZnVuY3Rpb24gKHVybCkNCgkJCXsNCgkJCQlpbWcuc3JjID0gdXJsOw0KCQkJfSwg
ZnVuY3Rpb24gKGVycikNCgkJCXsNCgkJCQlhbGVydCgiRmFpbGVkIHRvIGxvYWQgaW1hZ2U6ICIg
KyBlcnIpOw0KCQkJfSk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpbWcuc3JjID0gc3JjOw0KCQl9
DQoJfTsNCglSdW50aW1lLnByb3RvdHlwZS5zZXRDdHhJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBm
dW5jdGlvbiAoY3R4LCBlKQ0KCXsNCgkJaWYgKHR5cGVvZiBjdHhbImltYWdlU21vb3RoaW5nRW5h
YmxlZCJdICE9PSAidW5kZWZpbmVkIikNCgkJew0KCQkJY3R4WyJpbWFnZVNtb290aGluZ0VuYWJs
ZWQiXSA9IGU7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQljdHhbIndlYmtpdEltYWdlU21vb3RoaW5n
RW5hYmxlZCJdID0gZTsNCgkJCWN0eFsibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIl0gPSBlOw0K
CQkJY3R4WyJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZCJdID0gZTsNCgkJfQ0KCX07DQoJY3IucnVu
dGltZSA9IFJ1bnRpbWU7DQoJY3IuY3JlYXRlUnVudGltZSA9IGZ1bmN0aW9uIChjYW52YXNpZCkN
Cgl7DQoJCXJldHVybiBuZXcgUnVudGltZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNp
ZCkpOw0KCX07DQoJY3IuY3JlYXRlRENSdW50aW1lID0gZnVuY3Rpb24gKHcsIGgpDQoJew0KCQly
ZXR1cm4gbmV3IFJ1bnRpbWUoeyAiZGMiOiB0cnVlLCAid2lkdGgiOiB3LCAiaGVpZ2h0IjogaCB9
KTsNCgl9Ow0KCXdpbmRvd1siY3JfY3JlYXRlUnVudGltZSJdID0gY3IuY3JlYXRlUnVudGltZTsN
Cgl3aW5kb3dbImNyX2NyZWF0ZURDUnVudGltZSJdID0gY3IuY3JlYXRlRENSdW50aW1lOw0KCXdp
bmRvd1siY3JlYXRlQ29jb29uSlNSdW50aW1lIl0gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJd2luZG93
WyJjMmNvY29vbmpzIl0gPSB0cnVlOw0KCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxl
bWVudCgic2NyZWVuY2FudmFzIikgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7
DQoJCWNhbnZhcy5zY3JlZW5jYW52YXMgPSB0cnVlOw0KCQlkb2N1bWVudC5ib2R5LmFwcGVuZENo
aWxkKGNhbnZhcyk7DQoJCXZhciBydCA9IG5ldyBSdW50aW1lKGNhbnZhcyk7DQoJCXdpbmRvd1si
YzJydW50aW1lIl0gPSBydDsNCgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9u
Y2hhbmdlIiwgZnVuY3Rpb24gKCkgew0KCQkJd2luZG93WyJjMnJ1bnRpbWUiXVsic2V0U2l6ZSJd
KHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpOw0KCQl9KTsNCgkJd2luZG93
WyJjMnJ1bnRpbWUiXVsic2V0U2l6ZSJdKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJI
ZWlnaHQpOw0KCQlyZXR1cm4gcnQ7DQoJfTsNCgl3aW5kb3dbImNyZWF0ZUVqZWN0YVJ1bnRpbWUi
XSA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5
SWQoImNhbnZhcyIpOw0KCQl2YXIgcnQgPSBuZXcgUnVudGltZShjYW52YXMpOw0KCQl3aW5kb3db
ImMycnVudGltZSJdID0gcnQ7DQoJCXdpbmRvd1siYzJydW50aW1lIl1bInNldFNpemUiXSh3aW5k
b3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsNCgkJcmV0dXJuIHJ0Ow0KCX07DQp9
KCkpOw0Kd2luZG93WyJjcl9nZXRDMlJ1bnRpbWUiXSA9IGZ1bmN0aW9uKCkNCnsNCgl2YXIgY2Fu
dmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImMyY2FudmFzIik7DQoJaWYgKGNhbnZhcykN
CgkJcmV0dXJuIGNhbnZhc1siYzJydW50aW1lIl07DQoJZWxzZSBpZiAod2luZG93WyJjMnJ1bnRp
bWUiXSkNCgkJcmV0dXJuIHdpbmRvd1siYzJydW50aW1lIl07DQoJZWxzZQ0KCQlyZXR1cm4gbnVs
bDsNCn0NCndpbmRvd1siY3JfZ2V0U25hcHNob3QiXSA9IGZ1bmN0aW9uIChmb3JtYXRfLCBxdWFs
aXR5XykNCnsNCgl2YXIgcnVudGltZSA9IHdpbmRvd1siY3JfZ2V0QzJSdW50aW1lIl0oKTsNCglp
ZiAocnVudGltZSkNCgkJcnVudGltZS5kb0NhbnZhc1NuYXBzaG90KGZvcm1hdF8sIHF1YWxpdHlf
KTsNCn0NCndpbmRvd1siY3Jfc2l6ZUNhbnZhcyJdID0gZnVuY3Rpb24odywgaCkNCnsNCglpZiAo
dyA9PT0gMCB8fCBoID09PSAwKQ0KCQlyZXR1cm47DQoJdmFyIHJ1bnRpbWUgPSB3aW5kb3dbImNy
X2dldEMyUnVudGltZSJdKCk7DQoJaWYgKHJ1bnRpbWUpDQoJCXJ1bnRpbWVbInNldFNpemUiXSh3
LCBoKTsNCn0NCndpbmRvd1siY3Jfc2V0U3VzcGVuZGVkIl0gPSBmdW5jdGlvbihzKQ0Kew0KCXZh
ciBydW50aW1lID0gd2luZG93WyJjcl9nZXRDMlJ1bnRpbWUiXSgpOw0KCWlmIChydW50aW1lKQ0K
CQlydW50aW1lWyJzZXRTdXNwZW5kZWQiXShzKTsNCn0NCjsNCihmdW5jdGlvbigpDQp7DQoJZnVu
Y3Rpb24gTGF5b3V0KHJ1bnRpbWUsIG0pDQoJew0KCQl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0K
CQl0aGlzLmV2ZW50X3NoZWV0ID0gbnVsbDsNCgkJdGhpcy5zY3JvbGxYID0gKHRoaXMucnVudGlt
ZS5vcmlnaW5hbF93aWR0aCAvIDIpOw0KCQl0aGlzLnNjcm9sbFkgPSAodGhpcy5ydW50aW1lLm9y
aWdpbmFsX2hlaWdodCAvIDIpOw0KCQl0aGlzLnNjYWxlID0gMS4wOw0KCQl0aGlzLmFuZ2xlID0g
MDsNCgkJdGhpcy5maXJzdF92aXNpdCA9IHRydWU7DQoJCXRoaXMubmFtZSA9IG1bMF07DQoJCXRo
aXMub3JpZ2luYWxXaWR0aCA9IG1bMV07DQoJCXRoaXMub3JpZ2luYWxIZWlnaHQgPSBtWzJdOw0K
CQl0aGlzLndpZHRoID0gbVsxXTsNCgkJdGhpcy5oZWlnaHQgPSBtWzJdOw0KCQl0aGlzLnVuYm91
bmRlZF9zY3JvbGxpbmcgPSBtWzNdOw0KCQl0aGlzLnNoZWV0bmFtZSA9IG1bNF07DQoJCXRoaXMu
c2lkID0gbVs1XTsNCgkJdmFyIGxtID0gbVs2XTsNCgkJdmFyIGksIGxlbjsNCgkJdGhpcy5sYXll
cnMgPSBbXTsNCgkJdGhpcy5pbml0aWFsX3R5cGVzID0gW107DQoJCWZvciAoaSA9IDAsIGxlbiA9
IGxtLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIgbGF5ZXIgPSBuZXcgY3IubGF5
ZXIodGhpcywgbG1baV0pOw0KCQkJbGF5ZXIubnVtYmVyID0gaTsNCgkJCWNyLnNlYWwobGF5ZXIp
Ow0KCQkJdGhpcy5sYXllcnMucHVzaChsYXllcik7DQoJCX0NCgkJdmFyIGltID0gbVs3XTsNCgkJ
dGhpcy5pbml0aWFsX25vbndvcmxkID0gW107DQoJCWZvciAoaSA9IDAsIGxlbiA9IGltLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIgaW5zdCA9IGltW2ldOw0KCQkJdmFyIHR5cGUg
PSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbaW5zdFsxXV07DQo7DQoJCQlpZiAoIXR5cGUu
ZGVmYXVsdF9pbnN0YW5jZSkNCgkJCQl0eXBlLmRlZmF1bHRfaW5zdGFuY2UgPSBpbnN0Ow0KCQkJ
dGhpcy5pbml0aWFsX25vbndvcmxkLnB1c2goaW5zdCk7DQoJCQlpZiAodGhpcy5pbml0aWFsX3R5
cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKQ0KCQkJCXRoaXMuaW5pdGlhbF90eXBlcy5wdXNoKHR5
cGUpOw0KCQl9DQoJCXRoaXMuZWZmZWN0X3R5cGVzID0gW107DQoJCXRoaXMuYWN0aXZlX2VmZmVj
dF90eXBlcyA9IFtdOw0KCQl0aGlzLnNoYWRlcnNfcHJlc2VydmVfb3BhcXVlbmVzcyA9IHRydWU7
DQoJCXRoaXMuZWZmZWN0X3BhcmFtcyA9IFtdOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBtWzhdLmxl
bmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0aGlzLmVmZmVjdF90eXBlcy5wdXNoKHsNCgkJ
CQlpZDogbVs4XVtpXVswXSwNCgkJCQluYW1lOiBtWzhdW2ldWzFdLA0KCQkJCXNoYWRlcmluZGV4
OiAtMSwNCgkJCQlwcmVzZXJ2ZXNPcGFxdWVuZXNzOiBmYWxzZSwNCgkJCQlhY3RpdmU6IHRydWUs
DQoJCQkJaW5kZXg6IGkNCgkJCX0pOw0KCQkJdGhpcy5lZmZlY3RfcGFyYW1zLnB1c2gobVs4XVtp
XVsyXS5zbGljZSgwKSk7DQoJCX0NCgkJdGhpcy51cGRhdGVBY3RpdmVFZmZlY3RzKCk7DQoJCXRo
aXMucmNUZXggPSBuZXcgY3IucmVjdCgwLCAwLCAxLCAxKTsNCgkJdGhpcy5yY1RleDIgPSBuZXcg
Y3IucmVjdCgwLCAwLCAxLCAxKTsNCgkJdGhpcy5wZXJzaXN0X2RhdGEgPSB7fTsNCgl9Ow0KCUxh
eW91dC5wcm90b3R5cGUuc2F2ZU9iamVjdFRvUGVyc2lzdCA9IGZ1bmN0aW9uIChpbnN0KQ0KCXsN
CgkJdmFyIHNpZFN0ciA9IGluc3QudHlwZS5zaWQudG9TdHJpbmcoKTsNCgkJaWYgKCF0aGlzLnBl
cnNpc3RfZGF0YS5oYXNPd25Qcm9wZXJ0eShzaWRTdHIpKQ0KCQkJdGhpcy5wZXJzaXN0X2RhdGFb
c2lkU3RyXSA9IFtdOw0KCQl2YXIgdHlwZV9wZXJzaXN0ID0gdGhpcy5wZXJzaXN0X2RhdGFbc2lk
U3RyXTsNCgkJdHlwZV9wZXJzaXN0LnB1c2godGhpcy5ydW50aW1lLnNhdmVJbnN0YW5jZVRvSlNP
TihpbnN0KSk7DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLmhhc09wYXF1ZUJvdHRvbUxheWVyID0g
ZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBsYXllciA9IHRoaXMubGF5ZXJzWzBdOw0KCQlyZXR1cm4g
IWxheWVyLnRyYW5zcGFyZW50ICYmIGxheWVyLm9wYWNpdHkgPT09IDEuMCAmJiAhbGF5ZXIuZm9y
Y2VPd25UZXh0dXJlICYmIGxheWVyLnZpc2libGU7DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLnVw
ZGF0ZUFjdGl2ZUVmZmVjdHMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJY3IuY2xlYXJBcnJheSh0aGlz
LmFjdGl2ZV9lZmZlY3RfdHlwZXMpOw0KCQl0aGlzLnNoYWRlcnNfcHJlc2VydmVfb3BhcXVlbmVz
cyA9IHRydWU7DQoJCXZhciBpLCBsZW4sIGV0Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmVm
ZmVjdF90eXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJZXQgPSB0aGlzLmVmZmVj
dF90eXBlc1tpXTsNCgkJCWlmIChldC5hY3RpdmUpDQoJCQl7DQoJCQkJdGhpcy5hY3RpdmVfZWZm
ZWN0X3R5cGVzLnB1c2goZXQpOw0KCQkJCWlmICghZXQucHJlc2VydmVzT3BhcXVlbmVzcykNCgkJ
CQkJdGhpcy5zaGFkZXJzX3ByZXNlcnZlX29wYXF1ZW5lc3MgPSBmYWxzZTsNCgkJCX0NCgkJfQ0K
CX07DQoJTGF5b3V0LnByb3RvdHlwZS5nZXRFZmZlY3RCeU5hbWUgPSBmdW5jdGlvbiAobmFtZV8p
DQoJew0KCQl2YXIgaSwgbGVuLCBldDsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5lZmZlY3Rf
dHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWV0ID0gdGhpcy5lZmZlY3RfdHlw
ZXNbaV07DQoJCQlpZiAoZXQubmFtZSA9PT0gbmFtZV8pDQoJCQkJcmV0dXJuIGV0Ow0KCQl9DQoJ
CXJldHVybiBudWxsOw0KCX07DQoJdmFyIGNyZWF0ZWRfaW5zdGFuY2VzID0gW107DQoJZnVuY3Rp
b24gc29ydF9ieV96aW5kZXgoYSwgYikNCgl7DQoJCXJldHVybiBhLnppbmRleCAtIGIuemluZGV4
Ow0KCX07DQoJdmFyIGZpcnN0X2xheW91dCA9IHRydWU7DQoJTGF5b3V0LnByb3RvdHlwZS5zdGFy
dFJ1bm5pbmcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMuc2hlZXRuYW1lKQ0KCQl7DQoJ
CQl0aGlzLmV2ZW50X3NoZWV0ID0gdGhpcy5ydW50aW1lLmV2ZW50c2hlZXRzW3RoaXMuc2hlZXRu
YW1lXTsNCjsNCgkJCXRoaXMuZXZlbnRfc2hlZXQudXBkYXRlRGVlcEluY2x1ZGVzKCk7DQoJCX0N
CgkJdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0ID0gdGhpczsNCgkJdGhpcy53aWR0aCA9IHRo
aXMub3JpZ2luYWxXaWR0aDsNCgkJdGhpcy5oZWlnaHQgPSB0aGlzLm9yaWdpbmFsSGVpZ2h0Ow0K
CQl0aGlzLnNjcm9sbFggPSAodGhpcy5ydW50aW1lLm9yaWdpbmFsX3dpZHRoIC8gMik7DQoJCXRo
aXMuc2Nyb2xsWSA9ICh0aGlzLnJ1bnRpbWUub3JpZ2luYWxfaGVpZ2h0IC8gMik7DQoJCXZhciBp
LCBrLCBsZW4sIGxlbmssIHR5cGUsIHR5cGVfaW5zdGFuY2VzLCBpbml0aWFsX2luc3QsIGluc3Qs
IGlpZCwgdCwgcywgcCwgcSwgdHlwZV9kYXRhLCBsYXllcjsNCgkJZm9yIChpID0gMCwgbGVuID0g
dGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJ
CQl0eXBlID0gdGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4W2ldOw0KCQkJaWYgKHR5cGUuaXNf
ZmFtaWx5KQ0KCQkJCWNvbnRpbnVlOwkJLy8gaW5zdGFuY2VzIGFyZSBvbmx5IHRyYW5zZmVycmVk
IGZvciB0aGVpciByZWFsIHR5cGUNCgkJCXR5cGVfaW5zdGFuY2VzID0gdHlwZS5pbnN0YW5jZXM7
DQoJCQlmb3IgKGsgPSAwLCBsZW5rID0gdHlwZV9pbnN0YW5jZXMubGVuZ3RoOyBrIDwgbGVuazsg
aysrKQ0KCQkJew0KCQkJCWluc3QgPSB0eXBlX2luc3RhbmNlc1trXTsNCgkJCQlpZiAoaW5zdC5s
YXllcikNCgkJCQl7DQoJCQkJCXZhciBudW0gPSBpbnN0LmxheWVyLm51bWJlcjsNCgkJCQkJaWYg
KG51bSA+PSB0aGlzLmxheWVycy5sZW5ndGgpDQoJCQkJCQludW0gPSB0aGlzLmxheWVycy5sZW5n
dGggLSAxOw0KCQkJCQlpbnN0LmxheWVyID0gdGhpcy5sYXllcnNbbnVtXTsNCgkJCQkJaWYgKGlu
c3QubGF5ZXIuaW5zdGFuY2VzLmluZGV4T2YoaW5zdCkgPT09IC0xKQ0KCQkJCQkJaW5zdC5sYXll
ci5pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJCQkJaW5zdC5sYXllci56aW5kaWNlc19zdGFsZSA9
IHRydWU7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCWlmICghZmlyc3RfbGF5b3V0KQ0KCQl7DQoJCQlm
b3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVycy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCXsN
CgkJCQl0aGlzLmxheWVyc1tpXS5pbnN0YW5jZXMuc29ydChzb3J0X2J5X3ppbmRleCk7DQoJCQl9
DQoJCX0NCgkJdmFyIGxheWVyOw0KCQljci5jbGVhckFycmF5KGNyZWF0ZWRfaW5zdGFuY2VzKTsN
CgkJdGhpcy5ib3VuZFNjcm9sbGluZygpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVy
cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJbGF5ZXIgPSB0aGlzLmxheWVyc1tpXTsN
CgkJCWxheWVyLmNyZWF0ZUluaXRpYWxJbnN0YW5jZXMoKTsJCS8vIGZpbGxzIGNyZWF0ZWRfaW5z
dGFuY2VzDQoJCQlsYXllci51cGRhdGVWaWV3cG9ydChudWxsKTsNCgkJfQ0KCQl2YXIgdWlkc19j
aGFuZ2VkID0gZmFsc2U7DQoJCWlmICghdGhpcy5maXJzdF92aXNpdCkNCgkJew0KCQkJZm9yIChw
IGluIHRoaXMucGVyc2lzdF9kYXRhKQ0KCQkJew0KCQkJCWlmICh0aGlzLnBlcnNpc3RfZGF0YS5o
YXNPd25Qcm9wZXJ0eShwKSkNCgkJCQl7DQoJCQkJCXR5cGUgPSB0aGlzLnJ1bnRpbWUuZ2V0T2Jq
ZWN0VHlwZUJ5U2lkKHBhcnNlSW50KHAsIDEwKSk7DQoJCQkJCWlmICghdHlwZSB8fCB0eXBlLmlz
X2ZhbWlseSB8fCAhdGhpcy5ydW50aW1lLnR5cGVIYXNQZXJzaXN0QmVoYXZpb3IodHlwZSkpDQoJ
CQkJCQljb250aW51ZTsNCgkJCQkJdHlwZV9kYXRhID0gdGhpcy5wZXJzaXN0X2RhdGFbcF07DQoJ
CQkJCWZvciAoaSA9IDAsIGxlbiA9IHR5cGVfZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJ
CQkJew0KCQkJCQkJbGF5ZXIgPSBudWxsOw0KCQkJCQkJaWYgKHR5cGUucGx1Z2luLmlzX3dvcmxk
KQ0KCQkJCQkJew0KCQkJCQkJCWxheWVyID0gdGhpcy5nZXRMYXllckJ5U2lkKHR5cGVfZGF0YVtp
XVsidyJdWyJsIl0pOw0KCQkJCQkJCWlmICghbGF5ZXIpDQoJCQkJCQkJCWNvbnRpbnVlOw0KCQkJ
CQkJfQ0KCQkJCQkJaW5zdCA9IHRoaXMucnVudGltZS5jcmVhdGVJbnN0YW5jZUZyb21Jbml0KHR5
cGUuZGVmYXVsdF9pbnN0YW5jZSwgbGF5ZXIsIGZhbHNlLCAwLCAwLCB0cnVlKTsNCgkJCQkJCXRo
aXMucnVudGltZS5sb2FkSW5zdGFuY2VGcm9tSlNPTihpbnN0LCB0eXBlX2RhdGFbaV0pOw0KCQkJ
CQkJdWlkc19jaGFuZ2VkID0gdHJ1ZTsNCgkJCQkJCWNyZWF0ZWRfaW5zdGFuY2VzLnB1c2goaW5z
dCk7DQoJCQkJCX0NCgkJCQkJY3IuY2xlYXJBcnJheSh0eXBlX2RhdGEpOw0KCQkJCX0NCgkJCX0N
CgkJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0K
CQkJew0KCQkJCXRoaXMubGF5ZXJzW2ldLmluc3RhbmNlcy5zb3J0KHNvcnRfYnlfemluZGV4KTsN
CgkJCQl0aGlzLmxheWVyc1tpXS56aW5kaWNlc19zdGFsZSA9IHRydWU7CQkvLyBpbiBjYXNlIG9m
IGR1cGxpY2F0ZXMvaG9sZXMNCgkJCX0NCgkJfQ0KCQlpZiAodWlkc19jaGFuZ2VkKQ0KCQl7DQoJ
CQl0aGlzLnJ1bnRpbWUuQ2xlYXJEZWF0aFJvdygpOw0KCQkJdGhpcy5ydW50aW1lLnJlZnJlc2hV
aWRNYXAoKTsNCgkJfQ0KCQlmb3IgKGkgPSAwOyBpIDwgY3JlYXRlZF9pbnN0YW5jZXMubGVuZ3Ro
OyBpKyspDQoJCXsNCgkJCWluc3QgPSBjcmVhdGVkX2luc3RhbmNlc1tpXTsNCgkJCWlmICghaW5z
dC50eXBlLmlzX2NvbnRhaW5lZCkNCgkJCQljb250aW51ZTsNCgkJCWlpZCA9IGluc3QuZ2V0X2lp
ZCgpOw0KCQkJZm9yIChrID0gMCwgbGVuayA9IGluc3QudHlwZS5jb250YWluZXIubGVuZ3RoOyBr
IDwgbGVuazsgaysrKQ0KCQkJew0KCQkJCXQgPSBpbnN0LnR5cGUuY29udGFpbmVyW2tdOw0KCQkJ
CWlmIChpbnN0LnR5cGUgPT09IHQpDQoJCQkJCWNvbnRpbnVlOw0KCQkJCWlmICh0Lmluc3RhbmNl
cy5sZW5ndGggPiBpaWQpDQoJCQkJCWluc3Quc2libGluZ3MucHVzaCh0Lmluc3RhbmNlc1tpaWRd
KTsNCgkJCQllbHNlDQoJCQkJew0KCQkJCQlpZiAoIXQuZGVmYXVsdF9pbnN0YW5jZSkNCgkJCQkJ
ew0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJcyA9IHRoaXMucnVudGltZS5jcmVh
dGVJbnN0YW5jZUZyb21Jbml0KHQuZGVmYXVsdF9pbnN0YW5jZSwgaW5zdC5sYXllciwgdHJ1ZSwg
aW5zdC54LCBpbnN0LnksIHRydWUpOw0KCQkJCQkJdGhpcy5ydW50aW1lLkNsZWFyRGVhdGhSb3co
KTsNCgkJCQkJCXQudXBkYXRlSUlEcygpOw0KCQkJCQkJaW5zdC5zaWJsaW5ncy5wdXNoKHMpOw0K
CQkJCQkJY3JlYXRlZF9pbnN0YW5jZXMucHVzaChzKTsJCS8vIGNvbWUgYmFjayBhcm91bmQgYW5k
IGxpbmsgdXAgaXRzIG93biBpbnN0YW5jZXMgdG9vDQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0N
CgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5pbml0aWFsX25vbndvcmxkLmxlbmd0aDsgaSA8IGxl
bjsgaSsrKQ0KCQl7DQoJCQlpbml0aWFsX2luc3QgPSB0aGlzLmluaXRpYWxfbm9ud29ybGRbaV07
DQoJCQl0eXBlID0gdGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4W2luaXRpYWxfaW5zdFsxXV07
DQoJCQlpZiAoIXR5cGUuaXNfY29udGFpbmVkKQ0KCQkJew0KCQkJCWluc3QgPSB0aGlzLnJ1bnRp
bWUuY3JlYXRlSW5zdGFuY2VGcm9tSW5pdCh0aGlzLmluaXRpYWxfbm9ud29ybGRbaV0sIG51bGws
IHRydWUpOw0KCQkJfQ0KOw0KCQl9DQoJCXRoaXMucnVudGltZS5jaGFuZ2VsYXlvdXQgPSBudWxs
Ow0KCQl0aGlzLnJ1bnRpbWUuQ2xlYXJEZWF0aFJvdygpOw0KCQlpZiAodGhpcy5ydW50aW1lLmN0
eCAmJiAhdGhpcy5ydW50aW1lLmlzRG9tRnJlZSkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0g
dGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0K
CQkJCXQgPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbaV07DQoJCQkJaWYgKHQuaXNfZmFt
aWx5IHx8ICF0Lmluc3RhbmNlcy5sZW5ndGggfHwgIXQucHJlbG9hZENhbnZhczJEKQ0KCQkJCQlj
b250aW51ZTsNCgkJCQl0LnByZWxvYWRDYW52YXMyRCh0aGlzLnJ1bnRpbWUuY3R4KTsNCgkJCX0N
CgkJfQ0KCQkvKg0KCQlpZiAodGhpcy5ydW50aW1lLmdsd3JhcCkNCgkJew0KCQkJY29uc29sZS5s
b2coIkVzdGltYXRlZCBWUkFNIGF0IGxheW91dCBzdGFydDogIiArIHRoaXMucnVudGltZS5nbHdy
YXAudGV4dHVyZUNvdW50KCkgKyAiIHRleHR1cmVzLCBhcHByb3guICIgKyBNYXRoLnJvdW5kKHRo
aXMucnVudGltZS5nbHdyYXAuZXN0aW1hdGVWUkFNKCkgLyAxMDI0KSArICIga2IiKTsNCgkJfQ0K
CQkqLw0KCQlpZiAodGhpcy5ydW50aW1lLmlzTG9hZGluZ1N0YXRlKQ0KCQl7DQoJCQljci5zaGFs
bG93QXNzaWduQXJyYXkodGhpcy5ydW50aW1lLmZpcmVPbkNyZWF0ZUFmdGVyTG9hZCwgY3JlYXRl
ZF9pbnN0YW5jZXMpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gY3Jl
YXRlZF9pbnN0YW5jZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJaW5zdCA9IGNy
ZWF0ZWRfaW5zdGFuY2VzW2ldOw0KCQkJCXRoaXMucnVudGltZS50cmlnZ2VyKE9iamVjdC5nZXRQ
cm90b3R5cGVPZihpbnN0LnR5cGUucGx1Z2luKS5jbmRzLk9uQ3JlYXRlZCwgaW5zdCk7DQoJCQl9
DQoJCX0NCgkJY3IuY2xlYXJBcnJheShjcmVhdGVkX2luc3RhbmNlcyk7DQoJCWlmICghdGhpcy5y
dW50aW1lLmlzTG9hZGluZ1N0YXRlKQ0KCQl7DQoJCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5z
eXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLk9uTGF5b3V0U3RhcnQsIG51bGwpOw0KCQl9DQoJ
CXRoaXMuZmlyc3RfdmlzaXQgPSBmYWxzZTsNCgl9Ow0KCUxheW91dC5wcm90b3R5cGUuY3JlYXRl
R2xvYmFsTm9uV29ybGRzID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBrLCBsZW4sIGluaXRp
YWxfaW5zdCwgaW5zdCwgdHlwZTsNCgkJZm9yIChpID0gMCwgayA9IDAsIGxlbiA9IHRoaXMuaW5p
dGlhbF9ub253b3JsZC5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaW5pdGlhbF9pbnN0
ID0gdGhpcy5pbml0aWFsX25vbndvcmxkW2ldOw0KCQkJdHlwZSA9IHRoaXMucnVudGltZS50eXBl
c19ieV9pbmRleFtpbml0aWFsX2luc3RbMV1dOw0KCQkJaWYgKHR5cGUuZ2xvYmFsKQ0KCQkJew0K
CQkJCWlmICghdHlwZS5pc19jb250YWluZWQpDQoJCQkJew0KCQkJCQlpbnN0ID0gdGhpcy5ydW50
aW1lLmNyZWF0ZUluc3RhbmNlRnJvbUluaXQoaW5pdGlhbF9pbnN0LCBudWxsLCB0cnVlKTsNCgkJ
CQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJdGhpcy5pbml0aWFsX25vbndvcmxkW2tdID0g
aW5pdGlhbF9pbnN0Ow0KCQkJCWsrKzsNCgkJCX0NCgkJfQ0KCQljci50cnVuY2F0ZUFycmF5KHRo
aXMuaW5pdGlhbF9ub253b3JsZCwgayk7DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLnN0b3BSdW5u
aW5nID0gZnVuY3Rpb24gKCkNCgl7DQo7DQoJCS8qDQoJCWlmICh0aGlzLnJ1bnRpbWUuZ2x3cmFw
KQ0KCQl7DQoJCQljb25zb2xlLmxvZygiRXN0aW1hdGVkIFZSQU0gYXQgbGF5b3V0IGVuZDogIiAr
IHRoaXMucnVudGltZS5nbHdyYXAudGV4dHVyZUNvdW50KCkgKyAiIHRleHR1cmVzLCBhcHByb3gu
ICIgKyBNYXRoLnJvdW5kKHRoaXMucnVudGltZS5nbHdyYXAuZXN0aW1hdGVWUkFNKCkgLyAxMDI0
KSArICIga2IiKTsNCgkJfQ0KCQkqLw0KCQlpZiAoIXRoaXMucnVudGltZS5pc0xvYWRpbmdTdGF0
ZSkNCgkJew0KCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5
cGUuY25kcy5PbkxheW91dEVuZCwgbnVsbCk7DQoJCX0NCgkJdGhpcy5ydW50aW1lLmlzRW5kaW5n
TGF5b3V0ID0gdHJ1ZTsNCgkJY3IuY2xlYXJBcnJheSh0aGlzLnJ1bnRpbWUuc3lzdGVtLndhaXRz
KTsNCgkJdmFyIGksIGxlbmksIGosIGxlbmo7DQoJCXZhciBsYXllcl9pbnN0YW5jZXMsIGluc3Qs
IHR5cGU7DQoJCWlmICghdGhpcy5maXJzdF92aXNpdCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVu
aSA9IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJCXsNCgkJCQl0aGlzLmxh
eWVyc1tpXS51cGRhdGVaSW5kaWNlcygpOw0KCQkJCWxheWVyX2luc3RhbmNlcyA9IHRoaXMubGF5
ZXJzW2ldLmluc3RhbmNlczsNCgkJCQlmb3IgKGogPSAwLCBsZW5qID0gbGF5ZXJfaW5zdGFuY2Vz
Lmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQl7DQoJCQkJCWluc3QgPSBsYXllcl9pbnN0YW5j
ZXNbal07DQoJCQkJCWlmICghaW5zdC50eXBlLmdsb2JhbCkNCgkJCQkJew0KCQkJCQkJaWYgKHRo
aXMucnVudGltZS50eXBlSGFzUGVyc2lzdEJlaGF2aW9yKGluc3QudHlwZSkpDQoJCQkJCQkJdGhp
cy5zYXZlT2JqZWN0VG9QZXJzaXN0KGluc3QpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJ
CWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLmxheWVycy5sZW5ndGg7IGkgPCBsZW5pOyBpKyspDQoJ
CXsNCgkJCWxheWVyX2luc3RhbmNlcyA9IHRoaXMubGF5ZXJzW2ldLmluc3RhbmNlczsNCgkJCWZv
ciAoaiA9IDAsIGxlbmogPSBsYXllcl9pbnN0YW5jZXMubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0K
CQkJew0KCQkJCWluc3QgPSBsYXllcl9pbnN0YW5jZXNbal07DQoJCQkJaWYgKCFpbnN0LnR5cGUu
Z2xvYmFsKQ0KCQkJCXsNCgkJCQkJdGhpcy5ydW50aW1lLkRlc3Ryb3lJbnN0YW5jZShpbnN0KTsN
CgkJCQl9DQoJCQl9DQoJCQl0aGlzLnJ1bnRpbWUuQ2xlYXJEZWF0aFJvdygpOw0KCQkJY3IuY2xl
YXJBcnJheShsYXllcl9pbnN0YW5jZXMpOw0KCQkJdGhpcy5sYXllcnNbaV0uemluZGljZXNfc3Rh
bGUgPSB0cnVlOw0KCQl9DQoJCWZvciAoaSA9IDAsIGxlbmkgPSB0aGlzLnJ1bnRpbWUudHlwZXNf
YnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuaTsgaSsrKQ0KCQl7DQoJCQl0eXBlID0gdGhpcy5ydW50
aW1lLnR5cGVzX2J5X2luZGV4W2ldOw0KCQkJaWYgKHR5cGUuZ2xvYmFsIHx8IHR5cGUucGx1Z2lu
LmlzX3dvcmxkIHx8IHR5cGUucGx1Z2luLnNpbmdsZWdsb2JhbCB8fCB0eXBlLmlzX2ZhbWlseSkN
CgkJCQljb250aW51ZTsNCgkJCWZvciAoaiA9IDAsIGxlbmogPSB0eXBlLmluc3RhbmNlcy5sZW5n
dGg7IGogPCBsZW5qOyBqKyspDQoJCQkJdGhpcy5ydW50aW1lLkRlc3Ryb3lJbnN0YW5jZSh0eXBl
Lmluc3RhbmNlc1tqXSk7DQoJCQl0aGlzLnJ1bnRpbWUuQ2xlYXJEZWF0aFJvdygpOw0KCQl9DQoJ
CWZpcnN0X2xheW91dCA9IGZhbHNlOw0KCQl0aGlzLnJ1bnRpbWUuaXNFbmRpbmdMYXlvdXQgPSBm
YWxzZTsNCgl9Ow0KCXZhciB0ZW1wX3JlY3QgPSBuZXcgY3IucmVjdCgwLCAwLCAwLCAwKTsNCglM
YXlvdXQucHJvdG90eXBlLnJlY3JlYXRlSW5pdGlhbE9iamVjdHMgPSBmdW5jdGlvbiAodHlwZSwg
eDEsIHkxLCB4MiwgeTIpDQoJew0KCQl0ZW1wX3JlY3Quc2V0KHgxLCB5MSwgeDIsIHkyKTsNCgkJ
dmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5sYXllcnMubGVuZ3RoOyBpIDwg
bGVuOyBpKyspDQoJCXsNCgkJCXRoaXMubGF5ZXJzW2ldLnJlY3JlYXRlSW5pdGlhbE9iamVjdHMo
dHlwZSwgdGVtcF9yZWN0KTsNCgkJfQ0KCX07DQoJTGF5b3V0LnByb3RvdHlwZS5kcmF3ID0gZnVu
Y3Rpb24gKGN0eCkNCgl7DQoJCXZhciBsYXlvdXRfY2FudmFzOw0KCQl2YXIgbGF5b3V0X2N0eCA9
IGN0eDsNCgkJdmFyIGN0eF9jaGFuZ2VkID0gZmFsc2U7DQoJCXZhciByZW5kZXJfb2Zmc2NyZWVu
ID0gIXRoaXMucnVudGltZS5mdWxsc2NyZWVuU2NhbGluZ1F1YWxpdHk7DQoJCWlmIChyZW5kZXJf
b2Zmc2NyZWVuKQ0KCQl7DQoJCQlpZiAoIXRoaXMucnVudGltZS5sYXlvdXRfY2FudmFzKQ0KCQkJ
ew0KCQkJCXRoaXMucnVudGltZS5sYXlvdXRfY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu
dCgiY2FudmFzIik7DQoJCQkJbGF5b3V0X2NhbnZhcyA9IHRoaXMucnVudGltZS5sYXlvdXRfY2Fu
dmFzOw0KCQkJCWxheW91dF9jYW52YXMud2lkdGggPSB0aGlzLnJ1bnRpbWUuZHJhd193aWR0aDsN
CgkJCQlsYXlvdXRfY2FudmFzLmhlaWdodCA9IHRoaXMucnVudGltZS5kcmF3X2hlaWdodDsNCgkJ
CQl0aGlzLnJ1bnRpbWUubGF5b3V0X2N0eCA9IGxheW91dF9jYW52YXMuZ2V0Q29udGV4dCgiMmQi
KTsNCgkJCQljdHhfY2hhbmdlZCA9IHRydWU7DQoJCQl9DQoJCQlsYXlvdXRfY2FudmFzID0gdGhp
cy5ydW50aW1lLmxheW91dF9jYW52YXM7DQoJCQlsYXlvdXRfY3R4ID0gdGhpcy5ydW50aW1lLmxh
eW91dF9jdHg7DQoJCQlpZiAobGF5b3V0X2NhbnZhcy53aWR0aCAhPT0gdGhpcy5ydW50aW1lLmRy
YXdfd2lkdGgpDQoJCQl7DQoJCQkJbGF5b3V0X2NhbnZhcy53aWR0aCA9IHRoaXMucnVudGltZS5k
cmF3X3dpZHRoOw0KCQkJCWN0eF9jaGFuZ2VkID0gdHJ1ZTsNCgkJCX0NCgkJCWlmIChsYXlvdXRf
Y2FudmFzLmhlaWdodCAhPT0gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0KQ0KCQkJew0KCQkJCWxh
eW91dF9jYW52YXMuaGVpZ2h0ID0gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0Ow0KCQkJCWN0eF9j
aGFuZ2VkID0gdHJ1ZTsNCgkJCX0NCgkJCWlmIChjdHhfY2hhbmdlZCkNCgkJCXsNCgkJCQl0aGlz
LnJ1bnRpbWUuc2V0Q3R4SW1hZ2VTbW9vdGhpbmdFbmFibGVkKGxheW91dF9jdHgsIHRoaXMucnVu
dGltZS5saW5lYXJTYW1wbGluZyk7DQoJCQl9DQoJCX0NCgkJbGF5b3V0X2N0eC5nbG9iYWxBbHBo
YSA9IDE7DQoJCWxheW91dF9jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1v
dmVyIjsNCgkJaWYgKHRoaXMucnVudGltZS5jbGVhckJhY2tncm91bmQgJiYgIXRoaXMuaGFzT3Bh
cXVlQm90dG9tTGF5ZXIoKSkNCgkJCWxheW91dF9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMucnVu
dGltZS5kcmF3X3dpZHRoLCB0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQpOw0KCQl2YXIgaSwgbGVu
LCBsOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVycy5sZW5ndGg7IGkgPCBsZW47IGkr
KykNCgkJew0KCQkJbCA9IHRoaXMubGF5ZXJzW2ldOw0KCQkJaWYgKGwudmlzaWJsZSAmJiBsLm9w
YWNpdHkgPiAwICYmIGwuYmxlbmRfbW9kZSAhPT0gMTEgJiYgKGwuaW5zdGFuY2VzLmxlbmd0aCB8
fCAhbC50cmFuc3BhcmVudCkpDQoJCQkJbC5kcmF3KGxheW91dF9jdHgpOw0KCQkJZWxzZQ0KCQkJ
CWwudXBkYXRlVmlld3BvcnQobnVsbCk7CQkvLyBldmVuIGlmIG5vdCBkcmF3aW5nLCBrZWVwIHZp
ZXdwb3J0IHVwIHRvIGRhdGUNCgkJfQ0KCQlpZiAocmVuZGVyX29mZnNjcmVlbikNCgkJew0KCQkJ
Y3R4LmRyYXdJbWFnZShsYXlvdXRfY2FudmFzLCAwLCAwLCB0aGlzLnJ1bnRpbWUud2lkdGgsIHRo
aXMucnVudGltZS5oZWlnaHQpOw0KCQl9DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLmRyYXdHTF9l
YXJseVpQYXNzID0gZnVuY3Rpb24gKGdsdykNCgl7DQoJCWdsdy5zZXRFYXJseVpQYXNzKHRydWUp
Ow0KCQlpZiAoIXRoaXMucnVudGltZS5sYXlvdXRfdGV4KQ0KCQl7DQoJCQl0aGlzLnJ1bnRpbWUu
bGF5b3V0X3RleCA9IGdsdy5jcmVhdGVFbXB0eVRleHR1cmUodGhpcy5ydW50aW1lLmRyYXdfd2lk
dGgsIHRoaXMucnVudGltZS5kcmF3X2hlaWdodCwgdGhpcy5ydW50aW1lLmxpbmVhclNhbXBsaW5n
KTsNCgkJfQ0KCQlpZiAodGhpcy5ydW50aW1lLmxheW91dF90ZXguYzJ3aWR0aCAhPT0gdGhpcy5y
dW50aW1lLmRyYXdfd2lkdGggfHwgdGhpcy5ydW50aW1lLmxheW91dF90ZXguYzJoZWlnaHQgIT09
IHRoaXMucnVudGltZS5kcmF3X2hlaWdodCkNCgkJew0KCQkJZ2x3LmRlbGV0ZVRleHR1cmUodGhp
cy5ydW50aW1lLmxheW91dF90ZXgpOw0KCQkJdGhpcy5ydW50aW1lLmxheW91dF90ZXggPSBnbHcu
Y3JlYXRlRW1wdHlUZXh0dXJlKHRoaXMucnVudGltZS5kcmF3X3dpZHRoLCB0aGlzLnJ1bnRpbWUu
ZHJhd19oZWlnaHQsIHRoaXMucnVudGltZS5saW5lYXJTYW1wbGluZyk7DQoJCX0NCgkJZ2x3LnNl
dFJlbmRlcmluZ1RvVGV4dHVyZSh0aGlzLnJ1bnRpbWUubGF5b3V0X3RleCk7DQoJCWlmICghdGhp
cy5ydW50aW1lLmZ1bGxzY3JlZW5TY2FsaW5nUXVhbGl0eSkNCgkJew0KCQkJZ2x3LnNldFNpemUo
dGhpcy5ydW50aW1lLmRyYXdfd2lkdGgsIHRoaXMucnVudGltZS5kcmF3X2hlaWdodCk7DQoJCX0N
CgkJdmFyIGksIGw7DQoJCWZvciAoaSA9IHRoaXMubGF5ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsg
LS1pKQ0KCQl7DQoJCQlsID0gdGhpcy5sYXllcnNbaV07DQoJCQlpZiAobC52aXNpYmxlICYmIGwu
b3BhY2l0eSA9PT0gMSAmJiBsLnNoYWRlcnNfcHJlc2VydmVfb3BhcXVlbmVzcyAmJg0KCQkJCWwu
YmxlbmRfbW9kZSA9PT0gMCAmJiAobC5pbnN0YW5jZXMubGVuZ3RoIHx8ICFsLnRyYW5zcGFyZW50
KSkNCgkJCXsNCgkJCQlsLmRyYXdHTF9lYXJseVpQYXNzKGdsdyk7DQoJCQl9DQoJCQllbHNlDQoJ
CQl7DQoJCQkJbC51cGRhdGVWaWV3cG9ydChudWxsKTsJCS8vIGV2ZW4gaWYgbm90IGRyYXdpbmcs
IGtlZXAgdmlld3BvcnQgdXAgdG8gZGF0ZQ0KCQkJfQ0KCQl9DQoJCWdsdy5zZXRFYXJseVpQYXNz
KGZhbHNlKTsNCgl9Ow0KCUxheW91dC5wcm90b3R5cGUuZHJhd0dMID0gZnVuY3Rpb24gKGdsdykN
Cgl7DQoJCXZhciByZW5kZXJfdG9fdGV4dHVyZSA9ICh0aGlzLmFjdGl2ZV9lZmZlY3RfdHlwZXMu
bGVuZ3RoID4gMCB8fA0KCQkJCQkJCQkgdGhpcy5ydW50aW1lLnVzZXNfYmFja2dyb3VuZF9ibGVu
ZGluZyB8fA0KCQkJCQkJCQkgIXRoaXMucnVudGltZS5mdWxsc2NyZWVuU2NhbGluZ1F1YWxpdHkg
fHwNCgkJCQkJCQkJIHRoaXMucnVudGltZS5lbmFibGVGcm9udFRvQmFjayk7DQoJCWlmIChyZW5k
ZXJfdG9fdGV4dHVyZSkNCgkJew0KCQkJaWYgKCF0aGlzLnJ1bnRpbWUubGF5b3V0X3RleCkNCgkJ
CXsNCgkJCQl0aGlzLnJ1bnRpbWUubGF5b3V0X3RleCA9IGdsdy5jcmVhdGVFbXB0eVRleHR1cmUo
dGhpcy5ydW50aW1lLmRyYXdfd2lkdGgsIHRoaXMucnVudGltZS5kcmF3X2hlaWdodCwgdGhpcy5y
dW50aW1lLmxpbmVhclNhbXBsaW5nKTsNCgkJCX0NCgkJCWlmICh0aGlzLnJ1bnRpbWUubGF5b3V0
X3RleC5jMndpZHRoICE9PSB0aGlzLnJ1bnRpbWUuZHJhd193aWR0aCB8fCB0aGlzLnJ1bnRpbWUu
bGF5b3V0X3RleC5jMmhlaWdodCAhPT0gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0KQ0KCQkJew0K
CQkJCWdsdy5kZWxldGVUZXh0dXJlKHRoaXMucnVudGltZS5sYXlvdXRfdGV4KTsNCgkJCQl0aGlz
LnJ1bnRpbWUubGF5b3V0X3RleCA9IGdsdy5jcmVhdGVFbXB0eVRleHR1cmUodGhpcy5ydW50aW1l
LmRyYXdfd2lkdGgsIHRoaXMucnVudGltZS5kcmF3X2hlaWdodCwgdGhpcy5ydW50aW1lLmxpbmVh
clNhbXBsaW5nKTsNCgkJCX0NCgkJCWdsdy5zZXRSZW5kZXJpbmdUb1RleHR1cmUodGhpcy5ydW50
aW1lLmxheW91dF90ZXgpOw0KCQkJaWYgKCF0aGlzLnJ1bnRpbWUuZnVsbHNjcmVlblNjYWxpbmdR
dWFsaXR5KQ0KCQkJew0KCQkJCWdsdy5zZXRTaXplKHRoaXMucnVudGltZS5kcmF3X3dpZHRoLCB0
aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQpOw0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYg
KHRoaXMucnVudGltZS5sYXlvdXRfdGV4KQ0KCQkJew0KCQkJCWdsdy5zZXRSZW5kZXJpbmdUb1Rl
eHR1cmUobnVsbCk7DQoJCQkJZ2x3LmRlbGV0ZVRleHR1cmUodGhpcy5ydW50aW1lLmxheW91dF90
ZXgpOw0KCQkJCXRoaXMucnVudGltZS5sYXlvdXRfdGV4ID0gbnVsbDsNCgkJCX0NCgkJfQ0KCQlp
ZiAodGhpcy5ydW50aW1lLmNsZWFyQmFja2dyb3VuZCAmJiAhdGhpcy5oYXNPcGFxdWVCb3R0b21M
YXllcigpKQ0KCQkJZ2x3LmNsZWFyKDAsIDAsIDAsIDApOw0KCQl2YXIgaSwgbGVuLCBsOw0KCQlm
b3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0K
CQkJbCA9IHRoaXMubGF5ZXJzW2ldOw0KCQkJaWYgKGwudmlzaWJsZSAmJiBsLm9wYWNpdHkgPiAw
ICYmIChsLmluc3RhbmNlcy5sZW5ndGggfHwgIWwudHJhbnNwYXJlbnQpKQ0KCQkJCWwuZHJhd0dM
KGdsdyk7DQoJCQllbHNlDQoJCQkJbC51cGRhdGVWaWV3cG9ydChudWxsKTsJCS8vIGV2ZW4gaWYg
bm90IGRyYXdpbmcsIGtlZXAgdmlld3BvcnQgdXAgdG8gZGF0ZQ0KCQl9DQoJCWlmIChyZW5kZXJf
dG9fdGV4dHVyZSkNCgkJew0KCQkJaWYgKHRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5sZW5ndGgg
PT09IDAgfHwNCgkJCQkodGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aCA9PT0gMSAmJiB0
aGlzLnJ1bnRpbWUuZnVsbHNjcmVlblNjYWxpbmdRdWFsaXR5KSkNCgkJCXsNCgkJCQlpZiAodGhp
cy5hY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aCA9PT0gMSkNCgkJCQl7DQoJCQkJCXZhciBldGlu
ZGV4ID0gdGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzWzBdLmluZGV4Ow0KCQkJCQlnbHcuc3dpdGNo
UHJvZ3JhbSh0aGlzLmFjdGl2ZV9lZmZlY3RfdHlwZXNbMF0uc2hhZGVyaW5kZXgpOw0KCQkJCQln
bHcuc2V0UHJvZ3JhbVBhcmFtZXRlcnMobnVsbCwJCQkJCQkJCS8vIGJhY2tUZXgNCgkJCQkJCQkJ
CQkJIDEuMCAvIHRoaXMucnVudGltZS5kcmF3X3dpZHRoLAkJLy8gcGl4ZWxXaWR0aA0KCQkJCQkJ
CQkJCQkgMS4wIC8gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0LAkvLyBwaXhlbEhlaWdodA0KCQkJ
CQkJCQkJCQkgMC4wLCAwLjAsCQkJCQkJCS8vIGRlc3RTdGFydA0KCQkJCQkJCQkJCQkgMS4wLCAx
LjAsCQkJCQkJCS8vIGRlc3RFbmQNCgkJCQkJCQkJCQkJIHRoaXMuc2NhbGUsCQkJCQkJLy8gbGF5
ZXJTY2FsZQ0KCQkJCQkJCQkJCQkgdGhpcy5hbmdsZSwJCQkJCQkvLyBsYXllckFuZ2xlDQoJCQkJ
CQkJCQkJCSAwLjAsIDAuMCwJCQkJCQkJLy8gdmlld09yaWdpbg0KCQkJCQkJCQkJCQkgdGhpcy5y
dW50aW1lLmRyYXdfd2lkdGggLyAyLCB0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQgLyAyLAkvLyBz
Y3JvbGxQb3MNCgkJCQkJCQkJCQkJIHRoaXMucnVudGltZS5rYWhhblRpbWUuc3VtLAkJLy8gc2Vj
b25kcw0KCQkJCQkJCQkJCQkgdGhpcy5lZmZlY3RfcGFyYW1zW2V0aW5kZXhdKTsJCS8vIGZ4IHBh
cmFtZXRlcnMNCgkJCQkJaWYgKGdsdy5wcm9ncmFtSXNBbmltYXRlZCh0aGlzLmFjdGl2ZV9lZmZl
Y3RfdHlwZXNbMF0uc2hhZGVyaW5kZXgpKQ0KCQkJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRy
dWU7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQkJZ2x3LnN3aXRjaFByb2dyYW0oMCk7DQoJCQkJaWYg
KCF0aGlzLnJ1bnRpbWUuZnVsbHNjcmVlblNjYWxpbmdRdWFsaXR5KQ0KCQkJCXsNCgkJCQkJZ2x3
LnNldFNpemUodGhpcy5ydW50aW1lLndpZHRoLCB0aGlzLnJ1bnRpbWUuaGVpZ2h0KTsNCgkJCQl9
DQoJCQkJZ2x3LnNldFJlbmRlcmluZ1RvVGV4dHVyZShudWxsKTsJCQkJLy8gdG8gYmFja2J1ZmZl
cg0KCQkJCWdsdy5zZXREZXB0aFRlc3RFbmFibGVkKGZhbHNlKTsJCQkJCS8vIGlnbm9yZSBkZXB0
aCBidWZmZXIsIGNvcHkgZnVsbCB0ZXh0dXJlDQoJCQkJZ2x3LnNldE9wYWNpdHkoMSk7DQoJCQkJ
Z2x3LnNldFRleHR1cmUodGhpcy5ydW50aW1lLmxheW91dF90ZXgpOw0KCQkJCWdsdy5zZXRBbHBo
YUJsZW5kKCk7DQoJCQkJZ2x3LnJlc2V0TW9kZWxWaWV3KCk7DQoJCQkJZ2x3LnVwZGF0ZU1vZGVs
VmlldygpOw0KCQkJCXZhciBoYWxmdyA9IHRoaXMucnVudGltZS53aWR0aCAvIDI7DQoJCQkJdmFy
IGhhbGZoID0gdGhpcy5ydW50aW1lLmhlaWdodCAvIDI7DQoJCQkJZ2x3LnF1YWQoLWhhbGZ3LCBo
YWxmaCwgaGFsZncsIGhhbGZoLCBoYWxmdywgLWhhbGZoLCAtaGFsZncsIC1oYWxmaCk7DQoJCQkJ
Z2x3LnNldFRleHR1cmUobnVsbCk7DQoJCQkJZ2x3LnNldERlcHRoVGVzdEVuYWJsZWQodHJ1ZSk7
CQkJCQkvLyB0dXJuIGRlcHRoIHRlc3QgYmFjayBvbg0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJ
CXRoaXMucmVuZGVyRWZmZWN0Q2hhaW4oZ2x3LCBudWxsLCBudWxsLCBudWxsKTsNCgkJCX0NCgkJ
fQ0KCX07DQoJTGF5b3V0LnByb3RvdHlwZS5nZXRSZW5kZXJUYXJnZXQgPSBmdW5jdGlvbigpDQoJ
ew0KCQlpZiAodGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aCA+IDAgfHwNCgkJCQl0aGlz
LnJ1bnRpbWUudXNlc19iYWNrZ3JvdW5kX2JsZW5kaW5nIHx8DQoJCQkJIXRoaXMucnVudGltZS5m
dWxsc2NyZWVuU2NhbGluZ1F1YWxpdHkgfHwNCgkJCQl0aGlzLnJ1bnRpbWUuZW5hYmxlRnJvbnRU
b0JhY2spDQoJCXsNCgkJCXJldHVybiB0aGlzLnJ1bnRpbWUubGF5b3V0X3RleDsNCgkJfQ0KCQll
bHNlDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLmdl
dE1pbkxheWVyU2NhbGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIG0gPSB0aGlzLmxheWVyc1sw
XS5nZXRTY2FsZSgpOw0KCQl2YXIgaSwgbGVuLCBsOw0KCQlmb3IgKGkgPSAxLCBsZW4gPSB0aGlz
LmxheWVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJbCA9IHRoaXMubGF5ZXJzW2ld
Ow0KCQkJaWYgKGwucGFyYWxsYXhYID09PSAwICYmIGwucGFyYWxsYXhZID09PSAwKQ0KCQkJCWNv
bnRpbnVlOw0KCQkJaWYgKGwuZ2V0U2NhbGUoKSA8IG0pDQoJCQkJbSA9IGwuZ2V0U2NhbGUoKTsN
CgkJfQ0KCQlyZXR1cm4gbTsNCgl9Ow0KCUxheW91dC5wcm90b3R5cGUuc2Nyb2xsVG9YID0gZnVu
Y3Rpb24gKHgpDQoJew0KCQlpZiAoIXRoaXMudW5ib3VuZGVkX3Njcm9sbGluZykNCgkJew0KCQkJ
dmFyIHdpZHRoQm91bmRhcnkgPSAodGhpcy5ydW50aW1lLmRyYXdfd2lkdGggKiAoMSAvIHRoaXMu
Z2V0TWluTGF5ZXJTY2FsZSgpKSAvIDIpOw0KCQkJaWYgKHggPiB0aGlzLndpZHRoIC0gd2lkdGhC
b3VuZGFyeSkNCgkJCQl4ID0gdGhpcy53aWR0aCAtIHdpZHRoQm91bmRhcnk7DQoJCQlpZiAoeCA8
IHdpZHRoQm91bmRhcnkpDQoJCQkJeCA9IHdpZHRoQm91bmRhcnk7DQoJCX0NCgkJaWYgKHRoaXMu
c2Nyb2xsWCAhPT0geCkNCgkJew0KCQkJdGhpcy5zY3JvbGxYID0geDsNCgkJCXRoaXMucnVudGlt
ZS5yZWRyYXcgPSB0cnVlOw0KCQl9DQoJfTsNCglMYXlvdXQucHJvdG90eXBlLnNjcm9sbFRvWSA9
IGZ1bmN0aW9uICh5KQ0KCXsNCgkJaWYgKCF0aGlzLnVuYm91bmRlZF9zY3JvbGxpbmcpDQoJCXsN
CgkJCXZhciBoZWlnaHRCb3VuZGFyeSA9ICh0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQgKiAoMSAv
IHRoaXMuZ2V0TWluTGF5ZXJTY2FsZSgpKSAvIDIpOw0KCQkJaWYgKHkgPiB0aGlzLmhlaWdodCAt
IGhlaWdodEJvdW5kYXJ5KQ0KCQkJCXkgPSB0aGlzLmhlaWdodCAtIGhlaWdodEJvdW5kYXJ5Ow0K
CQkJaWYgKHkgPCBoZWlnaHRCb3VuZGFyeSkNCgkJCQl5ID0gaGVpZ2h0Qm91bmRhcnk7DQoJCX0N
CgkJaWYgKHRoaXMuc2Nyb2xsWSAhPT0geSkNCgkJew0KCQkJdGhpcy5zY3JvbGxZID0geTsNCgkJ
CXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCQl9DQoJfTsNCglMYXlvdXQucHJvdG90eXBl
LmJvdW5kU2Nyb2xsaW5nID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuc2Nyb2xsVG9YKHRoaXMu
c2Nyb2xsWCk7DQoJCXRoaXMuc2Nyb2xsVG9ZKHRoaXMuc2Nyb2xsWSk7DQoJfTsNCglMYXlvdXQu
cHJvdG90eXBlLnJlbmRlckVmZmVjdENoYWluID0gZnVuY3Rpb24gKGdsdywgbGF5ZXIsIGluc3Qs
IHJlbmRlcnRhcmdldCkNCgl7DQoJCXZhciBhY3RpdmVfZWZmZWN0X3R5cGVzID0gaW5zdCA/DQoJ
CQkJCQkJaW5zdC5hY3RpdmVfZWZmZWN0X3R5cGVzIDoNCgkJCQkJCQlsYXllciA/DQoJCQkJCQkJ
CWxheWVyLmFjdGl2ZV9lZmZlY3RfdHlwZXMgOg0KCQkJCQkJCQl0aGlzLmFjdGl2ZV9lZmZlY3Rf
dHlwZXM7DQoJCXZhciBsYXllclNjYWxlID0gMSwgbGF5ZXJBbmdsZSA9IDAsIHZpZXdPcmlnaW5M
ZWZ0ID0gMCwgdmlld09yaWdpblRvcCA9IDAsIHZpZXdPcmlnaW5SaWdodCA9IHRoaXMucnVudGlt
ZS5kcmF3X3dpZHRoLCB2aWV3T3JpZ2luQm90dG9tID0gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0
Ow0KCQlpZiAoaW5zdCkNCgkJew0KCQkJbGF5ZXJTY2FsZSA9IGluc3QubGF5ZXIuZ2V0U2NhbGUo
KTsNCgkJCWxheWVyQW5nbGUgPSBpbnN0LmxheWVyLmdldEFuZ2xlKCk7DQoJCQl2aWV3T3JpZ2lu
TGVmdCA9IGluc3QubGF5ZXIudmlld0xlZnQ7DQoJCQl2aWV3T3JpZ2luVG9wID0gaW5zdC5sYXll
ci52aWV3VG9wOw0KCQkJdmlld09yaWdpblJpZ2h0ID0gaW5zdC5sYXllci52aWV3UmlnaHQ7DQoJ
CQl2aWV3T3JpZ2luQm90dG9tID0gaW5zdC5sYXllci52aWV3Qm90dG9tOw0KCQl9DQoJCWVsc2Ug
aWYgKGxheWVyKQ0KCQl7DQoJCQlsYXllclNjYWxlID0gbGF5ZXIuZ2V0U2NhbGUoKTsNCgkJCWxh
eWVyQW5nbGUgPSBsYXllci5nZXRBbmdsZSgpOw0KCQkJdmlld09yaWdpbkxlZnQgPSBsYXllci52
aWV3TGVmdDsNCgkJCXZpZXdPcmlnaW5Ub3AgPSBsYXllci52aWV3VG9wOw0KCQkJdmlld09yaWdp
blJpZ2h0ID0gbGF5ZXIudmlld1JpZ2h0Ow0KCQkJdmlld09yaWdpbkJvdHRvbSA9IGxheWVyLnZp
ZXdCb3R0b207DQoJCX0NCgkJdmFyIGZ4X3RleCA9IHRoaXMucnVudGltZS5meF90ZXg7DQoJCXZh
ciBpLCBsZW4sIGxhc3QsIHRlbXAsIGZ4X2luZGV4ID0gMCwgb3RoZXJfZnhfaW5kZXggPSAxOw0K
CQl2YXIgeSwgaDsNCgkJdmFyIHdpbmRvd1dpZHRoID0gdGhpcy5ydW50aW1lLmRyYXdfd2lkdGg7
DQoJCXZhciB3aW5kb3dIZWlnaHQgPSB0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQ7DQoJCXZhciBo
YWxmdyA9IHdpbmRvd1dpZHRoIC8gMjsNCgkJdmFyIGhhbGZoID0gd2luZG93SGVpZ2h0IC8gMjsN
CgkJdmFyIHJjVGV4ID0gbGF5ZXIgPyBsYXllci5yY1RleCA6IHRoaXMucmNUZXg7DQoJCXZhciBy
Y1RleDIgPSBsYXllciA/IGxheWVyLnJjVGV4MiA6IHRoaXMucmNUZXgyOw0KCQl2YXIgc2NyZWVu
bGVmdCA9IDAsIGNsZWFybGVmdCA9IDA7DQoJCXZhciBzY3JlZW50b3AgPSAwLCBjbGVhcnRvcCA9
IDA7DQoJCXZhciBzY3JlZW5yaWdodCA9IHdpbmRvd1dpZHRoLCBjbGVhcnJpZ2h0ID0gd2luZG93
V2lkdGg7DQoJCXZhciBzY3JlZW5ib3R0b20gPSB3aW5kb3dIZWlnaHQsIGNsZWFyYm90dG9tID0g
d2luZG93SGVpZ2h0Ow0KCQl2YXIgYm94RXh0ZW5kSG9yaXpvbnRhbCA9IDA7DQoJCXZhciBib3hF
eHRlbmRWZXJ0aWNhbCA9IDA7DQoJCXZhciBpbnN0X2xheWVyX2FuZ2xlID0gaW5zdCA/IGluc3Qu
bGF5ZXIuZ2V0QW5nbGUoKSA6IDA7DQoJCWlmIChpbnN0KQ0KCQl7DQoJCQlmb3IgKGkgPSAwLCBs
ZW4gPSBhY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJ
CWJveEV4dGVuZEhvcml6b250YWwgKz0gZ2x3LmdldFByb2dyYW1Cb3hFeHRlbmRIb3Jpem9udGFs
KGFjdGl2ZV9lZmZlY3RfdHlwZXNbaV0uc2hhZGVyaW5kZXgpOw0KCQkJCWJveEV4dGVuZFZlcnRp
Y2FsICs9IGdsdy5nZXRQcm9ncmFtQm94RXh0ZW5kVmVydGljYWwoYWN0aXZlX2VmZmVjdF90eXBl
c1tpXS5zaGFkZXJpbmRleCk7DQoJCQl9DQoJCQl2YXIgYmJveCA9IGluc3QuYmJveDsNCgkJCXNj
cmVlbmxlZnQgPSBsYXllci5sYXllclRvQ2FudmFzKGJib3gubGVmdCwgYmJveC50b3AsIHRydWUs
IHRydWUpOw0KCQkJc2NyZWVudG9wID0gbGF5ZXIubGF5ZXJUb0NhbnZhcyhiYm94LmxlZnQsIGJi
b3gudG9wLCBmYWxzZSwgdHJ1ZSk7DQoJCQlzY3JlZW5yaWdodCA9IGxheWVyLmxheWVyVG9DYW52
YXMoYmJveC5yaWdodCwgYmJveC5ib3R0b20sIHRydWUsIHRydWUpOw0KCQkJc2NyZWVuYm90dG9t
ID0gbGF5ZXIubGF5ZXJUb0NhbnZhcyhiYm94LnJpZ2h0LCBiYm94LmJvdHRvbSwgZmFsc2UsIHRy
dWUpOw0KCQkJaWYgKGluc3RfbGF5ZXJfYW5nbGUgIT09IDApDQoJCQl7DQoJCQkJdmFyIHNjcmVl
bnRyeCA9IGxheWVyLmxheWVyVG9DYW52YXMoYmJveC5yaWdodCwgYmJveC50b3AsIHRydWUsIHRy
dWUpOw0KCQkJCXZhciBzY3JlZW50cnkgPSBsYXllci5sYXllclRvQ2FudmFzKGJib3gucmlnaHQs
IGJib3gudG9wLCBmYWxzZSwgdHJ1ZSk7DQoJCQkJdmFyIHNjcmVlbmJseCA9IGxheWVyLmxheWVy
VG9DYW52YXMoYmJveC5sZWZ0LCBiYm94LmJvdHRvbSwgdHJ1ZSwgdHJ1ZSk7DQoJCQkJdmFyIHNj
cmVlbmJseSA9IGxheWVyLmxheWVyVG9DYW52YXMoYmJveC5sZWZ0LCBiYm94LmJvdHRvbSwgZmFs
c2UsIHRydWUpOw0KCQkJCXRlbXAgPSBNYXRoLm1pbihzY3JlZW5sZWZ0LCBzY3JlZW5yaWdodCwg
c2NyZWVudHJ4LCBzY3JlZW5ibHgpOw0KCQkJCXNjcmVlbnJpZ2h0ID0gTWF0aC5tYXgoc2NyZWVu
bGVmdCwgc2NyZWVucmlnaHQsIHNjcmVlbnRyeCwgc2NyZWVuYmx4KTsNCgkJCQlzY3JlZW5sZWZ0
ID0gdGVtcDsNCgkJCQl0ZW1wID0gTWF0aC5taW4oc2NyZWVudG9wLCBzY3JlZW5ib3R0b20sIHNj
cmVlbnRyeSwgc2NyZWVuYmx5KTsNCgkJCQlzY3JlZW5ib3R0b20gPSBNYXRoLm1heChzY3JlZW50
b3AsIHNjcmVlbmJvdHRvbSwgc2NyZWVudHJ5LCBzY3JlZW5ibHkpOw0KCQkJCXNjcmVlbnRvcCA9
IHRlbXA7DQoJCQl9DQoJCQlzY3JlZW5sZWZ0IC09IGJveEV4dGVuZEhvcml6b250YWw7DQoJCQlz
Y3JlZW50b3AgLT0gYm94RXh0ZW5kVmVydGljYWw7DQoJCQlzY3JlZW5yaWdodCArPSBib3hFeHRl
bmRIb3Jpem9udGFsOw0KCQkJc2NyZWVuYm90dG9tICs9IGJveEV4dGVuZFZlcnRpY2FsOw0KCQkJ
cmNUZXgyLmxlZnQgPSBzY3JlZW5sZWZ0IC8gd2luZG93V2lkdGg7DQoJCQlyY1RleDIudG9wID0g
MSAtIHNjcmVlbnRvcCAvIHdpbmRvd0hlaWdodDsNCgkJCXJjVGV4Mi5yaWdodCA9IHNjcmVlbnJp
Z2h0IC8gd2luZG93V2lkdGg7DQoJCQlyY1RleDIuYm90dG9tID0gMSAtIHNjcmVlbmJvdHRvbSAv
IHdpbmRvd0hlaWdodDsNCgkJCWNsZWFybGVmdCA9IHNjcmVlbmxlZnQgPSBjci5mbG9vcihzY3Jl
ZW5sZWZ0KTsNCgkJCWNsZWFydG9wID0gc2NyZWVudG9wID0gY3IuZmxvb3Ioc2NyZWVudG9wKTsN
CgkJCWNsZWFycmlnaHQgPSBzY3JlZW5yaWdodCA9IGNyLmNlaWwoc2NyZWVucmlnaHQpOw0KCQkJ
Y2xlYXJib3R0b20gPSBzY3JlZW5ib3R0b20gPSBjci5jZWlsKHNjcmVlbmJvdHRvbSk7DQoJCQlj
bGVhcmxlZnQgLT0gYm94RXh0ZW5kSG9yaXpvbnRhbDsNCgkJCWNsZWFydG9wIC09IGJveEV4dGVu
ZFZlcnRpY2FsOw0KCQkJY2xlYXJyaWdodCArPSBib3hFeHRlbmRIb3Jpem9udGFsOw0KCQkJY2xl
YXJib3R0b20gKz0gYm94RXh0ZW5kVmVydGljYWw7DQoJCQlpZiAoc2NyZWVubGVmdCA8IDApCQkJ
CQlzY3JlZW5sZWZ0ID0gMDsNCgkJCWlmIChzY3JlZW50b3AgPCAwKQkJCQkJc2NyZWVudG9wID0g
MDsNCgkJCWlmIChzY3JlZW5yaWdodCA+IHdpbmRvd1dpZHRoKQkJc2NyZWVucmlnaHQgPSB3aW5k
b3dXaWR0aDsNCgkJCWlmIChzY3JlZW5ib3R0b20gPiB3aW5kb3dIZWlnaHQpCXNjcmVlbmJvdHRv
bSA9IHdpbmRvd0hlaWdodDsNCgkJCWlmIChjbGVhcmxlZnQgPCAwKQkJCQkJY2xlYXJsZWZ0ID0g
MDsNCgkJCWlmIChjbGVhcnRvcCA8IDApCQkJCQljbGVhcnRvcCA9IDA7DQoJCQlpZiAoY2xlYXJy
aWdodCA+IHdpbmRvd1dpZHRoKQkJY2xlYXJyaWdodCA9IHdpbmRvd1dpZHRoOw0KCQkJaWYgKGNs
ZWFyYm90dG9tID4gd2luZG93SGVpZ2h0KQkJY2xlYXJib3R0b20gPSB3aW5kb3dIZWlnaHQ7DQoJ
CQlyY1RleC5sZWZ0ID0gc2NyZWVubGVmdCAvIHdpbmRvd1dpZHRoOw0KCQkJcmNUZXgudG9wID0g
MSAtIHNjcmVlbnRvcCAvIHdpbmRvd0hlaWdodDsNCgkJCXJjVGV4LnJpZ2h0ID0gc2NyZWVucmln
aHQgLyB3aW5kb3dXaWR0aDsNCgkJCXJjVGV4LmJvdHRvbSA9IDEgLSBzY3JlZW5ib3R0b20gLyB3
aW5kb3dIZWlnaHQ7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlyY1RleC5sZWZ0ID0gcmNUZXgyLmxl
ZnQgPSAwOw0KCQkJcmNUZXgudG9wID0gcmNUZXgyLnRvcCA9IDA7DQoJCQlyY1RleC5yaWdodCA9
IHJjVGV4Mi5yaWdodCA9IDE7DQoJCQlyY1RleC5ib3R0b20gPSByY1RleDIuYm90dG9tID0gMTsN
CgkJfQ0KCQl2YXIgcHJlX2RyYXcgPSAoaW5zdCAmJiAoZ2x3LnByb2dyYW1Vc2VzRGVzdChhY3Rp
dmVfZWZmZWN0X3R5cGVzWzBdLnNoYWRlcmluZGV4KSB8fCBib3hFeHRlbmRIb3Jpem9udGFsICE9
PSAwIHx8IGJveEV4dGVuZFZlcnRpY2FsICE9PSAwIHx8IGluc3Qub3BhY2l0eSAhPT0gMSB8fCBp
bnN0LnR5cGUucGx1Z2luLm11c3RfcHJlZHJhdykpIHx8IChsYXllciAmJiAhaW5zdCAmJiBsYXll
ci5vcGFjaXR5ICE9PSAxKTsNCgkJZ2x3LnNldEFscGhhQmxlbmQoKTsNCgkJaWYgKHByZV9kcmF3
KQ0KCQl7DQoJCQlpZiAoIWZ4X3RleFtmeF9pbmRleF0pDQoJCQl7DQoJCQkJZnhfdGV4W2Z4X2lu
ZGV4XSA9IGdsdy5jcmVhdGVFbXB0eVRleHR1cmUod2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCwg
dGhpcy5ydW50aW1lLmxpbmVhclNhbXBsaW5nKTsNCgkJCX0NCgkJCWlmIChmeF90ZXhbZnhfaW5k
ZXhdLmMyd2lkdGggIT09IHdpbmRvd1dpZHRoIHx8IGZ4X3RleFtmeF9pbmRleF0uYzJoZWlnaHQg
IT09IHdpbmRvd0hlaWdodCkNCgkJCXsNCgkJCQlnbHcuZGVsZXRlVGV4dHVyZShmeF90ZXhbZnhf
aW5kZXhdKTsNCgkJCQlmeF90ZXhbZnhfaW5kZXhdID0gZ2x3LmNyZWF0ZUVtcHR5VGV4dHVyZSh3
aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0LCB0aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcpOw0K
CQkJfQ0KCQkJZ2x3LnN3aXRjaFByb2dyYW0oMCk7DQoJCQlnbHcuc2V0UmVuZGVyaW5nVG9UZXh0
dXJlKGZ4X3RleFtmeF9pbmRleF0pOw0KCQkJaCA9IGNsZWFyYm90dG9tIC0gY2xlYXJ0b3A7DQoJ
CQl5ID0gKHdpbmRvd0hlaWdodCAtIGNsZWFydG9wKSAtIGg7DQoJCQlnbHcuY2xlYXJSZWN0KGNs
ZWFybGVmdCwgeSwgY2xlYXJyaWdodCAtIGNsZWFybGVmdCwgaCk7DQoJCQlpZiAoaW5zdCkNCgkJ
CXsNCgkJCQlpbnN0LmRyYXdHTChnbHcpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWdsdy5z
ZXRUZXh0dXJlKHRoaXMucnVudGltZS5sYXllcl90ZXgpOw0KCQkJCWdsdy5zZXRPcGFjaXR5KGxh
eWVyLm9wYWNpdHkpOw0KCQkJCWdsdy5yZXNldE1vZGVsVmlldygpOw0KCQkJCWdsdy50cmFuc2xh
dGUoLWhhbGZ3LCAtaGFsZmgpOw0KCQkJCWdsdy51cGRhdGVNb2RlbFZpZXcoKTsNCgkJCQlnbHcu
cXVhZFRleChzY3JlZW5sZWZ0LCBzY3JlZW5ib3R0b20sIHNjcmVlbnJpZ2h0LCBzY3JlZW5ib3R0
b20sIHNjcmVlbnJpZ2h0LCBzY3JlZW50b3AsIHNjcmVlbmxlZnQsIHNjcmVlbnRvcCwgcmNUZXgp
Ow0KCQkJfQ0KCQkJcmNUZXgyLmxlZnQgPSByY1RleDIudG9wID0gMDsNCgkJCXJjVGV4Mi5yaWdo
dCA9IHJjVGV4Mi5ib3R0b20gPSAxOw0KCQkJaWYgKGluc3QpDQoJCQl7DQoJCQkJdGVtcCA9IHJj
VGV4LnRvcDsNCgkJCQlyY1RleC50b3AgPSByY1RleC5ib3R0b207DQoJCQkJcmNUZXguYm90dG9t
ID0gdGVtcDsNCgkJCX0NCgkJCWZ4X2luZGV4ID0gMTsNCgkJCW90aGVyX2Z4X2luZGV4ID0gMDsN
CgkJfQ0KCQlnbHcuc2V0T3BhY2l0eSgxKTsNCgkJdmFyIGxhc3QgPSBhY3RpdmVfZWZmZWN0X3R5
cGVzLmxlbmd0aCAtIDE7DQoJCXZhciBwb3N0X2RyYXcgPSBnbHcucHJvZ3JhbVVzZXNDcm9zc1Nh
bXBsaW5nKGFjdGl2ZV9lZmZlY3RfdHlwZXNbbGFzdF0uc2hhZGVyaW5kZXgpIHx8DQoJCQkJCQko
IWxheWVyICYmICFpbnN0ICYmICF0aGlzLnJ1bnRpbWUuZnVsbHNjcmVlblNjYWxpbmdRdWFsaXR5
KTsNCgkJdmFyIGV0aW5kZXggPSAwOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhY3RpdmVfZWZmZWN0
X3R5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpZiAoIWZ4X3RleFtmeF9pbmRl
eF0pDQoJCQl7DQoJCQkJZnhfdGV4W2Z4X2luZGV4XSA9IGdsdy5jcmVhdGVFbXB0eVRleHR1cmUo
d2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCwgdGhpcy5ydW50aW1lLmxpbmVhclNhbXBsaW5nKTsN
CgkJCX0NCgkJCWlmIChmeF90ZXhbZnhfaW5kZXhdLmMyd2lkdGggIT09IHdpbmRvd1dpZHRoIHx8
IGZ4X3RleFtmeF9pbmRleF0uYzJoZWlnaHQgIT09IHdpbmRvd0hlaWdodCkNCgkJCXsNCgkJCQln
bHcuZGVsZXRlVGV4dHVyZShmeF90ZXhbZnhfaW5kZXhdKTsNCgkJCQlmeF90ZXhbZnhfaW5kZXhd
ID0gZ2x3LmNyZWF0ZUVtcHR5VGV4dHVyZSh3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0LCB0aGlz
LnJ1bnRpbWUubGluZWFyU2FtcGxpbmcpOw0KCQkJfQ0KCQkJZ2x3LnN3aXRjaFByb2dyYW0oYWN0
aXZlX2VmZmVjdF90eXBlc1tpXS5zaGFkZXJpbmRleCk7DQoJCQlldGluZGV4ID0gYWN0aXZlX2Vm
ZmVjdF90eXBlc1tpXS5pbmRleDsNCgkJCWlmIChnbHcucHJvZ3JhbUlzQW5pbWF0ZWQoYWN0aXZl
X2VmZmVjdF90eXBlc1tpXS5zaGFkZXJpbmRleCkpDQoJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9
IHRydWU7DQoJCQlpZiAoaSA9PSAwICYmICFwcmVfZHJhdykNCgkJCXsNCgkJCQlnbHcuc2V0UmVu
ZGVyaW5nVG9UZXh0dXJlKGZ4X3RleFtmeF9pbmRleF0pOw0KCQkJCWggPSBjbGVhcmJvdHRvbSAt
IGNsZWFydG9wOw0KCQkJCXkgPSAod2luZG93SGVpZ2h0IC0gY2xlYXJ0b3ApIC0gaDsNCgkJCQln
bHcuY2xlYXJSZWN0KGNsZWFybGVmdCwgeSwgY2xlYXJyaWdodCAtIGNsZWFybGVmdCwgaCk7DQoJ
CQkJaWYgKGluc3QpDQoJCQkJew0KCQkJCQl2YXIgcGl4ZWxXaWR0aDsNCgkJCQkJdmFyIHBpeGVs
SGVpZ2h0Ow0KCQkJCQlpZiAoaW5zdC5jdXJGcmFtZSAmJiBpbnN0LmN1ckZyYW1lLnRleHR1cmVf
aW1nKQ0KCQkJCQl7DQoJCQkJCQl2YXIgaW1nID0gaW5zdC5jdXJGcmFtZS50ZXh0dXJlX2ltZzsN
CgkJCQkJCXBpeGVsV2lkdGggPSAxLjAgLyBpbWcud2lkdGg7DQoJCQkJCQlwaXhlbEhlaWdodCA9
IDEuMCAvIGltZy5oZWlnaHQ7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlwaXhl
bFdpZHRoID0gMS4wIC8gaW5zdC53aWR0aDsNCgkJCQkJCXBpeGVsSGVpZ2h0ID0gMS4wIC8gaW5z
dC5oZWlnaHQ7DQoJCQkJCX0NCgkJCQkJZ2x3LnNldFByb2dyYW1QYXJhbWV0ZXJzKHJlbmRlcnRh
cmdldCwJCQkJCS8vIGJhY2tUZXgNCgkJCQkJCQkJCQkJIHBpeGVsV2lkdGgsDQoJCQkJCQkJCQkJ
CSBwaXhlbEhlaWdodCwNCgkJCQkJCQkJCQkJIHJjVGV4Mi5sZWZ0LCByY1RleDIudG9wLAkJLy8g
ZGVzdFN0YXJ0DQoJCQkJCQkJCQkJCSByY1RleDIucmlnaHQsIHJjVGV4Mi5ib3R0b20sCS8vIGRl
c3RFbmQNCgkJCQkJCQkJCQkJIGxheWVyU2NhbGUsDQoJCQkJCQkJCQkJCSBsYXllckFuZ2xlLA0K
CQkJCQkJCQkJCQkgdmlld09yaWdpbkxlZnQsIHZpZXdPcmlnaW5Ub3AsDQoJCQkJCQkJCQkJCSAo
dmlld09yaWdpbkxlZnQgKyB2aWV3T3JpZ2luUmlnaHQpIC8gMiwgKHZpZXdPcmlnaW5Ub3AgKyB2
aWV3T3JpZ2luQm90dG9tKSAvIDIsDQoJCQkJCQkJCQkJCSB0aGlzLnJ1bnRpbWUua2FoYW5UaW1l
LnN1bSwNCgkJCQkJCQkJCQkJIGluc3QuZWZmZWN0X3BhcmFtc1tldGluZGV4XSk7CS8vIGZ4IHBh
cmFtcw0KCQkJCQlpbnN0LmRyYXdHTChnbHcpOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJ
CQlnbHcuc2V0UHJvZ3JhbVBhcmFtZXRlcnMocmVuZGVydGFyZ2V0LAkJCQkJLy8gYmFja1RleA0K
CQkJCQkJCQkJCQkgMS4wIC8gd2luZG93V2lkdGgsCQkJCS8vIHBpeGVsV2lkdGgNCgkJCQkJCQkJ
CQkJIDEuMCAvIHdpbmRvd0hlaWdodCwJCQkvLyBwaXhlbEhlaWdodA0KCQkJCQkJCQkJCQkgMC4w
LCAwLjAsCQkJCQkJLy8gZGVzdFN0YXJ0DQoJCQkJCQkJCQkJCSAxLjAsIDEuMCwJCQkJCQkvLyBk
ZXN0RW5kDQoJCQkJCQkJCQkJCSBsYXllclNjYWxlLA0KCQkJCQkJCQkJCQkgbGF5ZXJBbmdsZSwN
CgkJCQkJCQkJCQkJIHZpZXdPcmlnaW5MZWZ0LCB2aWV3T3JpZ2luVG9wLA0KCQkJCQkJCQkJCQkg
KHZpZXdPcmlnaW5MZWZ0ICsgdmlld09yaWdpblJpZ2h0KSAvIDIsICh2aWV3T3JpZ2luVG9wICsg
dmlld09yaWdpbkJvdHRvbSkgLyAyLA0KCQkJCQkJCQkJCQkgdGhpcy5ydW50aW1lLmthaGFuVGlt
ZS5zdW0sDQoJCQkJCQkJCQkJCSBsYXllciA/CQkJCQkJLy8gZnggcGFyYW1zDQoJCQkJCQkJCQkJ
CQlsYXllci5lZmZlY3RfcGFyYW1zW2V0aW5kZXhdIDoNCgkJCQkJCQkJCQkJCXRoaXMuZWZmZWN0
X3BhcmFtc1tldGluZGV4XSk7DQoJCQkJCWdsdy5zZXRUZXh0dXJlKGxheWVyID8gdGhpcy5ydW50
aW1lLmxheWVyX3RleCA6IHRoaXMucnVudGltZS5sYXlvdXRfdGV4KTsNCgkJCQkJZ2x3LnJlc2V0
TW9kZWxWaWV3KCk7DQoJCQkJCWdsdy50cmFuc2xhdGUoLWhhbGZ3LCAtaGFsZmgpOw0KCQkJCQln
bHcudXBkYXRlTW9kZWxWaWV3KCk7DQoJCQkJCWdsdy5xdWFkVGV4KHNjcmVlbmxlZnQsIHNjcmVl
bmJvdHRvbSwgc2NyZWVucmlnaHQsIHNjcmVlbmJvdHRvbSwgc2NyZWVucmlnaHQsIHNjcmVlbnRv
cCwgc2NyZWVubGVmdCwgc2NyZWVudG9wLCByY1RleCk7DQoJCQkJfQ0KCQkJCXJjVGV4Mi5sZWZ0
ID0gcmNUZXgyLnRvcCA9IDA7DQoJCQkJcmNUZXgyLnJpZ2h0ID0gcmNUZXgyLmJvdHRvbSA9IDE7
DQoJCQkJaWYgKGluc3QgJiYgIXBvc3RfZHJhdykNCgkJCQl7DQoJCQkJCXRlbXAgPSBzY3JlZW5i
b3R0b207DQoJCQkJCXNjcmVlbmJvdHRvbSA9IHNjcmVlbnRvcDsNCgkJCQkJc2NyZWVudG9wID0g
dGVtcDsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJZ2x3LnNldFByb2dyYW1QYXJh
bWV0ZXJzKHJlbmRlcnRhcmdldCwJCQkJCQkvLyBiYWNrVGV4DQoJCQkJCQkJCQkJIDEuMCAvIHdp
bmRvd1dpZHRoLAkJCQkJLy8gcGl4ZWxXaWR0aA0KCQkJCQkJCQkJCSAxLjAgLyB3aW5kb3dIZWln
aHQsCQkJCS8vIHBpeGVsSGVpZ2h0DQoJCQkJCQkJCQkJIHJjVGV4Mi5sZWZ0LCByY1RleDIudG9w
LAkJCS8vIGRlc3RTdGFydA0KCQkJCQkJCQkJCSByY1RleDIucmlnaHQsIHJjVGV4Mi5ib3R0b20s
CQkvLyBkZXN0RW5kDQoJCQkJCQkJCQkJIGxheWVyU2NhbGUsDQoJCQkJCQkJCQkJIGxheWVyQW5n
bGUsDQoJCQkJCQkJCQkJIHZpZXdPcmlnaW5MZWZ0LCB2aWV3T3JpZ2luVG9wLA0KCQkJCQkJCQkJ
CSAodmlld09yaWdpbkxlZnQgKyB2aWV3T3JpZ2luUmlnaHQpIC8gMiwgKHZpZXdPcmlnaW5Ub3Ag
KyB2aWV3T3JpZ2luQm90dG9tKSAvIDIsDQoJCQkJCQkJCQkJIHRoaXMucnVudGltZS5rYWhhblRp
bWUuc3VtLA0KCQkJCQkJCQkJCSBpbnN0ID8JCQkJCQkJCS8vIGZ4IHBhcmFtcw0KCQkJCQkJCQkJ
CQlpbnN0LmVmZmVjdF9wYXJhbXNbZXRpbmRleF0gOg0KCQkJCQkJCQkJCQlsYXllciA/DQoJCQkJ
CQkJCQkJCQlsYXllci5lZmZlY3RfcGFyYW1zW2V0aW5kZXhdIDoNCgkJCQkJCQkJCQkJCXRoaXMu
ZWZmZWN0X3BhcmFtc1tldGluZGV4XSk7DQoJCQkJZ2x3LnNldFRleHR1cmUobnVsbCk7DQoJCQkJ
aWYgKGkgPT09IGxhc3QgJiYgIXBvc3RfZHJhdykNCgkJCQl7DQoJCQkJCWlmIChpbnN0KQ0KCQkJ
CQkJZ2x3LnNldEJsZW5kKGluc3Quc3JjQmxlbmQsIGluc3QuZGVzdEJsZW5kKTsNCgkJCQkJZWxz
ZSBpZiAobGF5ZXIpDQoJCQkJCQlnbHcuc2V0QmxlbmQobGF5ZXIuc3JjQmxlbmQsIGxheWVyLmRl
c3RCbGVuZCk7DQoJCQkJCWdsdy5zZXRSZW5kZXJpbmdUb1RleHR1cmUocmVuZGVydGFyZ2V0KTsN
CgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJZ2x3LnNldFJlbmRlcmluZ1RvVGV4dHVyZShm
eF90ZXhbZnhfaW5kZXhdKTsNCgkJCQkJaCA9IGNsZWFyYm90dG9tIC0gY2xlYXJ0b3A7DQoJCQkJ
CXkgPSAod2luZG93SGVpZ2h0IC0gY2xlYXJ0b3ApIC0gaDsNCgkJCQkJZ2x3LmNsZWFyUmVjdChj
bGVhcmxlZnQsIHksIGNsZWFycmlnaHQgLSBjbGVhcmxlZnQsIGgpOw0KCQkJCX0NCgkJCQlnbHcu
c2V0VGV4dHVyZShmeF90ZXhbb3RoZXJfZnhfaW5kZXhdKTsNCgkJCQlnbHcucmVzZXRNb2RlbFZp
ZXcoKTsNCgkJCQlnbHcudHJhbnNsYXRlKC1oYWxmdywgLWhhbGZoKTsNCgkJCQlnbHcudXBkYXRl
TW9kZWxWaWV3KCk7DQoJCQkJZ2x3LnF1YWRUZXgoc2NyZWVubGVmdCwgc2NyZWVuYm90dG9tLCBz
Y3JlZW5yaWdodCwgc2NyZWVuYm90dG9tLCBzY3JlZW5yaWdodCwgc2NyZWVudG9wLCBzY3JlZW5s
ZWZ0LCBzY3JlZW50b3AsIHJjVGV4KTsNCgkJCQlpZiAoaSA9PT0gbGFzdCAmJiAhcG9zdF9kcmF3
KQ0KCQkJCQlnbHcuc2V0VGV4dHVyZShudWxsKTsNCgkJCX0NCgkJCWZ4X2luZGV4ID0gKGZ4X2lu
ZGV4ID09PSAwID8gMSA6IDApOw0KCQkJb3RoZXJfZnhfaW5kZXggPSAoZnhfaW5kZXggPT09IDAg
PyAxIDogMCk7CQkvLyB3aWxsIGJlIG9wcG9zaXRlIHRvIGZ4X2luZGV4IHNpbmNlIGl0IHdhcyBq
dXN0IGFzc2lnbmVkDQoJCX0NCgkJaWYgKHBvc3RfZHJhdykNCgkJew0KCQkJZ2x3LnN3aXRjaFBy
b2dyYW0oMCk7DQoJCQlpZiAoaW5zdCkNCgkJCQlnbHcuc2V0QmxlbmQoaW5zdC5zcmNCbGVuZCwg
aW5zdC5kZXN0QmxlbmQpOw0KCQkJZWxzZSBpZiAobGF5ZXIpDQoJCQkJZ2x3LnNldEJsZW5kKGxh
eWVyLnNyY0JsZW5kLCBsYXllci5kZXN0QmxlbmQpOw0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICgh
dGhpcy5ydW50aW1lLmZ1bGxzY3JlZW5TY2FsaW5nUXVhbGl0eSkNCgkJCQl7DQoJCQkJCWdsdy5z
ZXRTaXplKHRoaXMucnVudGltZS53aWR0aCwgdGhpcy5ydW50aW1lLmhlaWdodCk7DQoJCQkJCWhh
bGZ3ID0gdGhpcy5ydW50aW1lLndpZHRoIC8gMjsNCgkJCQkJaGFsZmggPSB0aGlzLnJ1bnRpbWUu
aGVpZ2h0IC8gMjsNCgkJCQkJc2NyZWVubGVmdCA9IDA7DQoJCQkJCXNjcmVlbnRvcCA9IDA7DQoJ
CQkJCXNjcmVlbnJpZ2h0ID0gdGhpcy5ydW50aW1lLndpZHRoOw0KCQkJCQlzY3JlZW5ib3R0b20g
PSB0aGlzLnJ1bnRpbWUuaGVpZ2h0Ow0KCQkJCX0NCgkJCX0NCgkJCWdsdy5zZXRSZW5kZXJpbmdU
b1RleHR1cmUocmVuZGVydGFyZ2V0KTsNCgkJCWdsdy5zZXRUZXh0dXJlKGZ4X3RleFtvdGhlcl9m
eF9pbmRleF0pOw0KCQkJZ2x3LnJlc2V0TW9kZWxWaWV3KCk7DQoJCQlnbHcudHJhbnNsYXRlKC1o
YWxmdywgLWhhbGZoKTsNCgkJCWdsdy51cGRhdGVNb2RlbFZpZXcoKTsNCgkJCWlmIChpbnN0ICYm
IGFjdGl2ZV9lZmZlY3RfdHlwZXMubGVuZ3RoID09PSAxICYmICFwcmVfZHJhdykNCgkJCQlnbHcu
cXVhZFRleChzY3JlZW5sZWZ0LCBzY3JlZW50b3AsIHNjcmVlbnJpZ2h0LCBzY3JlZW50b3AsIHNj
cmVlbnJpZ2h0LCBzY3JlZW5ib3R0b20sIHNjcmVlbmxlZnQsIHNjcmVlbmJvdHRvbSwgcmNUZXgp
Ow0KCQkJZWxzZQ0KCQkJCWdsdy5xdWFkVGV4KHNjcmVlbmxlZnQsIHNjcmVlbmJvdHRvbSwgc2Ny
ZWVucmlnaHQsIHNjcmVlbmJvdHRvbSwgc2NyZWVucmlnaHQsIHNjcmVlbnRvcCwgc2NyZWVubGVm
dCwgc2NyZWVudG9wLCByY1RleCk7DQoJCQlnbHcuc2V0VGV4dHVyZShudWxsKTsNCgkJfQ0KCX07
DQoJTGF5b3V0LnByb3RvdHlwZS5nZXRMYXllckJ5U2lkID0gZnVuY3Rpb24gKHNpZF8pDQoJew0K
CQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVycy5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJew0KCQkJaWYgKHRoaXMubGF5ZXJzW2ldLnNpZCA9PT0gc2lkXykNCgkJ
CQlyZXR1cm4gdGhpcy5sYXllcnNbaV07DQoJCX0NCgkJcmV0dXJuIG51bGw7DQoJfTsNCglMYXlv
dXQucHJvdG90eXBlLnNhdmVUb0pTT04gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxlbiwg
bGF5ZXIsIGV0Ow0KCQl2YXIgbyA9IHsNCgkJCSJzeCI6IHRoaXMuc2Nyb2xsWCwNCgkJCSJzeSI6
IHRoaXMuc2Nyb2xsWSwNCgkJCSJzIjogdGhpcy5zY2FsZSwNCgkJCSJhIjogdGhpcy5hbmdsZSwN
CgkJCSJ3IjogdGhpcy53aWR0aCwNCgkJCSJoIjogdGhpcy5oZWlnaHQsDQoJCQkiZnYiOiB0aGlz
LmZpcnN0X3Zpc2l0LAkJCS8vIGFkZGVkIHIxMjcNCgkJCSJwZXJzaXN0IjogdGhpcy5wZXJzaXN0
X2RhdGEsDQoJCQkiZngiOiBbXSwNCgkJCSJsYXllcnMiOiB7fQ0KCQl9Ow0KCQlmb3IgKGkgPSAw
LCBsZW4gPSB0aGlzLmVmZmVjdF90eXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJ
ZXQgPSB0aGlzLmVmZmVjdF90eXBlc1tpXTsNCgkJCW9bImZ4Il0ucHVzaCh7Im5hbWUiOiBldC5u
YW1lLCAiYWN0aXZlIjogZXQuYWN0aXZlLCAicGFyYW1zIjogdGhpcy5lZmZlY3RfcGFyYW1zW2V0
LmluZGV4XSB9KTsNCgkJfQ0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxheWVycy5sZW5ndGg7
IGkgPCBsZW47IGkrKykNCgkJew0KCQkJbGF5ZXIgPSB0aGlzLmxheWVyc1tpXTsNCgkJCW9bImxh
eWVycyJdW2xheWVyLnNpZC50b1N0cmluZygpXSA9IGxheWVyLnNhdmVUb0pTT04oKTsNCgkJfQ0K
CQlyZXR1cm4gbzsNCgl9Ow0KCUxheW91dC5wcm90b3R5cGUubG9hZEZyb21KU09OID0gZnVuY3Rp
b24gKG8pDQoJew0KCQl2YXIgaSwgaiwgbGVuLCBmeCwgcCwgbGF5ZXI7DQoJCXRoaXMuc2Nyb2xs
WCA9IG9bInN4Il07DQoJCXRoaXMuc2Nyb2xsWSA9IG9bInN5Il07DQoJCXRoaXMuc2NhbGUgPSBv
WyJzIl07DQoJCXRoaXMuYW5nbGUgPSBvWyJhIl07DQoJCXRoaXMud2lkdGggPSBvWyJ3Il07DQoJ
CXRoaXMuaGVpZ2h0ID0gb1siaCJdOw0KCQl0aGlzLnBlcnNpc3RfZGF0YSA9IG9bInBlcnNpc3Qi
XTsNCgkJaWYgKHR5cGVvZiBvWyJmdiJdICE9PSAidW5kZWZpbmVkIikNCgkJCXRoaXMuZmlyc3Rf
dmlzaXQgPSBvWyJmdiJdOw0KCQl2YXIgb2Z4ID0gb1siZngiXTsNCgkJZm9yIChpID0gMCwgbGVu
ID0gb2Z4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlmeCA9IHRoaXMuZ2V0RWZmZWN0
QnlOYW1lKG9meFtpXVsibmFtZSJdKTsNCgkJCWlmICghZngpDQoJCQkJY29udGludWU7CQkvLyBt
dXN0J3ZlIGdvbmUgbWlzc2luZw0KCQkJZnguYWN0aXZlID0gb2Z4W2ldWyJhY3RpdmUiXTsNCgkJ
CXRoaXMuZWZmZWN0X3BhcmFtc1tmeC5pbmRleF0gPSBvZnhbaV1bInBhcmFtcyJdOw0KCQl9DQoJ
CXRoaXMudXBkYXRlQWN0aXZlRWZmZWN0cygpOw0KCQl2YXIgb2xheWVycyA9IG9bImxheWVycyJd
Ow0KCQlmb3IgKHAgaW4gb2xheWVycykNCgkJew0KCQkJaWYgKG9sYXllcnMuaGFzT3duUHJvcGVy
dHkocCkpDQoJCQl7DQoJCQkJbGF5ZXIgPSB0aGlzLmdldExheWVyQnlTaWQocGFyc2VJbnQocCwg
MTApKTsNCgkJCQlpZiAoIWxheWVyKQ0KCQkJCQljb250aW51ZTsJCS8vIG11c3QndmUgZ29uZSBt
aXNzaW5nDQoJCQkJbGF5ZXIubG9hZEZyb21KU09OKG9sYXllcnNbcF0pOw0KCQkJfQ0KCQl9DQoJ
fTsNCgljci5sYXlvdXQgPSBMYXlvdXQ7DQoJZnVuY3Rpb24gTGF5ZXIobGF5b3V0LCBtKQ0KCXsN
CgkJdGhpcy5sYXlvdXQgPSBsYXlvdXQ7DQoJCXRoaXMucnVudGltZSA9IGxheW91dC5ydW50aW1l
Ow0KCQl0aGlzLmluc3RhbmNlcyA9IFtdOyAgICAgICAgLy8gcnVubmluZyBpbnN0YW5jZXMNCgkJ
dGhpcy5zY2FsZSA9IDEuMDsNCgkJdGhpcy5hbmdsZSA9IDA7DQoJCXRoaXMuZGlzYWJsZUFuZ2xl
ID0gZmFsc2U7DQoJCXRoaXMudG1wcmVjdCA9IG5ldyBjci5yZWN0KDAsIDAsIDAsIDApOw0KCQl0
aGlzLnRtcHF1YWQgPSBuZXcgY3IucXVhZCgpOw0KCQl0aGlzLnZpZXdMZWZ0ID0gMDsNCgkJdGhp
cy52aWV3UmlnaHQgPSAwOw0KCQl0aGlzLnZpZXdUb3AgPSAwOw0KCQl0aGlzLnZpZXdCb3R0b20g
PSAwOw0KCQl0aGlzLnppbmRpY2VzX3N0YWxlID0gZmFsc2U7DQoJCXRoaXMuemluZGljZXNfc3Rh
bGVfZnJvbSA9IC0xOwkJLy8gZmlyc3QgaW5kZXggdGhhdCBoYXMgY2hhbmdlZCwgb3IgLTEgaWYg
bm8gYm91bmQNCgkJdGhpcy5jbGVhcl9lYXJseXpfaW5kZXggPSAwOw0KCQl0aGlzLm5hbWUgPSBt
WzBdOw0KCQl0aGlzLmluZGV4ID0gbVsxXTsNCgkJdGhpcy5zaWQgPSBtWzJdOw0KCQl0aGlzLnZp
c2libGUgPSBtWzNdOwkJLy8gaW5pdGlhbGx5IHZpc2libGUNCgkJdGhpcy5iYWNrZ3JvdW5kX2Nv
bG9yID0gbVs0XTsNCgkJdGhpcy50cmFuc3BhcmVudCA9IG1bNV07DQoJCXRoaXMucGFyYWxsYXhY
ID0gbVs2XTsNCgkJdGhpcy5wYXJhbGxheFkgPSBtWzddOw0KCQl0aGlzLm9wYWNpdHkgPSBtWzhd
Ow0KCQl0aGlzLmZvcmNlT3duVGV4dHVyZSA9IG1bOV07DQoJCXRoaXMudXNlUmVuZGVyQ2VsbHMg
PSBtWzEwXTsNCgkJdGhpcy56b29tUmF0ZSA9IG1bMTFdOw0KCQl0aGlzLmJsZW5kX21vZGUgPSBt
WzEyXTsNCgkJdGhpcy5lZmZlY3RfZmFsbGJhY2sgPSBtWzEzXTsNCgkJdGhpcy5jb21wb3NpdGVP
cCA9ICJzb3VyY2Utb3ZlciI7DQoJCXRoaXMuc3JjQmxlbmQgPSAwOw0KCQl0aGlzLmRlc3RCbGVu
ZCA9IDA7DQoJCXRoaXMucmVuZGVyX2dyaWQgPSBudWxsOw0KCQl0aGlzLmxhc3RfcmVuZGVyX2xp
c3QgPSBhbGxvY19hcnIoKTsNCgkJdGhpcy5yZW5kZXJfbGlzdF9zdGFsZSA9IHRydWU7DQoJCXRo
aXMubGFzdF9yZW5kZXJfY2VsbHMgPSBuZXcgY3IucmVjdCgwLCAwLCAtMSwgLTEpOw0KCQl0aGlz
LmN1cl9yZW5kZXJfY2VsbHMgPSBuZXcgY3IucmVjdCgwLCAwLCAtMSwgLTEpOw0KCQlpZiAodGhp
cy51c2VSZW5kZXJDZWxscykNCgkJew0KCQkJdGhpcy5yZW5kZXJfZ3JpZCA9IG5ldyBjci5SZW5k
ZXJHcmlkKHRoaXMucnVudGltZS5vcmlnaW5hbF93aWR0aCwgdGhpcy5ydW50aW1lLm9yaWdpbmFs
X2hlaWdodCk7DQoJCX0NCgkJdGhpcy5yZW5kZXJfb2Zmc2NyZWVuID0gZmFsc2U7DQoJCXZhciBp
bSA9IG1bMTRdOw0KCQl2YXIgaSwgbGVuOw0KCQl0aGlzLnN0YXJ0dXBfaW5pdGlhbF9pbnN0YW5j
ZXMgPSBbXTsJCS8vIGZvciByZXN0b3JpbmcgaW5pdGlhbF9pbnN0YW5jZXMgYWZ0ZXIgbG9hZA0K
CQl0aGlzLmluaXRpYWxfaW5zdGFuY2VzID0gW107DQoJCXRoaXMuY3JlYXRlZF9nbG9iYWxzID0g
W107CQkvLyBnbG9iYWwgb2JqZWN0IFVJRHMgYWxyZWFkeSBjcmVhdGVkIC0gZm9yIHNhdmUvbG9h
ZCB0byBhdm9pZCByZWNyZWF0aW5nDQoJCWZvciAoaSA9IDAsIGxlbiA9IGltLmxlbmd0aDsgaSA8
IGxlbjsgaSsrKQ0KCQl7DQoJCQl2YXIgaW5zdCA9IGltW2ldOw0KCQkJdmFyIHR5cGUgPSB0aGlz
LnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbaW5zdFsxXV07DQo7DQoJCQlpZiAoIXR5cGUuZGVmYXVs
dF9pbnN0YW5jZSkNCgkJCXsNCgkJCQl0eXBlLmRlZmF1bHRfaW5zdGFuY2UgPSBpbnN0Ow0KCQkJ
CXR5cGUuZGVmYXVsdF9sYXllcmluZGV4ID0gdGhpcy5pbmRleDsNCgkJCX0NCgkJCXRoaXMuaW5p
dGlhbF9pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJCWlmICh0aGlzLmxheW91dC5pbml0aWFsX3R5
cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKQ0KCQkJCXRoaXMubGF5b3V0LmluaXRpYWxfdHlwZXMu
cHVzaCh0eXBlKTsNCgkJfQ0KCQljci5zaGFsbG93QXNzaWduQXJyYXkodGhpcy5zdGFydHVwX2lu
aXRpYWxfaW5zdGFuY2VzLCB0aGlzLmluaXRpYWxfaW5zdGFuY2VzKTsNCgkJdGhpcy5lZmZlY3Rf
dHlwZXMgPSBbXTsNCgkJdGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzID0gW107DQoJCXRoaXMuc2hh
ZGVyc19wcmVzZXJ2ZV9vcGFxdWVuZXNzID0gdHJ1ZTsNCgkJdGhpcy5lZmZlY3RfcGFyYW1zID0g
W107DQoJCWZvciAoaSA9IDAsIGxlbiA9IG1bMTVdLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7
DQoJCQl0aGlzLmVmZmVjdF90eXBlcy5wdXNoKHsNCgkJCQlpZDogbVsxNV1baV1bMF0sDQoJCQkJ
bmFtZTogbVsxNV1baV1bMV0sDQoJCQkJc2hhZGVyaW5kZXg6IC0xLA0KCQkJCXByZXNlcnZlc09w
YXF1ZW5lc3M6IGZhbHNlLA0KCQkJCWFjdGl2ZTogdHJ1ZSwNCgkJCQlpbmRleDogaQ0KCQkJfSk7
DQoJCQl0aGlzLmVmZmVjdF9wYXJhbXMucHVzaChtWzE1XVtpXVsyXS5zbGljZSgwKSk7DQoJCX0N
CgkJdGhpcy51cGRhdGVBY3RpdmVFZmZlY3RzKCk7DQoJCXRoaXMucmNUZXggPSBuZXcgY3IucmVj
dCgwLCAwLCAxLCAxKTsNCgkJdGhpcy5yY1RleDIgPSBuZXcgY3IucmVjdCgwLCAwLCAxLCAxKTsN
Cgl9Ow0KCUxheWVyLnByb3RvdHlwZS51cGRhdGVBY3RpdmVFZmZlY3RzID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCWNyLmNsZWFyQXJyYXkodGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzKTsNCgkJdGhpcy5z
aGFkZXJzX3ByZXNlcnZlX29wYXF1ZW5lc3MgPSB0cnVlOw0KCQl2YXIgaSwgbGVuLCBldDsNCgkJ
Zm9yIChpID0gMCwgbGVuID0gdGhpcy5lZmZlY3RfdHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysp
DQoJCXsNCgkJCWV0ID0gdGhpcy5lZmZlY3RfdHlwZXNbaV07DQoJCQlpZiAoZXQuYWN0aXZlKQ0K
CQkJew0KCQkJCXRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5wdXNoKGV0KTsNCgkJCQlpZiAoIWV0
LnByZXNlcnZlc09wYXF1ZW5lc3MpDQoJCQkJCXRoaXMuc2hhZGVyc19wcmVzZXJ2ZV9vcGFxdWVu
ZXNzID0gZmFsc2U7DQoJCQl9DQoJCX0NCgl9Ow0KCUxheWVyLnByb3RvdHlwZS5nZXRFZmZlY3RC
eU5hbWUgPSBmdW5jdGlvbiAobmFtZV8pDQoJew0KCQl2YXIgaSwgbGVuLCBldDsNCgkJZm9yIChp
ID0gMCwgbGVuID0gdGhpcy5lZmZlY3RfdHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsN
CgkJCWV0ID0gdGhpcy5lZmZlY3RfdHlwZXNbaV07DQoJCQlpZiAoZXQubmFtZSA9PT0gbmFtZV8p
DQoJCQkJcmV0dXJuIGV0Ow0KCQl9DQoJCXJldHVybiBudWxsOw0KCX07DQoJTGF5ZXIucHJvdG90
eXBlLmNyZWF0ZUluaXRpYWxJbnN0YW5jZXMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGss
IGxlbiwgaW5zdCwgaW5pdGlhbF9pbnN0LCB0eXBlLCBrZWVwLCBoYXNQZXJzaXN0QmVoYXZpb3I7
DQoJCWZvciAoaSA9IDAsIGsgPSAwLCBsZW4gPSB0aGlzLmluaXRpYWxfaW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpbml0aWFsX2luc3QgPSB0aGlzLmluaXRpYWxfaW5z
dGFuY2VzW2ldOw0KCQkJdHlwZSA9IHRoaXMucnVudGltZS50eXBlc19ieV9pbmRleFtpbml0aWFs
X2luc3RbMV1dOw0KOw0KCQkJaGFzUGVyc2lzdEJlaGF2aW9yID0gdGhpcy5ydW50aW1lLnR5cGVI
YXNQZXJzaXN0QmVoYXZpb3IodHlwZSk7DQoJCQlrZWVwID0gdHJ1ZTsNCgkJCWlmICghaGFzUGVy
c2lzdEJlaGF2aW9yIHx8IHRoaXMubGF5b3V0LmZpcnN0X3Zpc2l0KQ0KCQkJew0KCQkJCWluc3Qg
PSB0aGlzLnJ1bnRpbWUuY3JlYXRlSW5zdGFuY2VGcm9tSW5pdChpbml0aWFsX2luc3QsIHRoaXMs
IHRydWUpOw0KCQkJCWlmICghaW5zdCkNCgkJCQkJY29udGludWU7CQkvLyBtYXkgaGF2ZSBza2lw
cGVkIGNyZWF0aW9uIGR1ZSB0byBmYWxsYmFjayBlZmZlY3QgImRlc3Ryb3kiDQoJCQkJY3JlYXRl
ZF9pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJCQlpZiAoaW5zdC50eXBlLmdsb2JhbCkNCgkJCQl7
DQoJCQkJCWtlZXAgPSBmYWxzZTsNCgkJCQkJdGhpcy5jcmVhdGVkX2dsb2JhbHMucHVzaChpbnN0
LnVpZCk7DQoJCQkJfQ0KCQkJfQ0KCQkJaWYgKGtlZXApDQoJCQl7DQoJCQkJdGhpcy5pbml0aWFs
X2luc3RhbmNlc1trXSA9IHRoaXMuaW5pdGlhbF9pbnN0YW5jZXNbaV07DQoJCQkJaysrOw0KCQkJ
fQ0KCQl9DQoJCXRoaXMuaW5pdGlhbF9pbnN0YW5jZXMubGVuZ3RoID0gazsNCgkJdGhpcy5ydW50
aW1lLkNsZWFyRGVhdGhSb3coKTsJCS8vIGZsdXNoZXMgY3JlYXRpb24gcm93IHNvIElJRHMgd2ls
bCBiZSBjb3JyZWN0DQoJCWlmICghdGhpcy5ydW50aW1lLmdsd3JhcCAmJiB0aGlzLmVmZmVjdF90
eXBlcy5sZW5ndGgpCS8vIG5vIFdlYkdMIHJlbmRlcmVyIGFuZCBzaGFkZXJzIHVzZWQNCgkJCXRo
aXMuYmxlbmRfbW9kZSA9IHRoaXMuZWZmZWN0X2ZhbGxiYWNrOwkJCQkvLyB1c2UgZmFsbGJhY2sg
YmxlbmQgbW9kZQ0KCQl0aGlzLmNvbXBvc2l0ZU9wID0gY3IuZWZmZWN0VG9Db21wb3NpdGVPcCh0
aGlzLmJsZW5kX21vZGUpOw0KCQlpZiAodGhpcy5ydW50aW1lLmdsKQ0KCQkJY3Iuc2V0R0xCbGVu
ZCh0aGlzLCB0aGlzLmJsZW5kX21vZGUsIHRoaXMucnVudGltZS5nbCk7DQoJCXRoaXMucmVuZGVy
X2xpc3Rfc3RhbGUgPSB0cnVlOw0KCX07DQoJTGF5ZXIucHJvdG90eXBlLnJlY3JlYXRlSW5pdGlh
bE9iamVjdHMgPSBmdW5jdGlvbiAob25seV90eXBlLCByYykNCgl7DQoJCXZhciBpLCBsZW4sIGlu
aXRpYWxfaW5zdCwgdHlwZSwgd20sIHgsIHksIGluc3QsIGosIGxlbmosIHM7DQoJCXZhciB0eXBl
c19ieV9pbmRleCA9IHRoaXMucnVudGltZS50eXBlc19ieV9pbmRleDsNCgkJdmFyIG9ubHlfdHlw
ZV9pc19mYW1pbHkgPSBvbmx5X3R5cGUuaXNfZmFtaWx5Ow0KCQl2YXIgb25seV90eXBlX21lbWJl
cnMgPSBvbmx5X3R5cGUubWVtYmVyczsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5pbml0aWFs
X2luc3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJaW5pdGlhbF9pbnN0ID0g
dGhpcy5pbml0aWFsX2luc3RhbmNlc1tpXTsNCgkJCXdtID0gaW5pdGlhbF9pbnN0WzBdOw0KCQkJ
eCA9IHdtWzBdOw0KCQkJeSA9IHdtWzFdOw0KCQkJaWYgKCFyYy5jb250YWluc19wdCh4LCB5KSkN
CgkJCQljb250aW51ZTsJCS8vIG5vdCBpbiB0aGUgZ2l2ZW4gYXJlYQ0KCQkJdHlwZSA9IHR5cGVz
X2J5X2luZGV4W2luaXRpYWxfaW5zdFsxXV07DQoJCQlpZiAodHlwZSAhPT0gb25seV90eXBlKQ0K
CQkJew0KCQkJCWlmIChvbmx5X3R5cGVfaXNfZmFtaWx5KQ0KCQkJCXsNCgkJCQkJaWYgKG9ubHlf
dHlwZV9tZW1iZXJzLmluZGV4T2YodHlwZSkgPCAwKQ0KCQkJCQkJY29udGludWU7DQoJCQkJfQ0K
CQkJCWVsc2UNCgkJCQkJY29udGludWU7CQkvLyBvbmx5X3R5cGUgaXMgbm90IGEgZmFtaWx5LCBh
bmQgdGhlIGluaXRpYWwgaW5zdCB0eXBlIGRvZXMgbm90IG1hdGNoDQoJCQl9DQoJCQlpbnN0ID0g
dGhpcy5ydW50aW1lLmNyZWF0ZUluc3RhbmNlRnJvbUluaXQoaW5pdGlhbF9pbnN0LCB0aGlzLCBm
YWxzZSk7DQoJCQl0aGlzLnJ1bnRpbWUuaXNJbk9uRGVzdHJveSsrOw0KCQkJdGhpcy5ydW50aW1l
LnRyaWdnZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKHR5cGUucGx1Z2luKS5jbmRzLk9uQ3JlYXRl
ZCwgaW5zdCk7DQoJCQlpZiAoaW5zdC5pc19jb250YWluZWQpDQoJCQl7DQoJCQkJZm9yIChqID0g
MCwgbGVuaiA9IGluc3Quc2libGluZ3MubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCXsNCgkJ
CQkJcyA9IGluc3Quc2libGluZ3NbaV07DQoJCQkJCXRoaXMucnVudGltZS50cmlnZ2VyKE9iamVj
dC5nZXRQcm90b3R5cGVPZihzLnR5cGUucGx1Z2luKS5jbmRzLk9uQ3JlYXRlZCwgcyk7DQoJCQkJ
fQ0KCQkJfQ0KCQkJdGhpcy5ydW50aW1lLmlzSW5PbkRlc3Ryb3ktLTsNCgkJfQ0KCX07DQoJTGF5
ZXIucHJvdG90eXBlLnJlbW92ZUZyb21JbnN0YW5jZUxpc3QgPSBmdW5jdGlvbiAoaW5zdCwgcmVt
b3ZlX2Zyb21fZ3JpZCkNCgl7DQoJCXZhciBpbmRleCA9IGNyLmZhc3RJbmRleE9mKHRoaXMuaW5z
dGFuY2VzLCBpbnN0KTsNCgkJaWYgKGluZGV4IDwgMCkNCgkJCXJldHVybjsJCS8vIG5vdCBmb3Vu
ZA0KCQlpZiAocmVtb3ZlX2Zyb21fZ3JpZCAmJiB0aGlzLnVzZVJlbmRlckNlbGxzICYmIGluc3Qu
cmVuZGVyY2VsbHMgJiYgaW5zdC5yZW5kZXJjZWxscy5yaWdodCA+PSBpbnN0LnJlbmRlcmNlbGxz
LmxlZnQpDQoJCXsNCgkJCWluc3QudXBkYXRlX2Jib3goKTsJCQkJCQkJCQkJCS8vIG1ha2Ugc3Vy
ZSBhY3R1YWxseSBpbiBpdHMgY3VycmVudCByZW5kZXJjZWxscw0KCQkJdGhpcy5yZW5kZXJfZ3Jp
ZC51cGRhdGUoaW5zdCwgaW5zdC5yZW5kZXJjZWxscywgbnVsbCk7CQkvLyBubyBuZXcgcmFuZ2Ug
cHJvdmlkZWQgLSByZW1vdmUgb25seQ0KCQkJaW5zdC5yZW5kZXJjZWxscy5zZXQoMCwgMCwgLTEs
IC0xKTsJCQkJCQkJLy8gc2V0IHRvIGludmFsaWQgc3RhdGUgdG8gaW5kaWNhdGUgbm90IGluc2Vy
dGVkDQoJCX0NCgkJaWYgKGluZGV4ID09PSB0aGlzLmluc3RhbmNlcy5sZW5ndGggLSAxKQ0KCQkJ
dGhpcy5pbnN0YW5jZXMucG9wKCk7DQoJCWVsc2UNCgkJew0KCQkJY3IuYXJyYXlSZW1vdmUodGhp
cy5pbnN0YW5jZXMsIGluZGV4KTsNCgkJCXRoaXMuc2V0WkluZGljZXNTdGFsZUZyb20oaW5kZXgp
Ow0KCQl9DQoJCXRoaXMucmVuZGVyX2xpc3Rfc3RhbGUgPSB0cnVlOw0KCX07DQoJTGF5ZXIucHJv
dG90eXBlLmFwcGVuZFRvSW5zdGFuY2VMaXN0ID0gZnVuY3Rpb24gKGluc3QsIGFkZF90b19ncmlk
KQ0KCXsNCjsNCgkJaW5zdC56aW5kZXggPSB0aGlzLmluc3RhbmNlcy5sZW5ndGg7DQoJCXRoaXMu
aW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJCWlmIChhZGRfdG9fZ3JpZCAmJiB0aGlzLnVzZVJlbmRl
ckNlbGxzICYmIGluc3QucmVuZGVyY2VsbHMpDQoJCXsNCgkJCWluc3Quc2V0X2Jib3hfY2hhbmdl
ZCgpOwkJLy8gd2lsbCBjYXVzZSBpbW1lZGlhdGUgdXBkYXRlIGFuZCBuZXcgaW5zZXJ0aW9uIHRv
IGdyaWQNCgkJfQ0KCQl0aGlzLnJlbmRlcl9saXN0X3N0YWxlID0gdHJ1ZTsNCgl9Ow0KCUxheWVy
LnByb3RvdHlwZS5wcmVwZW5kVG9JbnN0YW5jZUxpc3QgPSBmdW5jdGlvbiAoaW5zdCwgYWRkX3Rv
X2dyaWQpDQoJew0KOw0KCQl0aGlzLmluc3RhbmNlcy51bnNoaWZ0KGluc3QpOw0KCQl0aGlzLnNl
dFpJbmRpY2VzU3RhbGVGcm9tKDApOw0KCQlpZiAoYWRkX3RvX2dyaWQgJiYgdGhpcy51c2VSZW5k
ZXJDZWxscyAmJiBpbnN0LnJlbmRlcmNlbGxzKQ0KCQl7DQoJCQlpbnN0LnNldF9iYm94X2NoYW5n
ZWQoKTsJCS8vIHdpbGwgY2F1c2UgaW1tZWRpYXRlIHVwZGF0ZSBhbmQgbmV3IGluc2VydGlvbiB0
byBncmlkDQoJCX0NCgl9Ow0KCUxheWVyLnByb3RvdHlwZS5tb3ZlSW5zdGFuY2VBZGphY2VudCA9
IGZ1bmN0aW9uIChpbnN0LCBvdGhlciwgaXNhZnRlcikNCgl7DQo7DQoJCXZhciBteVogPSBpbnN0
LmdldF96aW5kZXgoKTsNCgkJdmFyIGluc2VydFogPSBvdGhlci5nZXRfemluZGV4KCk7DQoJCWNy
LmFycmF5UmVtb3ZlKHRoaXMuaW5zdGFuY2VzLCBteVopOw0KCQlpZiAobXlaIDwgaW5zZXJ0WikN
CgkJCWluc2VydFotLTsNCgkJaWYgKGlzYWZ0ZXIpDQoJCQlpbnNlcnRaKys7DQoJCWlmIChpbnNl
cnRaID09PSB0aGlzLmluc3RhbmNlcy5sZW5ndGgpDQoJCQl0aGlzLmluc3RhbmNlcy5wdXNoKGlu
c3QpOw0KCQllbHNlDQoJCQl0aGlzLmluc3RhbmNlcy5zcGxpY2UoaW5zZXJ0WiwgMCwgaW5zdCk7
DQoJCXRoaXMuc2V0WkluZGljZXNTdGFsZUZyb20obXlaIDwgaW5zZXJ0WiA/IG15WiA6IGluc2Vy
dFopOw0KCX07DQoJTGF5ZXIucHJvdG90eXBlLnNldFpJbmRpY2VzU3RhbGVGcm9tID0gZnVuY3Rp
b24gKGluZGV4KQ0KCXsNCgkJaWYgKHRoaXMuemluZGljZXNfc3RhbGVfZnJvbSA9PT0gLTEpCQkJ
Ly8gbm90IHlldCBzZXQNCgkJCXRoaXMuemluZGljZXNfc3RhbGVfZnJvbSA9IGluZGV4Ow0KCQll
bHNlIGlmIChpbmRleCA8IHRoaXMuemluZGljZXNfc3RhbGVfZnJvbSkJCS8vIGRldGVybWluZSBt
aW5pbXVtIHogaW5kZXggYWZmZWN0ZWQNCgkJCXRoaXMuemluZGljZXNfc3RhbGVfZnJvbSA9IGlu
ZGV4Ow0KCQl0aGlzLnppbmRpY2VzX3N0YWxlID0gdHJ1ZTsNCgkJdGhpcy5yZW5kZXJfbGlzdF9z
dGFsZSA9IHRydWU7DQoJfTsNCglMYXllci5wcm90b3R5cGUudXBkYXRlWkluZGljZXMgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJaWYgKCF0aGlzLnppbmRpY2VzX3N0YWxlKQ0KCQkJcmV0dXJuOw0KCQlp
ZiAodGhpcy56aW5kaWNlc19zdGFsZV9mcm9tID09PSAtMSkNCgkJCXRoaXMuemluZGljZXNfc3Rh
bGVfZnJvbSA9IDA7DQoJCXZhciBpLCBsZW4sIGluc3Q7DQoJCWlmICh0aGlzLnVzZVJlbmRlckNl
bGxzKQ0KCQl7DQoJCQlmb3IgKGkgPSB0aGlzLnppbmRpY2VzX3N0YWxlX2Zyb20sIGxlbiA9IHRo
aXMuaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQkJew0KCQkJCWluc3QgPSB0aGlz
Lmluc3RhbmNlc1tpXTsNCgkJCQlpbnN0LnppbmRleCA9IGk7DQoJCQkJdGhpcy5yZW5kZXJfZ3Jp
ZC5tYXJrUmFuZ2VDaGFuZ2VkKGluc3QucmVuZGVyY2VsbHMpOw0KCQkJfQ0KCQl9DQoJCWVsc2UN
CgkJew0KCQkJZm9yIChpID0gdGhpcy56aW5kaWNlc19zdGFsZV9mcm9tLCBsZW4gPSB0aGlzLmlu
c3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCXsNCgkJCQl0aGlzLmluc3RhbmNlc1tp
XS56aW5kZXggPSBpOw0KCQkJfQ0KCQl9DQoJCXRoaXMuemluZGljZXNfc3RhbGUgPSBmYWxzZTsN
CgkJdGhpcy56aW5kaWNlc19zdGFsZV9mcm9tID0gLTE7DQoJfTsNCglMYXllci5wcm90b3R5cGUu
Z2V0U2NhbGUgPSBmdW5jdGlvbiAoaW5jbHVkZV9hc3BlY3QpDQoJew0KCQlyZXR1cm4gdGhpcy5n
ZXROb3JtYWxTY2FsZSgpICogKHRoaXMucnVudGltZS5mdWxsc2NyZWVuU2NhbGluZ1F1YWxpdHkg
fHwgaW5jbHVkZV9hc3BlY3QgPyB0aGlzLnJ1bnRpbWUuYXNwZWN0X3NjYWxlIDogMSk7DQoJfTsN
CglMYXllci5wcm90b3R5cGUuZ2V0Tm9ybWFsU2NhbGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0
dXJuICgodGhpcy5zY2FsZSAqIHRoaXMubGF5b3V0LnNjYWxlKSAtIDEpICogdGhpcy56b29tUmF0
ZSArIDE7DQoJfTsNCglMYXllci5wcm90b3R5cGUuZ2V0QW5nbGUgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJaWYgKHRoaXMuZGlzYWJsZUFuZ2xlKQ0KCQkJcmV0dXJuIDA7DQoJCXJldHVybiBjci5jbGFt
cF9hbmdsZSh0aGlzLmxheW91dC5hbmdsZSArIHRoaXMuYW5nbGUpOw0KCX07DQoJdmFyIGFycl9j
YWNoZSA9IFtdOw0KCWZ1bmN0aW9uIGFsbG9jX2FycigpDQoJew0KCQlpZiAoYXJyX2NhY2hlLmxl
bmd0aCkNCgkJCXJldHVybiBhcnJfY2FjaGUucG9wKCk7DQoJCWVsc2UNCgkJCXJldHVybiBbXTsN
Cgl9DQoJZnVuY3Rpb24gZnJlZV9hcnIoYSkNCgl7DQoJCWNyLmNsZWFyQXJyYXkoYSk7DQoJCWFy
cl9jYWNoZS5wdXNoKGEpOw0KCX07DQoJZnVuY3Rpb24gbWVyZ2VTb3J0ZWRaQXJyYXlzKGEsIGIs
IG91dCkNCgl7DQoJCXZhciBpID0gMCwgaiA9IDAsIGsgPSAwLCBsZW5hID0gYS5sZW5ndGgsIGxl
bmIgPSBiLmxlbmd0aCwgYWksIGJqOw0KCQlvdXQubGVuZ3RoID0gbGVuYSArIGxlbmI7DQoJCWZv
ciAoIDsgaSA8IGxlbmEgJiYgaiA8IGxlbmI7ICsraykNCgkJew0KCQkJYWkgPSBhW2ldOw0KCQkJ
YmogPSBiW2pdOw0KCQkJaWYgKGFpLnppbmRleCA8IGJqLnppbmRleCkNCgkJCXsNCgkJCQlvdXRb
a10gPSBhaTsNCgkJCQkrK2k7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJb3V0W2tdID0gYmo7
DQoJCQkJKytqOw0KCQkJfQ0KCQl9DQoJCWZvciAoIDsgaSA8IGxlbmE7ICsraSwgKytrKQ0KCQkJ
b3V0W2tdID0gYVtpXTsNCgkJZm9yICggOyBqIDwgbGVuYjsgKytqLCArK2spDQoJCQlvdXRba10g
PSBiW2pdOw0KCX07DQoJdmFyIG5leHRfYXJyID0gW107DQoJZnVuY3Rpb24gbWVyZ2VBbGxTb3J0
ZWRaQXJyYXlzX3Bhc3MoYXJyLCBmaXJzdF9wYXNzKQ0KCXsNCgkJdmFyIGksIGxlbiwgYXJyMSwg
YXJyMiwgb3V0Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuIC0gMTsg
aSArPSAyKQ0KCQl7DQoJCQlhcnIxID0gYXJyW2ldOw0KCQkJYXJyMiA9IGFycltpKzFdOw0KCQkJ
b3V0ID0gYWxsb2NfYXJyKCk7DQoJCQltZXJnZVNvcnRlZFpBcnJheXMoYXJyMSwgYXJyMiwgb3V0
KTsNCgkJCWlmICghZmlyc3RfcGFzcykNCgkJCXsNCgkJCQlmcmVlX2FycihhcnIxKTsNCgkJCQlm
cmVlX2FycihhcnIyKTsNCgkJCX0NCgkJCW5leHRfYXJyLnB1c2gob3V0KTsNCgkJfQ0KCQlpZiAo
bGVuICUgMiA9PT0gMSkNCgkJew0KCQkJaWYgKGZpcnN0X3Bhc3MpDQoJCQl7DQoJCQkJYXJyMSA9
IGFsbG9jX2FycigpOw0KCQkJCWNyLnNoYWxsb3dBc3NpZ25BcnJheShhcnIxLCBhcnJbbGVuIC0g
MV0pOw0KCQkJCW5leHRfYXJyLnB1c2goYXJyMSk7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJ
bmV4dF9hcnIucHVzaChhcnJbbGVuIC0gMV0pOw0KCQkJfQ0KCQl9DQoJCWNyLnNoYWxsb3dBc3Np
Z25BcnJheShhcnIsIG5leHRfYXJyKTsNCgkJY3IuY2xlYXJBcnJheShuZXh0X2Fycik7DQoJfTsN
CglmdW5jdGlvbiBtZXJnZUFsbFNvcnRlZFpBcnJheXMoYXJyKQ0KCXsNCgkJdmFyIGZpcnN0X3Bh
c3MgPSB0cnVlOw0KCQl3aGlsZSAoYXJyLmxlbmd0aCA+IDEpDQoJCXsNCgkJCW1lcmdlQWxsU29y
dGVkWkFycmF5c19wYXNzKGFyciwgZmlyc3RfcGFzcyk7DQoJCQlmaXJzdF9wYXNzID0gZmFsc2U7
DQoJCX0NCgkJcmV0dXJuIGFyclswXTsNCgl9Ow0KCXZhciByZW5kZXJfYXJyID0gW107DQoJTGF5
ZXIucHJvdG90eXBlLmdldFJlbmRlckNlbGxJbnN0YW5jZXNUb0RyYXcgPSBmdW5jdGlvbiAoKQ0K
CXsNCjsNCgkJdGhpcy51cGRhdGVaSW5kaWNlcygpOw0KCQl0aGlzLnJlbmRlcl9ncmlkLnF1ZXJ5
UmFuZ2UodGhpcy52aWV3TGVmdCwgdGhpcy52aWV3VG9wLCB0aGlzLnZpZXdSaWdodCwgdGhpcy52
aWV3Qm90dG9tLCByZW5kZXJfYXJyKTsNCgkJaWYgKCFyZW5kZXJfYXJyLmxlbmd0aCkNCgkJCXJl
dHVybiBhbGxvY19hcnIoKTsNCgkJaWYgKHJlbmRlcl9hcnIubGVuZ3RoID09PSAxKQ0KCQl7DQoJ
CQl2YXIgYSA9IGFsbG9jX2FycigpOw0KCQkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KGEsIHJlbmRl
cl9hcnJbMF0pOw0KCQkJY3IuY2xlYXJBcnJheShyZW5kZXJfYXJyKTsNCgkJCXJldHVybiBhOw0K
CQl9DQoJCXZhciBkcmF3X2xpc3QgPSBtZXJnZUFsbFNvcnRlZFpBcnJheXMocmVuZGVyX2Fycik7
DQoJCWNyLmNsZWFyQXJyYXkocmVuZGVyX2Fycik7DQoJCXJldHVybiBkcmF3X2xpc3Q7DQoJfTsN
CglMYXllci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChjdHgpDQoJew0KCQl0aGlzLnJlbmRl
cl9vZmZzY3JlZW4gPSAodGhpcy5mb3JjZU93blRleHR1cmUgfHwgdGhpcy5vcGFjaXR5ICE9PSAx
LjAgfHwgdGhpcy5ibGVuZF9tb2RlICE9PSAwKTsNCgkJdmFyIGxheWVyX2NhbnZhcyA9IHRoaXMu
cnVudGltZS5jYW52YXM7DQoJCXZhciBsYXllcl9jdHggPSBjdHg7DQoJCXZhciBjdHhfY2hhbmdl
ZCA9IGZhbHNlOw0KCQlpZiAodGhpcy5yZW5kZXJfb2Zmc2NyZWVuKQ0KCQl7DQoJCQlpZiAoIXRo
aXMucnVudGltZS5sYXllcl9jYW52YXMpDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLmxheWVyX2Nh
bnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOw0KOw0KCQkJCWxheWVyX2Nh
bnZhcyA9IHRoaXMucnVudGltZS5sYXllcl9jYW52YXM7DQoJCQkJbGF5ZXJfY2FudmFzLndpZHRo
ID0gdGhpcy5ydW50aW1lLmRyYXdfd2lkdGg7DQoJCQkJbGF5ZXJfY2FudmFzLmhlaWdodCA9IHRo
aXMucnVudGltZS5kcmF3X2hlaWdodDsNCgkJCQl0aGlzLnJ1bnRpbWUubGF5ZXJfY3R4ID0gbGF5
ZXJfY2FudmFzLmdldENvbnRleHQoIjJkIik7DQo7DQoJCQkJY3R4X2NoYW5nZWQgPSB0cnVlOw0K
CQkJfQ0KCQkJbGF5ZXJfY2FudmFzID0gdGhpcy5ydW50aW1lLmxheWVyX2NhbnZhczsNCgkJCWxh
eWVyX2N0eCA9IHRoaXMucnVudGltZS5sYXllcl9jdHg7DQoJCQlpZiAobGF5ZXJfY2FudmFzLndp
ZHRoICE9PSB0aGlzLnJ1bnRpbWUuZHJhd193aWR0aCkNCgkJCXsNCgkJCQlsYXllcl9jYW52YXMu
d2lkdGggPSB0aGlzLnJ1bnRpbWUuZHJhd193aWR0aDsNCgkJCQljdHhfY2hhbmdlZCA9IHRydWU7
DQoJCQl9DQoJCQlpZiAobGF5ZXJfY2FudmFzLmhlaWdodCAhPT0gdGhpcy5ydW50aW1lLmRyYXdf
aGVpZ2h0KQ0KCQkJew0KCQkJCWxheWVyX2NhbnZhcy5oZWlnaHQgPSB0aGlzLnJ1bnRpbWUuZHJh
d19oZWlnaHQ7DQoJCQkJY3R4X2NoYW5nZWQgPSB0cnVlOw0KCQkJfQ0KCQkJaWYgKGN0eF9jaGFu
Z2VkKQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5zZXRDdHhJbWFnZVNtb290aGluZ0VuYWJsZWQo
bGF5ZXJfY3R4LCB0aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcpOw0KCQkJfQ0KCQkJaWYgKHRo
aXMudHJhbnNwYXJlbnQpDQoJCQkJbGF5ZXJfY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLnJ1bnRp
bWUuZHJhd193aWR0aCwgdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0KTsNCgkJfQ0KCQlsYXllcl9j
dHguZ2xvYmFsQWxwaGEgPSAxOw0KCQlsYXllcl9jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9u
ID0gInNvdXJjZS1vdmVyIjsNCgkJaWYgKCF0aGlzLnRyYW5zcGFyZW50KQ0KCQl7DQoJCQlsYXll
cl9jdHguZmlsbFN0eWxlID0gInJnYigiICsgdGhpcy5iYWNrZ3JvdW5kX2NvbG9yWzBdICsgIiwi
ICsgdGhpcy5iYWNrZ3JvdW5kX2NvbG9yWzFdICsgIiwiICsgdGhpcy5iYWNrZ3JvdW5kX2NvbG9y
WzJdICsgIikiOw0KCQkJbGF5ZXJfY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMucnVudGltZS5kcmF3
X3dpZHRoLCB0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQpOw0KCQl9DQoJCWxheWVyX2N0eC5zYXZl
KCk7DQoJCXRoaXMuZGlzYWJsZUFuZ2xlID0gdHJ1ZTsNCgkJdmFyIHB4ID0gdGhpcy5jYW52YXNU
b0xheWVyKDAsIDAsIHRydWUsIHRydWUpOw0KCQl2YXIgcHkgPSB0aGlzLmNhbnZhc1RvTGF5ZXIo
MCwgMCwgZmFsc2UsIHRydWUpOw0KCQl0aGlzLmRpc2FibGVBbmdsZSA9IGZhbHNlOw0KCQlpZiAo
dGhpcy5ydW50aW1lLnBpeGVsX3JvdW5kaW5nKQ0KCQl7DQoJCQlweCA9IE1hdGgucm91bmQocHgp
Ow0KCQkJcHkgPSBNYXRoLnJvdW5kKHB5KTsNCgkJfQ0KCQl0aGlzLnJvdGF0ZVZpZXdwb3J0KHB4
LCBweSwgbGF5ZXJfY3R4KTsNCgkJdmFyIG15c2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7DQoJCWxh
eWVyX2N0eC5zY2FsZShteXNjYWxlLCBteXNjYWxlKTsNCgkJbGF5ZXJfY3R4LnRyYW5zbGF0ZSgt
cHgsIC1weSk7DQoJCXZhciBpbnN0YW5jZXNfdG9fZHJhdzsNCgkJaWYgKHRoaXMudXNlUmVuZGVy
Q2VsbHMpDQoJCXsNCgkJCXRoaXMuY3VyX3JlbmRlcl9jZWxscy5sZWZ0ID0gdGhpcy5yZW5kZXJf
Z3JpZC5YVG9DZWxsKHRoaXMudmlld0xlZnQpOw0KCQkJdGhpcy5jdXJfcmVuZGVyX2NlbGxzLnRv
cCA9IHRoaXMucmVuZGVyX2dyaWQuWVRvQ2VsbCh0aGlzLnZpZXdUb3ApOw0KCQkJdGhpcy5jdXJf
cmVuZGVyX2NlbGxzLnJpZ2h0ID0gdGhpcy5yZW5kZXJfZ3JpZC5YVG9DZWxsKHRoaXMudmlld1Jp
Z2h0KTsNCgkJCXRoaXMuY3VyX3JlbmRlcl9jZWxscy5ib3R0b20gPSB0aGlzLnJlbmRlcl9ncmlk
LllUb0NlbGwodGhpcy52aWV3Qm90dG9tKTsNCgkJCWlmICh0aGlzLnJlbmRlcl9saXN0X3N0YWxl
IHx8ICF0aGlzLmN1cl9yZW5kZXJfY2VsbHMuZXF1YWxzKHRoaXMubGFzdF9yZW5kZXJfY2VsbHMp
KQ0KCQkJew0KCQkJCWZyZWVfYXJyKHRoaXMubGFzdF9yZW5kZXJfbGlzdCk7DQoJCQkJaW5zdGFu
Y2VzX3RvX2RyYXcgPSB0aGlzLmdldFJlbmRlckNlbGxJbnN0YW5jZXNUb0RyYXcoKTsNCgkJCQl0
aGlzLnJlbmRlcl9saXN0X3N0YWxlID0gZmFsc2U7DQoJCQkJdGhpcy5sYXN0X3JlbmRlcl9jZWxs
cy5jb3B5KHRoaXMuY3VyX3JlbmRlcl9jZWxscyk7DQoJCQl9DQoJCQllbHNlDQoJCQkJaW5zdGFu
Y2VzX3RvX2RyYXcgPSB0aGlzLmxhc3RfcmVuZGVyX2xpc3Q7DQoJCX0NCgkJZWxzZQ0KCQkJaW5z
dGFuY2VzX3RvX2RyYXcgPSB0aGlzLmluc3RhbmNlczsNCgkJdmFyIGksIGxlbiwgaW5zdCwgbGFz
dF9pbnN0ID0gbnVsbDsNCgkJZm9yIChpID0gMCwgbGVuID0gaW5zdGFuY2VzX3RvX2RyYXcubGVu
Z3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCWluc3QgPSBpbnN0YW5jZXNfdG9fZHJhd1tpXTsN
CgkJCWlmIChpbnN0ID09PSBsYXN0X2luc3QpDQoJCQkJY29udGludWU7DQoJCQl0aGlzLmRyYXdJ
bnN0YW5jZShpbnN0LCBsYXllcl9jdHgpOw0KCQkJbGFzdF9pbnN0ID0gaW5zdDsNCgkJfQ0KCQlp
ZiAodGhpcy51c2VSZW5kZXJDZWxscykNCgkJCXRoaXMubGFzdF9yZW5kZXJfbGlzdCA9IGluc3Rh
bmNlc190b19kcmF3Ow0KCQlsYXllcl9jdHgucmVzdG9yZSgpOw0KCQlpZiAodGhpcy5yZW5kZXJf
b2Zmc2NyZWVuKQ0KCQl7DQoJCQljdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gdGhpcy5j
b21wb3NpdGVPcDsNCgkJCWN0eC5nbG9iYWxBbHBoYSA9IHRoaXMub3BhY2l0eTsNCgkJCWN0eC5k
cmF3SW1hZ2UobGF5ZXJfY2FudmFzLCAwLCAwKTsNCgkJfQ0KCX07DQoJTGF5ZXIucHJvdG90eXBl
LmRyYXdJbnN0YW5jZSA9IGZ1bmN0aW9uKGluc3QsIGxheWVyX2N0eCkNCgl7DQoJCWlmICghaW5z
dC52aXNpYmxlIHx8IGluc3Qud2lkdGggPT09IDAgfHwgaW5zdC5oZWlnaHQgPT09IDApDQoJCQly
ZXR1cm47DQoJCWluc3QudXBkYXRlX2Jib3goKTsNCgkJdmFyIGJib3ggPSBpbnN0LmJib3g7DQoJ
CWlmIChiYm94LnJpZ2h0IDwgdGhpcy52aWV3TGVmdCB8fCBiYm94LmJvdHRvbSA8IHRoaXMudmll
d1RvcCB8fCBiYm94LmxlZnQgPiB0aGlzLnZpZXdSaWdodCB8fCBiYm94LnRvcCA+IHRoaXMudmll
d0JvdHRvbSkNCgkJCXJldHVybjsNCgkJbGF5ZXJfY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlv
biA9IGluc3QuY29tcG9zaXRlT3A7DQoJCWluc3QuZHJhdyhsYXllcl9jdHgpOw0KCX07DQoJTGF5
ZXIucHJvdG90eXBlLnVwZGF0ZVZpZXdwb3J0ID0gZnVuY3Rpb24gKGN0eCkNCgl7DQoJCXRoaXMu
ZGlzYWJsZUFuZ2xlID0gdHJ1ZTsNCgkJdmFyIHB4ID0gdGhpcy5jYW52YXNUb0xheWVyKDAsIDAs
IHRydWUsIHRydWUpOw0KCQl2YXIgcHkgPSB0aGlzLmNhbnZhc1RvTGF5ZXIoMCwgMCwgZmFsc2Us
IHRydWUpOw0KCQl0aGlzLmRpc2FibGVBbmdsZSA9IGZhbHNlOw0KCQlpZiAodGhpcy5ydW50aW1l
LnBpeGVsX3JvdW5kaW5nKQ0KCQl7DQoJCQlweCA9IE1hdGgucm91bmQocHgpOw0KCQkJcHkgPSBN
YXRoLnJvdW5kKHB5KTsNCgkJfQ0KCQl0aGlzLnJvdGF0ZVZpZXdwb3J0KHB4LCBweSwgY3R4KTsN
Cgl9Ow0KCUxheWVyLnByb3RvdHlwZS5yb3RhdGVWaWV3cG9ydCA9IGZ1bmN0aW9uIChweCwgcHks
IGN0eCkNCgl7DQoJCXZhciBteXNjYWxlID0gdGhpcy5nZXRTY2FsZSgpOw0KCQl0aGlzLnZpZXdM
ZWZ0ID0gcHg7DQoJCXRoaXMudmlld1RvcCA9IHB5Ow0KCQl0aGlzLnZpZXdSaWdodCA9IHB4ICsg
KHRoaXMucnVudGltZS5kcmF3X3dpZHRoICogKDEgLyBteXNjYWxlKSk7DQoJCXRoaXMudmlld0Jv
dHRvbSA9IHB5ICsgKHRoaXMucnVudGltZS5kcmF3X2hlaWdodCAqICgxIC8gbXlzY2FsZSkpOw0K
CQl2YXIgdGVtcDsNCgkJaWYgKHRoaXMudmlld0xlZnQgPiB0aGlzLnZpZXdSaWdodCkNCgkJew0K
CQkJdGVtcCA9IHRoaXMudmlld0xlZnQ7DQoJCQl0aGlzLnZpZXdMZWZ0ID0gdGhpcy52aWV3Umln
aHQ7DQoJCQl0aGlzLnZpZXdSaWdodCA9IHRlbXA7DQoJCX0NCgkJaWYgKHRoaXMudmlld1RvcCA+
IHRoaXMudmlld0JvdHRvbSkNCgkJew0KCQkJdGVtcCA9IHRoaXMudmlld1RvcDsNCgkJCXRoaXMu
dmlld1RvcCA9IHRoaXMudmlld0JvdHRvbTsNCgkJCXRoaXMudmlld0JvdHRvbSA9IHRlbXA7DQoJ
CX0NCgkJdmFyIG15QW5nbGUgPSB0aGlzLmdldEFuZ2xlKCk7DQoJCWlmIChteUFuZ2xlICE9PSAw
KQ0KCQl7DQoJCQlpZiAoY3R4KQ0KCQkJew0KCQkJCWN0eC50cmFuc2xhdGUodGhpcy5ydW50aW1l
LmRyYXdfd2lkdGggLyAyLCB0aGlzLnJ1bnRpbWUuZHJhd19oZWlnaHQgLyAyKTsNCgkJCQljdHgu
cm90YXRlKC1teUFuZ2xlKTsNCgkJCQljdHgudHJhbnNsYXRlKHRoaXMucnVudGltZS5kcmF3X3dp
ZHRoIC8gLTIsIHRoaXMucnVudGltZS5kcmF3X2hlaWdodCAvIC0yKTsNCgkJCX0NCgkJCXRoaXMu
dG1wcmVjdC5zZXQodGhpcy52aWV3TGVmdCwgdGhpcy52aWV3VG9wLCB0aGlzLnZpZXdSaWdodCwg
dGhpcy52aWV3Qm90dG9tKTsNCgkJCXRoaXMudG1wcmVjdC5vZmZzZXQoKHRoaXMudmlld0xlZnQg
KyB0aGlzLnZpZXdSaWdodCkgLyAtMiwgKHRoaXMudmlld1RvcCArIHRoaXMudmlld0JvdHRvbSkg
LyAtMik7DQoJCQl0aGlzLnRtcHF1YWQuc2V0X2Zyb21fcm90YXRlZF9yZWN0KHRoaXMudG1wcmVj
dCwgbXlBbmdsZSk7DQoJCQl0aGlzLnRtcHF1YWQuYm91bmRpbmdfYm94KHRoaXMudG1wcmVjdCk7
DQoJCQl0aGlzLnRtcHJlY3Qub2Zmc2V0KCh0aGlzLnZpZXdMZWZ0ICsgdGhpcy52aWV3UmlnaHQp
IC8gMiwgKHRoaXMudmlld1RvcCArIHRoaXMudmlld0JvdHRvbSkgLyAyKTsNCgkJCXRoaXMudmll
d0xlZnQgPSB0aGlzLnRtcHJlY3QubGVmdDsNCgkJCXRoaXMudmlld1RvcCA9IHRoaXMudG1wcmVj
dC50b3A7DQoJCQl0aGlzLnZpZXdSaWdodCA9IHRoaXMudG1wcmVjdC5yaWdodDsNCgkJCXRoaXMu
dmlld0JvdHRvbSA9IHRoaXMudG1wcmVjdC5ib3R0b207DQoJCX0NCgl9DQoJTGF5ZXIucHJvdG90
eXBlLmRyYXdHTF9lYXJseVpQYXNzID0gZnVuY3Rpb24gKGdsdykNCgl7DQoJCXZhciB3aW5kb3dX
aWR0aCA9IHRoaXMucnVudGltZS5kcmF3X3dpZHRoOw0KCQl2YXIgd2luZG93SGVpZ2h0ID0gdGhp
cy5ydW50aW1lLmRyYXdfaGVpZ2h0Ow0KCQl2YXIgc2hhZGVyaW5kZXggPSAwOw0KCQl2YXIgZXRp
bmRleCA9IDA7DQoJCXRoaXMucmVuZGVyX29mZnNjcmVlbiA9IHRoaXMuZm9yY2VPd25UZXh0dXJl
Ow0KCQlpZiAodGhpcy5yZW5kZXJfb2Zmc2NyZWVuKQ0KCQl7DQoJCQlpZiAoIXRoaXMucnVudGlt
ZS5sYXllcl90ZXgpDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLmxheWVyX3RleCA9IGdsdy5jcmVh
dGVFbXB0eVRleHR1cmUodGhpcy5ydW50aW1lLmRyYXdfd2lkdGgsIHRoaXMucnVudGltZS5kcmF3
X2hlaWdodCwgdGhpcy5ydW50aW1lLmxpbmVhclNhbXBsaW5nKTsNCgkJCX0NCgkJCWlmICh0aGlz
LnJ1bnRpbWUubGF5ZXJfdGV4LmMyd2lkdGggIT09IHRoaXMucnVudGltZS5kcmF3X3dpZHRoIHx8
IHRoaXMucnVudGltZS5sYXllcl90ZXguYzJoZWlnaHQgIT09IHRoaXMucnVudGltZS5kcmF3X2hl
aWdodCkNCgkJCXsNCgkJCQlnbHcuZGVsZXRlVGV4dHVyZSh0aGlzLnJ1bnRpbWUubGF5ZXJfdGV4
KTsNCgkJCQl0aGlzLnJ1bnRpbWUubGF5ZXJfdGV4ID0gZ2x3LmNyZWF0ZUVtcHR5VGV4dHVyZSh0
aGlzLnJ1bnRpbWUuZHJhd193aWR0aCwgdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0LCB0aGlzLnJ1
bnRpbWUubGluZWFyU2FtcGxpbmcpOw0KCQkJfQ0KCQkJZ2x3LnNldFJlbmRlcmluZ1RvVGV4dHVy
ZSh0aGlzLnJ1bnRpbWUubGF5ZXJfdGV4KTsNCgkJfQ0KCQl0aGlzLmRpc2FibGVBbmdsZSA9IHRy
dWU7DQoJCXZhciBweCA9IHRoaXMuY2FudmFzVG9MYXllcigwLCAwLCB0cnVlLCB0cnVlKTsNCgkJ
dmFyIHB5ID0gdGhpcy5jYW52YXNUb0xheWVyKDAsIDAsIGZhbHNlLCB0cnVlKTsNCgkJdGhpcy5k
aXNhYmxlQW5nbGUgPSBmYWxzZTsNCgkJaWYgKHRoaXMucnVudGltZS5waXhlbF9yb3VuZGluZykN
CgkJew0KCQkJcHggPSBNYXRoLnJvdW5kKHB4KTsNCgkJCXB5ID0gTWF0aC5yb3VuZChweSk7DQoJ
CX0NCgkJdGhpcy5yb3RhdGVWaWV3cG9ydChweCwgcHksIG51bGwpOw0KCQl2YXIgbXlzY2FsZSA9
IHRoaXMuZ2V0U2NhbGUoKTsNCgkJZ2x3LnJlc2V0TW9kZWxWaWV3KCk7DQoJCWdsdy5zY2FsZSht
eXNjYWxlLCBteXNjYWxlKTsNCgkJZ2x3LnJvdGF0ZVooLXRoaXMuZ2V0QW5nbGUoKSk7DQoJCWds
dy50cmFuc2xhdGUoKHRoaXMudmlld0xlZnQgKyB0aGlzLnZpZXdSaWdodCkgLyAtMiwgKHRoaXMu
dmlld1RvcCArIHRoaXMudmlld0JvdHRvbSkgLyAtMik7DQoJCWdsdy51cGRhdGVNb2RlbFZpZXco
KTsNCgkJdmFyIGluc3RhbmNlc190b19kcmF3Ow0KCQlpZiAodGhpcy51c2VSZW5kZXJDZWxscykN
CgkJew0KCQkJdGhpcy5jdXJfcmVuZGVyX2NlbGxzLmxlZnQgPSB0aGlzLnJlbmRlcl9ncmlkLlhU
b0NlbGwodGhpcy52aWV3TGVmdCk7DQoJCQl0aGlzLmN1cl9yZW5kZXJfY2VsbHMudG9wID0gdGhp
cy5yZW5kZXJfZ3JpZC5ZVG9DZWxsKHRoaXMudmlld1RvcCk7DQoJCQl0aGlzLmN1cl9yZW5kZXJf
Y2VsbHMucmlnaHQgPSB0aGlzLnJlbmRlcl9ncmlkLlhUb0NlbGwodGhpcy52aWV3UmlnaHQpOw0K
CQkJdGhpcy5jdXJfcmVuZGVyX2NlbGxzLmJvdHRvbSA9IHRoaXMucmVuZGVyX2dyaWQuWVRvQ2Vs
bCh0aGlzLnZpZXdCb3R0b20pOw0KCQkJaWYgKHRoaXMucmVuZGVyX2xpc3Rfc3RhbGUgfHwgIXRo
aXMuY3VyX3JlbmRlcl9jZWxscy5lcXVhbHModGhpcy5sYXN0X3JlbmRlcl9jZWxscykpDQoJCQl7
DQoJCQkJZnJlZV9hcnIodGhpcy5sYXN0X3JlbmRlcl9saXN0KTsNCgkJCQlpbnN0YW5jZXNfdG9f
ZHJhdyA9IHRoaXMuZ2V0UmVuZGVyQ2VsbEluc3RhbmNlc1RvRHJhdygpOw0KCQkJCXRoaXMucmVu
ZGVyX2xpc3Rfc3RhbGUgPSBmYWxzZTsNCgkJCQl0aGlzLmxhc3RfcmVuZGVyX2NlbGxzLmNvcHko
dGhpcy5jdXJfcmVuZGVyX2NlbGxzKTsNCgkJCX0NCgkJCWVsc2UNCgkJCQlpbnN0YW5jZXNfdG9f
ZHJhdyA9IHRoaXMubGFzdF9yZW5kZXJfbGlzdDsNCgkJfQ0KCQllbHNlDQoJCQlpbnN0YW5jZXNf
dG9fZHJhdyA9IHRoaXMuaW5zdGFuY2VzOw0KCQl2YXIgaSwgaW5zdCwgbGFzdF9pbnN0ID0gbnVs
bDsNCgkJZm9yIChpID0gaW5zdGFuY2VzX3RvX2RyYXcubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkp
DQoJCXsNCgkJCWluc3QgPSBpbnN0YW5jZXNfdG9fZHJhd1tpXTsNCgkJCWlmIChpbnN0ID09PSBs
YXN0X2luc3QpDQoJCQkJY29udGludWU7DQoJCQl0aGlzLmRyYXdJbnN0YW5jZUdMX2Vhcmx5WlBh
c3MoaW5zdGFuY2VzX3RvX2RyYXdbaV0sIGdsdyk7DQoJCQlsYXN0X2luc3QgPSBpbnN0Ow0KCQl9
DQoJCWlmICh0aGlzLnVzZVJlbmRlckNlbGxzKQ0KCQkJdGhpcy5sYXN0X3JlbmRlcl9saXN0ID0g
aW5zdGFuY2VzX3RvX2RyYXc7DQoJCWlmICghdGhpcy50cmFuc3BhcmVudCkNCgkJew0KCQkJdGhp
cy5jbGVhcl9lYXJseXpfaW5kZXggPSB0aGlzLnJ1bnRpbWUuZWFybHl6X2luZGV4Kys7DQoJCQln
bHcuc2V0RWFybHlaSW5kZXgodGhpcy5jbGVhcl9lYXJseXpfaW5kZXgpOw0KCQkJZ2x3LnNldENv
bG9yRmlsbE1vZGUoMSwgMSwgMSwgMSk7DQoJCQlnbHcuZnVsbHNjcmVlblF1YWQoKTsJCS8vIGZp
bGwgcmVtYWluaW5nIHNwYWNlIGluIGRlcHRoIGJ1ZmZlciB3aXRoIGN1cnJlbnQgWiB2YWx1ZQ0K
CQkJZ2x3LnJlc3RvcmVFYXJseVpNb2RlKCk7DQoJCX0NCgl9Ow0KCUxheWVyLnByb3RvdHlwZS5k
cmF3R0wgPSBmdW5jdGlvbiAoZ2x3KQ0KCXsNCgkJdmFyIHdpbmRvd1dpZHRoID0gdGhpcy5ydW50
aW1lLmRyYXdfd2lkdGg7DQoJCXZhciB3aW5kb3dIZWlnaHQgPSB0aGlzLnJ1bnRpbWUuZHJhd19o
ZWlnaHQ7DQoJCXZhciBzaGFkZXJpbmRleCA9IDA7DQoJCXZhciBldGluZGV4ID0gMDsNCgkJdGhp
cy5yZW5kZXJfb2Zmc2NyZWVuID0gKHRoaXMuZm9yY2VPd25UZXh0dXJlIHx8IHRoaXMub3BhY2l0
eSAhPT0gMS4wIHx8IHRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5sZW5ndGggPiAwIHx8IHRoaXMu
YmxlbmRfbW9kZSAhPT0gMCk7DQoJCWlmICh0aGlzLnJlbmRlcl9vZmZzY3JlZW4pDQoJCXsNCgkJ
CWlmICghdGhpcy5ydW50aW1lLmxheWVyX3RleCkNCgkJCXsNCgkJCQl0aGlzLnJ1bnRpbWUubGF5
ZXJfdGV4ID0gZ2x3LmNyZWF0ZUVtcHR5VGV4dHVyZSh0aGlzLnJ1bnRpbWUuZHJhd193aWR0aCwg
dGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0LCB0aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcpOw0K
CQkJfQ0KCQkJaWYgKHRoaXMucnVudGltZS5sYXllcl90ZXguYzJ3aWR0aCAhPT0gdGhpcy5ydW50
aW1lLmRyYXdfd2lkdGggfHwgdGhpcy5ydW50aW1lLmxheWVyX3RleC5jMmhlaWdodCAhPT0gdGhp
cy5ydW50aW1lLmRyYXdfaGVpZ2h0KQ0KCQkJew0KCQkJCWdsdy5kZWxldGVUZXh0dXJlKHRoaXMu
cnVudGltZS5sYXllcl90ZXgpOw0KCQkJCXRoaXMucnVudGltZS5sYXllcl90ZXggPSBnbHcuY3Jl
YXRlRW1wdHlUZXh0dXJlKHRoaXMucnVudGltZS5kcmF3X3dpZHRoLCB0aGlzLnJ1bnRpbWUuZHJh
d19oZWlnaHQsIHRoaXMucnVudGltZS5saW5lYXJTYW1wbGluZyk7DQoJCQl9DQoJCQlnbHcuc2V0
UmVuZGVyaW5nVG9UZXh0dXJlKHRoaXMucnVudGltZS5sYXllcl90ZXgpOw0KCQkJaWYgKHRoaXMu
dHJhbnNwYXJlbnQpDQoJCQkJZ2x3LmNsZWFyKDAsIDAsIDAsIDApOw0KCQl9DQoJCWlmICghdGhp
cy50cmFuc3BhcmVudCkNCgkJew0KCQkJaWYgKHRoaXMucnVudGltZS5lbmFibGVGcm9udFRvQmFj
aykNCgkJCXsNCgkJCQlnbHcuc2V0RWFybHlaSW5kZXgodGhpcy5jbGVhcl9lYXJseXpfaW5kZXgp
Ow0KCQkJCWdsdy5zZXRDb2xvckZpbGxNb2RlKHRoaXMuYmFja2dyb3VuZF9jb2xvclswXSAvIDI1
NSwgdGhpcy5iYWNrZ3JvdW5kX2NvbG9yWzFdIC8gMjU1LCB0aGlzLmJhY2tncm91bmRfY29sb3Jb
Ml0gLyAyNTUsIDEpOw0KCQkJCWdsdy5mdWxsc2NyZWVuUXVhZCgpOw0KCQkJCWdsdy5zZXRUZXh0
dXJlRmlsbE1vZGUoKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlnbHcuY2xlYXIodGhpcy5i
YWNrZ3JvdW5kX2NvbG9yWzBdIC8gMjU1LCB0aGlzLmJhY2tncm91bmRfY29sb3JbMV0gLyAyNTUs
IHRoaXMuYmFja2dyb3VuZF9jb2xvclsyXSAvIDI1NSwgMSk7DQoJCQl9DQoJCX0NCgkJdGhpcy5k
aXNhYmxlQW5nbGUgPSB0cnVlOw0KCQl2YXIgcHggPSB0aGlzLmNhbnZhc1RvTGF5ZXIoMCwgMCwg
dHJ1ZSwgdHJ1ZSk7DQoJCXZhciBweSA9IHRoaXMuY2FudmFzVG9MYXllcigwLCAwLCBmYWxzZSwg
dHJ1ZSk7DQoJCXRoaXMuZGlzYWJsZUFuZ2xlID0gZmFsc2U7DQoJCWlmICh0aGlzLnJ1bnRpbWUu
cGl4ZWxfcm91bmRpbmcpDQoJCXsNCgkJCXB4ID0gTWF0aC5yb3VuZChweCk7DQoJCQlweSA9IE1h
dGgucm91bmQocHkpOw0KCQl9DQoJCXRoaXMucm90YXRlVmlld3BvcnQocHgsIHB5LCBudWxsKTsN
CgkJdmFyIG15c2NhbGUgPSB0aGlzLmdldFNjYWxlKCk7DQoJCWdsdy5yZXNldE1vZGVsVmlldygp
Ow0KCQlnbHcuc2NhbGUobXlzY2FsZSwgbXlzY2FsZSk7DQoJCWdsdy5yb3RhdGVaKC10aGlzLmdl
dEFuZ2xlKCkpOw0KCQlnbHcudHJhbnNsYXRlKCh0aGlzLnZpZXdMZWZ0ICsgdGhpcy52aWV3Umln
aHQpIC8gLTIsICh0aGlzLnZpZXdUb3AgKyB0aGlzLnZpZXdCb3R0b20pIC8gLTIpOw0KCQlnbHcu
dXBkYXRlTW9kZWxWaWV3KCk7DQoJCXZhciBpbnN0YW5jZXNfdG9fZHJhdzsNCgkJaWYgKHRoaXMu
dXNlUmVuZGVyQ2VsbHMpDQoJCXsNCgkJCXRoaXMuY3VyX3JlbmRlcl9jZWxscy5sZWZ0ID0gdGhp
cy5yZW5kZXJfZ3JpZC5YVG9DZWxsKHRoaXMudmlld0xlZnQpOw0KCQkJdGhpcy5jdXJfcmVuZGVy
X2NlbGxzLnRvcCA9IHRoaXMucmVuZGVyX2dyaWQuWVRvQ2VsbCh0aGlzLnZpZXdUb3ApOw0KCQkJ
dGhpcy5jdXJfcmVuZGVyX2NlbGxzLnJpZ2h0ID0gdGhpcy5yZW5kZXJfZ3JpZC5YVG9DZWxsKHRo
aXMudmlld1JpZ2h0KTsNCgkJCXRoaXMuY3VyX3JlbmRlcl9jZWxscy5ib3R0b20gPSB0aGlzLnJl
bmRlcl9ncmlkLllUb0NlbGwodGhpcy52aWV3Qm90dG9tKTsNCgkJCWlmICh0aGlzLnJlbmRlcl9s
aXN0X3N0YWxlIHx8ICF0aGlzLmN1cl9yZW5kZXJfY2VsbHMuZXF1YWxzKHRoaXMubGFzdF9yZW5k
ZXJfY2VsbHMpKQ0KCQkJew0KCQkJCWZyZWVfYXJyKHRoaXMubGFzdF9yZW5kZXJfbGlzdCk7DQoJ
CQkJaW5zdGFuY2VzX3RvX2RyYXcgPSB0aGlzLmdldFJlbmRlckNlbGxJbnN0YW5jZXNUb0RyYXco
KTsNCgkJCQl0aGlzLnJlbmRlcl9saXN0X3N0YWxlID0gZmFsc2U7DQoJCQkJdGhpcy5sYXN0X3Jl
bmRlcl9jZWxscy5jb3B5KHRoaXMuY3VyX3JlbmRlcl9jZWxscyk7DQoJCQl9DQoJCQllbHNlDQoJ
CQkJaW5zdGFuY2VzX3RvX2RyYXcgPSB0aGlzLmxhc3RfcmVuZGVyX2xpc3Q7DQoJCX0NCgkJZWxz
ZQ0KCQkJaW5zdGFuY2VzX3RvX2RyYXcgPSB0aGlzLmluc3RhbmNlczsNCgkJdmFyIGksIGxlbiwg
aW5zdCwgbGFzdF9pbnN0ID0gbnVsbDsNCgkJZm9yIChpID0gMCwgbGVuID0gaW5zdGFuY2VzX3Rv
X2RyYXcubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCWluc3QgPSBpbnN0YW5jZXNfdG9f
ZHJhd1tpXTsNCgkJCWlmIChpbnN0ID09PSBsYXN0X2luc3QpDQoJCQkJY29udGludWU7DQoJCQl0
aGlzLmRyYXdJbnN0YW5jZUdMKGluc3RhbmNlc190b19kcmF3W2ldLCBnbHcpOw0KCQkJbGFzdF9p
bnN0ID0gaW5zdDsNCgkJfQ0KCQlpZiAodGhpcy51c2VSZW5kZXJDZWxscykNCgkJCXRoaXMubGFz
dF9yZW5kZXJfbGlzdCA9IGluc3RhbmNlc190b19kcmF3Ow0KCQlpZiAodGhpcy5yZW5kZXJfb2Zm
c2NyZWVuKQ0KCQl7DQoJCQlzaGFkZXJpbmRleCA9IHRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5s
ZW5ndGggPyB0aGlzLmFjdGl2ZV9lZmZlY3RfdHlwZXNbMF0uc2hhZGVyaW5kZXggOiAwOw0KCQkJ
ZXRpbmRleCA9IHRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5sZW5ndGggPyB0aGlzLmFjdGl2ZV9l
ZmZlY3RfdHlwZXNbMF0uaW5kZXggOiAwOw0KCQkJaWYgKHRoaXMuYWN0aXZlX2VmZmVjdF90eXBl
cy5sZW5ndGggPT09IDAgfHwgKHRoaXMuYWN0aXZlX2VmZmVjdF90eXBlcy5sZW5ndGggPT09IDEg
JiYNCgkJCQkhZ2x3LnByb2dyYW1Vc2VzQ3Jvc3NTYW1wbGluZyhzaGFkZXJpbmRleCkgJiYgdGhp
cy5vcGFjaXR5ID09PSAxKSkNCgkJCXsNCgkJCQlpZiAodGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVz
Lmxlbmd0aCA9PT0gMSkNCgkJCQl7DQoJCQkJCWdsdy5zd2l0Y2hQcm9ncmFtKHNoYWRlcmluZGV4
KTsNCgkJCQkJZ2x3LnNldFByb2dyYW1QYXJhbWV0ZXJzKHRoaXMubGF5b3V0LmdldFJlbmRlclRh
cmdldCgpLAkJLy8gYmFja1RleA0KCQkJCQkJCQkJCQkgMS4wIC8gdGhpcy5ydW50aW1lLmRyYXdf
d2lkdGgsCQkvLyBwaXhlbFdpZHRoDQoJCQkJCQkJCQkJCSAxLjAgLyB0aGlzLnJ1bnRpbWUuZHJh
d19oZWlnaHQsCS8vIHBpeGVsSGVpZ2h0DQoJCQkJCQkJCQkJCSAwLjAsIDAuMCwJCQkJCQkJLy8g
ZGVzdFN0YXJ0DQoJCQkJCQkJCQkJCSAxLjAsIDEuMCwJCQkJCQkJLy8gZGVzdEVuZA0KCQkJCQkJ
CQkJCQkgbXlzY2FsZSwJCQkJCQkJLy8gbGF5ZXJTY2FsZQ0KCQkJCQkJCQkJCQkgdGhpcy5nZXRB
bmdsZSgpLA0KCQkJCQkJCQkJCQkgdGhpcy52aWV3TGVmdCwgdGhpcy52aWV3VG9wLA0KCQkJCQkJ
CQkJCQkgKHRoaXMudmlld0xlZnQgKyB0aGlzLnZpZXdSaWdodCkgLyAyLCAodGhpcy52aWV3VG9w
ICsgdGhpcy52aWV3Qm90dG9tKSAvIDIsDQoJCQkJCQkJCQkJCSB0aGlzLnJ1bnRpbWUua2FoYW5U
aW1lLnN1bSwNCgkJCQkJCQkJCQkJIHRoaXMuZWZmZWN0X3BhcmFtc1tldGluZGV4XSk7CQkvLyBm
eCBwYXJhbWV0ZXJzDQoJCQkJCWlmIChnbHcucHJvZ3JhbUlzQW5pbWF0ZWQoc2hhZGVyaW5kZXgp
KQ0KCQkJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJ
CQkJZ2x3LnN3aXRjaFByb2dyYW0oMCk7DQoJCQkJZ2x3LnNldFJlbmRlcmluZ1RvVGV4dHVyZSh0
aGlzLmxheW91dC5nZXRSZW5kZXJUYXJnZXQoKSk7DQoJCQkJZ2x3LnNldE9wYWNpdHkodGhpcy5v
cGFjaXR5KTsNCgkJCQlnbHcuc2V0VGV4dHVyZSh0aGlzLnJ1bnRpbWUubGF5ZXJfdGV4KTsNCgkJ
CQlnbHcuc2V0QmxlbmQodGhpcy5zcmNCbGVuZCwgdGhpcy5kZXN0QmxlbmQpOw0KCQkJCWdsdy5y
ZXNldE1vZGVsVmlldygpOw0KCQkJCWdsdy51cGRhdGVNb2RlbFZpZXcoKTsNCgkJCQl2YXIgaGFs
ZncgPSB0aGlzLnJ1bnRpbWUuZHJhd193aWR0aCAvIDI7DQoJCQkJdmFyIGhhbGZoID0gdGhpcy5y
dW50aW1lLmRyYXdfaGVpZ2h0IC8gMjsNCgkJCQlnbHcucXVhZCgtaGFsZncsIGhhbGZoLCBoYWxm
dywgaGFsZmgsIGhhbGZ3LCAtaGFsZmgsIC1oYWxmdywgLWhhbGZoKTsNCgkJCQlnbHcuc2V0VGV4
dHVyZShudWxsKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLmxheW91dC5yZW5kZXJF
ZmZlY3RDaGFpbihnbHcsIHRoaXMsIG51bGwsIHRoaXMubGF5b3V0LmdldFJlbmRlclRhcmdldCgp
KTsNCgkJCX0NCgkJfQ0KCX07DQoJTGF5ZXIucHJvdG90eXBlLmRyYXdJbnN0YW5jZUdMID0gZnVu
Y3Rpb24gKGluc3QsIGdsdykNCgl7DQo7DQoJCWlmICghaW5zdC52aXNpYmxlIHx8IGluc3Qud2lk
dGggPT09IDAgfHwgaW5zdC5oZWlnaHQgPT09IDApDQoJCQlyZXR1cm47DQoJCWluc3QudXBkYXRl
X2Jib3goKTsNCgkJdmFyIGJib3ggPSBpbnN0LmJib3g7DQoJCWlmIChiYm94LnJpZ2h0IDwgdGhp
cy52aWV3TGVmdCB8fCBiYm94LmJvdHRvbSA8IHRoaXMudmlld1RvcCB8fCBiYm94LmxlZnQgPiB0
aGlzLnZpZXdSaWdodCB8fCBiYm94LnRvcCA+IHRoaXMudmlld0JvdHRvbSkNCgkJCXJldHVybjsN
CgkJZ2x3LnNldEVhcmx5WkluZGV4KGluc3QuZWFybHl6X2luZGV4KTsNCgkJaWYgKGluc3QudXNl
c19zaGFkZXJzKQ0KCQl7DQoJCQl0aGlzLmRyYXdJbnN0YW5jZVdpdGhTaGFkZXJzR0woaW5zdCwg
Z2x3KTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWdsdy5zd2l0Y2hQcm9ncmFtKDApOwkJLy8gdW4t
c2V0IGFueSBwcmV2aW91c2x5IHNldCBzaGFkZXINCgkJCWdsdy5zZXRCbGVuZChpbnN0LnNyY0Js
ZW5kLCBpbnN0LmRlc3RCbGVuZCk7DQoJCQlpbnN0LmRyYXdHTChnbHcpOw0KCQl9DQoJfTsNCglM
YXllci5wcm90b3R5cGUuZHJhd0luc3RhbmNlR0xfZWFybHlaUGFzcyA9IGZ1bmN0aW9uIChpbnN0
LCBnbHcpDQoJew0KOw0KCQlpZiAoIWluc3QudmlzaWJsZSB8fCBpbnN0LndpZHRoID09PSAwIHx8
IGluc3QuaGVpZ2h0ID09PSAwKQ0KCQkJcmV0dXJuOw0KCQlpbnN0LnVwZGF0ZV9iYm94KCk7DQoJ
CXZhciBiYm94ID0gaW5zdC5iYm94Ow0KCQlpZiAoYmJveC5yaWdodCA8IHRoaXMudmlld0xlZnQg
fHwgYmJveC5ib3R0b20gPCB0aGlzLnZpZXdUb3AgfHwgYmJveC5sZWZ0ID4gdGhpcy52aWV3Umln
aHQgfHwgYmJveC50b3AgPiB0aGlzLnZpZXdCb3R0b20pDQoJCQlyZXR1cm47DQoJCWluc3QuZWFy
bHl6X2luZGV4ID0gdGhpcy5ydW50aW1lLmVhcmx5el9pbmRleCsrOw0KCQlpZiAoaW5zdC5ibGVu
ZF9tb2RlICE9PSAwIHx8IGluc3Qub3BhY2l0eSAhPT0gMSB8fCAhaW5zdC5zaGFkZXJzX3ByZXNl
cnZlX29wYXF1ZW5lc3MgfHwgIWluc3QuZHJhd0dMX2Vhcmx5WlBhc3MpDQoJCQlyZXR1cm47DQoJ
CWdsdy5zZXRFYXJseVpJbmRleChpbnN0LmVhcmx5el9pbmRleCk7DQoJCWluc3QuZHJhd0dMX2Vh
cmx5WlBhc3MoZ2x3KTsNCgl9Ow0KCUxheWVyLnByb3RvdHlwZS5kcmF3SW5zdGFuY2VXaXRoU2hh
ZGVyc0dMID0gZnVuY3Rpb24gKGluc3QsIGdsdykNCgl7DQoJCXZhciBzaGFkZXJpbmRleCA9IGlu
c3QuYWN0aXZlX2VmZmVjdF90eXBlc1swXS5zaGFkZXJpbmRleDsNCgkJdmFyIGV0aW5kZXggPSBp
bnN0LmFjdGl2ZV9lZmZlY3RfdHlwZXNbMF0uaW5kZXg7DQoJCXZhciBteXNjYWxlID0gdGhpcy5n
ZXRTY2FsZSgpOw0KCQlpZiAoaW5zdC5hY3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aCA9PT0gMSAm
JiAhZ2x3LnByb2dyYW1Vc2VzQ3Jvc3NTYW1wbGluZyhzaGFkZXJpbmRleCkgJiYNCgkJCSFnbHcu
cHJvZ3JhbUV4dGVuZHNCb3goc2hhZGVyaW5kZXgpICYmICgoIWluc3QuYW5nbGUgJiYgIWluc3Qu
bGF5ZXIuZ2V0QW5nbGUoKSkgfHwgIWdsdy5wcm9ncmFtVXNlc0Rlc3Qoc2hhZGVyaW5kZXgpKSAm
Jg0KCQkJaW5zdC5vcGFjaXR5ID09PSAxICYmICFpbnN0LnR5cGUucGx1Z2luLm11c3RfcHJlZHJh
dykNCgkJew0KCQkJZ2x3LnN3aXRjaFByb2dyYW0oc2hhZGVyaW5kZXgpOw0KCQkJZ2x3LnNldEJs
ZW5kKGluc3Quc3JjQmxlbmQsIGluc3QuZGVzdEJsZW5kKTsNCgkJCWlmIChnbHcucHJvZ3JhbUlz
QW5pbWF0ZWQoc2hhZGVyaW5kZXgpKQ0KCQkJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0K
CQkJdmFyIGRlc3RTdGFydFggPSAwLCBkZXN0U3RhcnRZID0gMCwgZGVzdEVuZFggPSAwLCBkZXN0
RW5kWSA9IDA7DQoJCQlpZiAoZ2x3LnByb2dyYW1Vc2VzRGVzdChzaGFkZXJpbmRleCkpDQoJCQl7
DQoJCQkJdmFyIGJib3ggPSBpbnN0LmJib3g7DQoJCQkJdmFyIHNjcmVlbmxlZnQgPSB0aGlzLmxh
eWVyVG9DYW52YXMoYmJveC5sZWZ0LCBiYm94LnRvcCwgdHJ1ZSwgdHJ1ZSk7DQoJCQkJdmFyIHNj
cmVlbnRvcCA9IHRoaXMubGF5ZXJUb0NhbnZhcyhiYm94LmxlZnQsIGJib3gudG9wLCBmYWxzZSwg
dHJ1ZSk7DQoJCQkJdmFyIHNjcmVlbnJpZ2h0ID0gdGhpcy5sYXllclRvQ2FudmFzKGJib3gucmln
aHQsIGJib3guYm90dG9tLCB0cnVlLCB0cnVlKTsNCgkJCQl2YXIgc2NyZWVuYm90dG9tID0gdGhp
cy5sYXllclRvQ2FudmFzKGJib3gucmlnaHQsIGJib3guYm90dG9tLCBmYWxzZSwgdHJ1ZSk7DQoJ
CQkJZGVzdFN0YXJ0WCA9IHNjcmVlbmxlZnQgLyB3aW5kb3dXaWR0aDsNCgkJCQlkZXN0U3RhcnRZ
ID0gMSAtIHNjcmVlbnRvcCAvIHdpbmRvd0hlaWdodDsNCgkJCQlkZXN0RW5kWCA9IHNjcmVlbnJp
Z2h0IC8gd2luZG93V2lkdGg7DQoJCQkJZGVzdEVuZFkgPSAxIC0gc2NyZWVuYm90dG9tIC8gd2lu
ZG93SGVpZ2h0Ow0KCQkJfQ0KCQkJdmFyIHBpeGVsV2lkdGg7DQoJCQl2YXIgcGl4ZWxIZWlnaHQ7
DQoJCQlpZiAoaW5zdC5jdXJGcmFtZSAmJiBpbnN0LmN1ckZyYW1lLnRleHR1cmVfaW1nKQ0KCQkJ
ew0KCQkJCXZhciBpbWcgPSBpbnN0LmN1ckZyYW1lLnRleHR1cmVfaW1nOw0KCQkJCXBpeGVsV2lk
dGggPSAxLjAgLyBpbWcud2lkdGg7DQoJCQkJcGl4ZWxIZWlnaHQgPSAxLjAgLyBpbWcuaGVpZ2h0
Ow0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXBpeGVsV2lkdGggPSAxLjAgLyBpbnN0LndpZHRo
Ow0KCQkJCXBpeGVsSGVpZ2h0ID0gMS4wIC8gaW5zdC5oZWlnaHQ7DQoJCQl9DQoJCQlnbHcuc2V0
UHJvZ3JhbVBhcmFtZXRlcnModGhpcy5yZW5kZXJfb2Zmc2NyZWVuID8gdGhpcy5ydW50aW1lLmxh
eWVyX3RleCA6IHRoaXMubGF5b3V0LmdldFJlbmRlclRhcmdldCgpLCAvLyBiYWNrVGV4DQoJCQkJ
CQkJCQkgcGl4ZWxXaWR0aCwNCgkJCQkJCQkJCSBwaXhlbEhlaWdodCwNCgkJCQkJCQkJCSBkZXN0
U3RhcnRYLCBkZXN0U3RhcnRZLA0KCQkJCQkJCQkJIGRlc3RFbmRYLCBkZXN0RW5kWSwNCgkJCQkJ
CQkJCSBteXNjYWxlLA0KCQkJCQkJCQkJIHRoaXMuZ2V0QW5nbGUoKSwNCgkJCQkJCQkJCSB0aGlz
LnZpZXdMZWZ0LCB0aGlzLnZpZXdUb3AsDQoJCQkJCQkJCQkgKHRoaXMudmlld0xlZnQgKyB0aGlz
LnZpZXdSaWdodCkgLyAyLCAodGhpcy52aWV3VG9wICsgdGhpcy52aWV3Qm90dG9tKSAvIDIsDQoJ
CQkJCQkJCQkgdGhpcy5ydW50aW1lLmthaGFuVGltZS5zdW0sDQoJCQkJCQkJCQkgaW5zdC5lZmZl
Y3RfcGFyYW1zW2V0aW5kZXhdKTsNCgkJCWluc3QuZHJhd0dMKGdsdyk7DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQl0aGlzLmxheW91dC5yZW5kZXJFZmZlY3RDaGFpbihnbHcsIHRoaXMsIGluc3QsIHRo
aXMucmVuZGVyX29mZnNjcmVlbiA/IHRoaXMucnVudGltZS5sYXllcl90ZXggOiB0aGlzLmxheW91
dC5nZXRSZW5kZXJUYXJnZXQoKSk7DQoJCQlnbHcucmVzZXRNb2RlbFZpZXcoKTsNCgkJCWdsdy5z
Y2FsZShteXNjYWxlLCBteXNjYWxlKTsNCgkJCWdsdy5yb3RhdGVaKC10aGlzLmdldEFuZ2xlKCkp
Ow0KCQkJZ2x3LnRyYW5zbGF0ZSgodGhpcy52aWV3TGVmdCArIHRoaXMudmlld1JpZ2h0KSAvIC0y
LCAodGhpcy52aWV3VG9wICsgdGhpcy52aWV3Qm90dG9tKSAvIC0yKTsNCgkJCWdsdy51cGRhdGVN
b2RlbFZpZXcoKTsNCgkJfQ0KCX07DQoJTGF5ZXIucHJvdG90eXBlLmNhbnZhc1RvTGF5ZXIgPSBm
dW5jdGlvbiAocHR4LCBwdHksIGdldHgsIHVzaW5nX2RyYXdfYXJlYSkNCgl7DQoJCXZhciBtdWx0
aXBsaWVyID0gdGhpcy5ydW50aW1lLmRldmljZVBpeGVsUmF0aW87DQoJCWlmICh0aGlzLnJ1bnRp
bWUuaXNSZXRpbmEpDQoJCXsNCgkJCXB0eCAqPSBtdWx0aXBsaWVyOw0KCQkJcHR5ICo9IG11bHRp
cGxpZXI7DQoJCX0NCgkJdmFyIG94ID0gdGhpcy5ydW50aW1lLnBhcmFsbGF4X3hfb3JpZ2luOw0K
CQl2YXIgb3kgPSB0aGlzLnJ1bnRpbWUucGFyYWxsYXhfeV9vcmlnaW47DQoJCXZhciBwYXJfeCA9
ICgodGhpcy5sYXlvdXQuc2Nyb2xsWCAtIG94KSAqIHRoaXMucGFyYWxsYXhYKSArIG94Ow0KCQl2
YXIgcGFyX3kgPSAoKHRoaXMubGF5b3V0LnNjcm9sbFkgLSBveSkgKiB0aGlzLnBhcmFsbGF4WSkg
KyBveTsNCgkJdmFyIHggPSBwYXJfeDsNCgkJdmFyIHkgPSBwYXJfeTsNCgkJdmFyIGludlNjYWxl
ID0gMSAvIHRoaXMuZ2V0U2NhbGUoIXVzaW5nX2RyYXdfYXJlYSk7DQoJCWlmICh1c2luZ19kcmF3
X2FyZWEpDQoJCXsNCgkJCXggLT0gKHRoaXMucnVudGltZS5kcmF3X3dpZHRoICogaW52U2NhbGUp
IC8gMjsNCgkJCXkgLT0gKHRoaXMucnVudGltZS5kcmF3X2hlaWdodCAqIGludlNjYWxlKSAvIDI7
DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl4IC09ICh0aGlzLnJ1bnRpbWUud2lkdGggKiBpbnZTY2Fs
ZSkgLyAyOw0KCQkJeSAtPSAodGhpcy5ydW50aW1lLmhlaWdodCAqIGludlNjYWxlKSAvIDI7DQoJ
CX0NCgkJeCArPSBwdHggKiBpbnZTY2FsZTsNCgkJeSArPSBwdHkgKiBpbnZTY2FsZTsNCgkJdmFy
IGEgPSB0aGlzLmdldEFuZ2xlKCk7DQoJCWlmIChhICE9PSAwKQ0KCQl7DQoJCQl4IC09IHBhcl94
Ow0KCQkJeSAtPSBwYXJfeTsNCgkJCXZhciBjb3NhID0gTWF0aC5jb3MoYSk7DQoJCQl2YXIgc2lu
YSA9IE1hdGguc2luKGEpOw0KCQkJdmFyIHhfdGVtcCA9ICh4ICogY29zYSkgLSAoeSAqIHNpbmEp
Ow0KCQkJeSA9ICh5ICogY29zYSkgKyAoeCAqIHNpbmEpOw0KCQkJeCA9IHhfdGVtcDsNCgkJCXgg
Kz0gcGFyX3g7DQoJCQl5ICs9IHBhcl95Ow0KCQl9DQoJCXJldHVybiBnZXR4ID8geCA6IHk7DQoJ
fTsNCglMYXllci5wcm90b3R5cGUubGF5ZXJUb0NhbnZhcyA9IGZ1bmN0aW9uIChwdHgsIHB0eSwg
Z2V0eCwgdXNpbmdfZHJhd19hcmVhKQ0KCXsNCgkJdmFyIG94ID0gdGhpcy5ydW50aW1lLnBhcmFs
bGF4X3hfb3JpZ2luOw0KCQl2YXIgb3kgPSB0aGlzLnJ1bnRpbWUucGFyYWxsYXhfeV9vcmlnaW47
DQoJCXZhciBwYXJfeCA9ICgodGhpcy5sYXlvdXQuc2Nyb2xsWCAtIG94KSAqIHRoaXMucGFyYWxs
YXhYKSArIG94Ow0KCQl2YXIgcGFyX3kgPSAoKHRoaXMubGF5b3V0LnNjcm9sbFkgLSBveSkgKiB0
aGlzLnBhcmFsbGF4WSkgKyBveTsNCgkJdmFyIHggPSBwYXJfeDsNCgkJdmFyIHkgPSBwYXJfeTsN
CgkJdmFyIGEgPSB0aGlzLmdldEFuZ2xlKCk7DQoJCWlmIChhICE9PSAwKQ0KCQl7DQoJCQlwdHgg
LT0gcGFyX3g7DQoJCQlwdHkgLT0gcGFyX3k7DQoJCQl2YXIgY29zYSA9IE1hdGguY29zKC1hKTsN
CgkJCXZhciBzaW5hID0gTWF0aC5zaW4oLWEpOw0KCQkJdmFyIHhfdGVtcCA9IChwdHggKiBjb3Nh
KSAtIChwdHkgKiBzaW5hKTsNCgkJCXB0eSA9IChwdHkgKiBjb3NhKSArIChwdHggKiBzaW5hKTsN
CgkJCXB0eCA9IHhfdGVtcDsNCgkJCXB0eCArPSBwYXJfeDsNCgkJCXB0eSArPSBwYXJfeTsNCgkJ
fQ0KCQl2YXIgaW52U2NhbGUgPSAxIC8gdGhpcy5nZXRTY2FsZSghdXNpbmdfZHJhd19hcmVhKTsN
CgkJaWYgKHVzaW5nX2RyYXdfYXJlYSkNCgkJew0KCQkJeCAtPSAodGhpcy5ydW50aW1lLmRyYXdf
d2lkdGggKiBpbnZTY2FsZSkgLyAyOw0KCQkJeSAtPSAodGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0
ICogaW52U2NhbGUpIC8gMjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXggLT0gKHRoaXMucnVudGlt
ZS53aWR0aCAqIGludlNjYWxlKSAvIDI7DQoJCQl5IC09ICh0aGlzLnJ1bnRpbWUuaGVpZ2h0ICog
aW52U2NhbGUpIC8gMjsNCgkJfQ0KCQl4ID0gKHB0eCAtIHgpIC8gaW52U2NhbGU7DQoJCXkgPSAo
cHR5IC0geSkgLyBpbnZTY2FsZTsNCgkJdmFyIG11bHRpcGxpZXIgPSB0aGlzLnJ1bnRpbWUuZGV2
aWNlUGl4ZWxSYXRpbzsNCgkJaWYgKHRoaXMucnVudGltZS5pc1JldGluYSAmJiAhdXNpbmdfZHJh
d19hcmVhKQ0KCQl7DQoJCQl4IC89IG11bHRpcGxpZXI7DQoJCQl5IC89IG11bHRpcGxpZXI7DQoJ
CX0NCgkJcmV0dXJuIGdldHggPyB4IDogeTsNCgl9Ow0KCUxheWVyLnByb3RvdHlwZS5yb3RhdGVQ
dCA9IGZ1bmN0aW9uICh4XywgeV8sIGdldHgpDQoJew0KCQlpZiAodGhpcy5nZXRBbmdsZSgpID09
PSAwKQ0KCQkJcmV0dXJuIGdldHggPyB4XyA6IHlfOw0KCQl2YXIgbnggPSB0aGlzLmxheWVyVG9D
YW52YXMoeF8sIHlfLCB0cnVlKTsNCgkJdmFyIG55ID0gdGhpcy5sYXllclRvQ2FudmFzKHhfLCB5
XywgZmFsc2UpOw0KCQl0aGlzLmRpc2FibGVBbmdsZSA9IHRydWU7DQoJCXZhciBweCA9IHRoaXMu
Y2FudmFzVG9MYXllcihueCwgbnksIHRydWUpOw0KCQl2YXIgcHkgPSB0aGlzLmNhbnZhc1RvTGF5
ZXIobngsIG55LCB0cnVlKTsNCgkJdGhpcy5kaXNhYmxlQW5nbGUgPSBmYWxzZTsNCgkJcmV0dXJu
IGdldHggPyBweCA6IHB5Ow0KCX07DQoJTGF5ZXIucHJvdG90eXBlLnNhdmVUb0pTT04gPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxlbiwgZXQ7DQoJCXZhciBvID0gew0KCQkJInMiOiB0aGlz
LnNjYWxlLA0KCQkJImEiOiB0aGlzLmFuZ2xlLA0KCQkJInZsIjogdGhpcy52aWV3TGVmdCwNCgkJ
CSJ2dCI6IHRoaXMudmlld1RvcCwNCgkJCSJ2ciI6IHRoaXMudmlld1JpZ2h0LA0KCQkJInZiIjog
dGhpcy52aWV3Qm90dG9tLA0KCQkJInYiOiB0aGlzLnZpc2libGUsDQoJCQkiYmMiOiB0aGlzLmJh
Y2tncm91bmRfY29sb3IsDQoJCQkidCI6IHRoaXMudHJhbnNwYXJlbnQsDQoJCQkicHgiOiB0aGlz
LnBhcmFsbGF4WCwNCgkJCSJweSI6IHRoaXMucGFyYWxsYXhZLA0KCQkJIm8iOiB0aGlzLm9wYWNp
dHksDQoJCQkienIiOiB0aGlzLnpvb21SYXRlLA0KCQkJImZ4IjogW10sDQoJCQkiY2ciOiB0aGlz
LmNyZWF0ZWRfZ2xvYmFscywJCS8vIGFkZGVkIHIxOTc7IGxpc3Qgb2YgZ2xvYmFsIFVJRHMgYWxy
ZWFkeSBjcmVhdGVkDQoJCQkiaW5zdGFuY2VzIjogW10NCgkJfTsNCgkJZm9yIChpID0gMCwgbGVu
ID0gdGhpcy5lZmZlY3RfdHlwZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWV0ID0g
dGhpcy5lZmZlY3RfdHlwZXNbaV07DQoJCQlvWyJmeCJdLnB1c2goeyJuYW1lIjogZXQubmFtZSwg
ImFjdGl2ZSI6IGV0LmFjdGl2ZSwgInBhcmFtcyI6IHRoaXMuZWZmZWN0X3BhcmFtc1tldC5pbmRl
eF0gfSk7DQoJCX0NCgkJcmV0dXJuIG87DQoJfTsNCglMYXllci5wcm90b3R5cGUubG9hZEZyb21K
U09OID0gZnVuY3Rpb24gKG8pDQoJew0KCQl2YXIgaSwgaiwgbGVuLCBwLCBpbnN0LCBmeDsNCgkJ
dGhpcy5zY2FsZSA9IG9bInMiXTsNCgkJdGhpcy5hbmdsZSA9IG9bImEiXTsNCgkJdGhpcy52aWV3
TGVmdCA9IG9bInZsIl07DQoJCXRoaXMudmlld1RvcCA9IG9bInZ0Il07DQoJCXRoaXMudmlld1Jp
Z2h0ID0gb1sidnIiXTsNCgkJdGhpcy52aWV3Qm90dG9tID0gb1sidmIiXTsNCgkJdGhpcy52aXNp
YmxlID0gb1sidiJdOw0KCQl0aGlzLmJhY2tncm91bmRfY29sb3IgPSBvWyJiYyJdOw0KCQl0aGlz
LnRyYW5zcGFyZW50ID0gb1sidCJdOw0KCQl0aGlzLnBhcmFsbGF4WCA9IG9bInB4Il07DQoJCXRo
aXMucGFyYWxsYXhZID0gb1sicHkiXTsNCgkJdGhpcy5vcGFjaXR5ID0gb1sibyJdOw0KCQl0aGlz
Lnpvb21SYXRlID0gb1sienIiXTsNCgkJdGhpcy5jcmVhdGVkX2dsb2JhbHMgPSBvWyJjZyJdIHx8
IFtdOwkJLy8gYWRkZWQgcjE5Nw0KCQljci5zaGFsbG93QXNzaWduQXJyYXkodGhpcy5pbml0aWFs
X2luc3RhbmNlcywgdGhpcy5zdGFydHVwX2luaXRpYWxfaW5zdGFuY2VzKTsNCgkJdmFyIHRlbXBf
c2V0ID0gbmV3IGNyLk9iamVjdFNldCgpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmNyZWF0
ZWRfZ2xvYmFscy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCXRlbXBfc2V0LmFkZCh0aGlzLmNy
ZWF0ZWRfZ2xvYmFsc1tpXSk7DQoJCWZvciAoaSA9IDAsIGogPSAwLCBsZW4gPSB0aGlzLmluaXRp
YWxfaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlpZiAoIXRlbXBfc2V0
LmNvbnRhaW5zKHRoaXMuaW5pdGlhbF9pbnN0YW5jZXNbaV1bMl0pKQkJLy8gVUlEIGluIGVsZW1l
bnQgMg0KCQkJew0KCQkJCXRoaXMuaW5pdGlhbF9pbnN0YW5jZXNbal0gPSB0aGlzLmluaXRpYWxf
aW5zdGFuY2VzW2ldOw0KCQkJCSsrajsNCgkJCX0NCgkJfQ0KCQljci50cnVuY2F0ZUFycmF5KHRo
aXMuaW5pdGlhbF9pbnN0YW5jZXMsIGopOw0KCQl2YXIgb2Z4ID0gb1siZngiXTsNCgkJZm9yIChp
ID0gMCwgbGVuID0gb2Z4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlmeCA9IHRoaXMu
Z2V0RWZmZWN0QnlOYW1lKG9meFtpXVsibmFtZSJdKTsNCgkJCWlmICghZngpDQoJCQkJY29udGlu
dWU7CQkvLyBtdXN0J3ZlIGdvbmUgbWlzc2luZw0KCQkJZnguYWN0aXZlID0gb2Z4W2ldWyJhY3Rp
dmUiXTsNCgkJCXRoaXMuZWZmZWN0X3BhcmFtc1tmeC5pbmRleF0gPSBvZnhbaV1bInBhcmFtcyJd
Ow0KCQl9DQoJCXRoaXMudXBkYXRlQWN0aXZlRWZmZWN0cygpOw0KCQl0aGlzLmluc3RhbmNlcy5z
b3J0KHNvcnRfYnlfemluZGV4KTsNCgkJdGhpcy56aW5kaWNlc19zdGFsZSA9IHRydWU7DQoJfTsN
Cgljci5sYXllciA9IExheWVyOw0KfSgpKTsNCjsNCihmdW5jdGlvbigpDQp7DQoJdmFyIGFsbFVu
aXF1ZVNvbE1vZGlmaWVycyA9IFtdOw0KCWZ1bmN0aW9uIHRlc3RTb2xzTWF0Y2goYXJyMSwgYXJy
MikNCgl7DQoJCXZhciBpLCBsZW4gPSBhcnIxLmxlbmd0aDsNCgkJc3dpdGNoIChsZW4pIHsNCgkJ
Y2FzZSAwOg0KCQkJcmV0dXJuIHRydWU7DQoJCWNhc2UgMToNCgkJCXJldHVybiBhcnIxWzBdID09
PSBhcnIyWzBdOw0KCQljYXNlIDI6DQoJCQlyZXR1cm4gYXJyMVswXSA9PT0gYXJyMlswXSAmJiBh
cnIxWzFdID09PSBhcnIyWzFdOw0KCQlkZWZhdWx0Og0KCQkJZm9yIChpID0gMDsgaSA8IGxlbjsg
aSsrKQ0KCQkJew0KCQkJCWlmIChhcnIxW2ldICE9PSBhcnIyW2ldKQ0KCQkJCQlyZXR1cm4gZmFs
c2U7DQoJCQl9DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCX07DQoJZnVuY3Rpb24gc29sQXJyYXlT
b3J0ZXIodDEsIHQyKQ0KCXsNCgkJcmV0dXJuIHQxLmluZGV4IC0gdDIuaW5kZXg7DQoJfTsNCglm
dW5jdGlvbiBmaW5kTWF0Y2hpbmdTb2xNb2RpZmllcihhcnIpDQoJew0KCQl2YXIgaSwgbGVuLCB1
LCB0ZW1wLCBzdWJhcnI7DQoJCWlmIChhcnIubGVuZ3RoID09PSAyKQ0KCQl7DQoJCQlpZiAoYXJy
WzBdLmluZGV4ID4gYXJyWzFdLmluZGV4KQ0KCQkJew0KCQkJCXRlbXAgPSBhcnJbMF07DQoJCQkJ
YXJyWzBdID0gYXJyWzFdOw0KCQkJCWFyclsxXSA9IHRlbXA7DQoJCQl9DQoJCX0NCgkJZWxzZSBp
ZiAoYXJyLmxlbmd0aCA+IDIpDQoJCQlhcnIuc29ydChzb2xBcnJheVNvcnRlcik7CQkvLyBzbyB0
ZXN0U29sc01hdGNoIGNvbXBhcmVzIGluIHNhbWUgb3JkZXINCgkJaWYgKGFyci5sZW5ndGggPj0g
YWxsVW5pcXVlU29sTW9kaWZpZXJzLmxlbmd0aCkNCgkJCWFsbFVuaXF1ZVNvbE1vZGlmaWVycy5s
ZW5ndGggPSBhcnIubGVuZ3RoICsgMTsNCgkJaWYgKCFhbGxVbmlxdWVTb2xNb2RpZmllcnNbYXJy
Lmxlbmd0aF0pDQoJCQlhbGxVbmlxdWVTb2xNb2RpZmllcnNbYXJyLmxlbmd0aF0gPSBbXTsNCgkJ
c3ViYXJyID0gYWxsVW5pcXVlU29sTW9kaWZpZXJzW2Fyci5sZW5ndGhdOw0KCQlmb3IgKGkgPSAw
LCBsZW4gPSBzdWJhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXUgPSBzdWJhcnJb
aV07DQoJCQlpZiAodGVzdFNvbHNNYXRjaChhcnIsIHUpKQ0KCQkJCXJldHVybiB1Ow0KCQl9DQoJ
CXN1YmFyci5wdXNoKGFycik7DQoJCXJldHVybiBhcnI7DQoJfTsNCglmdW5jdGlvbiBFdmVudFNo
ZWV0KHJ1bnRpbWUsIG0pDQoJew0KCQl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0KCQl0aGlzLnRy
aWdnZXJzID0ge307DQoJCXRoaXMuZmFzdHRyaWdnZXJzID0ge307DQogICAgICAgIHRoaXMuaGFz
UnVuID0gZmFsc2U7DQogICAgICAgIHRoaXMuaW5jbHVkZXMgPSBuZXcgY3IuT2JqZWN0U2V0KCk7
IAkvLyBhbGwgZXZlbnQgc2hlZXRzIGluY2x1ZGVkIGJ5IHRoaXMgc2hlZXQsIGF0IGZpcnN0LWxl
dmVsIGluZGlyZWN0aW9uIG9ubHkNCgkJdGhpcy5kZWVwX2luY2x1ZGVzID0gW107CQkJCS8vIGFs
bCBpbmNsdWRlcyBmcm9tIHRoaXMgc2hlZXQgcmVjdXJzaXZlbHksIGluIHRyaWdnZXIgb3JkZXIN
CgkJdGhpcy5hbHJlYWR5X2luY2x1ZGVkX3NoZWV0cyA9IFtdOwkJLy8gdXNlZCB3aGlsZSBidWls
ZGluZyBkZWVwX2luY2x1ZGVzDQoJCXRoaXMubmFtZSA9IG1bMF07DQoJCXZhciBlbSA9IG1bMV07
CQkvLyBldmVudHMgbW9kZWwNCgkJdGhpcy5ldmVudHMgPSBbXTsgICAgICAgLy8gdHJpZ2dlcnMg
d29uJ3QgbWFrZSBpdCB0byB0aGlzIGFycmF5DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAs
IGxlbiA9IGVtLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGhpcy5pbml0X2V2ZW50KGVtW2ld
LCBudWxsLCB0aGlzLmV2ZW50cyk7DQoJfTsNCiAgICBFdmVudFNoZWV0LnByb3RvdHlwZS50b1N0
cmluZyA9IGZ1bmN0aW9uICgpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5uYW1lOw0KICAg
IH07DQoJRXZlbnRTaGVldC5wcm90b3R5cGUuaW5pdF9ldmVudCA9IGZ1bmN0aW9uIChtLCBwYXJl
bnQsIG5vbnRyaWdnZXJzKQ0KCXsNCgkJc3dpdGNoIChtWzBdKSB7DQoJCWNhc2UgMDoJLy8gZXZl
bnQgYmxvY2sNCgkJew0KCQkJdmFyIGJsb2NrID0gbmV3IGNyLmV2ZW50YmxvY2sodGhpcywgcGFy
ZW50LCBtKTsNCgkJCWNyLnNlYWwoYmxvY2spOw0KCQkJaWYgKGJsb2NrLm9yYmxvY2spDQoJCQl7
DQoJCQkJbm9udHJpZ2dlcnMucHVzaChibG9jayk7DQoJCQkJdmFyIGksIGxlbjsNCgkJCQlmb3Ig
KGkgPSAwLCBsZW4gPSBibG9jay5jb25kaXRpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJ
CXsNCgkJCQkJaWYgKGJsb2NrLmNvbmRpdGlvbnNbaV0udHJpZ2dlcikNCgkJCQkJCXRoaXMuaW5p
dF90cmlnZ2VyKGJsb2NrLCBpKTsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYg
KGJsb2NrLmlzX3RyaWdnZXIoKSkNCgkJCQkJdGhpcy5pbml0X3RyaWdnZXIoYmxvY2ssIDApOw0K
CQkJCWVsc2UNCgkJCQkJbm9udHJpZ2dlcnMucHVzaChibG9jayk7DQoJCQl9DQoJCQlicmVhazsN
CgkJfQ0KCQljYXNlIDE6IC8vIHZhcmlhYmxlDQoJCXsNCgkJCXZhciB2ID0gbmV3IGNyLmV2ZW50
dmFyaWFibGUodGhpcywgcGFyZW50LCBtKTsNCgkJCWNyLnNlYWwodik7DQoJCQlub250cmlnZ2Vy
cy5wdXNoKHYpOw0KCQkJYnJlYWs7DQoJCX0NCiAgICAgICAgY2FzZSAyOgkvLyBpbmNsdWRlDQog
ICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpbmMgPSBuZXcgY3IuZXZlbnRpbmNsdWRlKHRoaXMs
IHBhcmVudCwgbSk7DQoJCQljci5zZWFsKGluYyk7DQogICAgICAgICAgICBub250cmlnZ2Vycy5w
dXNoKGluYyk7DQoJCQlicmVhazsNCiAgICAgICAgfQ0KCQlkZWZhdWx0Og0KOw0KCQl9DQoJfTsN
CglFdmVudFNoZWV0LnByb3RvdHlwZS5wb3N0SW5pdCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIg
aSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmV2ZW50cy5sZW5ndGg7IGkgPCBsZW47
IGkrKykNCgkJew0KCQkJdGhpcy5ldmVudHNbaV0ucG9zdEluaXQoaSA8IGxlbiAtIDEgJiYgdGhp
cy5ldmVudHNbaSArIDFdLmlzX2Vsc2VfYmxvY2spOw0KCQl9DQoJfTsNCglFdmVudFNoZWV0LnBy
b3RvdHlwZS51cGRhdGVEZWVwSW5jbHVkZXMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJY3IuY2xlYXJB
cnJheSh0aGlzLmRlZXBfaW5jbHVkZXMpOw0KCQljci5jbGVhckFycmF5KHRoaXMuYWxyZWFkeV9p
bmNsdWRlZF9zaGVldHMpOw0KCQl0aGlzLmFkZERlZXBJbmNsdWRlcyh0aGlzKTsNCgkJY3IuY2xl
YXJBcnJheSh0aGlzLmFscmVhZHlfaW5jbHVkZWRfc2hlZXRzKTsNCgl9Ow0KCUV2ZW50U2hlZXQu
cHJvdG90eXBlLmFkZERlZXBJbmNsdWRlcyA9IGZ1bmN0aW9uIChyb290X3NoZWV0KQ0KCXsNCgkJ
dmFyIGksIGxlbiwgaW5jLCBzaGVldDsNCgkJdmFyIGRlZXBfaW5jbHVkZXMgPSByb290X3NoZWV0
LmRlZXBfaW5jbHVkZXM7DQoJCXZhciBhbHJlYWR5X2luY2x1ZGVkX3NoZWV0cyA9IHJvb3Rfc2hl
ZXQuYWxyZWFkeV9pbmNsdWRlZF9zaGVldHM7DQoJCXZhciBhcnIgPSB0aGlzLmluY2x1ZGVzLnZh
bHVlc1JlZigpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyArK2kp
DQoJCXsNCgkJCWluYyA9IGFycltpXTsNCgkJCXNoZWV0ID0gaW5jLmluY2x1ZGVfc2hlZXQ7DQoJ
CQlpZiAoIWluYy5pc0FjdGl2ZSgpIHx8IHJvb3Rfc2hlZXQgPT09IHNoZWV0IHx8IGFscmVhZHlf
aW5jbHVkZWRfc2hlZXRzLmluZGV4T2Yoc2hlZXQpID4gLTEpDQoJCQkJY29udGludWU7DQoJCQlh
bHJlYWR5X2luY2x1ZGVkX3NoZWV0cy5wdXNoKHNoZWV0KTsNCgkJCXNoZWV0LmFkZERlZXBJbmNs
dWRlcyhyb290X3NoZWV0KTsNCgkJCWRlZXBfaW5jbHVkZXMucHVzaChzaGVldCk7DQoJCX0NCgl9
Ow0KCUV2ZW50U2hlZXQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChmcm9tX2luY2x1ZGUpDQoJ
ew0KCQlpZiAoIXRoaXMucnVudGltZS5yZXN1bWluZ19icmVha3BvaW50KQ0KCQl7DQoJCQl0aGlz
Lmhhc1J1biA9IHRydWU7DQoJCQlpZiAoIWZyb21faW5jbHVkZSkNCgkJCQl0aGlzLnJ1bnRpbWUu
aXNSdW5uaW5nRXZlbnRzID0gdHJ1ZTsNCgkJfQ0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAw
LCBsZW4gPSB0aGlzLmV2ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJdmFyIGV2
ID0gdGhpcy5ldmVudHNbaV07DQoJCQlldi5ydW4oKTsNCgkJCQl0aGlzLnJ1bnRpbWUuY2xlYXJT
b2woZXYuc29sTW9kaWZpZXJzKTsNCgkJCQlpZiAodGhpcy5ydW50aW1lLmhhc1BlbmRpbmdJbnN0
YW5jZXMpDQoJCQkJCXRoaXMucnVudGltZS5DbGVhckRlYXRoUm93KCk7DQoJCX0NCgkJCWlmICgh
ZnJvbV9pbmNsdWRlKQ0KCQkJCXRoaXMucnVudGltZS5pc1J1bm5pbmdFdmVudHMgPSBmYWxzZTsN
Cgl9Ow0KCWZ1bmN0aW9uIGlzUGVyZm9ybWFuY2VTZW5zaXRpdmVUcmlnZ2VyKG1ldGhvZCkNCgl7
DQoJCWlmIChjci5wbHVnaW5zXy5TcHJpdGUgJiYgbWV0aG9kID09PSBjci5wbHVnaW5zXy5TcHJp
dGUucHJvdG90eXBlLmNuZHMuT25GcmFtZUNoYW5nZWQpDQoJCXsNCgkJCXJldHVybiB0cnVlOw0K
CQl9DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCUV2ZW50U2hlZXQucHJvdG90eXBlLmluaXRfdHJp
Z2dlciA9IGZ1bmN0aW9uICh0cmlnLCBpbmRleCkNCgl7DQoJCWlmICghdHJpZy5vcmJsb2NrKQ0K
CQkJdGhpcy5ydW50aW1lLnRyaWdnZXJzX3RvX3Bvc3Rpbml0LnB1c2godHJpZyk7CS8vIG5lZWRz
IHRvIGJlIHBvc3RJbml0J2QgbGF0ZXINCgkJdmFyIGksIGxlbjsNCgkJdmFyIGNuZCA9IHRyaWcu
Y29uZGl0aW9uc1tpbmRleF07DQoJCXZhciB0eXBlX25hbWU7DQoJCWlmIChjbmQudHlwZSkNCgkJ
CXR5cGVfbmFtZSA9IGNuZC50eXBlLm5hbWU7DQoJCWVsc2UNCgkJCXR5cGVfbmFtZSA9ICJzeXN0
ZW0iOw0KCQl2YXIgZmFzdHRyaWdnZXIgPSBjbmQuZmFzdHRyaWdnZXI7DQoJCXZhciB0cmlnZ2Vy
cyA9IChmYXN0dHJpZ2dlciA/IHRoaXMuZmFzdHRyaWdnZXJzIDogdGhpcy50cmlnZ2Vycyk7DQoJ
CWlmICghdHJpZ2dlcnNbdHlwZV9uYW1lXSkNCgkJCXRyaWdnZXJzW3R5cGVfbmFtZV0gPSBbXTsN
CgkJdmFyIG9ial9lbnRyeSA9IHRyaWdnZXJzW3R5cGVfbmFtZV07DQoJCXZhciBtZXRob2QgPSBj
bmQuZnVuYzsNCgkJaWYgKGZhc3R0cmlnZ2VyKQ0KCQl7DQoJCQlpZiAoIWNuZC5wYXJhbWV0ZXJz
Lmxlbmd0aCkJCQkJLy8gbm8gcGFyYW1ldGVycw0KCQkJCXJldHVybjsNCgkJCXZhciBmaXJzdHBh
cmFtID0gY25kLnBhcmFtZXRlcnNbMF07DQoJCQlpZiAoZmlyc3RwYXJhbS50eXBlICE9PSAxIHx8
CQkJLy8gbm90IGEgc3RyaW5nIHBhcmFtDQoJCQkJZmlyc3RwYXJhbS5leHByZXNzaW9uLnR5cGUg
IT09IDIpCS8vIG5vdCBhIHN0cmluZyBsaXRlcmFsIG5vZGUNCgkJCXsNCgkJCQlyZXR1cm47DQoJ
CQl9DQoJCQl2YXIgZmFzdGV2czsNCgkJCXZhciBmaXJzdHZhbHVlID0gZmlyc3RwYXJhbS5leHBy
ZXNzaW9uLnZhbHVlLnRvTG93ZXJDYXNlKCk7DQoJCQl2YXIgaSwgbGVuOw0KCQkJZm9yIChpID0g
MCwgbGVuID0gb2JqX2VudHJ5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCWlmIChv
YmpfZW50cnlbaV0ubWV0aG9kID09IG1ldGhvZCkNCgkJCQl7DQoJCQkJCWZhc3RldnMgPSBvYmpf
ZW50cnlbaV0uZXZzOw0KCQkJCQlpZiAoIWZhc3RldnNbZmlyc3R2YWx1ZV0pDQoJCQkJCQlmYXN0
ZXZzW2ZpcnN0dmFsdWVdID0gW1t0cmlnLCBpbmRleF1dOw0KCQkJCQllbHNlDQoJCQkJCQlmYXN0
ZXZzW2ZpcnN0dmFsdWVdLnB1c2goW3RyaWcsIGluZGV4XSk7DQoJCQkJCXJldHVybjsNCgkJCQl9
DQoJCQl9DQoJCQlmYXN0ZXZzID0ge307DQoJCQlmYXN0ZXZzW2ZpcnN0dmFsdWVdID0gW1t0cmln
LCBpbmRleF1dOw0KCQkJb2JqX2VudHJ5LnB1c2goeyBtZXRob2Q6IG1ldGhvZCwgZXZzOiBmYXN0
ZXZzIH0pOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gb2JqX2VudHJ5
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCWlmIChvYmpfZW50cnlbaV0ubWV0aG9k
ID09IG1ldGhvZCkNCgkJCQl7DQoJCQkJCW9ial9lbnRyeVtpXS5ldnMucHVzaChbdHJpZywgaW5k
ZXhdKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCX0NCgkJCWlmIChpc1BlcmZvcm1hbmNlU2Vu
c2l0aXZlVHJpZ2dlcihtZXRob2QpKQ0KCQkJCW9ial9lbnRyeS51bnNoaWZ0KHsgbWV0aG9kOiBt
ZXRob2QsIGV2czogW1t0cmlnLCBpbmRleF1dfSk7DQoJCQllbHNlDQoJCQkJb2JqX2VudHJ5LnB1
c2goeyBtZXRob2Q6IG1ldGhvZCwgZXZzOiBbW3RyaWcsIGluZGV4XV19KTsNCgkJfQ0KCX07DQoJ
Y3IuZXZlbnRzaGVldCA9IEV2ZW50U2hlZXQ7DQoJZnVuY3Rpb24gU2VsZWN0aW9uKHR5cGUpDQoJ
ew0KCQl0aGlzLnR5cGUgPSB0eXBlOw0KCQl0aGlzLmluc3RhbmNlcyA9IFtdOyAgICAgICAgLy8g
c3Vic2V0IG9mIHBpY2tlZCBpbnN0YW5jZXMNCgkJdGhpcy5lbHNlX2luc3RhbmNlcyA9IFtdOwkv
LyBzdWJzZXQgb2YgdW5waWNrZWQgaW5zdGFuY2VzDQoJCXRoaXMuc2VsZWN0X2FsbCA9IHRydWU7
DQoJfTsNCglTZWxlY3Rpb24ucHJvdG90eXBlLmhhc09iamVjdHMgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJaWYgKHRoaXMuc2VsZWN0X2FsbCkNCgkJCXJldHVybiB0aGlzLnR5cGUuaW5zdGFuY2VzLmxl
bmd0aDsNCgkJZWxzZQ0KCQkJcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmxlbmd0aDsNCgl9Ow0KCVNl
bGVjdGlvbi5wcm90b3R5cGUuZ2V0T2JqZWN0cyA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhp
cy5zZWxlY3RfYWxsKQ0KCQkJcmV0dXJuIHRoaXMudHlwZS5pbnN0YW5jZXM7DQoJCWVsc2UNCgkJ
CXJldHVybiB0aGlzLmluc3RhbmNlczsNCgl9Ow0KCS8qDQoJU2VsZWN0aW9uLnByb3RvdHlwZS5l
bnN1cmVfcGlja2VkID0gZnVuY3Rpb24gKGluc3QsIHNraXBfc2libGluZ3MpDQoJew0KCQl2YXIg
aSwgbGVuOw0KCQl2YXIgb3JibG9jayA9IGluc3QucnVudGltZS5nZXRDdXJyZW50RXZlbnRTdGFj
aygpLmN1cnJlbnRfZXZlbnQub3JibG9jazsNCgkJaWYgKHRoaXMuc2VsZWN0X2FsbCkNCgkJew0K
CQkJdGhpcy5zZWxlY3RfYWxsID0gZmFsc2U7DQoJCQlpZiAob3JibG9jaykNCgkJCXsNCgkJCQlj
ci5zaGFsbG93QXNzaWduQXJyYXkodGhpcy5lbHNlX2luc3RhbmNlcywgaW5zdC50eXBlLmluc3Rh
bmNlcyk7DQoJCQkJY3IuYXJyYXlGaW5kUmVtb3ZlKHRoaXMuZWxzZV9pbnN0YW5jZXMsIGluc3Qp
Ow0KCQkJfQ0KCQkJdGhpcy5pbnN0YW5jZXMubGVuZ3RoID0gMTsNCgkJCXRoaXMuaW5zdGFuY2Vz
WzBdID0gaW5zdDsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChvcmJsb2NrKQ0KCQkJew0KCQkJ
CWkgPSB0aGlzLmVsc2VfaW5zdGFuY2VzLmluZGV4T2YoaW5zdCk7DQoJCQkJaWYgKGkgIT09IC0x
KQ0KCQkJCXsNCgkJCQkJdGhpcy5pbnN0YW5jZXMucHVzaCh0aGlzLmVsc2VfaW5zdGFuY2VzW2ld
KTsNCgkJCQkJdGhpcy5lbHNlX2luc3RhbmNlcy5zcGxpY2UoaSwgMSk7DQoJCQkJfQ0KCQkJfQ0K
CQkJZWxzZQ0KCQkJew0KCQkJCWlmICh0aGlzLmluc3RhbmNlcy5pbmRleE9mKGluc3QpID09PSAt
MSkNCgkJCQkJdGhpcy5pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJCX0NCgkJfQ0KCQlpZiAoIXNr
aXBfc2libGluZ3MpDQoJCXsNCgkJfQ0KCX07DQoJKi8NCglTZWxlY3Rpb24ucHJvdG90eXBlLnBp
Y2tfb25lID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQlpZiAoIWluc3QpDQoJCQlyZXR1cm47DQoJ
CWlmIChpbnN0LnJ1bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKS5jdXJyZW50X2V2ZW50Lm9y
YmxvY2spDQoJCXsNCgkJCWlmICh0aGlzLnNlbGVjdF9hbGwpDQoJCQl7DQoJCQkJY3IuY2xlYXJB
cnJheSh0aGlzLmluc3RhbmNlcyk7DQoJCQkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHRoaXMuZWxz
ZV9pbnN0YW5jZXMsIGluc3QudHlwZS5pbnN0YW5jZXMpOw0KCQkJCXRoaXMuc2VsZWN0X2FsbCA9
IGZhbHNlOw0KCQkJfQ0KCQkJdmFyIGkgPSB0aGlzLmVsc2VfaW5zdGFuY2VzLmluZGV4T2YoaW5z
dCk7DQoJCQlpZiAoaSAhPT0gLTEpDQoJCQl7DQoJCQkJdGhpcy5pbnN0YW5jZXMucHVzaCh0aGlz
LmVsc2VfaW5zdGFuY2VzW2ldKTsNCgkJCQl0aGlzLmVsc2VfaW5zdGFuY2VzLnNwbGljZShpLCAx
KTsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRoaXMuc2VsZWN0X2FsbCA9IGZhbHNlOw0K
CQkJY3IuY2xlYXJBcnJheSh0aGlzLmluc3RhbmNlcyk7DQoJCQl0aGlzLmluc3RhbmNlc1swXSA9
IGluc3Q7DQoJCX0NCgl9Ow0KCWNyLnNlbGVjdGlvbiA9IFNlbGVjdGlvbjsNCglmdW5jdGlvbiBF
dmVudEJsb2NrKHNoZWV0LCBwYXJlbnQsIG0pDQoJew0KCQl0aGlzLnNoZWV0ID0gc2hlZXQ7DQoJ
CXRoaXMucGFyZW50ID0gcGFyZW50Ow0KCQl0aGlzLnJ1bnRpbWUgPSBzaGVldC5ydW50aW1lOw0K
CQl0aGlzLnNvbE1vZGlmaWVycyA9IFtdOw0KCQl0aGlzLnNvbE1vZGlmaWVyc0luY2x1ZGluZ1Bh
cmVudHMgPSBbXTsNCgkJdGhpcy5zb2xXcml0ZXJBZnRlckNuZHMgPSBmYWxzZTsJLy8gYmxvY2sg
ZG9lcyBub3QgY2hhbmdlIFNPTCBhZnRlciBydW5uaW5nIGl0cyBjb25kaXRpb25zDQoJCXRoaXMu
Z3JvdXAgPSBmYWxzZTsJCQkJCS8vIGlzIGdyb3VwIG9mIGV2ZW50cw0KCQl0aGlzLmluaXRpYWxs
eV9hY3RpdmF0ZWQgPSBmYWxzZTsJLy8gaWYgYSBncm91cCwgaXMgYWN0aXZlIG9uIHN0YXJ0dXAN
CgkJdGhpcy50b3BsZXZlbGV2ZW50ID0gZmFsc2U7CQkJLy8gaXMgYW4gZXZlbnQgYmxvY2sgcGFy
ZW50ZWQgb25seSBieSBhIHRvcC1sZXZlbCBncm91cA0KCQl0aGlzLnRvcGxldmVsZ3JvdXAgPSBm
YWxzZTsJCQkvLyBpcyBwYXJlbnRlZCBvbmx5IGJ5IG90aGVyIGdyb3VwcyBvciBpcyB0b3AtbGV2
ZWwgKGkuZS4gbm90IGluIGEgc3ViZXZlbnQpDQoJCXRoaXMuaGFzX2Vsc2VfYmxvY2sgPSBmYWxz
ZTsJCS8vIGlzIGZvbGxvd2VkIGJ5IGVsc2UNCjsNCgkJdGhpcy5jb25kaXRpb25zID0gW107DQoJ
CXRoaXMuYWN0aW9ucyA9IFtdOw0KCQl0aGlzLnN1YmV2ZW50cyA9IFtdOw0KCQl0aGlzLmdyb3Vw
X25hbWUgPSAiIjsNCgkJdGhpcy5ncm91cCA9IGZhbHNlOw0KCQl0aGlzLmluaXRpYWxseV9hY3Rp
dmF0ZWQgPSBmYWxzZTsNCgkJdGhpcy5ncm91cF9hY3RpdmUgPSBmYWxzZTsNCgkJdGhpcy5jb250
YWluZWRfaW5jbHVkZXMgPSBudWxsOw0KICAgICAgICBpZiAobVsxXSkNCiAgICAgICAgew0KCQkJ
dGhpcy5ncm91cF9uYW1lID0gbVsxXVsxXS50b0xvd2VyQ2FzZSgpOw0KCQkJdGhpcy5ncm91cCA9
IHRydWU7DQoJCQl0aGlzLmluaXRpYWxseV9hY3RpdmF0ZWQgPSAhIW1bMV1bMF07DQoJCQl0aGlz
LmNvbnRhaW5lZF9pbmNsdWRlcyA9IFtdOw0KCQkJdGhpcy5ncm91cF9hY3RpdmUgPSB0aGlzLmlu
aXRpYWxseV9hY3RpdmF0ZWQ7DQoJCQl0aGlzLnJ1bnRpbWUuYWxsR3JvdXBzLnB1c2godGhpcyk7
DQogICAgICAgICAgICB0aGlzLnJ1bnRpbWUuZ3JvdXBzX2J5X25hbWVbdGhpcy5ncm91cF9uYW1l
XSA9IHRoaXM7DQogICAgICAgIH0NCgkJdGhpcy5vcmJsb2NrID0gbVsyXTsNCgkJdGhpcy5zaWQg
PSBtWzRdOw0KCQlpZiAoIXRoaXMuZ3JvdXApDQoJCQl0aGlzLnJ1bnRpbWUuYmxvY2tzQnlTaWRb
dGhpcy5zaWQudG9TdHJpbmcoKV0gPSB0aGlzOw0KCQl2YXIgaSwgbGVuOw0KCQl2YXIgY20gPSBt
WzVdOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBjbS5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0K
CQkJdmFyIGNuZCA9IG5ldyBjci5jb25kaXRpb24odGhpcywgY21baV0pOw0KCQkJY25kLmluZGV4
ID0gaTsNCgkJCWNyLnNlYWwoY25kKTsNCgkJCXRoaXMuY29uZGl0aW9ucy5wdXNoKGNuZCk7DQoJ
CQkvKg0KCQkJaWYgKGNuZC5pc19sb2dpY2FsKCkpDQoJCQkJdGhpcy5pc19sb2dpY2FsID0gdHJ1
ZTsNCgkJCWlmIChjbmQudHlwZSAmJiAhY25kLnR5cGUucGx1Z2luLnNpbmdsZWdsb2JhbCAmJiB0
aGlzLmNuZFJlZmVyZW5jZXMuaW5kZXhPZihjbmQudHlwZSkgPT09IC0xKQ0KCQkJCXRoaXMuY25k
UmVmZXJlbmNlcy5wdXNoKGNuZC50eXBlKTsNCgkJCSovDQoJCQl0aGlzLmFkZFNvbE1vZGlmaWVy
KGNuZC50eXBlKTsNCgkJfQ0KCQl2YXIgYW0gPSBtWzZdOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBh
bS5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJdmFyIGFjdCA9IG5ldyBjci5hY3Rpb24o
dGhpcywgYW1baV0pOw0KCQkJYWN0LmluZGV4ID0gaTsNCgkJCWNyLnNlYWwoYWN0KTsNCgkJCXRo
aXMuYWN0aW9ucy5wdXNoKGFjdCk7DQoJCX0NCgkJaWYgKG0ubGVuZ3RoID09PSA4KQ0KCQl7DQoJ
CQl2YXIgZW0gPSBtWzddOw0KCQkJZm9yIChpID0gMCwgbGVuID0gZW0ubGVuZ3RoOyBpIDwgbGVu
OyBpKyspDQoJCQkJdGhpcy5zaGVldC5pbml0X2V2ZW50KGVtW2ldLCB0aGlzLCB0aGlzLnN1YmV2
ZW50cyk7DQoJCX0NCgkJdGhpcy5pc19lbHNlX2Jsb2NrID0gZmFsc2U7DQoJCWlmICh0aGlzLmNv
bmRpdGlvbnMubGVuZ3RoKQ0KCQl7DQoJCQl0aGlzLmlzX2Vsc2VfYmxvY2sgPSAodGhpcy5jb25k
aXRpb25zWzBdLnR5cGUgPT0gbnVsbCAmJiB0aGlzLmNvbmRpdGlvbnNbMF0uZnVuYyA9PSBjci5z
eXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLkVsc2UpOw0KCQl9DQoJfTsNCgl3aW5kb3dbIl9j
MmhoXyJdID0gIkFCQTMyRjg0RkNDNDcxRTg4OTc0NDhBQTg0Njg2NzI4QzQ1OThCOEEiOw0KCUV2
ZW50QmxvY2sucHJvdG90eXBlLnBvc3RJbml0ID0gZnVuY3Rpb24gKGhhc0Vsc2UvKiwgcHJldkJs
b2NrXyovKQ0KCXsNCgkJdmFyIGksIGxlbjsNCgkJdmFyIHAgPSB0aGlzLnBhcmVudDsNCgkJaWYg
KHRoaXMuZ3JvdXApDQoJCXsNCgkJCXRoaXMudG9wbGV2ZWxncm91cCA9IHRydWU7DQoJCQl3aGls
ZSAocCkNCgkJCXsNCgkJCQlpZiAoIXAuZ3JvdXApDQoJCQkJew0KCQkJCQl0aGlzLnRvcGxldmVs
Z3JvdXAgPSBmYWxzZTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJCXAgPSBwLnBhcmVudDsNCgkJ
CX0NCgkJfQ0KCQl0aGlzLnRvcGxldmVsZXZlbnQgPSAhdGhpcy5pc190cmlnZ2VyKCkgJiYgKCF0
aGlzLnBhcmVudCB8fCAodGhpcy5wYXJlbnQuZ3JvdXAgJiYgdGhpcy5wYXJlbnQudG9wbGV2ZWxn
cm91cCkpOw0KCQl0aGlzLmhhc19lbHNlX2Jsb2NrID0gISFoYXNFbHNlOw0KCQl0aGlzLnNvbE1v
ZGlmaWVyc0luY2x1ZGluZ1BhcmVudHMgPSB0aGlzLnNvbE1vZGlmaWVycy5zbGljZSgwKTsNCgkJ
cCA9IHRoaXMucGFyZW50Ow0KCQl3aGlsZSAocCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0g
cC5zb2xNb2RpZmllcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJdGhpcy5hZGRQYXJlbnRT
b2xNb2RpZmllcihwLnNvbE1vZGlmaWVyc1tpXSk7DQoJCQlwID0gcC5wYXJlbnQ7DQoJCX0NCgkJ
dGhpcy5zb2xNb2RpZmllcnMgPSBmaW5kTWF0Y2hpbmdTb2xNb2RpZmllcih0aGlzLnNvbE1vZGlm
aWVycyk7DQoJCXRoaXMuc29sTW9kaWZpZXJzSW5jbHVkaW5nUGFyZW50cyA9IGZpbmRNYXRjaGlu
Z1NvbE1vZGlmaWVyKHRoaXMuc29sTW9kaWZpZXJzSW5jbHVkaW5nUGFyZW50cyk7DQoJCXZhciBp
LCBsZW4vKiwgcyovOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmNvbmRpdGlvbnMubGVuZ3Ro
OyBpIDwgbGVuOyBpKyspDQoJCQl0aGlzLmNvbmRpdGlvbnNbaV0ucG9zdEluaXQoKTsNCgkJZm9y
IChpID0gMCwgbGVuID0gdGhpcy5hY3Rpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGhp
cy5hY3Rpb25zW2ldLnBvc3RJbml0KCk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuc3ViZXZl
bnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0aGlzLnN1YmV2ZW50c1tpXS5wb3N0
SW5pdChpIDwgbGVuIC0gMSAmJiB0aGlzLnN1YmV2ZW50c1tpICsgMV0uaXNfZWxzZV9ibG9jayk7
DQoJCX0NCgkJLyoNCgkJaWYgKHRoaXMuaXNfZWxzZV9ibG9jayAmJiB0aGlzLnByZXZfYmxvY2sp
DQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMucHJldl9ibG9jay5zb2xNb2RpZmllcnMu
bGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJcyA9IHRoaXMucHJldl9ibG9jay5zb2xN
b2RpZmllcnNbaV07DQoJCQkJaWYgKHRoaXMuc29sTW9kaWZpZXJzLmluZGV4T2YocykgPT09IC0x
KQ0KCQkJCQl0aGlzLnNvbE1vZGlmaWVycy5wdXNoKHMpOw0KCQkJfQ0KCQl9DQoJCSovDQoJfTsN
CglFdmVudEJsb2NrLnByb3RvdHlwZS5zZXRHcm91cEFjdGl2ZSA9IGZ1bmN0aW9uIChhKQ0KCXsN
CgkJaWYgKHRoaXMuZ3JvdXBfYWN0aXZlID09PSAhIWEpDQoJCQlyZXR1cm47CQkvLyBzYW1lIHN0
YXRlDQoJCXRoaXMuZ3JvdXBfYWN0aXZlID0gISFhOw0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLmNvbnRhaW5lZF9pbmNsdWRlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkN
CgkJew0KCQkJdGhpcy5jb250YWluZWRfaW5jbHVkZXNbaV0udXBkYXRlQWN0aXZlKCk7DQoJCX0N
CgkJaWYgKGxlbiA+IDAgJiYgdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LmV2ZW50X3NoZWV0
KQ0KCQkJdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LmV2ZW50X3NoZWV0LnVwZGF0ZURlZXBJ
bmNsdWRlcygpOw0KCX07DQoJZnVuY3Rpb24gYWRkU29sTW9kaWZpZXJUb0xpc3QodHlwZSwgYXJy
KQ0KCXsNCgkJdmFyIGksIGxlbiwgdDsNCgkJaWYgKCF0eXBlKQ0KCQkJcmV0dXJuOw0KCQlpZiAo
YXJyLmluZGV4T2YodHlwZSkgPT09IC0xKQ0KCQkJYXJyLnB1c2godHlwZSk7DQoJCWlmICh0eXBl
LmlzX2NvbnRhaW5lZCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gdHlwZS5jb250YWluZXIu
bGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJdCA9IHR5cGUuY29udGFpbmVyW2ldOw0K
CQkJCWlmICh0eXBlID09PSB0KQ0KCQkJCQljb250aW51ZTsJCS8vIGFscmVhZHkgaGFuZGxlZA0K
CQkJCWlmIChhcnIuaW5kZXhPZih0KSA9PT0gLTEpDQoJCQkJCWFyci5wdXNoKHQpOw0KCQkJfQ0K
CQl9DQoJfTsNCglFdmVudEJsb2NrLnByb3RvdHlwZS5hZGRTb2xNb2RpZmllciA9IGZ1bmN0aW9u
ICh0eXBlKQ0KCXsNCgkJYWRkU29sTW9kaWZpZXJUb0xpc3QodHlwZSwgdGhpcy5zb2xNb2RpZmll
cnMpOw0KCX07DQoJRXZlbnRCbG9jay5wcm90b3R5cGUuYWRkUGFyZW50U29sTW9kaWZpZXIgPSBm
dW5jdGlvbiAodHlwZSkNCgl7DQoJCWFkZFNvbE1vZGlmaWVyVG9MaXN0KHR5cGUsIHRoaXMuc29s
TW9kaWZpZXJzSW5jbHVkaW5nUGFyZW50cyk7DQoJfTsNCglFdmVudEJsb2NrLnByb3RvdHlwZS5z
ZXRTb2xXcml0ZXJBZnRlckNuZHMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5zb2xXcml0ZXJB
ZnRlckNuZHMgPSB0cnVlOw0KCQlpZiAodGhpcy5wYXJlbnQpDQoJCQl0aGlzLnBhcmVudC5zZXRT
b2xXcml0ZXJBZnRlckNuZHMoKTsNCgl9Ow0KCUV2ZW50QmxvY2sucHJvdG90eXBlLmlzX3RyaWdn
ZXIgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKCF0aGlzLmNvbmRpdGlvbnMubGVuZ3RoKSAgICAv
LyBubyBjb25kaXRpb25zDQoJCQlyZXR1cm4gZmFsc2U7DQoJCWVsc2UNCgkJCXJldHVybiB0aGlz
LmNvbmRpdGlvbnNbMF0udHJpZ2dlcjsNCgl9Ow0KCUV2ZW50QmxvY2sucHJvdG90eXBlLnJ1biA9
IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuLCBjLCBhbnlfdHJ1ZSA9IGZhbHNlLCBjbmRf
cmVzdWx0Ow0KCQl2YXIgcnVudGltZSA9IHRoaXMucnVudGltZTsNCgkJdmFyIGV2aW5mbyA9IHRo
aXMucnVudGltZS5nZXRDdXJyZW50RXZlbnRTdGFjaygpOw0KCQlldmluZm8uY3VycmVudF9ldmVu
dCA9IHRoaXM7DQoJCXZhciBjb25kaXRpb25zID0gdGhpcy5jb25kaXRpb25zOw0KCQkJaWYgKCF0
aGlzLmlzX2Vsc2VfYmxvY2spDQoJCQkJZXZpbmZvLmVsc2VfYnJhbmNoX3JhbiA9IGZhbHNlOw0K
CQlpZiAodGhpcy5vcmJsb2NrKQ0KCQl7DQoJCQlpZiAoY29uZGl0aW9ucy5sZW5ndGggPT09IDAp
DQoJCQkJYW55X3RydWUgPSB0cnVlOwkJLy8gYmUgc3VyZSB0byBydW4gaWYgZW1wdHkgYmxvY2sN
CgkJCQlldmluZm8uY25kaW5kZXggPSAwDQoJCQlmb3IgKGxlbiA9IGNvbmRpdGlvbnMubGVuZ3Ro
OyBldmluZm8uY25kaW5kZXggPCBsZW47IGV2aW5mby5jbmRpbmRleCsrKQ0KCQkJew0KCQkJCWMg
PSBjb25kaXRpb25zW2V2aW5mby5jbmRpbmRleF07DQoJCQkJaWYgKGMudHJpZ2dlcikJCS8vIHNr
aXAgdHJpZ2dlcnMgd2hlbiBydW5uaW5nIE9SIGJsb2NrDQoJCQkJCWNvbnRpbnVlOw0KCQkJCWNu
ZF9yZXN1bHQgPSBjLnJ1bigpOw0KCQkJCWlmIChjbmRfcmVzdWx0KQkJCS8vIG1ha2Ugc3VyZSBh
bGwgY29uZGl0aW9ucyBydW4gYW5kIHJ1biBpZiBhbnkgd2VyZSB0cnVlDQoJCQkJCWFueV90cnVl
ID0gdHJ1ZTsNCgkJCX0NCgkJCWV2aW5mby5sYXN0X2V2ZW50X3RydWUgPSBhbnlfdHJ1ZTsNCgkJ
CWlmIChhbnlfdHJ1ZSkNCgkJCQl0aGlzLnJ1bl9hY3Rpb25zX2FuZF9zdWJldmVudHMoKTsNCgkJ
fQ0KCQllbHNlDQoJCXsNCgkJCQlldmluZm8uY25kaW5kZXggPSAwDQoJCQlmb3IgKGxlbiA9IGNv
bmRpdGlvbnMubGVuZ3RoOyBldmluZm8uY25kaW5kZXggPCBsZW47IGV2aW5mby5jbmRpbmRleCsr
KQ0KCQkJew0KCQkJCWNuZF9yZXN1bHQgPSBjb25kaXRpb25zW2V2aW5mby5jbmRpbmRleF0ucnVu
KCk7DQoJCQkJaWYgKCFjbmRfcmVzdWx0KSAgICAvLyBjb25kaXRpb24gZmFpbGVkDQoJCQkJew0K
CQkJCQlldmluZm8ubGFzdF9ldmVudF90cnVlID0gZmFsc2U7DQoJCQkJCWlmICh0aGlzLnRvcGxl
dmVsZXZlbnQgJiYgcnVudGltZS5oYXNQZW5kaW5nSW5zdGFuY2VzKQ0KCQkJCQkJcnVudGltZS5D
bGVhckRlYXRoUm93KCk7DQoJCQkJCXJldHVybjsJCS8vIGJhaWwgb3V0IG5vdw0KCQkJCX0NCgkJ
CX0NCgkJCWV2aW5mby5sYXN0X2V2ZW50X3RydWUgPSB0cnVlOw0KCQkJdGhpcy5ydW5fYWN0aW9u
c19hbmRfc3ViZXZlbnRzKCk7DQoJCX0NCgkJdGhpcy5lbmRfcnVuKGV2aW5mbyk7DQoJfTsNCglF
dmVudEJsb2NrLnByb3RvdHlwZS5lbmRfcnVuID0gZnVuY3Rpb24gKGV2aW5mbykNCgl7DQoJCWlm
IChldmluZm8ubGFzdF9ldmVudF90cnVlICYmIHRoaXMuaGFzX2Vsc2VfYmxvY2spDQoJCQlldmlu
Zm8uZWxzZV9icmFuY2hfcmFuID0gdHJ1ZTsNCgkJaWYgKHRoaXMudG9wbGV2ZWxldmVudCAmJiB0
aGlzLnJ1bnRpbWUuaGFzUGVuZGluZ0luc3RhbmNlcykNCgkJCXRoaXMucnVudGltZS5DbGVhckRl
YXRoUm93KCk7DQoJfTsNCglFdmVudEJsb2NrLnByb3RvdHlwZS5ydW5fb3JibG9ja3RyaWdnZXIg
PSBmdW5jdGlvbiAoaW5kZXgpDQoJew0KCQl2YXIgZXZpbmZvID0gdGhpcy5ydW50aW1lLmdldEN1
cnJlbnRFdmVudFN0YWNrKCk7DQoJCWV2aW5mby5jdXJyZW50X2V2ZW50ID0gdGhpczsNCgkJaWYg
KHRoaXMuY29uZGl0aW9uc1tpbmRleF0ucnVuKCkpDQoJCXsNCgkJCXRoaXMucnVuX2FjdGlvbnNf
YW5kX3N1YmV2ZW50cygpOw0KCQkJdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCku
bGFzdF9ldmVudF90cnVlID0gdHJ1ZTsNCgkJfQ0KCX07DQoJRXZlbnRCbG9jay5wcm90b3R5cGUu
cnVuX2FjdGlvbnNfYW5kX3N1YmV2ZW50cyA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgZXZpbmZv
ID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCXZhciBsZW47DQoJCWZv
ciAoZXZpbmZvLmFjdGluZGV4ID0gMCwgbGVuID0gdGhpcy5hY3Rpb25zLmxlbmd0aDsgZXZpbmZv
LmFjdGluZGV4IDwgbGVuOyBldmluZm8uYWN0aW5kZXgrKykNCgkJew0KCQkJaWYgKHRoaXMuYWN0
aW9uc1tldmluZm8uYWN0aW5kZXhdLnJ1bigpKQ0KCQkJCXJldHVybjsNCgkJfQ0KCQl0aGlzLnJ1
bl9zdWJldmVudHMoKTsNCgl9Ow0KCUV2ZW50QmxvY2sucHJvdG90eXBlLnJlc3VtZV9hY3Rpb25z
X2FuZF9zdWJldmVudHMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGV2aW5mbyA9IHRoaXMucnVu
dGltZS5nZXRDdXJyZW50RXZlbnRTdGFjaygpOw0KCQl2YXIgbGVuOw0KCQlmb3IgKGxlbiA9IHRo
aXMuYWN0aW9ucy5sZW5ndGg7IGV2aW5mby5hY3RpbmRleCA8IGxlbjsgZXZpbmZvLmFjdGluZGV4
KyspDQoJCXsNCgkJCWlmICh0aGlzLmFjdGlvbnNbZXZpbmZvLmFjdGluZGV4XS5ydW4oKSkNCgkJ
CQlyZXR1cm47DQoJCX0NCgkJdGhpcy5ydW5fc3ViZXZlbnRzKCk7DQoJfTsNCglFdmVudEJsb2Nr
LnByb3RvdHlwZS5ydW5fc3ViZXZlbnRzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhpcy5z
dWJldmVudHMubGVuZ3RoKQ0KCQkJcmV0dXJuOw0KCQl2YXIgaSwgbGVuLCBzdWJldiwgcHVzaHBv
cC8qLCBza2lwcGVkX3BvcCA9IGZhbHNlLCBwb3BfbW9kaWZpZXJzID0gbnVsbCovOw0KCQl2YXIg
bGFzdCA9IHRoaXMuc3ViZXZlbnRzLmxlbmd0aCAtIDE7DQoJCQl0aGlzLnJ1bnRpbWUucHVzaEV2
ZW50U3RhY2sodGhpcyk7DQoJCWlmICh0aGlzLnNvbFdyaXRlckFmdGVyQ25kcykNCgkJew0KCQkJ
Zm9yIChpID0gMCwgbGVuID0gdGhpcy5zdWJldmVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJ
CQl7DQoJCQkJc3ViZXYgPSB0aGlzLnN1YmV2ZW50c1tpXTsNCgkJCQkJcHVzaHBvcCA9ICghdGhp
cy50b3BsZXZlbGdyb3VwIHx8ICghdGhpcy5ncm91cCAmJiBpIDwgbGFzdCkpOw0KCQkJCQlpZiAo
cHVzaHBvcCkNCgkJCQkJCXRoaXMucnVudGltZS5wdXNoQ29weVNvbChzdWJldi5zb2xNb2RpZmll
cnMpOw0KCQkJCXN1YmV2LnJ1bigpOw0KCQkJCQlpZiAocHVzaHBvcCkNCgkJCQkJCXRoaXMucnVu
dGltZS5wb3BTb2woc3ViZXYuc29sTW9kaWZpZXJzKTsNCgkJCQkJZWxzZQ0KCQkJCQkJdGhpcy5y
dW50aW1lLmNsZWFyU29sKHN1YmV2LnNvbE1vZGlmaWVycyk7DQoJCQl9DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnN1YmV2ZW50cy5sZW5ndGg7IGkgPCBsZW47
IGkrKykNCgkJCXsNCgkJCQl0aGlzLnN1YmV2ZW50c1tpXS5ydW4oKTsNCgkJCX0NCgkJfQ0KCQkJ
dGhpcy5ydW50aW1lLnBvcEV2ZW50U3RhY2soKTsNCgl9Ow0KCUV2ZW50QmxvY2sucHJvdG90eXBl
LnJ1bl9wcmV0cmlnZ2VyID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBldmluZm8gPSB0aGlzLnJ1
bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKTsNCgkJZXZpbmZvLmN1cnJlbnRfZXZlbnQgPSB0
aGlzOw0KCQl2YXIgYW55X3RydWUgPSBmYWxzZTsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChldmlu
Zm8uY25kaW5kZXggPSAwLCBsZW4gPSB0aGlzLmNvbmRpdGlvbnMubGVuZ3RoOyBldmluZm8uY25k
aW5kZXggPCBsZW47IGV2aW5mby5jbmRpbmRleCsrKQ0KCQl7DQo7DQoJCQlpZiAodGhpcy5jb25k
aXRpb25zW2V2aW5mby5jbmRpbmRleF0ucnVuKCkpDQoJCQkJYW55X3RydWUgPSB0cnVlOw0KCQkJ
ZWxzZSBpZiAoIXRoaXMub3JibG9jaykJCQkvLyBjb25kaXRpb24gZmFpbGVkIChsZXQgT1IgYmxv
Y2tzIHJ1biBhbGwgY29uZGl0aW9ucyBhbnl3YXkpDQoJCQkJcmV0dXJuIGZhbHNlOyAgICAgICAg
ICAgICAgIC8vIGJhaWwgb3V0DQoJCX0NCgkJcmV0dXJuIHRoaXMub3JibG9jayA/IGFueV90cnVl
IDogdHJ1ZTsNCgl9Ow0KCUV2ZW50QmxvY2sucHJvdG90eXBlLnJldHJpZ2dlciA9IGZ1bmN0aW9u
ICgpDQoJew0KCQl0aGlzLnJ1bnRpbWUuZXhlY2NvdW50Kys7DQoJCXZhciBwcmV2Y25kaW5kZXgg
PSB0aGlzLnJ1bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKS5jbmRpbmRleDsNCgkJdmFyIGxl
bjsNCgkJdmFyIGV2aW5mbyA9IHRoaXMucnVudGltZS5wdXNoRXZlbnRTdGFjayh0aGlzKTsNCgkJ
aWYgKCF0aGlzLm9yYmxvY2spDQoJCXsNCgkJCWZvciAoZXZpbmZvLmNuZGluZGV4ID0gcHJldmNu
ZGluZGV4ICsgMSwgbGVuID0gdGhpcy5jb25kaXRpb25zLmxlbmd0aDsgZXZpbmZvLmNuZGluZGV4
IDwgbGVuOyBldmluZm8uY25kaW5kZXgrKykNCgkJCXsNCgkJCQlpZiAoIXRoaXMuY29uZGl0aW9u
c1tldmluZm8uY25kaW5kZXhdLnJ1bigpKSAgICAvLyBjb25kaXRpb24gZmFpbGVkDQoJCQkJew0K
CQkJCQl0aGlzLnJ1bnRpbWUucG9wRXZlbnRTdGFjaygpOyAgICAgICAgICAgICAgIC8vIG1vdmlu
ZyB1cCBsZXZlbCBvZiByZWN1cnNpb24NCgkJCQkJcmV0dXJuIGZhbHNlOyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAvLyBiYWlsIG91dA0KCQkJCX0NCgkJCX0NCgkJfQ0KCQl0aGlzLnJ1
bl9hY3Rpb25zX2FuZF9zdWJldmVudHMoKTsNCgkJdGhpcy5ydW50aW1lLnBvcEV2ZW50U3RhY2so
KTsNCgkJcmV0dXJuIHRydWU7CQkvLyByYW4gYW4gaXRlcmF0aW9uDQoJfTsNCglFdmVudEJsb2Nr
LnByb3RvdHlwZS5pc0ZpcnN0Q29uZGl0aW9uT2ZUeXBlID0gZnVuY3Rpb24gKGNuZCkNCgl7DQoJ
CXZhciBjbmRpbmRleCA9IGNuZC5pbmRleDsNCgkJaWYgKGNuZGluZGV4ID09PSAwKQ0KCQkJcmV0
dXJuIHRydWU7DQoJCS0tY25kaW5kZXg7DQoJCWZvciAoIDsgY25kaW5kZXggPj0gMDsgLS1jbmRp
bmRleCkNCgkJew0KCQkJaWYgKHRoaXMuY29uZGl0aW9uc1tjbmRpbmRleF0udHlwZSA9PT0gY25k
LnR5cGUpDQoJCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJCXJldHVybiB0cnVlOw0KCX07DQoJY3Iu
ZXZlbnRibG9jayA9IEV2ZW50QmxvY2s7DQoJZnVuY3Rpb24gQ29uZGl0aW9uKGJsb2NrLCBtKQ0K
CXsNCgkJdGhpcy5ibG9jayA9IGJsb2NrOw0KCQl0aGlzLnNoZWV0ID0gYmxvY2suc2hlZXQ7DQoJ
CXRoaXMucnVudGltZSA9IGJsb2NrLnJ1bnRpbWU7DQoJCXRoaXMucGFyYW1ldGVycyA9IFtdOw0K
CQl0aGlzLnJlc3VsdHMgPSBbXTsNCgkJdGhpcy5leHRyYSA9IHt9OwkJLy8gZm9yIHBsdWdpbnMg
dG8gc3RvdyBhd2F5IHNvbWUgY3VzdG9tIGluZm8NCgkJdGhpcy5pbmRleCA9IC0xOw0KCQl0aGlz
LmFueVBhcmFtVmFyaWVzUGVySW5zdGFuY2UgPSBmYWxzZTsNCgkJdGhpcy5mdW5jID0gdGhpcy5y
dW50aW1lLkdldE9iamVjdFJlZmVyZW5jZShtWzFdKTsNCjsNCgkJdGhpcy50cmlnZ2VyID0gKG1b
M10gPiAwKTsNCgkJdGhpcy5mYXN0dHJpZ2dlciA9IChtWzNdID09PSAyKTsNCgkJdGhpcy5sb29w
aW5nID0gbVs0XTsNCgkJdGhpcy5pbnZlcnRlZCA9IG1bNV07DQoJCXRoaXMuaXNzdGF0aWMgPSBt
WzZdOw0KCQl0aGlzLnNpZCA9IG1bN107DQoJCXRoaXMucnVudGltZS5jbmRzQnlTaWRbdGhpcy5z
aWQudG9TdHJpbmcoKV0gPSB0aGlzOw0KCQlpZiAobVswXSA9PT0gLTEpCQkvLyBzeXN0ZW0gb2Jq
ZWN0DQoJCXsNCgkJCXRoaXMudHlwZSA9IG51bGw7DQoJCQl0aGlzLnJ1biA9IHRoaXMucnVuX3N5
c3RlbTsNCgkJCXRoaXMuYmVoYXZpb3J0eXBlID0gbnVsbDsNCgkJCXRoaXMuYmVoX2luZGV4ID0g
LTE7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGlzLnR5cGUgPSB0aGlzLnJ1bnRpbWUudHlwZXNf
YnlfaW5kZXhbbVswXV07DQo7DQoJCQlpZiAodGhpcy5pc3N0YXRpYykNCgkJCQl0aGlzLnJ1biA9
IHRoaXMucnVuX3N0YXRpYzsNCgkJCWVsc2UNCgkJCQl0aGlzLnJ1biA9IHRoaXMucnVuX29iamVj
dDsNCgkJCWlmIChtWzJdKQ0KCQkJew0KCQkJCXRoaXMuYmVoYXZpb3J0eXBlID0gdGhpcy50eXBl
LmdldEJlaGF2aW9yQnlOYW1lKG1bMl0pOw0KOw0KCQkJCXRoaXMuYmVoX2luZGV4ID0gdGhpcy50
eXBlLmdldEJlaGF2aW9ySW5kZXhCeU5hbWUobVsyXSk7DQo7DQoJCQl9DQoJCQllbHNlDQoJCQl7
DQoJCQkJdGhpcy5iZWhhdmlvcnR5cGUgPSBudWxsOw0KCQkJCXRoaXMuYmVoX2luZGV4ID0gLTE7
DQoJCQl9DQoJCQlpZiAodGhpcy5ibG9jay5wYXJlbnQpDQoJCQkJdGhpcy5ibG9jay5wYXJlbnQu
c2V0U29sV3JpdGVyQWZ0ZXJDbmRzKCk7DQoJCX0NCgkJaWYgKHRoaXMuZmFzdHRyaWdnZXIpDQoJ
CQl0aGlzLnJ1biA9IHRoaXMucnVuX3RydWU7DQoJCWlmIChtLmxlbmd0aCA9PT0gMTApDQoJCXsN
CgkJCXZhciBpLCBsZW47DQoJCQl2YXIgZW0gPSBtWzldOw0KCQkJZm9yIChpID0gMCwgbGVuID0g
ZW0ubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJdmFyIHBhcmFtID0gbmV3IGNyLnBh
cmFtZXRlcih0aGlzLCBlbVtpXSk7DQoJCQkJY3Iuc2VhbChwYXJhbSk7DQoJCQkJdGhpcy5wYXJh
bWV0ZXJzLnB1c2gocGFyYW0pOw0KCQkJfQ0KCQkJdGhpcy5yZXN1bHRzLmxlbmd0aCA9IGVtLmxl
bmd0aDsNCgkJfQ0KCX07DQoJQ29uZGl0aW9uLnByb3RvdHlwZS5wb3N0SW5pdCA9IGZ1bmN0aW9u
ICgpDQoJew0KCQl2YXIgaSwgbGVuLCBwOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnBhcmFt
ZXRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXAgPSB0aGlzLnBhcmFtZXRlcnNb
aV07DQoJCQlwLnBvc3RJbml0KCk7DQoJCQlpZiAocC52YXJpZXNQZXJJbnN0YW5jZSkNCgkJCQl0
aGlzLmFueVBhcmFtVmFyaWVzUGVySW5zdGFuY2UgPSB0cnVlOw0KCQl9DQoJfTsNCgkvKg0KCUNv
bmRpdGlvbi5wcm90b3R5cGUuaXNfbG9naWNhbCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
IXRoaXMudHlwZSB8fCB0aGlzLnR5cGUucGx1Z2luLnNpbmdsZWdsb2JhbDsNCgl9Ow0KCSovDQoJ
Q29uZGl0aW9uLnByb3RvdHlwZS5ydW5fdHJ1ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
dHJ1ZTsNCgl9Ow0KCUNvbmRpdGlvbi5wcm90b3R5cGUucnVuX3N5c3RlbSA9IGZ1bmN0aW9uICgp
DQoJew0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnBhcmFtZXRlcnMu
bGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl0aGlzLnJlc3VsdHNbaV0gPSB0aGlzLnBhcmFtZXRl
cnNbaV0uZ2V0KCk7DQoJCXJldHVybiBjci54b3IodGhpcy5mdW5jLmFwcGx5KHRoaXMucnVudGlt
ZS5zeXN0ZW0sIHRoaXMucmVzdWx0cyksIHRoaXMuaW52ZXJ0ZWQpOw0KCX07DQoJQ29uZGl0aW9u
LnByb3RvdHlwZS5ydW5fc3RhdGljID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBsZW47DQoJ
CWZvciAoaSA9IDAsIGxlbiA9IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykN
CgkJCXRoaXMucmVzdWx0c1tpXSA9IHRoaXMucGFyYW1ldGVyc1tpXS5nZXQoKTsNCgkJdmFyIHJl
dCA9IHRoaXMuZnVuYy5hcHBseSh0aGlzLmJlaGF2aW9ydHlwZSA/IHRoaXMuYmVoYXZpb3J0eXBl
IDogdGhpcy50eXBlLCB0aGlzLnJlc3VsdHMpOw0KCQl0aGlzLnR5cGUuYXBwbHlTb2xUb0NvbnRh
aW5lcigpOw0KCQlyZXR1cm4gcmV0Ow0KCX07DQoJQ29uZGl0aW9uLnByb3RvdHlwZS5ydW5fb2Jq
ZWN0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBqLCBrLCBsZW5pLCBsZW5qLCBwLCByZXQs
IG1ldCwgaW5zdCwgcywgc29sMjsNCgkJdmFyIHR5cGUgPSB0aGlzLnR5cGU7DQoJCXZhciBzb2wg
PSB0eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJdmFyIGlzX29yYmxvY2sgPSB0aGlzLmJsb2NrLm9y
YmxvY2sgJiYgIXRoaXMudHJpZ2dlcjsJCS8vIHRyaWdnZXJzIGluIE9SIGJsb2NrcyBuZWVkIHRv
IHdvcmsgbm9ybWFsbHkNCgkJdmFyIG9mZnNldCA9IDA7DQoJCXZhciBpc19jb250YWluZWQgPSB0
eXBlLmlzX2NvbnRhaW5lZDsNCgkJdmFyIGlzX2ZhbWlseSA9IHR5cGUuaXNfZmFtaWx5Ow0KCQl2
YXIgZmFtaWx5X2luZGV4ID0gdHlwZS5mYW1pbHlfaW5kZXg7DQoJCXZhciBiZWhfaW5kZXggPSB0
aGlzLmJlaF9pbmRleDsNCgkJdmFyIGlzX2JlaCA9IChiZWhfaW5kZXggPiAtMSk7DQoJCXZhciBw
YXJhbXNfdmFyeSA9IHRoaXMuYW55UGFyYW1WYXJpZXNQZXJJbnN0YW5jZTsNCgkJdmFyIHBhcmFt
ZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7DQoJCXZhciByZXN1bHRzID0gdGhpcy5yZXN1bHRzOw0K
CQl2YXIgaW52ZXJ0ZWQgPSB0aGlzLmludmVydGVkOw0KCQl2YXIgZnVuYyA9IHRoaXMuZnVuYzsN
CgkJdmFyIGFyciwgY29udGFpbmVyOw0KCQlpZiAocGFyYW1zX3ZhcnkpDQoJCXsNCgkJCWZvciAo
aiA9IDAsIGxlbmogPSBwYXJhbWV0ZXJzLmxlbmd0aDsgaiA8IGxlbmo7ICsraikNCgkJCXsNCgkJ
CQlwID0gcGFyYW1ldGVyc1tqXTsNCgkJCQlpZiAoIXAudmFyaWVzUGVySW5zdGFuY2UpDQoJCQkJ
CXJlc3VsdHNbal0gPSBwLmdldCgwKTsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWZvciAo
aiA9IDAsIGxlbmogPSBwYXJhbWV0ZXJzLmxlbmd0aDsgaiA8IGxlbmo7ICsraikNCgkJCQlyZXN1
bHRzW2pdID0gcGFyYW1ldGVyc1tqXS5nZXQoMCk7DQoJCX0NCgkJaWYgKHNvbC5zZWxlY3RfYWxs
KSB7DQoJCQljci5jbGVhckFycmF5KHNvbC5pbnN0YW5jZXMpOyAgICAgICAvLyBjbGVhciBjb250
ZW50cw0KCQkJY3IuY2xlYXJBcnJheShzb2wuZWxzZV9pbnN0YW5jZXMpOw0KCQkJYXJyID0gdHlw
ZS5pbnN0YW5jZXM7DQoJCQlmb3IgKGkgPSAwLCBsZW5pID0gYXJyLmxlbmd0aDsgaSA8IGxlbmk7
ICsraSkNCgkJCXsNCgkJCQlpbnN0ID0gYXJyW2ldOw0KOw0KCQkJCWlmIChwYXJhbXNfdmFyeSkN
CgkJCQl7DQoJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBwYXJhbWV0ZXJzLmxlbmd0aDsgaiA8IGxl
bmo7ICsraikNCgkJCQkJew0KCQkJCQkJcCA9IHBhcmFtZXRlcnNbal07DQoJCQkJCQlpZiAocC52
YXJpZXNQZXJJbnN0YW5jZSkNCgkJCQkJCQlyZXN1bHRzW2pdID0gcC5nZXQoaSk7ICAgICAgICAv
LyBkZWZhdWx0IFNPTCBpbmRleCBpcyBjdXJyZW50IG9iamVjdA0KCQkJCQl9DQoJCQkJfQ0KCQkJ
CWlmIChpc19iZWgpDQoJCQkJew0KCQkJCQlvZmZzZXQgPSAwOw0KCQkJCQlpZiAoaXNfZmFtaWx5
KQ0KCQkJCQl7DQoJCQkJCQlvZmZzZXQgPSBpbnN0LnR5cGUuZmFtaWx5X2JlaF9tYXBbZmFtaWx5
X2luZGV4XTsNCgkJCQkJfQ0KCQkJCQlyZXQgPSBmdW5jLmFwcGx5KGluc3QuYmVoYXZpb3JfaW5z
dHNbYmVoX2luZGV4ICsgb2Zmc2V0XSwgcmVzdWx0cyk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQkJ
cmV0ID0gZnVuYy5hcHBseShpbnN0LCByZXN1bHRzKTsNCgkJCQltZXQgPSBjci54b3IocmV0LCBp
bnZlcnRlZCk7DQoJCQkJaWYgKG1ldCkNCgkJCQkJc29sLmluc3RhbmNlcy5wdXNoKGluc3QpOw0K
CQkJCWVsc2UgaWYgKGlzX29yYmxvY2spCQkJCQkvLyBpbiBPUiBibG9ja3MsIGtlZXAgdGhlIGlu
c3RhbmNlcyBub3QgbWVldGluZyB0aGUgY29uZGl0aW9uIGZvciBzdWJzZXF1ZW50IHRlc3RpbmcN
CgkJCQkJc29sLmVsc2VfaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJCQl9DQoJCQlpZiAodHlwZS5m
aW5pc2gpDQoJCQkJdHlwZS5maW5pc2godHJ1ZSk7DQoJCQlzb2wuc2VsZWN0X2FsbCA9IGZhbHNl
Ow0KCQkJdHlwZS5hcHBseVNvbFRvQ29udGFpbmVyKCk7DQoJCQlyZXR1cm4gc29sLmhhc09iamVj
dHMoKTsNCgkJfQ0KCQllbHNlIHsNCgkJCWsgPSAwOw0KCQkJdmFyIHVzaW5nX2Vsc2VfaW5zdGFu
Y2VzID0gKGlzX29yYmxvY2sgJiYgIXRoaXMuYmxvY2suaXNGaXJzdENvbmRpdGlvbk9mVHlwZSh0
aGlzKSk7DQoJCQlhcnIgPSAodXNpbmdfZWxzZV9pbnN0YW5jZXMgPyBzb2wuZWxzZV9pbnN0YW5j
ZXMgOiBzb2wuaW5zdGFuY2VzKTsNCgkJCXZhciBhbnlfdHJ1ZSA9IGZhbHNlOw0KCQkJZm9yIChp
ID0gMCwgbGVuaSA9IGFyci5sZW5ndGg7IGkgPCBsZW5pOyArK2kpDQoJCQl7DQoJCQkJaW5zdCA9
IGFycltpXTsNCjsNCgkJCQlpZiAocGFyYW1zX3ZhcnkpDQoJCQkJew0KCQkJCQlmb3IgKGogPSAw
LCBsZW5qID0gcGFyYW1ldGVycy5sZW5ndGg7IGogPCBsZW5qOyArK2opDQoJCQkJCXsNCgkJCQkJ
CXAgPSBwYXJhbWV0ZXJzW2pdOw0KCQkJCQkJaWYgKHAudmFyaWVzUGVySW5zdGFuY2UpDQoJCQkJ
CQkJcmVzdWx0c1tqXSA9IHAuZ2V0KGkpOyAgICAgICAgLy8gZGVmYXVsdCBTT0wgaW5kZXggaXMg
Y3VycmVudCBvYmplY3QNCgkJCQkJfQ0KCQkJCX0NCgkJCQlpZiAoaXNfYmVoKQ0KCQkJCXsNCgkJ
CQkJb2Zmc2V0ID0gMDsNCgkJCQkJaWYgKGlzX2ZhbWlseSkNCgkJCQkJew0KCQkJCQkJb2Zmc2V0
ID0gaW5zdC50eXBlLmZhbWlseV9iZWhfbWFwW2ZhbWlseV9pbmRleF07DQoJCQkJCX0NCgkJCQkJ
cmV0ID0gZnVuYy5hcHBseShpbnN0LmJlaGF2aW9yX2luc3RzW2JlaF9pbmRleCArIG9mZnNldF0s
IHJlc3VsdHMpOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJCXJldCA9IGZ1bmMuYXBwbHkoaW5zdCwg
cmVzdWx0cyk7DQoJCQkJaWYgKGNyLnhvcihyZXQsIGludmVydGVkKSkNCgkJCQl7DQoJCQkJCWFu
eV90cnVlID0gdHJ1ZTsNCgkJCQkJaWYgKHVzaW5nX2Vsc2VfaW5zdGFuY2VzKQ0KCQkJCQl7DQoJ
CQkJCQlzb2wuaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJCQkJCQlpZiAoaXNfY29udGFpbmVkKQ0K
CQkJCQkJew0KCQkJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBpbnN0LnNpYmxpbmdzLmxlbmd0aDsg
aiA8IGxlbmo7IGorKykNCgkJCQkJCQl7DQoJCQkJCQkJCXMgPSBpbnN0LnNpYmxpbmdzW2pdOw0K
CQkJCQkJCQlzLnR5cGUuZ2V0Q3VycmVudFNvbCgpLmluc3RhbmNlcy5wdXNoKHMpOw0KCQkJCQkJ
CX0NCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQllbHNlDQoJCQkJCXsNCgkJCQkJCWFycltrXSA9IGlu
c3Q7DQoJCQkJCQlpZiAoaXNfY29udGFpbmVkKQ0KCQkJCQkJew0KCQkJCQkJCWZvciAoaiA9IDAs
IGxlbmogPSBpbnN0LnNpYmxpbmdzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQkJCQl7DQoJ
CQkJCQkJCXMgPSBpbnN0LnNpYmxpbmdzW2pdOw0KCQkJCQkJCQlzLnR5cGUuZ2V0Q3VycmVudFNv
bCgpLmluc3RhbmNlc1trXSA9IHM7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQkJaysrOw0KCQkJ
CQl9DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCWlmICh1c2luZ19lbHNlX2luc3RhbmNl
cykNCgkJCQkJew0KCQkJCQkJYXJyW2tdID0gaW5zdDsNCgkJCQkJCWlmIChpc19jb250YWluZWQp
DQoJCQkJCQl7DQoJCQkJCQkJZm9yIChqID0gMCwgbGVuaiA9IGluc3Quc2libGluZ3MubGVuZ3Ro
OyBqIDwgbGVuajsgaisrKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcyA9IGluc3Quc2libGluZ3Nbal07
DQoJCQkJCQkJCXMudHlwZS5nZXRDdXJyZW50U29sKCkuZWxzZV9pbnN0YW5jZXNba10gPSBzOw0K
CQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCWsrKzsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmIChpc19v
cmJsb2NrKQ0KCQkJCQl7DQoJCQkJCQlzb2wuZWxzZV9pbnN0YW5jZXMucHVzaChpbnN0KTsNCgkJ
CQkJCWlmIChpc19jb250YWluZWQpDQoJCQkJCQl7DQoJCQkJCQkJZm9yIChqID0gMCwgbGVuaiA9
IGluc3Quc2libGluZ3MubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCQkJCXsNCgkJCQkJCQkJ
cyA9IGluc3Quc2libGluZ3Nbal07DQoJCQkJCQkJCXMudHlwZS5nZXRDdXJyZW50U29sKCkuZWxz
ZV9pbnN0YW5jZXMucHVzaChzKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJ
CQl9DQoJCQljci50cnVuY2F0ZUFycmF5KGFyciwgayk7DQoJCQlpZiAoaXNfY29udGFpbmVkKQ0K
CQkJew0KCQkJCWNvbnRhaW5lciA9IHR5cGUuY29udGFpbmVyOw0KCQkJCWZvciAoaSA9IDAsIGxl
bmkgPSBjb250YWluZXIubGVuZ3RoOyBpIDwgbGVuaTsgaSsrKQ0KCQkJCXsNCgkJCQkJc29sMiA9
IGNvbnRhaW5lcltpXS5nZXRDdXJyZW50U29sKCk7DQoJCQkJCWlmICh1c2luZ19lbHNlX2luc3Rh
bmNlcykNCgkJCQkJCWNyLnRydW5jYXRlQXJyYXkoc29sMi5lbHNlX2luc3RhbmNlcywgayk7DQoJ
CQkJCWVsc2UNCgkJCQkJCWNyLnRydW5jYXRlQXJyYXkoc29sMi5pbnN0YW5jZXMsIGspOw0KCQkJ
CX0NCgkJCX0NCgkJCXZhciBwaWNrX2luX2ZpbmlzaCA9IGFueV90cnVlOwkJLy8gZG9uJ3QgcGlj
ayBpbiBmaW5pc2goKSBpZiB3ZSdyZSBvbmx5IGRvaW5nIHRoZSBsb2dpYyB0ZXN0IGJlbG93DQoJ
CQlpZiAodXNpbmdfZWxzZV9pbnN0YW5jZXMgJiYgIWFueV90cnVlKQ0KCQkJew0KCQkJCWZvciAo
aSA9IDAsIGxlbmkgPSBzb2wuaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJCQl7
DQoJCQkJCWluc3QgPSBzb2wuaW5zdGFuY2VzW2ldOw0KCQkJCQlpZiAocGFyYW1zX3ZhcnkpDQoJ
CQkJCXsNCgkJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBwYXJhbWV0ZXJzLmxlbmd0aDsgaiA8IGxl
bmo7IGorKykNCgkJCQkJCXsNCgkJCQkJCQlwID0gcGFyYW1ldGVyc1tqXTsNCgkJCQkJCQlpZiAo
cC52YXJpZXNQZXJJbnN0YW5jZSkNCgkJCQkJCQkJcmVzdWx0c1tqXSA9IHAuZ2V0KGkpOw0KCQkJ
CQkJfQ0KCQkJCQl9DQoJCQkJCWlmIChpc19iZWgpDQoJCQkJCQlyZXQgPSBmdW5jLmFwcGx5KGlu
c3QuYmVoYXZpb3JfaW5zdHNbYmVoX2luZGV4XSwgcmVzdWx0cyk7DQoJCQkJCWVsc2UNCgkJCQkJ
CXJldCA9IGZ1bmMuYXBwbHkoaW5zdCwgcmVzdWx0cyk7DQoJCQkJCWlmIChjci54b3IocmV0LCBp
bnZlcnRlZCkpDQoJCQkJCXsNCgkJCQkJCWFueV90cnVlID0gdHJ1ZTsNCgkJCQkJCWJyZWFrOwkJ
Ly8gZ290IG91ciBmbGFnLCBkb24ndCBuZWVkIHRvIHRlc3QgYW55IG1vcmUNCgkJCQkJfQ0KCQkJ
CX0NCgkJCX0NCgkJCWlmICh0eXBlLmZpbmlzaCkNCgkJCQl0eXBlLmZpbmlzaChwaWNrX2luX2Zp
bmlzaCB8fCBpc19vcmJsb2NrKTsNCgkJCXJldHVybiBpc19vcmJsb2NrID8gYW55X3RydWUgOiBz
b2wuaGFzT2JqZWN0cygpOw0KCQl9DQoJfTsNCgljci5jb25kaXRpb24gPSBDb25kaXRpb247DQoJ
ZnVuY3Rpb24gQWN0aW9uKGJsb2NrLCBtKQ0KCXsNCgkJdGhpcy5ibG9jayA9IGJsb2NrOw0KCQl0
aGlzLnNoZWV0ID0gYmxvY2suc2hlZXQ7DQoJCXRoaXMucnVudGltZSA9IGJsb2NrLnJ1bnRpbWU7
DQoJCXRoaXMucGFyYW1ldGVycyA9IFtdOw0KCQl0aGlzLnJlc3VsdHMgPSBbXTsNCgkJdGhpcy5l
eHRyYSA9IHt9OwkJLy8gZm9yIHBsdWdpbnMgdG8gc3RvdyBhd2F5IHNvbWUgY3VzdG9tIGluZm8N
CgkJdGhpcy5pbmRleCA9IC0xOw0KCQl0aGlzLmFueVBhcmFtVmFyaWVzUGVySW5zdGFuY2UgPSBm
YWxzZTsNCgkJdGhpcy5mdW5jID0gdGhpcy5ydW50aW1lLkdldE9iamVjdFJlZmVyZW5jZShtWzFd
KTsNCjsNCgkJaWYgKG1bMF0gPT09IC0xKQkvLyBzeXN0ZW0NCgkJew0KCQkJdGhpcy50eXBlID0g
bnVsbDsNCgkJCXRoaXMucnVuID0gdGhpcy5ydW5fc3lzdGVtOw0KCQkJdGhpcy5iZWhhdmlvcnR5
cGUgPSBudWxsOw0KCQkJdGhpcy5iZWhfaW5kZXggPSAtMTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJ
CXRoaXMudHlwZSA9IHRoaXMucnVudGltZS50eXBlc19ieV9pbmRleFttWzBdXTsNCjsNCgkJCXRo
aXMucnVuID0gdGhpcy5ydW5fb2JqZWN0Ow0KCQkJaWYgKG1bMl0pDQoJCQl7DQoJCQkJdGhpcy5i
ZWhhdmlvcnR5cGUgPSB0aGlzLnR5cGUuZ2V0QmVoYXZpb3JCeU5hbWUobVsyXSk7DQo7DQoJCQkJ
dGhpcy5iZWhfaW5kZXggPSB0aGlzLnR5cGUuZ2V0QmVoYXZpb3JJbmRleEJ5TmFtZShtWzJdKTsN
CjsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLmJlaGF2aW9ydHlwZSA9IG51bGw7DQoJ
CQkJdGhpcy5iZWhfaW5kZXggPSAtMTsNCgkJCX0NCgkJfQ0KCQl0aGlzLnNpZCA9IG1bM107DQoJ
CXRoaXMucnVudGltZS5hY3RzQnlTaWRbdGhpcy5zaWQudG9TdHJpbmcoKV0gPSB0aGlzOw0KCQlp
ZiAobS5sZW5ndGggPT09IDYpDQoJCXsNCgkJCXZhciBpLCBsZW47DQoJCQl2YXIgZW0gPSBtWzVd
Ow0KCQkJZm9yIChpID0gMCwgbGVuID0gZW0ubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJ
CQkJdmFyIHBhcmFtID0gbmV3IGNyLnBhcmFtZXRlcih0aGlzLCBlbVtpXSk7DQoJCQkJY3Iuc2Vh
bChwYXJhbSk7DQoJCQkJdGhpcy5wYXJhbWV0ZXJzLnB1c2gocGFyYW0pOw0KCQkJfQ0KCQkJdGhp
cy5yZXN1bHRzLmxlbmd0aCA9IGVtLmxlbmd0aDsNCgkJfQ0KCX07DQoJQWN0aW9uLnByb3RvdHlw
ZS5wb3N0SW5pdCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuLCBwOw0KCQlmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJ
CXAgPSB0aGlzLnBhcmFtZXRlcnNbaV07DQoJCQlwLnBvc3RJbml0KCk7DQoJCQlpZiAocC52YXJp
ZXNQZXJJbnN0YW5jZSkNCgkJCQl0aGlzLmFueVBhcmFtVmFyaWVzUGVySW5zdGFuY2UgPSB0cnVl
Ow0KCQl9DQoJfTsNCglBY3Rpb24ucHJvdG90eXBlLnJ1bl9zeXN0ZW0gPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJdmFyIHJ1bnRpbWUgPSB0aGlzLnJ1bnRpbWU7DQoJCXZhciBpLCBsZW47DQoJCXZhciBw
YXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzOw0KCQl2YXIgcmVzdWx0cyA9IHRoaXMucmVzdWx0
czsNCgkJZm9yIChpID0gMCwgbGVuID0gcGFyYW1ldGVycy5sZW5ndGg7IGkgPCBsZW47ICsraSkN
CgkJCXJlc3VsdHNbaV0gPSBwYXJhbWV0ZXJzW2ldLmdldCgpOw0KCQlyZXR1cm4gdGhpcy5mdW5j
LmFwcGx5KHJ1bnRpbWUuc3lzdGVtLCByZXN1bHRzKTsNCgl9Ow0KCUFjdGlvbi5wcm90b3R5cGUu
cnVuX29iamVjdCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgdHlwZSA9IHRoaXMudHlwZTsNCgkJ
dmFyIGJlaF9pbmRleCA9IHRoaXMuYmVoX2luZGV4Ow0KCQl2YXIgZmFtaWx5X2luZGV4ID0gdHlw
ZS5mYW1pbHlfaW5kZXg7DQoJCXZhciBwYXJhbXNfdmFyeSA9IHRoaXMuYW55UGFyYW1WYXJpZXNQ
ZXJJbnN0YW5jZTsNCgkJdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7DQoJCXZhciBy
ZXN1bHRzID0gdGhpcy5yZXN1bHRzOw0KCQl2YXIgZnVuYyA9IHRoaXMuZnVuYzsNCgkJdmFyIGlu
c3RhbmNlcyA9IHR5cGUuZ2V0Q3VycmVudFNvbCgpLmdldE9iamVjdHMoKTsNCgkJdmFyIGlzX2Zh
bWlseSA9IHR5cGUuaXNfZmFtaWx5Ow0KCQl2YXIgaXNfYmVoID0gKGJlaF9pbmRleCA+IC0xKTsN
CgkJdmFyIGksIGosIGxlbmksIGxlbmosIHAsIGluc3QsIG9mZnNldDsNCgkJaWYgKHBhcmFtc192
YXJ5KQ0KCQl7DQoJCQlmb3IgKGogPSAwLCBsZW5qID0gcGFyYW1ldGVycy5sZW5ndGg7IGogPCBs
ZW5qOyArK2opDQoJCQl7DQoJCQkJcCA9IHBhcmFtZXRlcnNbal07DQoJCQkJaWYgKCFwLnZhcmll
c1Blckluc3RhbmNlKQ0KCQkJCQlyZXN1bHRzW2pdID0gcC5nZXQoMCk7DQoJCQl9DQoJCX0NCgkJ
ZWxzZQ0KCQl7DQoJCQlmb3IgKGogPSAwLCBsZW5qID0gcGFyYW1ldGVycy5sZW5ndGg7IGogPCBs
ZW5qOyArK2opDQoJCQkJcmVzdWx0c1tqXSA9IHBhcmFtZXRlcnNbal0uZ2V0KDApOw0KCQl9DQoJ
CWZvciAoaSA9IDAsIGxlbmkgPSBpbnN0YW5jZXMubGVuZ3RoOyBpIDwgbGVuaTsgKytpKQ0KCQl7
DQoJCQlpbnN0ID0gaW5zdGFuY2VzW2ldOw0KCQkJaWYgKHBhcmFtc192YXJ5KQ0KCQkJew0KCQkJ
CWZvciAoaiA9IDAsIGxlbmogPSBwYXJhbWV0ZXJzLmxlbmd0aDsgaiA8IGxlbmo7ICsraikNCgkJ
CQl7DQoJCQkJCXAgPSBwYXJhbWV0ZXJzW2pdOw0KCQkJCQlpZiAocC52YXJpZXNQZXJJbnN0YW5j
ZSkNCgkJCQkJCXJlc3VsdHNbal0gPSBwLmdldChpKTsgICAgLy8gcGFzcyBpIHRvIHVzZSBhcyBk
ZWZhdWx0IFNPTCBpbmRleA0KCQkJCX0NCgkJCX0NCgkJCWlmIChpc19iZWgpDQoJCQl7DQoJCQkJ
b2Zmc2V0ID0gMDsNCgkJCQlpZiAoaXNfZmFtaWx5KQ0KCQkJCXsNCgkJCQkJb2Zmc2V0ID0gaW5z
dC50eXBlLmZhbWlseV9iZWhfbWFwW2ZhbWlseV9pbmRleF07DQoJCQkJfQ0KCQkJCWZ1bmMuYXBw
bHkoaW5zdC5iZWhhdmlvcl9pbnN0c1tiZWhfaW5kZXggKyBvZmZzZXRdLCByZXN1bHRzKTsNCgkJ
CX0NCgkJCWVsc2UNCgkJCQlmdW5jLmFwcGx5KGluc3QsIHJlc3VsdHMpOw0KCQl9DQoJCXJldHVy
biBmYWxzZTsNCgl9Ow0KCWNyLmFjdGlvbiA9IEFjdGlvbjsNCgl2YXIgdGVtcFZhbHVlcyA9IFtd
Ow0KCXZhciB0ZW1wVmFsdWVzUHRyID0gLTE7DQoJZnVuY3Rpb24gcHVzaFRlbXBWYWx1ZSgpDQoJ
ew0KCQl0ZW1wVmFsdWVzUHRyKys7DQoJCWlmICh0ZW1wVmFsdWVzLmxlbmd0aCA9PT0gdGVtcFZh
bHVlc1B0cikNCgkJCXRlbXBWYWx1ZXMucHVzaChuZXcgY3IuZXhwdmFsdWUoKSk7DQoJCXJldHVy
biB0ZW1wVmFsdWVzW3RlbXBWYWx1ZXNQdHJdOw0KCX07DQoJZnVuY3Rpb24gcG9wVGVtcFZhbHVl
KCkNCgl7DQoJCXRlbXBWYWx1ZXNQdHItLTsNCgl9Ow0KCWZ1bmN0aW9uIFBhcmFtZXRlcihvd25l
ciwgbSkNCgl7DQoJCXRoaXMub3duZXIgPSBvd25lcjsNCgkJdGhpcy5ibG9jayA9IG93bmVyLmJs
b2NrOw0KCQl0aGlzLnNoZWV0ID0gb3duZXIuc2hlZXQ7DQoJCXRoaXMucnVudGltZSA9IG93bmVy
LnJ1bnRpbWU7DQoJCXRoaXMudHlwZSA9IG1bMF07DQoJCXRoaXMuZXhwcmVzc2lvbiA9IG51bGw7
DQoJCXRoaXMuc29saW5kZXggPSAwOw0KCQl0aGlzLmdldCA9IG51bGw7DQoJCXRoaXMuY29tYm9z
ZWwgPSAwOw0KCQl0aGlzLmxheW91dCA9IG51bGw7DQoJCXRoaXMua2V5ID0gMDsNCgkJdGhpcy5v
YmplY3QgPSBudWxsOw0KCQl0aGlzLmluZGV4ID0gMDsNCgkJdGhpcy52YXJuYW1lID0gbnVsbDsN
CgkJdGhpcy5ldmVudHZhciA9IG51bGw7DQoJCXRoaXMuZmlsZWluZm8gPSBudWxsOw0KCQl0aGlz
LnN1YnBhcmFtcyA9IG51bGw7DQoJCXRoaXMudmFyaWFkaWNyZXQgPSBudWxsOw0KCQl0aGlzLnN1
YnBhcmFtcyA9IG51bGw7DQoJCXRoaXMudmFyaWFkaWNyZXQgPSBudWxsOw0KCQl0aGlzLnZhcmll
c1Blckluc3RhbmNlID0gZmFsc2U7DQoJCXZhciBpLCBsZW4sIHBhcmFtOw0KCQlzd2l0Y2ggKG1b
MF0pDQoJCXsNCgkJCWNhc2UgMDoJCS8vIG51bWJlcg0KCQkJY2FzZSA3OgkJLy8gYW55DQoJCQkJ
dGhpcy5leHByZXNzaW9uID0gbmV3IGNyLmV4cE5vZGUodGhpcywgbVsxXSk7DQoJCQkJdGhpcy5z
b2xpbmRleCA9IDA7DQoJCQkJdGhpcy5nZXQgPSB0aGlzLmdldF9leHA7DQoJCQkJYnJlYWs7DQoJ
CQljYXNlIDE6CQkvLyBzdHJpbmcNCgkJCQl0aGlzLmV4cHJlc3Npb24gPSBuZXcgY3IuZXhwTm9k
ZSh0aGlzLCBtWzFdKTsNCgkJCQl0aGlzLnNvbGluZGV4ID0gMDsNCgkJCQl0aGlzLmdldCA9IHRo
aXMuZ2V0X2V4cF9zdHI7DQoJCQkJYnJlYWs7DQoJCQljYXNlIDU6CQkvLyBsYXllcg0KCQkJCXRo
aXMuZXhwcmVzc2lvbiA9IG5ldyBjci5leHBOb2RlKHRoaXMsIG1bMV0pOw0KCQkJCXRoaXMuc29s
aW5kZXggPSAwOw0KCQkJCXRoaXMuZ2V0ID0gdGhpcy5nZXRfbGF5ZXI7DQoJCQkJYnJlYWs7DQoJ
CQljYXNlIDM6CQkvLyBjb21ibw0KCQkJY2FzZSA4OgkJLy8gY21wDQoJCQkJdGhpcy5jb21ib3Nl
bCA9IG1bMV07DQoJCQkJdGhpcy5nZXQgPSB0aGlzLmdldF9jb21ib3NlbDsNCgkJCQlicmVhazsN
CgkJCWNhc2UgNjoJCS8vIGxheW91dA0KCQkJCXRoaXMubGF5b3V0ID0gdGhpcy5ydW50aW1lLmxh
eW91dHNbbVsxXV07DQo7DQoJCQkJdGhpcy5nZXQgPSB0aGlzLmdldF9sYXlvdXQ7DQoJCQkJYnJl
YWs7DQoJCQljYXNlIDk6CQkvLyBrZXliDQoJCQkJdGhpcy5rZXkgPSBtWzFdOw0KCQkJCXRoaXMu
Z2V0ID0gdGhpcy5nZXRfa2V5Ow0KCQkJCWJyZWFrOw0KCQkJY2FzZSA0OgkJLy8gb2JqZWN0DQoJ
CQkJdGhpcy5vYmplY3QgPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbbVsxXV07DQo7DQoJ
CQkJdGhpcy5nZXQgPSB0aGlzLmdldF9vYmplY3Q7DQoJCQkJdGhpcy5ibG9jay5hZGRTb2xNb2Rp
Zmllcih0aGlzLm9iamVjdCk7DQoJCQkJaWYgKHRoaXMub3duZXIgaW5zdGFuY2VvZiBjci5hY3Rp
b24pDQoJCQkJCXRoaXMuYmxvY2suc2V0U29sV3JpdGVyQWZ0ZXJDbmRzKCk7DQoJCQkJZWxzZSBp
ZiAodGhpcy5ibG9jay5wYXJlbnQpDQoJCQkJCXRoaXMuYmxvY2sucGFyZW50LnNldFNvbFdyaXRl
ckFmdGVyQ25kcygpOw0KCQkJCWJyZWFrOw0KCQkJY2FzZSAxMDoJLy8gaW5zdHZhcg0KCQkJCXRo
aXMuaW5kZXggPSBtWzFdOw0KCQkJCWlmIChvd25lci50eXBlICYmIG93bmVyLnR5cGUuaXNfZmFt
aWx5KQ0KCQkJCXsNCgkJCQkJdGhpcy5nZXQgPSB0aGlzLmdldF9mYW1pbHl2YXI7DQoJCQkJCXRo
aXMudmFyaWVzUGVySW5zdGFuY2UgPSB0cnVlOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJCXRoaXMu
Z2V0ID0gdGhpcy5nZXRfaW5zdHZhcjsNCgkJCQlicmVhazsNCgkJCWNhc2UgMTE6CS8vIGV2ZW50
dmFyDQoJCQkJdGhpcy52YXJuYW1lID0gbVsxXTsNCgkJCQl0aGlzLmV2ZW50dmFyID0gbnVsbDsN
CgkJCQl0aGlzLmdldCA9IHRoaXMuZ2V0X2V2ZW50dmFyOw0KCQkJCWJyZWFrOw0KCQkJY2FzZSAy
OgkJLy8gYXVkaW9maWxlCVsibmFtZSIsIGlzbXVzaWNdDQoJCQljYXNlIDEyOgkvLyBmaWxlaW5m
bwkJIm5hbWUiDQoJCQkJdGhpcy5maWxlaW5mbyA9IG1bMV07DQoJCQkJdGhpcy5nZXQgPSB0aGlz
LmdldF9hdWRpb2ZpbGU7DQoJCQkJYnJlYWs7DQoJCQljYXNlIDEzOgkvLyB2YXJpYWRpYw0KCQkJ
CXRoaXMuZ2V0ID0gdGhpcy5nZXRfdmFyaWFkaWM7DQoJCQkJdGhpcy5zdWJwYXJhbXMgPSBbXTsN
CgkJCQl0aGlzLnZhcmlhZGljcmV0ID0gW107DQoJCQkJZm9yIChpID0gMSwgbGVuID0gbS5sZW5n
dGg7IGkgPCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCXBhcmFtID0gbmV3IGNyLnBhcmFtZXRlcih0
aGlzLm93bmVyLCBtW2ldKTsNCgkJCQkJY3Iuc2VhbChwYXJhbSk7DQoJCQkJCXRoaXMuc3VicGFy
YW1zLnB1c2gocGFyYW0pOw0KCQkJCQl0aGlzLnZhcmlhZGljcmV0LnB1c2goMCk7DQoJCQkJfQ0K
CQkJCWJyZWFrOw0KCQkJZGVmYXVsdDoNCjsNCgkJfQ0KCX07DQoJUGFyYW1ldGVyLnByb3RvdHlw
ZS5wb3N0SW5pdCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuOw0KCQlpZiAodGhpcy50
eXBlID09PSAxMSkJCS8vIGV2ZW50dmFyDQoJCXsNCgkJCXRoaXMuZXZlbnR2YXIgPSB0aGlzLnJ1
bnRpbWUuZ2V0RXZlbnRWYXJpYWJsZUJ5TmFtZSh0aGlzLnZhcm5hbWUsIHRoaXMuYmxvY2sucGFy
ZW50KTsNCjsNCgkJfQ0KCQllbHNlIGlmICh0aGlzLnR5cGUgPT09IDEzKQkvLyB2YXJpYWRpYywg
cG9zdEluaXQgYWxsIHN1Yi1wYXJhbXMNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5z
dWJwYXJhbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJdGhpcy5zdWJwYXJhbXNbaV0ucG9z
dEluaXQoKTsNCgkJfQ0KCQlpZiAodGhpcy5leHByZXNzaW9uKQ0KCQkJdGhpcy5leHByZXNzaW9u
LnBvc3RJbml0KCk7DQoJfTsNCglQYXJhbWV0ZXIucHJvdG90eXBlLm1heWJlVmFyeUZvclR5cGUg
PSBmdW5jdGlvbiAodCkNCgl7DQoJCWlmICh0aGlzLnZhcmllc1Blckluc3RhbmNlKQ0KCQkJcmV0
dXJuOwkJCQkvLyBhbHJlYWR5IHZhcmllcyBwZXIgaW5zdGFuY2UsIG5vIG5lZWQgdG8gY2hlY2sg
YWdhaW4NCgkJaWYgKCF0KQ0KCQkJcmV0dXJuOwkJCQkvLyBuZXZlciB2YXJ5IGZvciBzeXN0ZW0g
dHlwZQ0KCQlpZiAoIXQucGx1Z2luLnNpbmdsZWdsb2JhbCkNCgkJew0KCQkJdGhpcy52YXJpZXNQ
ZXJJbnN0YW5jZSA9IHRydWU7DQoJCQlyZXR1cm47DQoJCX0NCgl9Ow0KCVBhcmFtZXRlci5wcm90
b3R5cGUuc2V0VmFyaWVzID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMudmFyaWVzUGVySW5zdGFu
Y2UgPSB0cnVlOw0KCX07DQoJUGFyYW1ldGVyLnByb3RvdHlwZS5nZXRfZXhwID0gZnVuY3Rpb24g
KHNvbGluZGV4KQ0KCXsNCgkJdGhpcy5zb2xpbmRleCA9IHNvbGluZGV4IHx8IDA7ICAgLy8gZGVm
YXVsdCBTT0wgaW5kZXggdG8gdXNlDQoJCXZhciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0KCQl0
aGlzLmV4cHJlc3Npb24uZ2V0KHRlbXApOw0KCQlwb3BUZW1wVmFsdWUoKTsNCgkJcmV0dXJuIHRl
bXAuZGF0YTsgICAgICAJCQkvLyByZXR1cm4gYWN0dWFsIEpTIHZhbHVlLCBub3QgZXhwdmFsdWUN
Cgl9Ow0KCVBhcmFtZXRlci5wcm90b3R5cGUuZ2V0X2V4cF9zdHIgPSBmdW5jdGlvbiAoc29saW5k
ZXgpDQoJew0KCQl0aGlzLnNvbGluZGV4ID0gc29saW5kZXggfHwgMDsgICAvLyBkZWZhdWx0IFNP
TCBpbmRleCB0byB1c2UNCgkJdmFyIHRlbXAgPSBwdXNoVGVtcFZhbHVlKCk7DQoJCXRoaXMuZXhw
cmVzc2lvbi5nZXQodGVtcCk7DQoJCXBvcFRlbXBWYWx1ZSgpOw0KCQlpZiAoY3IuaXNfc3RyaW5n
KHRlbXAuZGF0YSkpDQoJCQlyZXR1cm4gdGVtcC5kYXRhOw0KCQllbHNlDQoJCQlyZXR1cm4gIiI7
DQoJfTsNCglQYXJhbWV0ZXIucHJvdG90eXBlLmdldF9vYmplY3QgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJcmV0dXJuIHRoaXMub2JqZWN0Ow0KCX07DQoJUGFyYW1ldGVyLnByb3RvdHlwZS5nZXRfY29t
Ym9zZWwgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuY29tYm9zZWw7DQoJfTsNCglQ
YXJhbWV0ZXIucHJvdG90eXBlLmdldF9sYXllciA9IGZ1bmN0aW9uIChzb2xpbmRleCkNCgl7DQoJ
CXRoaXMuc29saW5kZXggPSBzb2xpbmRleCB8fCAwOyAgIC8vIGRlZmF1bHQgU09MIGluZGV4IHRv
IHVzZQ0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsNCgkJdGhpcy5leHByZXNzaW9uLmdl
dCh0ZW1wKTsNCgkJcG9wVGVtcFZhbHVlKCk7DQoJCWlmICh0ZW1wLmlzX251bWJlcigpKQ0KCQkJ
cmV0dXJuIHRoaXMucnVudGltZS5nZXRMYXllckJ5TnVtYmVyKHRlbXAuZGF0YSk7DQoJCWVsc2UN
CgkJCXJldHVybiB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXJCeU5hbWUodGVtcC5kYXRhKTsNCgl9DQoJ
UGFyYW1ldGVyLnByb3RvdHlwZS5nZXRfbGF5b3V0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVy
biB0aGlzLmxheW91dDsNCgl9Ow0KCVBhcmFtZXRlci5wcm90b3R5cGUuZ2V0X2tleSA9IGZ1bmN0
aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5rZXk7DQoJfTsNCglQYXJhbWV0ZXIucHJvdG90eXBl
LmdldF9pbnN0dmFyID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlzLmluZGV4Ow0KCX07
DQoJUGFyYW1ldGVyLnByb3RvdHlwZS5nZXRfZmFtaWx5dmFyID0gZnVuY3Rpb24gKHNvbGluZGV4
XykNCgl7DQoJCXZhciBzb2xpbmRleCA9IHNvbGluZGV4XyB8fCAwOw0KCQl2YXIgZmFtaWx5dHlw
ZSA9IHRoaXMub3duZXIudHlwZTsNCgkJdmFyIHJlYWx0eXBlID0gbnVsbDsNCgkJdmFyIHNvbCA9
IGZhbWlseXR5cGUuZ2V0Q3VycmVudFNvbCgpOw0KCQl2YXIgb2JqcyA9IHNvbC5nZXRPYmplY3Rz
KCk7DQoJCWlmIChvYmpzLmxlbmd0aCkNCgkJCXJlYWx0eXBlID0gb2Jqc1tzb2xpbmRleCAlIG9i
anMubGVuZ3RoXS50eXBlOw0KCQllbHNlIGlmIChzb2wuZWxzZV9pbnN0YW5jZXMubGVuZ3RoKQ0K
CQkJcmVhbHR5cGUgPSBzb2wuZWxzZV9pbnN0YW5jZXNbc29saW5kZXggJSBzb2wuZWxzZV9pbnN0
YW5jZXMubGVuZ3RoXS50eXBlOw0KCQllbHNlIGlmIChmYW1pbHl0eXBlLmluc3RhbmNlcy5sZW5n
dGgpDQoJCQlyZWFsdHlwZSA9IGZhbWlseXR5cGUuaW5zdGFuY2VzW3NvbGluZGV4ICUgZmFtaWx5
dHlwZS5pbnN0YW5jZXMubGVuZ3RoXS50eXBlOw0KCQllbHNlDQoJCQlyZXR1cm4gMDsNCgkJcmV0
dXJuIHRoaXMuaW5kZXggKyByZWFsdHlwZS5mYW1pbHlfdmFyX21hcFtmYW1pbHl0eXBlLmZhbWls
eV9pbmRleF07DQoJfTsNCglQYXJhbWV0ZXIucHJvdG90eXBlLmdldF9ldmVudHZhciA9IGZ1bmN0
aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5ldmVudHZhcjsNCgl9Ow0KCVBhcmFtZXRlci5wcm90
b3R5cGUuZ2V0X2F1ZGlvZmlsZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5maWxl
aW5mbzsNCgl9Ow0KCVBhcmFtZXRlci5wcm90b3R5cGUuZ2V0X3ZhcmlhZGljID0gZnVuY3Rpb24g
KCkNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuc3VicGFyYW1z
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0aGlzLnZhcmlhZGljcmV0W2ldID0gdGhp
cy5zdWJwYXJhbXNbaV0uZ2V0KCk7DQoJCX0NCgkJcmV0dXJuIHRoaXMudmFyaWFkaWNyZXQ7DQoJ
fTsNCgljci5wYXJhbWV0ZXIgPSBQYXJhbWV0ZXI7DQoJZnVuY3Rpb24gRXZlbnRWYXJpYWJsZShz
aGVldCwgcGFyZW50LCBtKQ0KCXsNCgkJdGhpcy5zaGVldCA9IHNoZWV0Ow0KCQl0aGlzLnBhcmVu
dCA9IHBhcmVudDsNCgkJdGhpcy5ydW50aW1lID0gc2hlZXQucnVudGltZTsNCgkJdGhpcy5zb2xN
b2RpZmllcnMgPSBbXTsNCgkJdGhpcy5uYW1lID0gbVsxXTsNCgkJdGhpcy52YXJ0eXBlID0gbVsy
XTsNCgkJdGhpcy5pbml0aWFsID0gbVszXTsNCgkJdGhpcy5pc19zdGF0aWMgPSAhIW1bNF07DQoJ
CXRoaXMuaXNfY29uc3RhbnQgPSAhIW1bNV07DQoJCXRoaXMuc2lkID0gbVs2XTsNCgkJdGhpcy5y
dW50aW1lLnZhcnNCeVNpZFt0aGlzLnNpZC50b1N0cmluZygpXSA9IHRoaXM7DQoJCXRoaXMuZGF0
YSA9IHRoaXMuaW5pdGlhbDsJLy8gbm90ZTogYWxzbyBzdG9yZWQgaW4gZXZlbnQgc3RhY2sgZnJh
bWUgZm9yIGxvY2FsIG5vbnN0YXRpYyBub25jb25zdCB2YXJzDQoJCWlmICh0aGlzLnBhcmVudCkJ
CQkvLyBsb2NhbCB2YXINCgkJew0KCQkJaWYgKHRoaXMuaXNfc3RhdGljIHx8IHRoaXMuaXNfY29u
c3RhbnQpDQoJCQkJdGhpcy5sb2NhbEluZGV4ID0gLTE7DQoJCQllbHNlDQoJCQkJdGhpcy5sb2Nh
bEluZGV4ID0gdGhpcy5ydW50aW1lLnN0YWNrTG9jYWxDb3VudCsrOw0KCQkJdGhpcy5ydW50aW1l
LmFsbF9sb2NhbF92YXJzLnB1c2godGhpcyk7DQoJCX0NCgkJZWxzZQkJCQkJCS8vIGdsb2JhbCB2
YXINCgkJew0KCQkJdGhpcy5sb2NhbEluZGV4ID0gLTE7DQoJCQl0aGlzLnJ1bnRpbWUuYWxsX2ds
b2JhbF92YXJzLnB1c2godGhpcyk7DQoJCX0NCgl9Ow0KCUV2ZW50VmFyaWFibGUucHJvdG90eXBl
LnBvc3RJbml0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuc29sTW9kaWZpZXJzID0gZmluZE1h
dGNoaW5nU29sTW9kaWZpZXIodGhpcy5zb2xNb2RpZmllcnMpOw0KCX07DQoJRXZlbnRWYXJpYWJs
ZS5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiAoeCkNCgl7DQo7DQoJCXZhciBsdnMgPSB0
aGlzLnJ1bnRpbWUuZ2V0Q3VycmVudExvY2FsVmFyU3RhY2soKTsNCgkJaWYgKCF0aGlzLnBhcmVu
dCB8fCB0aGlzLmlzX3N0YXRpYyB8fCAhbHZzKQ0KCQkJdGhpcy5kYXRhID0geDsNCgkJZWxzZQkv
LyBsb2NhbCBub25zdGF0aWMgdmFyaWFibGU6IHVzZSBldmVudCBzdGFjayB0byBrZWVwIHZhbHVl
IGF0IHRoaXMgbGV2ZWwgb2YgcmVjdXJzaW9uDQoJCXsNCgkJCWlmICh0aGlzLmxvY2FsSW5kZXgg
Pj0gbHZzLmxlbmd0aCkNCgkJCQlsdnMubGVuZ3RoID0gdGhpcy5sb2NhbEluZGV4ICsgMTsNCgkJ
CWx2c1t0aGlzLmxvY2FsSW5kZXhdID0geDsNCgkJfQ0KCX07DQoJRXZlbnRWYXJpYWJsZS5wcm90
b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGx2cyA9IHRoaXMucnVudGlt
ZS5nZXRDdXJyZW50TG9jYWxWYXJTdGFjaygpOw0KCQlpZiAoIXRoaXMucGFyZW50IHx8IHRoaXMu
aXNfc3RhdGljIHx8ICFsdnMgfHwgdGhpcy5pc19jb25zdGFudCkNCgkJCXJldHVybiB0aGlzLmRh
dGE7DQoJCWVsc2UJLy8gbG9jYWwgbm9uc3RhdGljIHZhcmlhYmxlDQoJCXsNCgkJCWlmICh0aGlz
LmxvY2FsSW5kZXggPj0gbHZzLmxlbmd0aCkNCgkJCXsNCgkJCQlyZXR1cm4gdGhpcy5pbml0aWFs
Ow0KCQkJfQ0KCQkJaWYgKHR5cGVvZiBsdnNbdGhpcy5sb2NhbEluZGV4XSA9PT0gInVuZGVmaW5l
ZCIpDQoJCQl7DQoJCQkJcmV0dXJuIHRoaXMuaW5pdGlhbDsNCgkJCX0NCgkJCXJldHVybiBsdnNb
dGhpcy5sb2NhbEluZGV4XTsNCgkJfQ0KCX07DQoJRXZlbnRWYXJpYWJsZS5wcm90b3R5cGUucnVu
ID0gZnVuY3Rpb24gKCkNCgl7DQoJCQlpZiAodGhpcy5wYXJlbnQgJiYgIXRoaXMuaXNfc3RhdGlj
ICYmICF0aGlzLmlzX2NvbnN0YW50KQ0KCQkJCXRoaXMuc2V0VmFsdWUodGhpcy5pbml0aWFsKTsN
Cgl9Ow0KCWNyLmV2ZW50dmFyaWFibGUgPSBFdmVudFZhcmlhYmxlOw0KCWZ1bmN0aW9uIEV2ZW50
SW5jbHVkZShzaGVldCwgcGFyZW50LCBtKQ0KCXsNCgkJdGhpcy5zaGVldCA9IHNoZWV0Ow0KCQl0
aGlzLnBhcmVudCA9IHBhcmVudDsNCgkJdGhpcy5ydW50aW1lID0gc2hlZXQucnVudGltZTsNCgkJ
dGhpcy5zb2xNb2RpZmllcnMgPSBbXTsNCgkJdGhpcy5pbmNsdWRlX3NoZWV0ID0gbnVsbDsJCS8v
IGRldGVybWluZWQgaW4gcG9zdEluaXQNCgkJdGhpcy5pbmNsdWRlX3NoZWV0X25hbWUgPSBtWzFd
Ow0KCQl0aGlzLmFjdGl2ZSA9IHRydWU7DQoJfTsNCglFdmVudEluY2x1ZGUucHJvdG90eXBlLnRv
U3RyaW5nID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiAiaW5jbHVkZToiICsgdGhpcy5pbmNs
dWRlX3NoZWV0LnRvU3RyaW5nKCk7DQoJfTsNCglFdmVudEluY2x1ZGUucHJvdG90eXBlLnBvc3RJ
bml0ID0gZnVuY3Rpb24gKCkNCgl7DQogICAgICAgIHRoaXMuaW5jbHVkZV9zaGVldCA9IHRoaXMu
cnVudGltZS5ldmVudHNoZWV0c1t0aGlzLmluY2x1ZGVfc2hlZXRfbmFtZV07DQo7DQo7DQogICAg
ICAgIHRoaXMuc2hlZXQuaW5jbHVkZXMuYWRkKHRoaXMpOw0KCQl0aGlzLnNvbE1vZGlmaWVycyA9
IGZpbmRNYXRjaGluZ1NvbE1vZGlmaWVyKHRoaXMuc29sTW9kaWZpZXJzKTsNCgkJdmFyIHAgPSB0
aGlzLnBhcmVudDsNCgkJd2hpbGUgKHApDQoJCXsNCgkJCWlmIChwLmdyb3VwKQ0KCQkJCXAuY29u
dGFpbmVkX2luY2x1ZGVzLnB1c2godGhpcyk7DQoJCQlwID0gcC5wYXJlbnQ7DQoJCX0NCgkJdGhp
cy51cGRhdGVBY3RpdmUoKTsNCgl9Ow0KCUV2ZW50SW5jbHVkZS5wcm90b3R5cGUucnVuID0gZnVu
Y3Rpb24gKCkNCgl7DQoJCQlpZiAodGhpcy5wYXJlbnQpDQoJCQkJdGhpcy5ydW50aW1lLnB1c2hD
bGVhblNvbCh0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXgpOw0KICAgICAgICBpZiAoIXRoaXMu
aW5jbHVkZV9zaGVldC5oYXNSdW4pDQogICAgICAgICAgICB0aGlzLmluY2x1ZGVfc2hlZXQucnVu
KHRydWUpOwkJCS8vIGZyb20gaW5jbHVkZQ0KCQkJaWYgKHRoaXMucGFyZW50KQ0KCQkJCXRoaXMu
cnVudGltZS5wb3BTb2wodGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4KTsNCgl9Ow0KCUV2ZW50
SW5jbHVkZS5wcm90b3R5cGUudXBkYXRlQWN0aXZlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBw
ID0gdGhpcy5wYXJlbnQ7DQoJCXdoaWxlIChwKQ0KCQl7DQoJCQlpZiAocC5ncm91cCAmJiAhcC5n
cm91cF9hY3RpdmUpDQoJCQl7DQoJCQkJdGhpcy5hY3RpdmUgPSBmYWxzZTsNCgkJCQlyZXR1cm47
DQoJCQl9DQoJCQlwID0gcC5wYXJlbnQ7DQoJCX0NCgkJdGhpcy5hY3RpdmUgPSB0cnVlOw0KCX07
DQoJRXZlbnRJbmNsdWRlLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQly
ZXR1cm4gdGhpcy5hY3RpdmU7DQoJfTsNCgljci5ldmVudGluY2x1ZGUgPSBFdmVudEluY2x1ZGU7
DQoJZnVuY3Rpb24gRXZlbnRTdGFja0ZyYW1lKCkNCgl7DQoJCXRoaXMudGVtcF9wYXJlbnRzX2Fy
ciA9IFtdOw0KCQl0aGlzLnJlc2V0KG51bGwpOw0KCQljci5zZWFsKHRoaXMpOw0KCX07DQoJRXZl
bnRTdGFja0ZyYW1lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIChjdXJfZXZlbnQpDQoJew0K
CQl0aGlzLmN1cnJlbnRfZXZlbnQgPSBjdXJfZXZlbnQ7DQoJCXRoaXMuY25kaW5kZXggPSAwOw0K
CQl0aGlzLmFjdGluZGV4ID0gMDsNCgkJY3IuY2xlYXJBcnJheSh0aGlzLnRlbXBfcGFyZW50c19h
cnIpOw0KCQl0aGlzLmxhc3RfZXZlbnRfdHJ1ZSA9IGZhbHNlOw0KCQl0aGlzLmVsc2VfYnJhbmNo
X3JhbiA9IGZhbHNlOw0KCQl0aGlzLmFueV90cnVlX3N0YXRlID0gZmFsc2U7DQoJfTsNCglFdmVu
dFN0YWNrRnJhbWUucHJvdG90eXBlLmlzTW9kaWZpZXJBZnRlckNuZHMgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJaWYgKHRoaXMuY3VycmVudF9ldmVudC5zb2xXcml0ZXJBZnRlckNuZHMpDQoJCQlyZXR1
cm4gdHJ1ZTsNCgkJaWYgKHRoaXMuY25kaW5kZXggPCB0aGlzLmN1cnJlbnRfZXZlbnQuY29uZGl0
aW9ucy5sZW5ndGggLSAxKQ0KCQkJcmV0dXJuICEhdGhpcy5jdXJyZW50X2V2ZW50LnNvbE1vZGlm
aWVycy5sZW5ndGg7DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCWNyLmV2ZW50U3RhY2tGcmFtZSA9
IEV2ZW50U3RhY2tGcmFtZTsNCn0oKSk7DQooZnVuY3Rpb24oKQ0Kew0KCWZ1bmN0aW9uIEV4cE5v
ZGUob3duZXJfLCBtKQ0KCXsNCgkJdGhpcy5vd25lciA9IG93bmVyXzsNCgkJdGhpcy5ydW50aW1l
ID0gb3duZXJfLnJ1bnRpbWU7DQoJCXRoaXMudHlwZSA9IG1bMF07DQo7DQoJCXRoaXMuZ2V0ID0g
W3RoaXMuZXZhbF9pbnQsDQoJCQkJCXRoaXMuZXZhbF9mbG9hdCwNCgkJCQkJdGhpcy5ldmFsX3N0
cmluZywNCgkJCQkJdGhpcy5ldmFsX3VuYXJ5bWludXMsDQoJCQkJCXRoaXMuZXZhbF9hZGQsDQoJ
CQkJCXRoaXMuZXZhbF9zdWJ0cmFjdCwNCgkJCQkJdGhpcy5ldmFsX211bHRpcGx5LA0KCQkJCQl0
aGlzLmV2YWxfZGl2aWRlLA0KCQkJCQl0aGlzLmV2YWxfbW9kLA0KCQkJCQl0aGlzLmV2YWxfcG93
ZXIsDQoJCQkJCXRoaXMuZXZhbF9hbmQsDQoJCQkJCXRoaXMuZXZhbF9vciwNCgkJCQkJdGhpcy5l
dmFsX2VxdWFsLA0KCQkJCQl0aGlzLmV2YWxfbm90ZXF1YWwsDQoJCQkJCXRoaXMuZXZhbF9sZXNz
LA0KCQkJCQl0aGlzLmV2YWxfbGVzc2VxdWFsLA0KCQkJCQl0aGlzLmV2YWxfZ3JlYXRlciwNCgkJ
CQkJdGhpcy5ldmFsX2dyZWF0ZXJlcXVhbCwNCgkJCQkJdGhpcy5ldmFsX2NvbmRpdGlvbmFsLA0K
CQkJCQl0aGlzLmV2YWxfc3lzdGVtX2V4cCwNCgkJCQkJdGhpcy5ldmFsX29iamVjdF9leHAsDQoJ
CQkJCXRoaXMuZXZhbF9pbnN0dmFyX2V4cCwNCgkJCQkJdGhpcy5ldmFsX2JlaGF2aW9yX2V4cCwN
CgkJCQkJdGhpcy5ldmFsX2V2ZW50dmFyX2V4cF1bdGhpcy50eXBlXTsNCgkJdmFyIHBhcmFtc01v
ZGVsID0gbnVsbDsNCgkJdGhpcy52YWx1ZSA9IG51bGw7DQoJCXRoaXMuZmlyc3QgPSBudWxsOw0K
CQl0aGlzLnNlY29uZCA9IG51bGw7DQoJCXRoaXMudGhpcmQgPSBudWxsOw0KCQl0aGlzLmZ1bmMg
PSBudWxsOw0KCQl0aGlzLnJlc3VsdHMgPSBudWxsOw0KCQl0aGlzLnBhcmFtZXRlcnMgPSBudWxs
Ow0KCQl0aGlzLm9iamVjdF90eXBlID0gbnVsbDsNCgkJdGhpcy5iZWhfaW5kZXggPSAtMTsNCgkJ
dGhpcy5pbnN0YW5jZV9leHByID0gbnVsbDsNCgkJdGhpcy52YXJpbmRleCA9IC0xOw0KCQl0aGlz
LmJlaGF2aW9yX3R5cGUgPSBudWxsOw0KCQl0aGlzLnZhcm5hbWUgPSBudWxsOw0KCQl0aGlzLmV2
ZW50dmFyID0gbnVsbDsNCgkJdGhpcy5yZXR1cm5fc3RyaW5nID0gZmFsc2U7DQoJCXN3aXRjaCAo
dGhpcy50eXBlKSB7DQoJCWNhc2UgMDoJCS8vIGludA0KCQljYXNlIDE6CQkvLyBmbG9hdA0KCQlj
YXNlIDI6CQkvLyBzdHJpbmcNCgkJCXRoaXMudmFsdWUgPSBtWzFdOw0KCQkJYnJlYWs7DQoJCWNh
c2UgMzoJCS8vIHVuYXJ5bWludXMNCgkJCXRoaXMuZmlyc3QgPSBuZXcgY3IuZXhwTm9kZShvd25l
cl8sIG1bMV0pOw0KCQkJYnJlYWs7DQoJCWNhc2UgMTg6CS8vIGNvbmRpdGlvbmFsDQoJCQl0aGlz
LmZpcnN0ID0gbmV3IGNyLmV4cE5vZGUob3duZXJfLCBtWzFdKTsNCgkJCXRoaXMuc2Vjb25kID0g
bmV3IGNyLmV4cE5vZGUob3duZXJfLCBtWzJdKTsNCgkJCXRoaXMudGhpcmQgPSBuZXcgY3IuZXhw
Tm9kZShvd25lcl8sIG1bM10pOw0KCQkJYnJlYWs7DQoJCWNhc2UgMTk6CS8vIHN5c3RlbV9leHAN
CgkJCXRoaXMuZnVuYyA9IHRoaXMucnVudGltZS5HZXRPYmplY3RSZWZlcmVuY2UobVsxXSk7DQo7
DQoJCQlpZiAodGhpcy5mdW5jID09PSBjci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5leHBzLnJh
bmRvbQ0KCQkJIHx8IHRoaXMuZnVuYyA9PT0gY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuZXhw
cy5jaG9vc2UpDQoJCQl7DQoJCQkJdGhpcy5vd25lci5zZXRWYXJpZXMoKTsNCgkJCX0NCgkJCXRo
aXMucmVzdWx0cyA9IFtdOw0KCQkJdGhpcy5wYXJhbWV0ZXJzID0gW107DQoJCQlpZiAobS5sZW5n
dGggPT09IDMpDQoJCQl7DQoJCQkJcGFyYW1zTW9kZWwgPSBtWzJdOw0KCQkJCXRoaXMucmVzdWx0
cy5sZW5ndGggPSBwYXJhbXNNb2RlbC5sZW5ndGggKyAxOwkvLyBtdXN0IGFsc28gZml0ICdyZXQn
DQoJCQl9DQoJCQllbHNlDQoJCQkJdGhpcy5yZXN1bHRzLmxlbmd0aCA9IDE7ICAgICAgLy8gdG8g
Zml0ICdyZXQnDQoJCQlicmVhazsNCgkJY2FzZSAyMDoJLy8gb2JqZWN0X2V4cA0KCQkJdGhpcy5v
YmplY3RfdHlwZSA9IHRoaXMucnVudGltZS50eXBlc19ieV9pbmRleFttWzFdXTsNCjsNCgkJCXRo
aXMuYmVoX2luZGV4ID0gLTE7DQoJCQl0aGlzLmZ1bmMgPSB0aGlzLnJ1bnRpbWUuR2V0T2JqZWN0
UmVmZXJlbmNlKG1bMl0pOw0KCQkJdGhpcy5yZXR1cm5fc3RyaW5nID0gbVszXTsNCgkJCWlmIChj
ci5wbHVnaW5zXy5GdW5jdGlvbiAmJiB0aGlzLmZ1bmMgPT09IGNyLnBsdWdpbnNfLkZ1bmN0aW9u
LnByb3RvdHlwZS5leHBzLkNhbGwpDQoJCQl7DQoJCQkJdGhpcy5vd25lci5zZXRWYXJpZXMoKTsN
CgkJCX0NCgkJCWlmIChtWzRdKQ0KCQkJCXRoaXMuaW5zdGFuY2VfZXhwciA9IG5ldyBjci5leHBO
b2RlKG93bmVyXywgbVs0XSk7DQoJCQllbHNlDQoJCQkJdGhpcy5pbnN0YW5jZV9leHByID0gbnVs
bDsNCgkJCXRoaXMucmVzdWx0cyA9IFtdOw0KCQkJdGhpcy5wYXJhbWV0ZXJzID0gW107DQoJCQlp
ZiAobS5sZW5ndGggPT09IDYpDQoJCQl7DQoJCQkJcGFyYW1zTW9kZWwgPSBtWzVdOw0KCQkJCXRo
aXMucmVzdWx0cy5sZW5ndGggPSBwYXJhbXNNb2RlbC5sZW5ndGggKyAxOw0KCQkJfQ0KCQkJZWxz
ZQ0KCQkJCXRoaXMucmVzdWx0cy5sZW5ndGggPSAxOwkvLyB0byBmaXQgJ3JldCcNCgkJCWJyZWFr
Ow0KCQljYXNlIDIxOgkJLy8gaW5zdHZhcl9leHANCgkJCXRoaXMub2JqZWN0X3R5cGUgPSB0aGlz
LnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbbVsxXV07DQo7DQoJCQl0aGlzLnJldHVybl9zdHJpbmcg
PSBtWzJdOw0KCQkJaWYgKG1bM10pDQoJCQkJdGhpcy5pbnN0YW5jZV9leHByID0gbmV3IGNyLmV4
cE5vZGUob3duZXJfLCBtWzNdKTsNCgkJCWVsc2UNCgkJCQl0aGlzLmluc3RhbmNlX2V4cHIgPSBu
dWxsOw0KCQkJdGhpcy52YXJpbmRleCA9IG1bNF07DQoJCQlicmVhazsNCgkJY2FzZSAyMjoJCS8v
IGJlaGF2aW9yX2V4cA0KCQkJdGhpcy5vYmplY3RfdHlwZSA9IHRoaXMucnVudGltZS50eXBlc19i
eV9pbmRleFttWzFdXTsNCjsNCgkJCXRoaXMuYmVoYXZpb3JfdHlwZSA9IHRoaXMub2JqZWN0X3R5
cGUuZ2V0QmVoYXZpb3JCeU5hbWUobVsyXSk7DQo7DQoJCQl0aGlzLmJlaF9pbmRleCA9IHRoaXMu
b2JqZWN0X3R5cGUuZ2V0QmVoYXZpb3JJbmRleEJ5TmFtZShtWzJdKTsNCgkJCXRoaXMuZnVuYyA9
IHRoaXMucnVudGltZS5HZXRPYmplY3RSZWZlcmVuY2UobVszXSk7DQoJCQl0aGlzLnJldHVybl9z
dHJpbmcgPSBtWzRdOw0KCQkJaWYgKG1bNV0pDQoJCQkJdGhpcy5pbnN0YW5jZV9leHByID0gbmV3
IGNyLmV4cE5vZGUob3duZXJfLCBtWzVdKTsNCgkJCWVsc2UNCgkJCQl0aGlzLmluc3RhbmNlX2V4
cHIgPSBudWxsOw0KCQkJdGhpcy5yZXN1bHRzID0gW107DQoJCQl0aGlzLnBhcmFtZXRlcnMgPSBb
XTsNCgkJCWlmIChtLmxlbmd0aCA9PT0gNykNCgkJCXsNCgkJCQlwYXJhbXNNb2RlbCA9IG1bNl07
DQoJCQkJdGhpcy5yZXN1bHRzLmxlbmd0aCA9IHBhcmFtc01vZGVsLmxlbmd0aCArIDE7DQoJCQl9
DQoJCQllbHNlDQoJCQkJdGhpcy5yZXN1bHRzLmxlbmd0aCA9IDE7CS8vIHRvIGZpdCAncmV0Jw0K
CQkJYnJlYWs7DQoJCWNhc2UgMjM6CQkvLyBldmVudHZhcl9leHANCgkJCXRoaXMudmFybmFtZSA9
IG1bMV07DQoJCQl0aGlzLmV2ZW50dmFyID0gbnVsbDsJLy8gYXNzaWduZWQgaW4gcG9zdEluaXQN
CgkJCWJyZWFrOw0KCQl9DQoJCXRoaXMub3duZXIubWF5YmVWYXJ5Rm9yVHlwZSh0aGlzLm9iamVj
dF90eXBlKTsNCgkJaWYgKHRoaXMudHlwZSA+PSA0ICYmIHRoaXMudHlwZSA8PSAxNykNCgkJew0K
CQkJdGhpcy5maXJzdCA9IG5ldyBjci5leHBOb2RlKG93bmVyXywgbVsxXSk7DQoJCQl0aGlzLnNl
Y29uZCA9IG5ldyBjci5leHBOb2RlKG93bmVyXywgbVsyXSk7DQoJCX0NCgkJaWYgKHBhcmFtc01v
ZGVsKQ0KCQl7DQoJCQl2YXIgaSwgbGVuOw0KCQkJZm9yIChpID0gMCwgbGVuID0gcGFyYW1zTW9k
ZWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJdGhpcy5wYXJhbWV0ZXJzLnB1c2gobmV3IGNy
LmV4cE5vZGUob3duZXJfLCBwYXJhbXNNb2RlbFtpXSkpOw0KCQl9DQoJCWNyLnNlYWwodGhpcyk7
DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5wb3N0SW5pdCA9IGZ1bmN0aW9uICgpDQoJew0KCQlp
ZiAodGhpcy50eXBlID09PSAyMykJLy8gZXZlbnR2YXJfZXhwDQoJCXsNCgkJCXRoaXMuZXZlbnR2
YXIgPSB0aGlzLm93bmVyLnJ1bnRpbWUuZ2V0RXZlbnRWYXJpYWJsZUJ5TmFtZSh0aGlzLnZhcm5h
bWUsIHRoaXMub3duZXIuYmxvY2sucGFyZW50KTsNCjsNCgkJfQ0KCQlpZiAodGhpcy5maXJzdCkN
CgkJCXRoaXMuZmlyc3QucG9zdEluaXQoKTsNCgkJaWYgKHRoaXMuc2Vjb25kKQ0KCQkJdGhpcy5z
ZWNvbmQucG9zdEluaXQoKTsNCgkJaWYgKHRoaXMudGhpcmQpDQoJCQl0aGlzLnRoaXJkLnBvc3RJ
bml0KCk7DQoJCWlmICh0aGlzLmluc3RhbmNlX2V4cHIpDQoJCQl0aGlzLmluc3RhbmNlX2V4cHIu
cG9zdEluaXQoKTsNCgkJaWYgKHRoaXMucGFyYW1ldGVycykNCgkJew0KCQkJdmFyIGksIGxlbjsN
CgkJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7IGkgPCBsZW47IGkr
KykNCgkJCQl0aGlzLnBhcmFtZXRlcnNbaV0ucG9zdEluaXQoKTsNCgkJfQ0KCX07DQoJdmFyIHRl
bXBWYWx1ZXMgPSBbXTsNCgl2YXIgdGVtcFZhbHVlc1B0ciA9IC0xOw0KCWZ1bmN0aW9uIHB1c2hU
ZW1wVmFsdWUoKQ0KCXsNCgkJKyt0ZW1wVmFsdWVzUHRyOw0KCQlpZiAodGVtcFZhbHVlcy5sZW5n
dGggPT09IHRlbXBWYWx1ZXNQdHIpDQoJCQl0ZW1wVmFsdWVzLnB1c2gobmV3IGNyLmV4cHZhbHVl
KCkpOw0KCQlyZXR1cm4gdGVtcFZhbHVlc1t0ZW1wVmFsdWVzUHRyXTsNCgl9Ow0KCWZ1bmN0aW9u
IHBvcFRlbXBWYWx1ZSgpDQoJew0KCQktLXRlbXBWYWx1ZXNQdHI7DQoJfTsNCglmdW5jdGlvbiBl
dmFsX3BhcmFtcyhwYXJhbWV0ZXJzLCByZXN1bHRzLCB0ZW1wKQ0KCXsNCgkJdmFyIGksIGxlbjsN
CgkJZm9yIChpID0gMCwgbGVuID0gcGFyYW1ldGVycy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJ
ew0KCQkJcGFyYW1ldGVyc1tpXS5nZXQodGVtcCk7DQoJCQlyZXN1bHRzW2kgKyAxXSA9IHRlbXAu
ZGF0YTsgICAvLyBwYXNzaW5nIGFjdHVhbCBqYXZhc2NyaXB0IHZhbHVlIGFzIGFyZ3VtZW50IGlu
c3RlYWQgb2YgZXhwdmFsdWUNCgkJfQ0KCX0NCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX3N5c3Rl
bV9leHAgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFt
ZXRlcnM7DQoJCXZhciByZXN1bHRzID0gdGhpcy5yZXN1bHRzOw0KCQlyZXN1bHRzWzBdID0gcmV0
Ow0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsNCgkJZXZhbF9wYXJhbXMocGFyYW1ldGVy
cywgcmVzdWx0cywgdGVtcCk7DQoJCXBvcFRlbXBWYWx1ZSgpOw0KCQl0aGlzLmZ1bmMuYXBwbHko
dGhpcy5ydW50aW1lLnN5c3RlbSwgcmVzdWx0cyk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5l
dmFsX29iamVjdF9leHAgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJdmFyIG9iamVjdF90eXBlID0g
dGhpcy5vYmplY3RfdHlwZTsNCgkJdmFyIHJlc3VsdHMgPSB0aGlzLnJlc3VsdHM7DQoJCXZhciBw
YXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzOw0KCQl2YXIgaW5zdGFuY2VfZXhwciA9IHRoaXMu
aW5zdGFuY2VfZXhwcjsNCgkJdmFyIGZ1bmMgPSB0aGlzLmZ1bmM7DQoJCXZhciBpbmRleCA9IHRo
aXMub3duZXIuc29saW5kZXg7CQkJLy8gZGVmYXVsdCB0byBwYXJhbWV0ZXIncyBpbnRlbmRlZCBT
T0wgaW5kZXgNCgkJdmFyIHNvbCA9IG9iamVjdF90eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJdmFy
IGluc3RhbmNlcyA9IHNvbC5nZXRPYmplY3RzKCk7DQoJCWlmICghaW5zdGFuY2VzLmxlbmd0aCkN
CgkJew0KCQkJaWYgKHNvbC5lbHNlX2luc3RhbmNlcy5sZW5ndGgpDQoJCQkJaW5zdGFuY2VzID0g
c29sLmVsc2VfaW5zdGFuY2VzOw0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICh0aGlzLnJldHVybl9z
dHJpbmcpDQoJCQkJCXJldC5zZXRfc3RyaW5nKCIiKTsNCgkJCQllbHNlDQoJCQkJCXJldC5zZXRf
aW50KDApOw0KCQkJCXJldHVybjsNCgkJCX0NCgkJfQ0KCQlyZXN1bHRzWzBdID0gcmV0Ow0KCQly
ZXQub2JqZWN0X2NsYXNzID0gb2JqZWN0X3R5cGU7CQkvLyBzbyBleHByZXNzaW9uIGNhbiBhY2Nl
c3MgZmFtaWx5IHR5cGUgaWYgbmVlZCBiZQ0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsN
CgkJZXZhbF9wYXJhbXMocGFyYW1ldGVycywgcmVzdWx0cywgdGVtcCk7DQoJCWlmIChpbnN0YW5j
ZV9leHByKSB7DQoJCQlpbnN0YW5jZV9leHByLmdldCh0ZW1wKTsNCgkJCWlmICh0ZW1wLmlzX251
bWJlcigpKSB7DQoJCQkJaW5kZXggPSB0ZW1wLmRhdGE7DQoJCQkJaW5zdGFuY2VzID0gb2JqZWN0
X3R5cGUuaW5zdGFuY2VzOyAgICAvLyBwaWNrIGZyb20gYWxsIGluc3RhbmNlcywgbm90IFNPTA0K
CQkJfQ0KCQl9DQoJCXBvcFRlbXBWYWx1ZSgpOw0KCQl2YXIgbGVuID0gaW5zdGFuY2VzLmxlbmd0
aDsNCgkJaWYgKGluZGV4ID49IGxlbiB8fCBpbmRleCA8PSAtbGVuKQ0KCQkJaW5kZXggJT0gbGVu
OyAgICAgIC8vIHdyYXBhcm91bmQNCgkJaWYgKGluZGV4IDwgMCkNCgkJCWluZGV4ICs9IGxlbjsN
CgkJdmFyIHJldHVybmVkX3ZhbCA9IGZ1bmMuYXBwbHkoaW5zdGFuY2VzW2luZGV4XSwgcmVzdWx0
cyk7DQo7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2JlaGF2aW9yX2V4cCA9IGZ1bmN0
aW9uIChyZXQpDQoJew0KCQl2YXIgb2JqZWN0X3R5cGUgPSB0aGlzLm9iamVjdF90eXBlOw0KCQl2
YXIgcmVzdWx0cyA9IHRoaXMucmVzdWx0czsNCgkJdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFt
ZXRlcnM7DQoJCXZhciBpbnN0YW5jZV9leHByID0gdGhpcy5pbnN0YW5jZV9leHByOw0KCQl2YXIg
YmVoX2luZGV4ID0gdGhpcy5iZWhfaW5kZXg7DQoJCXZhciBmdW5jID0gdGhpcy5mdW5jOw0KCQl2
YXIgaW5kZXggPSB0aGlzLm93bmVyLnNvbGluZGV4OwkJCS8vIGRlZmF1bHQgdG8gcGFyYW1ldGVy
J3MgaW50ZW5kZWQgU09MIGluZGV4DQoJCXZhciBzb2wgPSBvYmplY3RfdHlwZS5nZXRDdXJyZW50
U29sKCk7DQoJCXZhciBpbnN0YW5jZXMgPSBzb2wuZ2V0T2JqZWN0cygpOw0KCQlpZiAoIWluc3Rh
bmNlcy5sZW5ndGgpDQoJCXsNCgkJCWlmIChzb2wuZWxzZV9pbnN0YW5jZXMubGVuZ3RoKQ0KCQkJ
CWluc3RhbmNlcyA9IHNvbC5lbHNlX2luc3RhbmNlczsNCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAo
dGhpcy5yZXR1cm5fc3RyaW5nKQ0KCQkJCQlyZXQuc2V0X3N0cmluZygiIik7DQoJCQkJZWxzZQ0K
CQkJCQlyZXQuc2V0X2ludCgwKTsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCX0NCgkJcmVzdWx0c1sw
XSA9IHJldDsNCgkJcmV0Lm9iamVjdF9jbGFzcyA9IG9iamVjdF90eXBlOwkJLy8gc28gZXhwcmVz
c2lvbiBjYW4gYWNjZXNzIGZhbWlseSB0eXBlIGlmIG5lZWQgYmUNCgkJdmFyIHRlbXAgPSBwdXNo
VGVtcFZhbHVlKCk7DQoJCWV2YWxfcGFyYW1zKHBhcmFtZXRlcnMsIHJlc3VsdHMsIHRlbXApOw0K
CQlpZiAoaW5zdGFuY2VfZXhwcikgew0KCQkJaW5zdGFuY2VfZXhwci5nZXQodGVtcCk7DQoJCQlp
ZiAodGVtcC5pc19udW1iZXIoKSkgew0KCQkJCWluZGV4ID0gdGVtcC5kYXRhOw0KCQkJCWluc3Rh
bmNlcyA9IG9iamVjdF90eXBlLmluc3RhbmNlczsgICAgLy8gcGljayBmcm9tIGFsbCBpbnN0YW5j
ZXMsIG5vdCBTT0wNCgkJCX0NCgkJfQ0KCQlwb3BUZW1wVmFsdWUoKTsNCgkJdmFyIGxlbiA9IGlu
c3RhbmNlcy5sZW5ndGg7DQoJCWlmIChpbmRleCA+PSBsZW4gfHwgaW5kZXggPD0gLWxlbikNCgkJ
CWluZGV4ICU9IGxlbjsgICAgICAvLyB3cmFwYXJvdW5kDQoJCWlmIChpbmRleCA8IDApDQoJCQlp
bmRleCArPSBsZW47DQoJCXZhciBpbnN0ID0gaW5zdGFuY2VzW2luZGV4XTsNCgkJdmFyIG9mZnNl
dCA9IDA7DQoJCWlmIChvYmplY3RfdHlwZS5pc19mYW1pbHkpDQoJCXsNCgkJCW9mZnNldCA9IGlu
c3QudHlwZS5mYW1pbHlfYmVoX21hcFtvYmplY3RfdHlwZS5mYW1pbHlfaW5kZXhdOw0KCQl9DQoJ
CXZhciByZXR1cm5lZF92YWwgPSBmdW5jLmFwcGx5KGluc3QuYmVoYXZpb3JfaW5zdHNbYmVoX2lu
ZGV4ICsgb2Zmc2V0XSwgcmVzdWx0cyk7DQo7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFs
X2luc3R2YXJfZXhwID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXZhciBpbnN0YW5jZV9leHByID0g
dGhpcy5pbnN0YW5jZV9leHByOw0KCQl2YXIgb2JqZWN0X3R5cGUgPSB0aGlzLm9iamVjdF90eXBl
Ow0KCQl2YXIgdmFyaW5kZXggPSB0aGlzLnZhcmluZGV4Ow0KCQl2YXIgaW5kZXggPSB0aGlzLm93
bmVyLnNvbGluZGV4OwkJLy8gZGVmYXVsdCB0byBwYXJhbWV0ZXIncyBpbnRlbmRlZCBTT0wgaW5k
ZXgNCgkJdmFyIHNvbCA9IG9iamVjdF90eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJdmFyIGluc3Rh
bmNlcyA9IHNvbC5nZXRPYmplY3RzKCk7DQoJCXZhciBpbnN0Ow0KCQlpZiAoIWluc3RhbmNlcy5s
ZW5ndGgpDQoJCXsNCgkJCWlmIChzb2wuZWxzZV9pbnN0YW5jZXMubGVuZ3RoKQ0KCQkJCWluc3Rh
bmNlcyA9IHNvbC5lbHNlX2luc3RhbmNlczsNCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAodGhpcy5y
ZXR1cm5fc3RyaW5nKQ0KCQkJCQlyZXQuc2V0X3N0cmluZygiIik7DQoJCQkJZWxzZQ0KCQkJCQly
ZXQuc2V0X2ludCgwKTsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCX0NCgkJaWYgKGluc3RhbmNlX2V4
cHIpDQoJCXsNCgkJCXZhciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0KCQkJaW5zdGFuY2VfZXhw
ci5nZXQodGVtcCk7DQoJCQlpZiAodGVtcC5pc19udW1iZXIoKSkNCgkJCXsNCgkJCQlpbmRleCA9
IHRlbXAuZGF0YTsNCgkJCQl2YXIgdHlwZV9pbnN0YW5jZXMgPSBvYmplY3RfdHlwZS5pbnN0YW5j
ZXM7DQoJCQkJaWYgKHR5cGVfaW5zdGFuY2VzLmxlbmd0aCAhPT0gMCkJCS8vIGF2b2lkIE5hTiBy
ZXN1bHQgd2l0aCAlDQoJCQkJew0KCQkJCQlpbmRleCAlPSB0eXBlX2luc3RhbmNlcy5sZW5ndGg7
ICAgICAvLyB3cmFwYXJvdW5kDQoJCQkJCWlmIChpbmRleCA8IDApICAgICAgICAgICAgICAgICAg
ICAgIC8vIG9mZnNldA0KCQkJCQkJaW5kZXggKz0gdHlwZV9pbnN0YW5jZXMubGVuZ3RoOw0KCQkJ
CX0NCgkJCQlpbnN0ID0gb2JqZWN0X3R5cGUuZ2V0SW5zdGFuY2VCeUlJRChpbmRleCk7DQoJCQkJ
dmFyIHRvX3JldCA9IGluc3QuaW5zdGFuY2VfdmFyc1t2YXJpbmRleF07DQoJCQkJaWYgKGNyLmlz
X3N0cmluZyh0b19yZXQpKQ0KCQkJCQlyZXQuc2V0X3N0cmluZyh0b19yZXQpOw0KCQkJCWVsc2UN
CgkJCQkJcmV0LnNldF9mbG9hdCh0b19yZXQpOw0KCQkJCXBvcFRlbXBWYWx1ZSgpOw0KCQkJCXJl
dHVybjsgICAgICAgICAvLyBkb25lDQoJCQl9DQoJCQlwb3BUZW1wVmFsdWUoKTsNCgkJfQ0KCQl2
YXIgbGVuID0gaW5zdGFuY2VzLmxlbmd0aDsNCgkJaWYgKGluZGV4ID49IGxlbiB8fCBpbmRleCA8
PSAtbGVuKQ0KCQkJaW5kZXggJT0gbGVuOwkJLy8gd3JhcGFyb3VuZA0KCQlpZiAoaW5kZXggPCAw
KQ0KCQkJaW5kZXggKz0gbGVuOw0KCQlpbnN0ID0gaW5zdGFuY2VzW2luZGV4XTsNCgkJdmFyIG9m
ZnNldCA9IDA7DQoJCWlmIChvYmplY3RfdHlwZS5pc19mYW1pbHkpDQoJCXsNCgkJCW9mZnNldCA9
IGluc3QudHlwZS5mYW1pbHlfdmFyX21hcFtvYmplY3RfdHlwZS5mYW1pbHlfaW5kZXhdOw0KCQl9
DQoJCXZhciB0b19yZXQgPSBpbnN0Lmluc3RhbmNlX3ZhcnNbdmFyaW5kZXggKyBvZmZzZXRdOw0K
CQlpZiAoY3IuaXNfc3RyaW5nKHRvX3JldCkpDQoJCQlyZXQuc2V0X3N0cmluZyh0b19yZXQpOw0K
CQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KHRvX3JldCk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlw
ZS5ldmFsX2ludCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQudHlwZSA9IGNyLmV4cHR5cGUu
SW50ZWdlcjsNCgkJcmV0LmRhdGEgPSB0aGlzLnZhbHVlOw0KCX07DQoJRXhwTm9kZS5wcm90b3R5
cGUuZXZhbF9mbG9hdCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQudHlwZSA9IGNyLmV4cHR5
cGUuRmxvYXQ7DQoJCXJldC5kYXRhID0gdGhpcy52YWx1ZTsNCgl9Ow0KCUV4cE5vZGUucHJvdG90
eXBlLmV2YWxfc3RyaW5nID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC50eXBlID0gY3IuZXhw
dHlwZS5TdHJpbmc7DQoJCXJldC5kYXRhID0gdGhpcy52YWx1ZTsNCgl9Ow0KCUV4cE5vZGUucHJv
dG90eXBlLmV2YWxfdW5hcnltaW51cyA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0aGlzLmZpcnN0
LmdldChyZXQpOyAgICAgICAgICAgICAgICAvLyByZXRyaWV2ZSBvcGVyYW5kDQoJCWlmIChyZXQu
aXNfbnVtYmVyKCkpDQoJCQlyZXQuZGF0YSA9IC1yZXQuZGF0YTsNCgl9Ow0KCUV4cE5vZGUucHJv
dG90eXBlLmV2YWxfYWRkID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXRoaXMuZmlyc3QuZ2V0KHJl
dCk7ICAgICAgICAgICAgICAgIC8vIGxlZnQgb3BlcmFuZA0KCQl2YXIgdGVtcCA9IHB1c2hUZW1w
VmFsdWUoKTsNCgkJdGhpcy5zZWNvbmQuZ2V0KHRlbXApOwkJCS8vIHJpZ2h0IG9wZXJhbmQNCgkJ
aWYgKHJldC5pc19udW1iZXIoKSAmJiB0ZW1wLmlzX251bWJlcigpKQ0KCQl7DQoJCQlyZXQuZGF0
YSArPSB0ZW1wLmRhdGE7ICAgICAgICAgIC8vIGJvdGggb3BlcmFuZHMgbnVtYmVyczogYWRkDQoJ
CQlpZiAodGVtcC5pc19mbG9hdCgpKQ0KCQkJCXJldC5tYWtlX2Zsb2F0KCk7DQoJCX0NCgkJcG9w
VGVtcFZhbHVlKCk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX3N1YnRyYWN0ID0gZnVu
Y3Rpb24gKHJldCkNCgl7DQoJCXRoaXMuZmlyc3QuZ2V0KHJldCk7ICAgICAgICAgICAgICAgIC8v
IGxlZnQgb3BlcmFuZA0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsNCgkJdGhpcy5zZWNv
bmQuZ2V0KHRlbXApOwkJCS8vIHJpZ2h0IG9wZXJhbmQNCgkJaWYgKHJldC5pc19udW1iZXIoKSAm
JiB0ZW1wLmlzX251bWJlcigpKQ0KCQl7DQoJCQlyZXQuZGF0YSAtPSB0ZW1wLmRhdGE7ICAgICAg
ICAgIC8vIGJvdGggb3BlcmFuZHMgbnVtYmVyczogc3VidHJhY3QNCgkJCWlmICh0ZW1wLmlzX2Zs
b2F0KCkpDQoJCQkJcmV0Lm1ha2VfZmxvYXQoKTsNCgkJfQ0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9
Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfbXVsdGlwbHkgPSBmdW5jdGlvbiAocmV0KQ0KCXsN
CgkJdGhpcy5maXJzdC5nZXQocmV0KTsgICAgICAgICAgICAgICAgLy8gbGVmdCBvcGVyYW5kDQoJ
CXZhciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0KCQl0aGlzLnNlY29uZC5nZXQodGVtcCk7CQkJ
Ly8gcmlnaHQgb3BlcmFuZA0KCQlpZiAocmV0LmlzX251bWJlcigpICYmIHRlbXAuaXNfbnVtYmVy
KCkpDQoJCXsNCgkJCXJldC5kYXRhICo9IHRlbXAuZGF0YTsgICAgICAgICAgLy8gYm90aCBvcGVy
YW5kcyBudW1iZXJzOiBtdWx0aXBseQ0KCQkJaWYgKHRlbXAuaXNfZmxvYXQoKSkNCgkJCQlyZXQu
bWFrZV9mbG9hdCgpOw0KCQl9DQoJCXBvcFRlbXBWYWx1ZSgpOw0KCX07DQoJRXhwTm9kZS5wcm90
b3R5cGUuZXZhbF9kaXZpZGUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJdGhpcy5maXJzdC5nZXQo
cmV0KTsgICAgICAgICAgICAgICAgLy8gbGVmdCBvcGVyYW5kDQoJCXZhciB0ZW1wID0gcHVzaFRl
bXBWYWx1ZSgpOw0KCQl0aGlzLnNlY29uZC5nZXQodGVtcCk7CQkJLy8gcmlnaHQgb3BlcmFuZA0K
CQlpZiAocmV0LmlzX251bWJlcigpICYmIHRlbXAuaXNfbnVtYmVyKCkpDQoJCXsNCgkJCXJldC5k
YXRhIC89IHRlbXAuZGF0YTsgICAgICAgICAgLy8gYm90aCBvcGVyYW5kcyBudW1iZXJzOiBkaXZp
ZGUNCgkJCXJldC5tYWtlX2Zsb2F0KCk7DQoJCX0NCgkJcG9wVGVtcFZhbHVlKCk7DQoJfTsNCglF
eHBOb2RlLnByb3RvdHlwZS5ldmFsX21vZCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0aGlzLmZp
cnN0LmdldChyZXQpOyAgICAgICAgICAgICAgICAvLyBsZWZ0IG9wZXJhbmQNCgkJdmFyIHRlbXAg
PSBwdXNoVGVtcFZhbHVlKCk7DQoJCXRoaXMuc2Vjb25kLmdldCh0ZW1wKTsJCQkvLyByaWdodCBv
cGVyYW5kDQoJCWlmIChyZXQuaXNfbnVtYmVyKCkgJiYgdGVtcC5pc19udW1iZXIoKSkNCgkJew0K
CQkJcmV0LmRhdGEgJT0gdGVtcC5kYXRhOyAgICAgICAgICAvLyBib3RoIG9wZXJhbmRzIG51bWJl
cnM6IG1vZHVsbw0KCQkJaWYgKHRlbXAuaXNfZmxvYXQoKSkNCgkJCQlyZXQubWFrZV9mbG9hdCgp
Ow0KCQl9DQoJCXBvcFRlbXBWYWx1ZSgpOw0KCX07DQoJRXhwTm9kZS5wcm90b3R5cGUuZXZhbF9w
b3dlciA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0aGlzLmZpcnN0LmdldChyZXQpOyAgICAgICAg
ICAgICAgICAvLyBsZWZ0IG9wZXJhbmQNCgkJdmFyIHRlbXAgPSBwdXNoVGVtcFZhbHVlKCk7DQoJ
CXRoaXMuc2Vjb25kLmdldCh0ZW1wKTsJCQkvLyByaWdodCBvcGVyYW5kDQoJCWlmIChyZXQuaXNf
bnVtYmVyKCkgJiYgdGVtcC5pc19udW1iZXIoKSkNCgkJew0KCQkJcmV0LmRhdGEgPSBNYXRoLnBv
dyhyZXQuZGF0YSwgdGVtcC5kYXRhKTsgICAvLyBib3RoIG9wZXJhbmRzIG51bWJlcnM6IHJhaXNl
IHRvIHBvd2VyDQoJCQlpZiAodGVtcC5pc19mbG9hdCgpKQ0KCQkJCXJldC5tYWtlX2Zsb2F0KCk7
DQoJCX0NCgkJcG9wVGVtcFZhbHVlKCk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2Fu
ZCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0aGlzLmZpcnN0LmdldChyZXQpOwkJCS8vIGxlZnQg
b3BlcmFuZA0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsNCgkJdGhpcy5zZWNvbmQuZ2V0
KHRlbXApOwkJCS8vIHJpZ2h0IG9wZXJhbmQNCgkJaWYgKHRlbXAuaXNfc3RyaW5nKCkgfHwgcmV0
LmlzX3N0cmluZygpKQ0KCQkJdGhpcy5ldmFsX2FuZF9zdHJpbmdjb25jYXQocmV0LCB0ZW1wKTsN
CgkJZWxzZQ0KCQkJdGhpcy5ldmFsX2FuZF9sb2dpY2FsKHJldCwgdGVtcCk7DQoJCXBvcFRlbXBW
YWx1ZSgpOw0KCX07DQoJRXhwTm9kZS5wcm90b3R5cGUuZXZhbF9hbmRfc3RyaW5nY29uY2F0ID0g
ZnVuY3Rpb24gKHJldCwgdGVtcCkNCgl7DQoJCWlmIChyZXQuaXNfc3RyaW5nKCkgJiYgdGVtcC5p
c19zdHJpbmcoKSkNCgkJCXRoaXMuZXZhbF9hbmRfc3RyaW5nY29uY2F0X3N0cl9zdHIocmV0LCB0
ZW1wKTsNCgkJZWxzZQ0KCQkJdGhpcy5ldmFsX2FuZF9zdHJpbmdjb25jYXRfbnVtKHJldCwgdGVt
cCk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2FuZF9zdHJpbmdjb25jYXRfc3RyX3N0
ciA9IGZ1bmN0aW9uIChyZXQsIHRlbXApDQoJew0KCQlyZXQuZGF0YSArPSB0ZW1wLmRhdGE7DQoJ
fTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2FuZF9zdHJpbmdjb25jYXRfbnVtID0gZnVuY3Rp
b24gKHJldCwgdGVtcCkNCgl7DQoJCWlmIChyZXQuaXNfc3RyaW5nKCkpDQoJCXsNCgkJCXJldC5k
YXRhICs9IChNYXRoLnJvdW5kKHRlbXAuZGF0YSAqIDFlMTApIC8gMWUxMCkudG9TdHJpbmcoKTsN
CgkJfQ0KCQllbHNlDQoJCXsNCgkJCXJldC5zZXRfc3RyaW5nKHJldC5kYXRhLnRvU3RyaW5nKCkg
KyB0ZW1wLmRhdGEpOw0KCQl9DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2FuZF9sb2dp
Y2FsID0gZnVuY3Rpb24gKHJldCwgdGVtcCkNCgl7DQoJCXJldC5zZXRfaW50KHJldC5kYXRhICYm
IHRlbXAuZGF0YSA/IDEgOiAwKTsNCgl9Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfb3IgPSBm
dW5jdGlvbiAocmV0KQ0KCXsNCgkJdGhpcy5maXJzdC5nZXQocmV0KTsgICAgICAgICAgICAgICAg
Ly8gbGVmdCBvcGVyYW5kDQoJCXZhciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0KCQl0aGlzLnNl
Y29uZC5nZXQodGVtcCk7CQkJLy8gcmlnaHQgb3BlcmFuZA0KCQlpZiAocmV0LmlzX251bWJlcigp
ICYmIHRlbXAuaXNfbnVtYmVyKCkpDQoJCXsNCgkJCWlmIChyZXQuZGF0YSB8fCB0ZW1wLmRhdGEp
DQoJCQkJcmV0LnNldF9pbnQoMSk7DQoJCQllbHNlDQoJCQkJcmV0LnNldF9pbnQoMCk7DQoJCX0N
CgkJcG9wVGVtcFZhbHVlKCk7DQoJfTsNCglFeHBOb2RlLnByb3RvdHlwZS5ldmFsX2NvbmRpdGlv
bmFsID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXRoaXMuZmlyc3QuZ2V0KHJldCk7ICAgICAgICAg
ICAgICAgIC8vIGNvbmRpdGlvbiBvcGVyYW5kDQoJCWlmIChyZXQuZGF0YSkgICAgICAgICAgICAg
ICAgICAgICAgIC8vIGlzIHRydWUNCgkJCXRoaXMuc2Vjb25kLmdldChyZXQpOyAgICAgICAgICAg
Ly8gZXZhbHVhdGUgc2Vjb25kIG9wZXJhbmQgdG8gcmV0DQoJCWVsc2UNCgkJCXRoaXMudGhpcmQu
Z2V0KHJldCk7ICAgICAgICAgICAgLy8gZXZhbHVhdGUgdGhpcmQgb3BlcmFuZCB0byByZXQNCgl9
Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfZXF1YWwgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJ
dGhpcy5maXJzdC5nZXQocmV0KTsgICAgICAgICAgICAgICAgLy8gbGVmdCBvcGVyYW5kDQoJCXZh
ciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0KCQl0aGlzLnNlY29uZC5nZXQodGVtcCk7CQkJLy8g
cmlnaHQgb3BlcmFuZA0KCQlyZXQuc2V0X2ludChyZXQuZGF0YSA9PT0gdGVtcC5kYXRhID8gMSA6
IDApOw0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfbm90
ZXF1YWwgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJdGhpcy5maXJzdC5nZXQocmV0KTsgICAgICAg
ICAgICAgICAgLy8gbGVmdCBvcGVyYW5kDQoJCXZhciB0ZW1wID0gcHVzaFRlbXBWYWx1ZSgpOw0K
CQl0aGlzLnNlY29uZC5nZXQodGVtcCk7CQkJLy8gcmlnaHQgb3BlcmFuZA0KCQlyZXQuc2V0X2lu
dChyZXQuZGF0YSAhPT0gdGVtcC5kYXRhID8gMSA6IDApOw0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9
Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfbGVzcyA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0
aGlzLmZpcnN0LmdldChyZXQpOyAgICAgICAgICAgICAgICAvLyBsZWZ0IG9wZXJhbmQNCgkJdmFy
IHRlbXAgPSBwdXNoVGVtcFZhbHVlKCk7DQoJCXRoaXMuc2Vjb25kLmdldCh0ZW1wKTsJCQkvLyBy
aWdodCBvcGVyYW5kDQoJCXJldC5zZXRfaW50KHJldC5kYXRhIDwgdGVtcC5kYXRhID8gMSA6IDAp
Ow0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfbGVzc2Vx
dWFsID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXRoaXMuZmlyc3QuZ2V0KHJldCk7ICAgICAgICAg
ICAgICAgIC8vIGxlZnQgb3BlcmFuZA0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsNCgkJ
dGhpcy5zZWNvbmQuZ2V0KHRlbXApOwkJCS8vIHJpZ2h0IG9wZXJhbmQNCgkJcmV0LnNldF9pbnQo
cmV0LmRhdGEgPD0gdGVtcC5kYXRhID8gMSA6IDApOw0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9Ow0K
CUV4cE5vZGUucHJvdG90eXBlLmV2YWxfZ3JlYXRlciA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl0
aGlzLmZpcnN0LmdldChyZXQpOyAgICAgICAgICAgICAgICAvLyBsZWZ0IG9wZXJhbmQNCgkJdmFy
IHRlbXAgPSBwdXNoVGVtcFZhbHVlKCk7DQoJCXRoaXMuc2Vjb25kLmdldCh0ZW1wKTsJCQkvLyBy
aWdodCBvcGVyYW5kDQoJCXJldC5zZXRfaW50KHJldC5kYXRhID4gdGVtcC5kYXRhID8gMSA6IDAp
Ow0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfZ3JlYXRl
cmVxdWFsID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXRoaXMuZmlyc3QuZ2V0KHJldCk7ICAgICAg
ICAgICAgICAgIC8vIGxlZnQgb3BlcmFuZA0KCQl2YXIgdGVtcCA9IHB1c2hUZW1wVmFsdWUoKTsN
CgkJdGhpcy5zZWNvbmQuZ2V0KHRlbXApOwkJCS8vIHJpZ2h0IG9wZXJhbmQNCgkJcmV0LnNldF9p
bnQocmV0LmRhdGEgPj0gdGVtcC5kYXRhID8gMSA6IDApOw0KCQlwb3BUZW1wVmFsdWUoKTsNCgl9
Ow0KCUV4cE5vZGUucHJvdG90eXBlLmV2YWxfZXZlbnR2YXJfZXhwID0gZnVuY3Rpb24gKHJldCkN
Cgl7DQoJCXZhciB2YWwgPSB0aGlzLmV2ZW50dmFyLmdldFZhbHVlKCk7DQoJCWlmIChjci5pc19u
dW1iZXIodmFsKSkNCgkJCXJldC5zZXRfZmxvYXQodmFsKTsNCgkJZWxzZQ0KCQkJcmV0LnNldF9z
dHJpbmcodmFsKTsNCgl9Ow0KCWNyLmV4cE5vZGUgPSBFeHBOb2RlOw0KCWZ1bmN0aW9uIEV4cFZh
bHVlKHR5cGUsIGRhdGEpDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBlIHx8IGNyLmV4cHR5cGUuSW50
ZWdlcjsNCgkJdGhpcy5kYXRhID0gZGF0YSB8fCAwOw0KCQl0aGlzLm9iamVjdF9jbGFzcyA9IG51
bGw7DQo7DQo7DQo7DQoJCWlmICh0aGlzLnR5cGUgPT0gY3IuZXhwdHlwZS5JbnRlZ2VyKQ0KCQkJ
dGhpcy5kYXRhID0gTWF0aC5mbG9vcih0aGlzLmRhdGEpOw0KCQljci5zZWFsKHRoaXMpOw0KCX07
DQoJRXhwVmFsdWUucHJvdG90eXBlLmlzX2ludCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
dGhpcy50eXBlID09PSBjci5leHB0eXBlLkludGVnZXI7DQoJfTsNCglFeHBWYWx1ZS5wcm90b3R5
cGUuaXNfZmxvYXQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMudHlwZSA9PT0gY3Iu
ZXhwdHlwZS5GbG9hdDsNCgl9Ow0KCUV4cFZhbHVlLnByb3RvdHlwZS5pc19udW1iZXIgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMudHlwZSA9PT0gY3IuZXhwdHlwZS5JbnRlZ2VyIHx8
IHRoaXMudHlwZSA9PT0gY3IuZXhwdHlwZS5GbG9hdDsNCgl9Ow0KCUV4cFZhbHVlLnByb3RvdHlw
ZS5pc19zdHJpbmcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMudHlwZSA9PT0gY3Iu
ZXhwdHlwZS5TdHJpbmc7DQoJfTsNCglFeHBWYWx1ZS5wcm90b3R5cGUubWFrZV9pbnQgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJaWYgKCF0aGlzLmlzX2ludCgpKQ0KCQl7DQoJCQlpZiAodGhpcy5pc19m
bG9hdCgpKQ0KCQkJCXRoaXMuZGF0YSA9IE1hdGguZmxvb3IodGhpcy5kYXRhKTsgICAgICAvLyB0
cnVuY2F0ZSBmbG9hdA0KCQkJZWxzZSBpZiAodGhpcy5pc19zdHJpbmcoKSkNCgkJCQl0aGlzLmRh
dGEgPSBwYXJzZUludCh0aGlzLmRhdGEsIDEwKTsNCgkJCXRoaXMudHlwZSA9IGNyLmV4cHR5cGUu
SW50ZWdlcjsNCgkJfQ0KCX07DQoJRXhwVmFsdWUucHJvdG90eXBlLm1ha2VfZmxvYXQgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJaWYgKCF0aGlzLmlzX2Zsb2F0KCkpDQoJCXsNCgkJCWlmICh0aGlzLmlz
X3N0cmluZygpKQ0KCQkJCXRoaXMuZGF0YSA9IHBhcnNlRmxvYXQodGhpcy5kYXRhKTsNCgkJCXRo
aXMudHlwZSA9IGNyLmV4cHR5cGUuRmxvYXQ7DQoJCX0NCgl9Ow0KCUV4cFZhbHVlLnByb3RvdHlw
ZS5tYWtlX3N0cmluZyA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAoIXRoaXMuaXNfc3RyaW5nKCkp
DQoJCXsNCgkJCXRoaXMuZGF0YSA9IHRoaXMuZGF0YS50b1N0cmluZygpOw0KCQkJdGhpcy50eXBl
ID0gY3IuZXhwdHlwZS5TdHJpbmc7DQoJCX0NCgl9Ow0KCUV4cFZhbHVlLnByb3RvdHlwZS5zZXRf
aW50ID0gZnVuY3Rpb24gKHZhbCkNCgl7DQo7DQoJCXRoaXMudHlwZSA9IGNyLmV4cHR5cGUuSW50
ZWdlcjsNCgkJdGhpcy5kYXRhID0gTWF0aC5mbG9vcih2YWwpOw0KCX07DQoJRXhwVmFsdWUucHJv
dG90eXBlLnNldF9mbG9hdCA9IGZ1bmN0aW9uICh2YWwpDQoJew0KOw0KCQl0aGlzLnR5cGUgPSBj
ci5leHB0eXBlLkZsb2F0Ow0KCQl0aGlzLmRhdGEgPSB2YWw7DQoJfTsNCglFeHBWYWx1ZS5wcm90
b3R5cGUuc2V0X3N0cmluZyA9IGZ1bmN0aW9uICh2YWwpDQoJew0KOw0KCQl0aGlzLnR5cGUgPSBj
ci5leHB0eXBlLlN0cmluZzsNCgkJdGhpcy5kYXRhID0gdmFsOw0KCX07DQoJRXhwVmFsdWUucHJv
dG90eXBlLnNldF9hbnkgPSBmdW5jdGlvbiAodmFsKQ0KCXsNCgkJaWYgKGNyLmlzX251bWJlcih2
YWwpKQ0KCQl7DQoJCQl0aGlzLnR5cGUgPSBjci5leHB0eXBlLkZsb2F0Ow0KCQkJdGhpcy5kYXRh
ID0gdmFsOw0KCQl9DQoJCWVsc2UgaWYgKGNyLmlzX3N0cmluZyh2YWwpKQ0KCQl7DQoJCQl0aGlz
LnR5cGUgPSBjci5leHB0eXBlLlN0cmluZzsNCgkJCXRoaXMuZGF0YSA9IHZhbC50b1N0cmluZygp
Ow0KCQl9DQoJCWVsc2UNCgkJew0KCQkJdGhpcy50eXBlID0gY3IuZXhwdHlwZS5JbnRlZ2VyOw0K
CQkJdGhpcy5kYXRhID0gMDsNCgkJfQ0KCX07DQoJY3IuZXhwdmFsdWUgPSBFeHBWYWx1ZTsNCglj
ci5leHB0eXBlID0gew0KCQlJbnRlZ2VyOiAwLCAgICAgLy8gZW11bGF0ZWQ7IG5vIG5hdGl2ZSBp
bnRlZ2VyIHN1cHBvcnQgaW4gamF2YXNjcmlwdA0KCQlGbG9hdDogMSwNCgkJU3RyaW5nOiAyDQoJ
fTsNCn0oKSk7DQo7DQpjci5zeXN0ZW1fb2JqZWN0ID0gZnVuY3Rpb24gKHJ1bnRpbWUpDQp7DQog
ICAgdGhpcy5ydW50aW1lID0gcnVudGltZTsNCgl0aGlzLndhaXRzID0gW107DQp9Ow0KY3Iuc3lz
dGVtX29iamVjdC5wcm90b3R5cGUuc2F2ZVRvSlNPTiA9IGZ1bmN0aW9uICgpDQp7DQoJdmFyIG8g
PSB7fTsNCgl2YXIgaSwgbGVuLCBqLCBsZW5qLCBwLCB3LCB0LCBzb2JqOw0KCW9bIndhaXRzIl0g
PSBbXTsNCgl2YXIgb3dhaXRzID0gb1sid2FpdHMiXTsNCgl2YXIgd2FpdG9iajsNCglmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLndhaXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCXsNCgkJdyA9IHRo
aXMud2FpdHNbaV07DQoJCXdhaXRvYmogPSB7DQoJCQkidCI6IHcudGltZSwNCgkJCSJzdCI6IHcu
c2lnbmFsdGFnLA0KCQkJInMiOiB3LnNpZ25hbGxlZCwNCgkJCSJldiI6IHcuZXYuc2lkLA0KCQkJ
InNtIjogW10sDQoJCQkic29scyI6IHt9DQoJCX07DQoJCWlmICh3LmV2LmFjdGlvbnNbdy5hY3Rp
bmRleF0pDQoJCQl3YWl0b2JqWyJhY3QiXSA9IHcuZXYuYWN0aW9uc1t3LmFjdGluZGV4XS5zaWQ7
DQoJCWZvciAoaiA9IDAsIGxlbmogPSB3LnNvbE1vZGlmaWVycy5sZW5ndGg7IGogPCBsZW5qOyBq
KyspDQoJCQl3YWl0b2JqWyJzbSJdLnB1c2gody5zb2xNb2RpZmllcnNbal0uc2lkKTsNCgkJZm9y
IChwIGluIHcuc29scykNCgkJew0KCQkJaWYgKHcuc29scy5oYXNPd25Qcm9wZXJ0eShwKSkNCgkJ
CXsNCgkJCQl0ID0gdGhpcy5ydW50aW1lLnR5cGVzX2J5X2luZGV4W3BhcnNlSW50KHAsIDEwKV07
DQo7DQoJCQkJc29iaiA9IHsNCgkJCQkJInNhIjogdy5zb2xzW3BdLnNhLA0KCQkJCQkiaW5zdHMi
OiBbXQ0KCQkJCX07DQoJCQkJZm9yIChqID0gMCwgbGVuaiA9IHcuc29sc1twXS5pbnN0cy5sZW5n
dGg7IGogPCBsZW5qOyBqKyspDQoJCQkJCXNvYmpbImluc3RzIl0ucHVzaCh3LnNvbHNbcF0uaW5z
dHNbal0udWlkKTsNCgkJCQl3YWl0b2JqWyJzb2xzIl1bdC5zaWQudG9TdHJpbmcoKV0gPSBzb2Jq
Ow0KCQkJfQ0KCQl9DQoJCW93YWl0cy5wdXNoKHdhaXRvYmopOw0KCX0NCglyZXR1cm4gbzsNCn07
DQpjci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5sb2FkRnJvbUpTT04gPSBmdW5jdGlvbiAobykN
CnsNCgl2YXIgb3dhaXRzID0gb1sid2FpdHMiXTsNCgl2YXIgaSwgbGVuLCBqLCBsZW5qLCBwLCB3
LCBhZGRXYWl0LCBlLCBhaW5kZXgsIHQsIHNhdmVkc29sLCBudXNvbCwgaW5zdDsNCgljci5jbGVh
ckFycmF5KHRoaXMud2FpdHMpOw0KCWZvciAoaSA9IDAsIGxlbiA9IG93YWl0cy5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgl7DQoJCXcgPSBvd2FpdHNbaV07DQoJCWUgPSB0aGlzLnJ1bnRpbWUuYmxv
Y2tzQnlTaWRbd1siZXYiXS50b1N0cmluZygpXTsNCgkJaWYgKCFlKQ0KCQkJY29udGludWU7CS8v
IGV2ZW50IG11c3QndmUgZ29uZSBtaXNzaW5nDQoJCWFpbmRleCA9IC0xOw0KCQlmb3IgKGogPSAw
LCBsZW5qID0gZS5hY3Rpb25zLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJew0KCQkJaWYgKGUu
YWN0aW9uc1tqXS5zaWQgPT09IHdbImFjdCJdKQ0KCQkJew0KCQkJCWFpbmRleCA9IGo7DQoJCQkJ
YnJlYWs7DQoJCQl9DQoJCX0NCgkJaWYgKGFpbmRleCA9PT0gLTEpDQoJCQljb250aW51ZTsJLy8g
YWN0aW9uIG11c3QndmUgZ29uZSBtaXNzaW5nDQoJCWFkZFdhaXQgPSB7fTsNCgkJYWRkV2FpdC5z
b2xzID0ge307DQoJCWFkZFdhaXQuc29sTW9kaWZpZXJzID0gW107DQoJCWFkZFdhaXQuZGVsZXRl
bWUgPSBmYWxzZTsNCgkJYWRkV2FpdC50aW1lID0gd1sidCJdOw0KCQlhZGRXYWl0LnNpZ25hbHRh
ZyA9IHdbInN0Il0gfHwgIiI7DQoJCWFkZFdhaXQuc2lnbmFsbGVkID0gISF3WyJzIl07DQoJCWFk
ZFdhaXQuZXYgPSBlOw0KCQlhZGRXYWl0LmFjdGluZGV4ID0gYWluZGV4Ow0KCQlmb3IgKGogPSAw
LCBsZW5qID0gd1sic20iXS5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCXsNCgkJCXQgPSB0aGlz
LnJ1bnRpbWUuZ2V0T2JqZWN0VHlwZUJ5U2lkKHdbInNtIl1bal0pOw0KCQkJaWYgKHQpDQoJCQkJ
YWRkV2FpdC5zb2xNb2RpZmllcnMucHVzaCh0KTsNCgkJfQ0KCQlmb3IgKHAgaW4gd1sic29scyJd
KQ0KCQl7DQoJCQlpZiAod1sic29scyJdLmhhc093blByb3BlcnR5KHApKQ0KCQkJew0KCQkJCXQg
PSB0aGlzLnJ1bnRpbWUuZ2V0T2JqZWN0VHlwZUJ5U2lkKHBhcnNlSW50KHAsIDEwKSk7DQoJCQkJ
aWYgKCF0KQ0KCQkJCQljb250aW51ZTsJCS8vIHR5cGUgbXVzdCd2ZSBiZWVuIGRlbGV0ZWQNCgkJ
CQlzYXZlZHNvbCA9IHdbInNvbHMiXVtwXTsNCgkJCQludXNvbCA9IHsNCgkJCQkJc2E6IHNhdmVk
c29sWyJzYSJdLA0KCQkJCQlpbnN0czogW10NCgkJCQl9Ow0KCQkJCWZvciAoaiA9IDAsIGxlbmog
PSBzYXZlZHNvbFsiaW5zdHMiXS5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQkJew0KCQkJCQlp
bnN0ID0gdGhpcy5ydW50aW1lLmdldE9iamVjdEJ5VUlEKHNhdmVkc29sWyJpbnN0cyJdW2pdKTsN
CgkJCQkJaWYgKGluc3QpDQoJCQkJCQludXNvbC5pbnN0cy5wdXNoKGluc3QpOw0KCQkJCX0NCgkJ
CQlhZGRXYWl0LnNvbHNbdC5pbmRleC50b1N0cmluZygpXSA9IG51c29sOw0KCQkJfQ0KCQl9DQoJ
CXRoaXMud2FpdHMucHVzaChhZGRXYWl0KTsNCgl9DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFy
IHN5c1Byb3RvID0gY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGU7DQoJZnVuY3Rpb24gU3lzQ25k
cygpIHt9Ow0KICAgIFN5c0NuZHMucHJvdG90eXBlLkV2ZXJ5VGljayA9IGZ1bmN0aW9uKCkNCiAg
ICB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH07DQogICAgU3lzQ25kcy5wcm90b3R5cGUu
T25MYXlvdXRTdGFydCA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0cnVlOw0K
ICAgIH07DQogICAgU3lzQ25kcy5wcm90b3R5cGUuT25MYXlvdXRFbmQgPSBmdW5jdGlvbigpDQog
ICAgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KICAgIFN5c0NuZHMucHJvdG90eXBl
LkNvbXBhcmUgPSBmdW5jdGlvbih4LCBjbXAsIHkpDQogICAgew0KICAgICAgICByZXR1cm4gY3Iu
ZG9fY21wKHgsIGNtcCwgeSk7DQogICAgfTsNCiAgICBTeXNDbmRzLnByb3RvdHlwZS5Db21wYXJl
VGltZSA9IGZ1bmN0aW9uIChjbXAsIHQpDQogICAgew0KICAgICAgICB2YXIgZWxhcHNlZCA9IHRo
aXMucnVudGltZS5rYWhhblRpbWUuc3VtOw0KICAgICAgICBpZiAoY21wID09PSAwKQ0KICAgICAg
ICB7DQogICAgICAgICAgICB2YXIgY25kID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRDb25kaXRp
b24oKTsNCiAgICAgICAgICAgIGlmICghY25kLmV4dHJhWyJDb21wYXJlVGltZV9leGVjdXRlZCJd
KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChlbGFwc2VkID49IHQpDQogICAg
ICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjbmQuZXh0cmFbIkNvbXBhcmVUaW1l
X2V4ZWN1dGVkIl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7
DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGNyLmRvX2NtcChlbGFwc2VkLCBjbXAsIHQpOw0K
ICAgIH07DQogICAgU3lzQ25kcy5wcm90b3R5cGUuTGF5ZXJWaXNpYmxlID0gZnVuY3Rpb24gKGxh
eWVyKQ0KICAgIHsNCiAgICAgICAgaWYgKCFsYXllcikNCiAgICAgICAgICAgIHJldHVybiBmYWxz
ZTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIGxheWVyLnZpc2libGU7DQogICAg
fTsNCglTeXNDbmRzLnByb3RvdHlwZS5MYXllckVtcHR5ID0gZnVuY3Rpb24gKGxheWVyKQ0KICAg
IHsNCiAgICAgICAgaWYgKCFsYXllcikNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAg
ICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuICFsYXllci5pbnN0YW5jZXMubGVuZ3RoOw0KICAg
IH07DQoJU3lzQ25kcy5wcm90b3R5cGUuTGF5ZXJDbXBPcGFjaXR5ID0gZnVuY3Rpb24gKGxheWVy
LCBjbXAsIG9wYWNpdHlfKQ0KCXsNCgkJaWYgKCFsYXllcikNCgkJCXJldHVybiBmYWxzZTsNCgkJ
cmV0dXJuIGNyLmRvX2NtcChsYXllci5vcGFjaXR5ICogMTAwLCBjbXAsIG9wYWNpdHlfKTsNCgl9
Ow0KICAgIFN5c0NuZHMucHJvdG90eXBlLlJlcGVhdCA9IGZ1bmN0aW9uIChjb3VudCkNCiAgICB7
DQoJCXZhciBjdXJyZW50X2ZyYW1lID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNr
KCk7DQogICAgICAgIHZhciBjdXJyZW50X2V2ZW50ID0gY3VycmVudF9mcmFtZS5jdXJyZW50X2V2
ZW50Ow0KCQl2YXIgc29sTW9kaWZpZXJBZnRlckNuZHMgPSBjdXJyZW50X2ZyYW1lLmlzTW9kaWZp
ZXJBZnRlckNuZHMoKTsNCiAgICAgICAgdmFyIGN1cnJlbnRfbG9vcCA9IHRoaXMucnVudGltZS5w
dXNoTG9vcFN0YWNrKCk7DQogICAgICAgIHZhciBpOw0KCQlpZiAoc29sTW9kaWZpZXJBZnRlckNu
ZHMpDQoJCXsNCgkJCWZvciAoaSA9IDA7IGkgPCBjb3VudCAmJiAhY3VycmVudF9sb29wLnN0b3Bw
ZWQ7IGkrKykNCgkJCXsNCgkJCQl0aGlzLnJ1bnRpbWUucHVzaENvcHlTb2woY3VycmVudF9ldmVu
dC5zb2xNb2RpZmllcnMpOw0KCQkJCWN1cnJlbnRfbG9vcC5pbmRleCA9IGk7DQoJCQkJY3VycmVu
dF9ldmVudC5yZXRyaWdnZXIoKTsNCgkJCQl0aGlzLnJ1bnRpbWUucG9wU29sKGN1cnJlbnRfZXZl
bnQuc29sTW9kaWZpZXJzKTsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWZvciAoaSA9IDA7
IGkgPCBjb3VudCAmJiAhY3VycmVudF9sb29wLnN0b3BwZWQ7IGkrKykNCgkJCXsNCgkJCQljdXJy
ZW50X2xvb3AuaW5kZXggPSBpOw0KCQkJCWN1cnJlbnRfZXZlbnQucmV0cmlnZ2VyKCk7DQoJCQl9
DQoJCX0NCiAgICAgICAgdGhpcy5ydW50aW1lLnBvcExvb3BTdGFjaygpOw0KCQlyZXR1cm4gZmFs
c2U7DQogICAgfTsNCglTeXNDbmRzLnByb3RvdHlwZS5XaGlsZSA9IGZ1bmN0aW9uIChjb3VudCkN
CiAgICB7DQoJCXZhciBjdXJyZW50X2ZyYW1lID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVu
dFN0YWNrKCk7DQogICAgICAgIHZhciBjdXJyZW50X2V2ZW50ID0gY3VycmVudF9mcmFtZS5jdXJy
ZW50X2V2ZW50Ow0KCQl2YXIgc29sTW9kaWZpZXJBZnRlckNuZHMgPSBjdXJyZW50X2ZyYW1lLmlz
TW9kaWZpZXJBZnRlckNuZHMoKTsNCiAgICAgICAgdmFyIGN1cnJlbnRfbG9vcCA9IHRoaXMucnVu
dGltZS5wdXNoTG9vcFN0YWNrKCk7DQogICAgICAgIHZhciBpOw0KCQlpZiAoc29sTW9kaWZpZXJB
ZnRlckNuZHMpDQoJCXsNCgkJCWZvciAoaSA9IDA7ICFjdXJyZW50X2xvb3Auc3RvcHBlZDsgaSsr
KQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5wdXNoQ29weVNvbChjdXJyZW50X2V2ZW50LnNvbE1v
ZGlmaWVycyk7DQoJCQkJY3VycmVudF9sb29wLmluZGV4ID0gaTsNCgkJCQlpZiAoIWN1cnJlbnRf
ZXZlbnQucmV0cmlnZ2VyKCkpCQkvLyBvbmUgb2YgdGhlIG90aGVyIGNvbmRpdGlvbnMgcmV0dXJu
ZWQgZmFsc2UNCgkJCQkJY3VycmVudF9sb29wLnN0b3BwZWQgPSB0cnVlOwkvLyBicmVhaw0KCQkJ
CXRoaXMucnVudGltZS5wb3BTb2woY3VycmVudF9ldmVudC5zb2xNb2RpZmllcnMpOw0KCQkJfQ0K
CQl9DQoJCWVsc2UNCgkJew0KCQkJZm9yIChpID0gMDsgIWN1cnJlbnRfbG9vcC5zdG9wcGVkOyBp
KyspDQoJCQl7DQoJCQkJY3VycmVudF9sb29wLmluZGV4ID0gaTsNCgkJCQlpZiAoIWN1cnJlbnRf
ZXZlbnQucmV0cmlnZ2VyKCkpDQoJCQkJCWN1cnJlbnRfbG9vcC5zdG9wcGVkID0gdHJ1ZTsNCgkJ
CX0NCgkJfQ0KICAgICAgICB0aGlzLnJ1bnRpbWUucG9wTG9vcFN0YWNrKCk7DQoJCXJldHVybiBm
YWxzZTsNCiAgICB9Ow0KICAgIFN5c0NuZHMucHJvdG90eXBlLkZvciA9IGZ1bmN0aW9uIChuYW1l
LCBzdGFydCwgZW5kKQ0KICAgIHsNCiAgICAgICAgdmFyIGN1cnJlbnRfZnJhbWUgPSB0aGlzLnJ1
bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKTsNCiAgICAgICAgdmFyIGN1cnJlbnRfZXZlbnQg
PSBjdXJyZW50X2ZyYW1lLmN1cnJlbnRfZXZlbnQ7DQoJCXZhciBzb2xNb2RpZmllckFmdGVyQ25k
cyA9IGN1cnJlbnRfZnJhbWUuaXNNb2RpZmllckFmdGVyQ25kcygpOw0KICAgICAgICB2YXIgY3Vy
cmVudF9sb29wID0gdGhpcy5ydW50aW1lLnB1c2hMb29wU3RhY2sobmFtZSk7DQogICAgICAgIHZh
ciBpOw0KCQlpZiAoZW5kIDwgc3RhcnQpDQoJCXsNCgkJCWlmIChzb2xNb2RpZmllckFmdGVyQ25k
cykNCgkJCXsNCgkJCQlmb3IgKGkgPSBzdGFydDsgaSA+PSBlbmQgJiYgIWN1cnJlbnRfbG9vcC5z
dG9wcGVkOyAtLWkpICAvLyBpbmNsdXNpdmUgdG8gZW5kDQoJCQkJew0KCQkJCQl0aGlzLnJ1bnRp
bWUucHVzaENvcHlTb2woY3VycmVudF9ldmVudC5zb2xNb2RpZmllcnMpOw0KCQkJCQljdXJyZW50
X2xvb3AuaW5kZXggPSBpOw0KCQkJCQljdXJyZW50X2V2ZW50LnJldHJpZ2dlcigpOw0KCQkJCQl0
aGlzLnJ1bnRpbWUucG9wU29sKGN1cnJlbnRfZXZlbnQuc29sTW9kaWZpZXJzKTsNCgkJCQl9DQoJ
CQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJZm9yIChpID0gc3RhcnQ7IGkgPj0gZW5kICYmICFjdXJy
ZW50X2xvb3Auc3RvcHBlZDsgLS1pKSAgLy8gaW5jbHVzaXZlIHRvIGVuZA0KCQkJCXsNCgkJCQkJ
Y3VycmVudF9sb29wLmluZGV4ID0gaTsNCgkJCQkJY3VycmVudF9ldmVudC5yZXRyaWdnZXIoKTsN
CgkJCQl9DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpZiAoc29sTW9kaWZpZXJBZnRlckNu
ZHMpDQoJCQl7DQoJCQkJZm9yIChpID0gc3RhcnQ7IGkgPD0gZW5kICYmICFjdXJyZW50X2xvb3Au
c3RvcHBlZDsgKytpKSAgLy8gaW5jbHVzaXZlIHRvIGVuZA0KCQkJCXsNCgkJCQkJdGhpcy5ydW50
aW1lLnB1c2hDb3B5U29sKGN1cnJlbnRfZXZlbnQuc29sTW9kaWZpZXJzKTsNCgkJCQkJY3VycmVu
dF9sb29wLmluZGV4ID0gaTsNCgkJCQkJY3VycmVudF9ldmVudC5yZXRyaWdnZXIoKTsNCgkJCQkJ
dGhpcy5ydW50aW1lLnBvcFNvbChjdXJyZW50X2V2ZW50LnNvbE1vZGlmaWVycyk7DQoJCQkJfQ0K
CQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWZvciAoaSA9IHN0YXJ0OyBpIDw9IGVuZCAmJiAhY3Vy
cmVudF9sb29wLnN0b3BwZWQ7ICsraSkgIC8vIGluY2x1c2l2ZSB0byBlbmQNCgkJCQl7DQoJCQkJ
CWN1cnJlbnRfbG9vcC5pbmRleCA9IGk7DQoJCQkJCWN1cnJlbnRfZXZlbnQucmV0cmlnZ2VyKCk7
DQoJCQkJfQ0KCQkJfQ0KCQl9DQogICAgICAgIHRoaXMucnVudGltZS5wb3BMb29wU3RhY2soKTsN
CgkJcmV0dXJuIGZhbHNlOw0KICAgIH07DQoJdmFyIGZvcmVhY2hfaW5zdGFuY2VzdGFjayA9IFtd
Ow0KCXZhciBmb3JlYWNoX2luc3RhbmNlcHRyID0gLTE7DQogICAgU3lzQ25kcy5wcm90b3R5cGUu
Rm9yRWFjaCA9IGZ1bmN0aW9uIChvYmopDQogICAgew0KICAgICAgICB2YXIgc29sID0gb2JqLmdl
dEN1cnJlbnRTb2woKTsNCgkJZm9yZWFjaF9pbnN0YW5jZXB0cisrOw0KCQlpZiAoZm9yZWFjaF9p
bnN0YW5jZXN0YWNrLmxlbmd0aCA9PT0gZm9yZWFjaF9pbnN0YW5jZXB0cikNCgkJCWZvcmVhY2hf
aW5zdGFuY2VzdGFjay5wdXNoKFtdKTsNCgkJdmFyIGluc3RhbmNlcyA9IGZvcmVhY2hfaW5zdGFu
Y2VzdGFja1tmb3JlYWNoX2luc3RhbmNlcHRyXTsNCgkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KGlu
c3RhbmNlcywgc29sLmdldE9iamVjdHMoKSk7DQogICAgICAgIHZhciBjdXJyZW50X2ZyYW1lID0g
dGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQogICAgICAgIHZhciBjdXJyZW50
X2V2ZW50ID0gY3VycmVudF9mcmFtZS5jdXJyZW50X2V2ZW50Ow0KCQl2YXIgc29sTW9kaWZpZXJB
ZnRlckNuZHMgPSBjdXJyZW50X2ZyYW1lLmlzTW9kaWZpZXJBZnRlckNuZHMoKTsNCiAgICAgICAg
dmFyIGN1cnJlbnRfbG9vcCA9IHRoaXMucnVudGltZS5wdXNoTG9vcFN0YWNrKCk7DQogICAgICAg
IHZhciBpLCBsZW4sIGosIGxlbmosIGluc3QsIHMsIHNvbDI7DQoJCXZhciBpc19jb250YWluZWQg
PSBvYmouaXNfY29udGFpbmVkOw0KCQlpZiAoc29sTW9kaWZpZXJBZnRlckNuZHMpDQoJCXsNCgkJ
CWZvciAoaSA9IDAsIGxlbiA9IGluc3RhbmNlcy5sZW5ndGg7IGkgPCBsZW4gJiYgIWN1cnJlbnRf
bG9vcC5zdG9wcGVkOyBpKyspDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLnB1c2hDb3B5U29sKGN1
cnJlbnRfZXZlbnQuc29sTW9kaWZpZXJzKTsNCgkJCQlpbnN0ID0gaW5zdGFuY2VzW2ldOw0KCQkJ
CXNvbCA9IG9iai5nZXRDdXJyZW50U29sKCk7DQoJCQkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsN
CgkJCQljci5jbGVhckFycmF5KHNvbC5pbnN0YW5jZXMpOw0KCQkJCXNvbC5pbnN0YW5jZXNbMF0g
PSBpbnN0Ow0KCQkJCWlmIChpc19jb250YWluZWQpDQoJCQkJew0KCQkJCQlmb3IgKGogPSAwLCBs
ZW5qID0gaW5zdC5zaWJsaW5ncy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQkJCXsNCgkJCQkJ
CXMgPSBpbnN0LnNpYmxpbmdzW2pdOw0KCQkJCQkJc29sMiA9IHMudHlwZS5nZXRDdXJyZW50U29s
KCk7DQoJCQkJCQlzb2wyLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCQkJCWNyLmNsZWFyQXJyYXko
c29sMi5pbnN0YW5jZXMpOw0KCQkJCQkJc29sMi5pbnN0YW5jZXNbMF0gPSBzOw0KCQkJCQl9DQoJ
CQkJfQ0KCQkJCWN1cnJlbnRfbG9vcC5pbmRleCA9IGk7DQoJCQkJY3VycmVudF9ldmVudC5yZXRy
aWdnZXIoKTsNCgkJCQl0aGlzLnJ1bnRpbWUucG9wU29sKGN1cnJlbnRfZXZlbnQuc29sTW9kaWZp
ZXJzKTsNCgkJCX0NCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXNvbC5zZWxlY3RfYWxsID0gZmFsc2U7
DQoJCQljci5jbGVhckFycmF5KHNvbC5pbnN0YW5jZXMpOw0KCQkJZm9yIChpID0gMCwgbGVuID0g
aW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbiAmJiAhY3VycmVudF9sb29wLnN0b3BwZWQ7IGkrKykN
CgkJCXsNCgkJCQlpbnN0ID0gaW5zdGFuY2VzW2ldOw0KCQkJCXNvbC5pbnN0YW5jZXNbMF0gPSBp
bnN0Ow0KCQkJCWlmIChpc19jb250YWluZWQpDQoJCQkJew0KCQkJCQlmb3IgKGogPSAwLCBsZW5q
ID0gaW5zdC5zaWJsaW5ncy5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQkJCXsNCgkJCQkJCXMg
PSBpbnN0LnNpYmxpbmdzW2pdOw0KCQkJCQkJc29sMiA9IHMudHlwZS5nZXRDdXJyZW50U29sKCk7
DQoJCQkJCQlzb2wyLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCQkJCWNyLmNsZWFyQXJyYXkoc29s
Mi5pbnN0YW5jZXMpOw0KCQkJCQkJc29sMi5pbnN0YW5jZXNbMF0gPSBzOw0KCQkJCQl9DQoJCQkJ
fQ0KCQkJCWN1cnJlbnRfbG9vcC5pbmRleCA9IGk7DQoJCQkJY3VycmVudF9ldmVudC5yZXRyaWdn
ZXIoKTsNCgkJCX0NCgkJfQ0KCQljci5jbGVhckFycmF5KGluc3RhbmNlcyk7DQogICAgICAgIHRo
aXMucnVudGltZS5wb3BMb29wU3RhY2soKTsNCgkJZm9yZWFjaF9pbnN0YW5jZXB0ci0tOw0KCQly
ZXR1cm4gZmFsc2U7DQogICAgfTsNCglmdW5jdGlvbiBmb3JlYWNoX3NvcnRpbnN0YW5jZXMoYSwg
YikNCgl7DQoJCXZhciB2YSA9IGEuZXh0cmFbImMyX2Zlb192YWwiXTsNCgkJdmFyIHZiID0gYi5l
eHRyYVsiYzJfZmVvX3ZhbCJdOw0KCQlpZiAoY3IuaXNfbnVtYmVyKHZhKSAmJiBjci5pc19udW1i
ZXIodmIpKQ0KCQkJcmV0dXJuIHZhIC0gdmI7DQoJCWVsc2UNCgkJew0KCQkJdmEgPSAiIiArIHZh
Ow0KCQkJdmIgPSAiIiArIHZiOw0KCQkJaWYgKHZhIDwgdmIpDQoJCQkJcmV0dXJuIC0xOw0KCQkJ
ZWxzZSBpZiAodmEgPiB2YikNCgkJCQlyZXR1cm4gMTsNCgkJCWVsc2UNCgkJCQlyZXR1cm4gMDsN
CgkJfQ0KCX07DQoJU3lzQ25kcy5wcm90b3R5cGUuRm9yRWFjaE9yZGVyZWQgPSBmdW5jdGlvbiAo
b2JqLCBleHAsIG9yZGVyKQ0KICAgIHsNCiAgICAgICAgdmFyIHNvbCA9IG9iai5nZXRDdXJyZW50
U29sKCk7DQoJCWZvcmVhY2hfaW5zdGFuY2VwdHIrKzsNCgkJaWYgKGZvcmVhY2hfaW5zdGFuY2Vz
dGFjay5sZW5ndGggPT09IGZvcmVhY2hfaW5zdGFuY2VwdHIpDQoJCQlmb3JlYWNoX2luc3RhbmNl
c3RhY2sucHVzaChbXSk7DQoJCXZhciBpbnN0YW5jZXMgPSBmb3JlYWNoX2luc3RhbmNlc3RhY2tb
Zm9yZWFjaF9pbnN0YW5jZXB0cl07DQoJCWNyLnNoYWxsb3dBc3NpZ25BcnJheShpbnN0YW5jZXMs
IHNvbC5nZXRPYmplY3RzKCkpOw0KICAgICAgICB2YXIgY3VycmVudF9mcmFtZSA9IHRoaXMucnVu
dGltZS5nZXRDdXJyZW50RXZlbnRTdGFjaygpOw0KICAgICAgICB2YXIgY3VycmVudF9ldmVudCA9
IGN1cnJlbnRfZnJhbWUuY3VycmVudF9ldmVudDsNCgkJdmFyIGN1cnJlbnRfY29uZGl0aW9uID0g
dGhpcy5ydW50aW1lLmdldEN1cnJlbnRDb25kaXRpb24oKTsNCgkJdmFyIHNvbE1vZGlmaWVyQWZ0
ZXJDbmRzID0gY3VycmVudF9mcmFtZS5pc01vZGlmaWVyQWZ0ZXJDbmRzKCk7DQogICAgICAgIHZh
ciBjdXJyZW50X2xvb3AgPSB0aGlzLnJ1bnRpbWUucHVzaExvb3BTdGFjaygpOw0KCQl2YXIgaSwg
bGVuLCBqLCBsZW5qLCBpbnN0LCBzLCBzb2wyOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBpbnN0YW5j
ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWluc3RhbmNlc1tpXS5leHRyYVsiYzJf
ZmVvX3ZhbCJdID0gY3VycmVudF9jb25kaXRpb24ucGFyYW1ldGVyc1sxXS5nZXQoaSk7DQoJCX0N
CgkJaW5zdGFuY2VzLnNvcnQoZm9yZWFjaF9zb3J0aW5zdGFuY2VzKTsNCgkJaWYgKG9yZGVyID09
PSAxKQ0KCQkJaW5zdGFuY2VzLnJldmVyc2UoKTsNCgkJdmFyIGlzX2NvbnRhaW5lZCA9IG9iai5p
c19jb250YWluZWQ7DQoJCWlmIChzb2xNb2RpZmllckFmdGVyQ25kcykNCgkJew0KCQkJZm9yIChp
ID0gMCwgbGVuID0gaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbiAmJiAhY3VycmVudF9sb29wLnN0
b3BwZWQ7IGkrKykNCgkJCXsNCgkJCQl0aGlzLnJ1bnRpbWUucHVzaENvcHlTb2woY3VycmVudF9l
dmVudC5zb2xNb2RpZmllcnMpOw0KCQkJCWluc3QgPSBpbnN0YW5jZXNbaV07DQoJCQkJc29sID0g
b2JqLmdldEN1cnJlbnRTb2woKTsNCgkJCQlzb2wuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCWNy
LmNsZWFyQXJyYXkoc29sLmluc3RhbmNlcyk7DQoJCQkJc29sLmluc3RhbmNlc1swXSA9IGluc3Q7
DQoJCQkJaWYgKGlzX2NvbnRhaW5lZCkNCgkJCQl7DQoJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBp
bnN0LnNpYmxpbmdzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQkJew0KCQkJCQkJcyA9IGlu
c3Quc2libGluZ3Nbal07DQoJCQkJCQlzb2wyID0gcy50eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJ
CQkJCXNvbDIuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCQkJY3IuY2xlYXJBcnJheShzb2wyLmlu
c3RhbmNlcyk7DQoJCQkJCQlzb2wyLmluc3RhbmNlc1swXSA9IHM7DQoJCQkJCX0NCgkJCQl9DQoJ
CQkJY3VycmVudF9sb29wLmluZGV4ID0gaTsNCgkJCQljdXJyZW50X2V2ZW50LnJldHJpZ2dlcigp
Ow0KCQkJCXRoaXMucnVudGltZS5wb3BTb2woY3VycmVudF9ldmVudC5zb2xNb2RpZmllcnMpOw0K
CQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCWNy
LmNsZWFyQXJyYXkoc29sLmluc3RhbmNlcyk7DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBpbnN0YW5j
ZXMubGVuZ3RoOyBpIDwgbGVuICYmICFjdXJyZW50X2xvb3Auc3RvcHBlZDsgaSsrKQ0KCQkJew0K
CQkJCWluc3QgPSBpbnN0YW5jZXNbaV07DQoJCQkJc29sLmluc3RhbmNlc1swXSA9IGluc3Q7DQoJ
CQkJaWYgKGlzX2NvbnRhaW5lZCkNCgkJCQl7DQoJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBpbnN0
LnNpYmxpbmdzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQkJew0KCQkJCQkJcyA9IGluc3Qu
c2libGluZ3Nbal07DQoJCQkJCQlzb2wyID0gcy50eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJCQkJ
CXNvbDIuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCQkJY3IuY2xlYXJBcnJheShzb2wyLmluc3Rh
bmNlcyk7DQoJCQkJCQlzb2wyLmluc3RhbmNlc1swXSA9IHM7DQoJCQkJCX0NCgkJCQl9DQoJCQkJ
Y3VycmVudF9sb29wLmluZGV4ID0gaTsNCgkJCQljdXJyZW50X2V2ZW50LnJldHJpZ2dlcigpOw0K
CQkJfQ0KCQl9DQoJCWNyLmNsZWFyQXJyYXkoaW5zdGFuY2VzKTsNCiAgICAgICAgdGhpcy5ydW50
aW1lLnBvcExvb3BTdGFjaygpOw0KCQlmb3JlYWNoX2luc3RhbmNlcHRyLS07DQoJCXJldHVybiBm
YWxzZTsNCiAgICB9Ow0KCVN5c0NuZHMucHJvdG90eXBlLlBpY2tCeUNvbXBhcmlzb24gPSBmdW5j
dGlvbiAob2JqXywgZXhwXywgY21wXywgdmFsXykNCgl7DQoJCXZhciBpLCBsZW4sIGssIGluc3Q7
DQoJCWlmICghb2JqXykNCgkJCXJldHVybjsNCgkJZm9yZWFjaF9pbnN0YW5jZXB0cisrOw0KCQlp
ZiAoZm9yZWFjaF9pbnN0YW5jZXN0YWNrLmxlbmd0aCA9PT0gZm9yZWFjaF9pbnN0YW5jZXB0cikN
CgkJCWZvcmVhY2hfaW5zdGFuY2VzdGFjay5wdXNoKFtdKTsNCgkJdmFyIHRtcF9pbnN0YW5jZXMg
PSBmb3JlYWNoX2luc3RhbmNlc3RhY2tbZm9yZWFjaF9pbnN0YW5jZXB0cl07DQoJCXZhciBzb2wg
PSBvYmpfLmdldEN1cnJlbnRTb2woKTsNCgkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHRtcF9pbnN0
YW5jZXMsIHNvbC5nZXRPYmplY3RzKCkpOw0KCQlpZiAoc29sLnNlbGVjdF9hbGwpDQoJCQljci5j
bGVhckFycmF5KHNvbC5lbHNlX2luc3RhbmNlcyk7DQoJCXZhciBjdXJyZW50X2NvbmRpdGlvbiA9
IHRoaXMucnVudGltZS5nZXRDdXJyZW50Q29uZGl0aW9uKCk7DQoJCWZvciAoaSA9IDAsIGsgPSAw
LCBsZW4gPSB0bXBfaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpbnN0
ID0gdG1wX2luc3RhbmNlc1tpXTsNCgkJCXRtcF9pbnN0YW5jZXNba10gPSBpbnN0Ow0KCQkJZXhw
XyA9IGN1cnJlbnRfY29uZGl0aW9uLnBhcmFtZXRlcnNbMV0uZ2V0KGkpOw0KCQkJdmFsXyA9IGN1
cnJlbnRfY29uZGl0aW9uLnBhcmFtZXRlcnNbM10uZ2V0KGkpOw0KCQkJaWYgKGNyLmRvX2NtcChl
eHBfLCBjbXBfLCB2YWxfKSkNCgkJCXsNCgkJCQlrKys7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJ
CQkJc29sLmVsc2VfaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJCQl9DQoJCX0NCgkJY3IudHJ1bmNh
dGVBcnJheSh0bXBfaW5zdGFuY2VzLCBrKTsNCgkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJ
Y3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHNvbC5pbnN0YW5jZXMsIHRtcF9pbnN0YW5jZXMpOw0KCQlj
ci5jbGVhckFycmF5KHRtcF9pbnN0YW5jZXMpOw0KCQlmb3JlYWNoX2luc3RhbmNlcHRyLS07DQoJ
CW9ial8uYXBwbHlTb2xUb0NvbnRhaW5lcigpOw0KCQlyZXR1cm4gISFzb2wuaW5zdGFuY2VzLmxl
bmd0aDsNCgl9Ow0KCVN5c0NuZHMucHJvdG90eXBlLlBpY2tCeUV2YWx1YXRlID0gZnVuY3Rpb24g
KG9ial8sIGV4cF8pDQoJew0KCQl2YXIgaSwgbGVuLCBrLCBpbnN0Ow0KCQlpZiAoIW9ial8pDQoJ
CQlyZXR1cm47DQoJCWZvcmVhY2hfaW5zdGFuY2VwdHIrKzsNCgkJaWYgKGZvcmVhY2hfaW5zdGFu
Y2VzdGFjay5sZW5ndGggPT09IGZvcmVhY2hfaW5zdGFuY2VwdHIpDQoJCQlmb3JlYWNoX2luc3Rh
bmNlc3RhY2sucHVzaChbXSk7DQoJCXZhciB0bXBfaW5zdGFuY2VzID0gZm9yZWFjaF9pbnN0YW5j
ZXN0YWNrW2ZvcmVhY2hfaW5zdGFuY2VwdHJdOw0KCQl2YXIgc29sID0gb2JqXy5nZXRDdXJyZW50
U29sKCk7DQoJCWNyLnNoYWxsb3dBc3NpZ25BcnJheSh0bXBfaW5zdGFuY2VzLCBzb2wuZ2V0T2Jq
ZWN0cygpKTsNCgkJaWYgKHNvbC5zZWxlY3RfYWxsKQ0KCQkJY3IuY2xlYXJBcnJheShzb2wuZWxz
ZV9pbnN0YW5jZXMpOw0KCQl2YXIgY3VycmVudF9jb25kaXRpb24gPSB0aGlzLnJ1bnRpbWUuZ2V0
Q3VycmVudENvbmRpdGlvbigpOw0KCQlmb3IgKGkgPSAwLCBrID0gMCwgbGVuID0gdG1wX2luc3Rh
bmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaW5zdCA9IHRtcF9pbnN0YW5jZXNb
aV07DQoJCQl0bXBfaW5zdGFuY2VzW2tdID0gaW5zdDsNCgkJCWV4cF8gPSBjdXJyZW50X2NvbmRp
dGlvbi5wYXJhbWV0ZXJzWzFdLmdldChpKTsNCgkJCWlmIChleHBfKQ0KCQkJew0KCQkJCWsrKzsN
CgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlzb2wuZWxzZV9pbnN0YW5jZXMucHVzaChpbnN0KTsN
CgkJCX0NCgkJfQ0KCQljci50cnVuY2F0ZUFycmF5KHRtcF9pbnN0YW5jZXMsIGspOw0KCQlzb2wu
c2VsZWN0X2FsbCA9IGZhbHNlOw0KCQljci5zaGFsbG93QXNzaWduQXJyYXkoc29sLmluc3RhbmNl
cywgdG1wX2luc3RhbmNlcyk7DQoJCWNyLmNsZWFyQXJyYXkodG1wX2luc3RhbmNlcyk7DQoJCWZv
cmVhY2hfaW5zdGFuY2VwdHItLTsNCgkJb2JqXy5hcHBseVNvbFRvQ29udGFpbmVyKCk7DQoJCXJl
dHVybiAhIXNvbC5pbnN0YW5jZXMubGVuZ3RoOw0KCX07DQogICAgU3lzQ25kcy5wcm90b3R5cGUu
VHJpZ2dlck9uY2UgPSBmdW5jdGlvbiAoKQ0KICAgIHsNCiAgICAgICAgdmFyIGNuZGV4dHJhID0g
dGhpcy5ydW50aW1lLmdldEN1cnJlbnRDb25kaXRpb24oKS5leHRyYTsNCgkJaWYgKHR5cGVvZiBj
bmRleHRyYVsiVHJpZ2dlck9uY2VfbGFzdFRpY2siXSA9PT0gInVuZGVmaW5lZCIpDQoJCQljbmRl
eHRyYVsiVHJpZ2dlck9uY2VfbGFzdFRpY2siXSA9IC0xOw0KICAgICAgICB2YXIgbGFzdF90aWNr
ID0gY25kZXh0cmFbIlRyaWdnZXJPbmNlX2xhc3RUaWNrIl07DQogICAgICAgIHZhciBjdXJfdGlj
ayA9IHRoaXMucnVudGltZS50aWNrY291bnQ7DQogICAgICAgIGNuZGV4dHJhWyJUcmlnZ2VyT25j
ZV9sYXN0VGljayJdID0gY3VyX3RpY2s7DQogICAgICAgIHJldHVybiB0aGlzLnJ1bnRpbWUubGF5
b3V0X2ZpcnN0X3RpY2sgfHwgbGFzdF90aWNrICE9PSBjdXJfdGljayAtIDE7DQogICAgfTsNCiAg
ICBTeXNDbmRzLnByb3RvdHlwZS5FdmVyeSA9IGZ1bmN0aW9uIChzZWNvbmRzKQ0KICAgIHsNCiAg
ICAgICAgdmFyIGNuZCA9IHRoaXMucnVudGltZS5nZXRDdXJyZW50Q29uZGl0aW9uKCk7DQogICAg
ICAgIHZhciBsYXN0X3RpbWUgPSBjbmQuZXh0cmFbIkV2ZXJ5X2xhc3RUaW1lIl0gfHwgMDsNCiAg
ICAgICAgdmFyIGN1cl90aW1lID0gdGhpcy5ydW50aW1lLmthaGFuVGltZS5zdW07DQoJCWlmICh0
eXBlb2YgY25kLmV4dHJhWyJFdmVyeV9zZWNvbmRzIl0gPT09ICJ1bmRlZmluZWQiKQ0KCQkJY25k
LmV4dHJhWyJFdmVyeV9zZWNvbmRzIl0gPSBzZWNvbmRzOw0KCQl2YXIgdGhpc19zZWNvbmRzID0g
Y25kLmV4dHJhWyJFdmVyeV9zZWNvbmRzIl07DQogICAgICAgIGlmIChjdXJfdGltZSA+PSBsYXN0
X3RpbWUgKyB0aGlzX3NlY29uZHMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNuZC5leHRyYVsi
RXZlcnlfbGFzdFRpbWUiXSA9IGxhc3RfdGltZSArIHRoaXNfc2Vjb25kczsNCgkJCWlmIChjdXJf
dGltZSA+PSBjbmQuZXh0cmFbIkV2ZXJ5X2xhc3RUaW1lIl0gKyAwLjA0KQ0KCQkJew0KCQkJCWNu
ZC5leHRyYVsiRXZlcnlfbGFzdFRpbWUiXSA9IGN1cl90aW1lOw0KCQkJfQ0KCQkJY25kLmV4dHJh
WyJFdmVyeV9zZWNvbmRzIl0gPSBzZWNvbmRzOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQog
ICAgICAgIH0NCgkJZWxzZSBpZiAoY3VyX3RpbWUgPCBsYXN0X3RpbWUgLSAwLjEpDQoJCXsNCgkJ
CWNuZC5leHRyYVsiRXZlcnlfbGFzdFRpbWUiXSA9IGN1cl90aW1lOw0KCQl9DQoJCXJldHVybiBm
YWxzZTsNCiAgICB9Ow0KICAgIFN5c0NuZHMucHJvdG90eXBlLlBpY2tOdGggPSBmdW5jdGlvbiAo
b2JqLCBpbmRleCkNCiAgICB7DQogICAgICAgIGlmICghb2JqKQ0KICAgICAgICAgICAgcmV0dXJu
IGZhbHNlOw0KICAgICAgICB2YXIgc29sID0gb2JqLmdldEN1cnJlbnRTb2woKTsNCiAgICAgICAg
dmFyIGluc3RhbmNlcyA9IHNvbC5nZXRPYmplY3RzKCk7DQoJCWluZGV4ID0gY3IuZmxvb3IoaW5k
ZXgpOw0KICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGluc3RhbmNlcy5sZW5ndGgp
DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoJCXZhciBpbnN0ID0gaW5zdGFuY2VzW2luZGV4
XTsNCiAgICAgICAgc29sLnBpY2tfb25lKGluc3QpOw0KCQlvYmouYXBwbHlTb2xUb0NvbnRhaW5l
cigpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KCVN5c0NuZHMucHJvdG90eXBlLlBp
Y2tSYW5kb20gPSBmdW5jdGlvbiAob2JqKQ0KICAgIHsNCiAgICAgICAgaWYgKCFvYmopDQogICAg
ICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHZhciBzb2wgPSBvYmouZ2V0Q3VycmVudFNv
bCgpOw0KICAgICAgICB2YXIgaW5zdGFuY2VzID0gc29sLmdldE9iamVjdHMoKTsNCgkJdmFyIGlu
ZGV4ID0gY3IuZmxvb3IoTWF0aC5yYW5kb20oKSAqIGluc3RhbmNlcy5sZW5ndGgpOw0KICAgICAg
ICBpZiAoaW5kZXggPj0gaW5zdGFuY2VzLmxlbmd0aCkNCiAgICAgICAgICAgIHJldHVybiBmYWxz
ZTsNCgkJdmFyIGluc3QgPSBpbnN0YW5jZXNbaW5kZXhdOw0KICAgICAgICBzb2wucGlja19vbmUo
aW5zdCk7DQoJCW9iai5hcHBseVNvbFRvQ29udGFpbmVyKCk7DQogICAgICAgIHJldHVybiB0cnVl
Ow0KICAgIH07DQoJU3lzQ25kcy5wcm90b3R5cGUuQ29tcGFyZVZhciA9IGZ1bmN0aW9uICh2LCBj
bXAsIHZhbCkNCiAgICB7DQogICAgICAgIHJldHVybiBjci5kb19jbXAodi5nZXRWYWx1ZSgpLCBj
bXAsIHZhbCk7DQogICAgfTsNCiAgICBTeXNDbmRzLnByb3RvdHlwZS5Jc0dyb3VwQWN0aXZlID0g
ZnVuY3Rpb24gKGdyb3VwKQ0KICAgIHsNCgkJdmFyIGcgPSB0aGlzLnJ1bnRpbWUuZ3JvdXBzX2J5
X25hbWVbZ3JvdXAudG9Mb3dlckNhc2UoKV07DQogICAgICAgIHJldHVybiBnICYmIGcuZ3JvdXBf
YWN0aXZlOw0KICAgIH07DQoJU3lzQ25kcy5wcm90b3R5cGUuSXNQcmV2aWV3ID0gZnVuY3Rpb24g
KCkNCgl7DQoJCXJldHVybiB0eXBlb2YgY3JfaXNfcHJldmlldyAhPT0gInVuZGVmaW5lZCI7DQoJ
fTsNCglTeXNDbmRzLnByb3RvdHlwZS5QaWNrQWxsID0gZnVuY3Rpb24gKG9iaikNCiAgICB7DQog
ICAgICAgIGlmICghb2JqKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KCQlpZiAoIW9iai5p
bnN0YW5jZXMubGVuZ3RoKQ0KCQkJcmV0dXJuIGZhbHNlOw0KICAgICAgICB2YXIgc29sID0gb2Jq
LmdldEN1cnJlbnRTb2woKTsNCiAgICAgICAgc29sLnNlbGVjdF9hbGwgPSB0cnVlOw0KCQlvYmou
YXBwbHlTb2xUb0NvbnRhaW5lcigpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KCVN5
c0NuZHMucHJvdG90eXBlLklzTW9iaWxlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlz
LnJ1bnRpbWUuaXNNb2JpbGU7DQoJfTsNCglTeXNDbmRzLnByb3RvdHlwZS5Db21wYXJlQmV0d2Vl
biA9IGZ1bmN0aW9uICh4LCBhLCBiKQ0KCXsNCgkJcmV0dXJuIHggPj0gYSAmJiB4IDw9IGI7DQoJ
fTsNCglTeXNDbmRzLnByb3RvdHlwZS5FbHNlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBjdXJy
ZW50X2ZyYW1lID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCWlmIChj
dXJyZW50X2ZyYW1lLmVsc2VfYnJhbmNoX3JhbikNCgkJCXJldHVybiBmYWxzZTsJCS8vIGFub3Ro
ZXIgZXZlbnQgaW4gdGhpcyBlbHNlLWlmIGNoYWluIGhhcyBydW4NCgkJZWxzZQ0KCQkJcmV0dXJu
ICFjdXJyZW50X2ZyYW1lLmxhc3RfZXZlbnRfdHJ1ZTsNCgkJLyoNCgkJdmFyIGN1cnJlbnRfZnJh
bWUgPSB0aGlzLnJ1bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKTsNCiAgICAgICAgdmFyIGN1
cnJlbnRfZXZlbnQgPSBjdXJyZW50X2ZyYW1lLmN1cnJlbnRfZXZlbnQ7DQoJCXZhciBwcmV2X2V2
ZW50ID0gY3VycmVudF9ldmVudC5wcmV2X2Jsb2NrOw0KCQlpZiAoIXByZXZfZXZlbnQpDQoJCQly
ZXR1cm4gZmFsc2U7DQoJCWlmIChwcmV2X2V2ZW50LmlzX2xvZ2ljYWwpDQoJCQlyZXR1cm4gIXRo
aXMucnVudGltZS5sYXN0X2V2ZW50X3RydWU7DQoJCXZhciBpLCBsZW4sIGosIGxlbmosIHMsIHNv
bCwgdGVtcCwgaW5zdCwgYW55X3BpY2tlZCA9IGZhbHNlOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBw
cmV2X2V2ZW50LmNuZFJlZmVyZW5jZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXMg
PSBwcmV2X2V2ZW50LmNuZFJlZmVyZW5jZXNbaV07DQoJCQlzb2wgPSBzLmdldEN1cnJlbnRTb2wo
KTsNCgkJCWlmIChzb2wuc2VsZWN0X2FsbCB8fCBzb2wuaW5zdGFuY2VzLmxlbmd0aCA9PT0gcy5p
bnN0YW5jZXMubGVuZ3RoKQ0KCQkJew0KCQkJCXNvbC5zZWxlY3RfYWxsID0gZmFsc2U7DQoJCQkJ
c29sLmluc3RhbmNlcy5sZW5ndGggPSAwOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmIChz
b2wuaW5zdGFuY2VzLmxlbmd0aCA9PT0gMSAmJiBzb2wuZWxzZV9pbnN0YW5jZXMubGVuZ3RoID09
PSAwICYmIHMuaW5zdGFuY2VzLmxlbmd0aCA+PSAyKQ0KCQkJCXsNCgkJCQkJaW5zdCA9IHNvbC5p
bnN0YW5jZXNbMF07DQoJCQkJCXNvbC5pbnN0YW5jZXMubGVuZ3RoID0gMDsNCgkJCQkJZm9yIChq
ID0gMCwgbGVuaiA9IHMuaW5zdGFuY2VzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCQkJew0K
CQkJCQkJaWYgKHMuaW5zdGFuY2VzW2pdICE9IGluc3QpDQoJCQkJCQkJc29sLmluc3RhbmNlcy5w
dXNoKHMuaW5zdGFuY2VzW2pdKTsNCgkJCQkJfQ0KCQkJCQlhbnlfcGlja2VkID0gdHJ1ZTsNCgkJ
CQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJdGVtcCA9IHNvbC5pbnN0YW5jZXM7DQoJCQkJCXNv
bC5pbnN0YW5jZXMgPSBzb2wuZWxzZV9pbnN0YW5jZXM7DQoJCQkJCXNvbC5lbHNlX2luc3RhbmNl
cyA9IHRlbXA7DQoJCQkJCWFueV9waWNrZWQgPSB0cnVlOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQly
ZXR1cm4gYW55X3BpY2tlZDsNCgkJKi8NCgl9Ow0KCVN5c0NuZHMucHJvdG90eXBlLk9uTG9hZEZp
bmlzaGVkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJU3lzQ25kcy5w
cm90b3R5cGUuT25DYW52YXNTbmFwc2hvdCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdHJ1
ZTsNCgl9Ow0KCVN5c0NuZHMucHJvdG90eXBlLkVmZmVjdHNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJcmV0dXJuICEhdGhpcy5ydW50aW1lLmdsd3JhcDsNCgl9Ow0KCVN5c0NuZHMucHJv
dG90eXBlLk9uU2F2ZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0K
CX07DQoJU3lzQ25kcy5wcm90b3R5cGUuT25TYXZlRmFpbGVkID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CXJldHVybiB0cnVlOw0KCX07DQoJU3lzQ25kcy5wcm90b3R5cGUuT25Mb2FkQ29tcGxldGUgPSBm
dW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglTeXNDbmRzLnByb3RvdHlwZS5P
bkxvYWRGYWlsZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglTeXND
bmRzLnByb3RvdHlwZS5PYmplY3RVSURFeGlzdHMgPSBmdW5jdGlvbiAodSkNCgl7DQoJCXJldHVy
biAhIXRoaXMucnVudGltZS5nZXRPYmplY3RCeVVJRCh1KTsNCgl9Ow0KCVN5c0NuZHMucHJvdG90
eXBlLklzT25QbGF0Zm9ybSA9IGZ1bmN0aW9uIChwKQ0KCXsNCgkJdmFyIHJ0ID0gdGhpcy5ydW50
aW1lOw0KCQlzd2l0Y2ggKHApIHsNCgkJY2FzZSAwOgkJLy8gSFRNTDUgd2Vic2l0ZQ0KCQkJcmV0
dXJuICFydC5pc0RvbUZyZWUgJiYgIXJ0LmlzTm9kZVdlYmtpdCAmJiAhcnQuaXNDb3Jkb3ZhICYm
ICFydC5pc1dpbkpTICYmICFydC5pc1dpbmRvd3NQaG9uZTggJiYgIXJ0LmlzQmxhY2tiZXJyeTEw
ICYmICFydC5pc0FtYXpvbldlYkFwcDsNCgkJY2FzZSAxOgkJLy8gaU9TDQoJCQlyZXR1cm4gcnQu
aXNpT1M7DQoJCWNhc2UgMjoJCS8vIEFuZHJvaWQNCgkJCXJldHVybiBydC5pc0FuZHJvaWQ7DQoJ
CWNhc2UgMzoJCS8vIFdpbmRvd3MgOA0KCQkJcmV0dXJuIHJ0LmlzV2luZG93czhBcHA7DQoJCWNh
c2UgNDoJCS8vIFdpbmRvd3MgUGhvbmUgOA0KCQkJcmV0dXJuIHJ0LmlzV2luZG93c1Bob25lODsN
CgkJY2FzZSA1OgkJLy8gQmxhY2tiZXJyeSAxMA0KCQkJcmV0dXJuIHJ0LmlzQmxhY2tiZXJyeTEw
Ow0KCQljYXNlIDY6CQkvLyBUaXplbg0KCQkJcmV0dXJuIHJ0LmlzVGl6ZW47DQoJCWNhc2UgNzoJ
CS8vIENvY29vbkpTDQoJCQlyZXR1cm4gcnQuaXNDb2Nvb25KczsNCgkJY2FzZSA4OgkJLy8gQ29y
ZG92YQ0KCQkJcmV0dXJuIHJ0LmlzQ29yZG92YTsNCgkJY2FzZSA5OgkvLyBTY2lycmEgQXJjYWRl
DQoJCQlyZXR1cm4gcnQuaXNBcmNhZGU7DQoJCWNhc2UgMTA6CS8vIG5vZGUtd2Via2l0DQoJCQly
ZXR1cm4gcnQuaXNOb2RlV2Via2l0Ow0KCQljYXNlIDExOgkvLyBjcm9zc3dhbGsNCgkJCXJldHVy
biBydC5pc0Nyb3Nzd2FsazsNCgkJY2FzZSAxMjoJLy8gYW1hem9uIHdlYmFwcA0KCQkJcmV0dXJu
IHJ0LmlzQW1hem9uV2ViQXBwOw0KCQljYXNlIDEzOgkvLyB3aW5kb3dzIDEwIGFwcA0KCQkJcmV0
dXJuIHJ0LmlzV2luZG93czEwOw0KCQlkZWZhdWx0OgkvLyBzaG91bGQgbm90IGJlIHBvc3NpYmxl
DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgl9Ow0KCXZhciBjYWNoZVJlZ2V4ID0gbnVsbDsNCgl2
YXIgbGFzdFJlZ2V4ID0gIiI7DQoJdmFyIGxhc3RGbGFncyA9ICIiOw0KCWZ1bmN0aW9uIGdldFJl
Z2V4KHJlZ2V4XywgZmxhZ3NfKQ0KCXsNCgkJaWYgKCFjYWNoZVJlZ2V4IHx8IHJlZ2V4XyAhPT0g
bGFzdFJlZ2V4IHx8IGZsYWdzXyAhPT0gbGFzdEZsYWdzKQ0KCQl7DQoJCQljYWNoZVJlZ2V4ID0g
bmV3IFJlZ0V4cChyZWdleF8sIGZsYWdzXyk7DQoJCQlsYXN0UmVnZXggPSByZWdleF87DQoJCQls
YXN0RmxhZ3MgPSBmbGFnc187DQoJCX0NCgkJY2FjaGVSZWdleC5sYXN0SW5kZXggPSAwOwkJLy8g
cmVzZXQNCgkJcmV0dXJuIGNhY2hlUmVnZXg7DQoJfTsNCglTeXNDbmRzLnByb3RvdHlwZS5SZWdl
eFRlc3QgPSBmdW5jdGlvbiAoc3RyXywgcmVnZXhfLCBmbGFnc18pDQoJew0KCQl2YXIgcmVnZXgg
PSBnZXRSZWdleChyZWdleF8sIGZsYWdzXyk7DQoJCXJldHVybiByZWdleC50ZXN0KHN0cl8pOw0K
CX07DQoJdmFyIHRtcF9hcnIgPSBbXTsNCglTeXNDbmRzLnByb3RvdHlwZS5QaWNrT3ZlcmxhcHBp
bmdQb2ludCA9IGZ1bmN0aW9uIChvYmpfLCB4XywgeV8pDQoJew0KCQlpZiAoIW9ial8pDQogICAg
ICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHZhciBzb2wgPSBvYmpfLmdldEN1cnJlbnRT
b2woKTsNCiAgICAgICAgdmFyIGluc3RhbmNlcyA9IHNvbC5nZXRPYmplY3RzKCk7DQoJCXZhciBj
dXJyZW50X2V2ZW50ID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCkuY3VycmVu
dF9ldmVudDsNCgkJdmFyIG9yYmxvY2sgPSBjdXJyZW50X2V2ZW50Lm9yYmxvY2s7DQoJCXZhciBj
bmQgPSB0aGlzLnJ1bnRpbWUuZ2V0Q3VycmVudENvbmRpdGlvbigpOw0KCQl2YXIgaSwgbGVuLCBp
bnN0LCBwaWNrOw0KCQlpZiAoc29sLnNlbGVjdF9hbGwpDQoJCXsNCgkJCWNyLnNoYWxsb3dBc3Np
Z25BcnJheSh0bXBfYXJyLCBpbnN0YW5jZXMpOw0KCQkJY3IuY2xlYXJBcnJheShzb2wuZWxzZV9p
bnN0YW5jZXMpOw0KCQkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCWNyLmNsZWFyQXJyYXko
c29sLmluc3RhbmNlcyk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpZiAob3JibG9jaykNCgkJCXsN
CgkJCQljci5zaGFsbG93QXNzaWduQXJyYXkodG1wX2Fyciwgc29sLmVsc2VfaW5zdGFuY2VzKTsN
CgkJCQljci5jbGVhckFycmF5KHNvbC5lbHNlX2luc3RhbmNlcyk7DQoJCQl9DQoJCQllbHNlDQoJ
CQl7DQoJCQkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHRtcF9hcnIsIGluc3RhbmNlcyk7DQoJCQkJ
Y3IuY2xlYXJBcnJheShzb2wuaW5zdGFuY2VzKTsNCgkJCX0NCgkJfQ0KCQlmb3IgKGkgPSAwLCBs
ZW4gPSB0bXBfYXJyLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlpbnN0ID0gdG1wX2Fy
cltpXTsNCgkJCWluc3QudXBkYXRlX2Jib3goKTsNCgkJCXBpY2sgPSBjci54b3IoaW5zdC5jb250
YWluc19wdCh4XywgeV8pLCBjbmQuaW52ZXJ0ZWQpOw0KCQkJaWYgKHBpY2spDQoJCQkJc29sLmlu
c3RhbmNlcy5wdXNoKGluc3QpOw0KCQkJZWxzZQ0KCQkJCXNvbC5lbHNlX2luc3RhbmNlcy5wdXNo
KGluc3QpOw0KCQl9DQoJCW9ial8uYXBwbHlTb2xUb0NvbnRhaW5lcigpOw0KCQlyZXR1cm4gY3Iu
eG9yKCEhc29sLmluc3RhbmNlcy5sZW5ndGgsIGNuZC5pbnZlcnRlZCk7DQoJfTsNCglTeXNDbmRz
LnByb3RvdHlwZS5Jc05hTiA9IGZ1bmN0aW9uIChuKQ0KCXsNCgkJcmV0dXJuICEhaXNOYU4obik7
DQoJfTsNCglTeXNDbmRzLnByb3RvdHlwZS5BbmdsZVdpdGhpbiA9IGZ1bmN0aW9uIChhMSwgd2l0
aGluLCBhMikNCgl7DQoJCXJldHVybiBjci5hbmdsZURpZmYoY3IudG9fcmFkaWFucyhhMSksIGNy
LnRvX3JhZGlhbnMoYTIpKSA8PSBjci50b19yYWRpYW5zKHdpdGhpbik7DQoJfTsNCglTeXNDbmRz
LnByb3RvdHlwZS5Jc0Nsb2Nrd2lzZUZyb20gPSBmdW5jdGlvbiAoYTEsIGEyKQ0KCXsNCgkJcmV0
dXJuIGNyLmFuZ2xlQ2xvY2t3aXNlKGNyLnRvX3JhZGlhbnMoYTEpLCBjci50b19yYWRpYW5zKGEy
KSk7DQoJfTsNCglTeXNDbmRzLnByb3RvdHlwZS5Jc0JldHdlZW5BbmdsZXMgPSBmdW5jdGlvbiAo
YSwgbGEsIHVhKQ0KCXsNCgkJdmFyIGFuZ2xlID0gY3IudG9fY2xhbXBlZF9yYWRpYW5zKGEpOw0K
CQl2YXIgbG93ZXIgPSBjci50b19jbGFtcGVkX3JhZGlhbnMobGEpOw0KCQl2YXIgdXBwZXIgPSBj
ci50b19jbGFtcGVkX3JhZGlhbnModWEpOw0KCQl2YXIgb2J0dXNlID0gKCFjci5hbmdsZUNsb2Nr
d2lzZSh1cHBlciwgbG93ZXIpKTsNCgkJaWYgKG9idHVzZSkNCgkJCXJldHVybiAhKCFjci5hbmds
ZUNsb2Nrd2lzZShhbmdsZSwgbG93ZXIpICYmIGNyLmFuZ2xlQ2xvY2t3aXNlKGFuZ2xlLCB1cHBl
cikpOw0KCQllbHNlDQoJCQlyZXR1cm4gY3IuYW5nbGVDbG9ja3dpc2UoYW5nbGUsIGxvd2VyKSAm
JiAhY3IuYW5nbGVDbG9ja3dpc2UoYW5nbGUsIHVwcGVyKTsNCgl9Ow0KCVN5c0NuZHMucHJvdG90
eXBlLklzVmFsdWVUeXBlID0gZnVuY3Rpb24gKHgsIHQpDQoJew0KCQlpZiAodHlwZW9mIHggPT09
ICJudW1iZXIiKQ0KCQkJcmV0dXJuIHQgPT09IDA7DQoJCWVsc2UJCS8vIHN0cmluZw0KCQkJcmV0
dXJuIHQgPT09IDE7DQoJfTsNCglzeXNQcm90by5jbmRzID0gbmV3IFN5c0NuZHMoKTsNCiAgICBm
dW5jdGlvbiBTeXNBY3RzKCkge307DQogICAgU3lzQWN0cy5wcm90b3R5cGUuR29Ub0xheW91dCA9
IGZ1bmN0aW9uICh0bykNCiAgICB7DQoJCWlmICh0aGlzLnJ1bnRpbWUuaXNsb2FkaW5nKQ0KCQkJ
cmV0dXJuOwkJLy8gY2Fubm90IGNoYW5nZSBsYXlvdXQgd2hpbGUgbG9hZGluZyBvbiBsb2FkZXIg
bGF5b3V0DQoJCWlmICh0aGlzLnJ1bnRpbWUuY2hhbmdlbGF5b3V0KQ0KCQkJcmV0dXJuOwkJLy8g
YWxyZWFkeSBjaGFuZ2luZyB0byBhIGRpZmZlcmVudCBsYXlvdXQNCjsNCiAgICAgICAgdGhpcy5y
dW50aW1lLmNoYW5nZWxheW91dCA9IHRvOw0KICAgIH07DQoJU3lzQWN0cy5wcm90b3R5cGUuTmV4
dFByZXZMYXlvdXQgPSBmdW5jdGlvbiAocHJldikNCiAgICB7DQoJCWlmICh0aGlzLnJ1bnRpbWUu
aXNsb2FkaW5nKQ0KCQkJcmV0dXJuOwkJLy8gY2Fubm90IGNoYW5nZSBsYXlvdXQgd2hpbGUgbG9h
ZGluZyBvbiBsb2FkZXIgbGF5b3V0DQoJCWlmICh0aGlzLnJ1bnRpbWUuY2hhbmdlbGF5b3V0KQ0K
CQkJcmV0dXJuOwkJLy8gYWxyZWFkeSBjaGFuZ2luZyB0byBhIGRpZmZlcmVudCBsYXlvdXQNCgkJ
dmFyIGluZGV4ID0gdGhpcy5ydW50aW1lLmxheW91dHNfYnlfaW5kZXguaW5kZXhPZih0aGlzLnJ1
bnRpbWUucnVubmluZ19sYXlvdXQpOw0KCQlpZiAocHJldiAmJiBpbmRleCA9PT0gMCkNCgkJCXJl
dHVybjsJCS8vIGNhbm5vdCBnbyB0byBwcmV2aW91cyBsYXlvdXQgZnJvbSBmaXJzdCBsYXlvdXQN
CgkJaWYgKCFwcmV2ICYmIGluZGV4ID09PSB0aGlzLnJ1bnRpbWUubGF5b3V0c19ieV9pbmRleC5s
ZW5ndGggLSAxKQ0KCQkJcmV0dXJuOwkJLy8gY2Fubm90IGdvIHRvIG5leHQgbGF5b3V0IGZyb20g
bGFzdCBsYXlvdXQNCgkJdmFyIHRvID0gdGhpcy5ydW50aW1lLmxheW91dHNfYnlfaW5kZXhbaW5k
ZXggKyAocHJldiA/IC0xIDogMSldOw0KOw0KICAgICAgICB0aGlzLnJ1bnRpbWUuY2hhbmdlbGF5
b3V0ID0gdG87DQogICAgfTsNCiAgICBTeXNBY3RzLnByb3RvdHlwZS5DcmVhdGVPYmplY3QgPSBm
dW5jdGlvbiAob2JqLCBsYXllciwgeCwgeSkNCiAgICB7DQogICAgICAgIGlmICghbGF5ZXIgfHwg
IW9iaikNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgdmFyIGluc3QgPSB0aGlzLnJ1bnRp
bWUuY3JlYXRlSW5zdGFuY2Uob2JqLCBsYXllciwgeCwgeSk7DQoJCWlmICghaW5zdCkNCgkJCXJl
dHVybjsNCgkJdGhpcy5ydW50aW1lLmlzSW5PbkRlc3Ryb3krKzsNCgkJdmFyIGksIGxlbiwgczsN
CgkJdGhpcy5ydW50aW1lLnRyaWdnZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iai5wbHVnaW4p
LmNuZHMuT25DcmVhdGVkLCBpbnN0KTsNCgkJaWYgKGluc3QuaXNfY29udGFpbmVkKQ0KCQl7DQoJ
CQlmb3IgKGkgPSAwLCBsZW4gPSBpbnN0LnNpYmxpbmdzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0K
CQkJew0KCQkJCXMgPSBpbnN0LnNpYmxpbmdzW2ldOw0KCQkJCXRoaXMucnVudGltZS50cmlnZ2Vy
KE9iamVjdC5nZXRQcm90b3R5cGVPZihzLnR5cGUucGx1Z2luKS5jbmRzLk9uQ3JlYXRlZCwgcyk7
DQoJCQl9DQoJCX0NCgkJdGhpcy5ydW50aW1lLmlzSW5PbkRlc3Ryb3ktLTsNCiAgICAgICAgdmFy
IHNvbCA9IG9iai5nZXRDdXJyZW50U29sKCk7DQogICAgICAgIHNvbC5zZWxlY3RfYWxsID0gZmFs
c2U7DQoJCWNyLmNsZWFyQXJyYXkoc29sLmluc3RhbmNlcyk7DQoJCXNvbC5pbnN0YW5jZXNbMF0g
PSBpbnN0Ow0KCQlpZiAoaW5zdC5pc19jb250YWluZWQpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGxl
biA9IGluc3Quc2libGluZ3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJcyA9IGlu
c3Quc2libGluZ3NbaV07DQoJCQkJc29sID0gcy50eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJCQlz
b2wuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCWNyLmNsZWFyQXJyYXkoc29sLmluc3RhbmNlcyk7
DQoJCQkJc29sLmluc3RhbmNlc1swXSA9IHM7DQoJCQl9DQoJCX0NCiAgICB9Ow0KICAgIFN5c0Fj
dHMucHJvdG90eXBlLlNldExheWVyVmlzaWJsZSA9IGZ1bmN0aW9uIChsYXllciwgdmlzaWJsZV8p
DQogICAgew0KICAgICAgICBpZiAoIWxheWVyKQ0KICAgICAgICAgICAgcmV0dXJuOw0KCQlpZiAo
bGF5ZXIudmlzaWJsZSAhPT0gdmlzaWJsZV8pDQoJCXsNCgkJCWxheWVyLnZpc2libGUgPSB2aXNp
YmxlXzsNCgkJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCQl9DQogICAgfTsNCglTeXNB
Y3RzLnByb3RvdHlwZS5TZXRMYXllck9wYWNpdHkgPSBmdW5jdGlvbiAobGF5ZXIsIG9wYWNpdHlf
KQ0KCXsNCgkJaWYgKCFsYXllcikNCgkJCXJldHVybjsNCgkJb3BhY2l0eV8gPSBjci5jbGFtcChv
cGFjaXR5XyAvIDEwMCwgMCwgMSk7DQoJCWlmIChsYXllci5vcGFjaXR5ICE9PSBvcGFjaXR5XykN
CgkJew0KCQkJbGF5ZXIub3BhY2l0eSA9IG9wYWNpdHlfOw0KCQkJdGhpcy5ydW50aW1lLnJlZHJh
dyA9IHRydWU7DQoJCX0NCgl9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlNldExheWVyU2NhbGVSYXRl
ID0gZnVuY3Rpb24gKGxheWVyLCBzcikNCgl7DQoJCWlmICghbGF5ZXIpDQoJCQlyZXR1cm47DQoJ
CWlmIChsYXllci56b29tUmF0ZSAhPT0gc3IpDQoJCXsNCgkJCWxheWVyLnpvb21SYXRlID0gc3I7
DQoJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgkJfQ0KCX07DQoJU3lzQWN0cy5wcm90
b3R5cGUuU2V0TGF5ZXJGb3JjZU93blRleHR1cmUgPSBmdW5jdGlvbiAobGF5ZXIsIGYpDQoJew0K
CQlpZiAoIWxheWVyKQ0KCQkJcmV0dXJuOw0KCQlmID0gISFmOw0KCQlpZiAobGF5ZXIuZm9yY2VP
d25UZXh0dXJlICE9PSBmKQ0KCQl7DQoJCQlsYXllci5mb3JjZU93blRleHR1cmUgPSBmOw0KCQkJ
dGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCX0NCgl9Ow0KCVN5c0FjdHMucHJvdG90eXBl
LlNldExheW91dFNjYWxlID0gZnVuY3Rpb24gKHMpDQoJew0KCQlpZiAoIXRoaXMucnVudGltZS5y
dW5uaW5nX2xheW91dCkNCgkJCXJldHVybjsNCgkJaWYgKHRoaXMucnVudGltZS5ydW5uaW5nX2xh
eW91dC5zY2FsZSAhPT0gcykNCgkJew0KCQkJdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LnNj
YWxlID0gczsNCgkJCXRoaXMucnVudGltZS5ydW5uaW5nX2xheW91dC5ib3VuZFNjcm9sbGluZygp
Ow0KCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCX0NCgl9Ow0KICAgIFN5c0FjdHMu
cHJvdG90eXBlLlNjcm9sbFggPSBmdW5jdGlvbih4KQ0KICAgIHsNCiAgICAgICAgdGhpcy5ydW50
aW1lLnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFRvWCh4KTsNCiAgICB9Ow0KICAgIFN5c0FjdHMucHJv
dG90eXBlLlNjcm9sbFkgPSBmdW5jdGlvbih5KQ0KICAgIHsNCiAgICAgICAgdGhpcy5ydW50aW1l
LnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFRvWSh5KTsNCiAgICB9Ow0KICAgIFN5c0FjdHMucHJvdG90
eXBlLlNjcm9sbCA9IGZ1bmN0aW9uKHgsIHkpDQogICAgew0KICAgICAgICB0aGlzLnJ1bnRpbWUu
cnVubmluZ19sYXlvdXQuc2Nyb2xsVG9YKHgpOw0KICAgICAgICB0aGlzLnJ1bnRpbWUucnVubmlu
Z19sYXlvdXQuc2Nyb2xsVG9ZKHkpOw0KICAgIH07DQogICAgU3lzQWN0cy5wcm90b3R5cGUuU2Ny
b2xsVG9PYmplY3QgPSBmdW5jdGlvbihvYmopDQogICAgew0KICAgICAgICB2YXIgaW5zdCA9IG9i
ai5nZXRGaXJzdFBpY2tlZCgpOw0KICAgICAgICBpZiAoaW5zdCkNCiAgICAgICAgew0KICAgICAg
ICAgICAgdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFRvWChpbnN0LngpOw0KICAg
ICAgICAgICAgdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFRvWShpbnN0LnkpOw0K
ICAgICAgICB9DQogICAgfTsNCglTeXNBY3RzLnByb3RvdHlwZS5TZXRWYXIgPSBmdW5jdGlvbih2
LCB4KQ0KCXsNCjsNCgkJaWYgKHYudmFydHlwZSA9PT0gMCkNCgkJew0KCQkJaWYgKGNyLmlzX251
bWJlcih4KSkNCgkJCQl2LnNldFZhbHVlKHgpOw0KCQkJZWxzZQ0KCQkJCXYuc2V0VmFsdWUocGFy
c2VGbG9hdCh4KSk7DQoJCX0NCgkJZWxzZSBpZiAodi52YXJ0eXBlID09PSAxKQ0KCQkJdi5zZXRW
YWx1ZSh4LnRvU3RyaW5nKCkpOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuQWRkVmFyID0gZnVu
Y3Rpb24odiwgeCkNCgl7DQo7DQoJCWlmICh2LnZhcnR5cGUgPT09IDApDQoJCXsNCgkJCWlmIChj
ci5pc19udW1iZXIoeCkpDQoJCQkJdi5zZXRWYWx1ZSh2LmdldFZhbHVlKCkgKyB4KTsNCgkJCWVs
c2UNCgkJCQl2LnNldFZhbHVlKHYuZ2V0VmFsdWUoKSArIHBhcnNlRmxvYXQoeCkpOw0KCQl9DQoJ
CWVsc2UgaWYgKHYudmFydHlwZSA9PT0gMSkNCgkJCXYuc2V0VmFsdWUodi5nZXRWYWx1ZSgpICsg
eC50b1N0cmluZygpKTsNCgl9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlN1YlZhciA9IGZ1bmN0aW9u
KHYsIHgpDQoJew0KOw0KCQlpZiAodi52YXJ0eXBlID09PSAwKQ0KCQl7DQoJCQlpZiAoY3IuaXNf
bnVtYmVyKHgpKQ0KCQkJCXYuc2V0VmFsdWUodi5nZXRWYWx1ZSgpIC0geCk7DQoJCQllbHNlDQoJ
CQkJdi5zZXRWYWx1ZSh2LmdldFZhbHVlKCkgLSBwYXJzZUZsb2F0KHgpKTsNCgkJfQ0KCX07DQog
ICAgU3lzQWN0cy5wcm90b3R5cGUuU2V0R3JvdXBBY3RpdmUgPSBmdW5jdGlvbiAoZ3JvdXAsIGFj
dGl2ZSkNCiAgICB7DQoJCXZhciBnID0gdGhpcy5ydW50aW1lLmdyb3Vwc19ieV9uYW1lW2dyb3Vw
LnRvTG93ZXJDYXNlKCldOw0KCQlpZiAoIWcpDQoJCQlyZXR1cm47DQoJCXN3aXRjaCAoYWN0aXZl
KSB7DQoJCWNhc2UgMDoNCgkJCWcuc2V0R3JvdXBBY3RpdmUoZmFsc2UpOw0KCQkJYnJlYWs7DQoJ
CWNhc2UgMToNCgkJCWcuc2V0R3JvdXBBY3RpdmUodHJ1ZSk7DQoJCQlicmVhazsNCgkJY2FzZSAy
Og0KCQkJZy5zZXRHcm91cEFjdGl2ZSghZy5ncm91cF9hY3RpdmUpOw0KCQkJYnJlYWs7DQoJCX0N
CiAgICB9Ow0KICAgIFN5c0FjdHMucHJvdG90eXBlLlNldFRpbWVzY2FsZSA9IGZ1bmN0aW9uICh0
c18pDQogICAgew0KICAgICAgICB2YXIgdHMgPSB0c187DQogICAgICAgIGlmICh0cyA8IDApDQog
ICAgICAgICAgICB0cyA9IDA7DQogICAgICAgIHRoaXMucnVudGltZS50aW1lc2NhbGUgPSB0czsN
CiAgICB9Ow0KICAgIFN5c0FjdHMucHJvdG90eXBlLlNldE9iamVjdFRpbWVzY2FsZSA9IGZ1bmN0
aW9uIChvYmosIHRzXykNCiAgICB7DQogICAgICAgIHZhciB0cyA9IHRzXzsNCiAgICAgICAgaWYg
KHRzIDwgMCkNCiAgICAgICAgICAgIHRzID0gMDsNCiAgICAgICAgaWYgKCFvYmopDQogICAgICAg
ICAgICByZXR1cm47DQogICAgICAgIHZhciBzb2wgPSBvYmouZ2V0Q3VycmVudFNvbCgpOw0KICAg
ICAgICB2YXIgaW5zdGFuY2VzID0gc29sLmdldE9iamVjdHMoKTsNCiAgICAgICAgdmFyIGksIGxl
bjsNCiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsg
aSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnN0YW5jZXNbaV0ubXlfdGltZXNjYWxlID0g
dHM7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIFN5c0FjdHMucHJvdG90eXBlLlJlc3RvcmVPYmpl
Y3RUaW1lc2NhbGUgPSBmdW5jdGlvbiAob2JqKQ0KICAgIHsNCiAgICAgICAgaWYgKCFvYmopDQog
ICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHZhciBzb2wgPSBvYmouZ2V0Q3VycmVu
dFNvbCgpOw0KICAgICAgICB2YXIgaW5zdGFuY2VzID0gc29sLmdldE9iamVjdHMoKTsNCiAgICAg
ICAgdmFyIGksIGxlbjsNCiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gaW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnN0YW5jZXNbaV0ubXlf
dGltZXNjYWxlID0gLTEuMDsNCiAgICAgICAgfQ0KICAgIH07DQoJdmFyIHdhaXRvYmpyZWN5Y2xl
ID0gW107DQoJZnVuY3Rpb24gYWxsb2NXYWl0T2JqZWN0KCkNCgl7DQoJCXZhciB3Ow0KCQlpZiAo
d2FpdG9ianJlY3ljbGUubGVuZ3RoKQ0KCQkJdyA9IHdhaXRvYmpyZWN5Y2xlLnBvcCgpOw0KCQll
bHNlDQoJCXsNCgkJCXcgPSB7fTsNCgkJCXcuc29scyA9IHt9Ow0KCQkJdy5zb2xNb2RpZmllcnMg
PSBbXTsNCgkJfQ0KCQl3LmRlbGV0ZW1lID0gZmFsc2U7DQoJCXJldHVybiB3Ow0KCX07DQoJZnVu
Y3Rpb24gZnJlZVdhaXRPYmplY3QodykNCgl7DQoJCWNyLndpcGUody5zb2xzKTsNCgkJY3IuY2xl
YXJBcnJheSh3LnNvbE1vZGlmaWVycyk7DQoJCXdhaXRvYmpyZWN5Y2xlLnB1c2godyk7DQoJfTsN
Cgl2YXIgc29sc3RhdGVvYmplY3RzID0gW107DQoJZnVuY3Rpb24gYWxsb2NTb2xTdGF0ZU9iamVj
dCgpDQoJew0KCQl2YXIgczsNCgkJaWYgKHNvbHN0YXRlb2JqZWN0cy5sZW5ndGgpDQoJCQlzID0g
c29sc3RhdGVvYmplY3RzLnBvcCgpOw0KCQllbHNlDQoJCXsNCgkJCXMgPSB7fTsNCgkJCXMuaW5z
dHMgPSBbXTsNCgkJfQ0KCQlzLnNhID0gZmFsc2U7DQoJCXJldHVybiBzOw0KCX07DQoJZnVuY3Rp
b24gZnJlZVNvbFN0YXRlT2JqZWN0KHMpDQoJew0KCQljci5jbGVhckFycmF5KHMuaW5zdHMpOw0K
CQlzb2xzdGF0ZW9iamVjdHMucHVzaChzKTsNCgl9Ow0KCVN5c0FjdHMucHJvdG90eXBlLldhaXQg
PSBmdW5jdGlvbiAoc2Vjb25kcykNCgl7DQoJCWlmIChzZWNvbmRzIDwgMCkNCgkJCXJldHVybjsN
CgkJdmFyIGksIGxlbiwgcywgdCwgc3M7DQoJCXZhciBldmluZm8gPSB0aGlzLnJ1bnRpbWUuZ2V0
Q3VycmVudEV2ZW50U3RhY2soKTsNCgkJdmFyIHdhaXRvYmogPSBhbGxvY1dhaXRPYmplY3QoKTsN
CgkJd2FpdG9iai50aW1lID0gdGhpcy5ydW50aW1lLmthaGFuVGltZS5zdW0gKyBzZWNvbmRzOw0K
CQl3YWl0b2JqLnNpZ25hbHRhZyA9ICIiOw0KCQl3YWl0b2JqLnNpZ25hbGxlZCA9IGZhbHNlOw0K
CQl3YWl0b2JqLmV2ID0gZXZpbmZvLmN1cnJlbnRfZXZlbnQ7DQoJCXdhaXRvYmouYWN0aW5kZXgg
PSBldmluZm8uYWN0aW5kZXggKyAxOwkvLyBwb2ludGluZyBhdCBuZXh0IGFjdGlvbg0KCQlmb3Ig
KGkgPSAwLCBsZW4gPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVu
OyBpKyspDQoJCXsNCgkJCXQgPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbaV07DQoJCQlz
ID0gdC5nZXRDdXJyZW50U29sKCk7DQoJCQlpZiAocy5zZWxlY3RfYWxsICYmIGV2aW5mby5jdXJy
ZW50X2V2ZW50LnNvbE1vZGlmaWVycy5pbmRleE9mKHQpID09PSAtMSkNCgkJCQljb250aW51ZTsN
CgkJCXdhaXRvYmouc29sTW9kaWZpZXJzLnB1c2godCk7DQoJCQlzcyA9IGFsbG9jU29sU3RhdGVP
YmplY3QoKTsNCgkJCXNzLnNhID0gcy5zZWxlY3RfYWxsOw0KCQkJY3Iuc2hhbGxvd0Fzc2lnbkFy
cmF5KHNzLmluc3RzLCBzLmluc3RhbmNlcyk7DQoJCQl3YWl0b2JqLnNvbHNbaS50b1N0cmluZygp
XSA9IHNzOw0KCQl9DQoJCXRoaXMud2FpdHMucHVzaCh3YWl0b2JqKTsNCgkJcmV0dXJuIHRydWU7
DQoJfTsNCglTeXNBY3RzLnByb3RvdHlwZS5XYWl0Rm9yU2lnbmFsID0gZnVuY3Rpb24gKHRhZykN
Cgl7DQoJCXZhciBpLCBsZW4sIHMsIHQsIHNzOw0KCQl2YXIgZXZpbmZvID0gdGhpcy5ydW50aW1l
LmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCXZhciB3YWl0b2JqID0gYWxsb2NXYWl0T2JqZWN0
KCk7DQoJCXdhaXRvYmoudGltZSA9IC0xOw0KCQl3YWl0b2JqLnNpZ25hbHRhZyA9IHRhZy50b0xv
d2VyQ2FzZSgpOw0KCQl3YWl0b2JqLnNpZ25hbGxlZCA9IGZhbHNlOw0KCQl3YWl0b2JqLmV2ID0g
ZXZpbmZvLmN1cnJlbnRfZXZlbnQ7DQoJCXdhaXRvYmouYWN0aW5kZXggPSBldmluZm8uYWN0aW5k
ZXggKyAxOwkvLyBwb2ludGluZyBhdCBuZXh0IGFjdGlvbg0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0
aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJ
CXQgPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlfaW5kZXhbaV07DQoJCQlzID0gdC5nZXRDdXJyZW50
U29sKCk7DQoJCQlpZiAocy5zZWxlY3RfYWxsICYmIGV2aW5mby5jdXJyZW50X2V2ZW50LnNvbE1v
ZGlmaWVycy5pbmRleE9mKHQpID09PSAtMSkNCgkJCQljb250aW51ZTsNCgkJCXdhaXRvYmouc29s
TW9kaWZpZXJzLnB1c2godCk7DQoJCQlzcyA9IGFsbG9jU29sU3RhdGVPYmplY3QoKTsNCgkJCXNz
LnNhID0gcy5zZWxlY3RfYWxsOw0KCQkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KHNzLmluc3RzLCBz
Lmluc3RhbmNlcyk7DQoJCQl3YWl0b2JqLnNvbHNbaS50b1N0cmluZygpXSA9IHNzOw0KCQl9DQoJ
CXRoaXMud2FpdHMucHVzaCh3YWl0b2JqKTsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglTeXNBY3Rz
LnByb3RvdHlwZS5TaWduYWwgPSBmdW5jdGlvbiAodGFnKQ0KCXsNCgkJdmFyIGxvd2VydGFnID0g
dGFnLnRvTG93ZXJDYXNlKCk7DQoJCXZhciBpLCBsZW4sIHc7DQoJCWZvciAoaSA9IDAsIGxlbiA9
IHRoaXMud2FpdHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCXcgPSB0aGlzLndhaXRz
W2ldOw0KCQkJaWYgKHcudGltZSAhPT0gLTEpDQoJCQkJY29udGludWU7CQkJCQkvLyB0aW1lciB3
YWl0LCBpZ25vcmUNCgkJCWlmICh3LnNpZ25hbHRhZyA9PT0gbG93ZXJ0YWcpCS8vIHdhaXRpbmcg
Zm9yIHRoaXMgc2lnbmFsDQoJCQkJdy5zaWduYWxsZWQgPSB0cnVlOwkJCS8vIHdpbGwgcnVuIG9u
IG5leHQgY2hlY2sNCgkJfQ0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TGF5ZXJTY2FsZSA9
IGZ1bmN0aW9uIChsYXllciwgc2NhbGUpDQogICAgew0KICAgICAgICBpZiAoIWxheWVyKQ0KICAg
ICAgICAgICAgcmV0dXJuOw0KCQlpZiAobGF5ZXIuc2NhbGUgPT09IHNjYWxlKQ0KCQkJcmV0dXJu
Ow0KICAgICAgICBsYXllci5zY2FsZSA9IHNjYWxlOw0KICAgICAgICB0aGlzLnJ1bnRpbWUucmVk
cmF3ID0gdHJ1ZTsNCiAgICB9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlJlc2V0R2xvYmFscyA9IGZ1
bmN0aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuLCBnOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlz
LnJ1bnRpbWUuYWxsX2dsb2JhbF92YXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQln
ID0gdGhpcy5ydW50aW1lLmFsbF9nbG9iYWxfdmFyc1tpXTsNCgkJCWcuZGF0YSA9IGcuaW5pdGlh
bDsNCgkJfQ0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TGF5b3V0QW5nbGUgPSBmdW5jdGlv
biAoYSkNCgl7DQoJCWEgPSBjci50b19yYWRpYW5zKGEpOw0KCQlhID0gY3IuY2xhbXBfYW5nbGUo
YSk7DQoJCWlmICh0aGlzLnJ1bnRpbWUucnVubmluZ19sYXlvdXQpDQoJCXsNCgkJCWlmICh0aGlz
LnJ1bnRpbWUucnVubmluZ19sYXlvdXQuYW5nbGUgIT09IGEpDQoJCQl7DQoJCQkJdGhpcy5ydW50
aW1lLnJ1bm5pbmdfbGF5b3V0LmFuZ2xlID0gYTsNCgkJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0g
dHJ1ZTsNCgkJCX0NCgkJfQ0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TGF5ZXJBbmdsZSA9
IGZ1bmN0aW9uIChsYXllciwgYSkNCiAgICB7DQogICAgICAgIGlmICghbGF5ZXIpDQogICAgICAg
ICAgICByZXR1cm47DQoJCWEgPSBjci50b19yYWRpYW5zKGEpOw0KCQlhID0gY3IuY2xhbXBfYW5n
bGUoYSk7DQoJCWlmIChsYXllci5hbmdsZSA9PT0gYSkNCgkJCXJldHVybjsNCiAgICAgICAgbGF5
ZXIuYW5nbGUgPSBhOw0KICAgICAgICB0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCiAgICB9
Ow0KCVN5c0FjdHMucHJvdG90eXBlLlNldExheWVyUGFyYWxsYXggPSBmdW5jdGlvbiAobGF5ZXIs
IHB4LCBweSkNCiAgICB7DQogICAgICAgIGlmICghbGF5ZXIpDQogICAgICAgICAgICByZXR1cm47
DQoJCWlmIChsYXllci5wYXJhbGxheFggPT09IHB4IC8gMTAwICYmIGxheWVyLnBhcmFsbGF4WSA9
PT0gcHkgLyAxMDApDQoJCQlyZXR1cm47DQogICAgICAgIGxheWVyLnBhcmFsbGF4WCA9IHB4IC8g
MTAwOw0KCQlsYXllci5wYXJhbGxheFkgPSBweSAvIDEwMDsNCgkJaWYgKGxheWVyLnBhcmFsbGF4
WCAhPT0gMSB8fCBsYXllci5wYXJhbGxheFkgIT09IDEpDQoJCXsNCgkJCXZhciBpLCBsZW4sIGlu
c3RhbmNlcyA9IGxheWVyLmluc3RhbmNlczsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGluc3RhbmNl
cy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCXsNCgkJCQlpbnN0YW5jZXNbaV0udHlwZS5hbnlf
aW5zdGFuY2VfcGFyYWxsYXhlZCA9IHRydWU7DQoJCQl9DQoJCX0NCiAgICAgICAgdGhpcy5ydW50
aW1lLnJlZHJhdyA9IHRydWU7DQogICAgfTsNCglTeXNBY3RzLnByb3RvdHlwZS5TZXRMYXllckJh
Y2tncm91bmQgPSBmdW5jdGlvbiAobGF5ZXIsIGMpDQogICAgew0KICAgICAgICBpZiAoIWxheWVy
KQ0KICAgICAgICAgICAgcmV0dXJuOw0KCQl2YXIgciA9IGNyLkdldFJWYWx1ZShjKTsNCgkJdmFy
IGcgPSBjci5HZXRHVmFsdWUoYyk7DQoJCXZhciBiID0gY3IuR2V0QlZhbHVlKGMpOw0KCQlpZiAo
bGF5ZXIuYmFja2dyb3VuZF9jb2xvclswXSA9PT0gciAmJiBsYXllci5iYWNrZ3JvdW5kX2NvbG9y
WzFdID09PSBnICYmIGxheWVyLmJhY2tncm91bmRfY29sb3JbMl0gPT09IGIpDQoJCQlyZXR1cm47
DQogICAgICAgIGxheWVyLmJhY2tncm91bmRfY29sb3JbMF0gPSByOw0KCQlsYXllci5iYWNrZ3Jv
dW5kX2NvbG9yWzFdID0gZzsNCgkJbGF5ZXIuYmFja2dyb3VuZF9jb2xvclsyXSA9IGI7DQogICAg
ICAgIHRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KICAgIH07DQoJU3lzQWN0cy5wcm90b3R5
cGUuU2V0TGF5ZXJUcmFuc3BhcmVudCA9IGZ1bmN0aW9uIChsYXllciwgdCkNCiAgICB7DQogICAg
ICAgIGlmICghbGF5ZXIpDQogICAgICAgICAgICByZXR1cm47DQoJCWlmICghIXQgPT09ICEhbGF5
ZXIudHJhbnNwYXJlbnQpDQoJCQlyZXR1cm47DQoJCWxheWVyLnRyYW5zcGFyZW50ID0gISF0Ow0K
ICAgICAgICB0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCiAgICB9Ow0KCVN5c0FjdHMucHJv
dG90eXBlLlNldExheWVyQmxlbmRNb2RlID0gZnVuY3Rpb24gKGxheWVyLCBibSkNCiAgICB7DQog
ICAgICAgIGlmICghbGF5ZXIpDQogICAgICAgICAgICByZXR1cm47DQoJCWlmIChsYXllci5ibGVu
ZF9tb2RlID09PSBibSkNCgkJCXJldHVybjsNCgkJbGF5ZXIuYmxlbmRfbW9kZSA9IGJtOw0KCQls
YXllci5jb21wb3NpdGVPcCA9IGNyLmVmZmVjdFRvQ29tcG9zaXRlT3AobGF5ZXIuYmxlbmRfbW9k
ZSk7DQoJCWlmICh0aGlzLnJ1bnRpbWUuZ2wpDQoJCQljci5zZXRHTEJsZW5kKGxheWVyLCBsYXll
ci5ibGVuZF9tb2RlLCB0aGlzLnJ1bnRpbWUuZ2wpOw0KICAgICAgICB0aGlzLnJ1bnRpbWUucmVk
cmF3ID0gdHJ1ZTsNCiAgICB9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlN0b3BMb29wID0gZnVuY3Rp
b24gKCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUubG9vcF9zdGFja19pbmRleCA8IDApDQoJCQly
ZXR1cm47CQkvLyBubyBsb29wIGN1cnJlbnRseSBydW5uaW5nDQoJCXRoaXMucnVudGltZS5nZXRD
dXJyZW50TG9vcCgpLnN0b3BwZWQgPSB0cnVlOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuR29U
b0xheW91dEJ5TmFtZSA9IGZ1bmN0aW9uIChsYXlvdXRuYW1lKQ0KCXsNCgkJaWYgKHRoaXMucnVu
dGltZS5pc2xvYWRpbmcpDQoJCQlyZXR1cm47CQkvLyBjYW5ub3QgY2hhbmdlIGxheW91dCB3aGls
ZSBsb2FkaW5nIG9uIGxvYWRlciBsYXlvdXQNCgkJaWYgKHRoaXMucnVudGltZS5jaGFuZ2VsYXlv
dXQpDQoJCQlyZXR1cm47CQkvLyBhbHJlYWR5IGNoYW5naW5nIHRvIGRpZmZlcmVudCBsYXlvdXQN
CjsNCgkJdmFyIGw7DQoJCWZvciAobCBpbiB0aGlzLnJ1bnRpbWUubGF5b3V0cykNCgkJew0KCQkJ
aWYgKHRoaXMucnVudGltZS5sYXlvdXRzLmhhc093blByb3BlcnR5KGwpICYmIGNyLmVxdWFsc19u
b2Nhc2UobCwgbGF5b3V0bmFtZSkpDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLmNoYW5nZWxheW91
dCA9IHRoaXMucnVudGltZS5sYXlvdXRzW2xdOw0KCQkJCXJldHVybjsNCgkJCX0NCgkJfQ0KCX07
DQoJU3lzQWN0cy5wcm90b3R5cGUuUmVzdGFydExheW91dCA9IGZ1bmN0aW9uIChsYXlvdXRuYW1l
KQ0KCXsNCgkJaWYgKHRoaXMucnVudGltZS5pc2xvYWRpbmcpDQoJCQlyZXR1cm47CQkvLyBjYW5u
b3QgcmVzdGFydCBsb2FkZXIgbGF5b3V0cw0KCQlpZiAodGhpcy5ydW50aW1lLmNoYW5nZWxheW91
dCkNCgkJCXJldHVybjsJCS8vIGFscmVhZHkgY2hhbmdpbmcgdG8gYSBkaWZmZXJlbnQgbGF5b3V0
DQo7DQoJCWlmICghdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0KQ0KCQkJcmV0dXJuOw0KCQl0
aGlzLnJ1bnRpbWUuY2hhbmdlbGF5b3V0ID0gdGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0Ow0K
CQl2YXIgaSwgbGVuLCBnOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnJ1bnRpbWUuYWxsR3Jv
dXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlnID0gdGhpcy5ydW50aW1lLmFsbEdy
b3Vwc1tpXTsNCgkJCWcuc2V0R3JvdXBBY3RpdmUoZy5pbml0aWFsbHlfYWN0aXZhdGVkKTsNCgkJ
fQ0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU25hcHNob3RDYW52YXMgPSBmdW5jdGlvbiAoZm9y
bWF0XywgcXVhbGl0eV8pDQoJew0KCQl0aGlzLnJ1bnRpbWUuZG9DYW52YXNTbmFwc2hvdChmb3Jt
YXRfID09PSAwID8gImltYWdlL3BuZyIgOiAiaW1hZ2UvanBlZyIsIHF1YWxpdHlfIC8gMTAwKTsN
Cgl9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlNldENhbnZhc1NpemUgPSBmdW5jdGlvbiAodywgaCkN
Cgl7DQoJCWlmICh3IDw9IDAgfHwgaCA8PSAwKQ0KCQkJcmV0dXJuOw0KCQl2YXIgbW9kZSA9IHRo
aXMucnVudGltZS5mdWxsc2NyZWVuX21vZGU7DQoJCXZhciBpc2Z1bGxzY3JlZW4gPSAoZG9jdW1l
bnRbIm1vekZ1bGxTY3JlZW4iXSB8fCBkb2N1bWVudFsid2Via2l0SXNGdWxsU2NyZWVuIl0gfHwg
ISFkb2N1bWVudFsibXNGdWxsc2NyZWVuRWxlbWVudCJdIHx8IGRvY3VtZW50WyJmdWxsU2NyZWVu
Il0gfHwgdGhpcy5ydW50aW1lLmlzTm9kZUZ1bGxzY3JlZW4pOw0KCQlpZiAoaXNmdWxsc2NyZWVu
ICYmIHRoaXMucnVudGltZS5mdWxsc2NyZWVuX3NjYWxpbmcgPiAwKQ0KCQkJbW9kZSA9IHRoaXMu
cnVudGltZS5mdWxsc2NyZWVuX3NjYWxpbmc7DQoJCWlmIChtb2RlID09PSAwKQ0KCQl7DQoJCQl0
aGlzLnJ1bnRpbWVbInNldFNpemUiXSh3LCBoLCB0cnVlKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJ
CXRoaXMucnVudGltZS5vcmlnaW5hbF93aWR0aCA9IHc7DQoJCQl0aGlzLnJ1bnRpbWUub3JpZ2lu
YWxfaGVpZ2h0ID0gaDsNCgkJCXRoaXMucnVudGltZVsic2V0U2l6ZSJdKHRoaXMucnVudGltZS5s
YXN0V2luZG93V2lkdGgsIHRoaXMucnVudGltZS5sYXN0V2luZG93SGVpZ2h0LCB0cnVlKTsNCgkJ
fQ0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TGF5b3V0RWZmZWN0RW5hYmxlZCA9IGZ1bmN0
aW9uIChlbmFibGVfLCBlZmZlY3RuYW1lXykNCgl7DQoJCWlmICghdGhpcy5ydW50aW1lLnJ1bm5p
bmdfbGF5b3V0IHx8ICF0aGlzLnJ1bnRpbWUuZ2x3cmFwKQ0KCQkJcmV0dXJuOw0KCQl2YXIgZXQg
PSB0aGlzLnJ1bnRpbWUucnVubmluZ19sYXlvdXQuZ2V0RWZmZWN0QnlOYW1lKGVmZmVjdG5hbWVf
KTsNCgkJaWYgKCFldCkNCgkJCXJldHVybjsJCS8vIGVmZmVjdCBuYW1lIG5vdCBmb3VuZA0KCQl2
YXIgZW5hYmxlID0gKGVuYWJsZV8gPT09IDEpOw0KCQlpZiAoZXQuYWN0aXZlID09IGVuYWJsZSkN
CgkJCXJldHVybjsJCS8vIG5vIGNoYW5nZQ0KCQlldC5hY3RpdmUgPSBlbmFibGU7DQoJCXRoaXMu
cnVudGltZS5ydW5uaW5nX2xheW91dC51cGRhdGVBY3RpdmVFZmZlY3RzKCk7DQoJCXRoaXMucnVu
dGltZS5yZWRyYXcgPSB0cnVlOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TGF5ZXJFZmZl
Y3RFbmFibGVkID0gZnVuY3Rpb24gKGxheWVyLCBlbmFibGVfLCBlZmZlY3RuYW1lXykNCgl7DQoJ
CWlmICghbGF5ZXIgfHwgIXRoaXMucnVudGltZS5nbHdyYXApDQoJCQlyZXR1cm47DQoJCXZhciBl
dCA9IGxheWVyLmdldEVmZmVjdEJ5TmFtZShlZmZlY3RuYW1lXyk7DQoJCWlmICghZXQpDQoJCQly
ZXR1cm47CQkvLyBlZmZlY3QgbmFtZSBub3QgZm91bmQNCgkJdmFyIGVuYWJsZSA9IChlbmFibGVf
ID09PSAxKTsNCgkJaWYgKGV0LmFjdGl2ZSA9PSBlbmFibGUpDQoJCQlyZXR1cm47CQkvLyBubyBj
aGFuZ2UNCgkJZXQuYWN0aXZlID0gZW5hYmxlOw0KCQlsYXllci51cGRhdGVBY3RpdmVFZmZlY3Rz
KCk7DQoJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5
cGUuU2V0TGF5b3V0RWZmZWN0UGFyYW0gPSBmdW5jdGlvbiAoZWZmZWN0bmFtZV8sIGluZGV4Xywg
dmFsdWVfKQ0KCXsNCgkJaWYgKCF0aGlzLnJ1bnRpbWUucnVubmluZ19sYXlvdXQgfHwgIXRoaXMu
cnVudGltZS5nbHdyYXApDQoJCQlyZXR1cm47DQoJCXZhciBldCA9IHRoaXMucnVudGltZS5ydW5u
aW5nX2xheW91dC5nZXRFZmZlY3RCeU5hbWUoZWZmZWN0bmFtZV8pOw0KCQlpZiAoIWV0KQ0KCQkJ
cmV0dXJuOwkJLy8gZWZmZWN0IG5hbWUgbm90IGZvdW5kDQoJCXZhciBwYXJhbXMgPSB0aGlzLnJ1
bnRpbWUucnVubmluZ19sYXlvdXQuZWZmZWN0X3BhcmFtc1tldC5pbmRleF07DQoJCWluZGV4XyA9
IE1hdGguZmxvb3IoaW5kZXhfKTsNCgkJaWYgKGluZGV4XyA8IDAgfHwgaW5kZXhfID49IHBhcmFt
cy5sZW5ndGgpDQoJCQlyZXR1cm47CQkvLyBlZmZlY3QgaW5kZXggb3V0IG9mIGJvdW5kcw0KCQlp
ZiAodGhpcy5ydW50aW1lLmdsd3JhcC5nZXRQcm9ncmFtUGFyYW1ldGVyVHlwZShldC5zaGFkZXJp
bmRleCwgaW5kZXhfKSA9PT0gMSkNCgkJCXZhbHVlXyAvPSAxMDAuMDsNCgkJaWYgKHBhcmFtc1tp
bmRleF9dID09PSB2YWx1ZV8pDQoJCQlyZXR1cm47CQkvLyBubyBjaGFuZ2UNCgkJcGFyYW1zW2lu
ZGV4X10gPSB2YWx1ZV87DQoJCWlmIChldC5hY3RpdmUpDQoJCQl0aGlzLnJ1bnRpbWUucmVkcmF3
ID0gdHJ1ZTsNCgl9Ow0KCVN5c0FjdHMucHJvdG90eXBlLlNldExheWVyRWZmZWN0UGFyYW0gPSBm
dW5jdGlvbiAobGF5ZXIsIGVmZmVjdG5hbWVfLCBpbmRleF8sIHZhbHVlXykNCgl7DQoJCWlmICgh
bGF5ZXIgfHwgIXRoaXMucnVudGltZS5nbHdyYXApDQoJCQlyZXR1cm47DQoJCXZhciBldCA9IGxh
eWVyLmdldEVmZmVjdEJ5TmFtZShlZmZlY3RuYW1lXyk7DQoJCWlmICghZXQpDQoJCQlyZXR1cm47
CQkvLyBlZmZlY3QgbmFtZSBub3QgZm91bmQNCgkJdmFyIHBhcmFtcyA9IGxheWVyLmVmZmVjdF9w
YXJhbXNbZXQuaW5kZXhdOw0KCQlpbmRleF8gPSBNYXRoLmZsb29yKGluZGV4Xyk7DQoJCWlmIChp
bmRleF8gPCAwIHx8IGluZGV4XyA+PSBwYXJhbXMubGVuZ3RoKQ0KCQkJcmV0dXJuOwkJLy8gZWZm
ZWN0IGluZGV4IG91dCBvZiBib3VuZHMNCgkJaWYgKHRoaXMucnVudGltZS5nbHdyYXAuZ2V0UHJv
Z3JhbVBhcmFtZXRlclR5cGUoZXQuc2hhZGVyaW5kZXgsIGluZGV4XykgPT09IDEpDQoJCQl2YWx1
ZV8gLz0gMTAwLjA7DQoJCWlmIChwYXJhbXNbaW5kZXhfXSA9PT0gdmFsdWVfKQ0KCQkJcmV0dXJu
OwkJLy8gbm8gY2hhbmdlDQoJCXBhcmFtc1tpbmRleF9dID0gdmFsdWVfOw0KCQlpZiAoZXQuYWN0
aXZlKQ0KCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJfTsNCglTeXNBY3RzLnByb3Rv
dHlwZS5TYXZlU3RhdGUgPSBmdW5jdGlvbiAoc2xvdF8pDQoJew0KCQl0aGlzLnJ1bnRpbWUuc2F2
ZVRvU2xvdCA9IHNsb3RfOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuTG9hZFN0YXRlID0gZnVu
Y3Rpb24gKHNsb3RfKQ0KCXsNCgkJdGhpcy5ydW50aW1lLmxvYWRGcm9tU2xvdCA9IHNsb3RfOw0K
CX07DQoJU3lzQWN0cy5wcm90b3R5cGUuTG9hZFN0YXRlSlNPTiA9IGZ1bmN0aW9uIChqc29uc3Ry
XykNCgl7DQoJCXRoaXMucnVudGltZS5sb2FkRnJvbUpzb24gPSBqc29uc3RyXzsNCgl9Ow0KCVN5
c0FjdHMucHJvdG90eXBlLlNldEhhbGZGcmFtZXJhdGVNb2RlID0gZnVuY3Rpb24gKHNldF8pDQoJ
ew0KCQl0aGlzLnJ1bnRpbWUuaGFsZkZyYW1lcmF0ZU1vZGUgPSAoc2V0XyAhPT0gMCk7DQoJfTsN
CglTeXNBY3RzLnByb3RvdHlwZS5TZXRGdWxsc2NyZWVuUXVhbGl0eSA9IGZ1bmN0aW9uIChxKQ0K
CXsNCgkJdmFyIGlzZnVsbHNjcmVlbiA9IChkb2N1bWVudFsibW96RnVsbFNjcmVlbiJdIHx8IGRv
Y3VtZW50WyJ3ZWJraXRJc0Z1bGxTY3JlZW4iXSB8fCAhIWRvY3VtZW50WyJtc0Z1bGxzY3JlZW5F
bGVtZW50Il0gfHwgZG9jdW1lbnRbImZ1bGxTY3JlZW4iXSB8fCB0aGlzLmlzTm9kZUZ1bGxzY3Jl
ZW4pOw0KCQlpZiAoIWlzZnVsbHNjcmVlbiAmJiB0aGlzLnJ1bnRpbWUuZnVsbHNjcmVlbl9tb2Rl
ID09PSAwKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLnJ1bnRpbWUud2FudEZ1bGxzY3JlZW5TY2FsaW5n
UXVhbGl0eSA9IChxICE9PSAwKTsNCgkJdGhpcy5ydW50aW1lWyJzZXRTaXplIl0odGhpcy5ydW50
aW1lLmxhc3RXaW5kb3dXaWR0aCwgdGhpcy5ydW50aW1lLmxhc3RXaW5kb3dIZWlnaHQsIHRydWUp
Ow0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuUmVzZXRQZXJzaXN0ZWQgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5ydW50aW1lLmxheW91
dHNfYnlfaW5kZXgubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCXRoaXMucnVudGltZS5s
YXlvdXRzX2J5X2luZGV4W2ldLnBlcnNpc3RfZGF0YSA9IHt9Ow0KCQkJdGhpcy5ydW50aW1lLmxh
eW91dHNfYnlfaW5kZXhbaV0uZmlyc3RfdmlzaXQgPSB0cnVlOw0KCQl9DQoJfTsNCglTeXNBY3Rz
LnByb3RvdHlwZS5SZWNyZWF0ZUluaXRpYWxPYmplY3RzID0gZnVuY3Rpb24gKG9iaiwgeDEsIHkx
LCB4MiwgeTIpDQoJew0KCQlpZiAoIW9iaikNCgkJCXJldHVybjsNCgkJdGhpcy5ydW50aW1lLnJ1
bm5pbmdfbGF5b3V0LnJlY3JlYXRlSW5pdGlhbE9iamVjdHMob2JqLCB4MSwgeTEsIHgyLCB5Mik7
DQoJfTsNCglTeXNBY3RzLnByb3RvdHlwZS5TZXRQaXhlbFJvdW5kaW5nID0gZnVuY3Rpb24gKG0p
DQoJew0KCQl0aGlzLnJ1bnRpbWUucGl4ZWxfcm91bmRpbmcgPSAobSAhPT0gMCk7DQoJCXRoaXMu
cnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCX07DQoJU3lzQWN0cy5wcm90b3R5cGUuU2V0TWluaW11
bUZyYW1lcmF0ZSA9IGZ1bmN0aW9uIChmKQ0KCXsNCgkJaWYgKGYgPCAxKQ0KCQkJZiA9IDE7DQoJ
CWlmIChmID4gMTIwKQ0KCQkJZiA9IDEyMDsNCgkJdGhpcy5ydW50aW1lLm1pbmltdW1GcmFtZXJh
dGUgPSBmOw0KCX07DQoJZnVuY3Rpb24gU29ydFpPcmRlckxpc3QoYSwgYikNCgl7DQoJCXZhciBs
YXllckEgPSBhWzBdOw0KCQl2YXIgbGF5ZXJCID0gYlswXTsNCgkJdmFyIGRpZmYgPSBsYXllckEg
LSBsYXllckI7DQoJCWlmIChkaWZmICE9PSAwKQ0KCQkJcmV0dXJuIGRpZmY7DQoJCXZhciBpbmRl
eEEgPSBhWzFdOw0KCQl2YXIgaW5kZXhCID0gYlsxXTsNCgkJcmV0dXJuIGluZGV4QSAtIGluZGV4
QjsNCgl9Ow0KCWZ1bmN0aW9uIFNvcnRJbnN0YW5jZXNCeVZhbHVlKGEsIGIpDQoJew0KCQlyZXR1
cm4gYVsxXSAtIGJbMV07DQoJfTsNCglTeXNBY3RzLnByb3RvdHlwZS5Tb3J0Wk9yZGVyQnlJbnN0
VmFyID0gZnVuY3Rpb24gKG9iaiwgaXYpDQoJew0KCQlpZiAoIW9iaikNCgkJCXJldHVybjsNCgkJ
dmFyIGksIGxlbiwgaW5zdCwgdmFsdWUsIHIsIGxheWVyLCB0b1o7DQoJCXZhciBzb2wgPSBvYmou
Z2V0Q3VycmVudFNvbCgpOw0KCQl2YXIgcGlja2VkSW5zdGFuY2VzID0gc29sLmdldE9iamVjdHMo
KTsNCgkJdmFyIHpPcmRlckxpc3QgPSBbXTsNCgkJdmFyIGluc3RWYWx1ZXMgPSBbXTsNCgkJdmFy
IGxheW91dCA9IHRoaXMucnVudGltZS5ydW5uaW5nX2xheW91dDsNCgkJdmFyIGlzRmFtaWx5ID0g
b2JqLmlzX2ZhbWlseTsNCgkJdmFyIGZhbWlseUluZGV4ID0gb2JqLmZhbWlseV9pbmRleDsNCgkJ
Zm9yIChpID0gMCwgbGVuID0gcGlja2VkSW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0K
CQl7DQoJCQlpbnN0ID0gcGlja2VkSW5zdGFuY2VzW2ldOw0KCQkJaWYgKCFpbnN0LmxheWVyKQ0K
CQkJCWNvbnRpbnVlOwkJLy8gbm90IGEgd29ybGQgaW5zdGFuY2UNCgkJCWlmIChpc0ZhbWlseSkN
CgkJCQl2YWx1ZSA9IGluc3QuaW5zdGFuY2VfdmFyc1tpdiArIGluc3QudHlwZS5mYW1pbHlfdmFy
X21hcFtmYW1pbHlJbmRleF1dOw0KCQkJZWxzZQ0KCQkJCXZhbHVlID0gaW5zdC5pbnN0YW5jZV92
YXJzW2l2XTsNCgkJCXpPcmRlckxpc3QucHVzaChbDQoJCQkJaW5zdC5sYXllci5pbmRleCwNCgkJ
CQlpbnN0LmdldF96aW5kZXgoKQ0KCQkJXSk7DQoJCQlpbnN0VmFsdWVzLnB1c2goWw0KCQkJCWlu
c3QsDQoJCQkJdmFsdWUNCgkJCV0pOw0KCQl9DQoJCWlmICghek9yZGVyTGlzdC5sZW5ndGgpDQoJ
CQlyZXR1cm47CQkJCS8vIG5vIGluc3RhbmNlcyB3ZXJlIHdvcmxkIGluc3RhbmNlcw0KCQl6T3Jk
ZXJMaXN0LnNvcnQoU29ydFpPcmRlckxpc3QpOw0KCQlpbnN0VmFsdWVzLnNvcnQoU29ydEluc3Rh
bmNlc0J5VmFsdWUpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB6T3JkZXJMaXN0Lmxlbmd0aDsgaSA8
IGxlbjsgKytpKQ0KCQl7DQoJCQlpbnN0ID0gaW5zdFZhbHVlc1tpXVswXTsJCQkJCS8vIGluc3Rh
bmNlIGluIHRoZSBvcmRlciB3ZSB3YW50DQoJCQlsYXllciA9IGxheW91dC5sYXllcnNbek9yZGVy
TGlzdFtpXVswXV07CS8vIGxheWVyIHRvIHB1dCBpdCBvbg0KCQkJdG9aID0gek9yZGVyTGlzdFtp
XVsxXTsJCQkJCQkvLyBaIGluZGV4IG9uIHRoYXQgbGF5ZXIgdG8gcHV0IGl0DQoJCQlpZiAobGF5
ZXIuaW5zdGFuY2VzW3RvWl0gIT09IGluc3QpCQkJLy8gbm90IGFscmVhZHkgZ290IHRoaXMgaW5z
dGFuY2UgdGhlcmUNCgkJCXsNCgkJCQlsYXllci5pbnN0YW5jZXNbdG9aXSA9IGluc3Q7CQkJLy8g
dXBkYXRlIGluc3RhbmNlDQoJCQkJaW5zdC5sYXllciA9IGxheWVyOwkJCQkJCS8vIHVwZGF0ZSBp
bnN0YW5jZSdzIGxheWVyIHJlZmVyZW5jZSAoY291bGQgaGF2ZSBjaGFuZ2VkKQ0KCQkJCWxheWVy
LnNldFpJbmRpY2VzU3RhbGVGcm9tKHRvWik7CQkvLyBtYXJrIFogaW5kaWNlcyBzdGFsZSBmcm9t
IHRoaXMgcG9pbnQgc2luY2UgdGhleSBoYXZlIGNoYW5nZWQNCgkJCX0NCgkJfQ0KCX07DQoJc3lz
UHJvdG8uYWN0cyA9IG5ldyBTeXNBY3RzKCk7DQogICAgZnVuY3Rpb24gU3lzRXhwcygpIHt9Ow0K
ICAgIFN5c0V4cHMucHJvdG90eXBlWyJpbnQiXSA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQog
ICAgICAgIGlmIChjci5pc19zdHJpbmcoeCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldC5z
ZXRfaW50KHBhcnNlSW50KHgsIDEwKSk7DQogICAgICAgICAgICBpZiAoaXNOYU4ocmV0LmRhdGEp
KQ0KICAgICAgICAgICAgICAgIHJldC5kYXRhID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNl
DQogICAgICAgICAgICByZXQuc2V0X2ludCh4KTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90
eXBlWyJmbG9hdCJdID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAgIHsNCiAgICAgICAgaWYgKGNyLmlz
X3N0cmluZyh4KSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0LnNldF9mbG9hdChwYXJzZUZs
b2F0KHgpKTsNCiAgICAgICAgICAgIGlmIChpc05hTihyZXQuZGF0YSkpDQogICAgICAgICAgICAg
ICAgcmV0LmRhdGEgPSAwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJl
dC5zZXRfZmxvYXQoeCk7DQogICAgfTsNCiAgICBTeXNFeHBzLnByb3RvdHlwZS5zdHIgPSBmdW5j
dGlvbihyZXQsIHgpDQogICAgew0KICAgICAgICBpZiAoY3IuaXNfc3RyaW5nKHgpKQ0KICAgICAg
ICAgICAgcmV0LnNldF9zdHJpbmcoeCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldC5z
ZXRfc3RyaW5nKHgudG9TdHJpbmcoKSk7DQogICAgfTsNCiAgICBTeXNFeHBzLnByb3RvdHlwZS5s
ZW4gPSBmdW5jdGlvbihyZXQsIHgpDQogICAgew0KICAgICAgICByZXQuc2V0X2ludCh4Lmxlbmd0
aCB8fCAwKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLnJhbmRvbSA9IGZ1bmN0aW9u
IChyZXQsIGEsIGIpDQogICAgew0KICAgICAgICBpZiAoYiA9PT0gdW5kZWZpbmVkKQ0KICAgICAg
ICB7DQogICAgICAgICAgICByZXQuc2V0X2Zsb2F0KE1hdGgucmFuZG9tKCkgKiBhKTsNCiAgICAg
ICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldC5zZXRfZmxvYXQo
TWF0aC5yYW5kb20oKSAqIChiIC0gYSkgKyBhKTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgU3lz
RXhwcy5wcm90b3R5cGUuc3FydCA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQogICAgICAgIHJl
dC5zZXRfZmxvYXQoTWF0aC5zcXJ0KHgpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBl
LmFicyA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQogICAgICAgIHJldC5zZXRfZmxvYXQoTWF0
aC5hYnMoeCkpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlv
bihyZXQsIHgpDQogICAgew0KICAgICAgICByZXQuc2V0X2ludChNYXRoLnJvdW5kKHgpKTsNCiAg
ICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLmZsb29yID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAg
IHsNCiAgICAgICAgcmV0LnNldF9pbnQoTWF0aC5mbG9vcih4KSk7DQogICAgfTsNCiAgICBTeXNF
eHBzLnByb3RvdHlwZS5jZWlsID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAgIHsNCiAgICAgICAgcmV0
LnNldF9pbnQoTWF0aC5jZWlsKHgpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLnNp
biA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQogICAgICAgIHJldC5zZXRfZmxvYXQoTWF0aC5z
aW4oY3IudG9fcmFkaWFucyh4KSkpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUuY29z
ID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAgIHsNCiAgICAgICAgcmV0LnNldF9mbG9hdChNYXRoLmNv
cyhjci50b19yYWRpYW5zKHgpKSk7DQogICAgfTsNCiAgICBTeXNFeHBzLnByb3RvdHlwZS50YW4g
PSBmdW5jdGlvbihyZXQsIHgpDQogICAgew0KICAgICAgICByZXQuc2V0X2Zsb2F0KE1hdGgudGFu
KGNyLnRvX3JhZGlhbnMoeCkpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLmFzaW4g
PSBmdW5jdGlvbihyZXQsIHgpDQogICAgew0KICAgICAgICByZXQuc2V0X2Zsb2F0KGNyLnRvX2Rl
Z3JlZXMoTWF0aC5hc2luKHgpKSk7DQogICAgfTsNCiAgICBTeXNFeHBzLnByb3RvdHlwZS5hY29z
ID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAgIHsNCiAgICAgICAgcmV0LnNldF9mbG9hdChjci50b19k
ZWdyZWVzKE1hdGguYWNvcyh4KSkpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUuYXRh
biA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQogICAgICAgIHJldC5zZXRfZmxvYXQoY3IudG9f
ZGVncmVlcyhNYXRoLmF0YW4oeCkpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLmV4
cCA9IGZ1bmN0aW9uKHJldCwgeCkNCiAgICB7DQogICAgICAgIHJldC5zZXRfZmxvYXQoTWF0aC5l
eHAoeCkpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUubG4gPSBmdW5jdGlvbihyZXQs
IHgpDQogICAgew0KICAgICAgICByZXQuc2V0X2Zsb2F0KE1hdGgubG9nKHgpKTsNCiAgICB9Ow0K
ICAgIFN5c0V4cHMucHJvdG90eXBlLmxvZzEwID0gZnVuY3Rpb24ocmV0LCB4KQ0KICAgIHsNCiAg
ICAgICAgcmV0LnNldF9mbG9hdChNYXRoLmxvZyh4KSAvIE1hdGguTE4xMCk7DQogICAgfTsNCiAg
ICBTeXNFeHBzLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbihyZXQpDQogICAgew0KCQl2YXIgbWF4
XyA9IGFyZ3VtZW50c1sxXTsNCgkJaWYgKHR5cGVvZiBtYXhfICE9PSAibnVtYmVyIikNCgkJCW1h
eF8gPSAwOw0KCQl2YXIgaSwgbGVuLCBhOw0KCQlmb3IgKGkgPSAyLCBsZW4gPSBhcmd1bWVudHMu
bGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWEgPSBhcmd1bWVudHNbaV07DQoJCQlpZiAo
dHlwZW9mIGEgIT09ICJudW1iZXIiKQ0KCQkJCWNvbnRpbnVlOwkJLy8gaWdub3JlIG5vbi1udW1l
cmljIHR5cGVzDQoJCQlpZiAobWF4XyA8IGEpDQoJCQkJbWF4XyA9IGE7DQoJCX0NCgkJcmV0LnNl
dF9mbG9hdChtYXhfKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLm1pbiA9IGZ1bmN0
aW9uKHJldCkNCiAgICB7DQogICAgICAgIHZhciBtaW5fID0gYXJndW1lbnRzWzFdOw0KCQlpZiAo
dHlwZW9mIG1pbl8gIT09ICJudW1iZXIiKQ0KCQkJbWluXyA9IDA7DQoJCXZhciBpLCBsZW4sIGE7
DQoJCWZvciAoaSA9IDIsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJ
ew0KCQkJYSA9IGFyZ3VtZW50c1tpXTsNCgkJCWlmICh0eXBlb2YgYSAhPT0gIm51bWJlciIpDQoJ
CQkJY29udGludWU7CQkvLyBpZ25vcmUgbm9uLW51bWVyaWMgdHlwZXMNCgkJCWlmIChtaW5fID4g
YSkNCgkJCQltaW5fID0gYTsNCgkJfQ0KCQlyZXQuc2V0X2Zsb2F0KG1pbl8pOw0KICAgIH07DQog
ICAgU3lzRXhwcy5wcm90b3R5cGUuZHQgPSBmdW5jdGlvbihyZXQpDQogICAgew0KICAgICAgICBy
ZXQuc2V0X2Zsb2F0KHRoaXMucnVudGltZS5kdCk7DQogICAgfTsNCiAgICBTeXNFeHBzLnByb3Rv
dHlwZS50aW1lc2NhbGUgPSBmdW5jdGlvbihyZXQpDQogICAgew0KICAgICAgICByZXQuc2V0X2Zs
b2F0KHRoaXMucnVudGltZS50aW1lc2NhbGUpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5
cGUud2FsbGNsb2NrdGltZSA9IGZ1bmN0aW9uKHJldCkNCiAgICB7DQogICAgICAgIHJldC5zZXRf
ZmxvYXQoKERhdGUubm93KCkgLSB0aGlzLnJ1bnRpbWUuc3RhcnRfdGltZSkgLyAxMDAwLjApOw0K
ICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUudGltZSA9IGZ1bmN0aW9uKHJldCkNCiAgICB7
DQogICAgICAgIHJldC5zZXRfZmxvYXQodGhpcy5ydW50aW1lLmthaGFuVGltZS5zdW0pOw0KICAg
IH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUudGlja2NvdW50ID0gZnVuY3Rpb24ocmV0KQ0KICAg
IHsNCiAgICAgICAgcmV0LnNldF9pbnQodGhpcy5ydW50aW1lLnRpY2tjb3VudCk7DQogICAgfTsN
CiAgICBTeXNFeHBzLnByb3RvdHlwZS5vYmplY3Rjb3VudCA9IGZ1bmN0aW9uKHJldCkNCiAgICB7
DQogICAgICAgIHJldC5zZXRfaW50KHRoaXMucnVudGltZS5vYmplY3Rjb3VudCk7DQogICAgfTsN
CiAgICBTeXNFeHBzLnByb3RvdHlwZS5mcHMgPSBmdW5jdGlvbihyZXQpDQogICAgew0KICAgICAg
ICByZXQuc2V0X2ludCh0aGlzLnJ1bnRpbWUuZnBzKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJv
dG90eXBlLmxvb3BpbmRleCA9IGZ1bmN0aW9uKHJldCwgbmFtZV8pDQogICAgew0KCQl2YXIgbG9v
cCwgaSwgbGVuOw0KICAgICAgICBpZiAoIXRoaXMucnVudGltZS5sb29wX3N0YWNrLmxlbmd0aCkN
CiAgICAgICAgew0KICAgICAgICAgICAgcmV0LnNldF9pbnQoMCk7DQogICAgICAgICAgICByZXR1
cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKG5hbWVfKQ0KICAgICAgICB7DQogICAgICAgICAg
ICBmb3IgKGkgPSB0aGlzLnJ1bnRpbWUubG9vcF9zdGFja19pbmRleDsgaSA+PSAwOyAtLWkpDQog
ICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbG9vcCA9IHRoaXMucnVudGltZS5sb29wX3N0
YWNrW2ldOw0KICAgICAgICAgICAgICAgIGlmIChsb29wLm5hbWUgPT09IG5hbWVfKQ0KICAgICAg
ICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0LnNldF9pbnQobG9vcC5pbmRleCk7
DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICB9DQogICAgICAgICAgICByZXQuc2V0X2ludCgwKTsNCiAgICAgICAgfQ0KICAgICAgICBl
bHNlDQogICAgICAgIHsNCgkJCWxvb3AgPSB0aGlzLnJ1bnRpbWUuZ2V0Q3VycmVudExvb3AoKTsN
CgkJCXJldC5zZXRfaW50KGxvb3AgPyBsb29wLmluZGV4IDogLTEpOw0KICAgICAgICB9DQogICAg
fTsNCiAgICBTeXNFeHBzLnByb3RvdHlwZS5kaXN0YW5jZSA9IGZ1bmN0aW9uKHJldCwgeDEsIHkx
LCB4MiwgeTIpDQogICAgew0KICAgICAgICByZXQuc2V0X2Zsb2F0KGNyLmRpc3RhbmNlVG8oeDEs
IHkxLCB4MiwgeTIpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90eXBlLmFuZ2xlID0gZnVu
Y3Rpb24ocmV0LCB4MSwgeTEsIHgyLCB5MikNCiAgICB7DQogICAgICAgIHJldC5zZXRfZmxvYXQo
Y3IudG9fZGVncmVlcyhjci5hbmdsZVRvKHgxLCB5MSwgeDIsIHkyKSkpOw0KICAgIH07DQogICAg
U3lzRXhwcy5wcm90b3R5cGUuc2Nyb2xseCA9IGZ1bmN0aW9uKHJldCkNCiAgICB7DQogICAgICAg
IHJldC5zZXRfZmxvYXQodGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LnNjcm9sbFgpOw0KICAg
IH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUuc2Nyb2xseSA9IGZ1bmN0aW9uKHJldCkNCiAgICB7
DQogICAgICAgIHJldC5zZXRfZmxvYXQodGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LnNjcm9s
bFkpOw0KICAgIH07DQogICAgU3lzRXhwcy5wcm90b3R5cGUubmV3bGluZSA9IGZ1bmN0aW9uKHJl
dCkNCiAgICB7DQogICAgICAgIHJldC5zZXRfc3RyaW5nKCJcbiIpOw0KICAgIH07DQogICAgU3lz
RXhwcy5wcm90b3R5cGUubGVycCA9IGZ1bmN0aW9uKHJldCwgYSwgYiwgeCkNCiAgICB7DQogICAg
ICAgIHJldC5zZXRfZmxvYXQoY3IubGVycChhLCBiLCB4KSk7DQogICAgfTsNCglTeXNFeHBzLnBy
b3RvdHlwZS5xYXJwID0gZnVuY3Rpb24ocmV0LCBhLCBiLCBjLCB4KQ0KICAgIHsNCiAgICAgICAg
cmV0LnNldF9mbG9hdChjci5xYXJwKGEsIGIsIGMsIHgpKTsNCiAgICB9Ow0KCVN5c0V4cHMucHJv
dG90eXBlLmN1YmljID0gZnVuY3Rpb24ocmV0LCBhLCBiLCBjLCBkLCB4KQ0KICAgIHsNCiAgICAg
ICAgcmV0LnNldF9mbG9hdChjci5jdWJpYyhhLCBiLCBjLCBkLCB4KSk7DQogICAgfTsNCglTeXNF
eHBzLnByb3RvdHlwZS5jb3NwID0gZnVuY3Rpb24ocmV0LCBhLCBiLCB4KQ0KICAgIHsNCiAgICAg
ICAgcmV0LnNldF9mbG9hdChjci5jb3NwKGEsIGIsIHgpKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMu
cHJvdG90eXBlLndpbmRvd3dpZHRoID0gZnVuY3Rpb24ocmV0KQ0KICAgIHsNCiAgICAgICAgcmV0
LnNldF9pbnQodGhpcy5ydW50aW1lLndpZHRoKTsNCiAgICB9Ow0KICAgIFN5c0V4cHMucHJvdG90
eXBlLndpbmRvd2hlaWdodCA9IGZ1bmN0aW9uKHJldCkNCiAgICB7DQogICAgICAgIHJldC5zZXRf
aW50KHRoaXMucnVudGltZS5oZWlnaHQpOw0KICAgIH07DQoJU3lzRXhwcy5wcm90b3R5cGUudXBw
ZXJjYXNlID0gZnVuY3Rpb24ocmV0LCBzdHIpDQoJew0KCQlyZXQuc2V0X3N0cmluZyhjci5pc19z
dHJpbmcoc3RyKSA/IHN0ci50b1VwcGVyQ2FzZSgpIDogIiIpOw0KCX07DQoJU3lzRXhwcy5wcm90
b3R5cGUubG93ZXJjYXNlID0gZnVuY3Rpb24ocmV0LCBzdHIpDQoJew0KCQlyZXQuc2V0X3N0cmlu
Zyhjci5pc19zdHJpbmcoc3RyKSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogIiIpOw0KCX07DQoJU3lz
RXhwcy5wcm90b3R5cGUuY2xhbXAgPSBmdW5jdGlvbihyZXQsIHgsIGwsIHUpDQoJew0KCQlpZiAo
eCA8IGwpDQoJCQlyZXQuc2V0X2Zsb2F0KGwpOw0KCQllbHNlIGlmICh4ID4gdSkNCgkJCXJldC5z
ZXRfZmxvYXQodSk7DQoJCWVsc2UNCgkJCXJldC5zZXRfZmxvYXQoeCk7DQoJfTsNCglTeXNFeHBz
LnByb3RvdHlwZS5sYXllcnNjYWxlID0gZnVuY3Rpb24gKHJldCwgbGF5ZXJwYXJhbSkNCgl7DQoJ
CXZhciBsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllcihsYXllcnBhcmFtKTsNCgkJaWYgKCFs
YXllcikNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCWVsc2UNCgkJCXJldC5zZXRfZmxvYXQobGF5
ZXIuc2NhbGUpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUubGF5ZXJvcGFjaXR5ID0gZnVuY3Rp
b24gKHJldCwgbGF5ZXJwYXJhbSkNCgl7DQoJCXZhciBsYXllciA9IHRoaXMucnVudGltZS5nZXRM
YXllcihsYXllcnBhcmFtKTsNCgkJaWYgKCFsYXllcikNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJ
CWVsc2UNCgkJCXJldC5zZXRfZmxvYXQobGF5ZXIub3BhY2l0eSAqIDEwMCk7DQoJfTsNCglTeXNF
eHBzLnByb3RvdHlwZS5sYXllcnNjYWxlcmF0ZSA9IGZ1bmN0aW9uIChyZXQsIGxheWVycGFyYW0p
DQoJew0KCQl2YXIgbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXIobGF5ZXJwYXJhbSk7DQoJ
CWlmICghbGF5ZXIpDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zs
b2F0KGxheWVyLnpvb21SYXRlKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmxheWVycGFyYWxs
YXh4ID0gZnVuY3Rpb24gKHJldCwgbGF5ZXJwYXJhbSkNCgl7DQoJCXZhciBsYXllciA9IHRoaXMu
cnVudGltZS5nZXRMYXllcihsYXllcnBhcmFtKTsNCgkJaWYgKCFsYXllcikNCgkJCXJldC5zZXRf
ZmxvYXQoMCk7DQoJCWVsc2UNCgkJCXJldC5zZXRfZmxvYXQobGF5ZXIucGFyYWxsYXhYICogMTAw
KTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmxheWVycGFyYWxsYXh5ID0gZnVuY3Rpb24gKHJl
dCwgbGF5ZXJwYXJhbSkNCgl7DQoJCXZhciBsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllcihs
YXllcnBhcmFtKTsNCgkJaWYgKCFsYXllcikNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCWVsc2UN
CgkJCXJldC5zZXRfZmxvYXQobGF5ZXIucGFyYWxsYXhZICogMTAwKTsNCgl9Ow0KCVN5c0V4cHMu
cHJvdG90eXBlLmxheWVyaW5kZXggPSBmdW5jdGlvbiAocmV0LCBsYXllcnBhcmFtKQ0KCXsNCgkJ
dmFyIGxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVyKGxheWVycGFyYW0pOw0KCQlpZiAoIWxh
eWVyKQ0KCQkJcmV0LnNldF9pbnQoLTEpOw0KCQllbHNlDQoJCQlyZXQuc2V0X2ludChsYXllci5p
bmRleCk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5sYXlvdXRzY2FsZSA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQlpZiAodGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0KQ0KCQkJcmV0LnNldF9m
bG9hdCh0aGlzLnJ1bnRpbWUucnVubmluZ19sYXlvdXQuc2NhbGUpOw0KCQllbHNlDQoJCQlyZXQu
c2V0X2Zsb2F0KDApOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUubGF5b3V0YW5nbGUgPSBmdW5j
dGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChjci50b19kZWdyZWVzKHRoaXMucnVudGlt
ZS5ydW5uaW5nX2xheW91dC5hbmdsZSkpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUubGF5ZXJh
bmdsZSA9IGZ1bmN0aW9uIChyZXQsIGxheWVycGFyYW0pDQoJew0KCQl2YXIgbGF5ZXIgPSB0aGlz
LnJ1bnRpbWUuZ2V0TGF5ZXIobGF5ZXJwYXJhbSk7DQoJCWlmICghbGF5ZXIpDQoJCQlyZXQuc2V0
X2Zsb2F0KDApOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KGNyLnRvX2RlZ3JlZXMobGF5ZXIu
YW5nbGUpKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmxheW91dHdpZHRoID0gZnVuY3Rpb24g
KHJldCkNCgl7DQoJCXJldC5zZXRfaW50KHRoaXMucnVudGltZS5ydW5uaW5nX2xheW91dC53aWR0
aCk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5sYXlvdXRoZWlnaHQgPSBmdW5jdGlvbiAocmV0
KQ0KCXsNCgkJcmV0LnNldF9pbnQodGhpcy5ydW50aW1lLnJ1bm5pbmdfbGF5b3V0LmhlaWdodCk7
DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHJldCwgdGV4dCwgc2Vh
cmNoc3RyKQ0KCXsNCgkJaWYgKGNyLmlzX3N0cmluZyh0ZXh0KSAmJiBjci5pc19zdHJpbmcoc2Vh
cmNoc3RyKSkNCgkJCXJldC5zZXRfaW50KHRleHQuc2VhcmNoKG5ldyBSZWdFeHAoY3IucmVnZXhw
X2VzY2FwZShzZWFyY2hzdHIpLCAiaSIpKSk7DQoJCWVsc2UNCgkJCXJldC5zZXRfaW50KC0xKTsN
Cgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmZpbmRjYXNlID0gZnVuY3Rpb24gKHJldCwgdGV4dCwg
c2VhcmNoc3RyKQ0KCXsNCgkJaWYgKGNyLmlzX3N0cmluZyh0ZXh0KSAmJiBjci5pc19zdHJpbmco
c2VhcmNoc3RyKSkNCgkJCXJldC5zZXRfaW50KHRleHQuc2VhcmNoKG5ldyBSZWdFeHAoY3IucmVn
ZXhwX2VzY2FwZShzZWFyY2hzdHIpLCAiIikpKTsNCgkJZWxzZQ0KCQkJcmV0LnNldF9pbnQoLTEp
Ow0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUubGVmdCA9IGZ1bmN0aW9uIChyZXQsIHRleHQsIG4p
DQoJew0KCQlyZXQuc2V0X3N0cmluZyhjci5pc19zdHJpbmcodGV4dCkgPyB0ZXh0LnN1YnN0cigw
LCBuKSA6ICIiKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLnJpZ2h0ID0gZnVuY3Rpb24gKHJl
dCwgdGV4dCwgbikNCgl7DQoJCXJldC5zZXRfc3RyaW5nKGNyLmlzX3N0cmluZyh0ZXh0KSA/IHRl
eHQuc3Vic3RyKHRleHQubGVuZ3RoIC0gbikgOiAiIik7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlw
ZS5taWQgPSBmdW5jdGlvbiAocmV0LCB0ZXh0LCBpbmRleF8sIGxlbmd0aF8pDQoJew0KCQlyZXQu
c2V0X3N0cmluZyhjci5pc19zdHJpbmcodGV4dCkgPyB0ZXh0LnN1YnN0cihpbmRleF8sIGxlbmd0
aF8pIDogIiIpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUudG9rZW5hdCA9IGZ1bmN0aW9uIChy
ZXQsIHRleHQsIGluZGV4Xywgc2VwKQ0KCXsNCgkJaWYgKGNyLmlzX3N0cmluZyh0ZXh0KSAmJiBj
ci5pc19zdHJpbmcoc2VwKSkNCgkJew0KCQkJdmFyIGFyciA9IHRleHQuc3BsaXQoc2VwKTsNCgkJ
CXZhciBpID0gY3IuZmxvb3IoaW5kZXhfKTsNCgkJCWlmIChpIDwgMCB8fCBpID49IGFyci5sZW5n
dGgpDQoJCQkJcmV0LnNldF9zdHJpbmcoIiIpOw0KCQkJZWxzZQ0KCQkJCXJldC5zZXRfc3RyaW5n
KGFycltpXSk7DQoJCX0NCgkJZWxzZQ0KCQkJcmV0LnNldF9zdHJpbmcoIiIpOw0KCX07DQoJU3lz
RXhwcy5wcm90b3R5cGUudG9rZW5jb3VudCA9IGZ1bmN0aW9uIChyZXQsIHRleHQsIHNlcCkNCgl7
DQoJCWlmIChjci5pc19zdHJpbmcodGV4dCkgJiYgdGV4dC5sZW5ndGgpDQoJCQlyZXQuc2V0X2lu
dCh0ZXh0LnNwbGl0KHNlcCkubGVuZ3RoKTsNCgkJZWxzZQ0KCQkJcmV0LnNldF9pbnQoMCk7DQoJ
fTsNCglTeXNFeHBzLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKHJldCwgdGV4dCwgZmlu
ZF8sIHJlcGxhY2VfKQ0KCXsNCgkJaWYgKGNyLmlzX3N0cmluZyh0ZXh0KSAmJiBjci5pc19zdHJp
bmcoZmluZF8pICYmIGNyLmlzX3N0cmluZyhyZXBsYWNlXykpDQoJCQlyZXQuc2V0X3N0cmluZyh0
ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChjci5yZWdleHBfZXNjYXBlKGZpbmRfKSwgImdpIiksIHJl
cGxhY2VfKSk7DQoJCWVsc2UNCgkJCXJldC5zZXRfc3RyaW5nKGNyLmlzX3N0cmluZyh0ZXh0KSA/
IHRleHQgOiAiIik7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKHJl
dCwgdGV4dCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKGNyLmlzX3N0cmluZyh0ZXh0KSA/IHRleHQu
dHJpbSgpIDogIiIpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUucGkgPSBmdW5jdGlvbiAocmV0
KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChjci5QSSk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5s
YXlvdXRuYW1lID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUucnVubmlu
Z19sYXlvdXQpDQoJCQlyZXQuc2V0X3N0cmluZyh0aGlzLnJ1bnRpbWUucnVubmluZ19sYXlvdXQu
bmFtZSk7DQoJCWVsc2UNCgkJCXJldC5zZXRfc3RyaW5nKCIiKTsNCgl9Ow0KCVN5c0V4cHMucHJv
dG90eXBlLnJlbmRlcmVyID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRo
aXMucnVudGltZS5nbCA/ICJ3ZWJnbCIgOiAiY2FudmFzMmQiKTsNCgl9Ow0KCVN5c0V4cHMucHJv
dG90eXBlLnJlbmRlcmVyZGV0YWlsID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3Ry
aW5nKHRoaXMucnVudGltZS5nbFVubWFza2VkUmVuZGVyZXIpOw0KCX07DQoJU3lzRXhwcy5wcm90
b3R5cGUuYW5nbGVkaWZmID0gZnVuY3Rpb24gKHJldCwgYSwgYikNCgl7DQoJCXJldC5zZXRfZmxv
YXQoY3IudG9fZGVncmVlcyhjci5hbmdsZURpZmYoY3IudG9fcmFkaWFucyhhKSwgY3IudG9fcmFk
aWFucyhiKSkpKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmNob29zZSA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQl2YXIgaW5kZXggPSBjci5mbG9vcihNYXRoLnJhbmRvbSgpICogKGFyZ3VtZW50
cy5sZW5ndGggLSAxKSk7DQoJCXJldC5zZXRfYW55KGFyZ3VtZW50c1tpbmRleCArIDFdKTsNCgl9
Ow0KCVN5c0V4cHMucHJvdG90eXBlLnJnYiA9IGZ1bmN0aW9uIChyZXQsIHIsIGcsIGIpDQoJew0K
CQlyZXQuc2V0X2ludChjci5SR0IociwgZywgYikpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUu
cHJvamVjdHZlcnNpb24gPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9zdHJpbmcodGhp
cy5ydW50aW1lLnZlcnNpb25zdHIpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUucHJvamVjdG5h
bWUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9zdHJpbmcodGhpcy5ydW50aW1lLnBy
b2plY3ROYW1lKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmFuZ2xlbGVycCA9IGZ1bmN0aW9u
IChyZXQsIGEsIGIsIHgpDQoJew0KCQlhID0gY3IudG9fcmFkaWFucyhhKTsNCgkJYiA9IGNyLnRv
X3JhZGlhbnMoYik7DQoJCXZhciBkaWZmID0gY3IuYW5nbGVEaWZmKGEsIGIpOw0KCQlpZiAoY3Iu
YW5nbGVDbG9ja3dpc2UoYiwgYSkpDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoY3IudG9fY2xhbXBl
ZF9kZWdyZWVzKGEgKyBkaWZmICogeCkpOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJcmV0LnNldF9m
bG9hdChjci50b19jbGFtcGVkX2RlZ3JlZXMoYSAtIGRpZmYgKiB4KSk7DQoJCX0NCgl9Ow0KCVN5
c0V4cHMucHJvdG90eXBlLmFuZ2xlcm90YXRlID0gZnVuY3Rpb24gKHJldCwgYSwgYiwgYykNCgl7
DQoJCWEgPSBjci50b19yYWRpYW5zKGEpOw0KCQliID0gY3IudG9fcmFkaWFucyhiKTsNCgkJYyA9
IGNyLnRvX3JhZGlhbnMoYyk7DQoJCXJldC5zZXRfZmxvYXQoY3IudG9fY2xhbXBlZF9kZWdyZWVz
KGNyLmFuZ2xlUm90YXRlKGEsIGIsIGMpKSk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS56ZXJv
cGFkID0gZnVuY3Rpb24gKHJldCwgbiwgZCkNCgl7DQoJCXZhciBzID0gKG4gPCAwID8gIi0iIDog
IiIpOw0KCQlpZiAobiA8IDApIG4gPSAtbjsNCgkJdmFyIHplcm9lcyA9IGQgLSBuLnRvU3RyaW5n
KCkubGVuZ3RoOw0KCQlmb3IgKHZhciBpID0gMDsgaSA8IHplcm9lczsgaSsrKQ0KCQkJcyArPSAi
MCI7DQoJCXJldC5zZXRfc3RyaW5nKHMgKyBuLnRvU3RyaW5nKCkpOw0KCX07DQoJU3lzRXhwcy5w
cm90b3R5cGUuY3B1dXRpbGlzYXRpb24gPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9m
bG9hdCh0aGlzLnJ1bnRpbWUuY3B1dXRpbGlzYXRpb24gLyAxMDAwKTsNCgl9Ow0KCVN5c0V4cHMu
cHJvdG90eXBlLnZpZXdwb3J0bGVmdCA9IGZ1bmN0aW9uIChyZXQsIGxheWVycGFyYW0pDQoJew0K
CQl2YXIgbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXIobGF5ZXJwYXJhbSk7DQoJCXJldC5z
ZXRfZmxvYXQobGF5ZXIgPyBsYXllci52aWV3TGVmdCA6IDApOw0KCX07DQoJU3lzRXhwcy5wcm90
b3R5cGUudmlld3BvcnR0b3AgPSBmdW5jdGlvbiAocmV0LCBsYXllcnBhcmFtKQ0KCXsNCgkJdmFy
IGxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVyKGxheWVycGFyYW0pOw0KCQlyZXQuc2V0X2Zs
b2F0KGxheWVyID8gbGF5ZXIudmlld1RvcCA6IDApOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUu
dmlld3BvcnRyaWdodCA9IGZ1bmN0aW9uIChyZXQsIGxheWVycGFyYW0pDQoJew0KCQl2YXIgbGF5
ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXIobGF5ZXJwYXJhbSk7DQoJCXJldC5zZXRfZmxvYXQo
bGF5ZXIgPyBsYXllci52aWV3UmlnaHQgOiAwKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLnZp
ZXdwb3J0Ym90dG9tID0gZnVuY3Rpb24gKHJldCwgbGF5ZXJwYXJhbSkNCgl7DQoJCXZhciBsYXll
ciA9IHRoaXMucnVudGltZS5nZXRMYXllcihsYXllcnBhcmFtKTsNCgkJcmV0LnNldF9mbG9hdChs
YXllciA/IGxheWVyLnZpZXdCb3R0b20gOiAwKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLmxv
YWRpbmdwcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMu
cnVudGltZS5sb2FkaW5ncHJvZ3Jlc3MpOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUudW5sZXJw
ID0gZnVuY3Rpb24ocmV0LCBhLCBiLCB5KQ0KICAgIHsNCiAgICAgICAgcmV0LnNldF9mbG9hdChj
ci51bmxlcnAoYSwgYiwgeSkpOw0KICAgIH07DQoJU3lzRXhwcy5wcm90b3R5cGUuY2FudmFzc25h
cHNob3QgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9zdHJpbmcodGhpcy5ydW50aW1l
LnNuYXBzaG90RGF0YSk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS51cmxlbmNvZGUgPSBmdW5j
dGlvbiAocmV0LCBzKQ0KCXsNCgkJcmV0LnNldF9zdHJpbmcoZW5jb2RlVVJJQ29tcG9uZW50KHMp
KTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBlLnVybGRlY29kZSA9IGZ1bmN0aW9uIChyZXQsIHMp
DQoJew0KCQlyZXQuc2V0X3N0cmluZyhkZWNvZGVVUklDb21wb25lbnQocykpOw0KCX07DQoJU3lz
RXhwcy5wcm90b3R5cGUuY2FudmFzdG9sYXllcnggPSBmdW5jdGlvbiAocmV0LCBsYXllcnBhcmFt
LCB4LCB5KQ0KCXsNCgkJdmFyIGxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVyKGxheWVycGFy
YW0pOw0KCQlyZXQuc2V0X2Zsb2F0KGxheWVyID8gbGF5ZXIuY2FudmFzVG9MYXllcih4LCB5LCB0
cnVlKSA6IDApOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUuY2FudmFzdG9sYXllcnkgPSBmdW5j
dGlvbiAocmV0LCBsYXllcnBhcmFtLCB4LCB5KQ0KCXsNCgkJdmFyIGxheWVyID0gdGhpcy5ydW50
aW1lLmdldExheWVyKGxheWVycGFyYW0pOw0KCQlyZXQuc2V0X2Zsb2F0KGxheWVyID8gbGF5ZXIu
Y2FudmFzVG9MYXllcih4LCB5LCBmYWxzZSkgOiAwKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBl
LmxheWVydG9jYW52YXN4ID0gZnVuY3Rpb24gKHJldCwgbGF5ZXJwYXJhbSwgeCwgeSkNCgl7DQoJ
CXZhciBsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllcihsYXllcnBhcmFtKTsNCgkJcmV0LnNl
dF9mbG9hdChsYXllciA/IGxheWVyLmxheWVyVG9DYW52YXMoeCwgeSwgdHJ1ZSkgOiAwKTsNCgl9
Ow0KCVN5c0V4cHMucHJvdG90eXBlLmxheWVydG9jYW52YXN5ID0gZnVuY3Rpb24gKHJldCwgbGF5
ZXJwYXJhbSwgeCwgeSkNCgl7DQoJCXZhciBsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllcihs
YXllcnBhcmFtKTsNCgkJcmV0LnNldF9mbG9hdChsYXllciA/IGxheWVyLmxheWVyVG9DYW52YXMo
eCwgeSwgZmFsc2UpIDogMCk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5zYXZlc3RhdGVqc29u
ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMucnVudGltZS5sYXN0
U2F2ZUpzb24pOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUuaW1hZ2VtZW1vcnl1c2FnZSA9IGZ1
bmN0aW9uIChyZXQpDQoJew0KCQlpZiAodGhpcy5ydW50aW1lLmdsd3JhcCkNCgkJCXJldC5zZXRf
ZmxvYXQoTWF0aC5yb3VuZCgxMDAgKiB0aGlzLnJ1bnRpbWUuZ2x3cmFwLmVzdGltYXRlVlJBTSgp
IC8gKDEwMjQgKiAxMDI0KSkgLyAxMDApOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0K
CX07DQoJU3lzRXhwcy5wcm90b3R5cGUucmVnZXhzZWFyY2ggPSBmdW5jdGlvbiAocmV0LCBzdHJf
LCByZWdleF8sIGZsYWdzXykNCgl7DQoJCXZhciByZWdleCA9IGdldFJlZ2V4KHJlZ2V4XywgZmxh
Z3NfKTsNCgkJcmV0LnNldF9pbnQoc3RyXyA/IHN0cl8uc2VhcmNoKHJlZ2V4KSA6IC0xKTsNCgl9
Ow0KCVN5c0V4cHMucHJvdG90eXBlLnJlZ2V4cmVwbGFjZSA9IGZ1bmN0aW9uIChyZXQsIHN0cl8s
IHJlZ2V4XywgZmxhZ3NfLCByZXBsYWNlXykNCgl7DQoJCXZhciByZWdleCA9IGdldFJlZ2V4KHJl
Z2V4XywgZmxhZ3NfKTsNCgkJcmV0LnNldF9zdHJpbmcoc3RyXyA/IHN0cl8ucmVwbGFjZShyZWdl
eCwgcmVwbGFjZV8pIDogIiIpOw0KCX07DQoJdmFyIHJlZ2V4TWF0Y2hlcyA9IFtdOw0KCXZhciBs
YXN0TWF0Y2hlc1N0ciA9ICIiOw0KCXZhciBsYXN0TWF0Y2hlc1JlZ2V4ID0gIiI7DQoJdmFyIGxh
c3RNYXRjaGVzRmxhZ3MgPSAiIjsNCglmdW5jdGlvbiB1cGRhdGVSZWdleE1hdGNoZXMoc3RyXywg
cmVnZXhfLCBmbGFnc18pDQoJew0KCQlpZiAoc3RyXyA9PT0gbGFzdE1hdGNoZXNTdHIgJiYgcmVn
ZXhfID09PSBsYXN0TWF0Y2hlc1JlZ2V4ICYmIGZsYWdzXyA9PT0gbGFzdE1hdGNoZXNGbGFncykN
CgkJCXJldHVybjsNCgkJdmFyIHJlZ2V4ID0gZ2V0UmVnZXgocmVnZXhfLCBmbGFnc18pOw0KCQly
ZWdleE1hdGNoZXMgPSBzdHJfLm1hdGNoKHJlZ2V4KTsNCgkJbGFzdE1hdGNoZXNTdHIgPSBzdHJf
Ow0KCQlsYXN0TWF0Y2hlc1JlZ2V4ID0gcmVnZXhfOw0KCQlsYXN0TWF0Y2hlc0ZsYWdzID0gZmxh
Z3NfOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUucmVnZXhtYXRjaGNvdW50ID0gZnVuY3Rpb24g
KHJldCwgc3RyXywgcmVnZXhfLCBmbGFnc18pDQoJew0KCQl2YXIgcmVnZXggPSBnZXRSZWdleChy
ZWdleF8sIGZsYWdzXyk7DQoJCXVwZGF0ZVJlZ2V4TWF0Y2hlcyhzdHJfLnRvU3RyaW5nKCksIHJl
Z2V4XywgZmxhZ3NfKTsNCgkJcmV0LnNldF9pbnQocmVnZXhNYXRjaGVzID8gcmVnZXhNYXRjaGVz
Lmxlbmd0aCA6IDApOw0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUucmVnZXhtYXRjaGF0ID0gZnVu
Y3Rpb24gKHJldCwgc3RyXywgcmVnZXhfLCBmbGFnc18sIGluZGV4XykNCgl7DQoJCWluZGV4XyA9
IE1hdGguZmxvb3IoaW5kZXhfKTsNCgkJdmFyIHJlZ2V4ID0gZ2V0UmVnZXgocmVnZXhfLCBmbGFn
c18pOw0KCQl1cGRhdGVSZWdleE1hdGNoZXMoc3RyXy50b1N0cmluZygpLCByZWdleF8sIGZsYWdz
Xyk7DQoJCWlmICghcmVnZXhNYXRjaGVzIHx8IGluZGV4XyA8IDAgfHwgaW5kZXhfID49IHJlZ2V4
TWF0Y2hlcy5sZW5ndGgpDQoJCQlyZXQuc2V0X3N0cmluZygiIik7DQoJCWVsc2UNCgkJCXJldC5z
ZXRfc3RyaW5nKHJlZ2V4TWF0Y2hlc1tpbmRleF9dKTsNCgl9Ow0KCVN5c0V4cHMucHJvdG90eXBl
LmluZmluaXR5ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQoSW5maW5pdHkp
Ow0KCX07DQoJU3lzRXhwcy5wcm90b3R5cGUuc2V0Yml0ID0gZnVuY3Rpb24gKHJldCwgbiwgYiwg
dikNCgl7DQoJCW4gPSBuIHwgMDsNCgkJYiA9IGIgfCAwOw0KCQl2ID0gKHYgIT09IDAgPyAxIDog
MCk7DQoJCXJldC5zZXRfaW50KChuICYgfigxIDw8IGIpKSB8ICh2IDw8IGIpKTsNCgl9Ow0KCVN5
c0V4cHMucHJvdG90eXBlLnRvZ2dsZWJpdCA9IGZ1bmN0aW9uIChyZXQsIG4sIGIpDQoJew0KCQlu
ID0gbiB8IDA7DQoJCWIgPSBiIHwgMDsNCgkJcmV0LnNldF9pbnQobiBeICgxIDw8IGIpKTsNCgl9
Ow0KCVN5c0V4cHMucHJvdG90eXBlLmdldGJpdCA9IGZ1bmN0aW9uIChyZXQsIG4sIGIpDQoJew0K
CQluID0gbiB8IDA7DQoJCWIgPSBiIHwgMDsNCgkJcmV0LnNldF9pbnQoKG4gJiAoMSA8PCBiKSkg
PyAxIDogMCk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5vcmlnaW5hbHdpbmRvd3dpZHRoID0g
ZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfaW50KHRoaXMucnVudGltZS5vcmlnaW5hbF93
aWR0aCk7DQoJfTsNCglTeXNFeHBzLnByb3RvdHlwZS5vcmlnaW5hbHdpbmRvd2hlaWdodCA9IGZ1
bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2ludCh0aGlzLnJ1bnRpbWUub3JpZ2luYWxfaGVp
Z2h0KTsNCgl9Ow0KCXN5c1Byb3RvLmV4cHMgPSBuZXcgU3lzRXhwcygpOw0KCXN5c1Byb3RvLnJ1
bldhaXRzID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBpLCBqLCBsZW4sIHcsIGssIHMsIHNzOw0K
CQl2YXIgZXZpbmZvID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVudFN0YWNrKCk7DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IHRoaXMud2FpdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJ
CXcgPSB0aGlzLndhaXRzW2ldOw0KCQkJaWYgKHcudGltZSA9PT0gLTEpCQkvLyBzaWduYWxsZWQg
d2FpdA0KCQkJew0KCQkJCWlmICghdy5zaWduYWxsZWQpDQoJCQkJCWNvbnRpbnVlOwkJLy8gbm90
IHlldCBzaWduYWxsZWQNCgkJCX0NCgkJCWVsc2UJCQkJCS8vIHRpbWVyIHdhaXQNCgkJCXsNCgkJ
CQlpZiAody50aW1lID4gdGhpcy5ydW50aW1lLmthaGFuVGltZS5zdW0pDQoJCQkJCWNvbnRpbnVl
OwkJLy8gdGltZXIgbm90IHlldCBleHBpcmVkDQoJCQl9DQoJCQlldmluZm8uY3VycmVudF9ldmVu
dCA9IHcuZXY7DQoJCQlldmluZm8uYWN0aW5kZXggPSB3LmFjdGluZGV4Ow0KCQkJZXZpbmZvLmNu
ZGluZGV4ID0gMDsNCgkJCWZvciAoayBpbiB3LnNvbHMpDQoJCQl7DQoJCQkJaWYgKHcuc29scy5o
YXNPd25Qcm9wZXJ0eShrKSkNCgkJCQl7DQoJCQkJCXMgPSB0aGlzLnJ1bnRpbWUudHlwZXNfYnlf
aW5kZXhbcGFyc2VJbnQoaywgMTApXS5nZXRDdXJyZW50U29sKCk7DQoJCQkJCXNzID0gdy5zb2xz
W2tdOw0KCQkJCQlzLnNlbGVjdF9hbGwgPSBzcy5zYTsNCgkJCQkJY3Iuc2hhbGxvd0Fzc2lnbkFy
cmF5KHMuaW5zdGFuY2VzLCBzcy5pbnN0cyk7DQoJCQkJCWZyZWVTb2xTdGF0ZU9iamVjdChzcyk7
DQoJCQkJfQ0KCQkJfQ0KCQkJdy5ldi5yZXN1bWVfYWN0aW9uc19hbmRfc3ViZXZlbnRzKCk7DQoJ
CQl0aGlzLnJ1bnRpbWUuY2xlYXJTb2wody5zb2xNb2RpZmllcnMpOw0KCQkJdy5kZWxldGVtZSA9
IHRydWU7DQoJCX0NCgkJZm9yIChpID0gMCwgaiA9IDAsIGxlbiA9IHRoaXMud2FpdHMubGVuZ3Ro
OyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXcgPSB0aGlzLndhaXRzW2ldOw0KCQkJdGhpcy53YWl0
c1tqXSA9IHc7DQoJCQlpZiAody5kZWxldGVtZSkNCgkJCQlmcmVlV2FpdE9iamVjdCh3KTsNCgkJ
CWVsc2UNCgkJCQlqKys7DQoJCX0NCgkJY3IudHJ1bmNhdGVBcnJheSh0aGlzLndhaXRzLCBqKTsN
Cgl9Ow0KfSgpKTsNCjsNCihmdW5jdGlvbiAoKSB7DQoJY3IuYWRkX2NvbW1vbl9hY2VzID0gZnVu
Y3Rpb24gKG0sIHBsdWdpblByb3RvKQ0KCXsNCgkJdmFyIHNpbmdsZWdsb2JhbF8gPSBtWzFdOw0K
CQl2YXIgcG9zaXRpb25fYWNlcyA9IG1bM107DQoJCXZhciBzaXplX2FjZXMgPSBtWzRdOw0KCQl2
YXIgYW5nbGVfYWNlcyA9IG1bNV07DQoJCXZhciBhcHBlYXJhbmNlX2FjZXMgPSBtWzZdOw0KCQl2
YXIgem9yZGVyX2FjZXMgPSBtWzddOw0KCQl2YXIgZWZmZWN0c19hY2VzID0gbVs4XTsNCgkJaWYg
KCFwbHVnaW5Qcm90by5jbmRzKQ0KCQkJcGx1Z2luUHJvdG8uY25kcyA9IHt9Ow0KCQlpZiAoIXBs
dWdpblByb3RvLmFjdHMpDQoJCQlwbHVnaW5Qcm90by5hY3RzID0ge307DQoJCWlmICghcGx1Z2lu
UHJvdG8uZXhwcykNCgkJCXBsdWdpblByb3RvLmV4cHMgPSB7fTsNCgkJdmFyIGNuZHMgPSBwbHVn
aW5Qcm90by5jbmRzOw0KCQl2YXIgYWN0cyA9IHBsdWdpblByb3RvLmFjdHM7DQoJCXZhciBleHBz
ID0gcGx1Z2luUHJvdG8uZXhwczsNCgkJaWYgKHBvc2l0aW9uX2FjZXMpDQoJCXsNCgkJCWNuZHMu
Q29tcGFyZVggPSBmdW5jdGlvbiAoY21wLCB4KQ0KCQkJew0KCQkJCXJldHVybiBjci5kb19jbXAo
dGhpcy54LCBjbXAsIHgpOw0KCQkJfTsNCgkJCWNuZHMuQ29tcGFyZVkgPSBmdW5jdGlvbiAoY21w
LCB5KQ0KCQkJew0KCQkJCXJldHVybiBjci5kb19jbXAodGhpcy55LCBjbXAsIHkpOw0KCQkJfTsN
CgkJCWNuZHMuSXNPblNjcmVlbiA9IGZ1bmN0aW9uICgpDQoJCQl7DQoJCQkJdmFyIGxheWVyID0g
dGhpcy5sYXllcjsNCgkJCQl0aGlzLnVwZGF0ZV9iYm94KCk7DQoJCQkJdmFyIGJib3ggPSB0aGlz
LmJib3g7DQoJCQkJcmV0dXJuICEoYmJveC5yaWdodCA8IGxheWVyLnZpZXdMZWZ0IHx8IGJib3gu
Ym90dG9tIDwgbGF5ZXIudmlld1RvcCB8fCBiYm94LmxlZnQgPiBsYXllci52aWV3UmlnaHQgfHwg
YmJveC50b3AgPiBsYXllci52aWV3Qm90dG9tKTsNCgkJCX07DQoJCQljbmRzLklzT3V0c2lkZUxh
eW91dCA9IGZ1bmN0aW9uICgpDQoJCQl7DQoJCQkJdGhpcy51cGRhdGVfYmJveCgpOw0KCQkJCXZh
ciBiYm94ID0gdGhpcy5iYm94Ow0KCQkJCXZhciBsYXlvdXQgPSB0aGlzLnJ1bnRpbWUucnVubmlu
Z19sYXlvdXQ7DQoJCQkJcmV0dXJuIChiYm94LnJpZ2h0IDwgMCB8fCBiYm94LmJvdHRvbSA8IDAg
fHwgYmJveC5sZWZ0ID4gbGF5b3V0LndpZHRoIHx8IGJib3gudG9wID4gbGF5b3V0LmhlaWdodCk7
DQoJCQl9Ow0KCQkJY25kcy5QaWNrRGlzdGFuY2UgPSBmdW5jdGlvbiAod2hpY2gsIHgsIHkpDQoJ
CQl7DQoJCQkJdmFyIHNvbCA9IHRoaXMuZ2V0Q3VycmVudFNvbCgpOw0KCQkJCXZhciBpbnN0YW5j
ZXMgPSBzb2wuZ2V0T2JqZWN0cygpOw0KCQkJCWlmICghaW5zdGFuY2VzLmxlbmd0aCkNCgkJCQkJ
cmV0dXJuIGZhbHNlOw0KCQkJCXZhciBpbnN0ID0gaW5zdGFuY2VzWzBdOw0KCQkJCXZhciBwaWNr
bWUgPSBpbnN0Ow0KCQkJCXZhciBkaXN0ID0gY3IuZGlzdGFuY2VUbyhpbnN0LngsIGluc3QueSwg
eCwgeSk7DQoJCQkJdmFyIGksIGxlbiwgZDsNCgkJCQlmb3IgKGkgPSAxLCBsZW4gPSBpbnN0YW5j
ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJCQlpbnN0ID0gaW5zdGFuY2VzW2ld
Ow0KCQkJCQlkID0gY3IuZGlzdGFuY2VUbyhpbnN0LngsIGluc3QueSwgeCwgeSk7DQoJCQkJCWlm
ICgod2hpY2ggPT09IDAgJiYgZCA8IGRpc3QpIHx8ICh3aGljaCA9PT0gMSAmJiBkID4gZGlzdCkp
DQoJCQkJCXsNCgkJCQkJCWRpc3QgPSBkOw0KCQkJCQkJcGlja21lID0gaW5zdDsNCgkJCQkJfQ0K
CQkJCX0NCgkJCQlzb2wucGlja19vbmUocGlja21lKTsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX07
DQoJCQlhY3RzLlNldFggPSBmdW5jdGlvbiAoeCkNCgkJCXsNCgkJCQlpZiAodGhpcy54ICE9PSB4
KQ0KCQkJCXsNCgkJCQkJdGhpcy54ID0geDsNCgkJCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7
DQoJCQkJfQ0KCQkJfTsNCgkJCWFjdHMuU2V0WSA9IGZ1bmN0aW9uICh5KQ0KCQkJew0KCQkJCWlm
ICh0aGlzLnkgIT09IHkpDQoJCQkJew0KCQkJCQl0aGlzLnkgPSB5Ow0KCQkJCQl0aGlzLnNldF9i
Ym94X2NoYW5nZWQoKTsNCgkJCQl9DQoJCQl9Ow0KCQkJYWN0cy5TZXRQb3MgPSBmdW5jdGlvbiAo
eCwgeSkNCgkJCXsNCgkJCQlpZiAodGhpcy54ICE9PSB4IHx8IHRoaXMueSAhPT0geSkNCgkJCQl7
DQoJCQkJCXRoaXMueCA9IHg7DQoJCQkJCXRoaXMueSA9IHk7DQoJCQkJCXRoaXMuc2V0X2Jib3hf
Y2hhbmdlZCgpOw0KCQkJCX0NCgkJCX07DQoJCQlhY3RzLlNldFBvc1RvT2JqZWN0ID0gZnVuY3Rp
b24gKG9iaiwgaW1ncHQpDQoJCQl7DQoJCQkJdmFyIGluc3QgPSBvYmouZ2V0UGFpcmVkSW5zdGFu
Y2UodGhpcyk7DQoJCQkJaWYgKCFpbnN0KQ0KCQkJCQlyZXR1cm47DQoJCQkJdmFyIG5ld3gsIG5l
d3k7DQoJCQkJaWYgKGluc3QuZ2V0SW1hZ2VQb2ludCkNCgkJCQl7DQoJCQkJCW5ld3ggPSBpbnN0
LmdldEltYWdlUG9pbnQoaW1ncHQsIHRydWUpOw0KCQkJCQluZXd5ID0gaW5zdC5nZXRJbWFnZVBv
aW50KGltZ3B0LCBmYWxzZSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCW5ld3ggPSBp
bnN0Lng7DQoJCQkJCW5ld3kgPSBpbnN0Lnk7DQoJCQkJfQ0KCQkJCWlmICh0aGlzLnggIT09IG5l
d3ggfHwgdGhpcy55ICE9PSBuZXd5KQ0KCQkJCXsNCgkJCQkJdGhpcy54ID0gbmV3eDsNCgkJCQkJ
dGhpcy55ID0gbmV3eTsNCgkJCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQkJfQ0KCQkJ
fTsNCgkJCWFjdHMuTW92ZUZvcndhcmQgPSBmdW5jdGlvbiAoZGlzdCkNCgkJCXsNCgkJCQlpZiAo
ZGlzdCAhPT0gMCkNCgkJCQl7DQoJCQkJCXRoaXMueCArPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAq
IGRpc3Q7DQoJCQkJCXRoaXMueSArPSBNYXRoLnNpbih0aGlzLmFuZ2xlKSAqIGRpc3Q7DQoJCQkJ
CXRoaXMuc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCX0NCgkJCX07DQoJCQlhY3RzLk1vdmVBdEFu
Z2xlID0gZnVuY3Rpb24gKGEsIGRpc3QpDQoJCQl7DQoJCQkJaWYgKGRpc3QgIT09IDApDQoJCQkJ
ew0KCQkJCQl0aGlzLnggKz0gTWF0aC5jb3MoY3IudG9fcmFkaWFucyhhKSkgKiBkaXN0Ow0KCQkJ
CQl0aGlzLnkgKz0gTWF0aC5zaW4oY3IudG9fcmFkaWFucyhhKSkgKiBkaXN0Ow0KCQkJCQl0aGlz
LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQl9DQoJCQl9Ow0KCQkJZXhwcy5YID0gZnVuY3Rpb24g
KHJldCkNCgkJCXsNCgkJCQlyZXQuc2V0X2Zsb2F0KHRoaXMueCk7DQoJCQl9Ow0KCQkJZXhwcy5Z
ID0gZnVuY3Rpb24gKHJldCkNCgkJCXsNCgkJCQlyZXQuc2V0X2Zsb2F0KHRoaXMueSk7DQoJCQl9
Ow0KCQkJZXhwcy5kdCA9IGZ1bmN0aW9uIChyZXQpDQoJCQl7DQoJCQkJcmV0LnNldF9mbG9hdCh0
aGlzLnJ1bnRpbWUuZ2V0RHQodGhpcykpOw0KCQkJfTsNCgkJfQ0KCQlpZiAoc2l6ZV9hY2VzKQ0K
CQl7DQoJCQljbmRzLkNvbXBhcmVXaWR0aCA9IGZ1bmN0aW9uIChjbXAsIHcpDQoJCQl7DQoJCQkJ
cmV0dXJuIGNyLmRvX2NtcCh0aGlzLndpZHRoLCBjbXAsIHcpOw0KCQkJfTsNCgkJCWNuZHMuQ29t
cGFyZUhlaWdodCA9IGZ1bmN0aW9uIChjbXAsIGgpDQoJCQl7DQoJCQkJcmV0dXJuIGNyLmRvX2Nt
cCh0aGlzLmhlaWdodCwgY21wLCBoKTsNCgkJCX07DQoJCQlhY3RzLlNldFdpZHRoID0gZnVuY3Rp
b24gKHcpDQoJCQl7DQoJCQkJaWYgKHRoaXMud2lkdGggIT09IHcpDQoJCQkJew0KCQkJCQl0aGlz
LndpZHRoID0gdzsNCgkJCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQkJfQ0KCQkJfTsN
CgkJCWFjdHMuU2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGgpDQoJCQl7DQoJCQkJaWYgKHRoaXMuaGVp
Z2h0ICE9PSBoKQ0KCQkJCXsNCgkJCQkJdGhpcy5oZWlnaHQgPSBoOw0KCQkJCQl0aGlzLnNldF9i
Ym94X2NoYW5nZWQoKTsNCgkJCQl9DQoJCQl9Ow0KCQkJYWN0cy5TZXRTaXplID0gZnVuY3Rpb24g
KHcsIGgpDQoJCQl7DQoJCQkJaWYgKHRoaXMud2lkdGggIT09IHcgfHwgdGhpcy5oZWlnaHQgIT09
IGgpDQoJCQkJew0KCQkJCQl0aGlzLndpZHRoID0gdzsNCgkJCQkJdGhpcy5oZWlnaHQgPSBoOw0K
CQkJCQl0aGlzLnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQl9DQoJCQl9Ow0KCQkJZXhwcy5XaWR0
aCA9IGZ1bmN0aW9uIChyZXQpDQoJCQl7DQoJCQkJcmV0LnNldF9mbG9hdCh0aGlzLndpZHRoKTsN
CgkJCX07DQoJCQlleHBzLkhlaWdodCA9IGZ1bmN0aW9uIChyZXQpDQoJCQl7DQoJCQkJcmV0LnNl
dF9mbG9hdCh0aGlzLmhlaWdodCk7DQoJCQl9Ow0KCQkJZXhwcy5CQm94TGVmdCA9IGZ1bmN0aW9u
IChyZXQpDQoJCQl7DQoJCQkJdGhpcy51cGRhdGVfYmJveCgpOw0KCQkJCXJldC5zZXRfZmxvYXQo
dGhpcy5iYm94LmxlZnQpOw0KCQkJfTsNCgkJCWV4cHMuQkJveFRvcCA9IGZ1bmN0aW9uIChyZXQp
DQoJCQl7DQoJCQkJdGhpcy51cGRhdGVfYmJveCgpOw0KCQkJCXJldC5zZXRfZmxvYXQodGhpcy5i
Ym94LnRvcCk7DQoJCQl9Ow0KCQkJZXhwcy5CQm94UmlnaHQgPSBmdW5jdGlvbiAocmV0KQ0KCQkJ
ew0KCQkJCXRoaXMudXBkYXRlX2Jib3goKTsNCgkJCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYmJveC5y
aWdodCk7DQoJCQl9Ow0KCQkJZXhwcy5CQm94Qm90dG9tID0gZnVuY3Rpb24gKHJldCkNCgkJCXsN
CgkJCQl0aGlzLnVwZGF0ZV9iYm94KCk7DQoJCQkJcmV0LnNldF9mbG9hdCh0aGlzLmJib3guYm90
dG9tKTsNCgkJCX07DQoJCX0NCgkJaWYgKGFuZ2xlX2FjZXMpDQoJCXsNCgkJCWNuZHMuQW5nbGVX
aXRoaW4gPSBmdW5jdGlvbiAod2l0aGluLCBhKQ0KCQkJew0KCQkJCXJldHVybiBjci5hbmdsZURp
ZmYodGhpcy5hbmdsZSwgY3IudG9fcmFkaWFucyhhKSkgPD0gY3IudG9fcmFkaWFucyh3aXRoaW4p
Ow0KCQkJfTsNCgkJCWNuZHMuSXNDbG9ja3dpc2VGcm9tID0gZnVuY3Rpb24gKGEpDQoJCQl7DQoJ
CQkJcmV0dXJuIGNyLmFuZ2xlQ2xvY2t3aXNlKHRoaXMuYW5nbGUsIGNyLnRvX3JhZGlhbnMoYSkp
Ow0KCQkJfTsNCgkJCWNuZHMuSXNCZXR3ZWVuQW5nbGVzID0gZnVuY3Rpb24gKGEsIGIpDQoJCQl7
DQoJCQkJdmFyIGxvd2VyID0gY3IudG9fY2xhbXBlZF9yYWRpYW5zKGEpOw0KCQkJCXZhciB1cHBl
ciA9IGNyLnRvX2NsYW1wZWRfcmFkaWFucyhiKTsNCgkJCQl2YXIgYW5nbGUgPSBjci5jbGFtcF9h
bmdsZSh0aGlzLmFuZ2xlKTsNCgkJCQl2YXIgb2J0dXNlID0gKCFjci5hbmdsZUNsb2Nrd2lzZSh1
cHBlciwgbG93ZXIpKTsNCgkJCQlpZiAob2J0dXNlKQ0KCQkJCQlyZXR1cm4gISghY3IuYW5nbGVD
bG9ja3dpc2UoYW5nbGUsIGxvd2VyKSAmJiBjci5hbmdsZUNsb2Nrd2lzZShhbmdsZSwgdXBwZXIp
KTsNCgkJCQllbHNlDQoJCQkJCXJldHVybiBjci5hbmdsZUNsb2Nrd2lzZShhbmdsZSwgbG93ZXIp
ICYmICFjci5hbmdsZUNsb2Nrd2lzZShhbmdsZSwgdXBwZXIpOw0KCQkJfTsNCgkJCWFjdHMuU2V0
QW5nbGUgPSBmdW5jdGlvbiAoYSkNCgkJCXsNCgkJCQl2YXIgbmV3YW5nbGUgPSBjci50b19yYWRp
YW5zKGNyLmNsYW1wX2FuZ2xlX2RlZ3JlZXMoYSkpOw0KCQkJCWlmIChpc05hTihuZXdhbmdsZSkp
DQoJCQkJCXJldHVybjsNCgkJCQlpZiAodGhpcy5hbmdsZSAhPT0gbmV3YW5nbGUpDQoJCQkJew0K
CQkJCQl0aGlzLmFuZ2xlID0gbmV3YW5nbGU7DQoJCQkJCXRoaXMuc2V0X2Jib3hfY2hhbmdlZCgp
Ow0KCQkJCX0NCgkJCX07DQoJCQlhY3RzLlJvdGF0ZUNsb2Nrd2lzZSA9IGZ1bmN0aW9uIChhKQ0K
CQkJew0KCQkJCWlmIChhICE9PSAwICYmICFpc05hTihhKSkNCgkJCQl7DQoJCQkJCXRoaXMuYW5n
bGUgKz0gY3IudG9fcmFkaWFucyhhKTsNCgkJCQkJdGhpcy5hbmdsZSA9IGNyLmNsYW1wX2FuZ2xl
KHRoaXMuYW5nbGUpOw0KCQkJCQl0aGlzLnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQl9DQoJCQl9
Ow0KCQkJYWN0cy5Sb3RhdGVDb3VudGVyY2xvY2t3aXNlID0gZnVuY3Rpb24gKGEpDQoJCQl7DQoJ
CQkJaWYgKGEgIT09IDAgJiYgIWlzTmFOKGEpKQ0KCQkJCXsNCgkJCQkJdGhpcy5hbmdsZSAtPSBj
ci50b19yYWRpYW5zKGEpOw0KCQkJCQl0aGlzLmFuZ2xlID0gY3IuY2xhbXBfYW5nbGUodGhpcy5h
bmdsZSk7DQoJCQkJCXRoaXMuc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCX0NCgkJCX07DQoJCQlh
Y3RzLlJvdGF0ZVRvd2FyZEFuZ2xlID0gZnVuY3Rpb24gKGFtdCwgdGFyZ2V0KQ0KCQkJew0KCQkJ
CXZhciBuZXdhbmdsZSA9IGNyLmFuZ2xlUm90YXRlKHRoaXMuYW5nbGUsIGNyLnRvX3JhZGlhbnMo
dGFyZ2V0KSwgY3IudG9fcmFkaWFucyhhbXQpKTsNCgkJCQlpZiAoaXNOYU4obmV3YW5nbGUpKQ0K
CQkJCQlyZXR1cm47DQoJCQkJaWYgKHRoaXMuYW5nbGUgIT09IG5ld2FuZ2xlKQ0KCQkJCXsNCgkJ
CQkJdGhpcy5hbmdsZSA9IG5ld2FuZ2xlOw0KCQkJCQl0aGlzLnNldF9iYm94X2NoYW5nZWQoKTsN
CgkJCQl9DQoJCQl9Ow0KCQkJYWN0cy5Sb3RhdGVUb3dhcmRQb3NpdGlvbiA9IGZ1bmN0aW9uIChh
bXQsIHgsIHkpDQoJCQl7DQoJCQkJdmFyIGR4ID0geCAtIHRoaXMueDsNCgkJCQl2YXIgZHkgPSB5
IC0gdGhpcy55Ow0KCQkJCXZhciB0YXJnZXQgPSBNYXRoLmF0YW4yKGR5LCBkeCk7DQoJCQkJdmFy
IG5ld2FuZ2xlID0gY3IuYW5nbGVSb3RhdGUodGhpcy5hbmdsZSwgdGFyZ2V0LCBjci50b19yYWRp
YW5zKGFtdCkpOw0KCQkJCWlmIChpc05hTihuZXdhbmdsZSkpDQoJCQkJCXJldHVybjsNCgkJCQlp
ZiAodGhpcy5hbmdsZSAhPT0gbmV3YW5nbGUpDQoJCQkJew0KCQkJCQl0aGlzLmFuZ2xlID0gbmV3
YW5nbGU7DQoJCQkJCXRoaXMuc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCX0NCgkJCX07DQoJCQlh
Y3RzLlNldFRvd2FyZFBvc2l0aW9uID0gZnVuY3Rpb24gKHgsIHkpDQoJCQl7DQoJCQkJdmFyIGR4
ID0geCAtIHRoaXMueDsNCgkJCQl2YXIgZHkgPSB5IC0gdGhpcy55Ow0KCQkJCXZhciBuZXdhbmds
ZSA9IE1hdGguYXRhbjIoZHksIGR4KTsNCgkJCQlpZiAoaXNOYU4obmV3YW5nbGUpKQ0KCQkJCQly
ZXR1cm47DQoJCQkJaWYgKHRoaXMuYW5nbGUgIT09IG5ld2FuZ2xlKQ0KCQkJCXsNCgkJCQkJdGhp
cy5hbmdsZSA9IG5ld2FuZ2xlOw0KCQkJCQl0aGlzLnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQl9
DQoJCQl9Ow0KCQkJZXhwcy5BbmdsZSA9IGZ1bmN0aW9uIChyZXQpDQoJCQl7DQoJCQkJcmV0LnNl
dF9mbG9hdChjci50b19jbGFtcGVkX2RlZ3JlZXModGhpcy5hbmdsZSkpOw0KCQkJfTsNCgkJfQ0K
CQlpZiAoIXNpbmdsZWdsb2JhbF8pDQoJCXsNCgkJCWNuZHMuQ29tcGFyZUluc3RhbmNlVmFyID0g
ZnVuY3Rpb24gKGl2LCBjbXAsIHZhbCkNCgkJCXsNCgkJCQlyZXR1cm4gY3IuZG9fY21wKHRoaXMu
aW5zdGFuY2VfdmFyc1tpdl0sIGNtcCwgdmFsKTsNCgkJCX07DQoJCQljbmRzLklzQm9vbEluc3Rh
bmNlVmFyU2V0ID0gZnVuY3Rpb24gKGl2KQ0KCQkJew0KCQkJCXJldHVybiB0aGlzLmluc3RhbmNl
X3ZhcnNbaXZdOw0KCQkJfTsNCgkJCWNuZHMuUGlja0luc3RWYXJIaUxvdyA9IGZ1bmN0aW9uICh3
aGljaCwgaXYpDQoJCQl7DQoJCQkJdmFyIHNvbCA9IHRoaXMuZ2V0Q3VycmVudFNvbCgpOw0KCQkJ
CXZhciBpbnN0YW5jZXMgPSBzb2wuZ2V0T2JqZWN0cygpOw0KCQkJCWlmICghaW5zdGFuY2VzLmxl
bmd0aCkNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCXZhciBpbnN0ID0gaW5zdGFuY2VzWzBdOw0K
CQkJCXZhciBwaWNrbWUgPSBpbnN0Ow0KCQkJCXZhciB2YWwgPSBpbnN0Lmluc3RhbmNlX3ZhcnNb
aXZdOw0KCQkJCXZhciBpLCBsZW4sIHY7DQoJCQkJZm9yIChpID0gMSwgbGVuID0gaW5zdGFuY2Vz
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCXsNCgkJCQkJaW5zdCA9IGluc3RhbmNlc1tpXTsN
CgkJCQkJdiA9IGluc3QuaW5zdGFuY2VfdmFyc1tpdl07DQoJCQkJCWlmICgod2hpY2ggPT09IDAg
JiYgdiA8IHZhbCkgfHwgKHdoaWNoID09PSAxICYmIHYgPiB2YWwpKQ0KCQkJCQl7DQoJCQkJCQl2
YWwgPSB2Ow0KCQkJCQkJcGlja21lID0gaW5zdDsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlzb2wucGlj
a19vbmUocGlja21lKTsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX07DQoJCQljbmRzLlBpY2tCeVVJ
RCA9IGZ1bmN0aW9uICh1KQ0KCQkJew0KCQkJCXZhciBpLCBsZW4sIGosIGluc3QsIGZhbWlsaWVz
LCBpbnN0YW5jZXMsIHNvbDsNCgkJCQl2YXIgY25kID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRD
b25kaXRpb24oKTsNCgkJCQlpZiAoY25kLmludmVydGVkKQ0KCQkJCXsNCgkJCQkJc29sID0gdGhp
cy5nZXRDdXJyZW50U29sKCk7DQoJCQkJCWlmIChzb2wuc2VsZWN0X2FsbCkNCgkJCQkJew0KCQkJ
CQkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCQkJCWNyLmNsZWFyQXJyYXkoc29sLmluc3Rh
bmNlcyk7DQoJCQkJCQljci5jbGVhckFycmF5KHNvbC5lbHNlX2luc3RhbmNlcyk7DQoJCQkJCQlp
bnN0YW5jZXMgPSB0aGlzLmluc3RhbmNlczsNCgkJCQkJCWZvciAoaSA9IDAsIGxlbiA9IGluc3Rh
bmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQkJCXsNCgkJCQkJCQlpbnN0ID0gaW5zdGFu
Y2VzW2ldOw0KCQkJCQkJCWlmIChpbnN0LnVpZCA9PT0gdSkNCgkJCQkJCQkJc29sLmVsc2VfaW5z
dGFuY2VzLnB1c2goaW5zdCk7DQoJCQkJCQkJZWxzZQ0KCQkJCQkJCQlzb2wuaW5zdGFuY2VzLnB1
c2goaW5zdCk7DQoJCQkJCQl9DQoJCQkJCQl0aGlzLmFwcGx5U29sVG9Db250YWluZXIoKTsNCgkJ
CQkJCXJldHVybiAhIXNvbC5pbnN0YW5jZXMubGVuZ3RoOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJ
CQkJew0KCQkJCQkJZm9yIChpID0gMCwgaiA9IDAsIGxlbiA9IHNvbC5pbnN0YW5jZXMubGVuZ3Ro
OyBpIDwgbGVuOyBpKyspDQoJCQkJCQl7DQoJCQkJCQkJaW5zdCA9IHNvbC5pbnN0YW5jZXNbaV07
DQoJCQkJCQkJc29sLmluc3RhbmNlc1tqXSA9IGluc3Q7DQoJCQkJCQkJaWYgKGluc3QudWlkID09
PSB1KQ0KCQkJCQkJCXsNCgkJCQkJCQkJc29sLmVsc2VfaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJ
CQkJCQkJfQ0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJaisrOw0KCQkJCQkJfQ0KCQkJCQkJY3IudHJ1
bmNhdGVBcnJheShzb2wuaW5zdGFuY2VzLCBqKTsNCgkJCQkJCXRoaXMuYXBwbHlTb2xUb0NvbnRh
aW5lcigpOw0KCQkJCQkJcmV0dXJuICEhc29sLmluc3RhbmNlcy5sZW5ndGg7DQoJCQkJCX0NCgkJ
CQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJaW5zdCA9IHRoaXMucnVudGltZS5nZXRPYmplY3RC
eVVJRCh1KTsNCgkJCQkJaWYgKCFpbnN0KQ0KCQkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCQlzb2wg
PSB0aGlzLmdldEN1cnJlbnRTb2woKTsNCgkJCQkJaWYgKCFzb2wuc2VsZWN0X2FsbCAmJiBzb2wu
aW5zdGFuY2VzLmluZGV4T2YoaW5zdCkgPT09IC0xKQ0KCQkJCQkJcmV0dXJuIGZhbHNlOwkJLy8g
bm90IHBpY2tlZA0KCQkJCQlpZiAodGhpcy5pc19mYW1pbHkpDQoJCQkJCXsNCgkJCQkJCWZhbWls
aWVzID0gaW5zdC50eXBlLmZhbWlsaWVzOw0KCQkJCQkJZm9yIChpID0gMCwgbGVuID0gZmFtaWxp
ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJCQl7DQoJCQkJCQkJaWYgKGZhbWlsaWVzW2ld
ID09PSB0aGlzKQ0KCQkJCQkJCXsNCgkJCQkJCQkJc29sLnBpY2tfb25lKGluc3QpOw0KCQkJCQkJ
CQl0aGlzLmFwcGx5U29sVG9Db250YWluZXIoKTsNCgkJCQkJCQkJcmV0dXJuIHRydWU7DQoJCQkJ
CQkJfQ0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWVsc2UgaWYgKGluc3QudHlwZSA9PT0gdGhpcykN
CgkJCQkJew0KCQkJCQkJc29sLnBpY2tfb25lKGluc3QpOw0KCQkJCQkJdGhpcy5hcHBseVNvbFRv
Q29udGFpbmVyKCk7DQoJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJfQ0KCQkJCQlyZXR1cm4gZmFs
c2U7DQoJCQkJfQ0KCQkJfTsNCgkJCWNuZHMuT25DcmVhdGVkID0gZnVuY3Rpb24gKCkNCgkJCXsN
CgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX07DQoJCQljbmRzLk9uRGVzdHJveWVkID0gZnVuY3Rpb24g
KCkNCgkJCXsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX07DQoJCQlhY3RzLlNldEluc3RhbmNlVmFy
ID0gZnVuY3Rpb24gKGl2LCB2YWwpDQoJCQl7DQoJCQkJdmFyIG15aW5zdHZhcnMgPSB0aGlzLmlu
c3RhbmNlX3ZhcnM7DQoJCQkJaWYgKGNyLmlzX251bWJlcihteWluc3R2YXJzW2l2XSkpDQoJCQkJ
ew0KCQkJCQlpZiAoY3IuaXNfbnVtYmVyKHZhbCkpDQoJCQkJCQlteWluc3R2YXJzW2l2XSA9IHZh
bDsNCgkJCQkJZWxzZQ0KCQkJCQkJbXlpbnN0dmFyc1tpdl0gPSBwYXJzZUZsb2F0KHZhbCk7DQoJ
CQkJfQ0KCQkJCWVsc2UgaWYgKGNyLmlzX3N0cmluZyhteWluc3R2YXJzW2l2XSkpDQoJCQkJew0K
CQkJCQlpZiAoY3IuaXNfc3RyaW5nKHZhbCkpDQoJCQkJCQlteWluc3R2YXJzW2l2XSA9IHZhbDsN
CgkJCQkJZWxzZQ0KCQkJCQkJbXlpbnN0dmFyc1tpdl0gPSB2YWwudG9TdHJpbmcoKTsNCgkJCQl9
DQoJCQkJZWxzZQ0KOw0KCQkJfTsNCgkJCWFjdHMuQWRkSW5zdGFuY2VWYXIgPSBmdW5jdGlvbiAo
aXYsIHZhbCkNCgkJCXsNCgkJCQl2YXIgbXlpbnN0dmFycyA9IHRoaXMuaW5zdGFuY2VfdmFyczsN
CgkJCQlpZiAoY3IuaXNfbnVtYmVyKG15aW5zdHZhcnNbaXZdKSkNCgkJCQl7DQoJCQkJCWlmIChj
ci5pc19udW1iZXIodmFsKSkNCgkJCQkJCW15aW5zdHZhcnNbaXZdICs9IHZhbDsNCgkJCQkJZWxz
ZQ0KCQkJCQkJbXlpbnN0dmFyc1tpdl0gKz0gcGFyc2VGbG9hdCh2YWwpOw0KCQkJCX0NCgkJCQll
bHNlIGlmIChjci5pc19zdHJpbmcobXlpbnN0dmFyc1tpdl0pKQ0KCQkJCXsNCgkJCQkJaWYgKGNy
LmlzX3N0cmluZyh2YWwpKQ0KCQkJCQkJbXlpbnN0dmFyc1tpdl0gKz0gdmFsOw0KCQkJCQllbHNl
DQoJCQkJCQlteWluc3R2YXJzW2l2XSArPSB2YWwudG9TdHJpbmcoKTsNCgkJCQl9DQoJCQkJZWxz
ZQ0KOw0KCQkJfTsNCgkJCWFjdHMuU3ViSW5zdGFuY2VWYXIgPSBmdW5jdGlvbiAoaXYsIHZhbCkN
CgkJCXsNCgkJCQl2YXIgbXlpbnN0dmFycyA9IHRoaXMuaW5zdGFuY2VfdmFyczsNCgkJCQlpZiAo
Y3IuaXNfbnVtYmVyKG15aW5zdHZhcnNbaXZdKSkNCgkJCQl7DQoJCQkJCWlmIChjci5pc19udW1i
ZXIodmFsKSkNCgkJCQkJCW15aW5zdHZhcnNbaXZdIC09IHZhbDsNCgkJCQkJZWxzZQ0KCQkJCQkJ
bXlpbnN0dmFyc1tpdl0gLT0gcGFyc2VGbG9hdCh2YWwpOw0KCQkJCX0NCgkJCQllbHNlDQo7DQoJ
CQl9Ow0KCQkJYWN0cy5TZXRCb29sSW5zdGFuY2VWYXIgPSBmdW5jdGlvbiAoaXYsIHZhbCkNCgkJ
CXsNCgkJCQl0aGlzLmluc3RhbmNlX3ZhcnNbaXZdID0gdmFsID8gMSA6IDA7DQoJCQl9Ow0KCQkJ
YWN0cy5Ub2dnbGVCb29sSW5zdGFuY2VWYXIgPSBmdW5jdGlvbiAoaXYpDQoJCQl7DQoJCQkJdGhp
cy5pbnN0YW5jZV92YXJzW2l2XSA9IDEgLSB0aGlzLmluc3RhbmNlX3ZhcnNbaXZdOw0KCQkJfTsN
CgkJCWFjdHMuRGVzdHJveSA9IGZ1bmN0aW9uICgpDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLkRl
c3Ryb3lJbnN0YW5jZSh0aGlzKTsNCgkJCX07DQoJCQlpZiAoIWFjdHMuTG9hZEZyb21Kc29uU3Ry
aW5nKQ0KCQkJew0KCQkJCWFjdHMuTG9hZEZyb21Kc29uU3RyaW5nID0gZnVuY3Rpb24gKHN0cl8p
DQoJCQkJew0KCQkJCQl2YXIgbywgaSwgbGVuLCBiaW5zdDsNCgkJCQkJdHJ5IHsNCgkJCQkJCW8g
PSBKU09OLnBhcnNlKHN0cl8pOw0KCQkJCQl9DQoJCQkJCWNhdGNoIChlKSB7DQoJCQkJCQlyZXR1
cm47DQoJCQkJCX0NCgkJCQkJdGhpcy5ydW50aW1lLmxvYWRJbnN0YW5jZUZyb21KU09OKHRoaXMs
IG8sIHRydWUpOw0KCQkJCQlpZiAodGhpcy5hZnRlckxvYWQpDQoJCQkJCQl0aGlzLmFmdGVyTG9h
ZCgpOw0KCQkJCQlpZiAodGhpcy5iZWhhdmlvcl9pbnN0cykNCgkJCQkJew0KCQkJCQkJZm9yIChp
ID0gMCwgbGVuID0gdGhpcy5iZWhhdmlvcl9pbnN0cy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJ
CQkJCXsNCgkJCQkJCQliaW5zdCA9IHRoaXMuYmVoYXZpb3JfaW5zdHNbaV07DQoJCQkJCQkJaWYg
KGJpbnN0LmFmdGVyTG9hZCkNCgkJCQkJCQkJYmluc3QuYWZ0ZXJMb2FkKCk7DQoJCQkJCQl9DQoJ
CQkJCX0NCgkJCQl9Ow0KCQkJfQ0KCQkJZXhwcy5Db3VudCA9IGZ1bmN0aW9uIChyZXQpDQoJCQl7
DQoJCQkJdmFyIGNvdW50ID0gcmV0Lm9iamVjdF9jbGFzcy5pbnN0YW5jZXMubGVuZ3RoOw0KCQkJ
CXZhciBpLCBsZW4sIGluc3Q7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5ydW50aW1lLmNy
ZWF0ZVJvdy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCWluc3QgPSB0aGlzLnJ1
bnRpbWUuY3JlYXRlUm93W2ldOw0KCQkJCQlpZiAocmV0Lm9iamVjdF9jbGFzcy5pc19mYW1pbHkp
DQoJCQkJCXsNCgkJCQkJCWlmIChpbnN0LnR5cGUuZmFtaWxpZXMuaW5kZXhPZihyZXQub2JqZWN0
X2NsYXNzKSA+PSAwKQ0KCQkJCQkJCWNvdW50Kys7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7
DQoJCQkJCQlpZiAoaW5zdC50eXBlID09PSByZXQub2JqZWN0X2NsYXNzKQ0KCQkJCQkJCWNvdW50
Kys7DQoJCQkJCX0NCgkJCQl9DQoJCQkJcmV0LnNldF9pbnQoY291bnQpOw0KCQkJfTsNCgkJCWV4
cHMuUGlja2VkQ291bnQgPSBmdW5jdGlvbiAocmV0KQ0KCQkJew0KCQkJCXJldC5zZXRfaW50KHJl
dC5vYmplY3RfY2xhc3MuZ2V0Q3VycmVudFNvbCgpLmdldE9iamVjdHMoKS5sZW5ndGgpOw0KCQkJ
fTsNCgkJCWV4cHMuVUlEID0gZnVuY3Rpb24gKHJldCkNCgkJCXsNCgkJCQlyZXQuc2V0X2ludCh0
aGlzLnVpZCk7DQoJCQl9Ow0KCQkJZXhwcy5JSUQgPSBmdW5jdGlvbiAocmV0KQ0KCQkJew0KCQkJ
CXJldC5zZXRfaW50KHRoaXMuZ2V0X2lpZCgpKTsNCgkJCX07DQoJCQlpZiAoIWV4cHMuQXNKU09O
KQ0KCQkJew0KCQkJCWV4cHMuQXNKU09OID0gZnVuY3Rpb24gKHJldCkNCgkJCQl7DQoJCQkJCXJl
dC5zZXRfc3RyaW5nKEpTT04uc3RyaW5naWZ5KHRoaXMucnVudGltZS5zYXZlSW5zdGFuY2VUb0pT
T04odGhpcywgdHJ1ZSkpKTsNCgkJCQl9Ow0KCQkJfQ0KCQl9DQoJCWlmIChhcHBlYXJhbmNlX2Fj
ZXMpDQoJCXsNCgkJCWNuZHMuSXNWaXNpYmxlID0gZnVuY3Rpb24gKCkNCgkJCXsNCgkJCQlyZXR1
cm4gdGhpcy52aXNpYmxlOw0KCQkJfTsNCgkJCWFjdHMuU2V0VmlzaWJsZSA9IGZ1bmN0aW9uICh2
KQ0KCQkJew0KCQkJCWlmICghdiAhPT0gIXRoaXMudmlzaWJsZSkNCgkJCQl7DQoJCQkJCXRoaXMu
dmlzaWJsZSA9ICEhdjsNCgkJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCQkJfQ0K
CQkJfTsNCgkJCWNuZHMuQ29tcGFyZU9wYWNpdHkgPSBmdW5jdGlvbiAoY21wLCB4KQ0KCQkJew0K
CQkJCXJldHVybiBjci5kb19jbXAoY3Iucm91bmQ2ZHAodGhpcy5vcGFjaXR5ICogMTAwKSwgY21w
LCB4KTsNCgkJCX07DQoJCQlhY3RzLlNldE9wYWNpdHkgPSBmdW5jdGlvbiAoeCkNCgkJCXsNCgkJ
CQl2YXIgbmV3X29wYWNpdHkgPSB4IC8gMTAwLjA7DQoJCQkJaWYgKG5ld19vcGFjaXR5IDwgMCkN
CgkJCQkJbmV3X29wYWNpdHkgPSAwOw0KCQkJCWVsc2UgaWYgKG5ld19vcGFjaXR5ID4gMSkNCgkJ
CQkJbmV3X29wYWNpdHkgPSAxOw0KCQkJCWlmIChuZXdfb3BhY2l0eSAhPT0gdGhpcy5vcGFjaXR5
KQ0KCQkJCXsNCgkJCQkJdGhpcy5vcGFjaXR5ID0gbmV3X29wYWNpdHk7DQoJCQkJCXRoaXMucnVu
dGltZS5yZWRyYXcgPSB0cnVlOw0KCQkJCX0NCgkJCX07DQoJCQlleHBzLk9wYWNpdHkgPSBmdW5j
dGlvbiAocmV0KQ0KCQkJew0KCQkJCXJldC5zZXRfZmxvYXQoY3Iucm91bmQ2ZHAodGhpcy5vcGFj
aXR5ICogMTAwLjApKTsNCgkJCX07DQoJCX0NCgkJaWYgKHpvcmRlcl9hY2VzKQ0KCQl7DQoJCQlj
bmRzLklzT25MYXllciA9IGZ1bmN0aW9uIChsYXllcl8pDQoJCQl7DQoJCQkJaWYgKCFsYXllcl8p
DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQlyZXR1cm4gdGhpcy5sYXllciA9PT0gbGF5ZXJfOw0K
CQkJfTsNCgkJCWNuZHMuUGlja1RvcEJvdHRvbSA9IGZ1bmN0aW9uICh3aGljaF8pDQoJCQl7DQoJ
CQkJdmFyIHNvbCA9IHRoaXMuZ2V0Q3VycmVudFNvbCgpOw0KCQkJCXZhciBpbnN0YW5jZXMgPSBz
b2wuZ2V0T2JqZWN0cygpOw0KCQkJCWlmICghaW5zdGFuY2VzLmxlbmd0aCkNCgkJCQkJcmV0dXJu
IGZhbHNlOw0KCQkJCXZhciBpbnN0ID0gaW5zdGFuY2VzWzBdOw0KCQkJCXZhciBwaWNrbWUgPSBp
bnN0Ow0KCQkJCXZhciBpLCBsZW47DQoJCQkJZm9yIChpID0gMSwgbGVuID0gaW5zdGFuY2VzLmxl
bmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCXsNCgkJCQkJaW5zdCA9IGluc3RhbmNlc1tpXTsNCgkJ
CQkJaWYgKHdoaWNoXyA9PT0gMCkNCgkJCQkJew0KCQkJCQkJaWYgKGluc3QubGF5ZXIuaW5kZXgg
PiBwaWNrbWUubGF5ZXIuaW5kZXggfHwgKGluc3QubGF5ZXIuaW5kZXggPT09IHBpY2ttZS5sYXll
ci5pbmRleCAmJiBpbnN0LmdldF96aW5kZXgoKSA+IHBpY2ttZS5nZXRfemluZGV4KCkpKQ0KCQkJ
CQkJew0KCQkJCQkJCXBpY2ttZSA9IGluc3Q7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJZWxzZQ0K
CQkJCQl7DQoJCQkJCQlpZiAoaW5zdC5sYXllci5pbmRleCA8IHBpY2ttZS5sYXllci5pbmRleCB8
fCAoaW5zdC5sYXllci5pbmRleCA9PT0gcGlja21lLmxheWVyLmluZGV4ICYmIGluc3QuZ2V0X3pp
bmRleCgpIDwgcGlja21lLmdldF96aW5kZXgoKSkpDQoJCQkJCQl7DQoJCQkJCQkJcGlja21lID0g
aW5zdDsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQlzb2wucGlja19vbmUocGlja21lKTsN
CgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX07DQoJCQlhY3RzLk1vdmVUb1RvcCA9IGZ1bmN0aW9uICgp
DQoJCQl7DQoJCQkJdmFyIGxheWVyID0gdGhpcy5sYXllcjsNCgkJCQl2YXIgbGF5ZXJfaW5zdGFu
Y2VzID0gbGF5ZXIuaW5zdGFuY2VzOw0KCQkJCWlmIChsYXllcl9pbnN0YW5jZXMubGVuZ3RoICYm
IGxheWVyX2luc3RhbmNlc1tsYXllcl9pbnN0YW5jZXMubGVuZ3RoIC0gMV0gPT09IHRoaXMpDQoJ
CQkJCXJldHVybjsJCS8vIGlzIGFscmVhZHkgYXQgdG9wDQoJCQkJbGF5ZXIucmVtb3ZlRnJvbUlu
c3RhbmNlTGlzdCh0aGlzLCBmYWxzZSk7DQoJCQkJbGF5ZXIuYXBwZW5kVG9JbnN0YW5jZUxpc3Qo
dGhpcywgZmFsc2UpOw0KCQkJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCQkJfTsNCgkJ
CWFjdHMuTW92ZVRvQm90dG9tID0gZnVuY3Rpb24gKCkNCgkJCXsNCgkJCQl2YXIgbGF5ZXIgPSB0
aGlzLmxheWVyOw0KCQkJCXZhciBsYXllcl9pbnN0YW5jZXMgPSBsYXllci5pbnN0YW5jZXM7DQoJ
CQkJaWYgKGxheWVyX2luc3RhbmNlcy5sZW5ndGggJiYgbGF5ZXJfaW5zdGFuY2VzWzBdID09PSB0
aGlzKQ0KCQkJCQlyZXR1cm47CQkvLyBpcyBhbHJlYWR5IGF0IGJvdHRvbQ0KCQkJCWxheWVyLnJl
bW92ZUZyb21JbnN0YW5jZUxpc3QodGhpcywgZmFsc2UpOw0KCQkJCWxheWVyLnByZXBlbmRUb0lu
c3RhbmNlTGlzdCh0aGlzLCBmYWxzZSk7DQoJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7
DQoJCQl9Ow0KCQkJYWN0cy5Nb3ZlVG9MYXllciA9IGZ1bmN0aW9uIChsYXllck1vdmUpDQoJCQl7
DQoJCQkJaWYgKCFsYXllck1vdmUgfHwgbGF5ZXJNb3ZlID09IHRoaXMubGF5ZXIpDQoJCQkJCXJl
dHVybjsNCgkJCQl0aGlzLmxheWVyLnJlbW92ZUZyb21JbnN0YW5jZUxpc3QodGhpcywgdHJ1ZSk7
DQoJCQkJdGhpcy5sYXllciA9IGxheWVyTW92ZTsNCgkJCQlsYXllck1vdmUuYXBwZW5kVG9JbnN0
YW5jZUxpc3QodGhpcywgdHJ1ZSk7DQoJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJ
CQl9Ow0KCQkJYWN0cy5aTW92ZVRvT2JqZWN0ID0gZnVuY3Rpb24gKHdoZXJlXywgb2JqXykNCgkJ
CXsNCgkJCQl2YXIgaXNhZnRlciA9ICh3aGVyZV8gPT09IDApOw0KCQkJCWlmICghb2JqXykNCgkJ
CQkJcmV0dXJuOw0KCQkJCXZhciBvdGhlciA9IG9ial8uZ2V0Rmlyc3RQaWNrZWQodGhpcyk7DQoJ
CQkJaWYgKCFvdGhlciB8fCBvdGhlci51aWQgPT09IHRoaXMudWlkKQ0KCQkJCQlyZXR1cm47DQoJ
CQkJaWYgKHRoaXMubGF5ZXIuaW5kZXggIT09IG90aGVyLmxheWVyLmluZGV4KQ0KCQkJCXsNCgkJ
CQkJdGhpcy5sYXllci5yZW1vdmVGcm9tSW5zdGFuY2VMaXN0KHRoaXMsIHRydWUpOw0KCQkJCQl0
aGlzLmxheWVyID0gb3RoZXIubGF5ZXI7DQoJCQkJCW90aGVyLmxheWVyLmFwcGVuZFRvSW5zdGFu
Y2VMaXN0KHRoaXMsIHRydWUpOw0KCQkJCX0NCgkJCQl0aGlzLmxheWVyLm1vdmVJbnN0YW5jZUFk
amFjZW50KHRoaXMsIG90aGVyLCBpc2FmdGVyKTsNCgkJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0g
dHJ1ZTsNCgkJCX07DQoJCQlleHBzLkxheWVyTnVtYmVyID0gZnVuY3Rpb24gKHJldCkNCgkJCXsN
CgkJCQlyZXQuc2V0X2ludCh0aGlzLmxheWVyLm51bWJlcik7DQoJCQl9Ow0KCQkJZXhwcy5MYXll
ck5hbWUgPSBmdW5jdGlvbiAocmV0KQ0KCQkJew0KCQkJCXJldC5zZXRfc3RyaW5nKHRoaXMubGF5
ZXIubmFtZSk7DQoJCQl9Ow0KCQkJZXhwcy5aSW5kZXggPSBmdW5jdGlvbiAocmV0KQ0KCQkJew0K
CQkJCXJldC5zZXRfaW50KHRoaXMuZ2V0X3ppbmRleCgpKTsNCgkJCX07DQoJCX0NCgkJaWYgKGVm
ZmVjdHNfYWNlcykNCgkJew0KCQkJYWN0cy5TZXRFZmZlY3RFbmFibGVkID0gZnVuY3Rpb24gKGVu
YWJsZV8sIGVmZmVjdG5hbWVfKQ0KCQkJew0KCQkJCWlmICghdGhpcy5ydW50aW1lLmdsd3JhcCkN
CgkJCQkJcmV0dXJuOw0KCQkJCXZhciBpID0gdGhpcy50eXBlLmdldEVmZmVjdEluZGV4QnlOYW1l
KGVmZmVjdG5hbWVfKTsNCgkJCQlpZiAoaSA8IDApDQoJCQkJCXJldHVybjsJCS8vIGVmZmVjdCBu
YW1lIG5vdCBmb3VuZA0KCQkJCXZhciBlbmFibGUgPSAoZW5hYmxlXyA9PT0gMSk7DQoJCQkJaWYg
KHRoaXMuYWN0aXZlX2VmZmVjdF9mbGFnc1tpXSA9PT0gZW5hYmxlKQ0KCQkJCQlyZXR1cm47CQkv
LyBubyBjaGFuZ2UNCgkJCQl0aGlzLmFjdGl2ZV9lZmZlY3RfZmxhZ3NbaV0gPSBlbmFibGU7DQoJ
CQkJdGhpcy51cGRhdGVBY3RpdmVFZmZlY3RzKCk7DQoJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9
IHRydWU7DQoJCQl9Ow0KCQkJYWN0cy5TZXRFZmZlY3RQYXJhbSA9IGZ1bmN0aW9uIChlZmZlY3Ru
YW1lXywgaW5kZXhfLCB2YWx1ZV8pDQoJCQl7DQoJCQkJaWYgKCF0aGlzLnJ1bnRpbWUuZ2x3cmFw
KQ0KCQkJCQlyZXR1cm47DQoJCQkJdmFyIGkgPSB0aGlzLnR5cGUuZ2V0RWZmZWN0SW5kZXhCeU5h
bWUoZWZmZWN0bmFtZV8pOw0KCQkJCWlmIChpIDwgMCkNCgkJCQkJcmV0dXJuOwkJLy8gZWZmZWN0
IG5hbWUgbm90IGZvdW5kDQoJCQkJdmFyIGV0ID0gdGhpcy50eXBlLmVmZmVjdF90eXBlc1tpXTsN
CgkJCQl2YXIgcGFyYW1zID0gdGhpcy5lZmZlY3RfcGFyYW1zW2ldOw0KCQkJCWluZGV4XyA9IE1h
dGguZmxvb3IoaW5kZXhfKTsNCgkJCQlpZiAoaW5kZXhfIDwgMCB8fCBpbmRleF8gPj0gcGFyYW1z
Lmxlbmd0aCkNCgkJCQkJcmV0dXJuOwkJLy8gZWZmZWN0IGluZGV4IG91dCBvZiBib3VuZHMNCgkJ
CQlpZiAodGhpcy5ydW50aW1lLmdsd3JhcC5nZXRQcm9ncmFtUGFyYW1ldGVyVHlwZShldC5zaGFk
ZXJpbmRleCwgaW5kZXhfKSA9PT0gMSkNCgkJCQkJdmFsdWVfIC89IDEwMC4wOw0KCQkJCWlmIChw
YXJhbXNbaW5kZXhfXSA9PT0gdmFsdWVfKQ0KCQkJCQlyZXR1cm47CQkvLyBubyBjaGFuZ2UNCgkJ
CQlwYXJhbXNbaW5kZXhfXSA9IHZhbHVlXzsNCgkJCQlpZiAoZXQuYWN0aXZlKQ0KCQkJCQl0aGlz
LnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgkJCX07DQoJCX0NCgl9Ow0KCWNyLnNldF9iYm94X2No
YW5nZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5iYm94X2NoYW5nZWQgPSB0cnVlOyAgICAg
IAkJLy8gd2lsbCByZWNyZWF0ZSBuZXh0IHRpbWUgYm94IHJlcXVlc3RlZA0KCQl0aGlzLmNlbGxf
Y2hhbmdlZCA9IHRydWU7DQoJCXRoaXMudHlwZS5hbnlfY2VsbF9jaGFuZ2VkID0gdHJ1ZTsJLy8g
YXZvaWQgdW5uZWNlc3NhcnkgdXBkYXRlQWxsQkJveCgpIGNhbGxzDQoJCXRoaXMucnVudGltZS5y
ZWRyYXcgPSB0cnVlOyAgICAgCS8vIGFzc3VtZSBydW50aW1lIG5lZWRzIHRvIHJlZHJhdw0KCQl2
YXIgaSwgbGVuLCBjYWxsYmFja3MgPSB0aGlzLmJib3hfY2hhbmdlZF9jYWxsYmFja3M7DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJ
Y2FsbGJhY2tzW2ldKHRoaXMpOw0KCQl9DQoJCWlmICh0aGlzLmxheWVyLnVzZVJlbmRlckNlbGxz
KQ0KCQkJdGhpcy51cGRhdGVfYmJveCgpOw0KCX07DQoJY3IuYWRkX2Jib3hfY2hhbmdlZF9jYWxs
YmFjayA9IGZ1bmN0aW9uIChmKQ0KCXsNCgkJaWYgKGYpDQoJCXsNCgkJCXRoaXMuYmJveF9jaGFu
Z2VkX2NhbGxiYWNrcy5wdXNoKGYpOw0KCQl9DQoJfTsNCgljci51cGRhdGVfYmJveCA9IGZ1bmN0
aW9uICgpDQoJew0KCQlpZiAoIXRoaXMuYmJveF9jaGFuZ2VkKQ0KCQkJcmV0dXJuOyAgICAgICAg
ICAgICAgICAgLy8gYm91bmRpbmcgYm94IG5vdCBjaGFuZ2VkDQoJCXZhciBiYm94ID0gdGhpcy5i
Ym94Ow0KCQl2YXIgYnF1YWQgPSB0aGlzLmJxdWFkOw0KCQliYm94LnNldCh0aGlzLngsIHRoaXMu
eSwgdGhpcy54ICsgdGhpcy53aWR0aCwgdGhpcy55ICsgdGhpcy5oZWlnaHQpOw0KCQliYm94Lm9m
ZnNldCgtdGhpcy5ob3RzcG90WCAqIHRoaXMud2lkdGgsIC10aGlzLmhvdHNwb3RZICogdGhpcy5o
ZWlnaHQpOw0KCQlpZiAoIXRoaXMuYW5nbGUpDQoJCXsNCgkJCWJxdWFkLnNldF9mcm9tX3JlY3Qo
YmJveCk7ICAgIC8vIG1ha2UgYm91bmRpbmcgcXVhZCBmcm9tIGJveA0KCQl9DQoJCWVsc2UNCgkJ
ew0KCQkJYmJveC5vZmZzZXQoLXRoaXMueCwgLXRoaXMueSk7ICAgICAgIAkJCS8vIHRyYW5zbGF0
ZSB0byBvcmlnaW4NCgkJCWJxdWFkLnNldF9mcm9tX3JvdGF0ZWRfcmVjdChiYm94LCB0aGlzLmFu
Z2xlKTsJLy8gcm90YXRlIGFyb3VuZCBvcmlnaW4NCgkJCWJxdWFkLm9mZnNldCh0aGlzLngsIHRo
aXMueSk7ICAgICAgCQkJCS8vIHRyYW5zbGF0ZSBiYWNrIHRvIG9yaWdpbmFsIHBvc2l0aW9uDQoJ
CQlicXVhZC5ib3VuZGluZ19ib3goYmJveCk7DQoJCX0NCgkJYmJveC5ub3JtYWxpemUoKTsNCgkJ
dGhpcy5iYm94X2NoYW5nZWQgPSBmYWxzZTsgIC8vIGJvdW5kaW5nIGJveCB1cCB0byBkYXRlDQoJ
CXRoaXMudXBkYXRlX3JlbmRlcl9jZWxsKCk7DQoJfTsNCgl2YXIgdG1wcmMgPSBuZXcgY3IucmVj
dCgwLCAwLCAwLCAwKTsNCgljci51cGRhdGVfcmVuZGVyX2NlbGwgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJaWYgKCF0aGlzLmxheWVyLnVzZVJlbmRlckNlbGxzKQ0KCQkJcmV0dXJuOw0KCQl2YXIgbXln
cmlkID0gdGhpcy5sYXllci5yZW5kZXJfZ3JpZDsNCgkJdmFyIGJib3ggPSB0aGlzLmJib3g7DQoJ
CXRtcHJjLnNldChteWdyaWQuWFRvQ2VsbChiYm94LmxlZnQpLCBteWdyaWQuWVRvQ2VsbChiYm94
LnRvcCksIG15Z3JpZC5YVG9DZWxsKGJib3gucmlnaHQpLCBteWdyaWQuWVRvQ2VsbChiYm94LmJv
dHRvbSkpOw0KCQlpZiAodGhpcy5yZW5kZXJjZWxscy5lcXVhbHModG1wcmMpKQ0KCQkJcmV0dXJu
Ow0KCQlpZiAodGhpcy5yZW5kZXJjZWxscy5yaWdodCA8IHRoaXMucmVuZGVyY2VsbHMubGVmdCkN
CgkJCW15Z3JpZC51cGRhdGUodGhpcywgbnVsbCwgdG1wcmMpOwkJLy8gZmlyc3QgaW5zZXJ0aW9u
IHdpdGggaW52YWxpZCByZWN0OiBkb24ndCBwcm92aWRlIG9sZCByYW5nZQ0KCQllbHNlDQoJCQlt
eWdyaWQudXBkYXRlKHRoaXMsIHRoaXMucmVuZGVyY2VsbHMsIHRtcHJjKTsNCgkJdGhpcy5yZW5k
ZXJjZWxscy5jb3B5KHRtcHJjKTsNCgkJdGhpcy5sYXllci5yZW5kZXJfbGlzdF9zdGFsZSA9IHRy
dWU7DQoJfTsNCgljci51cGRhdGVfY29sbGlzaW9uX2NlbGwgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
aWYgKCF0aGlzLmNlbGxfY2hhbmdlZCB8fCAhdGhpcy5jb2xsaXNpb25zRW5hYmxlZCkNCgkJCXJl
dHVybjsNCgkJdGhpcy51cGRhdGVfYmJveCgpOw0KCQl2YXIgbXlncmlkID0gdGhpcy50eXBlLmNv
bGxpc2lvbl9ncmlkOw0KCQl2YXIgYmJveCA9IHRoaXMuYmJveDsNCgkJdG1wcmMuc2V0KG15Z3Jp
ZC5YVG9DZWxsKGJib3gubGVmdCksIG15Z3JpZC5ZVG9DZWxsKGJib3gudG9wKSwgbXlncmlkLlhU
b0NlbGwoYmJveC5yaWdodCksIG15Z3JpZC5ZVG9DZWxsKGJib3guYm90dG9tKSk7DQoJCWlmICh0
aGlzLmNvbGxjZWxscy5lcXVhbHModG1wcmMpKQ0KCQkJcmV0dXJuOw0KCQlpZiAodGhpcy5jb2xs
Y2VsbHMucmlnaHQgPCB0aGlzLmNvbGxjZWxscy5sZWZ0KQ0KCQkJbXlncmlkLnVwZGF0ZSh0aGlz
LCBudWxsLCB0bXByYyk7CQkvLyBmaXJzdCBpbnNlcnRpb24gd2l0aCBpbnZhbGlkIHJlY3Q6IGRv
bid0IHByb3ZpZGUgb2xkIHJhbmdlDQoJCWVsc2UNCgkJCW15Z3JpZC51cGRhdGUodGhpcywgdGhp
cy5jb2xsY2VsbHMsIHRtcHJjKTsNCgkJdGhpcy5jb2xsY2VsbHMuY29weSh0bXByYyk7DQoJCXRo
aXMuY2VsbF9jaGFuZ2VkID0gZmFsc2U7DQoJfTsNCgljci5pbnN0X2NvbnRhaW5zX3B0ID0gZnVu
Y3Rpb24gKHgsIHkpDQoJew0KCQlpZiAoIXRoaXMuYmJveC5jb250YWluc19wdCh4LCB5KSkNCgkJ
CXJldHVybiBmYWxzZTsNCgkJaWYgKCF0aGlzLmJxdWFkLmNvbnRhaW5zX3B0KHgsIHkpKQ0KCQkJ
cmV0dXJuIGZhbHNlOw0KCQlpZiAodGhpcy50aWxlbWFwX2V4aXN0cykNCgkJCXJldHVybiB0aGlz
LnRlc3RQb2ludE92ZXJsYXBUaWxlKHgsIHkpOw0KCQlpZiAodGhpcy5jb2xsaXNpb25fcG9seSAm
JiAhdGhpcy5jb2xsaXNpb25fcG9seS5pc19lbXB0eSgpKQ0KCQl7DQoJCQl0aGlzLmNvbGxpc2lv
bl9wb2x5LmNhY2hlX3BvbHkodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMuYW5nbGUpOw0K
CQkJcmV0dXJuIHRoaXMuY29sbGlzaW9uX3BvbHkuY29udGFpbnNfcHQoeCAtIHRoaXMueCwgeSAt
IHRoaXMueSk7DQoJCX0NCgkJZWxzZQ0KCQkJcmV0dXJuIHRydWU7DQoJfTsNCgljci5pbnN0X2dl
dF9paWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy50eXBlLnVwZGF0ZUlJRHMoKTsNCgkJcmV0
dXJuIHRoaXMuaWlkOw0KCX07DQoJY3IuaW5zdF9nZXRfemluZGV4ID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXRoaXMubGF5ZXIudXBkYXRlWkluZGljZXMoKTsNCgkJcmV0dXJuIHRoaXMuemluZGV4Ow0K
CX07DQoJY3IuaW5zdF91cGRhdGVBY3RpdmVFZmZlY3RzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWNy
LmNsZWFyQXJyYXkodGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzKTsNCgkJdmFyIGksIGxlbiwgZXQ7
DQoJCXZhciBwcmVzZXJ2ZXNfb3BhcXVlbmVzcyA9IHRydWU7DQoJCWZvciAoaSA9IDAsIGxlbiA9
IHRoaXMuYWN0aXZlX2VmZmVjdF9mbGFncy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJ
aWYgKHRoaXMuYWN0aXZlX2VmZmVjdF9mbGFnc1tpXSkNCgkJCXsNCgkJCQlldCA9IHRoaXMudHlw
ZS5lZmZlY3RfdHlwZXNbaV07DQoJCQkJdGhpcy5hY3RpdmVfZWZmZWN0X3R5cGVzLnB1c2goZXQp
Ow0KCQkJCWlmICghZXQucHJlc2VydmVzT3BhcXVlbmVzcykNCgkJCQkJcHJlc2VydmVzX29wYXF1
ZW5lc3MgPSBmYWxzZTsNCgkJCX0NCgkJfQ0KCQl0aGlzLnVzZXNfc2hhZGVycyA9ICEhdGhpcy5h
Y3RpdmVfZWZmZWN0X3R5cGVzLmxlbmd0aDsNCgkJdGhpcy5zaGFkZXJzX3ByZXNlcnZlX29wYXF1
ZW5lc3MgPSBwcmVzZXJ2ZXNfb3BhcXVlbmVzczsNCgl9Ow0KCWNyLmluc3RfdG9TdHJpbmcgPSBm
dW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICJJbnN0IiArIHRoaXMucHVpZDsNCgl9Ow0KCWNyLnR5
cGVfZ2V0Rmlyc3RQaWNrZWQgPSBmdW5jdGlvbiAoZnJvbWluc3QpDQoJew0KCQlpZiAoZnJvbWlu
c3QgJiYgZnJvbWluc3QuaXNfY29udGFpbmVkICYmIGZyb21pbnN0LnR5cGUgIT0gdGhpcykNCgkJ
ew0KCQkJdmFyIGksIGxlbiwgczsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGZyb21pbnN0LnNpYmxp
bmdzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCXMgPSBmcm9taW5zdC5zaWJsaW5n
c1tpXTsNCgkJCQlpZiAocy50eXBlID09IHRoaXMpDQoJCQkJCXJldHVybiBzOw0KCQkJfQ0KCQl9
DQoJCXZhciBpbnN0YW5jZXMgPSB0aGlzLmdldEN1cnJlbnRTb2woKS5nZXRPYmplY3RzKCk7DQoJ
CWlmIChpbnN0YW5jZXMubGVuZ3RoKQ0KCQkJcmV0dXJuIGluc3RhbmNlc1swXTsNCgkJZWxzZQ0K
CQkJcmV0dXJuIG51bGw7DQoJfTsNCgljci50eXBlX2dldFBhaXJlZEluc3RhbmNlID0gZnVuY3Rp
b24gKGluc3QpDQoJew0KCQl2YXIgaW5zdGFuY2VzID0gdGhpcy5nZXRDdXJyZW50U29sKCkuZ2V0
T2JqZWN0cygpOw0KCQlpZiAoaW5zdGFuY2VzLmxlbmd0aCkNCgkJCXJldHVybiBpbnN0YW5jZXNb
aW5zdC5nZXRfaWlkKCkgJSBpbnN0YW5jZXMubGVuZ3RoXTsNCgkJZWxzZQ0KCQkJcmV0dXJuIG51
bGw7DQoJfTsNCgljci50eXBlX3VwZGF0ZUlJRHMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKCF0
aGlzLnN0YWxlX2lpZHMgfHwgdGhpcy5pc19mYW1pbHkpDQoJCQlyZXR1cm47CQkvLyB1cCB0byBk
YXRlIG9yIGlzIGZhbWlseSAtIGRvbid0IHdhbnQgZmFtaWx5IHRvIG92ZXJ3cml0ZSBJSURzDQoJ
CXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuaW5zdGFuY2VzLmxlbmd0aDsg
aSA8IGxlbjsgaSsrKQ0KCQkJdGhpcy5pbnN0YW5jZXNbaV0uaWlkID0gaTsNCgkJdmFyIG5leHRf
aWlkID0gaTsNCgkJdmFyIGNyZWF0ZVJvdyA9IHRoaXMucnVudGltZS5jcmVhdGVSb3c7DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IGNyZWF0ZVJvdy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJ
aWYgKGNyZWF0ZVJvd1tpXS50eXBlID09PSB0aGlzKQ0KCQkJCWNyZWF0ZVJvd1tpXS5paWQgPSBu
ZXh0X2lpZCsrOw0KCQl9DQoJCXRoaXMuc3RhbGVfaWlkcyA9IGZhbHNlOw0KCX07DQoJY3IudHlw
ZV9nZXRJbnN0YW5jZUJ5SUlEID0gZnVuY3Rpb24gKGkpDQoJew0KCQlpZiAoaSA8IHRoaXMuaW5z
dGFuY2VzLmxlbmd0aCkNCgkJCXJldHVybiB0aGlzLmluc3RhbmNlc1tpXTsNCgkJaSAtPSB0aGlz
Lmluc3RhbmNlcy5sZW5ndGg7DQoJCXZhciBjcmVhdGVSb3cgPSB0aGlzLnJ1bnRpbWUuY3JlYXRl
Um93Ow0KCQl2YXIgaiwgbGVuajsNCgkJZm9yIChqID0gMCwgbGVuaiA9IGNyZWF0ZVJvdy5sZW5n
dGg7IGogPCBsZW5qOyArK2opDQoJCXsNCgkJCWlmIChjcmVhdGVSb3dbal0udHlwZSA9PT0gdGhp
cykNCgkJCXsNCgkJCQlpZiAoaSA9PT0gMCkNCgkJCQkJcmV0dXJuIGNyZWF0ZVJvd1tqXTsNCgkJ
CQktLWk7DQoJCQl9DQoJCX0NCjsNCgkJcmV0dXJuIG51bGw7DQoJfTsNCgljci50eXBlX2dldEN1
cnJlbnRTb2wgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuc29sc3RhY2tbdGhpcy5j
dXJfc29sXTsNCgl9Ow0KCWNyLnR5cGVfcHVzaENsZWFuU29sID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CXRoaXMuY3VyX3NvbCsrOw0KCQlpZiAodGhpcy5jdXJfc29sID09PSB0aGlzLnNvbHN0YWNrLmxl
bmd0aCkNCgkJew0KCQkJdGhpcy5zb2xzdGFjay5wdXNoKG5ldyBjci5zZWxlY3Rpb24odGhpcykp
Ow0KCQl9DQoJCWVsc2UNCgkJew0KCQkJdGhpcy5zb2xzdGFja1t0aGlzLmN1cl9zb2xdLnNlbGVj
dF9hbGwgPSB0cnVlOyAgLy8gZWxzZSBjbGVhciBuZXh0IFNPTA0KCQkJY3IuY2xlYXJBcnJheSh0
aGlzLnNvbHN0YWNrW3RoaXMuY3VyX3NvbF0uZWxzZV9pbnN0YW5jZXMpOw0KCQl9DQoJfTsNCglj
ci50eXBlX3B1c2hDb3B5U29sID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuY3VyX3NvbCsrOw0K
CQlpZiAodGhpcy5jdXJfc29sID09PSB0aGlzLnNvbHN0YWNrLmxlbmd0aCkNCgkJCXRoaXMuc29s
c3RhY2sucHVzaChuZXcgY3Iuc2VsZWN0aW9uKHRoaXMpKTsNCgkJdmFyIGNsb25lc29sID0gdGhp
cy5zb2xzdGFja1t0aGlzLmN1cl9zb2xdOw0KCQl2YXIgcHJldnNvbCA9IHRoaXMuc29sc3RhY2tb
dGhpcy5jdXJfc29sIC0gMV07DQoJCWlmIChwcmV2c29sLnNlbGVjdF9hbGwpDQoJCXsNCgkJCWNs
b25lc29sLnNlbGVjdF9hbGwgPSB0cnVlOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJY2xvbmVzb2wu
c2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5KGNsb25lc29sLmlu
c3RhbmNlcywgcHJldnNvbC5pbnN0YW5jZXMpOw0KCQl9DQoJCWNyLmNsZWFyQXJyYXkoY2xvbmVz
b2wuZWxzZV9pbnN0YW5jZXMpOw0KCX07DQoJY3IudHlwZV9wb3BTb2wgPSBmdW5jdGlvbiAoKQ0K
CXsNCjsNCgkJdGhpcy5jdXJfc29sLS07DQoJfTsNCgljci50eXBlX2dldEJlaGF2aW9yQnlOYW1l
ID0gZnVuY3Rpb24gKGJlaG5hbWUpDQoJew0KCQl2YXIgaSwgbGVuLCBqLCBsZW5qLCBmLCBpbmRl
eCA9IDA7DQoJCWlmICghdGhpcy5pc19mYW1pbHkpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9
IHRoaXMuZmFtaWxpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJZiA9IHRoaXMu
ZmFtaWxpZXNbaV07DQoJCQkJZm9yIChqID0gMCwgbGVuaiA9IGYuYmVoYXZpb3JzLmxlbmd0aDsg
aiA8IGxlbmo7IGorKykNCgkJCQl7DQoJCQkJCWlmIChiZWhuYW1lID09PSBmLmJlaGF2aW9yc1tq
XS5uYW1lKQ0KCQkJCQl7DQoJCQkJCQl0aGlzLmV4dHJhWyJsYXN0QmVoSW5kZXgiXSA9IGluZGV4
Ow0KCQkJCQkJcmV0dXJuIGYuYmVoYXZpb3JzW2pdOw0KCQkJCQl9DQoJCQkJCWluZGV4Kys7DQoJ
CQkJfQ0KCQkJfQ0KCQl9DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuYmVoYXZpb3JzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKSB7DQoJCQlpZiAoYmVobmFtZSA9PT0gdGhpcy5iZWhhdmlvcnNbaV0u
bmFtZSkNCgkJCXsNCgkJCQl0aGlzLmV4dHJhWyJsYXN0QmVoSW5kZXgiXSA9IGluZGV4Ow0KCQkJ
CXJldHVybiB0aGlzLmJlaGF2aW9yc1tpXTsNCgkJCX0NCgkJCWluZGV4Kys7DQoJCX0NCgkJcmV0
dXJuIG51bGw7DQoJfTsNCgljci50eXBlX2dldEJlaGF2aW9ySW5kZXhCeU5hbWUgPSBmdW5jdGlv
biAoYmVobmFtZSkNCgl7DQoJCXZhciBiID0gdGhpcy5nZXRCZWhhdmlvckJ5TmFtZShiZWhuYW1l
KTsNCgkJaWYgKGIpDQoJCQlyZXR1cm4gdGhpcy5leHRyYVsibGFzdEJlaEluZGV4Il07DQoJCWVs
c2UNCgkJCXJldHVybiAtMTsNCgl9Ow0KCWNyLnR5cGVfZ2V0RWZmZWN0SW5kZXhCeU5hbWUgPSBm
dW5jdGlvbiAobmFtZV8pDQoJew0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0
aGlzLmVmZmVjdF90eXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKHRoaXMu
ZWZmZWN0X3R5cGVzW2ldLm5hbWUgPT09IG5hbWVfKQ0KCQkJCXJldHVybiBpOw0KCQl9DQoJCXJl
dHVybiAtMTsNCgl9Ow0KCWNyLnR5cGVfYXBwbHlTb2xUb0NvbnRhaW5lciA9IGZ1bmN0aW9uICgp
DQoJew0KCQlpZiAoIXRoaXMuaXNfY29udGFpbmVkIHx8IHRoaXMuaXNfZmFtaWx5KQ0KCQkJcmV0
dXJuOw0KCQl2YXIgaSwgbGVuLCBqLCBsZW5qLCB0LCBzb2wsIHNvbDI7DQoJCXRoaXMudXBkYXRl
SUlEcygpOw0KCQlzb2wgPSB0aGlzLmdldEN1cnJlbnRTb2woKTsNCgkJdmFyIHNlbGVjdF9hbGwg
PSBzb2wuc2VsZWN0X2FsbDsNCgkJdmFyIGVzID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRFdmVu
dFN0YWNrKCk7DQoJCXZhciBvcmJsb2NrID0gZXMgJiYgZXMuY3VycmVudF9ldmVudCAmJiBlcy5j
dXJyZW50X2V2ZW50Lm9yYmxvY2s7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuY29udGFpbmVy
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0ID0gdGhpcy5jb250YWluZXJbaV07DQoJ
CQlpZiAodCA9PT0gdGhpcykNCgkJCQljb250aW51ZTsNCgkJCXQudXBkYXRlSUlEcygpOw0KCQkJ
c29sMiA9IHQuZ2V0Q3VycmVudFNvbCgpOw0KCQkJc29sMi5zZWxlY3RfYWxsID0gc2VsZWN0X2Fs
bDsNCgkJCWlmICghc2VsZWN0X2FsbCkNCgkJCXsNCgkJCQljci5jbGVhckFycmF5KHNvbDIuaW5z
dGFuY2VzKTsNCgkJCQlmb3IgKGogPSAwLCBsZW5qID0gc29sLmluc3RhbmNlcy5sZW5ndGg7IGog
PCBsZW5qOyArK2opDQoJCQkJCXNvbDIuaW5zdGFuY2VzW2pdID0gdC5nZXRJbnN0YW5jZUJ5SUlE
KHNvbC5pbnN0YW5jZXNbal0uaWlkKTsNCgkJCQlpZiAob3JibG9jaykNCgkJCQl7DQoJCQkJCWNy
LmNsZWFyQXJyYXkoc29sMi5lbHNlX2luc3RhbmNlcyk7DQoJCQkJCWZvciAoaiA9IDAsIGxlbmog
PSBzb2wuZWxzZV9pbnN0YW5jZXMubGVuZ3RoOyBqIDwgbGVuajsgKytqKQ0KCQkJCQkJc29sMi5l
bHNlX2luc3RhbmNlc1tqXSA9IHQuZ2V0SW5zdGFuY2VCeUlJRChzb2wuZWxzZV9pbnN0YW5jZXNb
al0uaWlkKTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9Ow0KCWNyLnR5cGVfdG9TdHJpbmcgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJcmV0dXJuICJUeXBlIiArIHRoaXMuc2lkOw0KCX07DQoJY3IuZG9fY21w
ID0gZnVuY3Rpb24gKHgsIGNtcCwgeSkNCgl7DQoJCWlmICh0eXBlb2YgeCA9PT0gInVuZGVmaW5l
ZCIgfHwgdHlwZW9mIHkgPT09ICJ1bmRlZmluZWQiKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQlzd2l0
Y2ggKGNtcCkNCgkJew0KCQkJY2FzZSAwOiAgICAgLy8gZXF1YWwNCgkJCQlyZXR1cm4geCA9PT0g
eTsNCgkJCWNhc2UgMTogICAgIC8vIG5vdCBlcXVhbA0KCQkJCXJldHVybiB4ICE9PSB5Ow0KCQkJ
Y2FzZSAyOiAgICAgLy8gbGVzcw0KCQkJCXJldHVybiB4IDwgeTsNCgkJCWNhc2UgMzogICAgIC8v
IGxlc3MvZXF1YWwNCgkJCQlyZXR1cm4geCA8PSB5Ow0KCQkJY2FzZSA0OiAgICAgLy8gZ3JlYXRl
cg0KCQkJCXJldHVybiB4ID4geTsNCgkJCWNhc2UgNTogICAgIC8vIGdyZWF0ZXIvZXF1YWwNCgkJ
CQlyZXR1cm4geCA+PSB5Ow0KCQkJZGVmYXVsdDoNCjsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCX0N
Cgl9Ow0KfSkoKTsNCmNyLnNoYWRlcnMgPSB7fTsNCjsNCjsNCmNyLnBsdWdpbnNfLkF1ZGlvID0g
ZnVuY3Rpb24ocnVudGltZSkNCnsNCgl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0KfTsNCihmdW5j
dGlvbiAoKQ0Kew0KCXZhciBwbHVnaW5Qcm90byA9IGNyLnBsdWdpbnNfLkF1ZGlvLnByb3RvdHlw
ZTsNCglwbHVnaW5Qcm90by5UeXBlID0gZnVuY3Rpb24ocGx1Z2luKQ0KCXsNCgkJdGhpcy5wbHVn
aW4gPSBwbHVnaW47DQoJCXRoaXMucnVudGltZSA9IHBsdWdpbi5ydW50aW1lOw0KCX07DQoJdmFy
IHR5cGVQcm90byA9IHBsdWdpblByb3RvLlR5cGUucHJvdG90eXBlOw0KCXR5cGVQcm90by5vbkNy
ZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJfTsNCgl2YXIgYXVkUnVudGltZSA9IG51bGw7DQoJdmFy
IGF1ZEluc3QgPSBudWxsOw0KCXZhciBhdWRUYWcgPSAiIjsNCgl2YXIgYXBwUGF0aCA9ICIiOwkJ
CS8vIGZvciBDb3Jkb3ZhIG9ubHkNCgl2YXIgQVBJX0hUTUw1ID0gMDsNCgl2YXIgQVBJX1dFQkFV
RElPID0gMTsNCgl2YXIgQVBJX0NPUkRPVkEgPSAyOw0KCXZhciBBUElfQVBQTU9CSSA9IDM7DQoJ
dmFyIGFwaSA9IEFQSV9IVE1MNTsNCgl2YXIgY29udGV4dCA9IG51bGw7DQoJdmFyIGF1ZGlvQnVm
ZmVycyA9IFtdOwkJLy8gY2FjaGUgb2YgYnVmZmVycw0KCXZhciBhdWRpb0luc3RhbmNlcyA9IFtd
OwkvLyBjYWNoZSBvZiBpbnN0YW5jZXMNCgl2YXIgbGFzdEF1ZGlvID0gbnVsbDsNCgl2YXIgdXNl
T2dnID0gZmFsc2U7CQkJLy8gZGV0ZXJtaW5lZCBhdCBjcmVhdGUgdGltZQ0KCXZhciB0aW1lc2Nh
bGVfbW9kZSA9IDA7DQoJdmFyIHNpbGVudCA9IGZhbHNlOw0KCXZhciBtYXN0ZXJWb2x1bWUgPSAx
Ow0KCXZhciBsaXN0ZW5lclggPSAwOw0KCXZhciBsaXN0ZW5lclkgPSAwOw0KCXZhciBpc0NvbnRl
eHRTdXNwZW5kZWQgPSBmYWxzZTsNCgl2YXIgcGFubmluZ01vZGVsID0gMTsJCS8vIEhSVEYNCgl2
YXIgZGlzdGFuY2VNb2RlbCA9IDE7CQkvLyBJbnZlcnNlDQoJdmFyIHJlZkRpc3RhbmNlID0gMTA7
DQoJdmFyIG1heERpc3RhbmNlID0gMTAwMDA7DQoJdmFyIHJvbGxvZmZGYWN0b3IgPSAxOw0KCXZh
ciBtaWNTb3VyY2UgPSBudWxsOw0KCXZhciBtaWNUYWcgPSAiIjsNCgl2YXIgdXNlTmV4dFRvdWNo
V29ya2Fyb3VuZCA9IGZhbHNlOwkJCS8vIGhldXJpc3RpYyBpbiBjYXNlIHBsYXkoKSBkb2VzIG5v
dCByZXR1cm4gYSBwcm9taXNlIGFuZCB3ZSBoYXZlIHRvIGd1ZXNzIGlmIHRoZSBwbGF5IHdhcyBi
bG9ja2VkDQoJdmFyIHBsYXlPbk5leHRJbnB1dCA9IFtdOwkJCQkJLy8gQzJBdWRpb0luc3RhbmNl
cyB3aXRoIEhUTUxBdWRpb0VsZW1lbnRzIHRvIHBsYXkgb24gbmV4dCBpbnB1dCBldmVudA0KCXZh
ciBwbGF5TXVzaWNBc1NvdW5kV29ya2Fyb3VuZCA9IGZhbHNlOwkJLy8gcGxheSBtdXNpYyB0cmFj
a3Mgd2l0aCBXZWIgQXVkaW8gQVBJDQoJdmFyIGhhc1BsYXllZER1bW15QnVmZmVyID0gZmFsc2U7
CQkJLy8gZHVtbXkgYnVmZmVyIHBsYXllZCB0byB1bmJsb2NrIEF1ZGlvQ29udGV4dCBvbiBzb21l
IHBsYXRmb3Jtcw0KCWZ1bmN0aW9uIGFkZEF1ZGlvVG9QbGF5T25OZXh0SW5wdXQoYSkNCgl7DQoJ
CXZhciBpID0gcGxheU9uTmV4dElucHV0LmluZGV4T2YoYSk7DQoJCWlmIChpID09PSAtMSkNCgkJ
CXBsYXlPbk5leHRJbnB1dC5wdXNoKGEpOw0KCX07DQoJZnVuY3Rpb24gdHJ5UGxheUF1ZGlvRWxl
bWVudChhKQ0KCXsNCgkJdmFyIGF1ZGlvRWxlbSA9IGEuaW5zdGFuY2VPYmplY3Q7DQoJCXZhciBw
bGF5UmV0Ow0KCQl0cnkgew0KCQkJcGxheVJldCA9IGF1ZGlvRWxlbS5wbGF5KCk7DQoJCX0NCgkJ
Y2F0Y2ggKGVycikgew0KCQkJYWRkQXVkaW9Ub1BsYXlPbk5leHRJbnB1dChhKTsNCgkJCXJldHVy
bjsNCgkJfQ0KCQlpZiAocGxheVJldCkJCS8vIHByb21pc2Ugd2FzIHJldHVybmVkDQoJCXsNCgkJ
CXBsYXlSZXQuY2F0Y2goZnVuY3Rpb24gKGVycikNCgkJCXsNCgkJCQlhZGRBdWRpb1RvUGxheU9u
TmV4dElucHV0KGEpOw0KCQkJfSk7DQoJCX0NCgkJZWxzZSBpZiAodXNlTmV4dFRvdWNoV29ya2Fy
b3VuZCAmJiAhYXVkUnVudGltZS5pc0luVXNlcklucHV0RXZlbnQpDQoJCXsNCgkJCWFkZEF1ZGlv
VG9QbGF5T25OZXh0SW5wdXQoYSk7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIHBsYXlRdWV1ZWRBdWRp
bygpDQoJew0KCQl2YXIgaSwgbGVuLCBtLCBwbGF5UmV0Ow0KCQlpZiAoIWhhc1BsYXllZER1bW15
QnVmZmVyICYmICFpc0NvbnRleHRTdXNwZW5kZWQgJiYgY29udGV4dCkNCgkJew0KCQkJcGxheUR1
bW15QnVmZmVyKCk7DQoJCQlpZiAoY29udGV4dFsic3RhdGUiXSA9PT0gInJ1bm5pbmciKQ0KCQkJ
CWhhc1BsYXllZER1bW15QnVmZmVyID0gdHJ1ZTsNCgkJfQ0KCQl2YXIgdHJ5UGxheSA9IHBsYXlP
bk5leHRJbnB1dC5zbGljZSgwKTsNCgkJY3IuY2xlYXJBcnJheShwbGF5T25OZXh0SW5wdXQpOw0K
CQlpZiAoIXNpbGVudCkNCgkJew0KCQkJZm9yIChpID0gMCwgbGVuID0gdHJ5UGxheS5sZW5ndGg7
IGkgPCBsZW47ICsraSkNCgkJCXsNCgkJCQltID0gdHJ5UGxheVtpXTsNCgkJCQlpZiAoIW0uc3Rv
cHBlZCAmJiAhbS5pc19wYXVzZWQpDQoJCQkJew0KCQkJCQlwbGF5UmV0ID0gbS5pbnN0YW5jZU9i
amVjdC5wbGF5KCk7DQoJCQkJCWlmIChwbGF5UmV0KQ0KCQkJCQl7DQoJCQkJCQlwbGF5UmV0LmNh
dGNoKGZ1bmN0aW9uIChlcnIpDQoJCQkJCQl7DQoJCQkJCQkJYWRkQXVkaW9Ub1BsYXlPbk5leHRJ
bnB1dChtKTsNCgkJCQkJCX0pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfTsNCglmdW5j
dGlvbiBwbGF5RHVtbXlCdWZmZXIoKQ0KCXsNCgkJaWYgKGNvbnRleHRbInN0YXRlIl0gPT09ICJz
dXNwZW5kZWQiICYmIGNvbnRleHRbInJlc3VtZSJdKQ0KCQkJY29udGV4dFsicmVzdW1lIl0oKTsN
CgkJaWYgKCFjb250ZXh0WyJjcmVhdGVCdWZmZXIiXSkNCgkJCXJldHVybjsNCgkJdmFyIGJ1ZmZl
ciA9IGNvbnRleHRbImNyZWF0ZUJ1ZmZlciJdKDEsIDIyMCwgMjIwNTApOw0KCQl2YXIgc291cmNl
ID0gY29udGV4dFsiY3JlYXRlQnVmZmVyU291cmNlIl0oKTsNCgkJc291cmNlWyJidWZmZXIiXSA9
IGJ1ZmZlcjsNCgkJc291cmNlWyJjb25uZWN0Il0oY29udGV4dFsiZGVzdGluYXRpb24iXSk7DQoJ
CXN0YXJ0U291cmNlKHNvdXJjZSk7DQoJfTsNCglkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJw
b2ludGVydXAiLCBwbGF5UXVldWVkQXVkaW8sIHRydWUpOw0KCWRvY3VtZW50LmFkZEV2ZW50TGlz
dGVuZXIoInRvdWNoZW5kIiwgcGxheVF1ZXVlZEF1ZGlvLCB0cnVlKTsNCglkb2N1bWVudC5hZGRF
dmVudExpc3RlbmVyKCJjbGljayIsIHBsYXlRdWV1ZWRBdWRpbywgdHJ1ZSk7DQoJZG9jdW1lbnQu
YWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHBsYXlRdWV1ZWRBdWRpbywgdHJ1ZSk7DQoJZG9j
dW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZ2FtZXBhZGNvbm5lY3RlZCIsIHBsYXlRdWV1ZWRBdWRp
bywgdHJ1ZSk7DQoJZnVuY3Rpb24gZGJUb0xpbmVhcih4KQ0KCXsNCgkJdmFyIHYgPSBkYlRvTGlu
ZWFyX25vY2FwKHgpOw0KCQlpZiAoIWlzRmluaXRlKHYpKQkvLyBhY2NpZGVudGFsbHkgcGFzc2lu
ZyBhIHN0cmluZyBjYW4gcmVzdWx0IGluIE5hTjsgc2V0IHZvbHVtZSB0byAwIGlmIHNvDQoJCQl2
ID0gMDsNCgkJaWYgKHYgPCAwKQ0KCQkJdiA9IDA7DQoJCWlmICh2ID4gMSkNCgkJCXYgPSAxOw0K
CQlyZXR1cm4gdjsNCgl9Ow0KCWZ1bmN0aW9uIGxpbmVhclRvRGIoeCkNCgl7DQoJCWlmICh4IDwg
MCkNCgkJCXggPSAwOw0KCQlpZiAoeCA+IDEpDQoJCQl4ID0gMTsNCgkJcmV0dXJuIGxpbmVhclRv
RGJfbm9jYXAoeCk7DQoJfTsNCglmdW5jdGlvbiBkYlRvTGluZWFyX25vY2FwKHgpDQoJew0KCQly
ZXR1cm4gTWF0aC5wb3coMTAsIHggLyAyMCk7DQoJfTsNCglmdW5jdGlvbiBsaW5lYXJUb0RiX25v
Y2FwKHgpDQoJew0KCQlyZXR1cm4gKE1hdGgubG9nKHgpIC8gTWF0aC5sb2coMTApKSAqIDIwOw0K
CX07DQoJdmFyIGVmZmVjdHMgPSB7fTsNCglmdW5jdGlvbiBnZXREZXN0aW5hdGlvbkZvclRhZyh0
YWcpDQoJew0KCQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJaWYgKGVmZmVjdHMuaGFzT3du
UHJvcGVydHkodGFnKSkNCgkJew0KCQkJaWYgKGVmZmVjdHNbdGFnXS5sZW5ndGgpDQoJCQkJcmV0
dXJuIGVmZmVjdHNbdGFnXVswXS5nZXRJbnB1dE5vZGUoKTsNCgkJfQ0KCQlyZXR1cm4gY29udGV4
dFsiZGVzdGluYXRpb24iXTsNCgl9Ow0KCWZ1bmN0aW9uIGNyZWF0ZUdhaW4oKQ0KCXsNCgkJaWYg
KGNvbnRleHRbImNyZWF0ZUdhaW4iXSkNCgkJCXJldHVybiBjb250ZXh0WyJjcmVhdGVHYWluIl0o
KTsNCgkJZWxzZQ0KCQkJcmV0dXJuIGNvbnRleHRbImNyZWF0ZUdhaW5Ob2RlIl0oKTsNCgl9Ow0K
CWZ1bmN0aW9uIGNyZWF0ZURlbGF5KGQpDQoJew0KCQlpZiAoY29udGV4dFsiY3JlYXRlRGVsYXki
XSkNCgkJCXJldHVybiBjb250ZXh0WyJjcmVhdGVEZWxheSJdKGQpOw0KCQllbHNlDQoJCQlyZXR1
cm4gY29udGV4dFsiY3JlYXRlRGVsYXlOb2RlIl0oZCk7DQoJfTsNCglmdW5jdGlvbiBzdGFydFNv
dXJjZShzLCBzY2hlZHVsZWRUaW1lKQ0KCXsNCgkJaWYgKHNbInN0YXJ0Il0pDQoJCQlzWyJzdGFy
dCJdKHNjaGVkdWxlZFRpbWUgfHwgMCk7DQoJCWVsc2UNCgkJCXNbIm5vdGVPbiJdKHNjaGVkdWxl
ZFRpbWUgfHwgMCk7DQoJfTsNCglmdW5jdGlvbiBzdGFydFNvdXJjZUF0KHMsIHgsIGQsIHNjaGVk
dWxlZFRpbWUpDQoJew0KCQlpZiAoc1sic3RhcnQiXSkNCgkJCXNbInN0YXJ0Il0oc2NoZWR1bGVk
VGltZSB8fCAwLCB4KTsNCgkJZWxzZQ0KCQkJc1sibm90ZUdyYWluT24iXShzY2hlZHVsZWRUaW1l
IHx8IDAsIHgsIGQgLSB4KTsNCgl9Ow0KCWZ1bmN0aW9uIHN0b3BTb3VyY2UocykNCgl7DQoJCXRy
eSB7DQoJCQlpZiAoc1sic3RvcCJdKQ0KCQkJCXNbInN0b3AiXSgwKTsNCgkJCWVsc2UNCgkJCQlz
WyJub3RlT2ZmIl0oMCk7DQoJCX0NCgkJY2F0Y2ggKGUpIHt9DQoJfTsNCglmdW5jdGlvbiBzZXRB
dWRpb1BhcmFtKGFwLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJCWlmICghYXApDQoJCQlyZXR1
cm47CQkvLyBpT1MgaXMgbWlzc2luZyBzb21lIHBhcmFtZXRlcnMNCgkJYXBbImNhbmNlbFNjaGVk
dWxlZFZhbHVlcyJdKDApOw0KCQlpZiAodGltZSA9PT0gMCkNCgkJew0KCQkJYXBbInZhbHVlIl0g
PSB2YWx1ZTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2YXIgY3VyVGltZSA9IGNvbnRleHRbImN1cnJl
bnRUaW1lIl07DQoJCXRpbWUgKz0gY3VyVGltZTsNCgkJc3dpdGNoIChyYW1wKSB7DQoJCWNhc2Ug
MDoJCS8vIHN0ZXANCgkJCWFwWyJzZXRWYWx1ZUF0VGltZSJdKHZhbHVlLCB0aW1lKTsNCgkJCWJy
ZWFrOw0KCQljYXNlIDE6CQkvLyBsaW5lYXINCgkJCWFwWyJzZXRWYWx1ZUF0VGltZSJdKGFwWyJ2
YWx1ZSJdLCBjdXJUaW1lKTsJCS8vIHRvIHNldCB3aGF0IHRvIHJhbXAgZnJvbQ0KCQkJYXBbImxp
bmVhclJhbXBUb1ZhbHVlQXRUaW1lIl0odmFsdWUsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2Ug
MjoJCS8vIGV4cG9uZW50aWFsDQoJCQlhcFsic2V0VmFsdWVBdFRpbWUiXShhcFsidmFsdWUiXSwg
Y3VyVGltZSk7CQkvLyB0byBzZXQgd2hhdCB0byByYW1wIGZyb20NCgkJCWFwWyJleHBvbmVudGlh
bFJhbXBUb1ZhbHVlQXRUaW1lIl0odmFsdWUsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0K
CXZhciBmaWx0ZXJUeXBlcyA9IFsibG93cGFzcyIsICJoaWdocGFzcyIsICJiYW5kcGFzcyIsICJs
b3dzaGVsZiIsICJoaWdoc2hlbGYiLCAicGVha2luZyIsICJub3RjaCIsICJhbGxwYXNzIl07DQoJ
ZnVuY3Rpb24gRmlsdGVyRWZmZWN0KHR5cGUsIGZyZXEsIGRldHVuZSwgcSwgZ2FpbiwgbWl4KQ0K
CXsNCgkJdGhpcy50eXBlID0gImZpbHRlciI7DQoJCXRoaXMucGFyYW1zID0gW3R5cGUsIGZyZXEs
IGRldHVuZSwgcSwgZ2FpbiwgbWl4XTsNCgkJdGhpcy5pbnB1dE5vZGUgPSBjcmVhdGVHYWluKCk7
DQoJCXRoaXMud2V0Tm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy53ZXROb2RlWyJnYWluIl1b
InZhbHVlIl0gPSBtaXg7DQoJCXRoaXMuZHJ5Tm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy5k
cnlOb2RlWyJnYWluIl1bInZhbHVlIl0gPSAxIC0gbWl4Ow0KCQl0aGlzLmZpbHRlck5vZGUgPSBj
b250ZXh0WyJjcmVhdGVCaXF1YWRGaWx0ZXIiXSgpOw0KCQlpZiAodHlwZW9mIHRoaXMuZmlsdGVy
Tm9kZVsidHlwZSJdID09PSAibnVtYmVyIikNCgkJCXRoaXMuZmlsdGVyTm9kZVsidHlwZSJdID0g
dHlwZTsNCgkJZWxzZQ0KCQkJdGhpcy5maWx0ZXJOb2RlWyJ0eXBlIl0gPSBmaWx0ZXJUeXBlc1t0
eXBlXTsNCgkJdGhpcy5maWx0ZXJOb2RlWyJmcmVxdWVuY3kiXVsidmFsdWUiXSA9IGZyZXE7DQoJ
CWlmICh0aGlzLmZpbHRlck5vZGVbImRldHVuZSJdKQkJLy8gaU9TIDYgZG9lc24ndCBoYXZlIGRl
dHVuZSB5ZXQNCgkJCXRoaXMuZmlsdGVyTm9kZVsiZGV0dW5lIl1bInZhbHVlIl0gPSBkZXR1bmU7
DQoJCXRoaXMuZmlsdGVyTm9kZVsiUSJdWyJ2YWx1ZSJdID0gcTsNCgkJdGhpcy5maWx0ZXJOb2Rl
WyJnYWluIl1bInZhbHVlIl0gPSBnYWluOw0KCQl0aGlzLmlucHV0Tm9kZVsiY29ubmVjdCJdKHRo
aXMuZmlsdGVyTm9kZSk7DQoJCXRoaXMuaW5wdXROb2RlWyJjb25uZWN0Il0odGhpcy5kcnlOb2Rl
KTsNCgkJdGhpcy5maWx0ZXJOb2RlWyJjb25uZWN0Il0odGhpcy53ZXROb2RlKTsNCgl9Ow0KCUZp
bHRlckVmZmVjdC5wcm90b3R5cGUuY29ubmVjdFRvID0gZnVuY3Rpb24gKG5vZGUpDQoJew0KCQl0
aGlzLndldE5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLndldE5vZGVbImNvbm5lY3QiXShu
b2RlKTsNCgkJdGhpcy5kcnlOb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5kcnlOb2RlWyJj
b25uZWN0Il0obm9kZSk7DQoJfTsNCglGaWx0ZXJFZmZlY3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1
bmN0aW9uICgpDQoJew0KCQl0aGlzLmlucHV0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMu
ZmlsdGVyTm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiZGlzY29ubmVjdCJd
KCk7DQoJCXRoaXMuZHJ5Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJfTsNCglGaWx0ZXJFZmZlY3Qu
cHJvdG90eXBlLmdldElucHV0Tm9kZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5p
bnB1dE5vZGU7DQoJfTsNCglGaWx0ZXJFZmZlY3QucHJvdG90eXBlLnNldFBhcmFtID0gZnVuY3Rp
b24ocGFyYW0sIHZhbHVlLCByYW1wLCB0aW1lKQ0KCXsNCgkJc3dpdGNoIChwYXJhbSkgew0KCQlj
YXNlIDA6CQkvLyBtaXgNCgkJCXZhbHVlID0gdmFsdWUgLyAxMDA7DQoJCQlpZiAodmFsdWUgPCAw
KSB2YWx1ZSA9IDA7DQoJCQlpZiAodmFsdWUgPiAxKSB2YWx1ZSA9IDE7DQoJCQl0aGlzLnBhcmFt
c1s1XSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLndldE5vZGVbImdhaW4iXSwgdmFs
dWUsIHJhbXAsIHRpbWUpOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLmRyeU5vZGVbImdhaW4iXSwg
MSAtIHZhbHVlLCByYW1wLCB0aW1lKTsNCgkJCWJyZWFrOw0KCQljYXNlIDE6CQkvLyBmaWx0ZXIg
ZnJlcXVlbmN5DQoJCQl0aGlzLnBhcmFtc1sxXSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0
aGlzLmZpbHRlck5vZGVbImZyZXF1ZW5jeSJdLCB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVh
azsNCgkJY2FzZSAyOgkJLy8gZmlsdGVyIGRldHVuZQ0KCQkJdGhpcy5wYXJhbXNbMl0gPSB2YWx1
ZTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy5maWx0ZXJOb2RlWyJkZXR1bmUiXSwgdmFsdWUsIHJh
bXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2UgMzoJCS8vIGZpbHRlciBRDQoJCQl0aGlzLnBh
cmFtc1szXSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLmZpbHRlck5vZGVbIlEiXSwg
dmFsdWUsIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2UgNDoJCS8vIGZpbHRlci9kZWxh
eSBnYWluIChub3RlIHZhbHVlIGlzIGluIGRCIGhlcmUpDQoJCQl0aGlzLnBhcmFtc1s0XSA9IHZh
bHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLmZpbHRlck5vZGVbImdhaW4iXSwgdmFsdWUsIHJh
bXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIERlbGF5RWZmZWN0KGRl
bGF5VGltZSwgZGVsYXlHYWluLCBtaXgpDQoJew0KCQl0aGlzLnR5cGUgPSAiZGVsYXkiOw0KCQl0
aGlzLnBhcmFtcyA9IFtkZWxheVRpbWUsIGRlbGF5R2FpbiwgbWl4XTsNCgkJdGhpcy5pbnB1dE5v
ZGUgPSBjcmVhdGVHYWluKCk7DQoJCXRoaXMud2V0Tm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhp
cy53ZXROb2RlWyJnYWluIl1bInZhbHVlIl0gPSBtaXg7DQoJCXRoaXMuZHJ5Tm9kZSA9IGNyZWF0
ZUdhaW4oKTsNCgkJdGhpcy5kcnlOb2RlWyJnYWluIl1bInZhbHVlIl0gPSAxIC0gbWl4Ow0KCQl0
aGlzLm1haW5Ob2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLmRlbGF5Tm9kZSA9IGNyZWF0ZURl
bGF5KGRlbGF5VGltZSk7DQoJCXRoaXMuZGVsYXlOb2RlWyJkZWxheVRpbWUiXVsidmFsdWUiXSA9
IGRlbGF5VGltZTsNCgkJdGhpcy5kZWxheUdhaW5Ob2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlz
LmRlbGF5R2Fpbk5vZGVbImdhaW4iXVsidmFsdWUiXSA9IGRlbGF5R2FpbjsNCgkJdGhpcy5pbnB1
dE5vZGVbImNvbm5lY3QiXSh0aGlzLm1haW5Ob2RlKTsNCgkJdGhpcy5pbnB1dE5vZGVbImNvbm5l
Y3QiXSh0aGlzLmRyeU5vZGUpOw0KCQl0aGlzLm1haW5Ob2RlWyJjb25uZWN0Il0odGhpcy53ZXRO
b2RlKTsNCgkJdGhpcy5tYWluTm9kZVsiY29ubmVjdCJdKHRoaXMuZGVsYXlOb2RlKTsNCgkJdGhp
cy5kZWxheU5vZGVbImNvbm5lY3QiXSh0aGlzLmRlbGF5R2Fpbk5vZGUpOw0KCQl0aGlzLmRlbGF5
R2Fpbk5vZGVbImNvbm5lY3QiXSh0aGlzLm1haW5Ob2RlKTsNCgl9Ow0KCURlbGF5RWZmZWN0LnBy
b3RvdHlwZS5jb25uZWN0VG8gPSBmdW5jdGlvbiAobm9kZSkNCgl7DQoJCXRoaXMud2V0Tm9kZVsi
ZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiY29ubmVjdCJdKG5vZGUpOw0KCQl0aGlz
LmRyeU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRyeU5vZGVbImNvbm5lY3QiXShub2Rl
KTsNCgl9Ow0KCURlbGF5RWZmZWN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJdGhpcy5pbnB1dE5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLm1haW5Ob2RlWyJkaXNj
b25uZWN0Il0oKTsNCgkJdGhpcy5kZWxheU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRl
bGF5R2Fpbk5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLndldE5vZGVbImRpc2Nvbm5lY3Qi
XSgpOw0KCQl0aGlzLmRyeU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCX07DQoJRGVsYXlFZmZlY3Qu
cHJvdG90eXBlLmdldElucHV0Tm9kZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5p
bnB1dE5vZGU7DQoJfTsNCglEZWxheUVmZmVjdC5wcm90b3R5cGUuc2V0UGFyYW0gPSBmdW5jdGlv
bihwYXJhbSwgdmFsdWUsIHJhbXAsIHRpbWUpDQoJew0KCQlzd2l0Y2ggKHBhcmFtKSB7DQoJCWNh
c2UgMDoJCS8vIG1peA0KCQkJdmFsdWUgPSB2YWx1ZSAvIDEwMDsNCgkJCWlmICh2YWx1ZSA8IDAp
IHZhbHVlID0gMDsNCgkJCWlmICh2YWx1ZSA+IDEpIHZhbHVlID0gMTsNCgkJCXRoaXMucGFyYW1z
WzJdID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMud2V0Tm9kZVsiZ2FpbiJdLCB2YWx1
ZSwgcmFtcCwgdGltZSk7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZHJ5Tm9kZVsiZ2FpbiJdLCAx
IC0gdmFsdWUsIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2UgNDoJCS8vIGZpbHRlci9k
ZWxheSBnYWluIChub3RlIHZhbHVlIGlzIHBhc3NlZCBpbiBkQiBidXQgbmVlZHMgdG8gYmUgbGlu
ZWFyIGhlcmUpDQoJCQl0aGlzLnBhcmFtc1sxXSA9IGRiVG9MaW5lYXIodmFsdWUpOw0KCQkJc2V0
QXVkaW9QYXJhbSh0aGlzLmRlbGF5R2Fpbk5vZGVbImdhaW4iXSwgZGJUb0xpbmVhcih2YWx1ZSks
IHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2UgNToJCS8vIGRlbGF5IHRpbWUNCgkJCXRo
aXMucGFyYW1zWzBdID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZGVsYXlOb2RlWyJk
ZWxheVRpbWUiXSwgdmFsdWUsIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCWZ1
bmN0aW9uIENvbnZvbHZlRWZmZWN0KGJ1ZmZlciwgbm9ybWFsaXplLCBtaXgsIHNyYykNCgl7DQoJ
CXRoaXMudHlwZSA9ICJjb252b2x2ZSI7DQoJCXRoaXMucGFyYW1zID0gW25vcm1hbGl6ZSwgbWl4
LCBzcmNdOw0KCQl0aGlzLmlucHV0Tm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy53ZXROb2Rl
ID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLndldE5vZGVbImdhaW4iXVsidmFsdWUiXSA9IG1peDsN
CgkJdGhpcy5kcnlOb2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLmRyeU5vZGVbImdhaW4iXVsi
dmFsdWUiXSA9IDEgLSBtaXg7DQoJCXRoaXMuY29udm9sdmVOb2RlID0gY29udGV4dFsiY3JlYXRl
Q29udm9sdmVyIl0oKTsNCgkJaWYgKGJ1ZmZlcikNCgkJew0KCQkJdGhpcy5jb252b2x2ZU5vZGVb
Im5vcm1hbGl6ZSJdID0gbm9ybWFsaXplOw0KCQkJdGhpcy5jb252b2x2ZU5vZGVbImJ1ZmZlciJd
ID0gYnVmZmVyOw0KCQl9DQoJCXRoaXMuaW5wdXROb2RlWyJjb25uZWN0Il0odGhpcy5jb252b2x2
ZU5vZGUpOw0KCQl0aGlzLmlucHV0Tm9kZVsiY29ubmVjdCJdKHRoaXMuZHJ5Tm9kZSk7DQoJCXRo
aXMuY29udm9sdmVOb2RlWyJjb25uZWN0Il0odGhpcy53ZXROb2RlKTsNCgl9Ow0KCUNvbnZvbHZl
RWZmZWN0LnByb3RvdHlwZS5jb25uZWN0VG8gPSBmdW5jdGlvbiAobm9kZSkNCgl7DQoJCXRoaXMu
d2V0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiY29ubmVjdCJdKG5vZGUp
Ow0KCQl0aGlzLmRyeU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRyeU5vZGVbImNvbm5l
Y3QiXShub2RlKTsNCgl9Ow0KCUNvbnZvbHZlRWZmZWN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJdGhpcy5pbnB1dE5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmNv
bnZvbHZlTm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiZGlzY29ubmVjdCJd
KCk7DQoJCXRoaXMuZHJ5Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJfTsNCglDb252b2x2ZUVmZmVj
dC5wcm90b3R5cGUuZ2V0SW5wdXROb2RlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlz
LmlucHV0Tm9kZTsNCgl9Ow0KCUNvbnZvbHZlRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1
bmN0aW9uKHBhcmFtLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJCXN3aXRjaCAocGFyYW0pIHsN
CgkJY2FzZSAwOgkJLy8gbWl4DQoJCQl2YWx1ZSA9IHZhbHVlIC8gMTAwOw0KCQkJaWYgKHZhbHVl
IDwgMCkgdmFsdWUgPSAwOw0KCQkJaWYgKHZhbHVlID4gMSkgdmFsdWUgPSAxOw0KCQkJdGhpcy5w
YXJhbXNbMV0gPSB2YWx1ZTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy53ZXROb2RlWyJnYWluIl0s
IHZhbHVlLCByYW1wLCB0aW1lKTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy5kcnlOb2RlWyJnYWlu
Il0sIDEgLSB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVhazsNCgkJfQ0KCX07DQoJZnVuY3Rp
b24gRmxhbmdlckVmZmVjdChkZWxheSwgbW9kdWxhdGlvbiwgZnJlcSwgZmVlZGJhY2ssIG1peCkN
Cgl7DQoJCXRoaXMudHlwZSA9ICJmbGFuZ2VyIjsNCgkJdGhpcy5wYXJhbXMgPSBbZGVsYXksIG1v
ZHVsYXRpb24sIGZyZXEsIGZlZWRiYWNrLCBtaXhdOw0KCQl0aGlzLmlucHV0Tm9kZSA9IGNyZWF0
ZUdhaW4oKTsNCgkJdGhpcy5kcnlOb2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLmRyeU5vZGVb
ImdhaW4iXVsidmFsdWUiXSA9IDEgLSAobWl4IC8gMik7DQoJCXRoaXMud2V0Tm9kZSA9IGNyZWF0
ZUdhaW4oKTsNCgkJdGhpcy53ZXROb2RlWyJnYWluIl1bInZhbHVlIl0gPSBtaXggLyAyOw0KCQl0
aGlzLmZlZWRiYWNrTm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy5mZWVkYmFja05vZGVbImdh
aW4iXVsidmFsdWUiXSA9IGZlZWRiYWNrOw0KCQl0aGlzLmRlbGF5Tm9kZSA9IGNyZWF0ZURlbGF5
KGRlbGF5ICsgbW9kdWxhdGlvbik7DQoJCXRoaXMuZGVsYXlOb2RlWyJkZWxheVRpbWUiXVsidmFs
dWUiXSA9IGRlbGF5Ow0KCQl0aGlzLm9zY05vZGUgPSBjb250ZXh0WyJjcmVhdGVPc2NpbGxhdG9y
Il0oKTsNCgkJdGhpcy5vc2NOb2RlWyJmcmVxdWVuY3kiXVsidmFsdWUiXSA9IGZyZXE7DQoJCXRo
aXMub3NjR2Fpbk5vZGUgPSBjcmVhdGVHYWluKCk7DQoJCXRoaXMub3NjR2Fpbk5vZGVbImdhaW4i
XVsidmFsdWUiXSA9IG1vZHVsYXRpb247DQoJCXRoaXMuaW5wdXROb2RlWyJjb25uZWN0Il0odGhp
cy5kZWxheU5vZGUpOw0KCQl0aGlzLmlucHV0Tm9kZVsiY29ubmVjdCJdKHRoaXMuZHJ5Tm9kZSk7
DQoJCXRoaXMuZGVsYXlOb2RlWyJjb25uZWN0Il0odGhpcy53ZXROb2RlKTsNCgkJdGhpcy5kZWxh
eU5vZGVbImNvbm5lY3QiXSh0aGlzLmZlZWRiYWNrTm9kZSk7DQoJCXRoaXMuZmVlZGJhY2tOb2Rl
WyJjb25uZWN0Il0odGhpcy5kZWxheU5vZGUpOw0KCQl0aGlzLm9zY05vZGVbImNvbm5lY3QiXSh0
aGlzLm9zY0dhaW5Ob2RlKTsNCgkJdGhpcy5vc2NHYWluTm9kZVsiY29ubmVjdCJdKHRoaXMuZGVs
YXlOb2RlWyJkZWxheVRpbWUiXSk7DQoJCXN0YXJ0U291cmNlKHRoaXMub3NjTm9kZSk7DQoJfTsN
CglGbGFuZ2VyRWZmZWN0LnByb3RvdHlwZS5jb25uZWN0VG8gPSBmdW5jdGlvbiAobm9kZSkNCgl7
DQoJCXRoaXMuZHJ5Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMuZHJ5Tm9kZVsiY29ubmVj
dCJdKG5vZGUpOw0KCQl0aGlzLndldE5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLndldE5v
ZGVbImNvbm5lY3QiXShub2RlKTsNCgl9Ow0KCUZsYW5nZXJFZmZlY3QucHJvdG90eXBlLnJlbW92
ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLmlucHV0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJ
CXRoaXMuZGVsYXlOb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5vc2NOb2RlWyJkaXNjb25u
ZWN0Il0oKTsNCgkJdGhpcy5vc2NHYWluTm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMuZHJ5
Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJ
CXRoaXMuZmVlZGJhY2tOb2RlWyJkaXNjb25uZWN0Il0oKTsNCgl9Ow0KCUZsYW5nZXJFZmZlY3Qu
cHJvdG90eXBlLmdldElucHV0Tm9kZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5p
bnB1dE5vZGU7DQoJfTsNCglGbGFuZ2VyRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1bmN0
aW9uKHBhcmFtLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJCXN3aXRjaCAocGFyYW0pIHsNCgkJ
Y2FzZSAwOgkJLy8gbWl4DQoJCQl2YWx1ZSA9IHZhbHVlIC8gMTAwOw0KCQkJaWYgKHZhbHVlIDwg
MCkgdmFsdWUgPSAwOw0KCQkJaWYgKHZhbHVlID4gMSkgdmFsdWUgPSAxOw0KCQkJdGhpcy5wYXJh
bXNbNF0gPSB2YWx1ZTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy53ZXROb2RlWyJnYWluIl0sIHZh
bHVlIC8gMiwgcmFtcCwgdGltZSk7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZHJ5Tm9kZVsiZ2Fp
biJdLCAxIC0gKHZhbHVlIC8gMiksIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2UgNjoJ
CS8vIG1vZHVsYXRpb24NCgkJCXRoaXMucGFyYW1zWzFdID0gdmFsdWUgLyAxMDAwOw0KCQkJc2V0
QXVkaW9QYXJhbSh0aGlzLm9zY0dhaW5Ob2RlWyJnYWluIl0sIHZhbHVlIC8gMTAwMCwgcmFtcCwg
dGltZSk7DQoJCQlicmVhazsNCgkJY2FzZSA3OgkJLy8gbW9kdWxhdGlvbiBmcmVxdWVuY3kNCgkJ
CXRoaXMucGFyYW1zWzJdID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMub3NjTm9kZVsi
ZnJlcXVlbmN5Il0sIHZhbHVlLCByYW1wLCB0aW1lKTsNCgkJCWJyZWFrOw0KCQljYXNlIDg6CQkv
LyBmZWVkYmFjaw0KCQkJdGhpcy5wYXJhbXNbM10gPSB2YWx1ZSAvIDEwMDsNCgkJCXNldEF1ZGlv
UGFyYW0odGhpcy5mZWVkYmFja05vZGVbImdhaW4iXSwgdmFsdWUgLyAxMDAsIHJhbXAsIHRpbWUp
Ow0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIFBoYXNlckVmZmVjdChmcmVxLCBkZXR1
bmUsIHEsIG1vZHVsYXRpb24sIG1vZGZyZXEsIG1peCkNCgl7DQoJCXRoaXMudHlwZSA9ICJwaGFz
ZXIiOw0KCQl0aGlzLnBhcmFtcyA9IFtmcmVxLCBkZXR1bmUsIHEsIG1vZHVsYXRpb24sIG1vZGZy
ZXEsIG1peF07DQoJCXRoaXMuaW5wdXROb2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLmRyeU5v
ZGUgPSBjcmVhdGVHYWluKCk7DQoJCXRoaXMuZHJ5Tm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gMSAt
IChtaXggLyAyKTsNCgkJdGhpcy53ZXROb2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLndldE5v
ZGVbImdhaW4iXVsidmFsdWUiXSA9IG1peCAvIDI7DQoJCXRoaXMuZmlsdGVyTm9kZSA9IGNvbnRl
eHRbImNyZWF0ZUJpcXVhZEZpbHRlciJdKCk7DQoJCWlmICh0eXBlb2YgdGhpcy5maWx0ZXJOb2Rl
WyJ0eXBlIl0gPT09ICJudW1iZXIiKQ0KCQkJdGhpcy5maWx0ZXJOb2RlWyJ0eXBlIl0gPSA3Owkv
LyBhbGwtcGFzcw0KCQllbHNlDQoJCQl0aGlzLmZpbHRlck5vZGVbInR5cGUiXSA9ICJhbGxwYXNz
IjsNCgkJdGhpcy5maWx0ZXJOb2RlWyJmcmVxdWVuY3kiXVsidmFsdWUiXSA9IGZyZXE7DQoJCWlm
ICh0aGlzLmZpbHRlck5vZGVbImRldHVuZSJdKQkJLy8gaU9TIDYgZG9lc24ndCBoYXZlIGRldHVu
ZSB5ZXQNCgkJCXRoaXMuZmlsdGVyTm9kZVsiZGV0dW5lIl1bInZhbHVlIl0gPSBkZXR1bmU7DQoJ
CXRoaXMuZmlsdGVyTm9kZVsiUSJdWyJ2YWx1ZSJdID0gcTsNCgkJdGhpcy5vc2NOb2RlID0gY29u
dGV4dFsiY3JlYXRlT3NjaWxsYXRvciJdKCk7DQoJCXRoaXMub3NjTm9kZVsiZnJlcXVlbmN5Il1b
InZhbHVlIl0gPSBtb2RmcmVxOw0KCQl0aGlzLm9zY0dhaW5Ob2RlID0gY3JlYXRlR2FpbigpOw0K
CQl0aGlzLm9zY0dhaW5Ob2RlWyJnYWluIl1bInZhbHVlIl0gPSBtb2R1bGF0aW9uOw0KCQl0aGlz
LmlucHV0Tm9kZVsiY29ubmVjdCJdKHRoaXMuZmlsdGVyTm9kZSk7DQoJCXRoaXMuaW5wdXROb2Rl
WyJjb25uZWN0Il0odGhpcy5kcnlOb2RlKTsNCgkJdGhpcy5maWx0ZXJOb2RlWyJjb25uZWN0Il0o
dGhpcy53ZXROb2RlKTsNCgkJdGhpcy5vc2NOb2RlWyJjb25uZWN0Il0odGhpcy5vc2NHYWluTm9k
ZSk7DQoJCXRoaXMub3NjR2Fpbk5vZGVbImNvbm5lY3QiXSh0aGlzLmZpbHRlck5vZGVbImZyZXF1
ZW5jeSJdKTsNCgkJc3RhcnRTb3VyY2UodGhpcy5vc2NOb2RlKTsNCgl9Ow0KCVBoYXNlckVmZmVj
dC5wcm90b3R5cGUuY29ubmVjdFRvID0gZnVuY3Rpb24gKG5vZGUpDQoJew0KCQl0aGlzLmRyeU5v
ZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRyeU5vZGVbImNvbm5lY3QiXShub2RlKTsNCgkJ
dGhpcy53ZXROb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy53ZXROb2RlWyJjb25uZWN0Il0o
bm9kZSk7DQoJfTsNCglQaGFzZXJFZmZlY3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgp
DQoJew0KCQl0aGlzLmlucHV0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMuZmlsdGVyTm9k
ZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMub3NjTm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRo
aXMub3NjR2Fpbk5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRyeU5vZGVbImRpc2Nvbm5l
Y3QiXSgpOw0KCQl0aGlzLndldE5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCX07DQoJUGhhc2VyRWZm
ZWN0LnByb3RvdHlwZS5nZXRJbnB1dE5vZGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRo
aXMuaW5wdXROb2RlOw0KCX07DQoJUGhhc2VyRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1
bmN0aW9uKHBhcmFtLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJCXN3aXRjaCAocGFyYW0pIHsN
CgkJY2FzZSAwOgkJLy8gbWl4DQoJCQl2YWx1ZSA9IHZhbHVlIC8gMTAwOw0KCQkJaWYgKHZhbHVl
IDwgMCkgdmFsdWUgPSAwOw0KCQkJaWYgKHZhbHVlID4gMSkgdmFsdWUgPSAxOw0KCQkJdGhpcy5w
YXJhbXNbNV0gPSB2YWx1ZTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy53ZXROb2RlWyJnYWluIl0s
IHZhbHVlIC8gMiwgcmFtcCwgdGltZSk7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZHJ5Tm9kZVsi
Z2FpbiJdLCAxIC0gKHZhbHVlIC8gMiksIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCWNhc2Ug
MToJCS8vIGZpbHRlciBmcmVxdWVuY3kNCgkJCXRoaXMucGFyYW1zWzBdID0gdmFsdWU7DQoJCQlz
ZXRBdWRpb1BhcmFtKHRoaXMuZmlsdGVyTm9kZVsiZnJlcXVlbmN5Il0sIHZhbHVlLCByYW1wLCB0
aW1lKTsNCgkJCWJyZWFrOw0KCQljYXNlIDI6CQkvLyBmaWx0ZXIgZGV0dW5lDQoJCQl0aGlzLnBh
cmFtc1sxXSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLmZpbHRlck5vZGVbImRldHVu
ZSJdLCB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVhazsNCgkJY2FzZSAzOgkJLy8gZmlsdGVy
IFENCgkJCXRoaXMucGFyYW1zWzJdID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZmls
dGVyTm9kZVsiUSJdLCB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVhazsNCgkJY2FzZSA2OgkJ
Ly8gbW9kdWxhdGlvbg0KCQkJdGhpcy5wYXJhbXNbM10gPSB2YWx1ZTsNCgkJCXNldEF1ZGlvUGFy
YW0odGhpcy5vc2NHYWluTm9kZVsiZ2FpbiJdLCB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVh
azsNCgkJY2FzZSA3OgkJLy8gbW9kdWxhdGlvbiBmcmVxdWVuY3kNCgkJCXRoaXMucGFyYW1zWzRd
ID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMub3NjTm9kZVsiZnJlcXVlbmN5Il0sIHZh
bHVlLCByYW1wLCB0aW1lKTsNCgkJCWJyZWFrOw0KCQl9DQoJfTsNCglmdW5jdGlvbiBHYWluRWZm
ZWN0KGcpDQoJew0KCQl0aGlzLnR5cGUgPSAiZ2FpbiI7DQoJCXRoaXMucGFyYW1zID0gW2ddOw0K
CQl0aGlzLm5vZGUgPSBjcmVhdGVHYWluKCk7DQoJCXRoaXMubm9kZVsiZ2FpbiJdWyJ2YWx1ZSJd
ID0gZzsNCgl9Ow0KCUdhaW5FZmZlY3QucHJvdG90eXBlLmNvbm5lY3RUbyA9IGZ1bmN0aW9uIChu
b2RlXykNCgl7DQoJCXRoaXMubm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMubm9kZVsiY29u
bmVjdCJdKG5vZGVfKTsNCgl9Ow0KCUdhaW5FZmZlY3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0
aW9uICgpDQoJew0KCQl0aGlzLm5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCX07DQoJR2FpbkVmZmVj
dC5wcm90b3R5cGUuZ2V0SW5wdXROb2RlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlz
Lm5vZGU7DQoJfTsNCglHYWluRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1bmN0aW9uKHBh
cmFtLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJCXN3aXRjaCAocGFyYW0pIHsNCgkJY2FzZSA0
OgkJLy8gZ2Fpbg0KCQkJdGhpcy5wYXJhbXNbMF0gPSBkYlRvTGluZWFyKHZhbHVlKTsNCgkJCXNl
dEF1ZGlvUGFyYW0odGhpcy5ub2RlWyJnYWluIl0sIGRiVG9MaW5lYXIodmFsdWUpLCByYW1wLCB0
aW1lKTsNCgkJCWJyZWFrOw0KCQl9DQoJfTsNCglmdW5jdGlvbiBUcmVtb2xvRWZmZWN0KGZyZXEs
IG1peCkNCgl7DQoJCXRoaXMudHlwZSA9ICJ0cmVtb2xvIjsNCgkJdGhpcy5wYXJhbXMgPSBbZnJl
cSwgbWl4XTsNCgkJdGhpcy5ub2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLm5vZGVbImdhaW4i
XVsidmFsdWUiXSA9IDEgLSAobWl4IC8gMik7DQoJCXRoaXMub3NjTm9kZSA9IGNvbnRleHRbImNy
ZWF0ZU9zY2lsbGF0b3IiXSgpOw0KCQl0aGlzLm9zY05vZGVbImZyZXF1ZW5jeSJdWyJ2YWx1ZSJd
ID0gZnJlcTsNCgkJdGhpcy5vc2NHYWluTm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy5vc2NH
YWluTm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gbWl4IC8gMjsNCgkJdGhpcy5vc2NOb2RlWyJjb25u
ZWN0Il0odGhpcy5vc2NHYWluTm9kZSk7DQoJCXRoaXMub3NjR2Fpbk5vZGVbImNvbm5lY3QiXSh0
aGlzLm5vZGVbImdhaW4iXSk7DQoJCXN0YXJ0U291cmNlKHRoaXMub3NjTm9kZSk7DQoJfTsNCglU
cmVtb2xvRWZmZWN0LnByb3RvdHlwZS5jb25uZWN0VG8gPSBmdW5jdGlvbiAobm9kZV8pDQoJew0K
CQl0aGlzLm5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLm5vZGVbImNvbm5lY3QiXShub2Rl
Xyk7DQoJfTsNCglUcmVtb2xvRWZmZWN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJdGhpcy5vc2NOb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5vc2NHYWluTm9kZVsi
ZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMubm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJfTsNCglUcmVt
b2xvRWZmZWN0LnByb3RvdHlwZS5nZXRJbnB1dE5vZGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0
dXJuIHRoaXMubm9kZTsNCgl9Ow0KCVRyZW1vbG9FZmZlY3QucHJvdG90eXBlLnNldFBhcmFtID0g
ZnVuY3Rpb24ocGFyYW0sIHZhbHVlLCByYW1wLCB0aW1lKQ0KCXsNCgkJc3dpdGNoIChwYXJhbSkg
ew0KCQljYXNlIDA6CQkvLyBtaXgNCgkJCXZhbHVlID0gdmFsdWUgLyAxMDA7DQoJCQlpZiAodmFs
dWUgPCAwKSB2YWx1ZSA9IDA7DQoJCQlpZiAodmFsdWUgPiAxKSB2YWx1ZSA9IDE7DQoJCQl0aGlz
LnBhcmFtc1sxXSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLm5vZGVbImdhaW4iXVsi
dmFsdWUiXSwgMSAtICh2YWx1ZSAvIDIpLCByYW1wLCB0aW1lKTsNCgkJCXNldEF1ZGlvUGFyYW0o
dGhpcy5vc2NHYWluTm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdLCB2YWx1ZSAvIDIsIHJhbXAsIHRpbWUp
Ow0KCQkJYnJlYWs7DQoJCWNhc2UgNzoJCS8vIG1vZHVsYXRpb24gZnJlcXVlbmN5DQoJCQl0aGlz
LnBhcmFtc1swXSA9IHZhbHVlOw0KCQkJc2V0QXVkaW9QYXJhbSh0aGlzLm9zY05vZGVbImZyZXF1
ZW5jeSJdLCB2YWx1ZSwgcmFtcCwgdGltZSk7DQoJCQlicmVhazsNCgkJfQ0KCX07DQoJZnVuY3Rp
b24gUmluZ01vZHVsYXRvckVmZmVjdChmcmVxLCBtaXgpDQoJew0KCQl0aGlzLnR5cGUgPSAicmlu
Z21vZCI7DQoJCXRoaXMucGFyYW1zID0gW2ZyZXEsIG1peF07DQoJCXRoaXMuaW5wdXROb2RlID0g
Y3JlYXRlR2FpbigpOw0KCQl0aGlzLndldE5vZGUgPSBjcmVhdGVHYWluKCk7DQoJCXRoaXMud2V0
Tm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gbWl4Ow0KCQl0aGlzLmRyeU5vZGUgPSBjcmVhdGVHYWlu
KCk7DQoJCXRoaXMuZHJ5Tm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gMSAtIG1peDsNCgkJdGhpcy5y
aW5nTm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy5yaW5nTm9kZVsiZ2FpbiJdWyJ2YWx1ZSJd
ID0gMDsNCgkJdGhpcy5vc2NOb2RlID0gY29udGV4dFsiY3JlYXRlT3NjaWxsYXRvciJdKCk7DQoJ
CXRoaXMub3NjTm9kZVsiZnJlcXVlbmN5Il1bInZhbHVlIl0gPSBmcmVxOw0KCQl0aGlzLm9zY05v
ZGVbImNvbm5lY3QiXSh0aGlzLnJpbmdOb2RlWyJnYWluIl0pOw0KCQlzdGFydFNvdXJjZSh0aGlz
Lm9zY05vZGUpOw0KCQl0aGlzLmlucHV0Tm9kZVsiY29ubmVjdCJdKHRoaXMucmluZ05vZGUpOw0K
CQl0aGlzLmlucHV0Tm9kZVsiY29ubmVjdCJdKHRoaXMuZHJ5Tm9kZSk7DQoJCXRoaXMucmluZ05v
ZGVbImNvbm5lY3QiXSh0aGlzLndldE5vZGUpOw0KCX07DQoJUmluZ01vZHVsYXRvckVmZmVjdC5w
cm90b3R5cGUuY29ubmVjdFRvID0gZnVuY3Rpb24gKG5vZGVfKQ0KCXsNCgkJdGhpcy53ZXROb2Rl
WyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy53ZXROb2RlWyJjb25uZWN0Il0obm9kZV8pOw0KCQl0
aGlzLmRyeU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQl0aGlzLmRyeU5vZGVbImNvbm5lY3QiXShu
b2RlXyk7DQoJfTsNCglSaW5nTW9kdWxhdG9yRWZmZWN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJdGhpcy5vc2NOb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5yaW5n
Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMuaW5wdXROb2RlWyJkaXNjb25uZWN0Il0oKTsN
CgkJdGhpcy53ZXROb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5kcnlOb2RlWyJkaXNjb25u
ZWN0Il0oKTsNCgl9Ow0KCVJpbmdNb2R1bGF0b3JFZmZlY3QucHJvdG90eXBlLmdldElucHV0Tm9k
ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5pbnB1dE5vZGU7DQoJfTsNCglSaW5n
TW9kdWxhdG9yRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtLCB2YWx1
ZSwgcmFtcCwgdGltZSkNCgl7DQoJCXN3aXRjaCAocGFyYW0pIHsNCgkJY2FzZSAwOgkJLy8gbWl4
DQoJCQl2YWx1ZSA9IHZhbHVlIC8gMTAwOw0KCQkJaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwOw0K
CQkJaWYgKHZhbHVlID4gMSkgdmFsdWUgPSAxOw0KCQkJdGhpcy5wYXJhbXNbMV0gPSB2YWx1ZTsN
CgkJCXNldEF1ZGlvUGFyYW0odGhpcy53ZXROb2RlWyJnYWluIl0sIHZhbHVlLCByYW1wLCB0aW1l
KTsNCgkJCXNldEF1ZGlvUGFyYW0odGhpcy5kcnlOb2RlWyJnYWluIl0sIDEgLSB2YWx1ZSwgcmFt
cCwgdGltZSk7DQoJCQlicmVhazsNCgkJY2FzZSA3OgkJLy8gbW9kdWxhdGlvbiBmcmVxdWVuY3kN
CgkJCXRoaXMucGFyYW1zWzBdID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMub3NjTm9k
ZVsiZnJlcXVlbmN5Il0sIHZhbHVlLCByYW1wLCB0aW1lKTsNCgkJCWJyZWFrOw0KCQl9DQoJfTsN
CglmdW5jdGlvbiBEaXN0b3J0aW9uRWZmZWN0KHRocmVzaG9sZCwgaGVhZHJvb20sIGRyaXZlLCBt
YWtldXBnYWluLCBtaXgpDQoJew0KCQl0aGlzLnR5cGUgPSAiZGlzdG9ydGlvbiI7DQoJCXRoaXMu
cGFyYW1zID0gW3RocmVzaG9sZCwgaGVhZHJvb20sIGRyaXZlLCBtYWtldXBnYWluLCBtaXhdOw0K
CQl0aGlzLmlucHV0Tm9kZSA9IGNyZWF0ZUdhaW4oKTsNCgkJdGhpcy5wcmVHYWluID0gY3JlYXRl
R2FpbigpOw0KCQl0aGlzLnBvc3RHYWluID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLnNldERyaXZl
KGRyaXZlLCBkYlRvTGluZWFyX25vY2FwKG1ha2V1cGdhaW4pKTsNCgkJdGhpcy53ZXROb2RlID0g
Y3JlYXRlR2FpbigpOw0KCQl0aGlzLndldE5vZGVbImdhaW4iXVsidmFsdWUiXSA9IG1peDsNCgkJ
dGhpcy5kcnlOb2RlID0gY3JlYXRlR2FpbigpOw0KCQl0aGlzLmRyeU5vZGVbImdhaW4iXVsidmFs
dWUiXSA9IDEgLSBtaXg7DQoJCXRoaXMud2F2ZVNoYXBlciA9IGNvbnRleHRbImNyZWF0ZVdhdmVT
aGFwZXIiXSgpOw0KCQl0aGlzLmN1cnZlID0gbmV3IEZsb2F0MzJBcnJheSg2NTUzNik7DQoJCXRo
aXMuZ2VuZXJhdGVDb2xvcnRvdWNoQ3VydmUodGhyZXNob2xkLCBoZWFkcm9vbSk7DQoJCXRoaXMu
d2F2ZVNoYXBlci5jdXJ2ZSA9IHRoaXMuY3VydmU7DQoJCXRoaXMuaW5wdXROb2RlWyJjb25uZWN0
Il0odGhpcy5wcmVHYWluKTsNCgkJdGhpcy5pbnB1dE5vZGVbImNvbm5lY3QiXSh0aGlzLmRyeU5v
ZGUpOw0KCQl0aGlzLnByZUdhaW5bImNvbm5lY3QiXSh0aGlzLndhdmVTaGFwZXIpOw0KCQl0aGlz
LndhdmVTaGFwZXJbImNvbm5lY3QiXSh0aGlzLnBvc3RHYWluKTsNCgkJdGhpcy5wb3N0R2Fpblsi
Y29ubmVjdCJdKHRoaXMud2V0Tm9kZSk7DQoJfTsNCglEaXN0b3J0aW9uRWZmZWN0LnByb3RvdHlw
ZS5zZXREcml2ZSA9IGZ1bmN0aW9uIChkcml2ZSwgbWFrZXVwZ2FpbikNCgl7DQoJCWlmIChkcml2
ZSA8IDAuMDEpDQoJCQlkcml2ZSA9IDAuMDE7DQoJCXRoaXMucHJlR2FpblsiZ2FpbiJdWyJ2YWx1
ZSJdID0gZHJpdmU7DQoJCXRoaXMucG9zdEdhaW5bImdhaW4iXVsidmFsdWUiXSA9IE1hdGgucG93
KDEgLyBkcml2ZSwgMC42KSAqIG1ha2V1cGdhaW47DQoJfTsNCglmdW5jdGlvbiBlNCh4LCBrKQ0K
CXsNCgkJcmV0dXJuIDEuMCAtIE1hdGguZXhwKC1rICogeCk7DQoJfQ0KCURpc3RvcnRpb25FZmZl
Y3QucHJvdG90eXBlLnNoYXBlID0gZnVuY3Rpb24gKHgsIGxpbmVhclRocmVzaG9sZCwgbGluZWFy
SGVhZHJvb20pDQoJew0KCQl2YXIgbWF4aW11bSA9IDEuMDUgKiBsaW5lYXJIZWFkcm9vbSAqIGxp
bmVhclRocmVzaG9sZDsNCgkJdmFyIGtrID0gKG1heGltdW0gLSBsaW5lYXJUaHJlc2hvbGQpOw0K
CQl2YXIgc2lnbiA9IHggPCAwID8gLTEgOiArMTsNCgkJdmFyIGFic3ggPSB4IDwgMCA/IC14IDog
eDsNCgkJdmFyIHNoYXBlZElucHV0ID0gYWJzeCA8IGxpbmVhclRocmVzaG9sZCA/IGFic3ggOiBs
aW5lYXJUaHJlc2hvbGQgKyBrayAqIGU0KGFic3ggLSBsaW5lYXJUaHJlc2hvbGQsIDEuMCAvIGtr
KTsNCgkJc2hhcGVkSW5wdXQgKj0gc2lnbjsNCgkJcmV0dXJuIHNoYXBlZElucHV0Ow0KCX07DQoJ
RGlzdG9ydGlvbkVmZmVjdC5wcm90b3R5cGUuZ2VuZXJhdGVDb2xvcnRvdWNoQ3VydmUgPSBmdW5j
dGlvbiAodGhyZXNob2xkLCBoZWFkcm9vbSkNCgl7DQoJCXZhciBsaW5lYXJUaHJlc2hvbGQgPSBk
YlRvTGluZWFyX25vY2FwKHRocmVzaG9sZCk7DQoJCXZhciBsaW5lYXJIZWFkcm9vbSA9IGRiVG9M
aW5lYXJfbm9jYXAoaGVhZHJvb20pOw0KCQl2YXIgbiA9IDY1NTM2Ow0KCQl2YXIgbjIgPSBuIC8g
MjsNCgkJdmFyIHggPSAwOw0KCQlmb3IgKHZhciBpID0gMDsgaSA8IG4yOyArK2kpIHsNCgkJCXgg
PSBpIC8gbjI7DQoJCQl4ID0gdGhpcy5zaGFwZSh4LCBsaW5lYXJUaHJlc2hvbGQsIGxpbmVhckhl
YWRyb29tKTsNCgkJCXRoaXMuY3VydmVbbjIgKyBpXSA9IHg7DQoJCQl0aGlzLmN1cnZlW24yIC0g
aSAtIDFdID0gLXg7DQoJCX0NCgl9Ow0KCURpc3RvcnRpb25FZmZlY3QucHJvdG90eXBlLmNvbm5l
Y3RUbyA9IGZ1bmN0aW9uIChub2RlKQ0KCXsNCgkJdGhpcy53ZXROb2RlWyJkaXNjb25uZWN0Il0o
KTsNCgkJdGhpcy53ZXROb2RlWyJjb25uZWN0Il0obm9kZSk7DQoJCXRoaXMuZHJ5Tm9kZVsiZGlz
Y29ubmVjdCJdKCk7DQoJCXRoaXMuZHJ5Tm9kZVsiY29ubmVjdCJdKG5vZGUpOw0KCX07DQoJRGlz
dG9ydGlvbkVmZmVjdC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMu
aW5wdXROb2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5wcmVHYWluWyJkaXNjb25uZWN0Il0o
KTsNCgkJdGhpcy53YXZlU2hhcGVyWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhpcy5wb3N0R2Fpblsi
ZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMud2V0Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMu
ZHJ5Tm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJfTsNCglEaXN0b3J0aW9uRWZmZWN0LnByb3RvdHlw
ZS5nZXRJbnB1dE5vZGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuaW5wdXROb2Rl
Ow0KCX07DQoJRGlzdG9ydGlvbkVmZmVjdC5wcm90b3R5cGUuc2V0UGFyYW0gPSBmdW5jdGlvbihw
YXJhbSwgdmFsdWUsIHJhbXAsIHRpbWUpDQoJew0KCQlzd2l0Y2ggKHBhcmFtKSB7DQoJCWNhc2Ug
MDoJCS8vIG1peA0KCQkJdmFsdWUgPSB2YWx1ZSAvIDEwMDsNCgkJCWlmICh2YWx1ZSA8IDApIHZh
bHVlID0gMDsNCgkJCWlmICh2YWx1ZSA+IDEpIHZhbHVlID0gMTsNCgkJCXRoaXMucGFyYW1zWzRd
ID0gdmFsdWU7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMud2V0Tm9kZVsiZ2FpbiJdLCB2YWx1ZSwg
cmFtcCwgdGltZSk7DQoJCQlzZXRBdWRpb1BhcmFtKHRoaXMuZHJ5Tm9kZVsiZ2FpbiJdLCAxIC0g
dmFsdWUsIHJhbXAsIHRpbWUpOw0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIENvbXBy
ZXNzb3JFZmZlY3QodGhyZXNob2xkLCBrbmVlLCByYXRpbywgYXR0YWNrLCByZWxlYXNlKQ0KCXsN
CgkJdGhpcy50eXBlID0gImNvbXByZXNzb3IiOw0KCQl0aGlzLnBhcmFtcyA9IFt0aHJlc2hvbGQs
IGtuZWUsIHJhdGlvLCBhdHRhY2ssIHJlbGVhc2VdOw0KCQl0aGlzLm5vZGUgPSBjb250ZXh0WyJj
cmVhdGVEeW5hbWljc0NvbXByZXNzb3IiXSgpOw0KCQl0cnkgew0KCQkJdGhpcy5ub2RlWyJ0aHJl
c2hvbGQiXVsidmFsdWUiXSA9IHRocmVzaG9sZDsNCgkJCXRoaXMubm9kZVsia25lZSJdWyJ2YWx1
ZSJdID0ga25lZTsNCgkJCXRoaXMubm9kZVsicmF0aW8iXVsidmFsdWUiXSA9IHJhdGlvOw0KCQkJ
dGhpcy5ub2RlWyJhdHRhY2siXVsidmFsdWUiXSA9IGF0dGFjazsNCgkJCXRoaXMubm9kZVsicmVs
ZWFzZSJdWyJ2YWx1ZSJdID0gcmVsZWFzZTsNCgkJfQ0KCQljYXRjaCAoZSkge30NCgl9Ow0KCUNv
bXByZXNzb3JFZmZlY3QucHJvdG90eXBlLmNvbm5lY3RUbyA9IGZ1bmN0aW9uIChub2RlXykNCgl7
DQoJCXRoaXMubm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCXRoaXMubm9kZVsiY29ubmVjdCJdKG5v
ZGVfKTsNCgl9Ow0KCUNvbXByZXNzb3JFZmZlY3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9u
ICgpDQoJew0KCQl0aGlzLm5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCX07DQoJQ29tcHJlc3NvckVm
ZmVjdC5wcm90b3R5cGUuZ2V0SW5wdXROb2RlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0
aGlzLm5vZGU7DQoJfTsNCglDb21wcmVzc29yRWZmZWN0LnByb3RvdHlwZS5zZXRQYXJhbSA9IGZ1
bmN0aW9uKHBhcmFtLCB2YWx1ZSwgcmFtcCwgdGltZSkNCgl7DQoJfTsNCglmdW5jdGlvbiBBbmFs
eXNlckVmZmVjdChmZnRTaXplLCBzbW9vdGhpbmcpDQoJew0KCQl0aGlzLnR5cGUgPSAiYW5hbHlz
ZXIiOw0KCQl0aGlzLnBhcmFtcyA9IFtmZnRTaXplLCBzbW9vdGhpbmddOw0KCQl0aGlzLm5vZGUg
PSBjb250ZXh0WyJjcmVhdGVBbmFseXNlciJdKCk7DQoJCXRoaXMubm9kZVsiZmZ0U2l6ZSJdID0g
ZmZ0U2l6ZTsNCgkJdGhpcy5ub2RlWyJzbW9vdGhpbmdUaW1lQ29uc3RhbnQiXSA9IHNtb290aGlu
ZzsNCgkJdGhpcy5mcmVxQmlucyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ub2RlWyJmcmVxdWVu
Y3lCaW5Db3VudCJdKTsNCgkJdGhpcy5zaWduYWwgPSBuZXcgVWludDhBcnJheShmZnRTaXplKTsN
CgkJdGhpcy5wZWFrID0gMDsNCgkJdGhpcy5ybXMgPSAwOw0KCX07DQoJQW5hbHlzZXJFZmZlY3Qu
cHJvdG90eXBlLnRpY2sgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5ub2RlWyJnZXRGbG9hdEZy
ZXF1ZW5jeURhdGEiXSh0aGlzLmZyZXFCaW5zKTsNCgkJdGhpcy5ub2RlWyJnZXRCeXRlVGltZURv
bWFpbkRhdGEiXSh0aGlzLnNpZ25hbCk7DQoJCXZhciBmZnRTaXplID0gdGhpcy5ub2RlWyJmZnRT
aXplIl07DQoJCXZhciBpID0gMDsNCgkJdGhpcy5wZWFrID0gMDsNCgkJdmFyIHJtc1NxdWFyZWRT
dW0gPSAwOw0KCQl2YXIgcyA9IDA7DQoJCWZvciAoIDsgaSA8IGZmdFNpemU7IGkrKykNCgkJew0K
CQkJcyA9ICh0aGlzLnNpZ25hbFtpXSAtIDEyOCkgLyAxMjg7DQoJCQlpZiAocyA8IDApDQoJCQkJ
cyA9IC1zOw0KCQkJaWYgKHRoaXMucGVhayA8IHMpDQoJCQkJdGhpcy5wZWFrID0gczsNCgkJCXJt
c1NxdWFyZWRTdW0gKz0gcyAqIHM7DQoJCX0NCgkJdGhpcy5wZWFrID0gbGluZWFyVG9EYih0aGlz
LnBlYWspOw0KCQl0aGlzLnJtcyA9IGxpbmVhclRvRGIoTWF0aC5zcXJ0KHJtc1NxdWFyZWRTdW0g
LyBmZnRTaXplKSk7DQoJfTsNCglBbmFseXNlckVmZmVjdC5wcm90b3R5cGUuY29ubmVjdFRvID0g
ZnVuY3Rpb24gKG5vZGVfKQ0KCXsNCgkJdGhpcy5ub2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJdGhp
cy5ub2RlWyJjb25uZWN0Il0obm9kZV8pOw0KCX07DQoJQW5hbHlzZXJFZmZlY3QucHJvdG90eXBl
LnJlbW92ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLm5vZGVbImRpc2Nvbm5lY3QiXSgpOw0K
CX07DQoJQW5hbHlzZXJFZmZlY3QucHJvdG90eXBlLmdldElucHV0Tm9kZSA9IGZ1bmN0aW9uICgp
DQoJew0KCQlyZXR1cm4gdGhpcy5ub2RlOw0KCX07DQoJQW5hbHlzZXJFZmZlY3QucHJvdG90eXBl
LnNldFBhcmFtID0gZnVuY3Rpb24ocGFyYW0sIHZhbHVlLCByYW1wLCB0aW1lKQ0KCXsNCgl9Ow0K
CWZ1bmN0aW9uIE9iamVjdFRyYWNrZXIoKQ0KCXsNCgkJdGhpcy5vYmogPSBudWxsOw0KCQl0aGlz
LmxvYWRVaWQgPSAwOw0KCX07DQoJT2JqZWN0VHJhY2tlci5wcm90b3R5cGUuc2V0T2JqZWN0ID0g
ZnVuY3Rpb24gKG9ial8pDQoJew0KCQl0aGlzLm9iaiA9IG9ial87DQoJfTsNCglPYmplY3RUcmFj
a2VyLnByb3RvdHlwZS5oYXNPYmplY3QgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICEhdGhp
cy5vYmo7DQoJfTsNCglPYmplY3RUcmFja2VyLnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24gKGR0
KQ0KCXsNCgl9Ow0KCWZ1bmN0aW9uIEMyQXVkaW9CdWZmZXIoc3JjXywgaXNfbXVzaWMpDQoJew0K
CQl0aGlzLnNyYyA9IHNyY187DQoJCXRoaXMubXlhcGkgPSBhcGk7DQoJCXRoaXMuaXNfbXVzaWMg
PSBpc19tdXNpYzsNCgkJdGhpcy5hZGRlZF9lbmRfbGlzdGVuZXIgPSBmYWxzZTsNCgkJdmFyIHNl
bGYgPSB0aGlzOw0KCQl0aGlzLm91dE5vZGUgPSBudWxsOw0KCQl0aGlzLm1lZGlhU291cmNlTm9k
ZSA9IG51bGw7DQoJCXRoaXMucGFuV2hlblJlYWR5ID0gW107CQkvLyBmb3Igd2ViIGF1ZGlvIEFQ
SSBwb3NpdGlvbmVkIHNvdW5kcw0KCQl0aGlzLnNlZWtXaGVuUmVhZHkgPSAwOw0KCQl0aGlzLnBh
dXNlV2hlblJlYWR5ID0gZmFsc2U7DQoJCXRoaXMuc3VwcG9ydFdlYkF1ZGlvQVBJID0gZmFsc2U7
DQoJCXRoaXMuZmFpbGVkVG9Mb2FkID0gZmFsc2U7DQoJCXRoaXMud2FzRXZlclJlYWR5ID0gZmFs
c2U7CS8vIGlmIGEgYnVmZmVyIGlzIGV2ZXIgbWFya2VkIGFzIHJlYWR5LCBpdCdzIHBlcm1hbmVu
dGx5IGNvbnNpZGVyZWQgcmVhZHkgYWZ0ZXIgdGhlbi4NCgkJaWYgKGFwaSA9PT0gQVBJX1dFQkFV
RElPICYmIGlzX211c2ljICYmICFwbGF5TXVzaWNBc1NvdW5kV29ya2Fyb3VuZCkNCgkJew0KCQkJ
dGhpcy5teWFwaSA9IEFQSV9IVE1MNTsNCgkJCXRoaXMub3V0Tm9kZSA9IGNyZWF0ZUdhaW4oKTsN
CgkJfQ0KCQl0aGlzLmJ1ZmZlck9iamVjdCA9IG51bGw7CQkJLy8gYWN0dWFsIGF1ZGlvIG9iamVj
dA0KCQl0aGlzLmF1ZGlvRGF0YSA9IG51bGw7CQkJCS8vIHdlYiBhdWRpbyBhcGk6IGFqYXggcmVx
dWVzdCByZXN1bHQgKGNvbXByZXNzZWQgYXVkaW8gdGhhdCBuZWVkcyBkZWNvZGluZykNCgkJdmFy
IHJlcXVlc3Q7DQoJCXN3aXRjaCAodGhpcy5teWFwaSkgew0KCQljYXNlIEFQSV9IVE1MNToNCgkJ
CXRoaXMuYnVmZmVyT2JqZWN0ID0gbmV3IEF1ZGlvKCk7DQoJCQl0aGlzLmJ1ZmZlck9iamVjdC5j
cm9zc09yaWdpbiA9ICJhbm9ueW1vdXMiOw0KCQkJdGhpcy5idWZmZXJPYmplY3QuYWRkRXZlbnRM
aXN0ZW5lcigiY2FucGxheXRocm91Z2giLCBmdW5jdGlvbiAoKSB7DQoJCQkJc2VsZi53YXNFdmVy
UmVhZHkgPSB0cnVlOwkvLyB1cGRhdGUgbG9hZGVkIHN0YXRlIHNvIHByZWxvYWQgaXMgY29uc2lk
ZXJlZCBjb21wbGV0ZQ0KCQkJfSk7DQoJCQlpZiAoYXBpID09PSBBUElfV0VCQVVESU8gJiYgY29u
dGV4dFsiY3JlYXRlTWVkaWFFbGVtZW50U291cmNlIl0gJiYgIS93aWl1L2kudGVzdChuYXZpZ2F0
b3IudXNlckFnZW50KSkNCgkJCXsNCgkJCQl0aGlzLnN1cHBvcnRXZWJBdWRpb0FQSSA9IHRydWU7
CQkvLyBjYW4gYmUgcm91dGVkIHRocm91Z2ggd2ViIGF1ZGlvIGFwaQ0KCQkJCXRoaXMuYnVmZmVy
T2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNhbnBsYXkiLCBmdW5jdGlvbiAoKQ0KCQkJCXsNCgkJ
CQkJaWYgKCFzZWxmLm1lZGlhU291cmNlTm9kZSAmJiBzZWxmLmJ1ZmZlck9iamVjdCkNCgkJCQkJ
ew0KCQkJCQkJc2VsZi5tZWRpYVNvdXJjZU5vZGUgPSBjb250ZXh0WyJjcmVhdGVNZWRpYUVsZW1l
bnRTb3VyY2UiXShzZWxmLmJ1ZmZlck9iamVjdCk7DQoJCQkJCQlzZWxmLm1lZGlhU291cmNlTm9k
ZVsiY29ubmVjdCJdKHNlbGYub3V0Tm9kZSk7DQoJCQkJCX0NCgkJCQl9KTsNCgkJCX0NCgkJCXRo
aXMuYnVmZmVyT2JqZWN0LmF1dG9wbGF5ID0gZmFsc2U7CS8vIHRoaXMgaXMgb25seSBhIHNvdXJj
ZSBidWZmZXIsIG5vdCBhbiBpbnN0YW5jZQ0KCQkJdGhpcy5idWZmZXJPYmplY3QucHJlbG9hZCA9
ICJhdXRvIjsNCgkJCXRoaXMuYnVmZmVyT2JqZWN0LnNyYyA9IHNyY187DQoJCQlicmVhazsNCgkJ
Y2FzZSBBUElfV0VCQVVESU86DQoJCQlpZiAoYXVkUnVudGltZS5pc1dLV2ViVmlldykNCgkJCXsN
CgkJCQlhdWRSdW50aW1lLmZldGNoTG9jYWxGaWxlVmlhQ29yZG92YUFzQXJyYXlCdWZmZXIoc3Jj
XywgZnVuY3Rpb24gKGFycmF5QnVmZmVyKQ0KCQkJCXsNCgkJCQkJc2VsZi5hdWRpb0RhdGEgPSBh
cnJheUJ1ZmZlcjsNCgkJCQkJc2VsZi5kZWNvZGVBdWRpb0J1ZmZlcigpOw0KCQkJCX0sIGZ1bmN0
aW9uIChlcnIpDQoJCQkJew0KCQkJCQlzZWxmLmZhaWxlZFRvTG9hZCA9IHRydWU7DQoJCQkJfSk7
DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgp
Ow0KCQkJCXJlcXVlc3Qub3BlbigiR0VUIiwgc3JjXywgdHJ1ZSk7DQoJCQkJcmVxdWVzdC5yZXNw
b25zZVR5cGUgPSAiYXJyYXlidWZmZXIiOw0KCQkJCXJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24g
KCkgew0KCQkJCQlzZWxmLmF1ZGlvRGF0YSA9IHJlcXVlc3QucmVzcG9uc2U7DQoJCQkJCXNlbGYu
ZGVjb2RlQXVkaW9CdWZmZXIoKTsNCgkJCQl9Ow0KCQkJCXJlcXVlc3Qub25lcnJvciA9IGZ1bmN0
aW9uICgpIHsNCgkJCQkJc2VsZi5mYWlsZWRUb0xvYWQgPSB0cnVlOw0KCQkJCX07DQoJCQkJcmVx
dWVzdC5zZW5kKCk7DQoJCQl9DQoJCQlicmVhazsNCgkJY2FzZSBBUElfQ09SRE9WQToNCgkJCXRo
aXMuYnVmZmVyT2JqZWN0ID0gdHJ1ZTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9BUFBNT0JJOg0K
CQkJdGhpcy5idWZmZXJPYmplY3QgPSB0cnVlOw0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCUMyQXVk
aW9CdWZmZXIucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxl
biwgaiwgYTsNCgkJZm9yIChpID0gMCwgaiA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQlhID0gYXVkaW9JbnN0YW5jZXNbaV07DQoJCQlhdWRp
b0luc3RhbmNlc1tqXSA9IGE7DQoJCQlpZiAoYS5idWZmZXIgPT09IHRoaXMpDQoJCQkJYS5zdG9w
KCk7DQoJCQllbHNlDQoJCQkJKytqOwkJLy8ga2VlcA0KCQl9DQoJCWF1ZGlvSW5zdGFuY2VzLmxl
bmd0aCA9IGo7DQoJCWlmICh0aGlzLm1lZGlhU291cmNlTm9kZSkNCgkJew0KCQkJdGhpcy5tZWRp
YVNvdXJjZU5vZGVbImRpc2Nvbm5lY3QiXSgpOw0KCQkJdGhpcy5tZWRpYVNvdXJjZU5vZGUgPSBu
dWxsOw0KCQl9DQoJCWlmICh0aGlzLm91dE5vZGUpDQoJCXsNCgkJCXRoaXMub3V0Tm9kZVsiZGlz
Y29ubmVjdCJdKCk7DQoJCQl0aGlzLm91dE5vZGUgPSBudWxsOw0KCQl9DQoJCXRoaXMuYnVmZmVy
T2JqZWN0ID0gbnVsbDsNCgkJdGhpcy5hdWRpb0RhdGEgPSBudWxsOw0KCX07DQoJQzJBdWRpb0J1
ZmZlci5wcm90b3R5cGUuZGVjb2RlQXVkaW9CdWZmZXIgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYg
KHRoaXMuYnVmZmVyT2JqZWN0IHx8ICF0aGlzLmF1ZGlvRGF0YSkNCgkJCXJldHVybjsJCS8vIGF1
ZGlvIGFscmVhZHkgZGVjb2RlZCBvciBBSkFYIHJlcXVlc3Qgbm90IHlldCBjb21wbGV0ZQ0KCQl2
YXIgc2VsZiA9IHRoaXM7DQoJCWlmIChjb250ZXh0WyJkZWNvZGVBdWRpb0RhdGEiXSkNCgkJew0K
CQkJY29udGV4dFsiZGVjb2RlQXVkaW9EYXRhIl0odGhpcy5hdWRpb0RhdGEsIGZ1bmN0aW9uIChi
dWZmZXIpIHsNCgkJCQkJc2VsZi5idWZmZXJPYmplY3QgPSBidWZmZXI7DQoJCQkJCXNlbGYuYXVk
aW9EYXRhID0gbnVsbDsJCS8vIGNsZWFyIEFKQVggcmVzcG9uc2UgdG8gYWxsb3cgR0MgYW5kIHNh
dmUgbWVtb3J5LCBvbmx5IG5lZWQgdGhlIGJ1ZmZlck9iamVjdCBub3cNCgkJCQkJdmFyIHAsIGks
IGxlbiwgYTsNCgkJCQkJaWYgKCFjci5pc191bmRlZmluZWQoc2VsZi5wbGF5VGFnV2hlblJlYWR5
KSAmJiAhc2lsZW50KQ0KCQkJCQl7DQoJCQkJCQlpZiAoc2VsZi5wYW5XaGVuUmVhZHkubGVuZ3Ro
KQ0KCQkJCQkJew0KCQkJCQkJCWZvciAoaSA9IDAsIGxlbiA9IHNlbGYucGFuV2hlblJlYWR5Lmxl
bmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcCA9IHNlbGYucGFuV2hlblJl
YWR5W2ldOw0KCQkJCQkJCQlhID0gbmV3IEMyQXVkaW9JbnN0YW5jZShzZWxmLCBwLnRoaXN0YWcp
Ow0KCQkJCQkJCQlhLnNldFBhbm5lckVuYWJsZWQodHJ1ZSk7DQoJCQkJCQkJCWlmICh0eXBlb2Yg
cC5vYmpVaWQgIT09ICJ1bmRlZmluZWQiKQ0KCQkJCQkJCQl7DQoJCQkJCQkJCQlwLm9iaiA9IGF1
ZFJ1bnRpbWUuZ2V0T2JqZWN0QnlVSUQocC5vYmpVaWQpOw0KCQkJCQkJCQkJaWYgKCFwLm9iaikN
CgkJCQkJCQkJCQljb250aW51ZTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQlpZiAocC5vYmopDQoJCQkJ
CQkJCXsNCgkJCQkJCQkJCXZhciBweCA9IGNyLnJvdGF0ZVB0QXJvdW5kKHAub2JqLngsIHAub2Jq
LnksIC1wLm9iai5sYXllci5nZXRBbmdsZSgpLCBsaXN0ZW5lclgsIGxpc3RlbmVyWSwgdHJ1ZSk7
DQoJCQkJCQkJCQl2YXIgcHkgPSBjci5yb3RhdGVQdEFyb3VuZChwLm9iai54LCBwLm9iai55LCAt
cC5vYmoubGF5ZXIuZ2V0QW5nbGUoKSwgbGlzdGVuZXJYLCBsaXN0ZW5lclksIGZhbHNlKTsNCgkJ
CQkJCQkJCWEuc2V0UGFuKHB4LCBweSwgY3IudG9fZGVncmVlcyhwLm9iai5hbmdsZSAtIHAub2Jq
LmxheWVyLmdldEFuZ2xlKCkpLCBwLmlhLCBwLm9hLCBwLm9nKTsNCgkJCQkJCQkJCWEuc2V0T2Jq
ZWN0KHAub2JqKTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQllbHNlDQoJCQkJCQkJCXsNCgkJCQkJCQkJ
CWEuc2V0UGFuKHAueCwgcC55LCBwLmEsIHAuaWEsIHAub2EsIHAub2cpOw0KCQkJCQkJCQl9DQoJ
CQkJCQkJCWEucGxheShzZWxmLmxvb3BXaGVuUmVhZHksIHNlbGYudm9sdW1lV2hlblJlYWR5LCBz
ZWxmLnNlZWtXaGVuUmVhZHkpOw0KCQkJCQkJCQlpZiAoc2VsZi5wYXVzZVdoZW5SZWFkeSkNCgkJ
CQkJCQkJCWEucGF1c2UoKTsNCgkJCQkJCQkJYXVkaW9JbnN0YW5jZXMucHVzaChhKTsNCgkJCQkJ
CQl9DQoJCQkJCQkJY3IuY2xlYXJBcnJheShzZWxmLnBhbldoZW5SZWFkeSk7DQoJCQkJCQl9DQoJ
CQkJCQllbHNlDQoJCQkJCQl7DQoJCQkJCQkJYSA9IG5ldyBDMkF1ZGlvSW5zdGFuY2Uoc2VsZiwg
c2VsZi5wbGF5VGFnV2hlblJlYWR5IHx8ICIiKTsJCS8vIHNvbWV0aW1lcyBwbGF5VGFnV2hlblJl
YWR5IGlzIG5vdCBzZXQgLSBUT0RPOiB3aHk/DQoJCQkJCQkJYS5wbGF5KHNlbGYubG9vcFdoZW5S
ZWFkeSwgc2VsZi52b2x1bWVXaGVuUmVhZHksIHNlbGYuc2Vla1doZW5SZWFkeSk7DQoJCQkJCQkJ
aWYgKHNlbGYucGF1c2VXaGVuUmVhZHkpDQoJCQkJCQkJCWEucGF1c2UoKTsNCgkJCQkJCQlhdWRp
b0luc3RhbmNlcy5wdXNoKGEpOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWVsc2UgaWYgKCFjci5p
c191bmRlZmluZWQoc2VsZi5jb252b2x2ZVdoZW5SZWFkeSkpDQoJCQkJCXsNCgkJCQkJCXZhciBj
b252b2x2ZU5vZGUgPSBzZWxmLmNvbnZvbHZlV2hlblJlYWR5LmNvbnZvbHZlTm9kZTsNCgkJCQkJ
CWNvbnZvbHZlTm9kZVsibm9ybWFsaXplIl0gPSBzZWxmLm5vcm1hbGl6ZVdoZW5SZWFkeTsNCgkJ
CQkJCWNvbnZvbHZlTm9kZVsiYnVmZmVyIl0gPSBidWZmZXI7DQoJCQkJCX0NCgkJCX0sIGZ1bmN0
aW9uIChlKSB7DQoJCQkJc2VsZi5mYWlsZWRUb0xvYWQgPSB0cnVlOw0KCQkJfSk7DQoJCX0NCgkJ
ZWxzZQ0KCQl7DQoJCQl0aGlzLmJ1ZmZlck9iamVjdCA9IGNvbnRleHRbImNyZWF0ZUJ1ZmZlciJd
KHRoaXMuYXVkaW9EYXRhLCBmYWxzZSk7DQoJCQl0aGlzLmF1ZGlvRGF0YSA9IG51bGw7CQkvLyBj
bGVhciBBSkFYIHJlc3BvbnNlIHRvIGFsbG93IEdDIGFuZCBzYXZlIG1lbW9yeSwgb25seSBuZWVk
IHRoZSBidWZmZXJPYmplY3Qgbm93DQoJCQlpZiAoIWNyLmlzX3VuZGVmaW5lZCh0aGlzLnBsYXlU
YWdXaGVuUmVhZHkpICYmICFzaWxlbnQpDQoJCQl7DQoJCQkJdmFyIGEgPSBuZXcgQzJBdWRpb0lu
c3RhbmNlKHRoaXMsIHRoaXMucGxheVRhZ1doZW5SZWFkeSk7DQoJCQkJYS5wbGF5KHRoaXMubG9v
cFdoZW5SZWFkeSwgdGhpcy52b2x1bWVXaGVuUmVhZHksIHRoaXMuc2Vla1doZW5SZWFkeSk7DQoJ
CQkJaWYgKHRoaXMucGF1c2VXaGVuUmVhZHkpDQoJCQkJCWEucGF1c2UoKTsNCgkJCQlhdWRpb0lu
c3RhbmNlcy5wdXNoKGEpOw0KCQkJfQ0KCQkJZWxzZSBpZiAoIWNyLmlzX3VuZGVmaW5lZCh0aGlz
LmNvbnZvbHZlV2hlblJlYWR5KSkNCgkJCXsNCgkJCQl2YXIgY29udm9sdmVOb2RlID0gdGhpcy5j
b252b2x2ZVdoZW5SZWFkeS5jb252b2x2ZU5vZGU7DQoJCQkJY29udm9sdmVOb2RlWyJub3JtYWxp
emUiXSA9IHRoaXMubm9ybWFsaXplV2hlblJlYWR5Ow0KCQkJCWNvbnZvbHZlTm9kZVsiYnVmZmVy
Il0gPSB0aGlzLmJ1ZmZlck9iamVjdDsNCgkJCX0NCgkJfQ0KCX07DQoJQzJBdWRpb0J1ZmZlci5w
cm90b3R5cGUuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJc3dpdGNoICh0aGlzLm15YXBp
KSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJdmFyIHJldCA9IHRoaXMuYnVmZmVyT2JqZWN0WyJy
ZWFkeVN0YXRlIl0gPj0gNDsJLy8gSEFWRV9FTk9VR0hfREFUQQ0KCQkJaWYgKHJldCkNCgkJCQl0
aGlzLndhc0V2ZXJSZWFkeSA9IHRydWU7DQoJCQlyZXR1cm4gcmV0IHx8IHRoaXMud2FzRXZlclJl
YWR5Ow0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCXJldHVybiAhIXRoaXMuYXVkaW9EYXRhIHx8
ICEhdGhpcy5idWZmZXJPYmplY3Q7DQoJCWNhc2UgQVBJX0NPUkRPVkE6DQoJCQlyZXR1cm4gdHJ1
ZTsNCgkJY2FzZSBBUElfQVBQTU9CSToNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoJCXJldHVybiBm
YWxzZTsNCgl9Ow0KCUMyQXVkaW9CdWZmZXIucHJvdG90eXBlLmlzTG9hZGVkQW5kRGVjb2RlZCA9
IGZ1bmN0aW9uICgpDQoJew0KCQlzd2l0Y2ggKHRoaXMubXlhcGkpIHsNCgkJY2FzZSBBUElfSFRN
TDU6DQoJCQlyZXR1cm4gdGhpcy5pc0xvYWRlZCgpOwkJLy8gbm8gZGlzdGluY3Rpb24gYmV0d2Vl
biBsb2FkZWQgYW5kIGRlY29kZWQgaW4gSFRNTDUgYXVkaW8sIGp1c3QgcmVseSBvbiByZWFkeSBz
dGF0ZQ0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCXJldHVybiAhIXRoaXMuYnVmZmVyT2JqZWN0
Ow0KCQljYXNlIEFQSV9DT1JET1ZBOg0KCQkJcmV0dXJuIHRydWU7DQoJCWNhc2UgQVBJX0FQUE1P
Qkk6DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCglDMkF1ZGlv
QnVmZmVyLnByb3RvdHlwZS5oYXNGYWlsZWRUb0xvYWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJc3dp
dGNoICh0aGlzLm15YXBpKSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJcmV0dXJuICEhdGhpcy5i
dWZmZXJPYmplY3RbImVycm9yIl07DQoJCWNhc2UgQVBJX1dFQkFVRElPOg0KCQkJcmV0dXJuIHRo
aXMuZmFpbGVkVG9Mb2FkOw0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0KCWZ1bmN0aW9uIEMy
QXVkaW9JbnN0YW5jZShidWZmZXJfLCB0YWdfKQ0KCXsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQl0
aGlzLnRhZyA9IHRhZ187DQoJCXRoaXMuZnJlc2ggPSB0cnVlOw0KCQl0aGlzLnN0b3BwZWQgPSB0
cnVlOw0KCQl0aGlzLnNyYyA9IGJ1ZmZlcl8uc3JjOw0KCQl0aGlzLmJ1ZmZlciA9IGJ1ZmZlcl87
DQoJCXRoaXMubXlhcGkgPSBhcGk7DQoJCXRoaXMuaXNfbXVzaWMgPSBidWZmZXJfLmlzX211c2lj
Ow0KCQl0aGlzLnBsYXliYWNrUmF0ZSA9IDE7DQoJCXRoaXMuaGFzUGxheWJhY2tFbmRlZCA9IHRy
dWU7CS8vIGVuZGVkIGZsYWcNCgkJdGhpcy5yZXN1bWVfbWUgPSBmYWxzZTsJCQkvLyBtYWtlIHN1
cmUgcmVzdW1lcyB3aGVuIGxlYXZpbmcgc3VzcGVuZA0KCQl0aGlzLmlzX3BhdXNlZCA9IGZhbHNl
Ow0KCQl0aGlzLnJlc3VtZV9wb3NpdGlvbiA9IDA7CQkvLyBmb3Igd2ViIGF1ZGlvIGFwaSB0byBy
ZXN1bWUgZnJvbSBjb3JyZWN0IHBsYXliYWNrIHBvc2l0aW9uDQoJCXRoaXMubG9vcGluZyA9IGZh
bHNlOw0KCQl0aGlzLmlzX211dGVkID0gZmFsc2U7DQoJCXRoaXMuaXNfc2lsZW50ID0gZmFsc2U7
DQoJCXRoaXMudm9sdW1lID0gMTsNCgkJdGhpcy5vbmVuZGVkX2hhbmRsZXIgPSBmdW5jdGlvbiAo
ZSkNCgkJew0KCQkJaWYgKHNlbGYuaXNfcGF1c2VkIHx8IHNlbGYucmVzdW1lX21lKQ0KCQkJCXJl
dHVybjsNCgkJCXZhciBidWZmZXJUaGF0RW5kZWQgPSB0aGlzOw0KCQkJaWYgKCFidWZmZXJUaGF0
RW5kZWQpDQoJCQkJYnVmZmVyVGhhdEVuZGVkID0gZS50YXJnZXQ7DQoJCQlpZiAoYnVmZmVyVGhh
dEVuZGVkICE9PSBzZWxmLmFjdGl2ZV9idWZmZXIpDQoJCQkJcmV0dXJuOw0KCQkJc2VsZi5oYXNQ
bGF5YmFja0VuZGVkID0gdHJ1ZTsNCgkJCXNlbGYuc3RvcHBlZCA9IHRydWU7DQoJCQlhdWRUYWcg
PSBzZWxmLnRhZzsNCgkJCWF1ZFJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5BdWRpby5wcm90
b3R5cGUuY25kcy5PbkVuZGVkLCBhdWRJbnN0KTsNCgkJfTsNCgkJdGhpcy5hY3RpdmVfYnVmZmVy
ID0gbnVsbDsNCgkJdGhpcy5pc1RpbWVzY2FsZWQgPSAoKHRpbWVzY2FsZV9tb2RlID09PSAxICYm
ICF0aGlzLmlzX211c2ljKSB8fCB0aW1lc2NhbGVfbW9kZSA9PT0gMik7DQoJCXRoaXMubXV0ZXZv
bCA9IDE7DQoJCXRoaXMuc3RhcnRUaW1lID0gKHRoaXMuaXNUaW1lc2NhbGVkID8gYXVkUnVudGlt
ZS5rYWhhblRpbWUuc3VtIDogYXVkUnVudGltZS53YWxsVGltZS5zdW0pOw0KCQl0aGlzLmdhaW5O
b2RlID0gbnVsbDsNCgkJdGhpcy5wYW5uZXJOb2RlID0gbnVsbDsNCgkJdGhpcy5wYW5uZXJFbmFi
bGVkID0gZmFsc2U7DQoJCXRoaXMub2JqZWN0VHJhY2tlciA9IG51bGw7DQoJCXRoaXMucGFuWCA9
IDA7DQoJCXRoaXMucGFuWSA9IDA7DQoJCXRoaXMucGFuQW5nbGUgPSAwOw0KCQl0aGlzLnBhbkNv
bmVJbm5lciA9IDA7DQoJCXRoaXMucGFuQ29uZU91dGVyID0gMDsNCgkJdGhpcy5wYW5Db25lT3V0
ZXJHYWluID0gMDsNCgkJdGhpcy5pbnN0YW5jZU9iamVjdCA9IG51bGw7DQoJCXZhciBhZGRfZW5k
X2xpc3RlbmVyID0gZmFsc2U7DQoJCWlmICh0aGlzLm15YXBpID09PSBBUElfV0VCQVVESU8gJiYg
dGhpcy5idWZmZXIubXlhcGkgPT09IEFQSV9IVE1MNSAmJiAhdGhpcy5idWZmZXIuc3VwcG9ydFdl
YkF1ZGlvQVBJKQ0KCQkJdGhpcy5teWFwaSA9IEFQSV9IVE1MNTsNCgkJc3dpdGNoICh0aGlzLm15
YXBpKSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJaWYgKHRoaXMuaXNfbXVzaWMpDQoJCQl7DQoJ
CQkJdGhpcy5pbnN0YW5jZU9iamVjdCA9IGJ1ZmZlcl8uYnVmZmVyT2JqZWN0Ow0KCQkJCWFkZF9l
bmRfbGlzdGVuZXIgPSAhYnVmZmVyXy5hZGRlZF9lbmRfbGlzdGVuZXI7DQoJCQkJYnVmZmVyXy5h
ZGRlZF9lbmRfbGlzdGVuZXIgPSB0cnVlOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRoaXMu
aW5zdGFuY2VPYmplY3QgPSBuZXcgQXVkaW8oKTsNCgkJCQl0aGlzLmluc3RhbmNlT2JqZWN0LmNy
b3NzT3JpZ2luID0gImFub255bW91cyI7DQoJCQkJdGhpcy5pbnN0YW5jZU9iamVjdC5hdXRvcGxh
eSA9IGZhbHNlOw0KCQkJCXRoaXMuaW5zdGFuY2VPYmplY3Quc3JjID0gYnVmZmVyXy5idWZmZXJP
YmplY3Quc3JjOw0KCQkJCWFkZF9lbmRfbGlzdGVuZXIgPSB0cnVlOw0KCQkJfQ0KCQkJaWYgKGFk
ZF9lbmRfbGlzdGVuZXIpDQoJCQl7DQoJCQkJdGhpcy5pbnN0YW5jZU9iamVjdC5hZGRFdmVudExp
c3RlbmVyKCdlbmRlZCcsIGZ1bmN0aW9uICgpIHsNCgkJCQkJCWF1ZFRhZyA9IHNlbGYudGFnOw0K
CQkJCQkJc2VsZi5zdG9wcGVkID0gdHJ1ZTsNCgkJCQkJCWF1ZFJ1bnRpbWUudHJpZ2dlcihjci5w
bHVnaW5zXy5BdWRpby5wcm90b3R5cGUuY25kcy5PbkVuZGVkLCBhdWRJbnN0KTsNCgkJCQl9KTsN
CgkJCX0NCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCXRoaXMuZ2Fpbk5vZGUg
PSBjcmVhdGVHYWluKCk7DQoJCQl0aGlzLmdhaW5Ob2RlWyJjb25uZWN0Il0oZ2V0RGVzdGluYXRp
b25Gb3JUYWcodGFnXykpOw0KCQkJaWYgKHRoaXMuYnVmZmVyLm15YXBpID09PSBBUElfV0VCQVVE
SU8pDQoJCQl7DQoJCQkJaWYgKGJ1ZmZlcl8uYnVmZmVyT2JqZWN0KQ0KCQkJCXsNCgkJCQkJdGhp
cy5pbnN0YW5jZU9iamVjdCA9IGNvbnRleHRbImNyZWF0ZUJ1ZmZlclNvdXJjZSJdKCk7DQoJCQkJ
CXRoaXMuaW5zdGFuY2VPYmplY3RbImJ1ZmZlciJdID0gYnVmZmVyXy5idWZmZXJPYmplY3Q7DQoJ
CQkJCXRoaXMuaW5zdGFuY2VPYmplY3RbImNvbm5lY3QiXSh0aGlzLmdhaW5Ob2RlKTsNCgkJCQl9
DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJdGhpcy5pbnN0YW5jZU9iamVjdCA9IHRoaXMuYnVm
ZmVyLmJ1ZmZlck9iamVjdDsJCS8vIHJlZmVyZW5jZSB0aGUgYXVkaW8gZWxlbWVudA0KCQkJCXRo
aXMuYnVmZmVyLm91dE5vZGVbImNvbm5lY3QiXSh0aGlzLmdhaW5Ob2RlKTsNCgkJCQlpZiAoIXRo
aXMuYnVmZmVyLmFkZGVkX2VuZF9saXN0ZW5lcikNCgkJCQl7DQoJCQkJCXRoaXMuYnVmZmVyLmFk
ZGVkX2VuZF9saXN0ZW5lciA9IHRydWU7DQoJCQkJCXRoaXMuYnVmZmVyLmJ1ZmZlck9iamVjdC5h
ZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGZ1bmN0aW9uICgpIHsNCgkJCQkJCQlhdWRUYWcgPSBz
ZWxmLnRhZzsNCgkJCQkJCQlzZWxmLnN0b3BwZWQgPSB0cnVlOw0KCQkJCQkJCWF1ZFJ1bnRpbWUu
dHJpZ2dlcihjci5wbHVnaW5zXy5BdWRpby5wcm90b3R5cGUuY25kcy5PbkVuZGVkLCBhdWRJbnN0
KTsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0NPUkRPVkE6
DQoJCQl0aGlzLmluc3RhbmNlT2JqZWN0ID0gbmV3IHdpbmRvd1siTWVkaWEiXShhcHBQYXRoICsg
dGhpcy5zcmMsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChzdGF0dXMpIHsNCgkJCQkJaWYgKHN0YXR1
cyA9PT0gd2luZG93WyJNZWRpYSJdWyJNRURJQV9TVE9QUEVEIl0pDQoJCQkJCXsNCgkJCQkJCXNl
bGYuaGFzUGxheWJhY2tFbmRlZCA9IHRydWU7DQoJCQkJCQlzZWxmLnN0b3BwZWQgPSB0cnVlOw0K
CQkJCQkJYXVkVGFnID0gc2VsZi50YWc7DQoJCQkJCQlhdWRSdW50aW1lLnRyaWdnZXIoY3IucGx1
Z2luc18uQXVkaW8ucHJvdG90eXBlLmNuZHMuT25FbmRlZCwgYXVkSW5zdCk7DQoJCQkJCX0NCgkJ
CX0pOw0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0FQUE1PQkk6DQoJCQl0aGlzLmluc3RhbmNlT2Jq
ZWN0ID0gdHJ1ZTsNCgkJCWJyZWFrOw0KCQl9DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90
eXBlLmhhc0VuZGVkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciB0aW1lOw0KCQlzd2l0Y2ggKHRo
aXMubXlhcGkpIHsNCgkJY2FzZSBBUElfSFRNTDU6DQoJCQlyZXR1cm4gdGhpcy5pbnN0YW5jZU9i
amVjdC5lbmRlZDsNCgkJY2FzZSBBUElfV0VCQVVESU86DQoJCQlpZiAodGhpcy5idWZmZXIubXlh
cGkgPT09IEFQSV9XRUJBVURJTykNCgkJCXsNCgkJCQlpZiAoIXRoaXMuZnJlc2ggJiYgIXRoaXMu
c3RvcHBlZCAmJiB0aGlzLmluc3RhbmNlT2JqZWN0WyJsb29wIl0pDQoJCQkJCXJldHVybiBmYWxz
ZTsNCgkJCQlpZiAodGhpcy5pc19wYXVzZWQpDQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQlyZXR1
cm4gdGhpcy5oYXNQbGF5YmFja0VuZGVkOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJCXJldHVybiB0aGlz
Lmluc3RhbmNlT2JqZWN0LmVuZGVkOw0KCQljYXNlIEFQSV9DT1JET1ZBOg0KCQkJcmV0dXJuIHRo
aXMuaGFzUGxheWJhY2tFbmRlZDsNCgkJY2FzZSBBUElfQVBQTU9CSToNCgkJCXRydWU7CS8vIHJl
Y3ljbGluZyBhbiBBcHBNb2JpIHNvdW5kIGRvZXMgbm90IG1hdHRlciBiZWNhdXNlIGl0IHdpbGwg
anVzdCBkbyBhbm90aGVyIHRocm93YXdheSBwbGF5U291bmQNCgkJfQ0KCQlyZXR1cm4gdHJ1ZTsN
Cgl9Ow0KCUMyQXVkaW9JbnN0YW5jZS5wcm90b3R5cGUuY2FuQmVSZWN5Y2xlZCA9IGZ1bmN0aW9u
ICgpDQoJew0KCQlpZiAodGhpcy5mcmVzaCB8fCB0aGlzLnN0b3BwZWQpDQoJCQlyZXR1cm4gdHJ1
ZTsJCS8vIG5vdCB5ZXQgdXNlZCBvciBpcyBub3QgcGxheWluZw0KCQlyZXR1cm4gdGhpcy5oYXNF
bmRlZCgpOw0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS5zZXRQYW5uZXJFbmFibGVk
ID0gZnVuY3Rpb24gKGVuYWJsZV8pDQoJew0KCQlpZiAoYXBpICE9PSBBUElfV0VCQVVESU8pDQoJ
CQlyZXR1cm47DQoJCWlmICghdGhpcy5wYW5uZXJFbmFibGVkICYmIGVuYWJsZV8pDQoJCXsNCgkJ
CWlmICghdGhpcy5nYWluTm9kZSkNCgkJCQlyZXR1cm47DQoJCQlpZiAoIXRoaXMucGFubmVyTm9k
ZSkNCgkJCXsNCgkJCQl0aGlzLnBhbm5lck5vZGUgPSBjb250ZXh0WyJjcmVhdGVQYW5uZXIiXSgp
Ow0KCQkJCWlmICh0eXBlb2YgdGhpcy5wYW5uZXJOb2RlWyJwYW5uaW5nTW9kZWwiXSA9PT0gIm51
bWJlciIpDQoJCQkJCXRoaXMucGFubmVyTm9kZVsicGFubmluZ01vZGVsIl0gPSBwYW5uaW5nTW9k
ZWw7DQoJCQkJZWxzZQ0KCQkJCQl0aGlzLnBhbm5lck5vZGVbInBhbm5pbmdNb2RlbCJdID0gWyJl
cXVhbHBvd2VyIiwgIkhSVEYiLCAic291bmRmaWVsZCJdW3Bhbm5pbmdNb2RlbF07DQoJCQkJaWYg
KHR5cGVvZiB0aGlzLnBhbm5lck5vZGVbImRpc3RhbmNlTW9kZWwiXSA9PT0gIm51bWJlciIpDQoJ
CQkJCXRoaXMucGFubmVyTm9kZVsiZGlzdGFuY2VNb2RlbCJdID0gZGlzdGFuY2VNb2RlbDsNCgkJ
CQllbHNlDQoJCQkJCXRoaXMucGFubmVyTm9kZVsiZGlzdGFuY2VNb2RlbCJdID0gWyJsaW5lYXIi
LCAiaW52ZXJzZSIsICJleHBvbmVudGlhbCJdW2Rpc3RhbmNlTW9kZWxdOw0KCQkJCXRoaXMucGFu
bmVyTm9kZVsicmVmRGlzdGFuY2UiXSA9IHJlZkRpc3RhbmNlOw0KCQkJCXRoaXMucGFubmVyTm9k
ZVsibWF4RGlzdGFuY2UiXSA9IG1heERpc3RhbmNlOw0KCQkJCXRoaXMucGFubmVyTm9kZVsicm9s
bG9mZkZhY3RvciJdID0gcm9sbG9mZkZhY3RvcjsNCgkJCX0NCgkJCXRoaXMuZ2Fpbk5vZGVbImRp
c2Nvbm5lY3QiXSgpOw0KCQkJdGhpcy5nYWluTm9kZVsiY29ubmVjdCJdKHRoaXMucGFubmVyTm9k
ZSk7DQoJCQl0aGlzLnBhbm5lck5vZGVbImNvbm5lY3QiXShnZXREZXN0aW5hdGlvbkZvclRhZyh0
aGlzLnRhZykpOw0KCQkJdGhpcy5wYW5uZXJFbmFibGVkID0gdHJ1ZTsNCgkJfQ0KCQllbHNlIGlm
ICh0aGlzLnBhbm5lckVuYWJsZWQgJiYgIWVuYWJsZV8pDQoJCXsNCgkJCWlmICghdGhpcy5nYWlu
Tm9kZSkNCgkJCQlyZXR1cm47DQoJCQl0aGlzLnBhbm5lck5vZGVbImRpc2Nvbm5lY3QiXSgpOw0K
CQkJdGhpcy5nYWluTm9kZVsiZGlzY29ubmVjdCJdKCk7DQoJCQl0aGlzLmdhaW5Ob2RlWyJjb25u
ZWN0Il0oZ2V0RGVzdGluYXRpb25Gb3JUYWcodGhpcy50YWcpKTsNCgkJCXRoaXMucGFubmVyRW5h
YmxlZCA9IGZhbHNlOw0KCQl9DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLnNldFBh
biA9IGZ1bmN0aW9uICh4LCB5LCBhbmdsZSwgaW5uZXJhbmdsZSwgb3V0ZXJhbmdsZSwgb3V0ZXJn
YWluKQ0KCXsNCgkJaWYgKCF0aGlzLnBhbm5lckVuYWJsZWQgfHwgYXBpICE9PSBBUElfV0VCQVVE
SU8pDQoJCQlyZXR1cm47DQoJCXRoaXMucGFubmVyTm9kZVsic2V0UG9zaXRpb24iXSh4LCB5LCAw
KTsNCgkJdGhpcy5wYW5uZXJOb2RlWyJzZXRPcmllbnRhdGlvbiJdKE1hdGguY29zKGNyLnRvX3Jh
ZGlhbnMoYW5nbGUpKSwgTWF0aC5zaW4oY3IudG9fcmFkaWFucyhhbmdsZSkpLCAwKTsNCgkJdGhp
cy5wYW5uZXJOb2RlWyJjb25lSW5uZXJBbmdsZSJdID0gaW5uZXJhbmdsZTsNCgkJdGhpcy5wYW5u
ZXJOb2RlWyJjb25lT3V0ZXJBbmdsZSJdID0gb3V0ZXJhbmdsZTsNCgkJdGhpcy5wYW5uZXJOb2Rl
WyJjb25lT3V0ZXJHYWluIl0gPSBvdXRlcmdhaW47DQoJCXRoaXMucGFuWCA9IHg7DQoJCXRoaXMu
cGFuWSA9IHk7DQoJCXRoaXMucGFuQW5nbGUgPSBhbmdsZTsNCgkJdGhpcy5wYW5Db25lSW5uZXIg
PSBpbm5lcmFuZ2xlOw0KCQl0aGlzLnBhbkNvbmVPdXRlciA9IG91dGVyYW5nbGU7DQoJCXRoaXMu
cGFuQ29uZU91dGVyR2FpbiA9IG91dGVyZ2FpbjsNCgl9Ow0KCUMyQXVkaW9JbnN0YW5jZS5wcm90
b3R5cGUuc2V0T2JqZWN0ID0gZnVuY3Rpb24gKG8pDQoJew0KCQlpZiAoIXRoaXMucGFubmVyRW5h
YmxlZCB8fCBhcGkgIT09IEFQSV9XRUJBVURJTykNCgkJCXJldHVybjsNCgkJaWYgKCF0aGlzLm9i
amVjdFRyYWNrZXIpDQoJCQl0aGlzLm9iamVjdFRyYWNrZXIgPSBuZXcgT2JqZWN0VHJhY2tlcigp
Ow0KCQl0aGlzLm9iamVjdFRyYWNrZXIuc2V0T2JqZWN0KG8pOw0KCX07DQoJQzJBdWRpb0luc3Rh
bmNlLnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24gKGR0KQ0KCXsNCgkJaWYgKCF0aGlzLnBhbm5l
ckVuYWJsZWQgfHwgYXBpICE9PSBBUElfV0VCQVVESU8gfHwgIXRoaXMub2JqZWN0VHJhY2tlciB8
fCAhdGhpcy5vYmplY3RUcmFja2VyLmhhc09iamVjdCgpIHx8ICF0aGlzLmlzUGxheWluZygpKQ0K
CQl7DQoJCQlyZXR1cm47DQoJCX0NCgkJdGhpcy5vYmplY3RUcmFja2VyLnRpY2soZHQpOw0KCQl2
YXIgaW5zdCA9IHRoaXMub2JqZWN0VHJhY2tlci5vYmo7DQoJCXZhciBweCA9IGNyLnJvdGF0ZVB0
QXJvdW5kKGluc3QueCwgaW5zdC55LCAtaW5zdC5sYXllci5nZXRBbmdsZSgpLCBsaXN0ZW5lclgs
IGxpc3RlbmVyWSwgdHJ1ZSk7DQoJCXZhciBweSA9IGNyLnJvdGF0ZVB0QXJvdW5kKGluc3QueCwg
aW5zdC55LCAtaW5zdC5sYXllci5nZXRBbmdsZSgpLCBsaXN0ZW5lclgsIGxpc3RlbmVyWSwgZmFs
c2UpOw0KCQl0aGlzLnBhbm5lck5vZGVbInNldFBvc2l0aW9uIl0ocHgsIHB5LCAwKTsNCgkJdmFy
IGEgPSAwOw0KCQlpZiAodHlwZW9mIHRoaXMub2JqZWN0VHJhY2tlci5vYmouYW5nbGUgIT09ICJ1
bmRlZmluZWQiKQ0KCQl7DQoJCQlhID0gaW5zdC5hbmdsZSAtIGluc3QubGF5ZXIuZ2V0QW5nbGUo
KTsNCgkJCXRoaXMucGFubmVyTm9kZVsic2V0T3JpZW50YXRpb24iXShNYXRoLmNvcyhhKSwgTWF0
aC5zaW4oYSksIDApOw0KCQl9DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLnBsYXkg
PSBmdW5jdGlvbiAobG9vcGluZywgdm9sLCBmcm9tUG9zaXRpb24sIHNjaGVkdWxlZFRpbWUpDQoJ
ew0KCQl2YXIgaW5zdG9iaiA9IHRoaXMuaW5zdGFuY2VPYmplY3Q7DQoJCXRoaXMubG9vcGluZyA9
IGxvb3Bpbmc7DQoJCXRoaXMudm9sdW1lID0gdm9sOw0KCQl2YXIgc2Vla1BvcyA9IGZyb21Qb3Np
dGlvbiB8fCAwOw0KCQlzY2hlZHVsZWRUaW1lID0gc2NoZWR1bGVkVGltZSB8fCAwOw0KCQlzd2l0
Y2ggKHRoaXMubXlhcGkpIHsNCgkJY2FzZSBBUElfSFRNTDU6DQoJCQlpZiAoaW5zdG9iai5wbGF5
YmFja1JhdGUgIT09IDEuMCkNCgkJCQlpbnN0b2JqLnBsYXliYWNrUmF0ZSA9IDEuMDsNCgkJCWlm
IChpbnN0b2JqLnZvbHVtZSAhPT0gdm9sICogbWFzdGVyVm9sdW1lKQ0KCQkJCWluc3RvYmoudm9s
dW1lID0gdm9sICogbWFzdGVyVm9sdW1lOw0KCQkJaWYgKGluc3RvYmoubG9vcCAhPT0gbG9vcGlu
ZykNCgkJCQlpbnN0b2JqLmxvb3AgPSBsb29waW5nOw0KCQkJaWYgKGluc3RvYmoubXV0ZWQpDQoJ
CQkJaW5zdG9iai5tdXRlZCA9IGZhbHNlOw0KCQkJaWYgKGluc3RvYmouY3VycmVudFRpbWUgIT09
IHNlZWtQb3MpDQoJCQl7DQoJCQkJdHJ5IHsNCgkJCQkJaW5zdG9iai5jdXJyZW50VGltZSA9IHNl
ZWtQb3M7DQoJCQkJfQ0KCQkJCWNhdGNoIChlcnIpDQoJCQkJew0KOw0KCQkJCX0NCgkJCX0NCgkJ
CXRyeVBsYXlBdWRpb0VsZW1lbnQodGhpcyk7DQoJCQlicmVhazsNCgkJY2FzZSBBUElfV0VCQVVE
SU86DQoJCQl0aGlzLm11dGVkID0gZmFsc2U7DQoJCQl0aGlzLm11dGV2b2wgPSAxOw0KCQkJaWYg
KHRoaXMuYnVmZmVyLm15YXBpID09PSBBUElfV0VCQVVESU8pDQoJCQl7DQoJCQkJdGhpcy5nYWlu
Tm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gdm9sICogbWFzdGVyVm9sdW1lOw0KCQkJCWlmICghdGhp
cy5mcmVzaCkNCgkJCQl7DQoJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QgPSBjb250ZXh0WyJjcmVh
dGVCdWZmZXJTb3VyY2UiXSgpOw0KCQkJCQl0aGlzLmluc3RhbmNlT2JqZWN0WyJidWZmZXIiXSA9
IHRoaXMuYnVmZmVyLmJ1ZmZlck9iamVjdDsNCgkJCQkJdGhpcy5pbnN0YW5jZU9iamVjdFsiY29u
bmVjdCJdKHRoaXMuZ2Fpbk5vZGUpOw0KCQkJCX0NCgkJCQl0aGlzLmluc3RhbmNlT2JqZWN0WyJv
bmVuZGVkIl0gPSB0aGlzLm9uZW5kZWRfaGFuZGxlcjsNCgkJCQl0aGlzLmFjdGl2ZV9idWZmZXIg
PSB0aGlzLmluc3RhbmNlT2JqZWN0Ow0KCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QubG9vcCA9IGxv
b3Bpbmc7DQoJCQkJdGhpcy5oYXNQbGF5YmFja0VuZGVkID0gZmFsc2U7DQoJCQkJaWYgKHNlZWtQ
b3MgPT09IDApDQoJCQkJCXN0YXJ0U291cmNlKHRoaXMuaW5zdGFuY2VPYmplY3QsIHNjaGVkdWxl
ZFRpbWUpOw0KCQkJCWVsc2UNCgkJCQkJc3RhcnRTb3VyY2VBdCh0aGlzLmluc3RhbmNlT2JqZWN0
LCBzZWVrUG9zLCB0aGlzLmdldER1cmF0aW9uKCksIHNjaGVkdWxlZFRpbWUpOw0KCQkJfQ0KCQkJ
ZWxzZQ0KCQkJew0KCQkJCWlmIChpbnN0b2JqLnBsYXliYWNrUmF0ZSAhPT0gMS4wKQ0KCQkJCQlp
bnN0b2JqLnBsYXliYWNrUmF0ZSA9IDEuMDsNCgkJCQlpZiAoaW5zdG9iai5sb29wICE9PSBsb29w
aW5nKQ0KCQkJCQlpbnN0b2JqLmxvb3AgPSBsb29waW5nOw0KCQkJCWluc3RvYmoudm9sdW1lID0g
dm9sICogbWFzdGVyVm9sdW1lOw0KCQkJCWlmIChpbnN0b2JqLmN1cnJlbnRUaW1lICE9PSBzZWVr
UG9zKQ0KCQkJCXsNCgkJCQkJdHJ5IHsNCgkJCQkJCWluc3RvYmouY3VycmVudFRpbWUgPSBzZWVr
UG9zOw0KCQkJCQl9DQoJCQkJCWNhdGNoIChlcnIpDQoJCQkJCXsNCjsNCgkJCQkJfQ0KCQkJCX0N
CgkJCQl0cnlQbGF5QXVkaW9FbGVtZW50KHRoaXMpOw0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2Ug
QVBJX0NPUkRPVkE6DQoJCQlpZiAoKCF0aGlzLmZyZXNoICYmIHRoaXMuc3RvcHBlZCkgfHwgc2Vl
a1BvcyAhPT0gMCkNCgkJCQlpbnN0b2JqWyJzZWVrVG8iXShzZWVrUG9zKTsNCgkJCWluc3RvYmpb
InBsYXkiXSgpOw0KCQkJdGhpcy5oYXNQbGF5YmFja0VuZGVkID0gZmFsc2U7DQoJCQlicmVhazsN
CgkJY2FzZSBBUElfQVBQTU9CSToNCgkJCWlmIChhdWRSdW50aW1lLmlzRGlyZWN0Q2FudmFzKQ0K
CQkJCUFwcE1vYmlbImNvbnRleHQiXVsicGxheVNvdW5kIl0odGhpcy5zcmMsIGxvb3BpbmcpOw0K
CQkJZWxzZQ0KCQkJCUFwcE1vYmlbInBsYXllciJdWyJwbGF5U291bmQiXSh0aGlzLnNyYywgbG9v
cGluZyk7DQoJCQlicmVhazsNCgkJfQ0KCQl0aGlzLnBsYXliYWNrUmF0ZSA9IDE7DQoJCXRoaXMu
c3RhcnRUaW1lID0gKHRoaXMuaXNUaW1lc2NhbGVkID8gYXVkUnVudGltZS5rYWhhblRpbWUuc3Vt
IDogYXVkUnVudGltZS53YWxsVGltZS5zdW0pIC0gc2Vla1BvczsNCgkJdGhpcy5mcmVzaCA9IGZh
bHNlOw0KCQl0aGlzLnN0b3BwZWQgPSBmYWxzZTsNCgkJdGhpcy5pc19wYXVzZWQgPSBmYWxzZTsN
Cgl9Ow0KCUMyQXVkaW9JbnN0YW5jZS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpDQoJew0K
CQlzd2l0Y2ggKHRoaXMubXlhcGkpIHsNCgkJY2FzZSBBUElfSFRNTDU6DQoJCQlpZiAoIXRoaXMu
aW5zdGFuY2VPYmplY3QucGF1c2VkKQ0KCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QucGF1c2UoKTsN
CgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCWlmICh0aGlzLmJ1ZmZlci5teWFw
aSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJCXN0b3BTb3VyY2UodGhpcy5pbnN0YW5jZU9iamVjdCk7
DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKCF0aGlzLmluc3RhbmNlT2JqZWN0LnBhdXNlZCkNCgkJ
CQkJdGhpcy5pbnN0YW5jZU9iamVjdC5wYXVzZSgpOw0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2Ug
QVBJX0NPUkRPVkE6DQoJCQl0aGlzLmluc3RhbmNlT2JqZWN0WyJzdG9wIl0oKTsNCgkJCWJyZWFr
Ow0KCQljYXNlIEFQSV9BUFBNT0JJOg0KCQkJaWYgKGF1ZFJ1bnRpbWUuaXNEaXJlY3RDYW52YXMp
DQoJCQkJQXBwTW9iaVsiY29udGV4dCJdWyJzdG9wU291bmQiXSh0aGlzLnNyYyk7DQoJCQlicmVh
azsNCgkJfQ0KCQl0aGlzLnN0b3BwZWQgPSB0cnVlOw0KCQl0aGlzLmlzX3BhdXNlZCA9IGZhbHNl
Ow0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpDQoJ
ew0KCQlpZiAodGhpcy5mcmVzaCB8fCB0aGlzLnN0b3BwZWQgfHwgdGhpcy5oYXNFbmRlZCgpIHx8
IHRoaXMuaXNfcGF1c2VkKQ0KCQkJcmV0dXJuOw0KCQlzd2l0Y2ggKHRoaXMubXlhcGkpIHsNCgkJ
Y2FzZSBBUElfSFRNTDU6DQoJCQlpZiAoIXRoaXMuaW5zdGFuY2VPYmplY3QucGF1c2VkKQ0KCQkJ
CXRoaXMuaW5zdGFuY2VPYmplY3QucGF1c2UoKTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJB
VURJTzoNCgkJCWlmICh0aGlzLmJ1ZmZlci5teWFwaSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJew0K
CQkJCXRoaXMucmVzdW1lX3Bvc2l0aW9uID0gdGhpcy5nZXRQbGF5YmFja1RpbWUodHJ1ZSk7DQoJ
CQkJaWYgKHRoaXMubG9vcGluZykNCgkJCQkJdGhpcy5yZXN1bWVfcG9zaXRpb24gPSB0aGlzLnJl
c3VtZV9wb3NpdGlvbiAlIHRoaXMuZ2V0RHVyYXRpb24oKTsNCgkJCQl0aGlzLmlzX3BhdXNlZCA9
IHRydWU7DQoJCQkJc3RvcFNvdXJjZSh0aGlzLmluc3RhbmNlT2JqZWN0KTsNCgkJCX0NCgkJCWVs
c2UNCgkJCXsNCgkJCQlpZiAoIXRoaXMuaW5zdGFuY2VPYmplY3QucGF1c2VkKQ0KCQkJCQl0aGlz
Lmluc3RhbmNlT2JqZWN0LnBhdXNlKCk7DQoJCQl9DQoJCQlicmVhazsNCgkJY2FzZSBBUElfQ09S
RE9WQToNCgkJCXRoaXMuaW5zdGFuY2VPYmplY3RbInBhdXNlIl0oKTsNCgkJCWJyZWFrOw0KCQlj
YXNlIEFQSV9BUFBNT0JJOg0KCQkJaWYgKGF1ZFJ1bnRpbWUuaXNEaXJlY3RDYW52YXMpDQoJCQkJ
QXBwTW9iaVsiY29udGV4dCJdWyJzdG9wU291bmQiXSh0aGlzLnNyYyk7DQoJCQlicmVhazsNCgkJ
fQ0KCQl0aGlzLmlzX3BhdXNlZCA9IHRydWU7DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90
eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5mcmVzaCB8fCB0aGlzLnN0
b3BwZWQgfHwgdGhpcy5oYXNFbmRlZCgpIHx8ICF0aGlzLmlzX3BhdXNlZCkNCgkJCXJldHVybjsN
CgkJc3dpdGNoICh0aGlzLm15YXBpKSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJdHJ5UGxheUF1
ZGlvRWxlbWVudCh0aGlzKTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCWlm
ICh0aGlzLmJ1ZmZlci5teWFwaSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJew0KCQkJCXRoaXMuaW5z
dGFuY2VPYmplY3QgPSBjb250ZXh0WyJjcmVhdGVCdWZmZXJTb3VyY2UiXSgpOw0KCQkJCXRoaXMu
aW5zdGFuY2VPYmplY3RbImJ1ZmZlciJdID0gdGhpcy5idWZmZXIuYnVmZmVyT2JqZWN0Ow0KCQkJ
CXRoaXMuaW5zdGFuY2VPYmplY3RbImNvbm5lY3QiXSh0aGlzLmdhaW5Ob2RlKTsNCgkJCQl0aGlz
Lmluc3RhbmNlT2JqZWN0WyJvbmVuZGVkIl0gPSB0aGlzLm9uZW5kZWRfaGFuZGxlcjsNCgkJCQl0
aGlzLmFjdGl2ZV9idWZmZXIgPSB0aGlzLmluc3RhbmNlT2JqZWN0Ow0KCQkJCXRoaXMuaW5zdGFu
Y2VPYmplY3QubG9vcCA9IHRoaXMubG9vcGluZzsNCgkJCQl0aGlzLmdhaW5Ob2RlWyJnYWluIl1b
InZhbHVlIl0gPSBtYXN0ZXJWb2x1bWUgKiB0aGlzLnZvbHVtZSAqIHRoaXMubXV0ZXZvbDsNCgkJ
CQl0aGlzLnVwZGF0ZVBsYXliYWNrUmF0ZSgpOw0KCQkJCXRoaXMuc3RhcnRUaW1lID0gKHRoaXMu
aXNUaW1lc2NhbGVkID8gYXVkUnVudGltZS5rYWhhblRpbWUuc3VtIDogYXVkUnVudGltZS53YWxs
VGltZS5zdW0pIC0gKHRoaXMucmVzdW1lX3Bvc2l0aW9uIC8gKHRoaXMucGxheWJhY2tSYXRlIHx8
IDAuMDAxKSk7DQoJCQkJc3RhcnRTb3VyY2VBdCh0aGlzLmluc3RhbmNlT2JqZWN0LCB0aGlzLnJl
c3VtZV9wb3NpdGlvbiwgdGhpcy5nZXREdXJhdGlvbigpKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsN
CgkJCQl0cnlQbGF5QXVkaW9FbGVtZW50KHRoaXMpOw0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2Ug
QVBJX0NPUkRPVkE6DQoJCQl0aGlzLmluc3RhbmNlT2JqZWN0WyJwbGF5Il0oKTsNCgkJCWJyZWFr
Ow0KCQljYXNlIEFQSV9BUFBNT0JJOg0KCQkJaWYgKGF1ZFJ1bnRpbWUuaXNEaXJlY3RDYW52YXMp
DQoJCQkJQXBwTW9iaVsiY29udGV4dCJdWyJyZXN1bWVTb3VuZCJdKHRoaXMuc3JjKTsNCgkJCWJy
ZWFrOw0KCQl9DQoJCXRoaXMuaXNfcGF1c2VkID0gZmFsc2U7DQoJfTsNCglDMkF1ZGlvSW5zdGFu
Y2UucHJvdG90eXBlLnNlZWsgPSBmdW5jdGlvbiAocG9zKQ0KCXsNCgkJaWYgKHRoaXMuZnJlc2gg
fHwgdGhpcy5zdG9wcGVkIHx8IHRoaXMuaGFzRW5kZWQoKSkNCgkJCXJldHVybjsNCgkJc3dpdGNo
ICh0aGlzLm15YXBpKSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJdHJ5IHsNCgkJCQl0aGlzLmlu
c3RhbmNlT2JqZWN0LmN1cnJlbnRUaW1lID0gcG9zOw0KCQkJfQ0KCQkJY2F0Y2ggKGUpIHt9DQoJ
CQlicmVhazsNCgkJY2FzZSBBUElfV0VCQVVESU86DQoJCQlpZiAodGhpcy5idWZmZXIubXlhcGkg
PT09IEFQSV9XRUJBVURJTykNCgkJCXsNCgkJCQlpZiAodGhpcy5pc19wYXVzZWQpDQoJCQkJCXRo
aXMucmVzdW1lX3Bvc2l0aW9uID0gcG9zOw0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXRoaXMucGF1
c2UoKTsNCgkJCQkJdGhpcy5yZXN1bWVfcG9zaXRpb24gPSBwb3M7DQoJCQkJCXRoaXMucmVzdW1l
KCk7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRyeSB7DQoJCQkJCXRoaXMuaW5z
dGFuY2VPYmplY3QuY3VycmVudFRpbWUgPSBwb3M7DQoJCQkJfQ0KCQkJCWNhdGNoIChlKSB7fQ0K
CQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0NPUkRPVkE6DQoJCQlicmVhazsNCgkJY2FzZSBB
UElfQVBQTU9CSToNCgkJCWlmIChhdWRSdW50aW1lLmlzRGlyZWN0Q2FudmFzKQ0KCQkJCUFwcE1v
YmlbImNvbnRleHQiXVsic2Vla1NvdW5kIl0odGhpcy5zcmMsIHBvcyk7DQoJCQlicmVhazsNCgkJ
fQ0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS5yZWNvbm5lY3QgPSBmdW5jdGlvbiAo
dG9Ob2RlKQ0KCXsNCgkJaWYgKHRoaXMubXlhcGkgIT09IEFQSV9XRUJBVURJTykNCgkJCXJldHVy
bjsNCgkJaWYgKHRoaXMucGFubmVyRW5hYmxlZCkNCgkJew0KCQkJdGhpcy5wYW5uZXJOb2RlWyJk
aXNjb25uZWN0Il0oKTsNCgkJCXRoaXMucGFubmVyTm9kZVsiY29ubmVjdCJdKHRvTm9kZSk7DQoJ
CX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGlzLmdhaW5Ob2RlWyJkaXNjb25uZWN0Il0oKTsNCgkJCXRo
aXMuZ2Fpbk5vZGVbImNvbm5lY3QiXSh0b05vZGUpOw0KCQl9DQoJfTsNCglDMkF1ZGlvSW5zdGFu
Y2UucHJvdG90eXBlLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKGFwcGx5UGxheWJhY2tSYXRlKQ0K
CXsNCgkJdmFyIHJldCA9IDA7DQoJCXN3aXRjaCAodGhpcy5teWFwaSkgew0KCQljYXNlIEFQSV9I
VE1MNToNCgkJCWlmICh0eXBlb2YgdGhpcy5pbnN0YW5jZU9iamVjdC5kdXJhdGlvbiAhPT0gInVu
ZGVmaW5lZCIpDQoJCQkJcmV0ID0gdGhpcy5pbnN0YW5jZU9iamVjdC5kdXJhdGlvbjsNCgkJCWJy
ZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCXJldCA9IHRoaXMuYnVmZmVyLmJ1ZmZlck9i
amVjdFsiZHVyYXRpb24iXTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9DT1JET1ZBOg0KCQkJcmV0
ID0gdGhpcy5pbnN0YW5jZU9iamVjdFsiZ2V0RHVyYXRpb24iXSgpOw0KCQkJYnJlYWs7DQoJCWNh
c2UgQVBJX0FQUE1PQkk6DQoJCQlpZiAoYXVkUnVudGltZS5pc0RpcmVjdENhbnZhcykNCgkJCQly
ZXQgPSBBcHBNb2JpWyJjb250ZXh0Il1bImdldER1cmF0aW9uU291bmQiXSh0aGlzLnNyYyk7DQoJ
CQlicmVhazsNCgkJfQ0KCQlpZiAoYXBwbHlQbGF5YmFja1JhdGUpDQoJCQlyZXQgLz0gKHRoaXMu
cGxheWJhY2tSYXRlIHx8IDAuMDAxKTsJCS8vIGF2b2lkIGRpdmlkZS1ieS16ZXJvDQoJCXJldHVy
biByZXQ7DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLmdldFBsYXliYWNrVGltZSA9
IGZ1bmN0aW9uIChhcHBseVBsYXliYWNrUmF0ZSkNCgl7DQoJCXZhciBkdXJhdGlvbiA9IHRoaXMu
Z2V0RHVyYXRpb24oKTsNCgkJdmFyIHJldCA9IDA7DQoJCXN3aXRjaCAodGhpcy5teWFwaSkgew0K
CQljYXNlIEFQSV9IVE1MNToNCgkJCWlmICh0eXBlb2YgdGhpcy5pbnN0YW5jZU9iamVjdC5jdXJy
ZW50VGltZSAhPT0gInVuZGVmaW5lZCIpDQoJCQkJcmV0ID0gdGhpcy5pbnN0YW5jZU9iamVjdC5j
dXJyZW50VGltZTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCWlmICh0aGlz
LmJ1ZmZlci5teWFwaSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJew0KCQkJCWlmICh0aGlzLmlzX3Bh
dXNlZCkNCgkJCQkJcmV0dXJuIHRoaXMucmVzdW1lX3Bvc2l0aW9uOw0KCQkJCWVsc2UNCgkJCQkJ
cmV0ID0gKHRoaXMuaXNUaW1lc2NhbGVkID8gYXVkUnVudGltZS5rYWhhblRpbWUuc3VtIDogYXVk
UnVudGltZS53YWxsVGltZS5zdW0pIC0gdGhpcy5zdGFydFRpbWU7DQoJCQl9DQoJCQllbHNlIGlm
ICh0eXBlb2YgdGhpcy5pbnN0YW5jZU9iamVjdC5jdXJyZW50VGltZSAhPT0gInVuZGVmaW5lZCIp
DQoJCQkJcmV0ID0gdGhpcy5pbnN0YW5jZU9iamVjdC5jdXJyZW50VGltZTsNCgkJCWJyZWFrOw0K
CQljYXNlIEFQSV9DT1JET1ZBOg0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0FQUE1PQkk6DQoJCQlp
ZiAoYXVkUnVudGltZS5pc0RpcmVjdENhbnZhcykNCgkJCQlyZXQgPSBBcHBNb2JpWyJjb250ZXh0
Il1bImdldFBsYXliYWNrVGltZVNvdW5kIl0odGhpcy5zcmMpOw0KCQkJYnJlYWs7DQoJCX0NCgkJ
aWYgKGFwcGx5UGxheWJhY2tSYXRlKQ0KCQkJcmV0ICo9IHRoaXMucGxheWJhY2tSYXRlOw0KCQlp
ZiAoIXRoaXMubG9vcGluZyAmJiByZXQgPiBkdXJhdGlvbikNCgkJCXJldCA9IGR1cmF0aW9uOw0K
CQlyZXR1cm4gcmV0Ow0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS5pc1BsYXlpbmcg
PSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICF0aGlzLmlzX3BhdXNlZCAmJiAhdGhpcy5mcmVz
aCAmJiAhdGhpcy5zdG9wcGVkICYmICF0aGlzLmhhc0VuZGVkKCk7DQoJfTsNCglDMkF1ZGlvSW5z
dGFuY2UucHJvdG90eXBlLnNob3VsZFNhdmUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICF0
aGlzLmZyZXNoICYmICF0aGlzLnN0b3BwZWQgJiYgIXRoaXMuaGFzRW5kZWQoKTsNCgl9Ow0KCUMy
QXVkaW9JbnN0YW5jZS5wcm90b3R5cGUuc2V0Vm9sdW1lID0gZnVuY3Rpb24gKHYpDQoJew0KCQl0
aGlzLnZvbHVtZSA9IHY7DQoJCXRoaXMudXBkYXRlVm9sdW1lKCk7DQoJfTsNCglDMkF1ZGlvSW5z
dGFuY2UucHJvdG90eXBlLnVwZGF0ZVZvbHVtZSA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgdm9s
VG9TZXQgPSB0aGlzLnZvbHVtZSAqIG1hc3RlclZvbHVtZTsNCgkJaWYgKCFpc0Zpbml0ZSh2b2xU
b1NldCkpDQoJCQl2b2xUb1NldCA9IDA7CQkvLyBIVE1MTWVkaWFFbGVtZW50IHRocm93cyBpZiBz
ZXR0aW5nIG5vbi1maW5pdGUgdm9sdW1lDQoJCXN3aXRjaCAodGhpcy5teWFwaSkgew0KCQljYXNl
IEFQSV9IVE1MNToNCgkJCWlmICh0eXBlb2YgdGhpcy5pbnN0YW5jZU9iamVjdC52b2x1bWUgIT09
ICJ1bmRlZmluZWQiICYmIHRoaXMuaW5zdGFuY2VPYmplY3Qudm9sdW1lICE9PSB2b2xUb1NldCkN
CgkJCQl0aGlzLmluc3RhbmNlT2JqZWN0LnZvbHVtZSA9IHZvbFRvU2V0Ow0KCQkJYnJlYWs7DQoJ
CWNhc2UgQVBJX1dFQkFVRElPOg0KCQkJaWYgKHRoaXMuYnVmZmVyLm15YXBpID09PSBBUElfV0VC
QVVESU8pDQoJCQl7DQoJCQkJdGhpcy5nYWluTm9kZVsiZ2FpbiJdWyJ2YWx1ZSJdID0gdm9sVG9T
ZXQgKiB0aGlzLm11dGV2b2w7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKHR5cGVvZiB0
aGlzLmluc3RhbmNlT2JqZWN0LnZvbHVtZSAhPT0gInVuZGVmaW5lZCIgJiYgdGhpcy5pbnN0YW5j
ZU9iamVjdC52b2x1bWUgIT09IHZvbFRvU2V0KQ0KCQkJCQl0aGlzLmluc3RhbmNlT2JqZWN0LnZv
bHVtZSA9IHZvbFRvU2V0Ow0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0NPUkRPVkE6DQoJ
CQlicmVhazsNCgkJY2FzZSBBUElfQVBQTU9CSToNCgkJCWJyZWFrOw0KCQl9DQoJfTsNCglDMkF1
ZGlvSW5zdGFuY2UucHJvdG90eXBlLmdldFZvbHVtZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1
cm4gdGhpcy52b2x1bWU7DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLmRvU2V0TXV0
ZWQgPSBmdW5jdGlvbiAobSkNCgl7DQoJCXN3aXRjaCAodGhpcy5teWFwaSkgew0KCQljYXNlIEFQ
SV9IVE1MNToNCgkJCWlmICh0aGlzLmluc3RhbmNlT2JqZWN0Lm11dGVkICE9PSAhIW0pDQoJCQkJ
dGhpcy5pbnN0YW5jZU9iamVjdC5tdXRlZCA9ICEhbTsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9X
RUJBVURJTzoNCgkJCWlmICh0aGlzLmJ1ZmZlci5teWFwaSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJ
ew0KCQkJCXRoaXMubXV0ZXZvbCA9IChtID8gMCA6IDEpOw0KCQkJCXRoaXMuZ2Fpbk5vZGVbImdh
aW4iXVsidmFsdWUiXSA9IG1hc3RlclZvbHVtZSAqIHRoaXMudm9sdW1lICogdGhpcy5tdXRldm9s
Ow0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICh0aGlzLmluc3RhbmNlT2JqZWN0Lm11dGVk
ICE9PSAhIW0pDQoJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QubXV0ZWQgPSAhIW07DQoJCQl9DQoJ
CQlicmVhazsNCgkJY2FzZSBBUElfQ09SRE9WQToNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9BUFBN
T0JJOg0KCQkJYnJlYWs7DQoJCX0NCgl9Ow0KCUMyQXVkaW9JbnN0YW5jZS5wcm90b3R5cGUuc2V0
TXV0ZWQgPSBmdW5jdGlvbiAobSkNCgl7DQoJCXRoaXMuaXNfbXV0ZWQgPSAhIW07DQoJCXRoaXMu
ZG9TZXRNdXRlZCh0aGlzLmlzX211dGVkIHx8IHRoaXMuaXNfc2lsZW50KTsNCgl9Ow0KCUMyQXVk
aW9JbnN0YW5jZS5wcm90b3R5cGUuc2V0U2lsZW50ID0gZnVuY3Rpb24gKG0pDQoJew0KCQl0aGlz
LmlzX3NpbGVudCA9ICEhbTsNCgkJdGhpcy5kb1NldE11dGVkKHRoaXMuaXNfbXV0ZWQgfHwgdGhp
cy5pc19zaWxlbnQpOw0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS5zZXRMb29waW5n
ID0gZnVuY3Rpb24gKGwpDQoJew0KCQl0aGlzLmxvb3BpbmcgPSBsOw0KCQlzd2l0Y2ggKHRoaXMu
bXlhcGkpIHsNCgkJY2FzZSBBUElfSFRNTDU6DQoJCQlpZiAodGhpcy5pbnN0YW5jZU9iamVjdC5s
b29wICE9PSAhIWwpDQoJCQkJdGhpcy5pbnN0YW5jZU9iamVjdC5sb29wID0gISFsOw0KCQkJYnJl
YWs7DQoJCWNhc2UgQVBJX1dFQkFVRElPOg0KCQkJaWYgKHRoaXMuaW5zdGFuY2VPYmplY3QubG9v
cCAhPT0gISFsKQ0KCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QubG9vcCA9ICEhbDsNCgkJCWJyZWFr
Ow0KCQljYXNlIEFQSV9DT1JET1ZBOg0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0FQUE1PQkk6DQoJ
CQlpZiAoYXVkUnVudGltZS5pc0RpcmVjdENhbnZhcykNCgkJCQlBcHBNb2JpWyJjb250ZXh0Il1b
InNldExvb3BpbmdTb3VuZCJdKHRoaXMuc3JjLCBsKTsNCgkJCWJyZWFrOw0KCQl9DQoJfTsNCglD
MkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLnNldFBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uIChyKQ0K
CXsNCgkJdGhpcy5wbGF5YmFja1JhdGUgPSByOw0KCQl0aGlzLnVwZGF0ZVBsYXliYWNrUmF0ZSgp
Ow0KCX07DQoJQzJBdWRpb0luc3RhbmNlLnByb3RvdHlwZS51cGRhdGVQbGF5YmFja1JhdGUgPSBm
dW5jdGlvbiAoKQ0KCXsNCgkJdmFyIHIgPSB0aGlzLnBsYXliYWNrUmF0ZTsNCgkJaWYgKHRoaXMu
aXNUaW1lc2NhbGVkKQ0KCQkJciAqPSBhdWRSdW50aW1lLnRpbWVzY2FsZTsNCgkJc3dpdGNoICh0
aGlzLm15YXBpKSB7DQoJCWNhc2UgQVBJX0hUTUw1Og0KCQkJaWYgKHRoaXMuaW5zdGFuY2VPYmpl
Y3QucGxheWJhY2tSYXRlICE9PSByKQ0KCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QucGxheWJhY2tS
YXRlID0gcjsNCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCWlmICh0aGlzLmJ1
ZmZlci5teWFwaSA9PT0gQVBJX1dFQkFVRElPKQ0KCQkJew0KCQkJCWlmICh0aGlzLmluc3RhbmNl
T2JqZWN0WyJwbGF5YmFja1JhdGUiXVsidmFsdWUiXSAhPT0gcikNCgkJCQkJdGhpcy5pbnN0YW5j
ZU9iamVjdFsicGxheWJhY2tSYXRlIl1bInZhbHVlIl0gPSByOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJ
ew0KCQkJCWlmICh0aGlzLmluc3RhbmNlT2JqZWN0LnBsYXliYWNrUmF0ZSAhPT0gcikNCgkJCQkJ
dGhpcy5pbnN0YW5jZU9iamVjdC5wbGF5YmFja1JhdGUgPSByOw0KCQkJfQ0KCQkJYnJlYWs7DQoJ
CWNhc2UgQVBJX0NPUkRPVkE6DQoJCQlicmVhazsNCgkJY2FzZSBBUElfQVBQTU9CSToNCgkJCWJy
ZWFrOw0KCQl9DQoJfTsNCglDMkF1ZGlvSW5zdGFuY2UucHJvdG90eXBlLnNldFN1c3BlbmRlZCA9
IGZ1bmN0aW9uIChzKQ0KCXsNCgkJc3dpdGNoICh0aGlzLm15YXBpKSB7DQoJCWNhc2UgQVBJX0hU
TUw1Og0KCQkJaWYgKHMpDQoJCQl7DQoJCQkJaWYgKHRoaXMuaXNQbGF5aW5nKCkpDQoJCQkJew0K
CQkJCQl0aGlzLnJlc3VtZV9tZSA9IHRydWU7DQoJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3RbInBh
dXNlIl0oKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCQl0aGlzLnJlc3VtZV9tZSA9IGZhbHNlOw0K
CQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWlmICh0aGlzLnJlc3VtZV9tZSkNCgkJCQl7DQoJCQkJ
CXRoaXMuaW5zdGFuY2VPYmplY3RbInBsYXkiXSgpOw0KCQkJCQl0aGlzLnJlc3VtZV9tZSA9IGZh
bHNlOw0KCQkJCX0NCgkJCX0NCgkJCWJyZWFrOw0KCQljYXNlIEFQSV9XRUJBVURJTzoNCgkJCWlm
IChzKQ0KCQkJew0KCQkJCWlmICh0aGlzLmlzUGxheWluZygpKQ0KCQkJCXsNCgkJCQkJdGhpcy5y
ZXN1bWVfbWUgPSB0cnVlOw0KCQkJCQlpZiAodGhpcy5idWZmZXIubXlhcGkgPT09IEFQSV9XRUJB
VURJTykNCgkJCQkJew0KCQkJCQkJdGhpcy5yZXN1bWVfcG9zaXRpb24gPSB0aGlzLmdldFBsYXli
YWNrVGltZSh0cnVlKTsNCgkJCQkJCWlmICh0aGlzLmxvb3BpbmcpDQoJCQkJCQkJdGhpcy5yZXN1
bWVfcG9zaXRpb24gPSB0aGlzLnJlc3VtZV9wb3NpdGlvbiAlIHRoaXMuZ2V0RHVyYXRpb24oKTsN
CgkJCQkJCXN0b3BTb3VyY2UodGhpcy5pbnN0YW5jZU9iamVjdCk7DQoJCQkJCX0NCgkJCQkJZWxz
ZQ0KCQkJCQkJdGhpcy5pbnN0YW5jZU9iamVjdFsicGF1c2UiXSgpOw0KCQkJCX0NCgkJCQllbHNl
DQoJCQkJCXRoaXMucmVzdW1lX21lID0gZmFsc2U7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJ
aWYgKHRoaXMucmVzdW1lX21lKQ0KCQkJCXsNCgkJCQkJaWYgKHRoaXMuYnVmZmVyLm15YXBpID09
PSBBUElfV0VCQVVESU8pDQoJCQkJCXsNCgkJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3QgPSBjb250
ZXh0WyJjcmVhdGVCdWZmZXJTb3VyY2UiXSgpOw0KCQkJCQkJdGhpcy5pbnN0YW5jZU9iamVjdFsi
YnVmZmVyIl0gPSB0aGlzLmJ1ZmZlci5idWZmZXJPYmplY3Q7DQoJCQkJCQl0aGlzLmluc3RhbmNl
T2JqZWN0WyJjb25uZWN0Il0odGhpcy5nYWluTm9kZSk7DQoJCQkJCQl0aGlzLmluc3RhbmNlT2Jq
ZWN0WyJvbmVuZGVkIl0gPSB0aGlzLm9uZW5kZWRfaGFuZGxlcjsNCgkJCQkJCXRoaXMuYWN0aXZl
X2J1ZmZlciA9IHRoaXMuaW5zdGFuY2VPYmplY3Q7DQoJCQkJCQl0aGlzLmluc3RhbmNlT2JqZWN0
Lmxvb3AgPSB0aGlzLmxvb3Bpbmc7DQoJCQkJCQl0aGlzLmdhaW5Ob2RlWyJnYWluIl1bInZhbHVl
Il0gPSBtYXN0ZXJWb2x1bWUgKiB0aGlzLnZvbHVtZSAqIHRoaXMubXV0ZXZvbDsNCgkJCQkJCXRo
aXMudXBkYXRlUGxheWJhY2tSYXRlKCk7DQoJCQkJCQl0aGlzLnN0YXJ0VGltZSA9ICh0aGlzLmlz
VGltZXNjYWxlZCA/IGF1ZFJ1bnRpbWUua2FoYW5UaW1lLnN1bSA6IGF1ZFJ1bnRpbWUud2FsbFRp
bWUuc3VtKSAtICh0aGlzLnJlc3VtZV9wb3NpdGlvbiAvICh0aGlzLnBsYXliYWNrUmF0ZSB8fCAw
LjAwMSkpOw0KCQkJCQkJc3RhcnRTb3VyY2VBdCh0aGlzLmluc3RhbmNlT2JqZWN0LCB0aGlzLnJl
c3VtZV9wb3NpdGlvbiwgdGhpcy5nZXREdXJhdGlvbigpKTsNCgkJCQkJfQ0KCQkJCQllbHNlDQoJ
CQkJCXsNCgkJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3RbInBsYXkiXSgpOw0KCQkJCQl9DQoJCQkJ
CXRoaXMucmVzdW1lX21lID0gZmFsc2U7DQoJCQkJfQ0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2Ug
QVBJX0NPUkRPVkE6DQoJCQlpZiAocykNCgkJCXsNCgkJCQlpZiAodGhpcy5pc1BsYXlpbmcoKSkN
CgkJCQl7DQoJCQkJCXRoaXMuaW5zdGFuY2VPYmplY3RbInBhdXNlIl0oKTsNCgkJCQkJdGhpcy5y
ZXN1bWVfbWUgPSB0cnVlOw0KCQkJCX0NCgkJCQllbHNlDQoJCQkJCXRoaXMucmVzdW1lX21lID0g
ZmFsc2U7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJaWYgKHRoaXMucmVzdW1lX21lKQ0KCQkJ
CXsNCgkJCQkJdGhpcy5yZXN1bWVfbWUgPSBmYWxzZTsNCgkJCQkJdGhpcy5pbnN0YW5jZU9iamVj
dFsicGxheSJdKCk7DQoJCQkJfQ0KCQkJfQ0KCQkJYnJlYWs7DQoJCWNhc2UgQVBJX0FQUE1PQkk6
DQoJCQlicmVhazsNCgkJfQ0KCX07DQoJcGx1Z2luUHJvdG8uSW5zdGFuY2UgPSBmdW5jdGlvbih0
eXBlKQ0KCXsNCgkJdGhpcy50eXBlID0gdHlwZTsNCgkJdGhpcy5ydW50aW1lID0gdHlwZS5ydW50
aW1lOw0KCQlhdWRSdW50aW1lID0gdGhpcy5ydW50aW1lOw0KCQlhdWRJbnN0ID0gdGhpczsNCgkJ
dGhpcy5saXN0ZW5lclRyYWNrZXIgPSBudWxsOw0KCQl0aGlzLmxpc3RlbmVyWiA9IC02MDA7DQoJ
CWlmICh0aGlzLnJ1bnRpbWUuaXNXS1dlYlZpZXcpDQoJCQlwbGF5TXVzaWNBc1NvdW5kV29ya2Fy
b3VuZCA9IHRydWU7DQoJCWlmICgodGhpcy5ydW50aW1lLmlzaU9TIHx8ICh0aGlzLnJ1bnRpbWUu
aXNBbmRyb2lkICYmICh0aGlzLnJ1bnRpbWUuaXNDaHJvbWUgfHwgdGhpcy5ydW50aW1lLmlzQW5k
cm9pZFN0b2NrQnJvd3NlcikpKSAmJiAhdGhpcy5ydW50aW1lLmlzQ3Jvc3N3YWxrICYmICF0aGlz
LnJ1bnRpbWUuaXNEb21GcmVlICYmICF0aGlzLnJ1bnRpbWUuaXNBbWF6b25XZWJBcHAgJiYgIXBs
YXlNdXNpY0FzU291bmRXb3JrYXJvdW5kKQ0KCQl7DQoJCQl1c2VOZXh0VG91Y2hXb3JrYXJvdW5k
ID0gdHJ1ZTsNCgkJfQ0KCQljb250ZXh0ID0gbnVsbDsNCgkJaWYgKHR5cGVvZiBBdWRpb0NvbnRl
eHQgIT09ICJ1bmRlZmluZWQiKQ0KCQl7DQoJCQlhcGkgPSBBUElfV0VCQVVESU87DQoJCQljb250
ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpOw0KCQl9DQoJCWVsc2UgaWYgKHR5cGVvZiB3ZWJraXRB
dWRpb0NvbnRleHQgIT09ICJ1bmRlZmluZWQiKQ0KCQl7DQoJCQlhcGkgPSBBUElfV0VCQVVESU87
DQoJCQljb250ZXh0ID0gbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpOw0KCQl9DQoJCWlmICh0aGlz
LnJ1bnRpbWUuaXNpT1MgJiYgY29udGV4dCkNCgkJew0KCQkJaWYgKGNvbnRleHQuY2xvc2UpDQoJ
CQkJY29udGV4dC5jbG9zZSgpOw0KCQkJaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICJ1bmRl
ZmluZWQiKQ0KCQkJCWNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7DQoJCQllbHNlIGlmICh0
eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAidW5kZWZpbmVkIikNCgkJCQljb250ZXh0ID0g
bmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpOw0KCQl9DQoJCWlmIChhcGkgIT09IEFQSV9XRUJBVURJ
TykNCgkJew0KCQkJaWYgKHRoaXMucnVudGltZS5pc0NvcmRvdmEgJiYgdHlwZW9mIHdpbmRvd1si
TWVkaWEiXSAhPT0gInVuZGVmaW5lZCIpDQoJCQkJYXBpID0gQVBJX0NPUkRPVkE7DQoJCQllbHNl
IGlmICh0aGlzLnJ1bnRpbWUuaXNBcHBNb2JpKQ0KCQkJCWFwaSA9IEFQSV9BUFBNT0JJOw0KCQl9
DQoJCWlmIChhcGkgPT09IEFQSV9DT1JET1ZBKQ0KCQl7DQoJCQlhcHBQYXRoID0gbG9jYXRpb24u
aHJlZjsNCgkJCXZhciBpID0gYXBwUGF0aC5sYXN0SW5kZXhPZigiLyIpOw0KCQkJaWYgKGkgPiAt
MSkNCgkJCQlhcHBQYXRoID0gYXBwUGF0aC5zdWJzdHIoMCwgaSArIDEpOw0KCQkJYXBwUGF0aCA9
IGFwcFBhdGgucmVwbGFjZSgiZmlsZTovLyIsICIiKTsNCgkJfQ0KCQlpZiAodGhpcy5ydW50aW1l
LmlzU2FmYXJpICYmIHRoaXMucnVudGltZS5pc1dpbmRvd3MgJiYgdHlwZW9mIEF1ZGlvID09PSAi
dW5kZWZpbmVkIikNCgkJew0KCQkJYWxlcnQoIkl0IGxvb2tzIGxpa2UgeW91J3JlIHVzaW5nIFNh
ZmFyaSBmb3IgV2luZG93cyB3aXRob3V0IFF1aWNrdGltZS4gIEF1ZGlvIGNhbm5vdCBiZSBwbGF5
ZWQgdW50aWwgUXVpY2t0aW1lIGlzIGluc3RhbGxlZC4iKTsNCgkJCXRoaXMucnVudGltZS5EZXN0
cm95SW5zdGFuY2UodGhpcyk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQlpZiAodGhpcy5ydW50aW1l
LmlzRGlyZWN0Q2FudmFzKQ0KCQkJCXVzZU9nZyA9IHRoaXMucnVudGltZS5pc0FuZHJvaWQ7CQkv
LyBBQUMgb24gaU9TLCBPR0cgb24gQW5kcm9pZA0KCQkJZWxzZQ0KCQkJew0KCQkJCXRyeSB7DQoJ
CQkJCXVzZU9nZyA9ICEhKG5ldyBBdWRpbygpLmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVj
cz0idm9yYmlzIicpKSAmJg0KCQkJCQkJCQkhdGhpcy5ydW50aW1lLmlzV2luZG93czEwOw0KCQkJ
CX0NCgkJCQljYXRjaCAoZSkNCgkJCQl7DQoJCQkJCXVzZU9nZyA9IGZhbHNlOw0KCQkJCX0NCgkJ
CX0NCgkJCXN3aXRjaCAoYXBpKSB7DQoJCQljYXNlIEFQSV9IVE1MNToNCjsNCgkJCQlicmVhazsN
CgkJCWNhc2UgQVBJX1dFQkFVRElPOg0KOw0KCQkJCWJyZWFrOw0KCQkJY2FzZSBBUElfQ09SRE9W
QToNCjsNCgkJCQlicmVhazsNCgkJCWNhc2UgQVBJX0FQUE1PQkk6DQo7DQoJCQkJYnJlYWs7DQoJ
CQlkZWZhdWx0Og0KOw0KCQkJfQ0KCQl0aGlzLnJ1bnRpbWUudGlja01lKHRoaXMpOw0KCQl9DQoJ
fTsNCgl2YXIgaW5zdGFuY2VQcm90byA9IHBsdWdpblByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsN
CglpbnN0YW5jZVByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMucnVudGlt
ZS5hdWRpb0luc3RhbmNlID0gdGhpczsNCgkJdGltZXNjYWxlX21vZGUgPSB0aGlzLnByb3BlcnRp
ZXNbMF07CS8vIDAgPSBvZmYsIDEgPSBzb3VuZHMgb25seSwgMiA9IGFsbA0KCQl0aGlzLnNhdmVs
b2FkID0gdGhpcy5wcm9wZXJ0aWVzWzFdOwkJLy8gMCA9IGFsbCwgMSA9IHNvdW5kcyBvbmx5LCAy
ID0gbXVzaWMgb25seSwgMyA9IG5vbmUNCgkJdGhpcy5wbGF5aW5iYWNrZ3JvdW5kID0gKHRoaXMu
cHJvcGVydGllc1syXSAhPT0gMCk7DQoJCXRoaXMubmV4dFBsYXlUaW1lID0gMDsNCgkJcGFubmlu
Z01vZGVsID0gdGhpcy5wcm9wZXJ0aWVzWzNdOwkJLy8gMCA9IGVxdWFscG93ZXIsIDEgPSBocnRm
LCAzID0gc291bmRmaWVsZA0KCQlkaXN0YW5jZU1vZGVsID0gdGhpcy5wcm9wZXJ0aWVzWzRdOwkJ
Ly8gMCA9IGxpbmVhciwgMSA9IGludmVyc2UsIDIgPSBleHBvbmVudGlhbA0KCQl0aGlzLmxpc3Rl
bmVyWiA9IC10aGlzLnByb3BlcnRpZXNbNV07DQoJCXJlZkRpc3RhbmNlID0gdGhpcy5wcm9wZXJ0
aWVzWzZdOw0KCQltYXhEaXN0YW5jZSA9IHRoaXMucHJvcGVydGllc1s3XTsNCgkJcm9sbG9mZkZh
Y3RvciA9IHRoaXMucHJvcGVydGllc1s4XTsNCgkJdGhpcy5saXN0ZW5lclRyYWNrZXIgPSBuZXcg
T2JqZWN0VHJhY2tlcigpOw0KCQl2YXIgZHJhd193aWR0aCA9ICh0aGlzLnJ1bnRpbWUuZHJhd193
aWR0aCB8fCB0aGlzLnJ1bnRpbWUud2lkdGgpOw0KCQl2YXIgZHJhd19oZWlnaHQgPSAodGhpcy5y
dW50aW1lLmRyYXdfaGVpZ2h0IHx8IHRoaXMucnVudGltZS5oZWlnaHQpOw0KCQlpZiAoYXBpID09
PSBBUElfV0VCQVVESU8pDQoJCXsNCgkJCWNvbnRleHRbImxpc3RlbmVyIl1bInNldFBvc2l0aW9u
Il0oZHJhd193aWR0aCAvIDIsIGRyYXdfaGVpZ2h0IC8gMiwgdGhpcy5saXN0ZW5lclopOw0KCQkJ
Y29udGV4dFsibGlzdGVuZXIiXVsic2V0T3JpZW50YXRpb24iXSgwLCAwLCAxLCAwLCAtMSwgMCk7
DQoJCQl3aW5kb3dbImMyT25BdWRpb01pY1N0cmVhbSJdID0gZnVuY3Rpb24gKGxvY2FsTWVkaWFT
dHJlYW0sIHRhZykNCgkJCXsNCgkJCQlpZiAobWljU291cmNlKQ0KCQkJCQltaWNTb3VyY2VbImRp
c2Nvbm5lY3QiXSgpOw0KCQkJCW1pY1RhZyA9IHRhZy50b0xvd2VyQ2FzZSgpOw0KCQkJCW1pY1Nv
dXJjZSA9IGNvbnRleHRbImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlIl0obG9jYWxNZWRpYVN0cmVh
bSk7DQoJCQkJbWljU291cmNlWyJjb25uZWN0Il0oZ2V0RGVzdGluYXRpb25Gb3JUYWcobWljVGFn
KSk7DQoJCQl9Ow0KCQl9DQoJCXRoaXMucnVudGltZS5hZGRTdXNwZW5kQ2FsbGJhY2soZnVuY3Rp
b24ocykNCgkJew0KCQkJYXVkSW5zdC5vblN1c3BlbmQocyk7DQoJCX0pOw0KCQl2YXIgc2VsZiA9
IHRoaXM7DQoJCXRoaXMucnVudGltZS5hZGREZXN0cm95Q2FsbGJhY2soZnVuY3Rpb24gKGluc3Qp
DQoJCXsNCgkJCXNlbGYub25JbnN0YW5jZURlc3Ryb3llZChpbnN0KTsNCgkJfSk7DQoJfTsNCglp
bnN0YW5jZVByb3RvLm9uSW5zdGFuY2VEZXN0cm95ZWQgPSBmdW5jdGlvbiAoaW5zdCkNCgl7DQoJ
CXZhciBpLCBsZW4sIGE7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlhID0gYXVkaW9JbnN0YW5jZXNbaV07DQoJCQlpZiAo
YS5vYmplY3RUcmFja2VyKQ0KCQkJew0KCQkJCWlmIChhLm9iamVjdFRyYWNrZXIub2JqID09PSBp
bnN0KQ0KCQkJCXsNCgkJCQkJYS5vYmplY3RUcmFja2VyLm9iaiA9IG51bGw7DQoJCQkJCWlmIChh
LnBhbm5lckVuYWJsZWQgJiYgYS5pc1BsYXlpbmcoKSAmJiBhLmxvb3BpbmcpDQoJCQkJCQlhLnN0
b3AoKTsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJaWYgKHRoaXMubGlzdGVuZXJUcmFja2VyLm9iaiA9
PT0gaW5zdCkNCgkJCXRoaXMubGlzdGVuZXJUcmFja2VyLm9iaiA9IG51bGw7DQoJfTsNCglpbnN0
YW5jZVByb3RvLnNhdmVUb0pTT04gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIG8gPSB7DQoJCQki
c2lsZW50Ijogc2lsZW50LA0KCQkJIm1hc3RlclZvbHVtZSI6IG1hc3RlclZvbHVtZSwNCgkJCSJs
aXN0ZW5lcloiOiB0aGlzLmxpc3RlbmVyWiwNCgkJCSJsaXN0ZW5lclVpZCI6IHRoaXMubGlzdGVu
ZXJUcmFja2VyLmhhc09iamVjdCgpID8gdGhpcy5saXN0ZW5lclRyYWNrZXIub2JqLnVpZCA6IC0x
LA0KCQkJInBsYXlpbmciOiBbXSwNCgkJCSJlZmZlY3RzIjoge30NCgkJfTsNCgkJdmFyIHBsYXlp
bmdhcnIgPSBvWyJwbGF5aW5nIl07DQoJCXZhciBpLCBsZW4sIGEsIGQsIHAsIHBhbm9iaiwgcGxh
eWJhY2tUaW1lOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhdWRpb0luc3RhbmNlcy5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJew0KCQkJYSA9IGF1ZGlvSW5zdGFuY2VzW2ldOw0KCQkJaWYgKCFhLnNo
b3VsZFNhdmUoKSkNCgkJCQljb250aW51ZTsJCQkJLy8gbm8gbmVlZCB0byBzYXZlIHN0b3BwZWQg
c291bmRzDQoJCQlpZiAodGhpcy5zYXZlbG9hZCA9PT0gMykJLy8gbm90IHNhdmluZy9sb2FkaW5n
IGFueSBzb3VuZHMvbXVzaWMNCgkJCQljb250aW51ZTsNCgkJCWlmIChhLmlzX211c2ljICYmIHRo
aXMuc2F2ZWxvYWQgPT09IDEpCS8vIG5vdCBzYXZpbmcvbG9hZGluZyBtdXNpYw0KCQkJCWNvbnRp
bnVlOw0KCQkJaWYgKCFhLmlzX211c2ljICYmIHRoaXMuc2F2ZWxvYWQgPT09IDIpCS8vIG5vdCBz
YXZpbmcvbG9hZGluZyBzb3VuZA0KCQkJCWNvbnRpbnVlOw0KCQkJcGxheWJhY2tUaW1lID0gYS5n
ZXRQbGF5YmFja1RpbWUoKTsNCgkJCWlmIChhLmxvb3BpbmcpDQoJCQkJcGxheWJhY2tUaW1lID0g
cGxheWJhY2tUaW1lICUgYS5nZXREdXJhdGlvbigpOw0KCQkJZCA9IHsNCgkJCQkidGFnIjogYS50
YWcsDQoJCQkJImJ1ZmZlcnNyYyI6IGEuYnVmZmVyLnNyYywNCgkJCQkiaXNfbXVzaWMiOiBhLmlz
X211c2ljLA0KCQkJCSJwbGF5YmFja1RpbWUiOiBwbGF5YmFja1RpbWUsDQoJCQkJInZvbHVtZSI6
IGEudm9sdW1lLA0KCQkJCSJsb29waW5nIjogYS5sb29waW5nLA0KCQkJCSJtdXRlZCI6IGEuaXNf
bXV0ZWQsDQoJCQkJInBsYXliYWNrUmF0ZSI6IGEucGxheWJhY2tSYXRlLA0KCQkJCSJwYXVzZWQi
OiBhLmlzX3BhdXNlZCwNCgkJCQkicmVzdW1lX3Bvc2l0aW9uIjogYS5yZXN1bWVfcG9zaXRpb24N
CgkJCX07DQoJCQlpZiAoYS5wYW5uZXJFbmFibGVkKQ0KCQkJew0KCQkJCWRbInBhbiJdID0ge307
DQoJCQkJcGFub2JqID0gZFsicGFuIl07DQoJCQkJaWYgKGEub2JqZWN0VHJhY2tlciAmJiBhLm9i
amVjdFRyYWNrZXIuaGFzT2JqZWN0KCkpDQoJCQkJew0KCQkJCQlwYW5vYmpbIm9ialVpZCJdID0g
YS5vYmplY3RUcmFja2VyLm9iai51aWQ7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXBh
bm9ialsieCJdID0gYS5wYW5YOw0KCQkJCQlwYW5vYmpbInkiXSA9IGEucGFuWTsNCgkJCQkJcGFu
b2JqWyJhIl0gPSBhLnBhbkFuZ2xlOw0KCQkJCX0NCgkJCQlwYW5vYmpbImlhIl0gPSBhLnBhbkNv
bmVJbm5lcjsNCgkJCQlwYW5vYmpbIm9hIl0gPSBhLnBhbkNvbmVPdXRlcjsNCgkJCQlwYW5vYmpb
Im9nIl0gPSBhLnBhbkNvbmVPdXRlckdhaW47DQoJCQl9DQoJCQlwbGF5aW5nYXJyLnB1c2goZCk7
DQoJCX0NCgkJdmFyIGZ4b2JqID0gb1siZWZmZWN0cyJdOw0KCQl2YXIgZnhhcnI7DQoJCWZvciAo
cCBpbiBlZmZlY3RzKQ0KCQl7DQoJCQlpZiAoZWZmZWN0cy5oYXNPd25Qcm9wZXJ0eShwKSkNCgkJ
CXsNCgkJCQlmeGFyciA9IFtdOw0KCQkJCWZvciAoaSA9IDAsIGxlbiA9IGVmZmVjdHNbcF0ubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJCQlmeGFyci5wdXNoKHsgInR5cGUiOiBlZmZl
Y3RzW3BdW2ldLnR5cGUsICJwYXJhbXMiOiBlZmZlY3RzW3BdW2ldLnBhcmFtcyB9KTsNCgkJCQl9
DQoJCQkJZnhvYmpbcF0gPSBmeGFycjsNCgkJCX0NCgkJfQ0KCQlyZXR1cm4gbzsNCgl9Ow0KCXZh
ciBvYmplY3RUcmFja2VyVWlkc1RvTG9hZCA9IFtdOw0KCWluc3RhbmNlUHJvdG8ubG9hZEZyb21K
U09OID0gZnVuY3Rpb24gKG8pDQoJew0KCQl2YXIgc2V0U2lsZW50ID0gb1sic2lsZW50Il07DQoJ
CW1hc3RlclZvbHVtZSA9IG9bIm1hc3RlclZvbHVtZSJdOw0KCQl0aGlzLmxpc3RlbmVyWiA9IG9b
Imxpc3RlbmVyWiJdOw0KCQl0aGlzLmxpc3RlbmVyVHJhY2tlci5zZXRPYmplY3QobnVsbCk7DQoJ
CXZhciBsaXN0ZW5lclVpZCA9IG9bImxpc3RlbmVyVWlkIl07DQoJCWlmIChsaXN0ZW5lclVpZCAh
PT0gLTEpDQoJCXsNCgkJCXRoaXMubGlzdGVuZXJUcmFja2VyLmxvYWRVaWQgPSBsaXN0ZW5lclVp
ZDsNCgkJCW9iamVjdFRyYWNrZXJVaWRzVG9Mb2FkLnB1c2godGhpcy5saXN0ZW5lclRyYWNrZXIp
Ow0KCQl9DQoJCXZhciBwbGF5aW5nYXJyID0gb1sicGxheWluZyJdOw0KCQl2YXIgaSwgbGVuLCBk
LCBzcmMsIGlzX211c2ljLCB0YWcsIHBsYXliYWNrVGltZSwgbG9vcGluZywgdm9sLCBiLCBhLCBw
LCBwYW4sIHBhbk9ialVpZDsNCgkJaWYgKHRoaXMuc2F2ZWxvYWQgIT09IDMpDQoJCXsNCgkJCWZv
ciAoaSA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJ
ew0KCQkJCWEgPSBhdWRpb0luc3RhbmNlc1tpXTsNCgkJCQlpZiAoYS5pc19tdXNpYyAmJiB0aGlz
LnNhdmVsb2FkID09PSAxKQ0KCQkJCQljb250aW51ZTsJCS8vIG9ubHkgc2F2aW5nL2xvYWRpbmcg
c291bmQ6IGxlYXZlIG11c2ljIHBsYXlpbmcNCgkJCQlpZiAoIWEuaXNfbXVzaWMgJiYgdGhpcy5z
YXZlbG9hZCA9PT0gMikNCgkJCQkJY29udGludWU7CQkvLyBvbmx5IHNhdmluZy9sb2FkaW5nIG11
c2ljOiBsZWF2ZSBzb3VuZCBwbGF5aW5nDQoJCQkJYS5zdG9wKCk7DQoJCQl9DQoJCX0NCgkJdmFy
IGZ4YXJyLCBmeHR5cGUsIGZ4cGFyYW1zLCBmeDsNCgkJZm9yIChwIGluIGVmZmVjdHMpDQoJCXsN
CgkJCWlmIChlZmZlY3RzLmhhc093blByb3BlcnR5KHApKQ0KCQkJew0KCQkJCWZvciAoaSA9IDAs
IGxlbiA9IGVmZmVjdHNbcF0ubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJCWVmZmVjdHNbcF1b
aV0ucmVtb3ZlKCk7DQoJCQl9DQoJCX0NCgkJY3Iud2lwZShlZmZlY3RzKTsNCgkJZm9yIChwIGlu
IG9bImVmZmVjdHMiXSkNCgkJew0KCQkJaWYgKG9bImVmZmVjdHMiXS5oYXNPd25Qcm9wZXJ0eShw
KSkNCgkJCXsNCgkJCQlmeGFyciA9IG9bImVmZmVjdHMiXVtwXTsNCgkJCQlmb3IgKGkgPSAwLCBs
ZW4gPSBmeGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCWZ4dHlwZSA9IGZ4
YXJyW2ldWyJ0eXBlIl07DQoJCQkJCWZ4cGFyYW1zID0gZnhhcnJbaV1bInBhcmFtcyJdOw0KCQkJ
CQlzd2l0Y2ggKGZ4dHlwZSkgew0KCQkJCQljYXNlICJmaWx0ZXIiOg0KCQkJCQkJYWRkRWZmZWN0
Rm9yVGFnKHAsIG5ldyBGaWx0ZXJFZmZlY3QoZnhwYXJhbXNbMF0sIGZ4cGFyYW1zWzFdLCBmeHBh
cmFtc1syXSwgZnhwYXJhbXNbM10sIGZ4cGFyYW1zWzRdLCBmeHBhcmFtc1s1XSkpOw0KCQkJCQkJ
YnJlYWs7DQoJCQkJCWNhc2UgImRlbGF5IjoNCgkJCQkJCWFkZEVmZmVjdEZvclRhZyhwLCBuZXcg
RGVsYXlFZmZlY3QoZnhwYXJhbXNbMF0sIGZ4cGFyYW1zWzFdLCBmeHBhcmFtc1syXSkpOw0KCQkJ
CQkJYnJlYWs7DQoJCQkJCWNhc2UgImNvbnZvbHZlIjoNCgkJCQkJCXNyYyA9IGZ4cGFyYW1zWzJd
Ow0KCQkJCQkJYiA9IHRoaXMuZ2V0QXVkaW9CdWZmZXIoc3JjLCBmYWxzZSk7DQoJCQkJCQlpZiAo
Yi5idWZmZXJPYmplY3QpDQoJCQkJCQl7DQoJCQkJCQkJZnggPSBuZXcgQ29udm9sdmVFZmZlY3Qo
Yi5idWZmZXJPYmplY3QsIGZ4cGFyYW1zWzBdLCBmeHBhcmFtc1sxXSwgc3JjKTsNCgkJCQkJCX0N
CgkJCQkJCWVsc2UNCgkJCQkJCXsNCgkJCQkJCQlmeCA9IG5ldyBDb252b2x2ZUVmZmVjdChudWxs
LCBmeHBhcmFtc1swXSwgZnhwYXJhbXNbMV0sIHNyYyk7DQoJCQkJCQkJYi5ub3JtYWxpemVXaGVu
UmVhZHkgPSBmeHBhcmFtc1swXTsNCgkJCQkJCQliLmNvbnZvbHZlV2hlblJlYWR5ID0gZng7DQoJ
CQkJCQl9DQoJCQkJCQlhZGRFZmZlY3RGb3JUYWcocCwgZngpOw0KCQkJCQkJYnJlYWs7DQoJCQkJ
CWNhc2UgImZsYW5nZXIiOg0KCQkJCQkJYWRkRWZmZWN0Rm9yVGFnKHAsIG5ldyBGbGFuZ2VyRWZm
ZWN0KGZ4cGFyYW1zWzBdLCBmeHBhcmFtc1sxXSwgZnhwYXJhbXNbMl0sIGZ4cGFyYW1zWzNdLCBm
eHBhcmFtc1s0XSkpOw0KCQkJCQkJYnJlYWs7DQoJCQkJCWNhc2UgInBoYXNlciI6DQoJCQkJCQlh
ZGRFZmZlY3RGb3JUYWcocCwgbmV3IFBoYXNlckVmZmVjdChmeHBhcmFtc1swXSwgZnhwYXJhbXNb
MV0sIGZ4cGFyYW1zWzJdLCBmeHBhcmFtc1szXSwgZnhwYXJhbXNbNF0sIGZ4cGFyYW1zWzVdKSk7
DQoJCQkJCQlicmVhazsNCgkJCQkJY2FzZSAiZ2FpbiI6DQoJCQkJCQlhZGRFZmZlY3RGb3JUYWco
cCwgbmV3IEdhaW5FZmZlY3QoZnhwYXJhbXNbMF0pKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNl
ICJ0cmVtb2xvIjoNCgkJCQkJCWFkZEVmZmVjdEZvclRhZyhwLCBuZXcgVHJlbW9sb0VmZmVjdChm
eHBhcmFtc1swXSwgZnhwYXJhbXNbMV0pKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJyaW5n
bW9kIjoNCgkJCQkJCWFkZEVmZmVjdEZvclRhZyhwLCBuZXcgUmluZ01vZHVsYXRvckVmZmVjdChm
eHBhcmFtc1swXSwgZnhwYXJhbXNbMV0pKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJkaXN0
b3J0aW9uIjoNCgkJCQkJCWFkZEVmZmVjdEZvclRhZyhwLCBuZXcgRGlzdG9ydGlvbkVmZmVjdChm
eHBhcmFtc1swXSwgZnhwYXJhbXNbMV0sIGZ4cGFyYW1zWzJdLCBmeHBhcmFtc1szXSwgZnhwYXJh
bXNbNF0pKTsNCgkJCQkJCWJyZWFrOw0KCQkJCQljYXNlICJjb21wcmVzc29yIjoNCgkJCQkJCWFk
ZEVmZmVjdEZvclRhZyhwLCBuZXcgQ29tcHJlc3NvckVmZmVjdChmeHBhcmFtc1swXSwgZnhwYXJh
bXNbMV0sIGZ4cGFyYW1zWzJdLCBmeHBhcmFtc1szXSwgZnhwYXJhbXNbNF0pKTsNCgkJCQkJCWJy
ZWFrOw0KCQkJCQljYXNlICJhbmFseXNlciI6DQoJCQkJCQlhZGRFZmZlY3RGb3JUYWcocCwgbmV3
IEFuYWx5c2VyRWZmZWN0KGZ4cGFyYW1zWzBdLCBmeHBhcmFtc1sxXSkpOw0KCQkJCQkJYnJlYWs7
DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgkJZm9yIChpID0gMCwgbGVuID0gcGxheWluZ2Fy
ci5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKHRoaXMuc2F2ZWxvYWQgPT09IDMp
CS8vIG5vdCBzYXZpbmcvbG9hZGluZyBhbnkgc291bmRzL211c2ljDQoJCQkJY29udGludWU7DQoJ
CQlkID0gcGxheWluZ2FycltpXTsNCgkJCXNyYyA9IGRbImJ1ZmZlcnNyYyJdOw0KCQkJaXNfbXVz
aWMgPSBkWyJpc19tdXNpYyJdOw0KCQkJdGFnID0gZFsidGFnIl07DQoJCQlwbGF5YmFja1RpbWUg
PSBkWyJwbGF5YmFja1RpbWUiXTsNCgkJCWxvb3BpbmcgPSBkWyJsb29waW5nIl07DQoJCQl2b2wg
PSBkWyJ2b2x1bWUiXTsNCgkJCXBhbiA9IGRbInBhbiJdOw0KCQkJcGFuT2JqVWlkID0gKHBhbiAm
JiBwYW4uaGFzT3duUHJvcGVydHkoIm9ialVpZCIpKSA/IHBhblsib2JqVWlkIl0gOiAtMTsNCgkJ
CWlmIChpc19tdXNpYyAmJiB0aGlzLnNhdmVsb2FkID09PSAxKQkvLyBub3Qgc2F2aW5nL2xvYWRp
bmcgbXVzaWMNCgkJCQljb250aW51ZTsNCgkJCWlmICghaXNfbXVzaWMgJiYgdGhpcy5zYXZlbG9h
ZCA9PT0gMikJLy8gbm90IHNhdmluZy9sb2FkaW5nIHNvdW5kDQoJCQkJY29udGludWU7DQoJCQlh
ID0gdGhpcy5nZXRBdWRpb0luc3RhbmNlKHNyYywgdGFnLCBpc19tdXNpYywgbG9vcGluZywgdm9s
KTsNCgkJCWlmICghYSkNCgkJCXsNCgkJCQliID0gdGhpcy5nZXRBdWRpb0J1ZmZlcihzcmMsIGlz
X211c2ljKTsNCgkJCQliLnNlZWtXaGVuUmVhZHkgPSBwbGF5YmFja1RpbWU7DQoJCQkJYi5wYXVz
ZVdoZW5SZWFkeSA9IGRbInBhdXNlZCJdOw0KCQkJCWlmIChwYW4pDQoJCQkJew0KCQkJCQlpZiAo
cGFuT2JqVWlkICE9PSAtMSkNCgkJCQkJew0KCQkJCQkJYi5wYW5XaGVuUmVhZHkucHVzaCh7IG9i
alVpZDogcGFuT2JqVWlkLCBpYTogcGFuWyJpYSJdLCBvYTogcGFuWyJvYSJdLCBvZzogcGFuWyJv
ZyJdLCB0aGlzdGFnOiB0YWcgfSk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQli
LnBhbldoZW5SZWFkeS5wdXNoKHsgeDogcGFuWyJ4Il0sIHk6IHBhblsieSJdLCBhOiBwYW5bImEi
XSwgaWE6IHBhblsiaWEiXSwgb2E6IHBhblsib2EiXSwgb2c6IHBhblsib2ciXSwgdGhpc3RhZzog
dGFnIH0pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KCQkJYS5yZXN1bWVf
cG9zaXRpb24gPSBkWyJyZXN1bWVfcG9zaXRpb24iXTsNCgkJCWEuc2V0UGFubmVyRW5hYmxlZCgh
IXBhbik7DQoJCQlhLnBsYXkobG9vcGluZywgdm9sLCBwbGF5YmFja1RpbWUpOw0KCQkJYS51cGRh
dGVQbGF5YmFja1JhdGUoKTsNCgkJCWEudXBkYXRlVm9sdW1lKCk7DQoJCQlhLmRvU2V0TXV0ZWQo
YS5pc19tdXRlZCB8fCBhLmlzX3NpbGVudCk7DQoJCQlpZiAoZFsicGF1c2VkIl0pDQoJCQkJYS5w
YXVzZSgpOw0KCQkJaWYgKGRbIm11dGVkIl0pDQoJCQkJYS5zZXRNdXRlZCh0cnVlKTsNCgkJCWEu
ZG9TZXRNdXRlZChhLmlzX211dGVkIHx8IGEuaXNfc2lsZW50KTsNCgkJCWlmIChwYW4pDQoJCQl7
DQoJCQkJaWYgKHBhbk9ialVpZCAhPT0gLTEpDQoJCQkJew0KCQkJCQlhLm9iamVjdFRyYWNrZXIg
PSBhLm9iamVjdFRyYWNrZXIgfHwgbmV3IE9iamVjdFRyYWNrZXIoKTsNCgkJCQkJYS5vYmplY3RU
cmFja2VyLmxvYWRVaWQgPSBwYW5PYmpVaWQ7DQoJCQkJCW9iamVjdFRyYWNrZXJVaWRzVG9Mb2Fk
LnB1c2goYS5vYmplY3RUcmFja2VyKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJYS5z
ZXRQYW4ocGFuWyJ4Il0sIHBhblsieSJdLCBwYW5bImEiXSwgcGFuWyJpYSJdLCBwYW5bIm9hIl0s
IHBhblsib2ciXSk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCWlmIChzZXRTaWxlbnQgJiYgIXNpbGVu
dCkJCQkvLyBzZXR0aW5nIHNpbGVudA0KCQl7DQoJCQlmb3IgKGkgPSAwLCBsZW4gPSBhdWRpb0lu
c3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQlhdWRpb0luc3RhbmNlc1tpXS5zZXRT
aWxlbnQodHJ1ZSk7DQoJCQlzaWxlbnQgPSB0cnVlOw0KCQl9DQoJCWVsc2UgaWYgKCFzZXRTaWxl
bnQgJiYgc2lsZW50KQkJLy8gc2V0dGluZyBub3Qgc2lsZW50DQoJCXsNCgkJCWZvciAoaSA9IDAs
IGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCWF1ZGlvSW5z
dGFuY2VzW2ldLnNldFNpbGVudChmYWxzZSk7DQoJCQlzaWxlbnQgPSBmYWxzZTsNCgkJfQ0KCX07
DQoJaW5zdGFuY2VQcm90by5hZnRlckxvYWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGksIGxl
biwgb3QsIGluc3Q7DQoJCWZvciAoaSA9IDAsIGxlbiA9IG9iamVjdFRyYWNrZXJVaWRzVG9Mb2Fk
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlvdCA9IG9iamVjdFRyYWNrZXJVaWRzVG9M
b2FkW2ldOw0KCQkJaW5zdCA9IHRoaXMucnVudGltZS5nZXRPYmplY3RCeVVJRChvdC5sb2FkVWlk
KTsNCgkJCW90LnNldE9iamVjdChpbnN0KTsNCgkJCW90LmxvYWRVaWQgPSAtMTsNCgkJCWlmIChp
bnN0KQ0KCQkJew0KCQkJCWxpc3RlbmVyWCA9IGluc3QueDsNCgkJCQlsaXN0ZW5lclkgPSBpbnN0
Lnk7DQoJCQl9DQoJCX0NCgkJY3IuY2xlYXJBcnJheShvYmplY3RUcmFja2VyVWlkc1RvTG9hZCk7
DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uU3VzcGVuZCA9IGZ1bmN0aW9uIChzKQ0KCXsNCgkJaWYg
KHRoaXMucGxheWluYmFja2dyb3VuZCkNCgkJCXJldHVybjsNCgkJaWYgKCFzICYmIGNvbnRleHQg
JiYgY29udGV4dFsicmVzdW1lIl0pDQoJCXsNCgkJCWNvbnRleHRbInJlc3VtZSJdKCk7DQoJCQlp
c0NvbnRleHRTdXNwZW5kZWQgPSBmYWxzZTsNCgkJfQ0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkg
PSAwLCBsZW4gPSBhdWRpb0luc3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCWF1ZGlv
SW5zdGFuY2VzW2ldLnNldFN1c3BlbmRlZChzKTsNCgkJaWYgKHMgJiYgY29udGV4dCAmJiBjb250
ZXh0WyJzdXNwZW5kIl0pDQoJCXsNCgkJCWNvbnRleHRbInN1c3BlbmQiXSgpOw0KCQkJaXNDb250
ZXh0U3VzcGVuZGVkID0gdHJ1ZTsNCgkJfQ0KCX07DQoJaW5zdGFuY2VQcm90by50aWNrID0gZnVu
Y3Rpb24gKCkNCgl7DQoJCXZhciBkdCA9IHRoaXMucnVudGltZS5kdDsNCgkJdmFyIGksIGxlbiwg
YTsNCgkJZm9yIChpID0gMCwgbGVuID0gYXVkaW9JbnN0YW5jZXMubGVuZ3RoOyBpIDwgbGVuOyBp
KyspDQoJCXsNCgkJCWEgPSBhdWRpb0luc3RhbmNlc1tpXTsNCgkJCWEudGljayhkdCk7DQoJCQlp
ZiAodGltZXNjYWxlX21vZGUgIT09IDApDQoJCQkJYS51cGRhdGVQbGF5YmFja1JhdGUoKTsNCgkJ
fQ0KCQl2YXIgcCwgYXJyLCBmOw0KCQlmb3IgKHAgaW4gZWZmZWN0cykNCgkJew0KCQkJaWYgKGVm
ZmVjdHMuaGFzT3duUHJvcGVydHkocCkpDQoJCQl7DQoJCQkJYXJyID0gZWZmZWN0c1twXTsNCgkJ
CQlmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJew0KCQkJ
CQlmID0gYXJyW2ldOw0KCQkJCQlpZiAoZi50aWNrKQ0KCQkJCQkJZi50aWNrKCk7DQoJCQkJfQ0K
CQkJfQ0KCQl9DQoJCWlmIChhcGkgPT09IEFQSV9XRUJBVURJTyAmJiB0aGlzLmxpc3RlbmVyVHJh
Y2tlci5oYXNPYmplY3QoKSkNCgkJew0KCQkJdGhpcy5saXN0ZW5lclRyYWNrZXIudGljayhkdCk7
DQoJCQlsaXN0ZW5lclggPSB0aGlzLmxpc3RlbmVyVHJhY2tlci5vYmoueDsNCgkJCWxpc3RlbmVy
WSA9IHRoaXMubGlzdGVuZXJUcmFja2VyLm9iai55Ow0KCQkJY29udGV4dFsibGlzdGVuZXIiXVsi
c2V0UG9zaXRpb24iXSh0aGlzLmxpc3RlbmVyVHJhY2tlci5vYmoueCwgdGhpcy5saXN0ZW5lclRy
YWNrZXIub2JqLnksIHRoaXMubGlzdGVuZXJaKTsNCgkJfQ0KCX07DQoJdmFyIHByZWxvYWRfbGlz
dCA9IFtdOw0KCWluc3RhbmNlUHJvdG8uc2V0UHJlbG9hZExpc3QgPSBmdW5jdGlvbiAoYXJyKQ0K
CXsNCgkJdmFyIGksIGxlbiwgcCwgZmlsZW5hbWUsIHNpemUsIGlzT2dnOw0KCQl2YXIgdG90YWxf
c2l6ZSA9IDA7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47ICsraSkN
CgkJew0KCQkJcCA9IGFycltpXTsNCgkJCWZpbGVuYW1lID0gcFswXTsNCgkJCXNpemUgPSBwWzFd
ICogMjsNCgkJCWlzT2dnID0gKGZpbGVuYW1lLmxlbmd0aCA+IDQgJiYgZmlsZW5hbWUuc3Vic3Ry
KGZpbGVuYW1lLmxlbmd0aCAtIDQpID09PSAiLm9nZyIpOw0KCQkJaWYgKChpc09nZyAmJiB1c2VP
Z2cpIHx8ICghaXNPZ2cgJiYgIXVzZU9nZykpDQoJCQl7DQoJCQkJcHJlbG9hZF9saXN0LnB1c2go
ew0KCQkJCQlmaWxlbmFtZTogZmlsZW5hbWUsDQoJCQkJCXNpemU6IHNpemUsDQoJCQkJCW9iajog
bnVsbA0KCQkJCX0pOw0KCQkJCXRvdGFsX3NpemUgKz0gc2l6ZTsNCgkJCX0NCgkJfQ0KCQlyZXR1
cm4gdG90YWxfc2l6ZTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8uc3RhcnRQcmVsb2FkcyA9IGZ1bmN0
aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuLCBwLCBzcmM7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHBy
ZWxvYWRfbGlzdC5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJcCA9IHByZWxvYWRfbGlz
dFtpXTsNCgkJCXNyYyA9IHRoaXMucnVudGltZS5maWxlc19zdWJmb2xkZXIgKyBwLmZpbGVuYW1l
Ow0KCQkJcC5vYmogPSB0aGlzLmdldEF1ZGlvQnVmZmVyKHNyYywgZmFsc2UpOw0KCQl9DQoJfTsN
CglpbnN0YW5jZVByb3RvLmdldFByZWxvYWRlZFNpemUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFy
IGNvbXBsZXRlZCA9IDA7DQoJCXZhciBpLCBsZW4sIHA7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHBy
ZWxvYWRfbGlzdC5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0KCQkJcCA9IHByZWxvYWRfbGlz
dFtpXTsNCgkJCWlmIChwLm9iai5pc0xvYWRlZEFuZERlY29kZWQoKSB8fCBwLm9iai5oYXNGYWls
ZWRUb0xvYWQoKSB8fCB0aGlzLnJ1bnRpbWUuaXNEb21GcmVlIHx8IHRoaXMucnVudGltZS5pc0Fu
ZHJvaWRTdG9ja0Jyb3dzZXIpDQoJCQl7DQoJCQkJY29tcGxldGVkICs9IHAuc2l6ZTsNCgkJCX0N
CgkJCWVsc2UgaWYgKHAub2JqLmlzTG9hZGVkKCkpCS8vIGRvd25sb2FkZWQgYnV0IG5vdCBkZWNv
ZGVkOiBvbmx5IGhhcHBlbnMgaW4gV2ViIEF1ZGlvIEFQSSwgY291bnQgYXMgaGFsZi13YXkgcHJv
Z3Jlc3MNCgkJCXsNCgkJCQljb21wbGV0ZWQgKz0gTWF0aC5mbG9vcihwLnNpemUgLyAyKTsNCgkJ
CX0NCgkJfTsNCgkJcmV0dXJuIGNvbXBsZXRlZDsNCgl9Ow0KCWluc3RhbmNlUHJvdG8ucmVsZWFz
ZUFsbE11c2ljQnVmZmVycyA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgaSwgbGVuLCBqLCBiOw0K
CQlmb3IgKGkgPSAwLCBqID0gMCwgbGVuID0gYXVkaW9CdWZmZXJzLmxlbmd0aDsgaSA8IGxlbjsg
KytpKQ0KCQl7DQoJCQliID0gYXVkaW9CdWZmZXJzW2ldOw0KCQkJYXVkaW9CdWZmZXJzW2pdID0g
YjsNCgkJCWlmIChiLmlzX211c2ljKQ0KCQkJCWIucmVsZWFzZSgpOw0KCQkJZWxzZQ0KCQkJCSsr
ajsJCS8vIGtlZXANCgkJfQ0KCQlhdWRpb0J1ZmZlcnMubGVuZ3RoID0gajsNCgl9Ow0KCWluc3Rh
bmNlUHJvdG8uZ2V0QXVkaW9CdWZmZXIgPSBmdW5jdGlvbiAoc3JjXywgaXNfbXVzaWMsIGRvbnRf
Y3JlYXRlKQ0KCXsNCgkJdmFyIGksIGxlbiwgYSwgcmV0ID0gbnVsbCwgaiwgaywgbGVuaiwgYWk7
DQoJCWZvciAoaSA9IDAsIGxlbiA9IGF1ZGlvQnVmZmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykN
CgkJew0KCQkJYSA9IGF1ZGlvQnVmZmVyc1tpXTsNCgkJCWlmIChhLnNyYyA9PT0gc3JjXykNCgkJ
CXsNCgkJCQlyZXQgPSBhOw0KCQkJCWJyZWFrOw0KCQkJfQ0KCQl9DQoJCWlmICghcmV0ICYmICFk
b250X2NyZWF0ZSkNCgkJew0KCQkJaWYgKHBsYXlNdXNpY0FzU291bmRXb3JrYXJvdW5kICYmIGlz
X211c2ljKQ0KCQkJCXRoaXMucmVsZWFzZUFsbE11c2ljQnVmZmVycygpOw0KCQkJcmV0ID0gbmV3
IEMyQXVkaW9CdWZmZXIoc3JjXywgaXNfbXVzaWMpOw0KCQkJYXVkaW9CdWZmZXJzLnB1c2gocmV0
KTsNCgkJfQ0KCQlyZXR1cm4gcmV0Ow0KCX07DQoJaW5zdGFuY2VQcm90by5nZXRBdWRpb0luc3Rh
bmNlID0gZnVuY3Rpb24gKHNyY18sIHRhZywgaXNfbXVzaWMsIGxvb3BpbmcsIHZvbCkNCgl7DQoJ
CXZhciBpLCBsZW4sIGE7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlhID0gYXVkaW9JbnN0YW5jZXNbaV07DQoJCQlpZiAo
YS5zcmMgPT09IHNyY18gJiYgKGEuY2FuQmVSZWN5Y2xlZCgpIHx8IGlzX211c2ljKSkNCgkJCXsN
CgkJCQlhLnRhZyA9IHRhZzsNCgkJCQlyZXR1cm4gYTsNCgkJCX0NCgkJfQ0KCQl2YXIgYiA9IHRo
aXMuZ2V0QXVkaW9CdWZmZXIoc3JjXywgaXNfbXVzaWMpOw0KCQlpZiAoIWIuYnVmZmVyT2JqZWN0
KQ0KCQl7DQoJCQlpZiAodGFnICE9PSAiPHByZWxvYWQ+IikNCgkJCXsNCgkJCQliLnBsYXlUYWdX
aGVuUmVhZHkgPSB0YWc7DQoJCQkJYi5sb29wV2hlblJlYWR5ID0gbG9vcGluZzsNCgkJCQliLnZv
bHVtZVdoZW5SZWFkeSA9IHZvbDsNCgkJCX0NCgkJCXJldHVybiBudWxsOw0KCQl9DQoJCWEgPSBu
ZXcgQzJBdWRpb0luc3RhbmNlKGIsIHRhZyk7DQoJCWF1ZGlvSW5zdGFuY2VzLnB1c2goYSk7DQoJ
CXJldHVybiBhOw0KCX07DQoJdmFyIHRhZ2dlZEF1ZGlvID0gW107DQoJZnVuY3Rpb24gU29ydEJ5
SXNQbGF5aW5nKGEsIGIpDQoJew0KCQl2YXIgYW4gPSBhLmlzUGxheWluZygpID8gMSA6IDA7DQoJ
CXZhciBibiA9IGIuaXNQbGF5aW5nKCkgPyAxIDogMDsNCgkJaWYgKGFuID09PSBibikNCgkJCXJl
dHVybiAwOw0KCQllbHNlIGlmIChhbiA8IGJuKQ0KCQkJcmV0dXJuIDE7DQoJCWVsc2UNCgkJCXJl
dHVybiAtMTsNCgl9Ow0KCWZ1bmN0aW9uIGdldEF1ZGlvQnlUYWcodGFnLCBzb3J0X2J5X3BsYXlp
bmcpDQoJew0KCQljci5jbGVhckFycmF5KHRhZ2dlZEF1ZGlvKTsNCgkJaWYgKCF0YWcubGVuZ3Ro
KQ0KCQl7DQoJCQlpZiAoIWxhc3RBdWRpbyB8fCBsYXN0QXVkaW8uaGFzRW5kZWQoKSkNCgkJCQly
ZXR1cm47DQoJCQllbHNlDQoJCQl7DQoJCQkJY3IuY2xlYXJBcnJheSh0YWdnZWRBdWRpbyk7DQoJ
CQkJdGFnZ2VkQXVkaW9bMF0gPSBsYXN0QXVkaW87DQoJCQkJcmV0dXJuOw0KCQkJfQ0KCQl9DQoJ
CXZhciBpLCBsZW4sIGE7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlhID0gYXVkaW9JbnN0YW5jZXNbaV07DQoJCQlpZiAo
Y3IuZXF1YWxzX25vY2FzZSh0YWcsIGEudGFnKSkNCgkJCQl0YWdnZWRBdWRpby5wdXNoKGEpOw0K
CQl9DQoJCWlmIChzb3J0X2J5X3BsYXlpbmcpDQoJCQl0YWdnZWRBdWRpby5zb3J0KFNvcnRCeUlz
UGxheWluZyk7DQoJfTsNCglmdW5jdGlvbiByZWNvbm5lY3RFZmZlY3RzKHRhZykNCgl7DQoJCXZh
ciBpLCBsZW4sIGFyciwgbiwgdG9Ob2RlID0gY29udGV4dFsiZGVzdGluYXRpb24iXTsNCgkJaWYg
KGVmZmVjdHMuaGFzT3duUHJvcGVydHkodGFnKSkNCgkJew0KCQkJYXJyID0gZWZmZWN0c1t0YWdd
Ow0KCQkJaWYgKGFyci5sZW5ndGgpDQoJCQl7DQoJCQkJdG9Ob2RlID0gYXJyWzBdLmdldElucHV0
Tm9kZSgpOw0KCQkJCWZvciAoaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykN
CgkJCQl7DQoJCQkJCW4gPSBhcnJbaV07DQoJCQkJCWlmIChpICsgMSA9PT0gbGVuKQ0KCQkJCQkJ
bi5jb25uZWN0VG8oY29udGV4dFsiZGVzdGluYXRpb24iXSk7DQoJCQkJCWVsc2UNCgkJCQkJCW4u
Y29ubmVjdFRvKGFycltpICsgMV0uZ2V0SW5wdXROb2RlKCkpOw0KCQkJCX0NCgkJCX0NCgkJfQ0K
CQlnZXRBdWRpb0J5VGFnKHRhZyk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRhZ2dlZEF1ZGlvLmxl
bmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGFnZ2VkQXVkaW9baV0ucmVjb25uZWN0KHRvTm9kZSk7
DQoJCWlmIChtaWNTb3VyY2UgJiYgbWljVGFnID09PSB0YWcpDQoJCXsNCgkJCW1pY1NvdXJjZVsi
ZGlzY29ubmVjdCJdKCk7DQoJCQltaWNTb3VyY2VbImNvbm5lY3QiXSh0b05vZGUpOw0KCQl9DQoJ
fTsNCglmdW5jdGlvbiBhZGRFZmZlY3RGb3JUYWcodGFnLCBmeCkNCgl7DQoJCWlmICghZWZmZWN0
cy5oYXNPd25Qcm9wZXJ0eSh0YWcpKQ0KCQkJZWZmZWN0c1t0YWddID0gW2Z4XTsNCgkJZWxzZQ0K
CQkJZWZmZWN0c1t0YWddLnB1c2goZngpOw0KCQlyZWNvbm5lY3RFZmZlY3RzKHRhZyk7DQoJfTsN
CglmdW5jdGlvbiBDbmRzKCkge307DQoJQ25kcy5wcm90b3R5cGUuT25FbmRlZCA9IGZ1bmN0aW9u
ICh0KQ0KCXsNCgkJcmV0dXJuIGNyLmVxdWFsc19ub2Nhc2UoYXVkVGFnLCB0KTsNCgl9Ow0KCUNu
ZHMucHJvdG90eXBlLlByZWxvYWRzQ29tcGxldGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGks
IGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gYXVkaW9CdWZmZXJzLmxlbmd0aDsgaSA8IGxlbjsg
aSsrKQ0KCQl7DQoJCQlpZiAoIWF1ZGlvQnVmZmVyc1tpXS5pc0xvYWRlZEFuZERlY29kZWQoKSAm
JiAhYXVkaW9CdWZmZXJzW2ldLmhhc0ZhaWxlZFRvTG9hZCgpKQ0KCQkJCXJldHVybiBmYWxzZTsN
CgkJfQ0KCQlyZXR1cm4gdHJ1ZTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLkFkdmFuY2VkQXVkaW9T
dXBwb3J0ZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIGFwaSA9PT0gQVBJX1dFQkFVRElP
Ow0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNTaWxlbnQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0
dXJuIHNpbGVudDsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLklzQW55UGxheWluZyA9IGZ1bmN0aW9u
ICgpDQoJew0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhdWRpb0luc3RhbmNl
cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKGF1ZGlvSW5zdGFuY2VzW2ldLmlz
UGxheWluZygpKQ0KCQkJCXJldHVybiB0cnVlOw0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9Ow0K
CUNuZHMucHJvdG90eXBlLklzVGFnUGxheWluZyA9IGZ1bmN0aW9uICh0YWcpDQoJew0KCQlnZXRB
dWRpb0J5VGFnKHRhZyk7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRhZ2dl
ZEF1ZGlvLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpZiAodGFnZ2VkQXVkaW9baV0u
aXNQbGF5aW5nKCkpDQoJCQkJcmV0dXJuIHRydWU7DQoJCX0NCgkJcmV0dXJuIGZhbHNlOw0KCX07
DQoJcGx1Z2luUHJvdG8uY25kcyA9IG5ldyBDbmRzKCk7DQoJZnVuY3Rpb24gQWN0cygpIHt9Ow0K
CUFjdHMucHJvdG90eXBlLlBsYXkgPSBmdW5jdGlvbiAoZmlsZSwgbG9vcGluZywgdm9sLCB0YWcp
DQoJew0KCQlpZiAoc2lsZW50KQ0KCQkJcmV0dXJuOw0KCQl2YXIgdiA9IGRiVG9MaW5lYXIodm9s
KTsNCgkJdmFyIGlzX211c2ljID0gZmlsZVsxXTsNCgkJdmFyIHNyYyA9IHRoaXMucnVudGltZS5m
aWxlc19zdWJmb2xkZXIgKyBmaWxlWzBdICsgKHVzZU9nZyA/ICIub2dnIiA6ICIubTRhIik7DQoJ
CWxhc3RBdWRpbyA9IHRoaXMuZ2V0QXVkaW9JbnN0YW5jZShzcmMsIHRhZywgaXNfbXVzaWMsIGxv
b3BpbmchPT0wLCB2KTsNCgkJaWYgKCFsYXN0QXVkaW8pDQoJCQlyZXR1cm47DQoJCWxhc3RBdWRp
by5zZXRQYW5uZXJFbmFibGVkKGZhbHNlKTsNCgkJbGFzdEF1ZGlvLnBsYXkobG9vcGluZyE9PTAs
IHYsIDAsIHRoaXMubmV4dFBsYXlUaW1lKTsNCgkJdGhpcy5uZXh0UGxheVRpbWUgPSAwOw0KCX07
DQoJQWN0cy5wcm90b3R5cGUuUGxheUF0UG9zaXRpb24gPSBmdW5jdGlvbiAoZmlsZSwgbG9vcGlu
Zywgdm9sLCB4XywgeV8sIGFuZ2xlXywgaW5uZXJhbmdsZV8sIG91dGVyYW5nbGVfLCBvdXRlcmdh
aW5fLCB0YWcpDQoJew0KCQlpZiAoc2lsZW50KQ0KCQkJcmV0dXJuOw0KCQl2YXIgdiA9IGRiVG9M
aW5lYXIodm9sKTsNCgkJdmFyIGlzX211c2ljID0gZmlsZVsxXTsNCgkJdmFyIHNyYyA9IHRoaXMu
cnVudGltZS5maWxlc19zdWJmb2xkZXIgKyBmaWxlWzBdICsgKHVzZU9nZyA/ICIub2dnIiA6ICIu
bTRhIik7DQoJCWxhc3RBdWRpbyA9IHRoaXMuZ2V0QXVkaW9JbnN0YW5jZShzcmMsIHRhZywgaXNf
bXVzaWMsIGxvb3BpbmchPT0wLCB2KTsNCgkJaWYgKCFsYXN0QXVkaW8pDQoJCXsNCgkJCXZhciBi
ID0gdGhpcy5nZXRBdWRpb0J1ZmZlcihzcmMsIGlzX211c2ljKTsNCgkJCWIucGFuV2hlblJlYWR5
LnB1c2goeyB4OiB4XywgeTogeV8sIGE6IGFuZ2xlXywgaWE6IGlubmVyYW5nbGVfLCBvYTogb3V0
ZXJhbmdsZV8sIG9nOiBkYlRvTGluZWFyKG91dGVyZ2Fpbl8pLCB0aGlzdGFnOiB0YWcgfSk7DQoJ
CQlyZXR1cm47DQoJCX0NCgkJbGFzdEF1ZGlvLnNldFBhbm5lckVuYWJsZWQodHJ1ZSk7DQoJCWxh
c3RBdWRpby5zZXRQYW4oeF8sIHlfLCBhbmdsZV8sIGlubmVyYW5nbGVfLCBvdXRlcmFuZ2xlXywg
ZGJUb0xpbmVhcihvdXRlcmdhaW5fKSk7DQoJCWxhc3RBdWRpby5wbGF5KGxvb3BpbmchPT0wLCB2
LCAwLCB0aGlzLm5leHRQbGF5VGltZSk7DQoJCXRoaXMubmV4dFBsYXlUaW1lID0gMDsNCgl9Ow0K
CUFjdHMucHJvdG90eXBlLlBsYXlBdE9iamVjdCA9IGZ1bmN0aW9uIChmaWxlLCBsb29waW5nLCB2
b2wsIG9iaiwgaW5uZXJhbmdsZSwgb3V0ZXJhbmdsZSwgb3V0ZXJnYWluLCB0YWcpDQoJew0KCQlp
ZiAoc2lsZW50IHx8ICFvYmopDQoJCQlyZXR1cm47DQoJCXZhciBpbnN0ID0gb2JqLmdldEZpcnN0
UGlja2VkKCk7DQoJCWlmICghaW5zdCkNCgkJCXJldHVybjsNCgkJdmFyIHYgPSBkYlRvTGluZWFy
KHZvbCk7DQoJCXZhciBpc19tdXNpYyA9IGZpbGVbMV07DQoJCXZhciBzcmMgPSB0aGlzLnJ1bnRp
bWUuZmlsZXNfc3ViZm9sZGVyICsgZmlsZVswXSArICh1c2VPZ2cgPyAiLm9nZyIgOiAiLm00YSIp
Ow0KCQlsYXN0QXVkaW8gPSB0aGlzLmdldEF1ZGlvSW5zdGFuY2Uoc3JjLCB0YWcsIGlzX211c2lj
LCBsb29waW5nIT09MCwgdik7DQoJCWlmICghbGFzdEF1ZGlvKQ0KCQl7DQoJCQl2YXIgYiA9IHRo
aXMuZ2V0QXVkaW9CdWZmZXIoc3JjLCBpc19tdXNpYyk7DQoJCQliLnBhbldoZW5SZWFkeS5wdXNo
KHsgb2JqOiBpbnN0LCBpYTogaW5uZXJhbmdsZSwgb2E6IG91dGVyYW5nbGUsIG9nOiBkYlRvTGlu
ZWFyKG91dGVyZ2FpbiksIHRoaXN0YWc6IHRhZyB9KTsNCgkJCXJldHVybjsNCgkJfQ0KCQlsYXN0
QXVkaW8uc2V0UGFubmVyRW5hYmxlZCh0cnVlKTsNCgkJdmFyIHB4ID0gY3Iucm90YXRlUHRBcm91
bmQoaW5zdC54LCBpbnN0LnksIC1pbnN0LmxheWVyLmdldEFuZ2xlKCksIGxpc3RlbmVyWCwgbGlz
dGVuZXJZLCB0cnVlKTsNCgkJdmFyIHB5ID0gY3Iucm90YXRlUHRBcm91bmQoaW5zdC54LCBpbnN0
LnksIC1pbnN0LmxheWVyLmdldEFuZ2xlKCksIGxpc3RlbmVyWCwgbGlzdGVuZXJZLCBmYWxzZSk7
DQoJCWxhc3RBdWRpby5zZXRQYW4ocHgsIHB5LCBjci50b19kZWdyZWVzKGluc3QuYW5nbGUgLSBp
bnN0LmxheWVyLmdldEFuZ2xlKCkpLCBpbm5lcmFuZ2xlLCBvdXRlcmFuZ2xlLCBkYlRvTGluZWFy
KG91dGVyZ2FpbikpOw0KCQlsYXN0QXVkaW8uc2V0T2JqZWN0KGluc3QpOw0KCQlsYXN0QXVkaW8u
cGxheShsb29waW5nIT09MCwgdiwgMCwgdGhpcy5uZXh0UGxheVRpbWUpOw0KCQl0aGlzLm5leHRQ
bGF5VGltZSA9IDA7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5QbGF5QnlOYW1lID0gZnVuY3Rpb24g
KGZvbGRlciwgZmlsZW5hbWUsIGxvb3BpbmcsIHZvbCwgdGFnKQ0KCXsNCgkJaWYgKHNpbGVudCkN
CgkJCXJldHVybjsNCgkJdmFyIHYgPSBkYlRvTGluZWFyKHZvbCk7DQoJCXZhciBpc19tdXNpYyA9
IChmb2xkZXIgPT09IDEpOw0KCQl2YXIgc3JjID0gdGhpcy5ydW50aW1lLmZpbGVzX3N1YmZvbGRl
ciArIGZpbGVuYW1lLnRvTG93ZXJDYXNlKCkgKyAodXNlT2dnID8gIi5vZ2ciIDogIi5tNGEiKTsN
CgkJbGFzdEF1ZGlvID0gdGhpcy5nZXRBdWRpb0luc3RhbmNlKHNyYywgdGFnLCBpc19tdXNpYywg
bG9vcGluZyE9PTAsIHYpOw0KCQlpZiAoIWxhc3RBdWRpbykNCgkJCXJldHVybjsNCgkJbGFzdEF1
ZGlvLnNldFBhbm5lckVuYWJsZWQoZmFsc2UpOw0KCQlsYXN0QXVkaW8ucGxheShsb29waW5nIT09
MCwgdiwgMCwgdGhpcy5uZXh0UGxheVRpbWUpOw0KCQl0aGlzLm5leHRQbGF5VGltZSA9IDA7DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5QbGF5QXRQb3NpdGlvbkJ5TmFtZSA9IGZ1bmN0aW9uIChmb2xk
ZXIsIGZpbGVuYW1lLCBsb29waW5nLCB2b2wsIHhfLCB5XywgYW5nbGVfLCBpbm5lcmFuZ2xlXywg
b3V0ZXJhbmdsZV8sIG91dGVyZ2Fpbl8sIHRhZykNCgl7DQoJCWlmIChzaWxlbnQpDQoJCQlyZXR1
cm47DQoJCXZhciB2ID0gZGJUb0xpbmVhcih2b2wpOw0KCQl2YXIgaXNfbXVzaWMgPSAoZm9sZGVy
ID09PSAxKTsNCgkJdmFyIHNyYyA9IHRoaXMucnVudGltZS5maWxlc19zdWJmb2xkZXIgKyBmaWxl
bmFtZS50b0xvd2VyQ2FzZSgpICsgKHVzZU9nZyA/ICIub2dnIiA6ICIubTRhIik7DQoJCWxhc3RB
dWRpbyA9IHRoaXMuZ2V0QXVkaW9JbnN0YW5jZShzcmMsIHRhZywgaXNfbXVzaWMsIGxvb3Bpbmch
PT0wLCB2KTsNCgkJaWYgKCFsYXN0QXVkaW8pDQoJCXsNCgkJCXZhciBiID0gdGhpcy5nZXRBdWRp
b0J1ZmZlcihzcmMsIGlzX211c2ljKTsNCgkJCWIucGFuV2hlblJlYWR5LnB1c2goeyB4OiB4Xywg
eTogeV8sIGE6IGFuZ2xlXywgaWE6IGlubmVyYW5nbGVfLCBvYTogb3V0ZXJhbmdsZV8sIG9nOiBk
YlRvTGluZWFyKG91dGVyZ2Fpbl8pLCB0aGlzdGFnOiB0YWcgfSk7DQoJCQlyZXR1cm47DQoJCX0N
CgkJbGFzdEF1ZGlvLnNldFBhbm5lckVuYWJsZWQodHJ1ZSk7DQoJCWxhc3RBdWRpby5zZXRQYW4o
eF8sIHlfLCBhbmdsZV8sIGlubmVyYW5nbGVfLCBvdXRlcmFuZ2xlXywgZGJUb0xpbmVhcihvdXRl
cmdhaW5fKSk7DQoJCWxhc3RBdWRpby5wbGF5KGxvb3BpbmchPT0wLCB2LCAwLCB0aGlzLm5leHRQ
bGF5VGltZSk7DQoJCXRoaXMubmV4dFBsYXlUaW1lID0gMDsNCgl9Ow0KCUFjdHMucHJvdG90eXBl
LlBsYXlBdE9iamVjdEJ5TmFtZSA9IGZ1bmN0aW9uIChmb2xkZXIsIGZpbGVuYW1lLCBsb29waW5n
LCB2b2wsIG9iaiwgaW5uZXJhbmdsZSwgb3V0ZXJhbmdsZSwgb3V0ZXJnYWluLCB0YWcpDQoJew0K
CQlpZiAoc2lsZW50IHx8ICFvYmopDQoJCQlyZXR1cm47DQoJCXZhciBpbnN0ID0gb2JqLmdldEZp
cnN0UGlja2VkKCk7DQoJCWlmICghaW5zdCkNCgkJCXJldHVybjsNCgkJdmFyIHYgPSBkYlRvTGlu
ZWFyKHZvbCk7DQoJCXZhciBpc19tdXNpYyA9IChmb2xkZXIgPT09IDEpOw0KCQl2YXIgc3JjID0g
dGhpcy5ydW50aW1lLmZpbGVzX3N1YmZvbGRlciArIGZpbGVuYW1lLnRvTG93ZXJDYXNlKCkgKyAo
dXNlT2dnID8gIi5vZ2ciIDogIi5tNGEiKTsNCgkJbGFzdEF1ZGlvID0gdGhpcy5nZXRBdWRpb0lu
c3RhbmNlKHNyYywgdGFnLCBpc19tdXNpYywgbG9vcGluZyE9PTAsIHYpOw0KCQlpZiAoIWxhc3RB
dWRpbykNCgkJew0KCQkJdmFyIGIgPSB0aGlzLmdldEF1ZGlvQnVmZmVyKHNyYywgaXNfbXVzaWMp
Ow0KCQkJYi5wYW5XaGVuUmVhZHkucHVzaCh7IG9iajogaW5zdCwgaWE6IGlubmVyYW5nbGUsIG9h
OiBvdXRlcmFuZ2xlLCBvZzogZGJUb0xpbmVhcihvdXRlcmdhaW4pLCB0aGlzdGFnOiB0YWcgfSk7
DQoJCQlyZXR1cm47DQoJCX0NCgkJbGFzdEF1ZGlvLnNldFBhbm5lckVuYWJsZWQodHJ1ZSk7DQoJ
CXZhciBweCA9IGNyLnJvdGF0ZVB0QXJvdW5kKGluc3QueCwgaW5zdC55LCAtaW5zdC5sYXllci5n
ZXRBbmdsZSgpLCBsaXN0ZW5lclgsIGxpc3RlbmVyWSwgdHJ1ZSk7DQoJCXZhciBweSA9IGNyLnJv
dGF0ZVB0QXJvdW5kKGluc3QueCwgaW5zdC55LCAtaW5zdC5sYXllci5nZXRBbmdsZSgpLCBsaXN0
ZW5lclgsIGxpc3RlbmVyWSwgZmFsc2UpOw0KCQlsYXN0QXVkaW8uc2V0UGFuKHB4LCBweSwgY3Iu
dG9fZGVncmVlcyhpbnN0LmFuZ2xlIC0gaW5zdC5sYXllci5nZXRBbmdsZSgpKSwgaW5uZXJhbmds
ZSwgb3V0ZXJhbmdsZSwgZGJUb0xpbmVhcihvdXRlcmdhaW4pKTsNCgkJbGFzdEF1ZGlvLnNldE9i
amVjdChpbnN0KTsNCgkJbGFzdEF1ZGlvLnBsYXkobG9vcGluZyE9PTAsIHYsIDAsIHRoaXMubmV4
dFBsYXlUaW1lKTsNCgkJdGhpcy5uZXh0UGxheVRpbWUgPSAwOw0KCX07DQoJQWN0cy5wcm90b3R5
cGUuU2V0TG9vcGluZyA9IGZ1bmN0aW9uICh0YWcsIGxvb3BpbmcpDQoJew0KCQlnZXRBdWRpb0J5
VGFnKHRhZyk7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRhZ2dlZEF1ZGlv
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGFnZ2VkQXVkaW9baV0uc2V0TG9vcGluZyhsb29w
aW5nID09PSAwKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldE11dGVkID0gZnVuY3Rpb24gKHRh
ZywgbXV0ZWQpDQoJew0KCQlnZXRBdWRpb0J5VGFnKHRhZyk7DQoJCXZhciBpLCBsZW47DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IHRhZ2dlZEF1ZGlvLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGFn
Z2VkQXVkaW9baV0uc2V0TXV0ZWQobXV0ZWQgPT09IDApOw0KCX07DQoJQWN0cy5wcm90b3R5cGUu
U2V0Vm9sdW1lID0gZnVuY3Rpb24gKHRhZywgdm9sKQ0KCXsNCgkJZ2V0QXVkaW9CeVRhZyh0YWcp
Ow0KCQl2YXIgdiA9IGRiVG9MaW5lYXIodm9sKTsNCgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0g
MCwgbGVuID0gdGFnZ2VkQXVkaW8ubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl0YWdnZWRBdWRp
b1tpXS5zZXRWb2x1bWUodik7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5QcmVsb2FkID0gZnVuY3Rp
b24gKGZpbGUpDQoJew0KCQlpZiAoc2lsZW50KQ0KCQkJcmV0dXJuOw0KCQl2YXIgaXNfbXVzaWMg
PSBmaWxlWzFdOw0KCQl2YXIgc3JjID0gdGhpcy5ydW50aW1lLmZpbGVzX3N1YmZvbGRlciArIGZp
bGVbMF0gKyAodXNlT2dnID8gIi5vZ2ciIDogIi5tNGEiKTsNCgkJaWYgKGFwaSA9PT0gQVBJX0FQ
UE1PQkkpDQoJCXsNCgkJCWlmICh0aGlzLnJ1bnRpbWUuaXNEaXJlY3RDYW52YXMpDQoJCQkJQXBw
TW9iaVsiY29udGV4dCJdWyJsb2FkU291bmQiXShzcmMpOw0KCQkJZWxzZQ0KCQkJCUFwcE1vYmlb
InBsYXllciJdWyJsb2FkU291bmQiXShzcmMpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCWVsc2UgaWYg
KGFwaSA9PT0gQVBJX0NPUkRPVkEpDQoJCXsNCgkJCXJldHVybjsNCgkJfQ0KCQl0aGlzLmdldEF1
ZGlvSW5zdGFuY2Uoc3JjLCAiPHByZWxvYWQ+IiwgaXNfbXVzaWMsIGZhbHNlKTsNCgl9Ow0KCUFj
dHMucHJvdG90eXBlLlByZWxvYWRCeU5hbWUgPSBmdW5jdGlvbiAoZm9sZGVyLCBmaWxlbmFtZSkN
Cgl7DQoJCWlmIChzaWxlbnQpDQoJCQlyZXR1cm47DQoJCXZhciBpc19tdXNpYyA9IChmb2xkZXIg
PT09IDEpOw0KCQl2YXIgc3JjID0gdGhpcy5ydW50aW1lLmZpbGVzX3N1YmZvbGRlciArIGZpbGVu
YW1lLnRvTG93ZXJDYXNlKCkgKyAodXNlT2dnID8gIi5vZ2ciIDogIi5tNGEiKTsNCgkJaWYgKGFw
aSA9PT0gQVBJX0FQUE1PQkkpDQoJCXsNCgkJCWlmICh0aGlzLnJ1bnRpbWUuaXNEaXJlY3RDYW52
YXMpDQoJCQkJQXBwTW9iaVsiY29udGV4dCJdWyJsb2FkU291bmQiXShzcmMpOw0KCQkJZWxzZQ0K
CQkJCUFwcE1vYmlbInBsYXllciJdWyJsb2FkU291bmQiXShzcmMpOw0KCQkJcmV0dXJuOw0KCQl9
DQoJCWVsc2UgaWYgKGFwaSA9PT0gQVBJX0NPUkRPVkEpDQoJCXsNCgkJCXJldHVybjsNCgkJfQ0K
CQl0aGlzLmdldEF1ZGlvSW5zdGFuY2Uoc3JjLCAiPHByZWxvYWQ+IiwgaXNfbXVzaWMsIGZhbHNl
KTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uICh0YWcs
IHJhdGUpDQoJew0KCQlnZXRBdWRpb0J5VGFnKHRhZyk7DQoJCWlmIChyYXRlIDwgMC4wKQ0KCQkJ
cmF0ZSA9IDA7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRhZ2dlZEF1ZGlv
Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGFnZ2VkQXVkaW9baV0uc2V0UGxheWJhY2tSYXRl
KHJhdGUpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU3RvcCA9IGZ1bmN0aW9uICh0YWcpDQoJew0K
CQlnZXRBdWRpb0J5VGFnKHRhZyk7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9
IHRhZ2dlZEF1ZGlvLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJdGFnZ2VkQXVkaW9baV0uc3Rv
cCgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU3RvcEFsbCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2
YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSBhdWRpb0luc3RhbmNlcy5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJCWF1ZGlvSW5zdGFuY2VzW2ldLnN0b3AoKTsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLlNldFBhdXNlZCA9IGZ1bmN0aW9uICh0YWcsIHN0YXRlKQ0KCXsNCgkJZ2V0QXVkaW9C
eVRhZyh0YWcpOw0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0YWdnZWRBdWRp
by5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKHN0YXRlID09PSAwKQ0KCQkJCXRh
Z2dlZEF1ZGlvW2ldLnBhdXNlKCk7DQoJCQllbHNlDQoJCQkJdGFnZ2VkQXVkaW9baV0ucmVzdW1l
KCk7DQoJCX0NCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNlZWsgPSBmdW5jdGlvbiAodGFnLCBwb3Mp
DQoJew0KCQlnZXRBdWRpb0J5VGFnKHRhZyk7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAs
IGxlbiA9IHRhZ2dlZEF1ZGlvLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0YWdnZWRB
dWRpb1tpXS5zZWVrKHBvcyk7DQoJCX0NCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFNpbGVudCA9
IGZ1bmN0aW9uIChzKQ0KCXsNCgkJdmFyIGksIGxlbjsNCgkJaWYgKHMgPT09IDIpCQkJCQkvLyB0
b2dnbGluZw0KCQkJcyA9IChzaWxlbnQgPyAxIDogMCk7CQkvLyBjaG9vc2Ugb3Bwb3NpdGUgc3Rh
dGUNCgkJaWYgKHMgPT09IDAgJiYgIXNpbGVudCkJCQkvLyBzZXR0aW5nIHNpbGVudA0KCQl7DQoJ
CQlmb3IgKGkgPSAwLCBsZW4gPSBhdWRpb0luc3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykN
CgkJCQlhdWRpb0luc3RhbmNlc1tpXS5zZXRTaWxlbnQodHJ1ZSk7DQoJCQlzaWxlbnQgPSB0cnVl
Ow0KCQl9DQoJCWVsc2UgaWYgKHMgPT09IDEgJiYgc2lsZW50KQkJLy8gc2V0dGluZyBub3Qgc2ls
ZW50DQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGF1ZGlvSW5zdGFuY2VzLmxlbmd0aDsgaSA8
IGxlbjsgaSsrKQ0KCQkJCWF1ZGlvSW5zdGFuY2VzW2ldLnNldFNpbGVudChmYWxzZSk7DQoJCQlz
aWxlbnQgPSBmYWxzZTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0TWFzdGVyVm9sdW1l
ID0gZnVuY3Rpb24gKHZvbCkNCgl7DQoJCW1hc3RlclZvbHVtZSA9IGRiVG9MaW5lYXIodm9sKTsN
CgkJdmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gYXVkaW9JbnN0YW5jZXMubGVuZ3Ro
OyBpIDwgbGVuOyBpKyspDQoJCQlhdWRpb0luc3RhbmNlc1tpXS51cGRhdGVWb2x1bWUoKTsNCgl9
Ow0KCUFjdHMucHJvdG90eXBlLkFkZEZpbHRlckVmZmVjdCA9IGZ1bmN0aW9uICh0YWcsIHR5cGUs
IGZyZXEsIGRldHVuZSwgcSwgZ2FpbiwgbWl4KQ0KCXsNCgkJaWYgKGFwaSAhPT0gQVBJX1dFQkFV
RElPIHx8IHR5cGUgPCAwIHx8IHR5cGUgPj0gZmlsdGVyVHlwZXMubGVuZ3RoIHx8ICFjb250ZXh0
WyJjcmVhdGVCaXF1YWRGaWx0ZXIiXSkNCgkJCXJldHVybjsNCgkJdGFnID0gdGFnLnRvTG93ZXJD
YXNlKCk7DQoJCW1peCA9IG1peCAvIDEwMDsNCgkJaWYgKG1peCA8IDApIG1peCA9IDA7DQoJCWlm
IChtaXggPiAxKSBtaXggPSAxOw0KCQlhZGRFZmZlY3RGb3JUYWcodGFnLCBuZXcgRmlsdGVyRWZm
ZWN0KHR5cGUsIGZyZXEsIGRldHVuZSwgcSwgZ2FpbiwgbWl4KSk7DQoJfTsNCglBY3RzLnByb3Rv
dHlwZS5BZGREZWxheUVmZmVjdCA9IGZ1bmN0aW9uICh0YWcsIGRlbGF5LCBnYWluLCBtaXgpDQoJ
ew0KCQlpZiAoYXBpICE9PSBBUElfV0VCQVVESU8pDQoJCQlyZXR1cm47DQoJCXRhZyA9IHRhZy50
b0xvd2VyQ2FzZSgpOw0KCQltaXggPSBtaXggLyAxMDA7DQoJCWlmIChtaXggPCAwKSBtaXggPSAw
Ow0KCQlpZiAobWl4ID4gMSkgbWl4ID0gMTsNCgkJYWRkRWZmZWN0Rm9yVGFnKHRhZywgbmV3IERl
bGF5RWZmZWN0KGRlbGF5LCBkYlRvTGluZWFyKGdhaW4pLCBtaXgpKTsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLkFkZEZsYW5nZXJFZmZlY3QgPSBmdW5jdGlvbiAodGFnLCBkZWxheSwgbW9kdWxhdGlv
biwgZnJlcSwgZmVlZGJhY2ssIG1peCkNCgl7DQoJCWlmIChhcGkgIT09IEFQSV9XRUJBVURJTyB8
fCAhY29udGV4dFsiY3JlYXRlT3NjaWxsYXRvciJdKQ0KCQkJcmV0dXJuOw0KCQl0YWcgPSB0YWcu
dG9Mb3dlckNhc2UoKTsNCgkJbWl4ID0gbWl4IC8gMTAwOw0KCQlpZiAobWl4IDwgMCkgbWl4ID0g
MDsNCgkJaWYgKG1peCA+IDEpIG1peCA9IDE7DQoJCWFkZEVmZmVjdEZvclRhZyh0YWcsIG5ldyBG
bGFuZ2VyRWZmZWN0KGRlbGF5IC8gMTAwMCwgbW9kdWxhdGlvbiAvIDEwMDAsIGZyZXEsIGZlZWRi
YWNrIC8gMTAwLCBtaXgpKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkFkZFBoYXNlckVmZmVjdCA9
IGZ1bmN0aW9uICh0YWcsIGZyZXEsIGRldHVuZSwgcSwgbW9kLCBtb2RmcmVxLCBtaXgpDQoJew0K
CQlpZiAoYXBpICE9PSBBUElfV0VCQVVESU8gfHwgIWNvbnRleHRbImNyZWF0ZU9zY2lsbGF0b3Ii
XSkNCgkJCXJldHVybjsNCgkJdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7DQoJCW1peCA9IG1peCAv
IDEwMDsNCgkJaWYgKG1peCA8IDApIG1peCA9IDA7DQoJCWlmIChtaXggPiAxKSBtaXggPSAxOw0K
CQlhZGRFZmZlY3RGb3JUYWcodGFnLCBuZXcgUGhhc2VyRWZmZWN0KGZyZXEsIGRldHVuZSwgcSwg
bW9kLCBtb2RmcmVxLCBtaXgpKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkFkZENvbnZvbHV0aW9u
RWZmZWN0ID0gZnVuY3Rpb24gKHRhZywgZmlsZSwgbm9ybSwgbWl4KQ0KCXsNCgkJaWYgKGFwaSAh
PT0gQVBJX1dFQkFVRElPIHx8ICFjb250ZXh0WyJjcmVhdGVDb252b2x2ZXIiXSkNCgkJCXJldHVy
bjsNCgkJdmFyIGRvTm9ybWFsaXplID0gKG5vcm0gPT09IDApOw0KCQl2YXIgc3JjID0gdGhpcy5y
dW50aW1lLmZpbGVzX3N1YmZvbGRlciArIGZpbGVbMF0gKyAodXNlT2dnID8gIi5vZ2ciIDogIi5t
NGEiKTsNCgkJdmFyIGIgPSB0aGlzLmdldEF1ZGlvQnVmZmVyKHNyYywgZmFsc2UpOw0KCQl0YWcg
PSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJbWl4ID0gbWl4IC8gMTAwOw0KCQlpZiAobWl4IDwgMCkg
bWl4ID0gMDsNCgkJaWYgKG1peCA+IDEpIG1peCA9IDE7DQoJCXZhciBmeDsNCgkJaWYgKGIuYnVm
ZmVyT2JqZWN0KQ0KCQl7DQoJCQlmeCA9IG5ldyBDb252b2x2ZUVmZmVjdChiLmJ1ZmZlck9iamVj
dCwgZG9Ob3JtYWxpemUsIG1peCwgc3JjKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWZ4ID0gbmV3
IENvbnZvbHZlRWZmZWN0KG51bGwsIGRvTm9ybWFsaXplLCBtaXgsIHNyYyk7DQoJCQliLm5vcm1h
bGl6ZVdoZW5SZWFkeSA9IGRvTm9ybWFsaXplOw0KCQkJYi5jb252b2x2ZVdoZW5SZWFkeSA9IGZ4
Ow0KCQl9DQoJCWFkZEVmZmVjdEZvclRhZyh0YWcsIGZ4KTsNCgl9Ow0KCUFjdHMucHJvdG90eXBl
LkFkZEdhaW5FZmZlY3QgPSBmdW5jdGlvbiAodGFnLCBnKQ0KCXsNCgkJaWYgKGFwaSAhPT0gQVBJ
X1dFQkFVRElPKQ0KCQkJcmV0dXJuOw0KCQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJYWRk
RWZmZWN0Rm9yVGFnKHRhZywgbmV3IEdhaW5FZmZlY3QoZGJUb0xpbmVhcihnKSkpOw0KCX07DQoJ
QWN0cy5wcm90b3R5cGUuQWRkTXV0ZUVmZmVjdCA9IGZ1bmN0aW9uICh0YWcpDQoJew0KCQlpZiAo
YXBpICE9PSBBUElfV0VCQVVESU8pDQoJCQlyZXR1cm47DQoJCXRhZyA9IHRhZy50b0xvd2VyQ2Fz
ZSgpOw0KCQlhZGRFZmZlY3RGb3JUYWcodGFnLCBuZXcgR2FpbkVmZmVjdCgwKSk7CS8vIHJlLXVz
ZSBnYWluIGVmZmVjdCB3aXRoIDAgZ2Fpbg0KCX07DQoJQWN0cy5wcm90b3R5cGUuQWRkVHJlbW9s
b0VmZmVjdCA9IGZ1bmN0aW9uICh0YWcsIGZyZXEsIG1peCkNCgl7DQoJCWlmIChhcGkgIT09IEFQ
SV9XRUJBVURJTyB8fCAhY29udGV4dFsiY3JlYXRlT3NjaWxsYXRvciJdKQ0KCQkJcmV0dXJuOw0K
CQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJbWl4ID0gbWl4IC8gMTAwOw0KCQlpZiAobWl4
IDwgMCkgbWl4ID0gMDsNCgkJaWYgKG1peCA+IDEpIG1peCA9IDE7DQoJCWFkZEVmZmVjdEZvclRh
Zyh0YWcsIG5ldyBUcmVtb2xvRWZmZWN0KGZyZXEsIG1peCkpOw0KCX07DQoJQWN0cy5wcm90b3R5
cGUuQWRkUmluZ01vZEVmZmVjdCA9IGZ1bmN0aW9uICh0YWcsIGZyZXEsIG1peCkNCgl7DQoJCWlm
IChhcGkgIT09IEFQSV9XRUJBVURJTyB8fCAhY29udGV4dFsiY3JlYXRlT3NjaWxsYXRvciJdKQ0K
CQkJcmV0dXJuOw0KCQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJbWl4ID0gbWl4IC8gMTAw
Ow0KCQlpZiAobWl4IDwgMCkgbWl4ID0gMDsNCgkJaWYgKG1peCA+IDEpIG1peCA9IDE7DQoJCWFk
ZEVmZmVjdEZvclRhZyh0YWcsIG5ldyBSaW5nTW9kdWxhdG9yRWZmZWN0KGZyZXEsIG1peCkpOw0K
CX07DQoJQWN0cy5wcm90b3R5cGUuQWRkRGlzdG9ydGlvbkVmZmVjdCA9IGZ1bmN0aW9uICh0YWcs
IHRocmVzaG9sZCwgaGVhZHJvb20sIGRyaXZlLCBtYWtldXBnYWluLCBtaXgpDQoJew0KCQlpZiAo
YXBpICE9PSBBUElfV0VCQVVESU8gfHwgIWNvbnRleHRbImNyZWF0ZVdhdmVTaGFwZXIiXSkNCgkJ
CXJldHVybjsNCgkJdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7DQoJCW1peCA9IG1peCAvIDEwMDsN
CgkJaWYgKG1peCA8IDApIG1peCA9IDA7DQoJCWlmIChtaXggPiAxKSBtaXggPSAxOw0KCQlhZGRF
ZmZlY3RGb3JUYWcodGFnLCBuZXcgRGlzdG9ydGlvbkVmZmVjdCh0aHJlc2hvbGQsIGhlYWRyb29t
LCBkcml2ZSwgbWFrZXVwZ2FpbiwgbWl4KSk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5BZGRDb21w
cmVzc29yRWZmZWN0ID0gZnVuY3Rpb24gKHRhZywgdGhyZXNob2xkLCBrbmVlLCByYXRpbywgYXR0
YWNrLCByZWxlYXNlKQ0KCXsNCgkJaWYgKGFwaSAhPT0gQVBJX1dFQkFVRElPIHx8ICFjb250ZXh0
WyJjcmVhdGVEeW5hbWljc0NvbXByZXNzb3IiXSkNCgkJCXJldHVybjsNCgkJdGFnID0gdGFnLnRv
TG93ZXJDYXNlKCk7DQoJCWFkZEVmZmVjdEZvclRhZyh0YWcsIG5ldyBDb21wcmVzc29yRWZmZWN0
KHRocmVzaG9sZCwga25lZSwgcmF0aW8sIGF0dGFjayAvIDEwMDAsIHJlbGVhc2UgLyAxMDAwKSk7
DQoJfTsNCglBY3RzLnByb3RvdHlwZS5BZGRBbmFseXNlckVmZmVjdCA9IGZ1bmN0aW9uICh0YWcs
IGZmdFNpemUsIHNtb290aGluZykNCgl7DQoJCWlmIChhcGkgIT09IEFQSV9XRUJBVURJTykNCgkJ
CXJldHVybjsNCgkJdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7DQoJCWFkZEVmZmVjdEZvclRhZyh0
YWcsIG5ldyBBbmFseXNlckVmZmVjdChmZnRTaXplLCBzbW9vdGhpbmcpKTsNCgl9Ow0KCUFjdHMu
cHJvdG90eXBlLlJlbW92ZUVmZmVjdHMgPSBmdW5jdGlvbiAodGFnKQ0KCXsNCgkJaWYgKGFwaSAh
PT0gQVBJX1dFQkFVRElPKQ0KCQkJcmV0dXJuOw0KCQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsN
CgkJdmFyIGksIGxlbiwgYXJyOw0KCQlpZiAoZWZmZWN0cy5oYXNPd25Qcm9wZXJ0eSh0YWcpKQ0K
CQl7DQoJCQlhcnIgPSBlZmZlY3RzW3RhZ107DQoJCQlpZiAoYXJyLmxlbmd0aCkNCgkJCXsNCgkJ
CQlmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQkJCWFycltp
XS5yZW1vdmUoKTsNCgkJCQljci5jbGVhckFycmF5KGFycik7DQoJCQkJcmVjb25uZWN0RWZmZWN0
cyh0YWcpOw0KCQkJfQ0KCQl9DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRFZmZlY3RQYXJhbWV0
ZXIgPSBmdW5jdGlvbiAodGFnLCBpbmRleCwgcGFyYW0sIHZhbHVlLCByYW1wLCB0aW1lKQ0KCXsN
CgkJaWYgKGFwaSAhPT0gQVBJX1dFQkFVRElPKQ0KCQkJcmV0dXJuOw0KCQl0YWcgPSB0YWcudG9M
b3dlckNhc2UoKTsNCgkJaW5kZXggPSBNYXRoLmZsb29yKGluZGV4KTsNCgkJdmFyIGFycjsNCgkJ
aWYgKCFlZmZlY3RzLmhhc093blByb3BlcnR5KHRhZykpDQoJCQlyZXR1cm47DQoJCWFyciA9IGVm
ZmVjdHNbdGFnXTsNCgkJaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBhcnIubGVuZ3RoKQ0KCQkJ
cmV0dXJuOw0KCQlhcnJbaW5kZXhdLnNldFBhcmFtKHBhcmFtLCB2YWx1ZSwgcmFtcCwgdGltZSk7
DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRMaXN0ZW5lck9iamVjdCA9IGZ1bmN0aW9uIChvYmpf
KQ0KCXsNCgkJaWYgKCFvYmpfIHx8IGFwaSAhPT0gQVBJX1dFQkFVRElPKQ0KCQkJcmV0dXJuOw0K
CQl2YXIgaW5zdCA9IG9ial8uZ2V0Rmlyc3RQaWNrZWQoKTsNCgkJaWYgKCFpbnN0KQ0KCQkJcmV0
dXJuOw0KCQl0aGlzLmxpc3RlbmVyVHJhY2tlci5zZXRPYmplY3QoaW5zdCk7DQoJCWxpc3RlbmVy
WCA9IGluc3QueDsNCgkJbGlzdGVuZXJZID0gaW5zdC55Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUu
U2V0TGlzdGVuZXJaID0gZnVuY3Rpb24gKHopDQoJew0KCQl0aGlzLmxpc3RlbmVyWiA9IHo7DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5TY2hlZHVsZU5leHRQbGF5ID0gZnVuY3Rpb24gKHQpDQoJew0K
CQlpZiAoIWNvbnRleHQpDQoJCQlyZXR1cm47CQkvLyBuZWVkcyBXZWIgQXVkaW8gQVBJDQoJCXRo
aXMubmV4dFBsYXlUaW1lID0gdDsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlVubG9hZEF1ZGlvID0g
ZnVuY3Rpb24gKGZpbGUpDQoJew0KCQl2YXIgaXNfbXVzaWMgPSBmaWxlWzFdOw0KCQl2YXIgc3Jj
ID0gdGhpcy5ydW50aW1lLmZpbGVzX3N1YmZvbGRlciArIGZpbGVbMF0gKyAodXNlT2dnID8gIi5v
Z2ciIDogIi5tNGEiKTsNCgkJdmFyIGIgPSB0aGlzLmdldEF1ZGlvQnVmZmVyKHNyYywgaXNfbXVz
aWMsIHRydWUgLyogZG9uJ3QgY3JlYXRlIGlmIG1pc3NpbmcgKi8pOw0KCQlpZiAoIWIpDQoJCQly
ZXR1cm47CQkvLyBub3QgbG9hZGVkDQoJCWIucmVsZWFzZSgpOw0KCQljci5hcnJheUZpbmRSZW1v
dmUoYXVkaW9CdWZmZXJzLCBiKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlVubG9hZEF1ZGlvQnlO
YW1lID0gZnVuY3Rpb24gKGZvbGRlciwgZmlsZW5hbWUpDQoJew0KCQl2YXIgaXNfbXVzaWMgPSAo
Zm9sZGVyID09PSAxKTsNCgkJdmFyIHNyYyA9IHRoaXMucnVudGltZS5maWxlc19zdWJmb2xkZXIg
KyBmaWxlbmFtZS50b0xvd2VyQ2FzZSgpICsgKHVzZU9nZyA/ICIub2dnIiA6ICIubTRhIik7DQoJ
CXZhciBiID0gdGhpcy5nZXRBdWRpb0J1ZmZlcihzcmMsIGlzX211c2ljLCB0cnVlIC8qIGRvbid0
IGNyZWF0ZSBpZiBtaXNzaW5nICovKTsNCgkJaWYgKCFiKQ0KCQkJcmV0dXJuOwkJLy8gbm90IGxv
YWRlZA0KCQliLnJlbGVhc2UoKTsNCgkJY3IuYXJyYXlGaW5kUmVtb3ZlKGF1ZGlvQnVmZmVycywg
Yik7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5VbmxvYWRBbGwgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
dmFyIGksIGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gYXVkaW9CdWZmZXJzLmxlbmd0aDsgaSA8
IGxlbjsgKytpKQ0KCQl7DQoJCQlhdWRpb0J1ZmZlcnNbaV0ucmVsZWFzZSgpOw0KCQl9Ow0KCQlj
ci5jbGVhckFycmF5KGF1ZGlvQnVmZmVycyk7DQoJfTsNCglwbHVnaW5Qcm90by5hY3RzID0gbmV3
IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5wcm90b3R5cGUuRHVyYXRpb24g
PSBmdW5jdGlvbiAocmV0LCB0YWcpDQoJew0KCQlnZXRBdWRpb0J5VGFnKHRhZywgdHJ1ZSk7DQoJ
CWlmICh0YWdnZWRBdWRpby5sZW5ndGgpDQoJCQlyZXQuc2V0X2Zsb2F0KHRhZ2dlZEF1ZGlvWzBd
LmdldER1cmF0aW9uKCkpOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCX07DQoJRXhw
cy5wcm90b3R5cGUuUGxheWJhY2tUaW1lID0gZnVuY3Rpb24gKHJldCwgdGFnKQ0KCXsNCgkJZ2V0
QXVkaW9CeVRhZyh0YWcsIHRydWUpOw0KCQlpZiAodGFnZ2VkQXVkaW8ubGVuZ3RoKQ0KCQkJcmV0
LnNldF9mbG9hdCh0YWdnZWRBdWRpb1swXS5nZXRQbGF5YmFja1RpbWUodHJ1ZSkpOw0KCQllbHNl
DQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuVm9sdW1lID0gZnVu
Y3Rpb24gKHJldCwgdGFnKQ0KCXsNCgkJZ2V0QXVkaW9CeVRhZyh0YWcsIHRydWUpOw0KCQlpZiAo
dGFnZ2VkQXVkaW8ubGVuZ3RoKQ0KCQl7DQoJCQl2YXIgdiA9IHRhZ2dlZEF1ZGlvWzBdLmdldFZv
bHVtZSgpOw0KCQkJcmV0LnNldF9mbG9hdChsaW5lYXJUb0RiKHYpKTsNCgkJfQ0KCQllbHNlDQoJ
CQlyZXQuc2V0X2Zsb2F0KDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuTWFzdGVyVm9sdW1lID0g
ZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQobGluZWFyVG9EYihtYXN0ZXJWb2x1
bWUpKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkVmZmVjdENvdW50ID0gZnVuY3Rpb24gKHJldCwg
dGFnKQ0KCXsNCgkJdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7DQoJCXZhciBhcnIgPSBudWxsOw0K
CQlpZiAoZWZmZWN0cy5oYXNPd25Qcm9wZXJ0eSh0YWcpKQ0KCQkJYXJyID0gZWZmZWN0c1t0YWdd
Ow0KCQlyZXQuc2V0X2ludChhcnIgPyBhcnIubGVuZ3RoIDogMCk7DQoJfTsNCglmdW5jdGlvbiBn
ZXRBbmFseXNlcih0YWcsIGluZGV4KQ0KCXsNCgkJdmFyIGFyciA9IG51bGw7DQoJCWlmIChlZmZl
Y3RzLmhhc093blByb3BlcnR5KHRhZykpDQoJCQlhcnIgPSBlZmZlY3RzW3RhZ107DQoJCWlmIChh
cnIgJiYgaW5kZXggPj0gMCAmJiBpbmRleCA8IGFyci5sZW5ndGggJiYgYXJyW2luZGV4XS5mcmVx
QmlucykNCgkJCXJldHVybiBhcnJbaW5kZXhdOw0KCQllbHNlDQoJCQlyZXR1cm4gbnVsbDsNCgl9
Ow0KCUV4cHMucHJvdG90eXBlLkFuYWx5c2VyRnJlcUJpbkNvdW50ID0gZnVuY3Rpb24gKHJldCwg
dGFnLCBpbmRleCkNCgl7DQoJCXRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpOw0KCQlpbmRleCA9IE1h
dGguZmxvb3IoaW5kZXgpOw0KCQl2YXIgYW5hbHlzZXIgPSBnZXRBbmFseXNlcih0YWcsIGluZGV4
KTsNCgkJcmV0LnNldF9pbnQoYW5hbHlzZXIgPyBhbmFseXNlci5ub2RlWyJmcmVxdWVuY3lCaW5D
b3VudCJdIDogMCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BbmFseXNlckZyZXFCaW5BdCA9IGZ1
bmN0aW9uIChyZXQsIHRhZywgaW5kZXgsIGJpbikNCgl7DQoJCXRhZyA9IHRhZy50b0xvd2VyQ2Fz
ZSgpOw0KCQlpbmRleCA9IE1hdGguZmxvb3IoaW5kZXgpOw0KCQliaW4gPSBNYXRoLmZsb29yKGJp
bik7DQoJCXZhciBhbmFseXNlciA9IGdldEFuYWx5c2VyKHRhZywgaW5kZXgpOw0KCQlpZiAoIWFu
YWx5c2VyKQ0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJZWxzZSBpZiAoYmluIDwgMCB8fCBiaW4g
Pj0gYW5hbHlzZXIubm9kZVsiZnJlcXVlbmN5QmluQ291bnQiXSkNCgkJCXJldC5zZXRfZmxvYXQo
MCk7DQoJCWVsc2UNCgkJCXJldC5zZXRfZmxvYXQoYW5hbHlzZXIuZnJlcUJpbnNbYmluXSk7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5BbmFseXNlclBlYWtMZXZlbCA9IGZ1bmN0aW9uIChyZXQsIHRh
ZywgaW5kZXgpDQoJew0KCQl0YWcgPSB0YWcudG9Mb3dlckNhc2UoKTsNCgkJaW5kZXggPSBNYXRo
LmZsb29yKGluZGV4KTsNCgkJdmFyIGFuYWx5c2VyID0gZ2V0QW5hbHlzZXIodGFnLCBpbmRleCk7
DQoJCWlmIChhbmFseXNlcikNCgkJCXJldC5zZXRfZmxvYXQoYW5hbHlzZXIucGVhayk7DQoJCWVs
c2UNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BbmFseXNlclJN
U0xldmVsID0gZnVuY3Rpb24gKHJldCwgdGFnLCBpbmRleCkNCgl7DQoJCXRhZyA9IHRhZy50b0xv
d2VyQ2FzZSgpOw0KCQlpbmRleCA9IE1hdGguZmxvb3IoaW5kZXgpOw0KCQl2YXIgYW5hbHlzZXIg
PSBnZXRBbmFseXNlcih0YWcsIGluZGV4KTsNCgkJaWYgKGFuYWx5c2VyKQ0KCQkJcmV0LnNldF9m
bG9hdChhbmFseXNlci5ybXMpOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCX07DQoJ
RXhwcy5wcm90b3R5cGUuU2FtcGxlUmF0ZSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0
X2ludChjb250ZXh0ID8gY29udGV4dC5zYW1wbGVSYXRlIDogMCk7DQoJfTsNCglFeHBzLnByb3Rv
dHlwZS5DdXJyZW50VGltZSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KGNv
bnRleHQgPyBjb250ZXh0LmN1cnJlbnRUaW1lIDogY3IucGVyZm9ybWFuY2Vfbm93KCkpOw0KCX07
DQoJcGx1Z2luUHJvdG8uZXhwcyA9IG5ldyBFeHBzKCk7DQp9KCkpOw0KOw0KOw0KY3IucGx1Z2lu
c18uQnJvd3NlciA9IGZ1bmN0aW9uKHJ1bnRpbWUpDQp7DQoJdGhpcy5ydW50aW1lID0gcnVudGlt
ZTsNCn07DQooZnVuY3Rpb24gKCkNCnsNCgl2YXIgcGx1Z2luUHJvdG8gPSBjci5wbHVnaW5zXy5C
cm93c2VyLnByb3RvdHlwZTsNCglwbHVnaW5Qcm90by5UeXBlID0gZnVuY3Rpb24ocGx1Z2luKQ0K
CXsNCgkJdGhpcy5wbHVnaW4gPSBwbHVnaW47DQoJCXRoaXMucnVudGltZSA9IHBsdWdpbi5ydW50
aW1lOw0KCX07DQoJdmFyIHR5cGVQcm90byA9IHBsdWdpblByb3RvLlR5cGUucHJvdG90eXBlOw0K
CXR5cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJfTsNCgl2YXIgb2ZmbGluZVNj
cmlwdFJlYWR5ID0gZmFsc2U7DQoJdmFyIGJyb3dzZXJQbHVnaW5SZWFkeSA9IGZhbHNlOw0KCWRv
Y3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbiAoKQ0K
CXsNCgkJaWYgKHdpbmRvd1siQzJfUmVnaXN0ZXJTVyJdICYmIG5hdmlnYXRvclsic2VydmljZVdv
cmtlciJdKQ0KCQl7DQoJCQl2YXIgb2ZmbGluZUNsaWVudFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0
ZUVsZW1lbnQoInNjcmlwdCIpOw0KCQkJb2ZmbGluZUNsaWVudFNjcmlwdC5vbmxvYWQgPSBmdW5j
dGlvbiAoKQ0KCQkJew0KCQkJCW9mZmxpbmVTY3JpcHRSZWFkeSA9IHRydWU7DQoJCQkJY2hlY2tS
ZWFkeSgpDQoJCQl9Ow0KCQkJb2ZmbGluZUNsaWVudFNjcmlwdC5zcmMgPSAib2ZmbGluZUNsaWVu
dC5qcyI7DQoJCQlkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG9mZmxpbmVDbGllbnRTY3JpcHQp
Ow0KCQl9DQoJfSk7DQoJdmFyIGJyb3dzZXJJbnN0YW5jZSA9IG51bGw7DQoJdHlwZVByb3RvLm9u
QXBwQmVnaW4gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJYnJvd3NlclBsdWdpblJlYWR5ID0gdHJ1ZTsN
CgkJY2hlY2tSZWFkeSgpOw0KCX07DQoJZnVuY3Rpb24gY2hlY2tSZWFkeSgpDQoJew0KCQlpZiAo
b2ZmbGluZVNjcmlwdFJlYWR5ICYmIGJyb3dzZXJQbHVnaW5SZWFkeSAmJiB3aW5kb3dbIk9mZmxp
bmVDbGllbnRJbmZvIl0pDQoJCXsNCgkJCXdpbmRvd1siT2ZmbGluZUNsaWVudEluZm8iXVsiU2V0
TWVzc2FnZUNhbGxiYWNrIl0oZnVuY3Rpb24gKGUpDQoJCQl7DQoJCQkJYnJvd3Nlckluc3RhbmNl
Lm9uU1dNZXNzYWdlKGUpOw0KCQkJfSk7DQoJCX0NCgl9Ow0KCXBsdWdpblByb3RvLkluc3RhbmNl
ID0gZnVuY3Rpb24odHlwZSkNCgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMucnVudGlt
ZSA9IHR5cGUucnVudGltZTsNCgl9Ow0KCXZhciBpbnN0YW5jZVByb3RvID0gcGx1Z2luUHJvdG8u
SW5zdGFuY2UucHJvdG90eXBlOw0KCWluc3RhbmNlUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigp
DQoJew0KCQl2YXIgc2VsZiA9IHRoaXM7DQoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNp
emUiLCBmdW5jdGlvbiAoKSB7DQoJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5C
cm93c2VyLnByb3RvdHlwZS5jbmRzLk9uUmVzaXplLCBzZWxmKTsNCgkJfSk7DQoJCWJyb3dzZXJJ
bnN0YW5jZSA9IHRoaXM7DQoJCWlmICh0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSAhPT0gInVuZGVm
aW5lZCIpDQoJCXsNCgkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCBmdW5jdGlv
bigpIHsNCgkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ccm93c2VyLnByb3Rv
dHlwZS5jbmRzLk9uT25saW5lLCBzZWxmKTsNCgkJCX0pOw0KCQkJd2luZG93LmFkZEV2ZW50TGlz
dGVuZXIoIm9mZmxpbmUiLCBmdW5jdGlvbigpIHsNCgkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihj
ci5wbHVnaW5zXy5Ccm93c2VyLnByb3RvdHlwZS5jbmRzLk9uT2ZmbGluZSwgc2VsZik7DQoJCQl9
KTsNCgkJfQ0KCQlpZiAoIXRoaXMucnVudGltZS5pc0RpcmVjdENhbnZhcykNCgkJew0KCQkJZG9j
dW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiYXBwTW9iaS5kZXZpY2UudXBkYXRlLmF2YWlsYWJsZSIs
IGZ1bmN0aW9uKCkgew0KCQkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkJyb3dz
ZXIucHJvdG90eXBlLmNuZHMuT25VcGRhdGVSZWFkeSwgc2VsZik7DQoJCQl9KTsNCgkJCWRvY3Vt
ZW50LmFkZEV2ZW50TGlzdGVuZXIoImJhY2tidXR0b24iLCBmdW5jdGlvbigpIHsNCgkJCQlzZWxm
LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ccm93c2VyLnByb3RvdHlwZS5jbmRzLk9uQmFj
a0J1dHRvbiwgc2VsZik7DQoJCQl9KTsNCgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1l
bnVidXR0b24iLCBmdW5jdGlvbigpIHsNCgkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVn
aW5zXy5Ccm93c2VyLnByb3RvdHlwZS5jbmRzLk9uTWVudUJ1dHRvbiwgc2VsZik7DQoJCQl9KTsN
CgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlYXJjaGJ1dHRvbiIsIGZ1bmN0aW9uKCkg
ew0KCQkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkJyb3dzZXIucHJvdG90eXBl
LmNuZHMuT25TZWFyY2hCdXR0b24sIHNlbGYpOw0KCQkJfSk7DQoJCQlkb2N1bWVudC5hZGRFdmVu
dExpc3RlbmVyKCJ0aXplbmh3a2V5IiwgZnVuY3Rpb24gKGUpIHsNCgkJCQl2YXIgcmV0Ow0KCQkJ
CXN3aXRjaCAoZVsia2V5TmFtZSJdKSB7DQoJCQkJY2FzZSAiYmFjayI6DQoJCQkJCXJldCA9IHNl
bGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkJyb3dzZXIucHJvdG90eXBlLmNuZHMuT25C
YWNrQnV0dG9uLCBzZWxmKTsNCgkJCQkJaWYgKCFyZXQpDQoJCQkJCXsNCgkJCQkJCWlmICh3aW5k
b3dbInRpemVuIl0pDQoJCQkJCQkJd2luZG93WyJ0aXplbiJdWyJhcHBsaWNhdGlvbiJdWyJnZXRD
dXJyZW50QXBwbGljYXRpb24iXSgpWyJleGl0Il0oKTsNCgkJCQkJfQ0KCQkJCQlicmVhazsNCgkJ
CQljYXNlICJtZW51IjoNCgkJCQkJcmV0ID0gc2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2lu
c18uQnJvd3Nlci5wcm90b3R5cGUuY25kcy5Pbk1lbnVCdXR0b24sIHNlbGYpOw0KCQkJCQlpZiAo
IXJldCkNCgkJCQkJCWUucHJldmVudERlZmF1bHQoKTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJ
fSk7DQoJCX0NCgkJaWYgKHRoaXMucnVudGltZS5pc1dpbmRvd3MxMCAmJiB0eXBlb2YgV2luZG93
cyAhPT0gInVuZGVmaW5lZCIpDQoJCXsNCgkJCVdpbmRvd3NbIlVJIl1bIkNvcmUiXVsiU3lzdGVt
TmF2aWdhdGlvbk1hbmFnZXIiXVsiZ2V0Rm9yQ3VycmVudFZpZXciXSgpLmFkZEV2ZW50TGlzdGVu
ZXIoImJhY2tyZXF1ZXN0ZWQiLCBmdW5jdGlvbiAoZSkNCgkJCXsNCgkJCQl2YXIgcmV0ID0gc2Vs
Zi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uQnJvd3Nlci5wcm90b3R5cGUuY25kcy5PbkJh
Y2tCdXR0b24sIHNlbGYpOw0KCQkJCWlmIChyZXQpDQoJCQkJCWVbImhhbmRsZWQiXSA9IHRydWU7
DQoJCSAgICB9KTsNCgkJfQ0KCQllbHNlIGlmICh0aGlzLnJ1bnRpbWUuaXNXaW5KUyAmJiBXaW5K
U1siQXBwbGljYXRpb24iXSkNCgkJew0KCQkJV2luSlNbIkFwcGxpY2F0aW9uIl1bIm9uYmFja2Ns
aWNrIl0gPSBmdW5jdGlvbiAoZSkNCgkJCXsNCgkJCQlyZXR1cm4gISFzZWxmLnJ1bnRpbWUudHJp
Z2dlcihjci5wbHVnaW5zXy5Ccm93c2VyLnByb3RvdHlwZS5jbmRzLk9uQmFja0J1dHRvbiwgc2Vs
Zik7DQoJCQl9Ow0KCQl9DQoJCXRoaXMucnVudGltZS5hZGRTdXNwZW5kQ2FsbGJhY2soZnVuY3Rp
b24ocykgew0KCQkJaWYgKHMpDQoJCQl7DQoJCQkJc2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1
Z2luc18uQnJvd3Nlci5wcm90b3R5cGUuY25kcy5PblBhZ2VIaWRkZW4sIHNlbGYpOw0KCQkJfQ0K
CQkJZWxzZQ0KCQkJew0KCQkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkJyb3dz
ZXIucHJvdG90eXBlLmNuZHMuT25QYWdlVmlzaWJsZSwgc2VsZik7DQoJCQl9DQoJCX0pOw0KCQl0
aGlzLmlzX2FyY2FkZSA9ICh0eXBlb2Ygd2luZG93WyJpc19zY2lycmFfYXJjYWRlIl0gIT09ICJ1
bmRlZmluZWQiKTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8ub25TV01lc3NhZ2UgPSBmdW5jdGlvbiAo
ZSkNCgl7DQoJCXZhciBtZXNzYWdlVHlwZSA9IGVbImRhdGEiXVsidHlwZSJdOw0KCQlpZiAobWVz
c2FnZVR5cGUgPT09ICJkb3dubG9hZGluZy11cGRhdGUiKQ0KCQkJdGhpcy5ydW50aW1lLnRyaWdn
ZXIoY3IucGx1Z2luc18uQnJvd3Nlci5wcm90b3R5cGUuY25kcy5PblVwZGF0ZUZvdW5kLCB0aGlz
KTsNCgkJZWxzZSBpZiAobWVzc2FnZVR5cGUgPT09ICJ1cGRhdGUtcmVhZHkiIHx8IG1lc3NhZ2VU
eXBlID09PSAidXBkYXRlLXBlbmRpbmciKQ0KCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IucGx1
Z2luc18uQnJvd3Nlci5wcm90b3R5cGUuY25kcy5PblVwZGF0ZVJlYWR5LCB0aGlzKTsNCgkJZWxz
ZSBpZiAobWVzc2FnZVR5cGUgPT09ICJvZmZsaW5lLXJlYWR5IikNCgkJCXRoaXMucnVudGltZS50
cmlnZ2VyKGNyLnBsdWdpbnNfLkJyb3dzZXIucHJvdG90eXBlLmNuZHMuT25PZmZsaW5lUmVhZHks
IHRoaXMpOw0KCX07DQoJdmFyIGJhdHRlcnlNYW5hZ2VyID0gbnVsbDsNCgl2YXIgbG9hZGVkQmF0
dGVyeU1hbmFnZXIgPSBmYWxzZTsNCglmdW5jdGlvbiBtYXliZUxvYWRCYXR0ZXJ5TWFuYWdlcigp
DQoJew0KCQlpZiAobG9hZGVkQmF0dGVyeU1hbmFnZXIpDQoJCQlyZXR1cm47DQoJCWlmICghbmF2
aWdhdG9yWyJnZXRCYXR0ZXJ5Il0pDQoJCQlyZXR1cm47DQoJCXZhciBwcm9taXNlID0gbmF2aWdh
dG9yWyJnZXRCYXR0ZXJ5Il0oKTsNCgkJbG9hZGVkQmF0dGVyeU1hbmFnZXIgPSB0cnVlOw0KCQlp
ZiAocHJvbWlzZSkNCgkJew0KCQkJcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChtYW5hZ2VyKSB7DQoJ
CQkJYmF0dGVyeU1hbmFnZXIgPSBtYW5hZ2VyOw0KCQkJfSk7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9u
IENuZHMoKSB7fTsNCglDbmRzLnByb3RvdHlwZS5Db29raWVzRW5hYmxlZCA9IGZ1bmN0aW9uKCkN
Cgl7DQoJCXJldHVybiBuYXZpZ2F0b3IgPyBuYXZpZ2F0b3IuY29va2llRW5hYmxlZCA6IGZhbHNl
Ow0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNPbmxpbmUgPSBmdW5jdGlvbigpDQoJew0KCQlyZXR1
cm4gbmF2aWdhdG9yID8gbmF2aWdhdG9yLm9uTGluZSA6IGZhbHNlOw0KCX07DQoJQ25kcy5wcm90
b3R5cGUuSGFzSmF2YSA9IGZ1bmN0aW9uKCkNCgl7DQoJCXJldHVybiBuYXZpZ2F0b3IgPyBuYXZp
Z2F0b3IuamF2YUVuYWJsZWQoKSA6IGZhbHNlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25Pbmxp
bmUgPSBmdW5jdGlvbigpDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9Ow0KCUNuZHMucHJvdG90eXBl
Lk9uT2ZmbGluZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5w
cm90b3R5cGUuSXNEb3dubG9hZGluZ1VwZGF0ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
ZmFsc2U7CQkvLyBkZXByZWNhdGVkDQoJfTsNCglDbmRzLnByb3RvdHlwZS5PblVwZGF0ZVJlYWR5
ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUu
UGFnZVZpc2libGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICF0aGlzLnJ1bnRpbWUuaXNT
dXNwZW5kZWQ7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PblBhZ2VWaXNpYmxlID0gZnVuY3Rpb24g
KCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25QYWdlSGlkZGVu
ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUu
T25SZXNpemUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnBy
b3RvdHlwZS5Jc0Z1bGxzY3JlZW4gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuICEhKGRvY3Vt
ZW50WyJtb3pGdWxsU2NyZWVuIl0gfHwgZG9jdW1lbnRbIndlYmtpdElzRnVsbFNjcmVlbiJdIHx8
IGRvY3VtZW50WyJmdWxsU2NyZWVuIl0gfHwgdGhpcy5ydW50aW1lLmlzTm9kZUZ1bGxzY3JlZW4p
Ow0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25CYWNrQnV0dG9uID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25NZW51QnV0dG9uID0gZnVuY3Rp
b24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25TZWFyY2hC
dXR0b24gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnByb3Rv
dHlwZS5Jc01ldGVyZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGNvbm5lY3Rpb24gPSBuYXZp
Z2F0b3JbImNvbm5lY3Rpb24iXSB8fCBuYXZpZ2F0b3JbIm1vekNvbm5lY3Rpb24iXSB8fCBuYXZp
Z2F0b3JbIndlYmtpdENvbm5lY3Rpb24iXTsNCgkJaWYgKCFjb25uZWN0aW9uKQ0KCQkJcmV0dXJu
IGZhbHNlOw0KCQlyZXR1cm4gISFjb25uZWN0aW9uWyJtZXRlcmVkIl07DQoJfTsNCglDbmRzLnBy
b3RvdHlwZS5Jc0NoYXJnaW5nID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBiYXR0ZXJ5ID0gbmF2
aWdhdG9yWyJiYXR0ZXJ5Il0gfHwgbmF2aWdhdG9yWyJtb3pCYXR0ZXJ5Il0gfHwgbmF2aWdhdG9y
WyJ3ZWJraXRCYXR0ZXJ5Il07DQoJCWlmIChiYXR0ZXJ5KQ0KCQl7DQoJCQlyZXR1cm4gISFiYXR0
ZXJ5WyJjaGFyZ2luZyJdDQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQltYXliZUxvYWRCYXR0ZXJ5TWFu
YWdlcigpOw0KCQkJaWYgKGJhdHRlcnlNYW5hZ2VyKQ0KCQkJew0KCQkJCXJldHVybiAhIWJhdHRl
cnlNYW5hZ2VyWyJjaGFyZ2luZyJdOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXJldHVybiB0
cnVlOwkJLy8gaWYgdW5rbm93biwgZGVmYXVsdCB0byBjaGFyZ2luZyAocG93ZXJlZCkNCgkJCX0N
CgkJfQ0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNQb3J0cmFpdExhbmRzY2FwZSA9IGZ1bmN0aW9u
IChwKQ0KCXsNCgkJdmFyIGN1cnJlbnQgPSAod2luZG93LmlubmVyV2lkdGggPD0gd2luZG93Lmlu
bmVySGVpZ2h0ID8gMCA6IDEpOw0KCQlyZXR1cm4gY3VycmVudCA9PT0gcDsNCgl9Ow0KCUNuZHMu
cHJvdG90eXBlLlN1cHBvcnRzRnVsbHNjcmVlbiA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhp
cy5ydW50aW1lLmlzTm9kZVdlYmtpdCkNCgkJCXJldHVybiB0cnVlOw0KCQl2YXIgZWxlbSA9IHRo
aXMucnVudGltZS5jYW52YXNkaXYgfHwgdGhpcy5ydW50aW1lLmNhbnZhczsNCgkJcmV0dXJuICEh
KGVsZW1bInJlcXVlc3RGdWxsc2NyZWVuIl0gfHwgZWxlbVsibW96UmVxdWVzdEZ1bGxTY3JlZW4i
XSB8fCBlbGVtWyJtc1JlcXVlc3RGdWxsc2NyZWVuIl0gfHwgZWxlbVsid2Via2l0UmVxdWVzdEZ1
bGxTY3JlZW4iXSk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PblVwZGF0ZUZvdW5kID0gZnVuY3Rp
b24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25VcGRhdGVS
ZWFkeSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9Ow0KCUNuZHMucHJvdG90
eXBlLk9uT2ZmbGluZVJlYWR5ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07
DQoJcGx1Z2luUHJvdG8uY25kcyA9IG5ldyBDbmRzKCk7DQoJZnVuY3Rpb24gQWN0cygpIHt9Ow0K
CUFjdHMucHJvdG90eXBlLkFsZXJ0ID0gZnVuY3Rpb24gKG1zZykNCgl7DQoJCWlmICghdGhpcy5y
dW50aW1lLmlzRG9tRnJlZSkNCgkJCWFsZXJ0KG1zZy50b1N0cmluZygpKTsNCgl9Ow0KCUFjdHMu
cHJvdG90eXBlLkNsb3NlID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUuaXND
b2Nvb25KcykNCgkJCUNvY29vbkpTWyJBcHAiXVsiZm9yY2VUb0ZpbmlzaCJdKCk7DQoJCWVsc2Ug
aWYgKHdpbmRvd1sidGl6ZW4iXSkNCgkJCXdpbmRvd1sidGl6ZW4iXVsiYXBwbGljYXRpb24iXVsi
Z2V0Q3VycmVudEFwcGxpY2F0aW9uIl0oKVsiZXhpdCJdKCk7DQoJCWVsc2UgaWYgKG5hdmlnYXRv
clsiYXBwIl0gJiYgbmF2aWdhdG9yWyJhcHAiXVsiZXhpdEFwcCJdKQ0KCQkJbmF2aWdhdG9yWyJh
cHAiXVsiZXhpdEFwcCJdKCk7DQoJCWVsc2UgaWYgKG5hdmlnYXRvclsiZGV2aWNlIl0gJiYgbmF2
aWdhdG9yWyJkZXZpY2UiXVsiZXhpdEFwcCJdKQ0KCQkJbmF2aWdhdG9yWyJkZXZpY2UiXVsiZXhp
dEFwcCJdKCk7DQoJCWVsc2UgaWYgKCF0aGlzLmlzX2FyY2FkZSAmJiAhdGhpcy5ydW50aW1lLmlz
RG9tRnJlZSkNCgkJCXdpbmRvdy5jbG9zZSgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuRm9jdXMg
PSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMucnVudGltZS5pc05vZGVXZWJraXQpDQoJCXsN
CgkJCXZhciB3aW4gPSB3aW5kb3dbIm53Z3VpIl1bIldpbmRvdyJdWyJnZXQiXSgpOw0KCQkJd2lu
WyJmb2N1cyJdKCk7DQoJCX0NCgkJZWxzZSBpZiAoIXRoaXMuaXNfYXJjYWRlICYmICF0aGlzLnJ1
bnRpbWUuaXNEb21GcmVlKQ0KCQkJd2luZG93LmZvY3VzKCk7DQoJfTsNCglBY3RzLnByb3RvdHlw
ZS5CbHVyID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUuaXNOb2RlV2Via2l0
KQ0KCQl7DQoJCQl2YXIgd2luID0gd2luZG93WyJud2d1aSJdWyJXaW5kb3ciXVsiZ2V0Il0oKTsN
CgkJCXdpblsiYmx1ciJdKCk7DQoJCX0NCgkJZWxzZSBpZiAoIXRoaXMuaXNfYXJjYWRlICYmICF0
aGlzLnJ1bnRpbWUuaXNEb21GcmVlKQ0KCQkJd2luZG93LmJsdXIoKTsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLkdvQmFjayA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAobmF2aWdhdG9yWyJhcHAiXSAm
JiBuYXZpZ2F0b3JbImFwcCJdWyJiYWNrSGlzdG9yeSJdKQ0KCQkJbmF2aWdhdG9yWyJhcHAiXVsi
YmFja0hpc3RvcnkiXSgpOw0KCQllbHNlIGlmICghdGhpcy5pc19hcmNhZGUgJiYgIXRoaXMucnVu
dGltZS5pc0RvbUZyZWUgJiYgd2luZG93LmJhY2spDQoJCQl3aW5kb3cuYmFjaygpOw0KCX07DQoJ
QWN0cy5wcm90b3R5cGUuR29Gb3J3YXJkID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhpcy5p
c19hcmNhZGUgJiYgIXRoaXMucnVudGltZS5pc0RvbUZyZWUgJiYgd2luZG93LmZvcndhcmQpDQoJ
CQl3aW5kb3cuZm9yd2FyZCgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuR29Ib21lID0gZnVuY3Rp
b24gKCkNCgl7DQoJCWlmICghdGhpcy5pc19hcmNhZGUgJiYgIXRoaXMucnVudGltZS5pc0RvbUZy
ZWUgJiYgd2luZG93LmhvbWUpDQoJCQl3aW5kb3cuaG9tZSgpOw0KCX07DQoJQWN0cy5wcm90b3R5
cGUuR29Ub1VSTCA9IGZ1bmN0aW9uICh1cmwsIHRhcmdldCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRp
bWUuaXNDb2Nvb25KcykNCgkJCUNvY29vbkpTWyJBcHAiXVsib3BlblVSTCJdKHVybCk7DQoJCWVs
c2UgaWYgKHRoaXMucnVudGltZS5pc0VqZWN0YSkNCgkJCWVqZWN0YVsib3BlblVSTCJdKHVybCk7
DQoJCWVsc2UgaWYgKHRoaXMucnVudGltZS5pc1dpbkpTKQ0KCQkJV2luZG93c1siU3lzdGVtIl1b
IkxhdW5jaGVyIl1bImxhdW5jaFVyaUFzeW5jIl0obmV3IFdpbmRvd3NbIkZvdW5kYXRpb24iXVsi
VXJpIl0odXJsKSk7DQoJCWVsc2UgaWYgKG5hdmlnYXRvclsiYXBwIl0gJiYgbmF2aWdhdG9yWyJh
cHAiXVsibG9hZFVybCJdKQ0KCQkJbmF2aWdhdG9yWyJhcHAiXVsibG9hZFVybCJdKHVybCwgeyAi
b3BlbkV4dGVybmFsIjogdHJ1ZSB9KTsNCgkJZWxzZSBpZiAodGhpcy5ydW50aW1lLmlzQ29yZG92
YSkNCgkJCXdpbmRvdy5vcGVuKHVybCwgIl9zeXN0ZW0iKTsNCgkJZWxzZSBpZiAoIXRoaXMuaXNf
YXJjYWRlICYmICF0aGlzLnJ1bnRpbWUuaXNEb21GcmVlKQ0KCQl7DQoJCQlpZiAodGFyZ2V0ID09
PSAyICYmICF0aGlzLmlzX2FyY2FkZSkJCS8vIHRvcA0KCQkJCXdpbmRvdy50b3AubG9jYXRpb24g
PSB1cmw7DQoJCQllbHNlIGlmICh0YXJnZXQgPT09IDEgJiYgIXRoaXMuaXNfYXJjYWRlKQkvLyBw
YXJlbnQNCgkJCQl3aW5kb3cucGFyZW50LmxvY2F0aW9uID0gdXJsOw0KCQkJZWxzZQkJCQkJLy8g
c2VsZg0KCQkJCXdpbmRvdy5sb2NhdGlvbiA9IHVybDsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5
cGUuR29Ub1VSTFdpbmRvdyA9IGZ1bmN0aW9uICh1cmwsIHRhZykNCgl7DQoJCWlmICh0aGlzLnJ1
bnRpbWUuaXNDb2Nvb25KcykNCgkJCUNvY29vbkpTWyJBcHAiXVsib3BlblVSTCJdKHVybCk7DQoJ
CWVsc2UgaWYgKHRoaXMucnVudGltZS5pc0VqZWN0YSkNCgkJCWVqZWN0YVsib3BlblVSTCJdKHVy
bCk7DQoJCWVsc2UgaWYgKHRoaXMucnVudGltZS5pc1dpbkpTKQ0KCQkJV2luZG93c1siU3lzdGVt
Il1bIkxhdW5jaGVyIl1bImxhdW5jaFVyaUFzeW5jIl0obmV3IFdpbmRvd3NbIkZvdW5kYXRpb24i
XVsiVXJpIl0odXJsKSk7DQoJCWVsc2UgaWYgKG5hdmlnYXRvclsiYXBwIl0gJiYgbmF2aWdhdG9y
WyJhcHAiXVsibG9hZFVybCJdKQ0KCQkJbmF2aWdhdG9yWyJhcHAiXVsibG9hZFVybCJdKHVybCwg
eyAib3BlbkV4dGVybmFsIjogdHJ1ZSB9KTsNCgkJZWxzZSBpZiAodGhpcy5ydW50aW1lLmlzQ29y
ZG92YSkNCgkJCXdpbmRvdy5vcGVuKHVybCwgIl9zeXN0ZW0iKTsNCgkJZWxzZSBpZiAoIXRoaXMu
aXNfYXJjYWRlICYmICF0aGlzLnJ1bnRpbWUuaXNEb21GcmVlKQ0KCQkJd2luZG93Lm9wZW4odXJs
LCB0YWcpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuUmVsb2FkID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CWlmICghdGhpcy5pc19hcmNhZGUgJiYgIXRoaXMucnVudGltZS5pc0RvbUZyZWUpDQoJCQl3aW5k
b3cubG9jYXRpb24ucmVsb2FkKCk7DQoJfTsNCgl2YXIgZmlyc3RSZXF1ZXN0RnVsbHNjcmVlbiA9
IHRydWU7DQoJdmFyIGNycnVudGltZSA9IG51bGw7DQoJZnVuY3Rpb24gb25GdWxsc2NyZWVuRXJy
b3IoZSkNCgl7DQoJCWlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikNCgkJCWNvbnNvbGUud2Fy
bigiRnVsbHNjcmVlbiByZXF1ZXN0IGZhaWxlZDogIiwgZSk7DQoJCWNycnVudGltZVsic2V0U2l6
ZSJdKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpOw0KCX07DQoJQWN0cy5w
cm90b3R5cGUuUmVxdWVzdEZ1bGxTY3JlZW4gPSBmdW5jdGlvbiAoc3RyZXRjaG1vZGUpDQoJew0K
CQlpZiAodGhpcy5ydW50aW1lLmlzRG9tRnJlZSkNCgkJew0KCQkJY3IubG9nZXhwb3J0KCJbQ29u
c3RydWN0IDJdIFJlcXVlc3RpbmcgZnVsbHNjcmVlbiBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMg
cGxhdGZvcm0gLSB0aGUgcmVxdWVzdCBoYXMgYmVlbiBpZ25vcmVkIik7DQoJCQlyZXR1cm47DQoJ
CX0NCgkJaWYgKHN0cmV0Y2htb2RlID49IDIpDQoJCQlzdHJldGNobW9kZSArPSAxOw0KCQlpZiAo
c3RyZXRjaG1vZGUgPT09IDYpDQoJCQlzdHJldGNobW9kZSA9IDI7DQoJCWlmICh0aGlzLnJ1bnRp
bWUuaXNOb2RlV2Via2l0KQ0KCQl7DQoJCQlpZiAodGhpcy5ydW50aW1lLmlzRGVidWcpDQoJCQl7
DQoJCQkJZGVidWdnZXJGdWxsc2NyZWVuKHRydWUpOw0KCQkJfQ0KCQkJZWxzZSBpZiAoIXRoaXMu
cnVudGltZS5pc05vZGVGdWxsc2NyZWVuICYmIHdpbmRvd1sibndndWkiXSkNCgkJCXsNCgkJCQl3
aW5kb3dbIm53Z3VpIl1bIldpbmRvdyJdWyJnZXQiXSgpWyJlbnRlckZ1bGxzY3JlZW4iXSgpOw0K
CQkJCXRoaXMucnVudGltZS5pc05vZGVGdWxsc2NyZWVuID0gdHJ1ZTsNCgkJCQl0aGlzLnJ1bnRp
bWUuZnVsbHNjcmVlbl9zY2FsaW5nID0gKHN0cmV0Y2htb2RlID49IDIgPyBzdHJldGNobW9kZSA6
IDApOw0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKGRvY3VtZW50WyJtb3pGdWxsU2Ny
ZWVuIl0gfHwgZG9jdW1lbnRbIndlYmtpdElzRnVsbFNjcmVlbiJdIHx8ICEhZG9jdW1lbnRbIm1z
RnVsbHNjcmVlbkVsZW1lbnQiXSB8fCBkb2N1bWVudFsiZnVsbFNjcmVlbiJdIHx8IGRvY3VtZW50
WyJmdWxsU2NyZWVuRWxlbWVudCJdKQ0KCQkJew0KCQkJCXJldHVybjsNCgkJCX0NCgkJCXRoaXMu
cnVudGltZS5mdWxsc2NyZWVuX3NjYWxpbmcgPSAoc3RyZXRjaG1vZGUgPj0gMiA/IHN0cmV0Y2ht
b2RlIDogMCk7DQoJCQl2YXIgZWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCgkJCWlm
IChmaXJzdFJlcXVlc3RGdWxsc2NyZWVuKQ0KCQkJew0KCQkJCWZpcnN0UmVxdWVzdEZ1bGxzY3Jl
ZW4gPSBmYWxzZTsNCgkJCQljcnJ1bnRpbWUgPSB0aGlzLnJ1bnRpbWU7DQoJCQkJZWxlbS5hZGRF
dmVudExpc3RlbmVyKCJtb3pmdWxsc2NyZWVuZXJyb3IiLCBvbkZ1bGxzY3JlZW5FcnJvcik7DQoJ
CQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCJ3ZWJraXRmdWxsc2NyZWVuZXJyb3IiLCBvbkZ1bGxz
Y3JlZW5FcnJvcik7DQoJCQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCJNU0Z1bGxzY3JlZW5FcnJv
ciIsIG9uRnVsbHNjcmVlbkVycm9yKTsNCgkJCQllbGVtLmFkZEV2ZW50TGlzdGVuZXIoImZ1bGxz
Y3JlZW5lcnJvciIsIG9uRnVsbHNjcmVlbkVycm9yKTsNCgkJCX0NCgkJCWlmIChlbGVtWyJyZXF1
ZXN0RnVsbHNjcmVlbiJdKQ0KCQkJCWVsZW1bInJlcXVlc3RGdWxsc2NyZWVuIl0oKTsNCgkJCWVs
c2UgaWYgKGVsZW1bIm1velJlcXVlc3RGdWxsU2NyZWVuIl0pDQoJCQkJZWxlbVsibW96UmVxdWVz
dEZ1bGxTY3JlZW4iXSgpOw0KCQkJZWxzZSBpZiAoZWxlbVsibXNSZXF1ZXN0RnVsbHNjcmVlbiJd
KQ0KCQkJCWVsZW1bIm1zUmVxdWVzdEZ1bGxzY3JlZW4iXSgpOw0KCQkJZWxzZSBpZiAoZWxlbVsi
d2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iXSkNCgkJCXsNCgkJCQlpZiAodHlwZW9mIEVsZW1lbnQg
IT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBFbGVtZW50WyJBTExPV19LRVlCT0FSRF9JTlBVVCJd
ICE9PSAidW5kZWZpbmVkIikNCgkJCQkJZWxlbVsid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iXShF
bGVtZW50WyJBTExPV19LRVlCT0FSRF9JTlBVVCJdKTsNCgkJCQllbHNlDQoJCQkJCWVsZW1bIndl
YmtpdFJlcXVlc3RGdWxsU2NyZWVuIl0oKTsNCgkJCX0NCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5
cGUuQ2FuY2VsRnVsbFNjcmVlbiA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5ydW50aW1l
LmlzRG9tRnJlZSkNCgkJew0KCQkJY3IubG9nZXhwb3J0KCJbQ29uc3RydWN0IDJdIEV4aXRpbmcg
ZnVsbHNjcmVlbiBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0gLSB0aGUgcmVxdWVz
dCBoYXMgYmVlbiBpZ25vcmVkIik7DQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKHRoaXMucnVudGlt
ZS5pc05vZGVXZWJraXQpDQoJCXsNCgkJCWlmICh0aGlzLnJ1bnRpbWUuaXNEZWJ1ZykNCgkJCXsN
CgkJCQlkZWJ1Z2dlckZ1bGxzY3JlZW4oZmFsc2UpOw0KCQkJfQ0KCQkJZWxzZSBpZiAodGhpcy5y
dW50aW1lLmlzTm9kZUZ1bGxzY3JlZW4gJiYgd2luZG93WyJud2d1aSJdKQ0KCQkJew0KCQkJCXdp
bmRvd1sibndndWkiXVsiV2luZG93Il1bImdldCJdKClbImxlYXZlRnVsbHNjcmVlbiJdKCk7DQoJ
CQkJdGhpcy5ydW50aW1lLmlzTm9kZUZ1bGxzY3JlZW4gPSBmYWxzZTsNCgkJCX0NCgkJfQ0KCQll
bHNlDQoJCXsNCgkJCWlmIChkb2N1bWVudFsiZXhpdEZ1bGxzY3JlZW4iXSkNCgkJCQlkb2N1bWVu
dFsiZXhpdEZ1bGxzY3JlZW4iXSgpOw0KCQkJZWxzZSBpZiAoZG9jdW1lbnRbIm1vekNhbmNlbEZ1
bGxTY3JlZW4iXSkNCgkJCQlkb2N1bWVudFsibW96Q2FuY2VsRnVsbFNjcmVlbiJdKCk7DQoJCQll
bHNlIGlmIChkb2N1bWVudFsibXNFeGl0RnVsbHNjcmVlbiJdKQ0KCQkJCWRvY3VtZW50WyJtc0V4
aXRGdWxsc2NyZWVuIl0oKTsNCgkJCWVsc2UgaWYgKGRvY3VtZW50WyJ3ZWJraXRDYW5jZWxGdWxs
U2NyZWVuIl0pDQoJCQkJZG9jdW1lbnRbIndlYmtpdENhbmNlbEZ1bGxTY3JlZW4iXSgpOw0KCQl9
DQoJfTsNCglBY3RzLnByb3RvdHlwZS5WaWJyYXRlID0gZnVuY3Rpb24gKHBhdHRlcm5fKQ0KCXsN
CgkJdHJ5IHsNCgkJCXZhciBhcnIgPSBwYXR0ZXJuXy5zcGxpdCgiLCIpOw0KCQkJdmFyIGksIGxl
bjsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXsN
CgkJCQlhcnJbaV0gPSBwYXJzZUludChhcnJbaV0sIDEwKTsNCgkJCX0NCgkJCWlmIChuYXZpZ2F0
b3JbInZpYnJhdGUiXSkNCgkJCQluYXZpZ2F0b3JbInZpYnJhdGUiXShhcnIpOw0KCQkJZWxzZSBp
ZiAobmF2aWdhdG9yWyJtb3pWaWJyYXRlIl0pDQoJCQkJbmF2aWdhdG9yWyJtb3pWaWJyYXRlIl0o
YXJyKTsNCgkJCWVsc2UgaWYgKG5hdmlnYXRvclsid2Via2l0VmlicmF0ZSJdKQ0KCQkJCW5hdmln
YXRvclsid2Via2l0VmlicmF0ZSJdKGFycik7DQoJCQllbHNlIGlmIChuYXZpZ2F0b3JbIm1zVmli
cmF0ZSJdKQ0KCQkJCW5hdmlnYXRvclsibXNWaWJyYXRlIl0oYXJyKTsNCgkJfQ0KCQljYXRjaCAo
ZSkge30NCgl9Ow0KCUFjdHMucHJvdG90eXBlLkludm9rZURvd25sb2FkID0gZnVuY3Rpb24gKHVy
bF8sIGZpbGVuYW1lXykNCgl7DQoJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIp
Ow0KCQlpZiAodHlwZW9mIGFbImRvd25sb2FkIl0gPT09ICJ1bmRlZmluZWQiKQ0KCQl7DQoJCQl3
aW5kb3cub3Blbih1cmxfKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXZhciBib2R5ID0gZG9jdW1l
bnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTsNCgkJCWEudGV4dENvbnRlbnQgPSBm
aWxlbmFtZV87DQoJCQlhLmhyZWYgPSB1cmxfOw0KCQkJYVsiZG93bmxvYWQiXSA9IGZpbGVuYW1l
XzsNCgkJCWJvZHkuYXBwZW5kQ2hpbGQoYSk7DQoJCQl2YXIgY2xpY2tFdmVudCA9IG5ldyBNb3Vz
ZUV2ZW50KCJjbGljayIpOw0KCQkJYS5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpOw0KCQkJYm9k
eS5yZW1vdmVDaGlsZChhKTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuSW52b2tlRG93bmxv
YWRTdHJpbmcgPSBmdW5jdGlvbiAoc3RyXywgbWltZXR5cGVfLCBmaWxlbmFtZV8pDQoJew0KCQl2
YXIgZGF0YXVyaSA9ICJkYXRhOiIgKyBtaW1ldHlwZV8gKyAiLCIgKyBlbmNvZGVVUklDb21wb25l
bnQoc3RyXyk7DQoJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KCQlpZiAo
dHlwZW9mIGFbImRvd25sb2FkIl0gPT09ICJ1bmRlZmluZWQiKQ0KCQl7DQoJCQl3aW5kb3cub3Bl
bihkYXRhdXJpKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXZhciBib2R5ID0gZG9jdW1lbnQuZ2V0
RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTsNCgkJCWEudGV4dENvbnRlbnQgPSBmaWxlbmFt
ZV87DQoJCQlhLmhyZWYgPSBkYXRhdXJpOw0KCQkJYVsiZG93bmxvYWQiXSA9IGZpbGVuYW1lXzsN
CgkJCWJvZHkuYXBwZW5kQ2hpbGQoYSk7DQoJCQl2YXIgY2xpY2tFdmVudCA9IG5ldyBNb3VzZUV2
ZW50KCJjbGljayIpOw0KCQkJYS5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpOw0KCQkJYm9keS5y
ZW1vdmVDaGlsZChhKTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuQ29uc29sZUxvZyA9IGZ1
bmN0aW9uICh0eXBlXywgbXNnXykNCgl7DQoJCWlmICh0eXBlb2YgY29uc29sZSA9PT0gInVuZGVm
aW5lZCIpDQoJCQlyZXR1cm47DQoJCWlmICh0eXBlXyA9PT0gMCAmJiBjb25zb2xlLmxvZykNCgkJ
CWNvbnNvbGUubG9nKG1zZ18udG9TdHJpbmcoKSk7DQoJCWlmICh0eXBlXyA9PT0gMSAmJiBjb25z
b2xlLndhcm4pDQoJCQljb25zb2xlLndhcm4obXNnXy50b1N0cmluZygpKTsNCgkJaWYgKHR5cGVf
ID09PSAyICYmIGNvbnNvbGUuZXJyb3IpDQoJCQljb25zb2xlLmVycm9yKG1zZ18udG9TdHJpbmco
KSk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5Db25zb2xlR3JvdXAgPSBmdW5jdGlvbiAobmFtZV8p
DQoJew0KCQlpZiAoY29uc29sZSAmJiBjb25zb2xlLmdyb3VwKQ0KCQkJY29uc29sZS5ncm91cChu
YW1lXyk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5Db25zb2xlR3JvdXBFbmQgPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJaWYgKGNvbnNvbGUgJiYgY29uc29sZS5ncm91cEVuZCkNCgkJCWNvbnNvbGUuZ3Jv
dXBFbmQoKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkV4ZWNKcyA9IGZ1bmN0aW9uIChqc18pDQoJ
ew0KCQl0cnkgew0KCQkJaWYgKGV2YWwpDQoJCQkJZXZhbChqc18pOw0KCQl9DQoJCWNhdGNoIChl
KQ0KCQl7DQoJCQlpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKQ0KCQkJCWNvbnNvbGUuZXJy
b3IoIkVycm9yIGV4ZWN1dGluZyBKYXZhc2NyaXB0OiAiLCBlKTsNCgkJfQ0KCX07DQoJdmFyIG9y
aWVudGF0aW9ucyA9IFsNCgkJInBvcnRyYWl0IiwNCgkJImxhbmRzY2FwZSIsDQoJCSJwb3J0cmFp
dC1wcmltYXJ5IiwNCgkJInBvcnRyYWl0LXNlY29uZGFyeSIsDQoJCSJsYW5kc2NhcGUtcHJpbWFy
eSIsDQoJCSJsYW5kc2NhcGUtc2Vjb25kYXJ5Ig0KCV07DQoJQWN0cy5wcm90b3R5cGUuTG9ja09y
aWVudGF0aW9uID0gZnVuY3Rpb24gKG8pDQoJew0KCQlvID0gTWF0aC5mbG9vcihvKTsNCgkJaWYg
KG8gPCAwIHx8IG8gPj0gb3JpZW50YXRpb25zLmxlbmd0aCkNCgkJCXJldHVybjsNCgkJdGhpcy5y
dW50aW1lLmF1dG9Mb2NrT3JpZW50YXRpb24gPSBmYWxzZTsNCgkJdmFyIG9yaWVudGF0aW9uID0g
b3JpZW50YXRpb25zW29dOw0KCQlpZiAoc2NyZWVuWyJvcmllbnRhdGlvbiJdICYmIHNjcmVlblsi
b3JpZW50YXRpb24iXVsibG9jayJdKQ0KCQkJc2NyZWVuWyJvcmllbnRhdGlvbiJdWyJsb2NrIl0o
b3JpZW50YXRpb24pOw0KCQllbHNlIGlmIChzY3JlZW5bImxvY2tPcmllbnRhdGlvbiJdKQ0KCQkJ
c2NyZWVuWyJsb2NrT3JpZW50YXRpb24iXShvcmllbnRhdGlvbik7DQoJCWVsc2UgaWYgKHNjcmVl
blsid2Via2l0TG9ja09yaWVudGF0aW9uIl0pDQoJCQlzY3JlZW5bIndlYmtpdExvY2tPcmllbnRh
dGlvbiJdKG9yaWVudGF0aW9uKTsNCgkJZWxzZSBpZiAoc2NyZWVuWyJtb3pMb2NrT3JpZW50YXRp
b24iXSkNCgkJCXNjcmVlblsibW96TG9ja09yaWVudGF0aW9uIl0ob3JpZW50YXRpb24pOw0KCQll
bHNlIGlmIChzY3JlZW5bIm1zTG9ja09yaWVudGF0aW9uIl0pDQoJCQlzY3JlZW5bIm1zTG9ja09y
aWVudGF0aW9uIl0ob3JpZW50YXRpb24pOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuVW5sb2NrT3Jp
ZW50YXRpb24gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5ydW50aW1lLmF1dG9Mb2NrT3JpZW50
YXRpb24gPSBmYWxzZTsNCgkJaWYgKHNjcmVlblsib3JpZW50YXRpb24iXSAmJiBzY3JlZW5bIm9y
aWVudGF0aW9uIl1bInVubG9jayJdKQ0KCQkJc2NyZWVuWyJvcmllbnRhdGlvbiJdWyJ1bmxvY2si
XSgpOw0KCQllbHNlIGlmIChzY3JlZW5bInVubG9ja09yaWVudGF0aW9uIl0pDQoJCQlzY3JlZW5b
InVubG9ja09yaWVudGF0aW9uIl0oKTsNCgkJZWxzZSBpZiAoc2NyZWVuWyJ3ZWJraXRVbmxvY2tP
cmllbnRhdGlvbiJdKQ0KCQkJc2NyZWVuWyJ3ZWJraXRVbmxvY2tPcmllbnRhdGlvbiJdKCk7DQoJ
CWVsc2UgaWYgKHNjcmVlblsibW96VW5sb2NrT3JpZW50YXRpb24iXSkNCgkJCXNjcmVlblsibW96
VW5sb2NrT3JpZW50YXRpb24iXSgpOw0KCQllbHNlIGlmIChzY3JlZW5bIm1zVW5sb2NrT3JpZW50
YXRpb24iXSkNCgkJCXNjcmVlblsibXNVbmxvY2tPcmllbnRhdGlvbiJdKCk7DQoJfTsNCglwbHVn
aW5Qcm90by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5w
cm90b3R5cGUuVVJMID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMu
cnVudGltZS5pc0RvbUZyZWUgPyAiIiA6IHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpKTsNCgl9
Ow0KCUV4cHMucHJvdG90eXBlLlByb3RvY29sID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5z
ZXRfc3RyaW5nKHRoaXMucnVudGltZS5pc0RvbUZyZWUgPyAiIiA6IHdpbmRvdy5sb2NhdGlvbi5w
cm90b2NvbCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5Eb21haW4gPSBmdW5jdGlvbiAocmV0KQ0K
CXsNCgkJcmV0LnNldF9zdHJpbmcodGhpcy5ydW50aW1lLmlzRG9tRnJlZSA/ICIiIDogd2luZG93
LmxvY2F0aW9uLmhvc3RuYW1lKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlBhdGhOYW1lID0gZnVu
Y3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMucnVudGltZS5pc0RvbUZyZWUg
PyAiIiA6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5I
YXNoID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMucnVudGltZS5p
c0RvbUZyZWUgPyAiIiA6IHdpbmRvdy5sb2NhdGlvbi5oYXNoKTsNCgl9Ow0KCUV4cHMucHJvdG90
eXBlLlJlZmVycmVyID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMu
cnVudGltZS5pc0RvbUZyZWUgPyAiIiA6IGRvY3VtZW50LnJlZmVycmVyKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLlRpdGxlID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRo
aXMucnVudGltZS5pc0RvbUZyZWUgPyAiIiA6IGRvY3VtZW50LnRpdGxlKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLk5hbWUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9zdHJpbmcodGhp
cy5ydW50aW1lLmlzRG9tRnJlZSA/ICIiIDogbmF2aWdhdG9yLmFwcE5hbWUpOw0KCX07DQoJRXhw
cy5wcm90b3R5cGUuVmVyc2lvbiA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X3N0cmlu
Zyh0aGlzLnJ1bnRpbWUuaXNEb21GcmVlID8gIiIgOiBuYXZpZ2F0b3IuYXBwVmVyc2lvbik7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5MYW5ndWFnZSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlpZiAo
bmF2aWdhdG9yICYmIG5hdmlnYXRvci5sYW5ndWFnZSkNCgkJCXJldC5zZXRfc3RyaW5nKG5hdmln
YXRvci5sYW5ndWFnZSk7DQoJCWVsc2UNCgkJCXJldC5zZXRfc3RyaW5nKCIiKTsNCgl9Ow0KCUV4
cHMucHJvdG90eXBlLlBsYXRmb3JtID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3Ry
aW5nKHRoaXMucnVudGltZS5pc0RvbUZyZWUgPyAiIiA6IG5hdmlnYXRvci5wbGF0Zm9ybSk7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5Qcm9kdWN0ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCWlmIChu
YXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnByb2R1Y3QpDQoJCQlyZXQuc2V0X3N0cmluZyhuYXZpZ2F0
b3IucHJvZHVjdCk7DQoJCWVsc2UNCgkJCXJldC5zZXRfc3RyaW5nKCIiKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLlZlbmRvciA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlpZiAobmF2aWdhdG9yICYm
IG5hdmlnYXRvci52ZW5kb3IpDQoJCQlyZXQuc2V0X3N0cmluZyhuYXZpZ2F0b3IudmVuZG9yKTsN
CgkJZWxzZQ0KCQkJcmV0LnNldF9zdHJpbmcoIiIpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuVXNl
ckFnZW50ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKHRoaXMucnVudGlt
ZS5pc0RvbUZyZWUgPyAiIiA6IG5hdmlnYXRvci51c2VyQWdlbnQpOw0KCX07DQoJRXhwcy5wcm90
b3R5cGUuUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9zdHJpbmco
dGhpcy5ydW50aW1lLmlzRG9tRnJlZSA/ICIiIDogd2luZG93LmxvY2F0aW9uLnNlYXJjaCk7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5RdWVyeVBhcmFtID0gZnVuY3Rpb24gKHJldCwgcGFyYW1uYW1l
KQ0KCXsNCgkJaWYgKHRoaXMucnVudGltZS5pc0RvbUZyZWUpDQoJCXsNCgkJCXJldC5zZXRfc3Ry
aW5nKCIiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2YXIgbWF0Y2ggPSBSZWdFeHAoJ1s/Jl0nICsg
cGFyYW1uYW1lICsgJz0oW14mXSopJykuZXhlYyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsNCgkJ
aWYgKG1hdGNoKQ0KCQkJcmV0LnNldF9zdHJpbmcoZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFd
LnJlcGxhY2UoL1wrL2csICcgJykpKTsNCgkJZWxzZQ0KCQkJcmV0LnNldF9zdHJpbmcoIiIpOw0K
CX07DQoJRXhwcy5wcm90b3R5cGUuQmFuZHdpZHRoID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXZh
ciBjb25uZWN0aW9uID0gbmF2aWdhdG9yWyJjb25uZWN0aW9uIl0gfHwgbmF2aWdhdG9yWyJtb3pD
b25uZWN0aW9uIl0gfHwgbmF2aWdhdG9yWyJ3ZWJraXRDb25uZWN0aW9uIl07DQoJCWlmICghY29u
bmVjdGlvbikNCgkJCXJldC5zZXRfZmxvYXQoTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTsNCgkJ
ZWxzZQ0KCQl7DQoJCQlpZiAodHlwZW9mIGNvbm5lY3Rpb25bImJhbmR3aWR0aCJdICE9PSAidW5k
ZWZpbmVkIikNCgkJCQlyZXQuc2V0X2Zsb2F0KGNvbm5lY3Rpb25bImJhbmR3aWR0aCJdKTsNCgkJ
CWVsc2UgaWYgKHR5cGVvZiBjb25uZWN0aW9uWyJkb3dubGlua01heCJdICE9PSAidW5kZWZpbmVk
IikNCgkJCQlyZXQuc2V0X2Zsb2F0KGNvbm5lY3Rpb25bImRvd25saW5rTWF4Il0pOw0KCQkJZWxz
ZQ0KCQkJCXJldC5zZXRfZmxvYXQoTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTsNCgkJfQ0KCX07
DQoJRXhwcy5wcm90b3R5cGUuQ29ubmVjdGlvblR5cGUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJ
dmFyIGNvbm5lY3Rpb24gPSBuYXZpZ2F0b3JbImNvbm5lY3Rpb24iXSB8fCBuYXZpZ2F0b3JbIm1v
ekNvbm5lY3Rpb24iXSB8fCBuYXZpZ2F0b3JbIndlYmtpdENvbm5lY3Rpb24iXTsNCgkJaWYgKCFj
b25uZWN0aW9uKQ0KCQkJcmV0LnNldF9zdHJpbmcoInVua25vd24iKTsNCgkJZWxzZQ0KCQl7DQoJ
CQlyZXQuc2V0X3N0cmluZyhjb25uZWN0aW9uWyJ0eXBlIl0gfHwgInVua25vd24iKTsNCgkJfQ0K
CX07DQoJRXhwcy5wcm90b3R5cGUuQmF0dGVyeUxldmVsID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJ
CXZhciBiYXR0ZXJ5ID0gbmF2aWdhdG9yWyJiYXR0ZXJ5Il0gfHwgbmF2aWdhdG9yWyJtb3pCYXR0
ZXJ5Il0gfHwgbmF2aWdhdG9yWyJ3ZWJraXRCYXR0ZXJ5Il07DQoJCWlmIChiYXR0ZXJ5KQ0KCQl7
DQoJCQlyZXQuc2V0X2Zsb2F0KGJhdHRlcnlbImxldmVsIl0pOw0KCQl9DQoJCWVsc2UNCgkJew0K
CQkJbWF5YmVMb2FkQmF0dGVyeU1hbmFnZXIoKTsNCgkJCWlmIChiYXR0ZXJ5TWFuYWdlcikNCgkJ
CXsNCgkJCQlyZXQuc2V0X2Zsb2F0KGJhdHRlcnlNYW5hZ2VyWyJsZXZlbCJdKTsNCgkJCX0NCgkJ
CWVsc2UNCgkJCXsNCgkJCQlyZXQuc2V0X2Zsb2F0KDEpOwkJLy8gbm90IHN1cHBvcnRlZC91bmtu
b3duOiBhc3N1bWUgY2hhcmdlZA0KCQkJfQ0KCQl9DQoJfTsNCglFeHBzLnByb3RvdHlwZS5CYXR0
ZXJ5VGltZUxlZnQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJdmFyIGJhdHRlcnkgPSBuYXZpZ2F0
b3JbImJhdHRlcnkiXSB8fCBuYXZpZ2F0b3JbIm1vekJhdHRlcnkiXSB8fCBuYXZpZ2F0b3JbIndl
YmtpdEJhdHRlcnkiXTsNCgkJaWYgKGJhdHRlcnkpDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoYmF0
dGVyeVsiZGlzY2hhcmdpbmdUaW1lIl0pOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJbWF5YmVMb2Fk
QmF0dGVyeU1hbmFnZXIoKTsNCgkJCWlmIChiYXR0ZXJ5TWFuYWdlcikNCgkJCXsNCgkJCQlyZXQu
c2V0X2Zsb2F0KGJhdHRlcnlNYW5hZ2VyWyJkaXNjaGFyZ2luZ1RpbWUiXSk7DQoJCQl9DQoJCQll
bHNlDQoJCQl7DQoJCQkJcmV0LnNldF9mbG9hdChOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpOwkJ
Ly8gbm90IHN1cHBvcnRlZC91bmtub3duOiBhc3N1bWUgaW5maW5pdGUgdGltZSBsZWZ0DQoJCQl9
DQoJCX0NCgl9Ow0KCUV4cHMucHJvdG90eXBlLkV4ZWNKUyA9IGZ1bmN0aW9uIChyZXQsIGpzXykN
Cgl7DQoJCWlmICghZXZhbCkNCgkJew0KCQkJcmV0LnNldF9hbnkoMCk7DQoJCQlyZXR1cm47DQoJ
CX0NCgkJdmFyIHJlc3VsdCA9IDA7DQoJCXRyeSB7DQoJCQlyZXN1bHQgPSBldmFsKGpzXyk7DQoJ
CX0NCgkJY2F0Y2ggKGUpDQoJCXsNCgkJCWlmIChjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpDQoJ
CQkJY29uc29sZS5lcnJvcigiRXJyb3IgZXhlY3V0aW5nIEphdmFzY3JpcHQ6ICIsIGUpOw0KCQl9
DQoJCWlmICh0eXBlb2YgcmVzdWx0ID09PSAibnVtYmVyIikNCgkJCXJldC5zZXRfYW55KHJlc3Vs
dCk7DQoJCWVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09ICJzdHJpbmciKQ0KCQkJcmV0LnNldF9h
bnkocmVzdWx0KTsNCgkJZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gImJvb2xlYW4iKQ0KCQkJ
cmV0LnNldF9hbnkocmVzdWx0ID8gMSA6IDApOw0KCQllbHNlDQoJCQlyZXQuc2V0X2FueSgwKTsN
Cgl9Ow0KCUV4cHMucHJvdG90eXBlLlNjcmVlbldpZHRoID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJ
CXJldC5zZXRfaW50KHNjcmVlbi53aWR0aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5TY3JlZW5I
ZWlnaHQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9pbnQoc2NyZWVuLmhlaWdodCk7
DQoJfTsNCglFeHBzLnByb3RvdHlwZS5EZXZpY2VQaXhlbFJhdGlvID0gZnVuY3Rpb24gKHJldCkN
Cgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5ydW50aW1lLmRldmljZVBpeGVsUmF0aW8pOw0KCX07
DQoJRXhwcy5wcm90b3R5cGUuV2luZG93SW5uZXJXaWR0aCA9IGZ1bmN0aW9uIChyZXQpDQoJew0K
CQlyZXQuc2V0X2ludCh3aW5kb3cuaW5uZXJXaWR0aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5X
aW5kb3dJbm5lckhlaWdodCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2ludCh3aW5k
b3cuaW5uZXJIZWlnaHQpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuV2luZG93T3V0ZXJXaWR0aCA9
IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2ludCh3aW5kb3cub3V0ZXJXaWR0aCk7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5XaW5kb3dPdXRlckhlaWdodCA9IGZ1bmN0aW9uIChyZXQpDQoJ
ew0KCQlyZXQuc2V0X2ludCh3aW5kb3cub3V0ZXJIZWlnaHQpOw0KCX07DQoJcGx1Z2luUHJvdG8u
ZXhwcyA9IG5ldyBFeHBzKCk7DQp9KCkpOw0KOw0KOw0KY3IucGx1Z2luc18uRnVuY3Rpb24gPSBm
dW5jdGlvbihydW50aW1lKQ0Kew0KCXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0
aW9uICgpDQp7DQoJdmFyIHBsdWdpblByb3RvID0gY3IucGx1Z2luc18uRnVuY3Rpb24ucHJvdG90
eXBlOw0KCXBsdWdpblByb3RvLlR5cGUgPSBmdW5jdGlvbihwbHVnaW4pDQoJew0KCQl0aGlzLnBs
dWdpbiA9IHBsdWdpbjsNCgkJdGhpcy5ydW50aW1lID0gcGx1Z2luLnJ1bnRpbWU7DQoJfTsNCgl2
YXIgdHlwZVByb3RvID0gcGx1Z2luUHJvdG8uVHlwZS5wcm90b3R5cGU7DQoJdHlwZVByb3RvLm9u
Q3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgl9Ow0KCXBsdWdpblByb3RvLkluc3RhbmNlID0gZnVu
Y3Rpb24odHlwZSkNCgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMucnVudGltZSA9IHR5
cGUucnVudGltZTsNCgl9Ow0KCXZhciBpbnN0YW5jZVByb3RvID0gcGx1Z2luUHJvdG8uSW5zdGFu
Y2UucHJvdG90eXBlOw0KCXZhciBmdW5jU3RhY2sgPSBbXTsNCgl2YXIgZnVuY1N0YWNrUHRyID0g
LTE7DQoJdmFyIGlzSW5QcmV2aWV3ID0gZmFsc2U7CS8vIHNldCBpbiBvbkNyZWF0ZQ0KCWZ1bmN0
aW9uIEZ1bmNTdGFja0VudHJ5KCkNCgl7DQoJCXRoaXMubmFtZSA9ICIiOw0KCQl0aGlzLnJldFZh
bCA9IDA7DQoJCXRoaXMucGFyYW1zID0gW107DQoJfTsNCglmdW5jdGlvbiBwdXNoRnVuY1N0YWNr
KCkNCgl7DQoJCWZ1bmNTdGFja1B0cisrOw0KCQlpZiAoZnVuY1N0YWNrUHRyID09PSBmdW5jU3Rh
Y2subGVuZ3RoKQ0KCQkJZnVuY1N0YWNrLnB1c2gobmV3IEZ1bmNTdGFja0VudHJ5KCkpOw0KCQly
ZXR1cm4gZnVuY1N0YWNrW2Z1bmNTdGFja1B0cl07DQoJfTsNCglmdW5jdGlvbiBnZXRDdXJyZW50
RnVuY1N0YWNrKCkNCgl7DQoJCWlmIChmdW5jU3RhY2tQdHIgPCAwKQ0KCQkJcmV0dXJuIG51bGw7
DQoJCXJldHVybiBmdW5jU3RhY2tbZnVuY1N0YWNrUHRyXTsNCgl9Ow0KCWZ1bmN0aW9uIGdldE9u
ZUFib3ZlRnVuY1N0YWNrKCkNCgl7DQoJCWlmICghZnVuY1N0YWNrLmxlbmd0aCkNCgkJCXJldHVy
biBudWxsOw0KCQl2YXIgaSA9IGZ1bmNTdGFja1B0ciArIDE7DQoJCWlmIChpID49IGZ1bmNTdGFj
ay5sZW5ndGgpDQoJCQlpID0gZnVuY1N0YWNrLmxlbmd0aCAtIDE7DQoJCXJldHVybiBmdW5jU3Rh
Y2tbaV07DQoJfTsNCglmdW5jdGlvbiBwb3BGdW5jU3RhY2soKQ0KCXsNCjsNCgkJZnVuY1N0YWNr
UHRyLS07DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgkJ
aXNJblByZXZpZXcgPSAodHlwZW9mIGNyX2lzX3ByZXZpZXcgIT09ICJ1bmRlZmluZWQiKTsNCgkJ
dmFyIHNlbGYgPSB0aGlzOw0KCQl3aW5kb3dbImMyX2NhbGxGdW5jdGlvbiJdID0gZnVuY3Rpb24g
KG5hbWVfLCBwYXJhbXNfKQ0KCQl7DQoJCQl2YXIgaSwgbGVuLCB2Ow0KCQkJdmFyIGZzID0gcHVz
aEZ1bmNTdGFjaygpOw0KCQkJZnMubmFtZSA9IG5hbWVfLnRvTG93ZXJDYXNlKCk7DQoJCQlmcy5y
ZXRWYWwgPSAwOw0KCQkJaWYgKHBhcmFtc18pDQoJCQl7DQoJCQkJZnMucGFyYW1zLmxlbmd0aCA9
IHBhcmFtc18ubGVuZ3RoOw0KCQkJCWZvciAoaSA9IDAsIGxlbiA9IHBhcmFtc18ubGVuZ3RoOyBp
IDwgbGVuOyArK2kpDQoJCQkJew0KCQkJCQl2ID0gcGFyYW1zX1tpXTsNCgkJCQkJaWYgKHR5cGVv
ZiB2ID09PSAibnVtYmVyIiB8fCB0eXBlb2YgdiA9PT0gInN0cmluZyIpDQoJCQkJCQlmcy5wYXJh
bXNbaV0gPSB2Ow0KCQkJCQllbHNlIGlmICh0eXBlb2YgdiA9PT0gImJvb2xlYW4iKQ0KCQkJCQkJ
ZnMucGFyYW1zW2ldID0gKHYgPyAxIDogMCk7DQoJCQkJCWVsc2UNCgkJCQkJCWZzLnBhcmFtc1tp
XSA9IDA7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWNyLmNsZWFyQXJyYXkoZnMu
cGFyYW1zKTsNCgkJCX0NCgkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkZ1bmN0
aW9uLnByb3RvdHlwZS5jbmRzLk9uRnVuY3Rpb24sIHNlbGYsIGZzLm5hbWUpOw0KCQkJcG9wRnVu
Y1N0YWNrKCk7DQoJCQlyZXR1cm4gZnMucmV0VmFsOw0KCQl9Ow0KCX07DQoJZnVuY3Rpb24gQ25k
cygpIHt9Ow0KCUNuZHMucHJvdG90eXBlLk9uRnVuY3Rpb24gPSBmdW5jdGlvbiAobmFtZV8pDQoJ
ew0KCQl2YXIgZnMgPSBnZXRDdXJyZW50RnVuY1N0YWNrKCk7DQoJCWlmICghZnMpDQoJCQlyZXR1
cm4gZmFsc2U7DQoJCXJldHVybiBjci5lcXVhbHNfbm9jYXNlKG5hbWVfLCBmcy5uYW1lKTsNCgl9
Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVQYXJhbSA9IGZ1bmN0aW9uIChpbmRleF8sIGNtcF8s
IHZhbHVlXykNCgl7DQoJCXZhciBmcyA9IGdldEN1cnJlbnRGdW5jU3RhY2soKTsNCgkJaWYgKCFm
cykNCgkJCXJldHVybiBmYWxzZTsNCgkJaW5kZXhfID0gY3IuZmxvb3IoaW5kZXhfKTsNCgkJaWYg
KGluZGV4XyA8IDAgfHwgaW5kZXhfID49IGZzLnBhcmFtcy5sZW5ndGgpDQoJCQlyZXR1cm4gZmFs
c2U7DQoJCXJldHVybiBjci5kb19jbXAoZnMucGFyYW1zW2luZGV4X10sIGNtcF8sIHZhbHVlXyk7
DQoJfTsNCglwbHVnaW5Qcm90by5jbmRzID0gbmV3IENuZHMoKTsNCglmdW5jdGlvbiBBY3RzKCkg
e307DQoJQWN0cy5wcm90b3R5cGUuQ2FsbEZ1bmN0aW9uID0gZnVuY3Rpb24gKG5hbWVfLCBwYXJh
bXNfKQ0KCXsNCgkJdmFyIGZzID0gcHVzaEZ1bmNTdGFjaygpOw0KCQlmcy5uYW1lID0gbmFtZV8u
dG9Mb3dlckNhc2UoKTsNCgkJZnMucmV0VmFsID0gMDsNCgkJY3Iuc2hhbGxvd0Fzc2lnbkFycmF5
KGZzLnBhcmFtcywgcGFyYW1zXyk7DQoJCXZhciByYW4gPSB0aGlzLnJ1bnRpbWUudHJpZ2dlcihj
ci5wbHVnaW5zXy5GdW5jdGlvbi5wcm90b3R5cGUuY25kcy5PbkZ1bmN0aW9uLCB0aGlzLCBmcy5u
YW1lKTsNCgkJaWYgKGlzSW5QcmV2aWV3ICYmICFyYW4pDQoJCXsNCjsNCgkJfQ0KCQlwb3BGdW5j
U3RhY2soKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFJldHVyblZhbHVlID0gZnVuY3Rpb24g
KHZhbHVlXykNCgl7DQoJCXZhciBmcyA9IGdldEN1cnJlbnRGdW5jU3RhY2soKTsNCgkJaWYgKGZz
KQ0KCQkJZnMucmV0VmFsID0gdmFsdWVfOw0KCQllbHNlDQo7DQoJfTsNCglBY3RzLnByb3RvdHlw
ZS5DYWxsRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICh1bnVzZWQpDQoJew0KCX07DQoJcGx1Z2luUHJv
dG8uYWN0cyA9IG5ldyBBY3RzKCk7DQoJZnVuY3Rpb24gRXhwcygpIHt9Ow0KCUV4cHMucHJvdG90
eXBlLlJldHVyblZhbHVlID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXZhciBmcyA9IGdldE9uZUFi
b3ZlRnVuY1N0YWNrKCk7DQoJCWlmIChmcykNCgkJCXJldC5zZXRfYW55KGZzLnJldFZhbCk7DQoJ
CWVsc2UNCgkJCXJldC5zZXRfaW50KDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuUGFyYW1Db3Vu
dCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl2YXIgZnMgPSBnZXRDdXJyZW50RnVuY1N0YWNrKCk7
DQoJCWlmIChmcykNCgkJCXJldC5zZXRfaW50KGZzLnBhcmFtcy5sZW5ndGgpOw0KCQllbHNlDQoJ
CXsNCjsNCgkJCXJldC5zZXRfaW50KDApOw0KCQl9DQoJfTsNCglFeHBzLnByb3RvdHlwZS5QYXJh
bSA9IGZ1bmN0aW9uIChyZXQsIGluZGV4XykNCgl7DQoJCWluZGV4XyA9IGNyLmZsb29yKGluZGV4
Xyk7DQoJCXZhciBmcyA9IGdldEN1cnJlbnRGdW5jU3RhY2soKTsNCgkJaWYgKGZzKQ0KCQl7DQoJ
CQlpZiAoaW5kZXhfID49IDAgJiYgaW5kZXhfIDwgZnMucGFyYW1zLmxlbmd0aCkNCgkJCXsNCgkJ
CQlyZXQuc2V0X2FueShmcy5wYXJhbXNbaW5kZXhfXSk7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQo7
DQoJCQkJcmV0LnNldF9pbnQoMCk7DQoJCQl9DQoJCX0NCgkJZWxzZQ0KCQl7DQo7DQoJCQlyZXQu
c2V0X2ludCgwKTsNCgkJfQ0KCX07DQoJRXhwcy5wcm90b3R5cGUuQ2FsbCA9IGZ1bmN0aW9uIChy
ZXQsIG5hbWVfKQ0KCXsNCgkJdmFyIGZzID0gcHVzaEZ1bmNTdGFjaygpOw0KCQlmcy5uYW1lID0g
bmFtZV8udG9Mb3dlckNhc2UoKTsNCgkJZnMucmV0VmFsID0gMDsNCgkJY3IuY2xlYXJBcnJheShm
cy5wYXJhbXMpOw0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAyLCBsZW4gPSBhcmd1bWVudHMu
bGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQlmcy5wYXJhbXMucHVzaChhcmd1bWVudHNbaV0pOw0K
CQl2YXIgcmFuID0gdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uRnVuY3Rpb24ucHJv
dG90eXBlLmNuZHMuT25GdW5jdGlvbiwgdGhpcywgZnMubmFtZSk7DQoJCWlmIChpc0luUHJldmll
dyAmJiAhcmFuKQ0KCQl7DQo7DQoJCX0NCgkJcG9wRnVuY1N0YWNrKCk7DQoJCXJldC5zZXRfYW55
KGZzLnJldFZhbCk7DQoJfTsNCglwbHVnaW5Qcm90by5leHBzID0gbmV3IEV4cHMoKTsNCn0oKSk7
DQo7DQo7DQp2YXIgbG9jYWxGb3JhZ2VJbml0RmFpbGVkID0gZmFsc2U7DQp0cnkgew0KLyohDQog
ICAgbG9jYWxGb3JhZ2UgLS0gT2ZmbGluZSBTdG9yYWdlLCBJbXByb3ZlZA0KICAgIFZlcnNpb24g
MS40LjANCiAgICBodHRwczovL21vemlsbGEuZ2l0aHViLmlvL2xvY2FsRm9yYWdlDQogICAgKGMp
IDIwMTMtMjAxNSBNb3ppbGxhLCBBcGFjaGUgTGljZW5zZSAyLjANCiovDQohZnVuY3Rpb24oKXt2
YXIgYSxiLGMsZDshZnVuY3Rpb24oKXt2YXIgZT17fSxmPXt9O2E9ZnVuY3Rpb24oYSxiLGMpe2Vb
YV09e2RlcHM6YixjYWxsYmFjazpjfX0sZD1jPWI9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhiKXtp
ZigiLiIhPT1iLmNoYXJBdCgwKSlyZXR1cm4gYjtmb3IodmFyIGM9Yi5zcGxpdCgiLyIpLGQ9YS5z
cGxpdCgiLyIpLnNsaWNlKDAsLTEpLGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspe3ZhciBnPWNbZV07
aWYoIi4uIj09PWcpZC5wb3AoKTtlbHNle2lmKCIuIj09PWcpY29udGludWU7ZC5wdXNoKGcpfX1y
ZXR1cm4gZC5qb2luKCIvIil9aWYoZC5fZWFrX3NlZW49ZSxmW2FdKXJldHVybiBmW2FdO2lmKGZb
YV09e30sIWVbYV0pdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCBtb2R1bGUgIithKTtm
b3IodmFyIGcsaD1lW2FdLGk9aC5kZXBzLGo9aC5jYWxsYmFjayxrPVtdLGw9MCxtPWkubGVuZ3Ro
O20+bDtsKyspImV4cG9ydHMiPT09aVtsXT9rLnB1c2goZz17fSk6ay5wdXNoKGIoYyhpW2xdKSkp
O3ZhciBuPWouYXBwbHkodGhpcyxrKTtyZXR1cm4gZlthXT1nfHxufX0oKSxhKCJwcm9taXNlL2Fs
bCIsWyIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0
aW9uIGMoYSl7dmFyIGI9dGhpcztpZighZChhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVz
dCBwYXNzIGFuIGFycmF5IHRvIGFsbC4iKTtyZXR1cm4gbmV3IGIoZnVuY3Rpb24oYixjKXtmdW5j
dGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiKXtmKGEsYil9fWZ1bmN0aW9uIGYoYSxjKXtoW2Fd
PWMsMD09PS0taSYmYihoKX12YXIgZyxoPVtdLGk9YS5sZW5ndGg7MD09PWkmJmIoW10pO2Zvcih2
YXIgaj0wO2o8YS5sZW5ndGg7aisrKWc9YVtqXSxnJiZlKGcudGhlbik/Zy50aGVuKGQoaiksYyk6
ZihqLGcpfSl9dmFyIGQ9YS5pc0FycmF5LGU9YS5pc0Z1bmN0aW9uO2IuYWxsPWN9KSxhKCJwcm9t
aXNlL2FzYXAiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBi
KCl7cmV0dXJuIGZ1bmN0aW9uKCl7cHJvY2Vzcy5uZXh0VGljayhlKX19ZnVuY3Rpb24gYygpe3Zh
ciBhPTAsYj1uZXcgaShlKSxjPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtyZXR1cm4gYi5v
YnNlcnZlKGMse2NoYXJhY3RlckRhdGE6ITB9KSxmdW5jdGlvbigpe2MuZGF0YT1hPSsrYSUyfX1m
dW5jdGlvbiBkKCl7cmV0dXJuIGZ1bmN0aW9uKCl7ai5zZXRUaW1lb3V0KGUsMSl9fWZ1bmN0aW9u
IGUoKXtmb3IodmFyIGE9MDthPGsubGVuZ3RoO2ErKyl7dmFyIGI9a1thXSxjPWJbMF0sZD1iWzFd
O2MoZCl9az1bXX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9ay5wdXNoKFthLGJdKTsxPT09YyYmZygp
fXZhciBnLGg9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGk9aC5NdXRhdGlv
bk9ic2VydmVyfHxoLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaj0idW5kZWZpbmVkIiE9dHlwZW9m
IGdsb2JhbD9nbG9iYWw6dm9pZCAwPT09dGhpcz93aW5kb3c6dGhpcyxrPVtdO2c9InVuZGVmaW5l
ZCIhPXR5cGVvZiBwcm9jZXNzJiYiW29iamVjdCBwcm9jZXNzXSI9PT17fS50b1N0cmluZy5jYWxs
KHByb2Nlc3MpP2IoKTppP2MoKTpkKCksYS5hc2FwPWZ9KSxhKCJwcm9taXNlL2NvbmZpZyIsWyJl
eHBvcnRzIl0sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4g
MiE9PWFyZ3VtZW50cy5sZW5ndGg/Y1thXTp2b2lkKGNbYV09Yil9dmFyIGM9e2luc3RydW1lbnQ6
ITF9O2EuY29uZmlnPWMsYS5jb25maWd1cmU9Yn0pLGEoInByb21pc2UvcG9seWZpbGwiLFsiLi9w
cm9taXNlIiwiLi91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3Qi
O2Z1bmN0aW9uIGQoKXt2YXIgYTthPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoi
dW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmRvY3VtZW50P3dpbmRvdzpzZWxmO3Zh
ciBiPSJQcm9taXNlImluIGEmJiJyZXNvbHZlImluIGEuUHJvbWlzZSYmInJlamVjdCJpbiBhLlBy
b21pc2UmJiJhbGwiaW4gYS5Qcm9taXNlJiYicmFjZSJpbiBhLlByb21pc2UmJmZ1bmN0aW9uKCl7
dmFyIGI7cmV0dXJuIG5ldyBhLlByb21pc2UoZnVuY3Rpb24oYSl7Yj1hfSksZihiKX0oKTtifHwo
YS5Qcm9taXNlPWUpfXZhciBlPWEuUHJvbWlzZSxmPWIuaXNGdW5jdGlvbjtjLnBvbHlmaWxsPWR9
KSxhKCJwcm9taXNlL3Byb21pc2UiLFsiLi9jb25maWciLCIuL3V0aWxzIiwiLi9hbGwiLCIuL3Jh
Y2UiLCIuL3Jlc29sdmUiLCIuL3JlamVjdCIsIi4vYXNhcCIsImV4cG9ydHMiXSxmdW5jdGlvbihh
LGIsYyxkLGUsZixnLGgpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKGEpe2lmKCF2KGEpKXRocm93
IG5ldyBUeXBlRXJyb3IoIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUg
Zmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3IiKTtpZighKHRoaXMgaW5z
dGFuY2VvZiBpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9t
aXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVj
dG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt0aGlzLl9zdWJzY3JpYmVycz1b
XSxqKGEsdGhpcyl9ZnVuY3Rpb24gaihhLGIpe2Z1bmN0aW9uIGMoYSl7byhiLGEpfWZ1bmN0aW9u
IGQoYSl7cShiLGEpfXRyeXthKGMsZCl9Y2F0Y2goZSl7ZChlKX19ZnVuY3Rpb24gayhhLGIsYyxk
KXt2YXIgZSxmLGcsaCxpPXYoYyk7aWYoaSl0cnl7ZT1jKGQpLGc9ITB9Y2F0Y2goail7aD0hMCxm
PWp9ZWxzZSBlPWQsZz0hMDtuKGIsZSl8fChpJiZnP28oYixlKTpoP3EoYixmKTphPT09RD9vKGIs
ZSk6YT09PUUmJnEoYixlKSl9ZnVuY3Rpb24gbChhLGIsYyxkKXt2YXIgZT1hLl9zdWJzY3JpYmVy
cyxmPWUubGVuZ3RoO2VbZl09YixlW2YrRF09YyxlW2YrRV09ZH1mdW5jdGlvbiBtKGEsYil7Zm9y
KHZhciBjLGQsZT1hLl9zdWJzY3JpYmVycyxmPWEuX2RldGFpbCxnPTA7ZzxlLmxlbmd0aDtnKz0z
KWM9ZVtnXSxkPWVbZytiXSxrKGIsYyxkLGYpO2EuX3N1YnNjcmliZXJzPW51bGx9ZnVuY3Rpb24g
bihhLGIpe3ZhciBjLGQ9bnVsbDt0cnl7aWYoYT09PWIpdGhyb3cgbmV3IFR5cGVFcnJvcigiQSBw
cm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLiIpO2lmKHUo
YikmJihkPWIudGhlbix2KGQpKSlyZXR1cm4gZC5jYWxsKGIsZnVuY3Rpb24oZCl7cmV0dXJuIGM/
ITA6KGM9ITAsdm9pZChiIT09ZD9vKGEsZCk6cChhLGQpKSl9LGZ1bmN0aW9uKGIpe3JldHVybiBj
PyEwOihjPSEwLHZvaWQgcShhLGIpKX0pLCEwfWNhdGNoKGUpe3JldHVybiBjPyEwOihxKGEsZSks
ITApfXJldHVybiExfWZ1bmN0aW9uIG8oYSxiKXthPT09Yj9wKGEsYik6bihhLGIpfHxwKGEsYil9
ZnVuY3Rpb24gcChhLGIpe2EuX3N0YXRlPT09QiYmKGEuX3N0YXRlPUMsYS5fZGV0YWlsPWIsdC5h
c3luYyhyLGEpKX1mdW5jdGlvbiBxKGEsYil7YS5fc3RhdGU9PT1CJiYoYS5fc3RhdGU9QyxhLl9k
ZXRhaWw9Yix0LmFzeW5jKHMsYSkpfWZ1bmN0aW9uIHIoYSl7bShhLGEuX3N0YXRlPUQpfWZ1bmN0
aW9uIHMoYSl7bShhLGEuX3N0YXRlPUUpfXZhciB0PWEuY29uZmlnLHU9KGEuY29uZmlndXJlLGIu
b2JqZWN0T3JGdW5jdGlvbiksdj1iLmlzRnVuY3Rpb24sdz0oYi5ub3csYy5hbGwpLHg9ZC5yYWNl
LHk9ZS5yZXNvbHZlLHo9Zi5yZWplY3QsQT1nLmFzYXA7dC5hc3luYz1BO3ZhciBCPXZvaWQgMCxD
PTAsRD0xLEU9MjtpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aSxfc3RhdGU6dm9pZCAwLF9kZXRh
aWw6dm9pZCAwLF9zdWJzY3JpYmVyczp2b2lkIDAsdGhlbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRo
aXMsZD1uZXcgdGhpcy5jb25zdHJ1Y3RvcihmdW5jdGlvbigpe30pO2lmKHRoaXMuX3N0YXRlKXt2
YXIgZT1hcmd1bWVudHM7dC5hc3luYyhmdW5jdGlvbigpe2soYy5fc3RhdGUsZCxlW2MuX3N0YXRl
LTFdLGMuX2RldGFpbCl9KX1lbHNlIGwodGhpcyxkLGEsYik7cmV0dXJuIGR9LCJjYXRjaCI6ZnVu
Y3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfX0saS5hbGw9dyxpLnJhY2U9eCxpLnJl
c29sdmU9eSxpLnJlamVjdD16LGguUHJvbWlzZT1pfSksYSgicHJvbWlzZS9yYWNlIixbIi4vdXRp
bHMiLCJleHBvcnRzIl0sZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYyhhKXt2
YXIgYj10aGlzO2lmKCFkKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIllvdSBtdXN0IHBhc3MgYW4g
YXJyYXkgdG8gcmFjZS4iKTtyZXR1cm4gbmV3IGIoZnVuY3Rpb24oYixjKXtmb3IodmFyIGQsZT0w
O2U8YS5sZW5ndGg7ZSsrKWQ9YVtlXSxkJiYiZnVuY3Rpb24iPT10eXBlb2YgZC50aGVuP2QudGhl
bihiLGMpOmIoZCl9KX12YXIgZD1hLmlzQXJyYXk7Yi5yYWNlPWN9KSxhKCJwcm9taXNlL3JlamVj
dCIsWyJleHBvcnRzIl0sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFy
IGI9dGhpcztyZXR1cm4gbmV3IGIoZnVuY3Rpb24oYixjKXtjKGEpfSl9YS5yZWplY3Q9Yn0pLGEo
InByb21pc2UvcmVzb2x2ZSIsWyJleHBvcnRzIl0sZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1
bmN0aW9uIGIoYSl7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhJiZhLmNvbnN0cnVjdG9yPT09dGhp
cylyZXR1cm4gYTt2YXIgYj10aGlzO3JldHVybiBuZXcgYihmdW5jdGlvbihiKXtiKGEpfSl9YS5y
ZXNvbHZlPWJ9KSxhKCJwcm9taXNlL3V0aWxzIixbImV4cG9ydHMiXSxmdW5jdGlvbihhKXsidXNl
IHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYyhhKXx8Im9iamVjdCI9PXR5cGVvZiBhJiZu
dWxsIT09YX1mdW5jdGlvbiBjKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhfWZ1bmN0aW9u
IGQoYSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcu
Y2FsbChhKX12YXIgZT1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRp
bWUoKX07YS5vYmplY3RPckZ1bmN0aW9uPWIsYS5pc0Z1bmN0aW9uPWMsYS5pc0FycmF5PWQsYS5u
b3c9ZX0pLGIoInByb21pc2UvcG9seWZpbGwiKS5wb2x5ZmlsbCgpfSgpLGZ1bmN0aW9uKGEsYil7
Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUu
ZXhwb3J0cz1iKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUo
W10sYik6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMubG9jYWxmb3JhZ2U9YigpOmEu
bG9jYWxmb3JhZ2U9YigpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2Z1bmN0
aW9uIGIoZCl7aWYoY1tkXSlyZXR1cm4gY1tkXS5leHBvcnRzO3ZhciBlPWNbZF09e2V4cG9ydHM6
e30saWQ6ZCxsb2FkZWQ6ITF9O3JldHVybiBhW2RdLmNhbGwoZS5leHBvcnRzLGUsZS5leHBvcnRz
LGIpLGUubG9hZGVkPSEwLGUuZXhwb3J0c312YXIgYz17fTtyZXR1cm4gYi5tPWEsYi5jPWMsYi5w
PSIiLGIoMCl9KFtmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSxiKXtp
ZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNs
YXNzIGFzIGEgZnVuY3Rpb24iKX1iLl9fZXNNb2R1bGU9ITA7dmFyIGU9ZnVuY3Rpb24oYSl7ZnVu
Y3Rpb24gYihhLGIpe2FbYl09ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHM7cmV0dXJuIGEucmVh
ZHkoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGFbYl0uYXBwbHkoYSxjKX0pfX1mdW5jdGlvbiBl
KCl7Zm9yKHZhciBhPTE7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl7dmFyIGI9YXJndW1lbnRzW2Fd
O2lmKGIpZm9yKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmKG0oYltjXSk/YXJndW1l
bnRzWzBdW2NdPWJbY10uc2xpY2UoKTphcmd1bWVudHNbMF1bY109YltjXSl9cmV0dXJuIGFyZ3Vt
ZW50c1swXX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYiBpbiBoKWlmKGguaGFzT3duUHJvcGVydHko
YikmJmhbYl09PT1hKXJldHVybiEwO3JldHVybiExfXZhciBnPXt9LGg9e0lOREVYRUREQjoiYXN5
bmNTdG9yYWdlIixMT0NBTFNUT1JBR0U6ImxvY2FsU3RvcmFnZVdyYXBwZXIiLFdFQlNRTDoid2Vi
U1FMU3RvcmFnZSJ9LGk9W2guSU5ERVhFRERCLGguV0VCU1FMLGguTE9DQUxTVE9SQUdFXSxqPVsi
Y2xlYXIiLCJnZXRJdGVtIiwiaXRlcmF0ZSIsImtleSIsImtleXMiLCJsZW5ndGgiLCJyZW1vdmVJ
dGVtIiwic2V0SXRlbSJdLGs9e2Rlc2NyaXB0aW9uOiIiLGRyaXZlcjppLnNsaWNlKCksbmFtZToi
bG9jYWxmb3JhZ2UiLHNpemU6NDk4MDczNixzdG9yZU5hbWU6ImtleXZhbHVlcGFpcnMiLHZlcnNp
b246MX0sbD1mdW5jdGlvbihhKXt2YXIgYj17fTtyZXR1cm4gYltoLklOREVYRUREQl09ISFmdW5j
dGlvbigpe3RyeXt2YXIgYj1ifHxhLmluZGV4ZWREQnx8YS53ZWJraXRJbmRleGVkREJ8fGEubW96
SW5kZXhlZERCfHxhLk9JbmRleGVkREJ8fGEubXNJbmRleGVkREI7cmV0dXJuInVuZGVmaW5lZCIh
PXR5cGVvZiBhLm9wZW5EYXRhYmFzZSYmYS5uYXZpZ2F0b3ImJmEubmF2aWdhdG9yLnVzZXJBZ2Vu
dCYmL1NhZmFyaS8udGVzdChhLm5hdmlnYXRvci51c2VyQWdlbnQpJiYhL0Nocm9tZS8udGVzdChh
Lm5hdmlnYXRvci51c2VyQWdlbnQpPyExOmImJiJmdW5jdGlvbiI9PXR5cGVvZiBiLm9wZW4mJiJ1
bmRlZmluZWQiIT10eXBlb2YgYS5JREJLZXlSYW5nZX1jYXRjaChjKXtyZXR1cm4hMX19KCksYlto
LldFQlNRTF09ISFmdW5jdGlvbigpe3RyeXtyZXR1cm4gYS5vcGVuRGF0YWJhc2V9Y2F0Y2goYil7
cmV0dXJuITF9fSgpLGJbaC5MT0NBTFNUT1JBR0VdPSEhZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGEu
bG9jYWxTdG9yYWdlJiYic2V0SXRlbSJpbiBhLmxvY2FsU3RvcmFnZSYmYS5sb2NhbFN0b3JhZ2Uu
c2V0SXRlbX1jYXRjaChiKXtyZXR1cm4hMX19KCksYn0oYSksbT1BcnJheS5pc0FycmF5fHxmdW5j
dGlvbihhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmlu
Zy5jYWxsKGEpfSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtkKHRoaXMsYSksdGhpcy5JTkRF
WEVEREI9aC5JTkRFWEVEREIsdGhpcy5MT0NBTFNUT1JBR0U9aC5MT0NBTFNUT1JBR0UsdGhpcy5X
RUJTUUw9aC5XRUJTUUwsdGhpcy5fZGVmYXVsdENvbmZpZz1lKHt9LGspLHRoaXMuX2NvbmZpZz1l
KHt9LHRoaXMuX2RlZmF1bHRDb25maWcsYiksdGhpcy5fZHJpdmVyU2V0PW51bGwsdGhpcy5faW5p
dERyaXZlcj1udWxsLHRoaXMuX3JlYWR5PSExLHRoaXMuX2RiSW5mbz1udWxsLHRoaXMuX3dyYXBM
aWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpLHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2
ZXIpfXJldHVybiBhLnByb3RvdHlwZS5jb25maWc9ZnVuY3Rpb24oYSl7aWYoIm9iamVjdCI9PXR5
cGVvZiBhKXtpZih0aGlzLl9yZWFkeSlyZXR1cm4gbmV3IEVycm9yKCJDYW4ndCBjYWxsIGNvbmZp
ZygpIGFmdGVyIGxvY2FsZm9yYWdlIGhhcyBiZWVuIHVzZWQuIik7Zm9yKHZhciBiIGluIGEpInN0
b3JlTmFtZSI9PT1iJiYoYVtiXT1hW2JdLnJlcGxhY2UoL1xXL2csIl8iKSksdGhpcy5fY29uZmln
W2JdPWFbYl07cmV0dXJuImRyaXZlciJpbiBhJiZhLmRyaXZlciYmdGhpcy5zZXREcml2ZXIodGhp
cy5fY29uZmlnLmRyaXZlciksITB9cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhP3RoaXMuX2NvbmZp
Z1thXTp0aGlzLl9jb25maWd9LGEucHJvdG90eXBlLmRlZmluZURyaXZlcj1mdW5jdGlvbihhLGIs
Yyl7dmFyIGQ9bmV3IFByb21pc2UoZnVuY3Rpb24oYixjKXt0cnl7dmFyIGQ9YS5fZHJpdmVyLGU9
bmV3IEVycm9yKCJDdXN0b20gZHJpdmVyIG5vdCBjb21wbGlhbnQ7IHNlZSBodHRwczovL21vemls
bGEuZ2l0aHViLmlvL2xvY2FsRm9yYWdlLyNkZWZpbmVkcml2ZXIiKSxoPW5ldyBFcnJvcigiQ3Vz
dG9tIGRyaXZlciBuYW1lIGFscmVhZHkgaW4gdXNlOiAiK2EuX2RyaXZlcik7aWYoIWEuX2RyaXZl
cilyZXR1cm4gdm9pZCBjKGUpO2lmKGYoYS5fZHJpdmVyKSlyZXR1cm4gdm9pZCBjKGgpO2Zvcih2
YXIgaT1qLmNvbmNhdCgiX2luaXRTdG9yYWdlIiksaz0wO2s8aS5sZW5ndGg7aysrKXt2YXIgbT1p
W2tdO2lmKCFtfHwhYVttXXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGFbbV0pcmV0dXJuIHZvaWQgYyhl
KX12YXIgbj1Qcm9taXNlLnJlc29sdmUoITApOyJfc3VwcG9ydCJpbiBhJiYobj1hLl9zdXBwb3J0
JiYiZnVuY3Rpb24iPT10eXBlb2YgYS5fc3VwcG9ydD9hLl9zdXBwb3J0KCk6UHJvbWlzZS5yZXNv
bHZlKCEhYS5fc3VwcG9ydCkpLG4udGhlbihmdW5jdGlvbihjKXtsW2RdPWMsZ1tkXT1hLGIoKX0s
Yyl9Y2F0Y2gobyl7YyhvKX19KTtyZXR1cm4gZC50aGVuKGIsYyksZH0sYS5wcm90b3R5cGUuZHJp
dmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyaXZlcnx8bnVsbH0sYS5wcm90b3R5cGUuZ2V0
RHJpdmVyPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT10aGlzLGg9ZnVuY3Rpb24oKXtpZihmKGEpKXN3
aXRjaChhKXtjYXNlIGUuSU5ERVhFRERCOnJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhLGIp
e2EoYygxKSl9KTtjYXNlIGUuTE9DQUxTVE9SQUdFOnJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlv
bihhLGIpe2EoYygyKSl9KTtjYXNlIGUuV0VCU1FMOnJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlv
bihhLGIpe2EoYyg0KSl9KX1lbHNlIGlmKGdbYV0pcmV0dXJuIFByb21pc2UucmVzb2x2ZShnW2Fd
KTtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJEcml2ZXIgbm90IGZvdW5kLiIpKX0o
KTtyZXR1cm4gaC50aGVuKGIsZCksaH0sYS5wcm90b3R5cGUuZ2V0U2VyaWFsaXplcj1mdW5jdGlv
bihhKXt2YXIgYj1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe2EoYygzKSl9KTtyZXR1cm4gYSYm
ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmIudGhlbihmdW5jdGlvbihiKXthKGIpfSksYn0sYS5wcm90
b3R5cGUucmVhZHk9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuX2RyaXZlclNldC50aGVuKGZ1
bmN0aW9uKCl7cmV0dXJuIG51bGw9PT1iLl9yZWFkeSYmKGIuX3JlYWR5PWIuX2luaXREcml2ZXIo
KSksYi5fcmVhZHl9KTtyZXR1cm4gYy50aGVuKGEsYSksY30sYS5wcm90b3R5cGUuc2V0RHJpdmVy
PWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7Zi5fY29uZmlnLmRyaXZlcj1mLmRyaXZlcigp
fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2Zvcig7YzxhLmxl
bmd0aDspe3ZhciBlPWFbY107cmV0dXJuIGMrKyxmLl9kYkluZm89bnVsbCxmLl9yZWFkeT1udWxs
LGYuZ2V0RHJpdmVyKGUpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGYuX2V4dGVuZChhKSxkKCks
Zi5fcmVhZHk9Zi5faW5pdFN0b3JhZ2UoZi5fY29uZmlnKSxmLl9yZWFkeX0pWyJjYXRjaCJdKGIp
fWQoKTt2YXIgZz1uZXcgRXJyb3IoIk5vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC4i
KTtyZXR1cm4gZi5fZHJpdmVyU2V0PVByb21pc2UucmVqZWN0KGcpLGYuX2RyaXZlclNldH12YXIg
Yz0wO3JldHVybiBiKCl9fXZhciBmPXRoaXM7bShhKXx8KGE9W2FdKTt2YXIgZz10aGlzLl9nZXRT
dXBwb3J0ZWREcml2ZXJzKGEpLGg9bnVsbCE9PXRoaXMuX2RyaXZlclNldD90aGlzLl9kcml2ZXJT
ZXRbImNhdGNoIl0oZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9KTpQcm9taXNl
LnJlc29sdmUoKTtyZXR1cm4gdGhpcy5fZHJpdmVyU2V0PWgudGhlbihmdW5jdGlvbigpe3ZhciBh
PWdbMF07cmV0dXJuIGYuX2RiSW5mbz1udWxsLGYuX3JlYWR5PW51bGwsZi5nZXREcml2ZXIoYSku
dGhlbihmdW5jdGlvbihhKXtmLl9kcml2ZXI9YS5fZHJpdmVyLGQoKSxmLl93cmFwTGlicmFyeU1l
dGhvZHNXaXRoUmVhZHkoKSxmLl9pbml0RHJpdmVyPWUoZyl9KX0pWyJjYXRjaCJdKGZ1bmN0aW9u
KCl7ZCgpO3ZhciBhPW5ldyBFcnJvcigiTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5k
LiIpO3JldHVybiBmLl9kcml2ZXJTZXQ9UHJvbWlzZS5yZWplY3QoYSksZi5fZHJpdmVyU2V0fSks
dGhpcy5fZHJpdmVyU2V0LnRoZW4oYixjKSx0aGlzLl9kcml2ZXJTZXR9LGEucHJvdG90eXBlLnN1
cHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiEhbFthXX0sYS5wcm90b3R5cGUuX2V4dGVuZD1mdW5j
dGlvbihhKXtlKHRoaXMsYSl9LGEucHJvdG90eXBlLl9nZXRTdXBwb3J0ZWREcml2ZXJzPWZ1bmN0
aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO3Ro
aXMuc3VwcG9ydHMoZSkmJmIucHVzaChlKX1yZXR1cm4gYn0sYS5wcm90b3R5cGUuX3dyYXBMaWJy
YXJ5TWV0aG9kc1dpdGhSZWFkeT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8ai5sZW5ndGg7YSsr
KWIodGhpcyxqW2FdKX0sYS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2U9ZnVuY3Rpb24oYil7cmV0
dXJuIG5ldyBhKGIpfSxhfSgpO3JldHVybiBuZXcgbn0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5k
b3c/d2luZG93OnNlbGYpO2JbImRlZmF1bHQiXT1lLGEuZXhwb3J0cz1iWyJkZWZhdWx0Il19LGZ1
bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2IuX19lc01vZHVsZT0hMDt2YXIgYz1mdW5jdGlvbihh
KXtmdW5jdGlvbiBiKGIsYyl7Yj1ifHxbXSxjPWN8fHt9O3RyeXtyZXR1cm4gbmV3IEJsb2IoYixj
KX1jYXRjaChkKXtpZigiVHlwZUVycm9yIiE9PWQubmFtZSl0aHJvdyBkO2Zvcih2YXIgZT1hLkJs
b2JCdWlsZGVyfHxhLk1TQmxvYkJ1aWxkZXJ8fGEuTW96QmxvYkJ1aWxkZXJ8fGEuV2ViS2l0Qmxv
YkJ1aWxkZXIsZj1uZXcgZSxnPTA7ZzxiLmxlbmd0aDtnKz0xKWYuYXBwZW5kKGJbZ10pO3JldHVy
biBmLmdldEJsb2IoYy50eXBlKX19ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1u
ZXcgQXJyYXlCdWZmZXIoYiksZD1uZXcgVWludDhBcnJheShjKSxlPTA7Yj5lO2UrKylkW2VdPWEu
Y2hhckNvZGVBdChlKTtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBuZXcgUHJvbWlzZShm
dW5jdGlvbihiLGMpe3ZhciBkPW5ldyBYTUxIdHRwUmVxdWVzdDtkLm9wZW4oIkdFVCIsYSksZC53
aXRoQ3JlZGVudGlhbHM9ITAsZC5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixkLm9ucmVhZHlz
dGF0ZWNoYW5nZT1mdW5jdGlvbigpe3JldHVybiA0PT09ZC5yZWFkeVN0YXRlPzIwMD09PWQuc3Rh
dHVzP2Ioe3Jlc3BvbnNlOmQucmVzcG9uc2UsdHlwZTpkLmdldFJlc3BvbnNlSGVhZGVyKCJDb250
ZW50LVR5cGUiKX0pOnZvaWQgYyh7c3RhdHVzOmQuc3RhdHVzLHJlc3BvbnNlOmQucmVzcG9uc2V9
KTp2b2lkIDB9LGQuc2VuZCgpfSl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gbmV3IFByb21pc2UoZnVu
Y3Rpb24oYyxlKXt2YXIgZj1iKFsiIl0se3R5cGU6ImltYWdlL3BuZyJ9KSxnPWEudHJhbnNhY3Rp
b24oW0RdLCJyZWFkd3JpdGUiKTtnLm9iamVjdFN0b3JlKEQpLnB1dChmLCJrZXkiKSxnLm9uY29t
cGxldGU9ZnVuY3Rpb24oKXt2YXIgYj1hLnRyYW5zYWN0aW9uKFtEXSwicmVhZHdyaXRlIiksZj1i
Lm9iamVjdFN0b3JlKEQpLmdldCgia2V5Iik7Zi5vbmVycm9yPWUsZi5vbnN1Y2Nlc3M9ZnVuY3Rp
b24oYSl7dmFyIGI9YS50YXJnZXQucmVzdWx0LGU9VVJMLmNyZWF0ZU9iamVjdFVSTChiKTtkKGUp
LnRoZW4oZnVuY3Rpb24oYSl7YyghKCFhfHwiaW1hZ2UvcG5nIiE9PWEudHlwZSkpfSxmdW5jdGlv
bigpe2MoITEpfSkudGhlbihmdW5jdGlvbigpe1VSTC5yZXZva2VPYmplY3RVUkwoZSl9KX19LGcu
b25lcnJvcj1nLm9uYWJvcnQ9ZX0pWyJjYXRjaCJdKGZ1bmN0aW9uKCl7cmV0dXJuITF9KX1mdW5j
dGlvbiBmKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIEI/UHJvbWlzZS5yZXNvbHZlKEIpOmUo
YSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gQj1hfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbmV3
IFByb21pc2UoZnVuY3Rpb24oYixjKXt2YXIgZD1uZXcgRmlsZVJlYWRlcjtkLm9uZXJyb3I9Yyxk
Lm9ubG9hZGVuZD1mdW5jdGlvbihjKXt2YXIgZD1idG9hKGMudGFyZ2V0LnJlc3VsdHx8IiIpO2Io
e19fbG9jYWxfZm9yYWdlX2VuY29kZWRfYmxvYjohMCxkYXRhOmQsdHlwZTphLnR5cGV9KX0sZC5y
ZWFkQXNCaW5hcnlTdHJpbmcoYSl9KX1mdW5jdGlvbiBoKGEpe3ZhciBkPWMoYXRvYihhLmRhdGEp
KTtyZXR1cm4gYihbZF0se3R5cGU6YS50eXBlfSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYSYmYS5f
X2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2J9ZnVuY3Rpb24gaihhKXt2YXIgYj10aGlzLGM9Yi5f
aW5pdFJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBhPUNbYi5fZGJJbmZvLm5hbWVdO3JldHVy
biBhJiZhLmRiUmVhZHk/YS5kYlJlYWR5OnZvaWQgMH0pO3JldHVybiBjLnRoZW4oYSxhKSxjfWZ1
bmN0aW9uIGsoYSl7dmFyIGI9Q1thLm5hbWVdLGM9e307Yy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1
bmN0aW9uKGEpe2MucmVzb2x2ZT1hfSksYi5kZWZlcnJlZE9wZXJhdGlvbnMucHVzaChjKSxiLmRi
UmVhZHk/Yi5kYlJlYWR5PWIuZGJSZWFkeS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGMucHJvbWlz
ZX0pOmIuZGJSZWFkeT1jLnByb21pc2V9ZnVuY3Rpb24gbChhKXt2YXIgYj1DW2EubmFtZV0sYz1i
LmRlZmVycmVkT3BlcmF0aW9ucy5wb3AoKTtjJiZjLnJlc29sdmUoKX1mdW5jdGlvbiBtKGEpe2Z1
bmN0aW9uIGIoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9dmFyIGM9dGhpcyxkPXtkYjpudWxs
fTtpZihhKWZvcih2YXIgZSBpbiBhKWRbZV09YVtlXTtDfHwoQz17fSk7dmFyIGY9Q1tkLm5hbWVd
O2Z8fChmPXtmb3JhZ2VzOltdLGRiOm51bGwsZGJSZWFkeTpudWxsLGRlZmVycmVkT3BlcmF0aW9u
czpbXX0sQ1tkLm5hbWVdPWYpLGYuZm9yYWdlcy5wdXNoKGMpLGMuX2luaXRSZWFkeXx8KGMuX2lu
aXRSZWFkeT1jLnJlYWR5LGMucmVhZHk9aik7Zm9yKHZhciBnPVtdLGg9MDtoPGYuZm9yYWdlcy5s
ZW5ndGg7aCsrKXt2YXIgaT1mLmZvcmFnZXNbaF07aSE9PWMmJmcucHVzaChpLl9pbml0UmVhZHko
KVsiY2F0Y2giXShiKSl9dmFyIGs9Zi5mb3JhZ2VzLnNsaWNlKDApO3JldHVybiBQcm9taXNlLmFs
bChnKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGQuZGI9Zi5kYixuKGQpfSkudGhlbihmdW5jdGlv
bihhKXtyZXR1cm4gZC5kYj1hLHEoZCxjLl9kZWZhdWx0Q29uZmlnLnZlcnNpb24pP28oZCk6YX0p
LnRoZW4oZnVuY3Rpb24oYSl7ZC5kYj1mLmRiPWEsYy5fZGJJbmZvPWQ7Zm9yKHZhciBiPTA7Yjxr
Lmxlbmd0aDtiKyspe3ZhciBlPWtbYl07ZSE9PWMmJihlLl9kYkluZm8uZGI9ZC5kYixlLl9kYklu
Zm8udmVyc2lvbj1kLnZlcnNpb24pfX0pfWZ1bmN0aW9uIG4oYSl7cmV0dXJuIHAoYSwhMSl9ZnVu
Y3Rpb24gbyhhKXtyZXR1cm4gcChhLCEwKX1mdW5jdGlvbiBwKGIsYyl7cmV0dXJuIG5ldyBQcm9t
aXNlKGZ1bmN0aW9uKGQsZSl7aWYoYi5kYil7aWYoIWMpcmV0dXJuIGQoYi5kYik7ayhiKSxiLmRi
LmNsb3NlKCl9dmFyIGY9W2IubmFtZV07YyYmZi5wdXNoKGIudmVyc2lvbik7dmFyIGc9QS5vcGVu
LmFwcGx5KEEsZik7YyYmKGcub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKGMpe3ZhciBkPWcucmVz
dWx0O3RyeXtkLmNyZWF0ZU9iamVjdFN0b3JlKGIuc3RvcmVOYW1lKSxjLm9sZFZlcnNpb248PTEm
JmQuY3JlYXRlT2JqZWN0U3RvcmUoRCl9Y2F0Y2goZSl7aWYoIkNvbnN0cmFpbnRFcnJvciIhPT1l
Lm5hbWUpdGhyb3cgZTthLmNvbnNvbGUud2FybignVGhlIGRhdGFiYXNlICInK2IubmFtZSsnIiBo
YXMgYmVlbiB1cGdyYWRlZCBmcm9tIHZlcnNpb24gJytjLm9sZFZlcnNpb24rIiB0byB2ZXJzaW9u
ICIrYy5uZXdWZXJzaW9uKycsIGJ1dCB0aGUgc3RvcmFnZSAiJytiLnN0b3JlTmFtZSsnIiBhbHJl
YWR5IGV4aXN0cy4nKX19KSxnLm9uZXJyb3I9ZnVuY3Rpb24oKXtlKGcuZXJyb3IpfSxnLm9uc3Vj
Y2Vzcz1mdW5jdGlvbigpe2QoZy5yZXN1bHQpLGwoYil9fSl9ZnVuY3Rpb24gcShiLGMpe2lmKCFi
LmRiKXJldHVybiEwO3ZhciBkPSFiLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoYi5zdG9y
ZU5hbWUpLGU9Yi52ZXJzaW9uPGIuZGIudmVyc2lvbixmPWIudmVyc2lvbj5iLmRiLnZlcnNpb247
aWYoZSYmKGIudmVyc2lvbiE9PWMmJmEuY29uc29sZS53YXJuKCdUaGUgZGF0YWJhc2UgIicrYi5u
YW1lKyJcIiBjYW4ndCBiZSBkb3duZ3JhZGVkIGZyb20gdmVyc2lvbiAiK2IuZGIudmVyc2lvbisi
IHRvIHZlcnNpb24gIitiLnZlcnNpb24rIi4iKSxiLnZlcnNpb249Yi5kYi52ZXJzaW9uKSxmfHxk
KXtpZihkKXt2YXIgZz1iLmRiLnZlcnNpb24rMTtnPmIudmVyc2lvbiYmKGIudmVyc2lvbj1nKX1y
ZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiByKGIsYyl7dmFyIGQ9dGhpczsic3RyaW5nIiE9dHlw
ZW9mIGImJihhLmNvbnNvbGUud2FybihiKyIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBh
IHN0cmluZy4iKSxiPVN0cmluZyhiKSk7dmFyIGU9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxjKXtk
LnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWQuX2RiSW5mbyxmPWUuZGIudHJhbnNhY3Rp
b24oZS5zdG9yZU5hbWUsInJlYWRvbmx5Iikub2JqZWN0U3RvcmUoZS5zdG9yZU5hbWUpLGc9Zi5n
ZXQoYik7Zy5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYj1nLnJlc3VsdDt2b2lkIDA9PT1iJiYo
Yj1udWxsKSxpKGIpJiYoYj1oKGIpKSxhKGIpfSxnLm9uZXJyb3I9ZnVuY3Rpb24oKXtjKGcuZXJy
b3IpfX0pWyJjYXRjaCJdKGMpfSk7cmV0dXJuIHooZSxjKSxlfWZ1bmN0aW9uIHMoYSxiKXt2YXIg
Yz10aGlzLGQ9bmV3IFByb21pc2UoZnVuY3Rpb24oYixkKXtjLnJlYWR5KCkudGhlbihmdW5jdGlv
bigpe3ZhciBlPWMuX2RiSW5mbyxmPWUuZGIudHJhbnNhY3Rpb24oZS5zdG9yZU5hbWUsInJlYWRv
bmx5Iikub2JqZWN0U3RvcmUoZS5zdG9yZU5hbWUpLGc9Zi5vcGVuQ3Vyc29yKCksaj0xO2cub25z
dWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGM9Zy5yZXN1bHQ7aWYoYyl7dmFyIGQ9Yy52YWx1ZTtpKGQp
JiYoZD1oKGQpKTt2YXIgZT1hKGQsYy5rZXksaisrKTt2b2lkIDAhPT1lP2IoZSk6Y1siY29udGlu
dWUiXSgpfWVsc2UgYigpfSxnLm9uZXJyb3I9ZnVuY3Rpb24oKXtkKGcuZXJyb3IpfX0pWyJjYXRj
aCJdKGQpfSk7cmV0dXJuIHooZCxiKSxkfWZ1bmN0aW9uIHQoYixjLGQpe3ZhciBlPXRoaXM7InN0
cmluZyIhPXR5cGVvZiBiJiYoYS5jb25zb2xlLndhcm4oYisiIHVzZWQgYXMgYSBrZXksIGJ1dCBp
dCBpcyBub3QgYSBzdHJpbmcuIiksYj1TdHJpbmcoYikpO3ZhciBoPW5ldyBQcm9taXNlKGZ1bmN0
aW9uKGEsZCl7dmFyIGg7ZS5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaD1lLl9kYklu
Zm8sYyBpbnN0YW5jZW9mIEJsb2I/ZihoLmRiKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhP2M6
ZyhjKX0pOmN9KS50aGVuKGZ1bmN0aW9uKGMpe3ZhciBlPWguZGIudHJhbnNhY3Rpb24oaC5zdG9y
ZU5hbWUsInJlYWR3cml0ZSIpLGY9ZS5vYmplY3RTdG9yZShoLnN0b3JlTmFtZSk7bnVsbD09PWMm
JihjPXZvaWQgMCksZS5vbmNvbXBsZXRlPWZ1bmN0aW9uKCl7dm9pZCAwPT09YyYmKGM9bnVsbCks
YShjKX0sZS5vbmFib3J0PWUub25lcnJvcj1mdW5jdGlvbigpe3ZhciBhPWcuZXJyb3I/Zy5lcnJv
cjpnLnRyYW5zYWN0aW9uLmVycm9yO2QoYSl9O3ZhciBnPWYucHV0KGMsYil9KVsiY2F0Y2giXShk
KX0pO3JldHVybiB6KGgsZCksaH1mdW5jdGlvbiB1KGIsYyl7dmFyIGQ9dGhpczsic3RyaW5nIiE9
dHlwZW9mIGImJihhLmNvbnNvbGUud2FybihiKyIgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5v
dCBhIHN0cmluZy4iKSxiPVN0cmluZyhiKSk7dmFyIGU9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxj
KXtkLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWQuX2RiSW5mbyxmPWUuZGIudHJhbnNh
Y3Rpb24oZS5zdG9yZU5hbWUsInJlYWR3cml0ZSIpLGc9Zi5vYmplY3RTdG9yZShlLnN0b3JlTmFt
ZSksaD1nWyJkZWxldGUiXShiKTtmLm9uY29tcGxldGU9ZnVuY3Rpb24oKXthKCl9LGYub25lcnJv
cj1mdW5jdGlvbigpe2MoaC5lcnJvcil9LGYub25hYm9ydD1mdW5jdGlvbigpe3ZhciBhPWguZXJy
b3I/aC5lcnJvcjpoLnRyYW5zYWN0aW9uLmVycm9yO2MoYSl9fSlbImNhdGNoIl0oYyl9KTtyZXR1
cm4geihlLGMpLGV9ZnVuY3Rpb24gdihhKXt2YXIgYj10aGlzLGM9bmV3IFByb21pc2UoZnVuY3Rp
b24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBkPWIuX2RiSW5mbyxlPWQuZGIu
dHJhbnNhY3Rpb24oZC5zdG9yZU5hbWUsInJlYWR3cml0ZSIpLGY9ZS5vYmplY3RTdG9yZShkLnN0
b3JlTmFtZSksZz1mLmNsZWFyKCk7ZS5vbmNvbXBsZXRlPWZ1bmN0aW9uKCl7YSgpfSxlLm9uYWJv
cnQ9ZS5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9Zy5lcnJvcj9nLmVycm9yOmcudHJhbnNhY3Rp
b24uZXJyb3I7YyhhKX19KVsiY2F0Y2giXShjKX0pO3JldHVybiB6KGMsYSksY31mdW5jdGlvbiB3
KGEpe3ZhciBiPXRoaXMsYz1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGMpe2IucmVhZHkoKS50aGVu
KGZ1bmN0aW9uKCl7dmFyIGQ9Yi5fZGJJbmZvLGU9ZC5kYi50cmFuc2FjdGlvbihkLnN0b3JlTmFt
ZSwicmVhZG9ubHkiKS5vYmplY3RTdG9yZShkLnN0b3JlTmFtZSksZj1lLmNvdW50KCk7Zi5vbnN1
Y2Nlc3M9ZnVuY3Rpb24oKXthKGYucmVzdWx0KX0sZi5vbmVycm9yPWZ1bmN0aW9uKCl7YyhmLmVy
cm9yKX19KVsiY2F0Y2giXShjKX0pO3JldHVybiB6KGMsYSksY31mdW5jdGlvbiB4KGEsYil7dmFy
IGM9dGhpcyxkPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGIsZCl7cmV0dXJuIDA+YT92b2lkIGIobnVs
bCk6dm9pZCBjLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBlPWMuX2RiSW5mbyxmPWUuZGIu
dHJhbnNhY3Rpb24oZS5zdG9yZU5hbWUsInJlYWRvbmx5Iikub2JqZWN0U3RvcmUoZS5zdG9yZU5h
bWUpLGc9ITEsaD1mLm9wZW5DdXJzb3IoKTtoLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciBjPWgu
cmVzdWx0O3JldHVybiBjP3ZvaWQoMD09PWE/YihjLmtleSk6Zz9iKGMua2V5KTooZz0hMCxjLmFk
dmFuY2UoYSkpKTp2b2lkIGIobnVsbCl9LGgub25lcnJvcj1mdW5jdGlvbigpe2QoaC5lcnJvcil9
fSlbImNhdGNoIl0oZCl9KTtyZXR1cm4geihkLGIpLGR9ZnVuY3Rpb24geShhKXt2YXIgYj10aGlz
LGM9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlvbigpe3Zh
ciBkPWIuX2RiSW5mbyxlPWQuZGIudHJhbnNhY3Rpb24oZC5zdG9yZU5hbWUsInJlYWRvbmx5Iiku
b2JqZWN0U3RvcmUoZC5zdG9yZU5hbWUpLGY9ZS5vcGVuQ3Vyc29yKCksZz1bXTtmLm9uc3VjY2Vz
cz1mdW5jdGlvbigpe3ZhciBiPWYucmVzdWx0O3JldHVybiBiPyhnLnB1c2goYi5rZXkpLHZvaWQg
YlsiY29udGludWUiXSgpKTp2b2lkIGEoZyl9LGYub25lcnJvcj1mdW5jdGlvbigpe2MoZi5lcnJv
cil9fSlbImNhdGNoIl0oYyl9KTtyZXR1cm4geihjLGEpLGN9ZnVuY3Rpb24geihhLGIpe2ImJmEu
dGhlbihmdW5jdGlvbihhKXtiKG51bGwsYSl9LGZ1bmN0aW9uKGEpe2IoYSl9KX12YXIgQT1BfHxh
LmluZGV4ZWREQnx8YS53ZWJraXRJbmRleGVkREJ8fGEubW96SW5kZXhlZERCfHxhLk9JbmRleGVk
REJ8fGEubXNJbmRleGVkREI7aWYoQSl7dmFyIEIsQyxEPSJsb2NhbC1mb3JhZ2UtZGV0ZWN0LWJs
b2Itc3VwcG9ydCIsRT17X2RyaXZlcjoiYXN5bmNTdG9yYWdlIixfaW5pdFN0b3JhZ2U6bSxpdGVy
YXRlOnMsZ2V0SXRlbTpyLHNldEl0ZW06dCxyZW1vdmVJdGVtOnUsY2xlYXI6dixsZW5ndGg6dyxr
ZXk6eCxrZXlzOnl9O3JldHVybiBFfX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93
OnNlbGYpO2JbImRlZmF1bHQiXT1jLGEuZXhwb3J0cz1iWyJkZWZhdWx0Il19LGZ1bmN0aW9uKGEs
YixjKXsidXNlIHN0cmljdCI7Yi5fX2VzTW9kdWxlPSEwO3ZhciBkPWZ1bmN0aW9uKGEpe2Z1bmN0
aW9uIGIoYSl7dmFyIGI9dGhpcyxkPXt9O2lmKGEpZm9yKHZhciBlIGluIGEpZFtlXT1hW2VdO3Jl
dHVybiBkLmtleVByZWZpeD1kLm5hbWUrIi8iLGQuc3RvcmVOYW1lIT09Yi5fZGVmYXVsdENvbmZp
Zy5zdG9yZU5hbWUmJihkLmtleVByZWZpeCs9ZC5zdG9yZU5hbWUrIi8iKSxiLl9kYkluZm89ZCxu
ZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe2EoYygzKSl9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVy
biBkLnNlcmlhbGl6ZXI9YSxQcm9taXNlLnJlc29sdmUoKX0pfWZ1bmN0aW9uIGQoYSl7dmFyIGI9
dGhpcyxjPWIucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWIuX2RiSW5mby5rZXlQ
cmVmaXgsYz1tLmxlbmd0aC0xO2M+PTA7Yy0tKXt2YXIgZD1tLmtleShjKTswPT09ZC5pbmRleE9m
KGEpJiZtLnJlbW92ZUl0ZW0oZCl9fSk7cmV0dXJuIGwoYyxhKSxjfWZ1bmN0aW9uIGUoYixjKXt2
YXIgZD10aGlzOyJzdHJpbmciIT10eXBlb2YgYiYmKGEuY29uc29sZS53YXJuKGIrIiB1c2VkIGFz
IGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLiIpLGI9U3RyaW5nKGIpKTt2YXIgZT1kLnJl
YWR5KCkudGhlbihmdW5jdGlvbigpe3ZhciBhPWQuX2RiSW5mbyxjPW0uZ2V0SXRlbShhLmtleVBy
ZWZpeCtiKTtyZXR1cm4gYyYmKGM9YS5zZXJpYWxpemVyLmRlc2VyaWFsaXplKGMpKSxjfSk7cmV0
dXJuIGwoZSxjKSxlfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz10aGlzLGQ9Yy5yZWFkeSgpLnRoZW4o
ZnVuY3Rpb24oKXtmb3IodmFyIGI9Yy5fZGJJbmZvLGQ9Yi5rZXlQcmVmaXgsZT1kLmxlbmd0aCxm
PW0ubGVuZ3RoLGc9MSxoPTA7Zj5oO2grKyl7dmFyIGk9bS5rZXkoaCk7aWYoMD09PWkuaW5kZXhP
ZihkKSl7dmFyIGo9bS5nZXRJdGVtKGkpO2lmKGomJihqPWIuc2VyaWFsaXplci5kZXNlcmlhbGl6
ZShqKSksaj1hKGosaS5zdWJzdHJpbmcoZSksZysrKSx2b2lkIDAhPT1qKXJldHVybiBqfX19KTty
ZXR1cm4gbChkLGIpLGR9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPXRoaXMsZD1jLnJlYWR5KCkudGhl
bihmdW5jdGlvbigpe3ZhciBiLGQ9Yy5fZGJJbmZvO3RyeXtiPW0ua2V5KGEpfWNhdGNoKGUpe2I9
bnVsbH1yZXR1cm4gYiYmKGI9Yi5zdWJzdHJpbmcoZC5rZXlQcmVmaXgubGVuZ3RoKSksYn0pO3Jl
dHVybiBsKGQsYiksZH1mdW5jdGlvbiBoKGEpe3ZhciBiPXRoaXMsYz1iLnJlYWR5KCkudGhlbihm
dW5jdGlvbigpe2Zvcih2YXIgYT1iLl9kYkluZm8sYz1tLmxlbmd0aCxkPVtdLGU9MDtjPmU7ZSsr
KTA9PT1tLmtleShlKS5pbmRleE9mKGEua2V5UHJlZml4KSYmZC5wdXNoKG0ua2V5KGUpLnN1YnN0
cmluZyhhLmtleVByZWZpeC5sZW5ndGgpKTtyZXR1cm4gZH0pO3JldHVybiBsKGMsYSksY31mdW5j
dGlvbiBpKGEpe3ZhciBiPXRoaXMsYz1iLmtleXMoKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBh
Lmxlbmd0aH0pO3JldHVybiBsKGMsYSksY31mdW5jdGlvbiBqKGIsYyl7dmFyIGQ9dGhpczsic3Ry
aW5nIiE9dHlwZW9mIGImJihhLmNvbnNvbGUud2FybihiKyIgdXNlZCBhcyBhIGtleSwgYnV0IGl0
IGlzIG5vdCBhIHN0cmluZy4iKSxiPVN0cmluZyhiKSk7dmFyIGU9ZC5yZWFkeSgpLnRoZW4oZnVu
Y3Rpb24oKXt2YXIgYT1kLl9kYkluZm87bS5yZW1vdmVJdGVtKGEua2V5UHJlZml4K2IpfSk7cmV0
dXJuIGwoZSxjKSxlfWZ1bmN0aW9uIGsoYixjLGQpe3ZhciBlPXRoaXM7InN0cmluZyIhPXR5cGVv
ZiBiJiYoYS5jb25zb2xlLndhcm4oYisiIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBz
dHJpbmcuIiksYj1TdHJpbmcoYikpO3ZhciBmPWUucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dm9p
ZCAwPT09YyYmKGM9bnVsbCk7dmFyIGE9YztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZCxm
KXt2YXIgZz1lLl9kYkluZm87Zy5zZXJpYWxpemVyLnNlcmlhbGl6ZShjLGZ1bmN0aW9uKGMsZSl7
aWYoZSlmKGUpO2Vsc2UgdHJ5e20uc2V0SXRlbShnLmtleVByZWZpeCtiLGMpLGQoYSl9Y2F0Y2go
aCl7KCJRdW90YUV4Y2VlZGVkRXJyb3IiPT09aC5uYW1lfHwiTlNfRVJST1JfRE9NX1FVT1RBX1JF
QUNIRUQiPT09aC5uYW1lKSYmZihoKSxmKGgpfX0pfSl9KTtyZXR1cm4gbChmLGQpLGZ9ZnVuY3Rp
b24gbChhLGIpe2ImJmEudGhlbihmdW5jdGlvbihhKXtiKG51bGwsYSl9LGZ1bmN0aW9uKGEpe2Io
YSl9KX12YXIgbT1udWxsO3RyeXtpZighKGEubG9jYWxTdG9yYWdlJiYic2V0SXRlbSJpbiBhLmxv
Y2FsU3RvcmFnZSkpcmV0dXJuO209YS5sb2NhbFN0b3JhZ2V9Y2F0Y2gobil7cmV0dXJufXZhciBv
PXtfZHJpdmVyOiJsb2NhbFN0b3JhZ2VXcmFwcGVyIixfaW5pdFN0b3JhZ2U6YixpdGVyYXRlOmYs
Z2V0SXRlbTplLHNldEl0ZW06ayxyZW1vdmVJdGVtOmosY2xlYXI6ZCxsZW5ndGg6aSxrZXk6Zyxr
ZXlzOmh9O3JldHVybiBvfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6c2VsZik7
YlsiZGVmYXVsdCJdPWQsYS5leHBvcnRzPWJbImRlZmF1bHQiXX0sZnVuY3Rpb24oYSxiKXsidXNl
IHN0cmljdCI7Yi5fX2VzTW9kdWxlPSEwO3ZhciBjPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixj
KXtiPWJ8fFtdLGM9Y3x8e307dHJ5e3JldHVybiBuZXcgQmxvYihiLGMpfWNhdGNoKGQpe2lmKCJU
eXBlRXJyb3IiIT09ZC5uYW1lKXRocm93IGQ7Zm9yKHZhciBlPWEuQmxvYkJ1aWxkZXJ8fGEuTVNC
bG9iQnVpbGRlcnx8YS5Nb3pCbG9iQnVpbGRlcnx8YS5XZWJLaXRCbG9iQnVpbGRlcixmPW5ldyBl
LGc9MDtnPGIubGVuZ3RoO2crPTEpZi5hcHBlbmQoYltnXSk7cmV0dXJuIGYuZ2V0QmxvYihjLnR5
cGUpfX1mdW5jdGlvbiBjKGEsYil7dmFyIGM9IiI7aWYoYSYmKGM9YS50b1N0cmluZygpKSxhJiYo
IltvYmplY3QgQXJyYXlCdWZmZXJdIj09PWEudG9TdHJpbmcoKXx8YS5idWZmZXImJiJbb2JqZWN0
IEFycmF5QnVmZmVyXSI9PT1hLmJ1ZmZlci50b1N0cmluZygpKSl7dmFyIGQsZT1qO2EgaW5zdGFu
Y2VvZiBBcnJheUJ1ZmZlcj8oZD1hLGUrPWwpOihkPWEuYnVmZmVyLCJbb2JqZWN0IEludDhBcnJh
eV0iPT09Yz9lKz1uOiJbb2JqZWN0IFVpbnQ4QXJyYXldIj09PWM/ZSs9bzoiW29iamVjdCBVaW50
OENsYW1wZWRBcnJheV0iPT09Yz9lKz1wOiJbb2JqZWN0IEludDE2QXJyYXldIj09PWM/ZSs9cToi
W29iamVjdCBVaW50MTZBcnJheV0iPT09Yz9lKz1zOiJbb2JqZWN0IEludDMyQXJyYXldIj09PWM/
ZSs9cjoiW29iamVjdCBVaW50MzJBcnJheV0iPT09Yz9lKz10OiJbb2JqZWN0IEZsb2F0MzJBcnJh
eV0iPT09Yz9lKz11OiJbb2JqZWN0IEZsb2F0NjRBcnJheV0iPT09Yz9lKz12OmIobmV3IEVycm9y
KCJGYWlsZWQgdG8gZ2V0IHR5cGUgZm9yIEJpbmFyeUFycmF5IikpKSxiKGUrZihkKSl9ZWxzZSBp
ZigiW29iamVjdCBCbG9iXSI9PT1jKXt2YXIgZz1uZXcgRmlsZVJlYWRlcjtnLm9ubG9hZD1mdW5j
dGlvbigpe3ZhciBjPWgrYS50eXBlKyJ+IitmKHRoaXMucmVzdWx0KTtiKGorbStjKX0sZy5yZWFk
QXNBcnJheUJ1ZmZlcihhKX1lbHNlIHRyeXtiKEpTT04uc3RyaW5naWZ5KGEpKX1jYXRjaChpKXtj
b25zb2xlLmVycm9yKCJDb3VsZG4ndCBjb252ZXJ0IHZhbHVlIGludG8gYSBKU09OIHN0cmluZzog
IixhKSxiKG51bGwsaSl9fWZ1bmN0aW9uIGQoYSl7aWYoYS5zdWJzdHJpbmcoMCxrKSE9PWopcmV0
dXJuIEpTT04ucGFyc2UoYSk7dmFyIGMsZD1hLnN1YnN0cmluZyh3KSxmPWEuc3Vic3RyaW5nKGss
dyk7aWYoZj09PW0mJmkudGVzdChkKSl7dmFyIGc9ZC5tYXRjaChpKTtjPWdbMV0sZD1kLnN1YnN0
cmluZyhnWzBdLmxlbmd0aCl9dmFyIGg9ZShkKTtzd2l0Y2goZil7Y2FzZSBsOnJldHVybiBoO2Nh
c2UgbTpyZXR1cm4gYihbaF0se3R5cGU6Y30pO2Nhc2UgbjpyZXR1cm4gbmV3IEludDhBcnJheSho
KTtjYXNlIG86cmV0dXJuIG5ldyBVaW50OEFycmF5KGgpO2Nhc2UgcDpyZXR1cm4gbmV3IFVpbnQ4
Q2xhbXBlZEFycmF5KGgpO2Nhc2UgcTpyZXR1cm4gbmV3IEludDE2QXJyYXkoaCk7Y2FzZSBzOnJl
dHVybiBuZXcgVWludDE2QXJyYXkoaCk7Y2FzZSByOnJldHVybiBuZXcgSW50MzJBcnJheShoKTtj
YXNlIHQ6cmV0dXJuIG5ldyBVaW50MzJBcnJheShoKTtjYXNlIHU6cmV0dXJuIG5ldyBGbG9hdDMy
QXJyYXkoaCk7Y2FzZSB2OnJldHVybiBuZXcgRmxvYXQ2NEFycmF5KGgpO2RlZmF1bHQ6dGhyb3cg
bmV3IEVycm9yKCJVbmtvd24gdHlwZTogIitmKX19ZnVuY3Rpb24gZShhKXt2YXIgYixjLGQsZSxm
LGg9Ljc1KmEubGVuZ3RoLGk9YS5sZW5ndGgsaj0wOyI9Ij09PWFbYS5sZW5ndGgtMV0mJihoLS0s
Ij0iPT09YVthLmxlbmd0aC0yXSYmaC0tKTt2YXIgaz1uZXcgQXJyYXlCdWZmZXIoaCksbD1uZXcg
VWludDhBcnJheShrKTtmb3IoYj0wO2k+YjtiKz00KWM9Zy5pbmRleE9mKGFbYl0pLGQ9Zy5pbmRl
eE9mKGFbYisxXSksZT1nLmluZGV4T2YoYVtiKzJdKSxmPWcuaW5kZXhPZihhW2IrM10pLGxbaisr
XT1jPDwyfGQ+PjQsbFtqKytdPSgxNSZkKTw8NHxlPj4yLGxbaisrXT0oMyZlKTw8Nnw2MyZmO3Jl
dHVybiBrfWZ1bmN0aW9uIGYoYSl7dmFyIGIsYz1uZXcgVWludDhBcnJheShhKSxkPSIiO2Zvcihi
PTA7YjxjLmxlbmd0aDtiKz0zKWQrPWdbY1tiXT4+Ml0sZCs9Z1soMyZjW2JdKTw8NHxjW2IrMV0+
PjRdLGQrPWdbKDE1JmNbYisxXSk8PDJ8Y1tiKzJdPj42XSxkKz1nWzYzJmNbYisyXV07cmV0dXJu
IGMubGVuZ3RoJTM9PT0yP2Q9ZC5zdWJzdHJpbmcoMCxkLmxlbmd0aC0xKSsiPSI6Yy5sZW5ndGgl
Mz09PTEmJihkPWQuc3Vic3RyaW5nKDAsZC5sZW5ndGgtMikrIj09IiksZH12YXIgZz0iQUJDREVG
R0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkr
LyIsaD0ifn5sb2NhbF9mb3JhZ2VfdHlwZX4iLGk9L15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5d
Kyl+LyxqPSJfX2xmc2NfXzoiLGs9ai5sZW5ndGgsbD0iYXJiZiIsbT0iYmxvYiIsbj0ic2kwOCIs
bz0idWkwOCIscD0idWljOCIscT0ic2kxNiIscj0ic2kzMiIscz0idXIxNiIsdD0idWkzMiIsdT0i
ZmwzMiIsdj0iZmw2NCIsdz1rK2wubGVuZ3RoLHg9e3NlcmlhbGl6ZTpjLGRlc2VyaWFsaXplOmQs
c3RyaW5nVG9CdWZmZXI6ZSxidWZmZXJUb1N0cmluZzpmfTtyZXR1cm4geH0oInVuZGVmaW5lZCIh
PXR5cGVvZiB3aW5kb3c/d2luZG93OnNlbGYpO2JbImRlZmF1bHQiXT1jLGEuZXhwb3J0cz1iWyJk
ZWZhdWx0Il19LGZ1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7Yi5fX2VzTW9kdWxlPSEwO3Zh
ciBkPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9dGhpcyxkPXtkYjpudWxsfTtpZihh
KWZvcih2YXIgZSBpbiBhKWRbZV09InN0cmluZyIhPXR5cGVvZiBhW2VdP2FbZV0udG9TdHJpbmco
KTphW2VdO3ZhciBmPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGEsYyl7dHJ5e2QuZGI9bShkLm5hbWUs
U3RyaW5nKGQudmVyc2lvbiksZC5kZXNjcmlwdGlvbixkLnNpemUpfWNhdGNoKGUpe3JldHVybiBj
KGUpfWQuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oZSl7ZS5leGVjdXRlU3FsKCJDUkVBVEUgVEFC
TEUgSUYgTk9UIEVYSVNUUyAiK2Quc3RvcmVOYW1lKyIgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVks
IGtleSB1bmlxdWUsIHZhbHVlKSIsW10sZnVuY3Rpb24oKXtiLl9kYkluZm89ZCxhKCl9LGZ1bmN0
aW9uKGEsYil7YyhiKX0pfSl9KTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYSxiKXthKGMo
MykpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gZC5zZXJpYWxpemVyPWEsZn0pfWZ1bmN0aW9u
IGQoYixjKXt2YXIgZD10aGlzOyJzdHJpbmciIT10eXBlb2YgYiYmKGEuY29uc29sZS53YXJuKGIr
IiB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLiIpLGI9U3RyaW5nKGIpKTt2
YXIgZT1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGMpe2QucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7
dmFyIGU9ZC5fZGJJbmZvO2UuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oZCl7ZC5leGVjdXRlU3Fs
KCJTRUxFQ1QgKiBGUk9NICIrZS5zdG9yZU5hbWUrIiBXSEVSRSBrZXkgPSA/IExJTUlUIDEiLFti
XSxmdW5jdGlvbihiLGMpe3ZhciBkPWMucm93cy5sZW5ndGg/Yy5yb3dzLml0ZW0oMCkudmFsdWU6
bnVsbDtkJiYoZD1lLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCkpLGEoZCl9LGZ1bmN0aW9uKGEs
Yil7YyhiKX0pfSl9KVsiY2F0Y2giXShjKX0pO3JldHVybiBsKGUsYyksZX1mdW5jdGlvbiBlKGEs
Yil7dmFyIGM9dGhpcyxkPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGIsZCl7Yy5yZWFkeSgpLnRoZW4o
ZnVuY3Rpb24oKXt2YXIgZT1jLl9kYkluZm87ZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihjKXtj
LmV4ZWN1dGVTcWwoIlNFTEVDVCAqIEZST00gIitlLnN0b3JlTmFtZSxbXSxmdW5jdGlvbihjLGQp
e2Zvcih2YXIgZj1kLnJvd3MsZz1mLmxlbmd0aCxoPTA7Zz5oO2grKyl7dmFyIGk9Zi5pdGVtKGgp
LGo9aS52YWx1ZTtpZihqJiYoaj1lLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoaikpLGo9YShqLGku
a2V5LGgrMSksdm9pZCAwIT09ailyZXR1cm4gdm9pZCBiKGopfWIoKX0sZnVuY3Rpb24oYSxiKXtk
KGIpfSl9KX0pWyJjYXRjaCJdKGQpfSk7cmV0dXJuIGwoZCxiKSxkfWZ1bmN0aW9uIGYoYixjLGQp
e3ZhciBlPXRoaXM7InN0cmluZyIhPXR5cGVvZiBiJiYoYS5jb25zb2xlLndhcm4oYisiIHVzZWQg
YXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuIiksYj1TdHJpbmcoYikpO3ZhciBmPW5l
dyBQcm9taXNlKGZ1bmN0aW9uKGEsZCl7ZS5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2b2lkIDA9
PT1jJiYoYz1udWxsKTt2YXIgZj1jLGc9ZS5fZGJJbmZvO2cuc2VyaWFsaXplci5zZXJpYWxpemUo
YyxmdW5jdGlvbihjLGUpe2U/ZChlKTpnLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGUpe2UuZXhl
Y3V0ZVNxbCgiSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyAiK2cuc3RvcmVOYW1lKyIgKGtleSwgdmFs
dWUpIFZBTFVFUyAoPywgPykiLFtiLGNdLGZ1bmN0aW9uKCl7YShmKX0sZnVuY3Rpb24oYSxiKXtk
KGIpfSl9LGZ1bmN0aW9uKGEpe2EuY29kZT09PWEuUVVPVEFfRVJSJiZkKGEpfSl9KX0pWyJjYXRj
aCJdKGQpfSk7cmV0dXJuIGwoZixkKSxmfWZ1bmN0aW9uIGcoYixjKXt2YXIgZD10aGlzOyJzdHJp
bmciIT10eXBlb2YgYiYmKGEuY29uc29sZS53YXJuKGIrIiB1c2VkIGFzIGEga2V5LCBidXQgaXQg
aXMgbm90IGEgc3RyaW5nLiIpLGI9U3RyaW5nKGIpKTt2YXIgZT1uZXcgUHJvbWlzZShmdW5jdGlv
bihhLGMpe2QucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9ZC5fZGJJbmZvO2UuZGIudHJh
bnNhY3Rpb24oZnVuY3Rpb24oZCl7ZC5leGVjdXRlU3FsKCJERUxFVEUgRlJPTSAiK2Uuc3RvcmVO
YW1lKyIgV0hFUkUga2V5ID0gPyIsW2JdLGZ1bmN0aW9uKCl7YSgpfSxmdW5jdGlvbihhLGIpe2Mo
Yil9KX0pfSlbImNhdGNoIl0oYyl9KTtyZXR1cm4gbChlLGMpLGV9ZnVuY3Rpb24gaChhKXt2YXIg
Yj10aGlzLGM9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxjKXtiLnJlYWR5KCkudGhlbihmdW5jdGlv
bigpe3ZhciBkPWIuX2RiSW5mbztkLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKGIpe2IuZXhlY3V0
ZVNxbCgiREVMRVRFIEZST00gIitkLnN0b3JlTmFtZSxbXSxmdW5jdGlvbigpe2EoKX0sZnVuY3Rp
b24oYSxiKXtjKGIpfSl9KX0pWyJjYXRjaCJdKGMpfSk7cmV0dXJuIGwoYyxhKSxjfWZ1bmN0aW9u
IGkoYSl7dmFyIGI9dGhpcyxjPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGEsYyl7Yi5yZWFkeSgpLnRo
ZW4oZnVuY3Rpb24oKXt2YXIgZD1iLl9kYkluZm87ZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihi
KXtiLmV4ZWN1dGVTcWwoIlNFTEVDVCBDT1VOVChrZXkpIGFzIGMgRlJPTSAiK2Quc3RvcmVOYW1l
LFtdLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Yy5yb3dzLml0ZW0oMCkuYzthKGQpfSxmdW5jdGlvbihh
LGIpe2MoYil9KX0pfSlbImNhdGNoIl0oYyl9KTtyZXR1cm4gbChjLGEpLGN9ZnVuY3Rpb24gaihh
LGIpe3ZhciBjPXRoaXMsZD1uZXcgUHJvbWlzZShmdW5jdGlvbihiLGQpe2MucmVhZHkoKS50aGVu
KGZ1bmN0aW9uKCl7dmFyIGU9Yy5fZGJJbmZvO2UuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24oYyl7
Yy5leGVjdXRlU3FsKCJTRUxFQ1Qga2V5IEZST00gIitlLnN0b3JlTmFtZSsiIFdIRVJFIGlkID0g
PyBMSU1JVCAxIixbYSsxXSxmdW5jdGlvbihhLGMpe3ZhciBkPWMucm93cy5sZW5ndGg/Yy5yb3dz
Lml0ZW0oMCkua2V5Om51bGw7YihkKX0sZnVuY3Rpb24oYSxiKXtkKGIpfSl9KX0pWyJjYXRjaCJd
KGQpfSk7cmV0dXJuIGwoZCxiKSxkfWZ1bmN0aW9uIGsoYSl7dmFyIGI9dGhpcyxjPW5ldyBQcm9t
aXNlKGZ1bmN0aW9uKGEsYyl7Yi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgZD1iLl9kYklu
Zm87ZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbihiKXtiLmV4ZWN1dGVTcWwoIlNFTEVDVCBrZXkg
RlJPTSAiK2Quc3RvcmVOYW1lLFtdLGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGMu
cm93cy5sZW5ndGg7ZSsrKWQucHVzaChjLnJvd3MuaXRlbShlKS5rZXkpO2EoZCl9LGZ1bmN0aW9u
KGEsYil7YyhiKX0pfSl9KVsiY2F0Y2giXShjKX0pO3JldHVybiBsKGMsYSksY31mdW5jdGlvbiBs
KGEsYil7YiYmYS50aGVuKGZ1bmN0aW9uKGEpe2IobnVsbCxhKX0sZnVuY3Rpb24oYSl7YihhKX0p
fXZhciBtPWEub3BlbkRhdGFiYXNlO2lmKG0pe3ZhciBuPXtfZHJpdmVyOiJ3ZWJTUUxTdG9yYWdl
IixfaW5pdFN0b3JhZ2U6YixpdGVyYXRlOmUsZ2V0SXRlbTpkLHNldEl0ZW06ZixyZW1vdmVJdGVt
OmcsY2xlYXI6aCxsZW5ndGg6aSxrZXk6aixrZXlzOmt9O3JldHVybiBufX0oInVuZGVmaW5lZCIh
PXR5cGVvZiB3aW5kb3c/d2luZG93OnNlbGYpO2JbImRlZmF1bHQiXT1kLGEuZXhwb3J0cz1iWyJk
ZWZhdWx0Il19XSl9KTsNCn0NCmNhdGNoIChlKQ0Kew0KCWxvY2FsRm9yYWdlSW5pdEZhaWxlZCA9
IHRydWU7DQp9DQpjci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihydW50aW1lKQ0K
ew0KCXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIGN1
cnJlbnRLZXkgPSAiIjsNCgl2YXIgbGFzdFZhbHVlID0gIiI7DQoJdmFyIGtleU5hbWVzTGlzdCA9
IFtdOw0KCXZhciBlcnJvck1lc3NhZ2UgPSAiIjsNCglmdW5jdGlvbiBnZXRFcnJvclN0cmluZyhl
cnIpDQoJew0KCQlpZiAoIWVycikNCgkJCXJldHVybiAidW5rbm93biBlcnJvciI7DQoJCWVsc2Ug
aWYgKHR5cGVvZiBlcnIgPT09ICJzdHJpbmciKQ0KCQkJcmV0dXJuIGVycjsNCgkJZWxzZSBpZiAo
dHlwZW9mIGVyci5tZXNzYWdlID09PSAic3RyaW5nIikNCgkJCXJldHVybiBlcnIubWVzc2FnZTsN
CgkJZWxzZSBpZiAodHlwZW9mIGVyci5uYW1lID09PSAic3RyaW5nIikNCgkJCXJldHVybiBlcnIu
bmFtZTsNCgkJZWxzZSBpZiAodHlwZW9mIGVyci5kYXRhID09PSAic3RyaW5nIikNCgkJCXJldHVy
biBlcnIuZGF0YTsNCgkJZWxzZQ0KCQkJcmV0dXJuICJ1bmtub3duIGVycm9yIjsNCgl9Ow0KCWZ1
bmN0aW9uIFRyaWdnZXJTdG9yYWdlRXJyb3Ioc2VsZiwgbXNnKQ0KCXsNCgkJZXJyb3JNZXNzYWdl
ID0gbXNnOw0KCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2Uu
cHJvdG90eXBlLmNuZHMuT25FcnJvciwgc2VsZik7DQoJfTsNCgl2YXIgcHJlZml4ID0gIiI7DQoJ
dmFyIGlzX2FyY2FkZSA9ICh0eXBlb2Ygd2luZG93WyJpc19zY2lycmFfYXJjYWRlIl0gIT09ICJ1
bmRlZmluZWQiKTsNCglpZiAoaXNfYXJjYWRlKQ0KCQlwcmVmaXggPSAic2EiICsgd2luZG93WyJz
Y2lycmFfYXJjYWRlX2lkIl0gKyAiXyI7DQoJZnVuY3Rpb24gaGFzUmVxdWlyZWRQcmVmaXgoa2V5
KQ0KCXsNCgkJaWYgKCFwcmVmaXgpDQoJCQlyZXR1cm4gdHJ1ZTsNCgkJcmV0dXJuIGtleS5zdWJz
dHIoMCwgcHJlZml4Lmxlbmd0aCkgPT09IHByZWZpeDsNCgl9Ow0KCWZ1bmN0aW9uIHJlbW92ZVBy
ZWZpeChrZXkpDQoJew0KCQlpZiAoIXByZWZpeCkNCgkJCXJldHVybiBrZXk7DQoJCWlmIChoYXNS
ZXF1aXJlZFByZWZpeChrZXkpKQ0KCQkJcmV0dXJuIGtleS5zdWJzdHIocHJlZml4Lmxlbmd0aCk7
DQoJfTsNCgl2YXIgcGx1Z2luUHJvdG8gPSBjci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UucHJvdG90
eXBlOw0KCXBsdWdpblByb3RvLlR5cGUgPSBmdW5jdGlvbihwbHVnaW4pDQoJew0KCQl0aGlzLnBs
dWdpbiA9IHBsdWdpbjsNCgkJdGhpcy5ydW50aW1lID0gcGx1Z2luLnJ1bnRpbWU7DQoJfTsNCgl2
YXIgdHlwZVByb3RvID0gcGx1Z2luUHJvdG8uVHlwZS5wcm90b3R5cGU7DQoJdHlwZVByb3RvLm9u
Q3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgl9Ow0KCXBsdWdpblByb3RvLkluc3RhbmNlID0gZnVu
Y3Rpb24odHlwZSkNCgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMucnVudGltZSA9IHR5
cGUucnVudGltZTsNCgl9Ow0KCXZhciBpbnN0YW5jZVByb3RvID0gcGx1Z2luUHJvdG8uSW5zdGFu
Y2UucHJvdG90eXBlOw0KCWluc3RhbmNlUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0K
CQl0aGlzLnBlbmRpbmdTZXRzID0gMDsJCS8vIG51bWJlciBvZiBwZW5kaW5nICdTZXQgaXRlbScg
YWN0aW9ucw0KCQl0aGlzLnBlbmRpbmdHZXRzID0gMDsJCS8vIG51bWJlciBvZiBwZW5kaW5nICdH
ZXQgaXRlbScgYWN0aW9ucw0KCX07DQoJaW5zdGFuY2VQcm90by5vbkRlc3Ryb3kgPSBmdW5jdGlv
biAoKQ0KCXsNCgl9Ow0KCWluc3RhbmNlUHJvdG8uc2F2ZVRvSlNPTiA9IGZ1bmN0aW9uICgpDQoJ
ew0KCQlyZXR1cm4gew0KCQl9Ow0KCX07DQoJaW5zdGFuY2VQcm90by5sb2FkRnJvbUpTT04gPSBm
dW5jdGlvbiAobykNCgl7DQoJfTsNCgl2YXIgZGVidWdEYXRhQ2hhbmdlZCA9IHRydWU7DQoJZnVu
Y3Rpb24gQ25kcygpIHt9Ow0KCUNuZHMucHJvdG90eXBlLk9uSXRlbVNldCA9IGZ1bmN0aW9uIChr
ZXkpDQoJew0KCQlyZXR1cm4gY3VycmVudEtleSA9PT0ga2V5Ow0KCX07DQoJQ25kcy5wcm90b3R5
cGUuT25BbnlJdGVtU2V0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJ
Q25kcy5wcm90b3R5cGUuT25JdGVtR2V0ID0gZnVuY3Rpb24gKGtleSkNCgl7DQoJCXJldHVybiBj
dXJyZW50S2V5ID09PSBrZXk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbkFueUl0ZW1HZXQgPSBm
dW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Pbkl0
ZW1SZW1vdmVkID0gZnVuY3Rpb24gKGtleSkNCgl7DQoJCXJldHVybiBjdXJyZW50S2V5ID09PSBr
ZXk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbkFueUl0ZW1SZW1vdmVkID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25DbGVhcmVkID0gZnVu
Y3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25BbGxL
ZXlOYW1lc0xvYWRlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9Ow0KCUNu
ZHMucHJvdG90eXBlLk9uRXJyb3IgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJ
fTsNCglDbmRzLnByb3RvdHlwZS5Pbkl0ZW1FeGlzdHMgPSBmdW5jdGlvbiAoa2V5KQ0KCXsNCgkJ
cmV0dXJuIGN1cnJlbnRLZXkgPT09IGtleTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLk9uSXRlbU1p
c3NpbmcgPSBmdW5jdGlvbiAoa2V5KQ0KCXsNCgkJcmV0dXJuIGN1cnJlbnRLZXkgPT09IGtleTsN
Cgl9Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVLZXkgPSBmdW5jdGlvbiAoY21wLCBrZXkpDQoJ
ew0KCQlyZXR1cm4gY3IuZG9fY21wKGN1cnJlbnRLZXksIGNtcCwga2V5KTsNCgl9Ow0KCUNuZHMu
cHJvdG90eXBlLkNvbXBhcmVWYWx1ZSA9IGZ1bmN0aW9uIChjbXAsIHYpDQoJew0KCQlyZXR1cm4g
Y3IuZG9fY21wKGxhc3RWYWx1ZSwgY21wLCB2KTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLklzUHJv
Y2Vzc2luZ1NldHMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMucGVuZGluZ1NldHMg
PiAwOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNQcm9jZXNzaW5nR2V0cyA9IGZ1bmN0aW9uICgp
DQoJew0KCQlyZXR1cm4gdGhpcy5wZW5kaW5nR2V0cyA+IDA7DQoJfTsNCglDbmRzLnByb3RvdHlw
ZS5PbkFsbFNldHNDb21wbGV0ZSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9
Ow0KCUNuZHMucHJvdG90eXBlLk9uQWxsR2V0c0NvbXBsZXRlID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CXJldHVybiB0cnVlOw0KCX07DQoJcGx1Z2luUHJvdG8uY25kcyA9IG5ldyBDbmRzKCk7DQoJZnVu
Y3Rpb24gQWN0cygpIHt9Ow0KCUFjdHMucHJvdG90eXBlLlNldEl0ZW0gPSBmdW5jdGlvbiAoa2V5
Tm9QcmVmaXgsIHZhbHVlKQ0KCXsNCgkJaWYgKGxvY2FsRm9yYWdlSW5pdEZhaWxlZCkNCgkJew0K
CQkJVHJpZ2dlclN0b3JhZ2VFcnJvcih0aGlzLCAic3RvcmFnZSBmYWlsZWQgdG8gaW5pdGlhbGlz
ZSAtIG1heSBiZSBkaXNhYmxlZCBpbiBicm93c2VyIHNldHRpbmdzIik7DQoJCQlyZXR1cm47DQoJ
CX0NCgkJdmFyIGtleVByZWZpeCA9IHByZWZpeCArIGtleU5vUHJlZml4Ow0KCQl0aGlzLnBlbmRp
bmdTZXRzKys7DQoJCXZhciBzZWxmID0gdGhpczsNCgkJbG9jYWxmb3JhZ2VbInNldEl0ZW0iXShr
ZXlQcmVmaXgsIHZhbHVlLCBmdW5jdGlvbiAoZXJyLCB2YWx1ZVNldCkNCgkJew0KCQkJZGVidWdE
YXRhQ2hhbmdlZCA9IHRydWU7DQoJCQlzZWxmLnBlbmRpbmdTZXRzLS07DQoJCQlpZiAoZXJyKQ0K
CQkJew0KCQkJCWVycm9yTWVzc2FnZSA9IGdldEVycm9yU3RyaW5nKGVycik7DQoJCQkJc2VsZi5y
dW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5jbmRzLk9u
RXJyb3IsIHNlbGYpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWN1cnJlbnRLZXkgPSBrZXlO
b1ByZWZpeDsNCgkJCQlsYXN0VmFsdWUgPSB2YWx1ZVNldDsNCgkJCQlzZWxmLnJ1bnRpbWUudHJp
Z2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLmNuZHMuT25BbnlJdGVtU2V0
LCBzZWxmKTsNCgkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0b3Jh
Z2UucHJvdG90eXBlLmNuZHMuT25JdGVtU2V0LCBzZWxmKTsNCgkJCQljdXJyZW50S2V5ID0gIiI7
DQoJCQkJbGFzdFZhbHVlID0gIiI7DQoJCQl9DQoJCQlpZiAoc2VsZi5wZW5kaW5nU2V0cyA9PT0g
MCkNCgkJCXsNCgkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0b3Jh
Z2UucHJvdG90eXBlLmNuZHMuT25BbGxTZXRzQ29tcGxldGUsIHNlbGYpOw0KCQkJfQ0KCQl9KTsN
Cgl9Ow0KCUFjdHMucHJvdG90eXBlLkdldEl0ZW0gPSBmdW5jdGlvbiAoa2V5Tm9QcmVmaXgpDQoJ
ew0KCQlpZiAobG9jYWxGb3JhZ2VJbml0RmFpbGVkKQ0KCQl7DQoJCQlUcmlnZ2VyU3RvcmFnZUVy
cm9yKHRoaXMsICJzdG9yYWdlIGZhaWxlZCB0byBpbml0aWFsaXNlIC0gbWF5IGJlIGRpc2FibGVk
IGluIGJyb3dzZXIgc2V0dGluZ3MiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2YXIga2V5UHJlZml4
ID0gcHJlZml4ICsga2V5Tm9QcmVmaXg7DQoJCXRoaXMucGVuZGluZ0dldHMrKzsNCgkJdmFyIHNl
bGYgPSB0aGlzOw0KCQlsb2NhbGZvcmFnZVsiZ2V0SXRlbSJdKGtleVByZWZpeCwgZnVuY3Rpb24g
KGVyciwgdmFsdWUpDQoJCXsNCgkJCXNlbGYucGVuZGluZ0dldHMtLTsNCgkJCWlmIChlcnIpDQoJ
CQl7DQoJCQkJZXJyb3JNZXNzYWdlID0gZ2V0RXJyb3JTdHJpbmcoZXJyKTsNCgkJCQlzZWxmLnJ1
bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLmNuZHMuT25F
cnJvciwgc2VsZik7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJY3VycmVudEtleSA9IGtleU5v
UHJlZml4Ow0KCQkJCWxhc3RWYWx1ZSA9IHZhbHVlOw0KCQkJCWlmICh0eXBlb2YgbGFzdFZhbHVl
ID09PSAidW5kZWZpbmVkIiB8fCBsYXN0VmFsdWUgPT09IG51bGwpDQoJCQkJCWxhc3RWYWx1ZSA9
ICIiOw0KCQkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5w
cm90b3R5cGUuY25kcy5PbkFueUl0ZW1HZXQsIHNlbGYpOw0KCQkJCXNlbGYucnVudGltZS50cmln
Z2VyKGNyLnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuY25kcy5Pbkl0ZW1HZXQsIHNl
bGYpOw0KCQkJCWN1cnJlbnRLZXkgPSAiIjsNCgkJCQlsYXN0VmFsdWUgPSAiIjsNCgkJCX0NCgkJ
CWlmIChzZWxmLnBlbmRpbmdHZXRzID09PSAwKQ0KCQkJew0KCQkJCXNlbGYucnVudGltZS50cmln
Z2VyKGNyLnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuY25kcy5PbkFsbEdldHNDb21w
bGV0ZSwgc2VsZik7DQoJCQl9DQoJCX0pOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuQ2hlY2tJdGVt
RXhpc3RzID0gZnVuY3Rpb24gKGtleU5vUHJlZml4KQ0KCXsNCgkJaWYgKGxvY2FsRm9yYWdlSW5p
dEZhaWxlZCkNCgkJew0KCQkJVHJpZ2dlclN0b3JhZ2VFcnJvcih0aGlzLCAic3RvcmFnZSBmYWls
ZWQgdG8gaW5pdGlhbGlzZSAtIG1heSBiZSBkaXNhYmxlZCBpbiBicm93c2VyIHNldHRpbmdzIik7
DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIGtleVByZWZpeCA9IHByZWZpeCArIGtleU5vUHJlZml4
Ow0KCQl2YXIgc2VsZiA9IHRoaXM7DQoJCWxvY2FsZm9yYWdlWyJnZXRJdGVtIl0oa2V5UHJlZml4
LCBmdW5jdGlvbiAoZXJyLCB2YWx1ZSkNCgkJew0KCQkJaWYgKGVycikNCgkJCXsNCgkJCQllcnJv
ck1lc3NhZ2UgPSBnZXRFcnJvclN0cmluZyhlcnIpOw0KCQkJCXNlbGYucnVudGltZS50cmlnZ2Vy
KGNyLnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuY25kcy5PbkVycm9yLCBzZWxmKTsN
CgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQljdXJyZW50S2V5ID0ga2V5Tm9QcmVmaXg7DQoJCQkJ
aWYgKHZhbHVlID09PSBudWxsKQkJLy8gbnVsbCB2YWx1ZSBpbmRpY2F0ZXMga2V5IG1pc3NpbmcN
CgkJCQl7DQoJCQkJCWxhc3RWYWx1ZSA9ICIiOwkJLy8gcHJldmVudCBJdGVtVmFsdWUgbWVhbmlu
ZyBhbnl0aGluZw0KCQkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Mb2NhbFN0
b3JhZ2UucHJvdG90eXBlLmNuZHMuT25JdGVtTWlzc2luZywgc2VsZik7DQoJCQkJfQ0KCQkJCWVs
c2UNCgkJCQl7DQoJCQkJCWxhc3RWYWx1ZSA9IHZhbHVlOwkvLyBtYWtlIGF2YWlsYWJsZSB0byBJ
dGVtVmFsdWUgZXhwcmVzc2lvbg0KCQkJCQlzZWxmLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5z
Xy5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLmNuZHMuT25JdGVtRXhpc3RzLCBzZWxmKTsNCgkJCQl9
DQoJCQkJY3VycmVudEtleSA9ICIiOw0KCQkJCWxhc3RWYWx1ZSA9ICIiOw0KCQkJfQ0KCQl9KTsN
Cgl9Ow0KCUFjdHMucHJvdG90eXBlLlJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5Tm9QcmVmaXgp
DQoJew0KCQlpZiAobG9jYWxGb3JhZ2VJbml0RmFpbGVkKQ0KCQl7DQoJCQlUcmlnZ2VyU3RvcmFn
ZUVycm9yKHRoaXMsICJzdG9yYWdlIGZhaWxlZCB0byBpbml0aWFsaXNlIC0gbWF5IGJlIGRpc2Fi
bGVkIGluIGJyb3dzZXIgc2V0dGluZ3MiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2YXIga2V5UHJl
Zml4ID0gcHJlZml4ICsga2V5Tm9QcmVmaXg7DQoJCXZhciBzZWxmID0gdGhpczsNCgkJbG9jYWxm
b3JhZ2VbInJlbW92ZUl0ZW0iXShrZXlQcmVmaXgsIGZ1bmN0aW9uIChlcnIpDQoJCXsNCgkJCWRl
YnVnRGF0YUNoYW5nZWQgPSB0cnVlOw0KCQkJaWYgKGVycikNCgkJCXsNCgkJCQllcnJvck1lc3Nh
Z2UgPSBnZXRFcnJvclN0cmluZyhlcnIpOw0KCQkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBs
dWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuY25kcy5PbkVycm9yLCBzZWxmKTsNCgkJCX0N
CgkJCWVsc2UNCgkJCXsNCgkJCQljdXJyZW50S2V5ID0ga2V5Tm9QcmVmaXg7DQoJCQkJbGFzdFZh
bHVlID0gIiI7DQoJCQkJc2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uTG9jYWxTdG9y
YWdlLnByb3RvdHlwZS5jbmRzLk9uQW55SXRlbVJlbW92ZWQsIHNlbGYpOw0KCQkJCXNlbGYucnVu
dGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuY25kcy5Pbkl0
ZW1SZW1vdmVkLCBzZWxmKTsNCgkJCQljdXJyZW50S2V5ID0gIiI7DQoJCQl9DQoJCX0pOw0KCX07
DQoJQWN0cy5wcm90b3R5cGUuQ2xlYXJTdG9yYWdlID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmIChs
b2NhbEZvcmFnZUluaXRGYWlsZWQpDQoJCXsNCgkJCVRyaWdnZXJTdG9yYWdlRXJyb3IodGhpcywg
InN0b3JhZ2UgZmFpbGVkIHRvIGluaXRpYWxpc2UgLSBtYXkgYmUgZGlzYWJsZWQgaW4gYnJvd3Nl
ciBzZXR0aW5ncyIpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCWlmIChpc19hcmNhZGUpDQoJCQlyZXR1
cm47DQoJCXZhciBzZWxmID0gdGhpczsNCgkJbG9jYWxmb3JhZ2VbImNsZWFyIl0oZnVuY3Rpb24g
KGVycikNCgkJew0KCQkJZGVidWdEYXRhQ2hhbmdlZCA9IHRydWU7DQoJCQlpZiAoZXJyKQ0KCQkJ
ew0KCQkJCWVycm9yTWVzc2FnZSA9IGdldEVycm9yU3RyaW5nKGVycik7DQoJCQkJc2VsZi5ydW50
aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5jbmRzLk9uRXJy
b3IsIHNlbGYpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWN1cnJlbnRLZXkgPSAiIjsNCgkJ
CQlsYXN0VmFsdWUgPSAiIjsNCgkJCQljci5jbGVhckFycmF5KGtleU5hbWVzTGlzdCk7DQoJCQkJ
c2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5j
bmRzLk9uQ2xlYXJlZCwgc2VsZik7DQoJCQl9DQoJCX0pOw0KCX07DQoJQWN0cy5wcm90b3R5cGUu
R2V0QWxsS2V5TmFtZXMgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKGxvY2FsRm9yYWdlSW5pdEZh
aWxlZCkNCgkJew0KCQkJVHJpZ2dlclN0b3JhZ2VFcnJvcih0aGlzLCAic3RvcmFnZSBmYWlsZWQg
dG8gaW5pdGlhbGlzZSAtIG1heSBiZSBkaXNhYmxlZCBpbiBicm93c2VyIHNldHRpbmdzIik7DQoJ
CQlyZXR1cm47DQoJCX0NCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQlsb2NhbGZvcmFnZVsia2V5cyJd
KGZ1bmN0aW9uIChlcnIsIGtleUxpc3QpDQoJCXsNCgkJCXZhciBpLCBsZW4sIGs7DQoJCQlpZiAo
ZXJyKQ0KCQkJew0KCQkJCWVycm9yTWVzc2FnZSA9IGdldEVycm9yU3RyaW5nKGVycik7DQoJCQkJ
c2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5j
bmRzLk9uRXJyb3IsIHNlbGYpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWNyLmNsZWFyQXJy
YXkoa2V5TmFtZXNMaXN0KTsNCgkJCQlmb3IgKGkgPSAwLCBsZW4gPSBrZXlMaXN0Lmxlbmd0aDsg
aSA8IGxlbjsgKytpKQ0KCQkJCXsNCgkJCQkJayA9IGtleUxpc3RbaV07DQoJCQkJCWlmICghaGFz
UmVxdWlyZWRQcmVmaXgoaykpDQoJCQkJCQljb250aW51ZTsNCgkJCQkJa2V5TmFtZXNMaXN0LnB1
c2gocmVtb3ZlUHJlZml4KGspKTsNCgkJCQl9DQoJCQkJc2VsZi5ydW50aW1lLnRyaWdnZXIoY3Iu
cGx1Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5jbmRzLk9uQWxsS2V5TmFtZXNMb2FkZWQs
IHNlbGYpOw0KCQkJfQ0KCQl9KTsNCgl9Ow0KCXBsdWdpblByb3RvLmFjdHMgPSBuZXcgQWN0cygp
Ow0KCWZ1bmN0aW9uIEV4cHMoKSB7fTsNCglFeHBzLnByb3RvdHlwZS5JdGVtVmFsdWUgPSBmdW5j
dGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9hbnkobGFzdFZhbHVlKTsNCgl9Ow0KCUV4cHMucHJv
dG90eXBlLktleSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X3N0cmluZyhjdXJyZW50
S2V5KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLktleUNvdW50ID0gZnVuY3Rpb24gKHJldCkNCgl7
DQoJCXJldC5zZXRfaW50KGtleU5hbWVzTGlzdC5sZW5ndGgpOw0KCX07DQoJRXhwcy5wcm90b3R5
cGUuS2V5QXQgPSBmdW5jdGlvbiAocmV0LCBpKQ0KCXsNCgkJaSA9IE1hdGguZmxvb3IoaSk7DQoJ
CWlmIChpIDwgMCB8fCBpID49IGtleU5hbWVzTGlzdC5sZW5ndGgpDQoJCXsNCgkJCXJldC5zZXRf
c3RyaW5nKCIiKTsNCgkJCXJldHVybjsNCgkJfQ0KCQlyZXQuc2V0X3N0cmluZyhrZXlOYW1lc0xp
c3RbaV0pOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24gKHJl
dCkNCgl7DQoJCXJldC5zZXRfc3RyaW5nKGVycm9yTWVzc2FnZSk7DQoJfTsNCglwbHVnaW5Qcm90
by5leHBzID0gbmV3IEV4cHMoKTsNCn0oKSk7DQo7DQo7DQpjci5wbHVnaW5zXy5QYXJ0aWNsZXMg
PSBmdW5jdGlvbihydW50aW1lKQ0Kew0KCXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1
bmN0aW9uICgpDQp7DQoJdmFyIHBsdWdpblByb3RvID0gY3IucGx1Z2luc18uUGFydGljbGVzLnBy
b3RvdHlwZTsNCglwbHVnaW5Qcm90by5UeXBlID0gZnVuY3Rpb24ocGx1Z2luKQ0KCXsNCgkJdGhp
cy5wbHVnaW4gPSBwbHVnaW47DQoJCXRoaXMucnVudGltZSA9IHBsdWdpbi5ydW50aW1lOw0KCX07
DQoJdmFyIHR5cGVQcm90byA9IHBsdWdpblByb3RvLlR5cGUucHJvdG90eXBlOw0KCXR5cGVQcm90
by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSkNCgkJCXJl
dHVybjsNCgkJdGhpcy50ZXh0dXJlX2ltZyA9IG5ldyBJbWFnZSgpOw0KCQl0aGlzLnRleHR1cmVf
aW1nLmNyX2ZpbGVzaXplID0gdGhpcy50ZXh0dXJlX2ZpbGVzaXplOw0KCQl0aGlzLndlYkdMX3Rl
eHR1cmUgPSBudWxsOw0KCQl0aGlzLnJ1bnRpbWUud2FpdEZvckltYWdlTG9hZCh0aGlzLnRleHR1
cmVfaW1nLCB0aGlzLnRleHR1cmVfZmlsZSk7DQoJfTsNCgl0eXBlUHJvdG8ub25Mb3N0V2ViR0xD
b250ZXh0ID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSkNCgkJCXJldHVy
bjsNCgkJdGhpcy53ZWJHTF90ZXh0dXJlID0gbnVsbDsNCgl9Ow0KCXR5cGVQcm90by5vblJlc3Rv
cmVXZWJHTENvbnRleHQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMuaXNfZmFtaWx5IHx8
ICF0aGlzLmluc3RhbmNlcy5sZW5ndGgpDQoJCQlyZXR1cm47DQoJCWlmICghdGhpcy53ZWJHTF90
ZXh0dXJlKQ0KCQl7DQoJCQl0aGlzLndlYkdMX3RleHR1cmUgPSB0aGlzLnJ1bnRpbWUuZ2x3cmFw
LmxvYWRUZXh0dXJlKHRoaXMudGV4dHVyZV9pbWcsIHRydWUsIHRoaXMucnVudGltZS5saW5lYXJT
YW1wbGluZywgdGhpcy50ZXh0dXJlX3BpeGVsZm9ybWF0KTsNCgkJfQ0KCX07DQoJdHlwZVByb3Rv
LmxvYWRUZXh0dXJlcyA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5pc19mYW1pbHkgfHwg
dGhpcy53ZWJHTF90ZXh0dXJlIHx8ICF0aGlzLnJ1bnRpbWUuZ2x3cmFwKQ0KCQkJcmV0dXJuOw0K
CQl0aGlzLndlYkdMX3RleHR1cmUgPSB0aGlzLnJ1bnRpbWUuZ2x3cmFwLmxvYWRUZXh0dXJlKHRo
aXMudGV4dHVyZV9pbWcsIHRydWUsIHRoaXMucnVudGltZS5saW5lYXJTYW1wbGluZywgdGhpcy50
ZXh0dXJlX3BpeGVsZm9ybWF0KTsNCgl9Ow0KCXR5cGVQcm90by51bmxvYWRUZXh0dXJlcyA9IGZ1
bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5pc19mYW1pbHkgfHwgdGhpcy5pbnN0YW5jZXMubGVu
Z3RoIHx8ICF0aGlzLndlYkdMX3RleHR1cmUpDQoJCQlyZXR1cm47DQoJCXRoaXMucnVudGltZS5n
bHdyYXAuZGVsZXRlVGV4dHVyZSh0aGlzLndlYkdMX3RleHR1cmUpOw0KCQl0aGlzLndlYkdMX3Rl
eHR1cmUgPSBudWxsOw0KCX07DQoJdHlwZVByb3RvLnByZWxvYWRDYW52YXMyRCA9IGZ1bmN0aW9u
IChjdHgpDQoJew0KCQljdHguZHJhd0ltYWdlKHRoaXMudGV4dHVyZV9pbWcsIDAsIDApOw0KCX07
DQoJZnVuY3Rpb24gUGFydGljbGUob3duZXIpDQoJew0KCQl0aGlzLm93bmVyID0gb3duZXI7DQoJ
CXRoaXMuYWN0aXZlID0gZmFsc2U7DQoJCXRoaXMueCA9IDA7DQoJCXRoaXMueSA9IDA7DQoJCXRo
aXMuc3BlZWQgPSAwOw0KCQl0aGlzLmFuZ2xlID0gMDsNCgkJdGhpcy5vcGFjaXR5ID0gMTsNCgkJ
dGhpcy5ncm93ID0gMDsNCgkJdGhpcy5zaXplID0gMDsNCgkJdGhpcy5ncyA9IDA7CQkJLy8gZ3Jh
dml0eSBzcGVlZA0KCQl0aGlzLmFnZSA9IDA7DQoJCWNyLnNlYWwodGhpcyk7DQoJfTsNCglQYXJ0
aWNsZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIgb3duZXIgPSB0aGlz
Lm93bmVyOw0KCQl0aGlzLnggPSBvd25lci54IC0gKG93bmVyLnhyYW5kb20gLyAyKSArIChNYXRo
LnJhbmRvbSgpICogb3duZXIueHJhbmRvbSk7DQoJCXRoaXMueSA9IG93bmVyLnkgLSAob3duZXIu
eXJhbmRvbSAvIDIpICsgKE1hdGgucmFuZG9tKCkgKiBvd25lci55cmFuZG9tKTsNCgkJdGhpcy5z
cGVlZCA9IG93bmVyLmluaXRzcGVlZCAtIChvd25lci5zcGVlZHJhbmRvbSAvIDIpICsgKE1hdGgu
cmFuZG9tKCkgKiBvd25lci5zcGVlZHJhbmRvbSk7DQoJCXRoaXMuYW5nbGUgPSBvd25lci5hbmds
ZSAtIChvd25lci5zcHJheWNvbmUgLyAyKSArIChNYXRoLnJhbmRvbSgpICogb3duZXIuc3ByYXlj
b25lKTsNCgkJdGhpcy5vcGFjaXR5ID0gb3duZXIuaW5pdG9wYWNpdHk7DQoJCXRoaXMuc2l6ZSA9
IG93bmVyLmluaXRzaXplIC0gKG93bmVyLnNpemVyYW5kb20gLyAyKSArIChNYXRoLnJhbmRvbSgp
ICogb3duZXIuc2l6ZXJhbmRvbSk7DQoJCXRoaXMuZ3JvdyA9IG93bmVyLmdyb3dyYXRlIC0gKG93
bmVyLmdyb3dyYW5kb20gLyAyKSArIChNYXRoLnJhbmRvbSgpICogb3duZXIuZ3Jvd3JhbmRvbSk7
DQoJCXRoaXMuZ3MgPSAwOw0KCQl0aGlzLmFnZSA9IDA7DQoJfTsNCglQYXJ0aWNsZS5wcm90b3R5
cGUudGljayA9IGZ1bmN0aW9uIChkdCkNCgl7DQoJCXZhciBvd25lciA9IHRoaXMub3duZXI7DQoJ
CXRoaXMueCArPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAqIHRoaXMuc3BlZWQgKiBkdDsNCgkJdGhp
cy55ICs9IE1hdGguc2luKHRoaXMuYW5nbGUpICogdGhpcy5zcGVlZCAqIGR0Ow0KCQl0aGlzLnkg
Kz0gdGhpcy5ncyAqIGR0Ow0KCQl0aGlzLnNwZWVkICs9IG93bmVyLmFjYyAqIGR0Ow0KCQl0aGlz
LnNpemUgKz0gdGhpcy5ncm93ICogZHQ7DQoJCXRoaXMuZ3MgKz0gb3duZXIuZyAqIGR0Ow0KCQl0
aGlzLmFnZSArPSBkdDsNCgkJaWYgKHRoaXMuc2l6ZSA8IDEpDQoJCXsNCgkJCXRoaXMuYWN0aXZl
ID0gZmFsc2U7DQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKG93bmVyLmxpZmVhbmdsZXJhbmRvbSAh
PT0gMCkNCgkJCXRoaXMuYW5nbGUgKz0gKE1hdGgucmFuZG9tKCkgKiBvd25lci5saWZlYW5nbGVy
YW5kb20gKiBkdCkgLSAob3duZXIubGlmZWFuZ2xlcmFuZG9tICogZHQgLyAyKTsNCgkJaWYgKG93
bmVyLmxpZmVzcGVlZHJhbmRvbSAhPT0gMCkNCgkJCXRoaXMuc3BlZWQgKz0gKE1hdGgucmFuZG9t
KCkgKiBvd25lci5saWZlc3BlZWRyYW5kb20gKiBkdCkgLSAob3duZXIubGlmZXNwZWVkcmFuZG9t
ICogZHQgLyAyKTsNCgkJaWYgKG93bmVyLmxpZmVvcGFjaXR5cmFuZG9tICE9PSAwKQ0KCQl7DQoJ
CQl0aGlzLm9wYWNpdHkgKz0gKE1hdGgucmFuZG9tKCkgKiBvd25lci5saWZlb3BhY2l0eXJhbmRv
bSAqIGR0KSAtIChvd25lci5saWZlb3BhY2l0eXJhbmRvbSAqIGR0IC8gMik7DQoJCQlpZiAodGhp
cy5vcGFjaXR5IDwgMCkNCgkJCQl0aGlzLm9wYWNpdHkgPSAwOw0KCQkJZWxzZSBpZiAodGhpcy5v
cGFjaXR5ID4gMSkNCgkJCQl0aGlzLm9wYWNpdHkgPSAxOw0KCQl9DQoJCWlmIChvd25lci5kZXN0
cm95bW9kZSA8PSAxICYmIHRoaXMuYWdlID49IG93bmVyLnRpbWVvdXQpDQoJCXsNCgkJCXRoaXMu
YWN0aXZlID0gZmFsc2U7DQoJCX0NCgkJaWYgKG93bmVyLmRlc3Ryb3ltb2RlID09PSAyICYmIHRo
aXMuc3BlZWQgPD0gMCkNCgkJew0KCQkJdGhpcy5hY3RpdmUgPSBmYWxzZTsNCgkJfQ0KCX07DQoJ
UGFydGljbGUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoY3R4KQ0KCXsNCgkJdmFyIGN1cm9w
YWNpdHkgPSB0aGlzLm93bmVyLm9wYWNpdHkgKiB0aGlzLm9wYWNpdHk7DQoJCWlmIChjdXJvcGFj
aXR5ID09PSAwKQ0KCQkJcmV0dXJuOw0KCQlpZiAodGhpcy5vd25lci5kZXN0cm95bW9kZSA9PT0g
MCkNCgkJCWN1cm9wYWNpdHkgKj0gMSAtICh0aGlzLmFnZSAvIHRoaXMub3duZXIudGltZW91dCk7
DQoJCWN0eC5nbG9iYWxBbHBoYSA9IGN1cm9wYWNpdHk7DQoJCXZhciBkcmF3eCA9IHRoaXMueCAt
IHRoaXMuc2l6ZSAvIDI7DQoJCXZhciBkcmF3eSA9IHRoaXMueSAtIHRoaXMuc2l6ZSAvIDI7DQoJ
CWlmICh0aGlzLm93bmVyLnJ1bnRpbWUucGl4ZWxfcm91bmRpbmcpDQoJCXsNCgkJCWRyYXd4ID0g
KGRyYXd4ICsgMC41KSB8IDA7DQoJCQlkcmF3eSA9IChkcmF3eSArIDAuNSkgfCAwOw0KCQl9DQoJ
CWN0eC5kcmF3SW1hZ2UodGhpcy5vd25lci50eXBlLnRleHR1cmVfaW1nLCBkcmF3eCwgZHJhd3ks
IHRoaXMuc2l6ZSwgdGhpcy5zaXplKTsNCgl9Ow0KCVBhcnRpY2xlLnByb3RvdHlwZS5kcmF3R0wg
PSBmdW5jdGlvbiAoZ2x3KQ0KCXsNCgkJdmFyIGN1cm9wYWNpdHkgPSB0aGlzLm93bmVyLm9wYWNp
dHkgKiB0aGlzLm9wYWNpdHk7DQoJCWlmICh0aGlzLm93bmVyLmRlc3Ryb3ltb2RlID09PSAwKQ0K
CQkJY3Vyb3BhY2l0eSAqPSAxIC0gKHRoaXMuYWdlIC8gdGhpcy5vd25lci50aW1lb3V0KTsNCgkJ
dmFyIGRyYXdzaXplID0gdGhpcy5zaXplOw0KCQl2YXIgc2NhbGVkZHJhd3NpemUgPSBkcmF3c2l6
ZSAqIHRoaXMub3duZXIucGFydGljbGVzY2FsZTsNCgkJdmFyIGRyYXd4ID0gdGhpcy54IC0gZHJh
d3NpemUgLyAyOw0KCQl2YXIgZHJhd3kgPSB0aGlzLnkgLSBkcmF3c2l6ZSAvIDI7DQoJCWlmICh0
aGlzLm93bmVyLnJ1bnRpbWUucGl4ZWxfcm91bmRpbmcpDQoJCXsNCgkJCWRyYXd4ID0gKGRyYXd4
ICsgMC41KSB8IDA7DQoJCQlkcmF3eSA9IChkcmF3eSArIDAuNSkgfCAwOw0KCQl9DQoJCWlmIChz
Y2FsZWRkcmF3c2l6ZSA8IDEgfHwgY3Vyb3BhY2l0eSA9PT0gMCkNCgkJCXJldHVybjsNCgkJaWYg
KHNjYWxlZGRyYXdzaXplIDwgZ2x3Lm1pblBvaW50U2l6ZSB8fCBzY2FsZWRkcmF3c2l6ZSA+IGds
dy5tYXhQb2ludFNpemUpDQoJCXsNCgkJCWdsdy5zZXRPcGFjaXR5KGN1cm9wYWNpdHkpOw0KCQkJ
Z2x3LnF1YWQoZHJhd3gsIGRyYXd5LCBkcmF3eCArIGRyYXdzaXplLCBkcmF3eSwgZHJhd3ggKyBk
cmF3c2l6ZSwgZHJhd3kgKyBkcmF3c2l6ZSwgZHJhd3gsIGRyYXd5ICsgZHJhd3NpemUpOw0KCQl9
DQoJCWVsc2UNCgkJCWdsdy5wb2ludCh0aGlzLngsIHRoaXMueSwgc2NhbGVkZHJhd3NpemUsIGN1
cm9wYWNpdHkpOw0KCX07DQoJUGFydGljbGUucHJvdG90eXBlLmxlZnQgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJcmV0dXJuIHRoaXMueCAtIHRoaXMuc2l6ZSAvIDI7DQoJfTsNCglQYXJ0aWNsZS5wcm90
b3R5cGUucmlnaHQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMueCArIHRoaXMuc2l6
ZSAvIDI7DQoJfTsNCglQYXJ0aWNsZS5wcm90b3R5cGUudG9wID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CXJldHVybiB0aGlzLnkgLSB0aGlzLnNpemUgLyAyOw0KCX07DQoJUGFydGljbGUucHJvdG90eXBl
LmJvdHRvbSA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy55ICsgdGhpcy5zaXplIC8g
MjsNCgl9Ow0KCXBsdWdpblByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSkNCgl7DQoJCXRo
aXMudHlwZSA9IHR5cGU7DQoJCXRoaXMucnVudGltZSA9IHR5cGUucnVudGltZTsNCgl9Ow0KCXZh
ciBpbnN0YW5jZVByb3RvID0gcGx1Z2luUHJvdG8uSW5zdGFuY2UucHJvdG90eXBlOw0KCXZhciBk
ZWFkcGFydGljbGVzID0gW107DQoJaW5zdGFuY2VQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkN
Cgl7DQoJCXZhciBwcm9wcyA9IHRoaXMucHJvcGVydGllczsNCgkJdGhpcy5yYXRlID0gcHJvcHNb
MF07DQoJCXRoaXMuc3ByYXljb25lID0gY3IudG9fcmFkaWFucyhwcm9wc1sxXSk7DQoJCXRoaXMu
c3ByYXl0eXBlID0gcHJvcHNbMl07CQkJLy8gMCA9IGNvbnRpbnVvdXMsIDEgPSBvbmUtc2hvdA0K
CQl0aGlzLnNwcmF5aW5nID0gdHJ1ZTsJCQkJLy8gZm9yIGNvbnRpbnVvdXMgbW9kZSBvbmx5DQoJ
CXRoaXMuaW5pdHNwZWVkID0gcHJvcHNbM107DQoJCXRoaXMuaW5pdHNpemUgPSBwcm9wc1s0XTsN
CgkJdGhpcy5pbml0b3BhY2l0eSA9IHByb3BzWzVdIC8gMTAwLjA7DQoJCXRoaXMuZ3Jvd3JhdGUg
PSBwcm9wc1s2XTsNCgkJdGhpcy54cmFuZG9tID0gcHJvcHNbN107DQoJCXRoaXMueXJhbmRvbSA9
IHByb3BzWzhdOw0KCQl0aGlzLnNwZWVkcmFuZG9tID0gcHJvcHNbOV07DQoJCXRoaXMuc2l6ZXJh
bmRvbSA9IHByb3BzWzEwXTsNCgkJdGhpcy5ncm93cmFuZG9tID0gcHJvcHNbMTFdOw0KCQl0aGlz
LmFjYyA9IHByb3BzWzEyXTsNCgkJdGhpcy5nID0gcHJvcHNbMTNdOw0KCQl0aGlzLmxpZmVhbmds
ZXJhbmRvbSA9IHByb3BzWzE0XTsNCgkJdGhpcy5saWZlc3BlZWRyYW5kb20gPSBwcm9wc1sxNV07
DQoJCXRoaXMubGlmZW9wYWNpdHlyYW5kb20gPSBwcm9wc1sxNl07DQoJCXRoaXMuZGVzdHJveW1v
ZGUgPSBwcm9wc1sxN107CQkvLyAwID0gZmFkZSwgMSA9IHRpbWVvdXQsIDIgPSBzdG9wcGVkDQoJ
CXRoaXMudGltZW91dCA9IHByb3BzWzE4XTsNCgkJdGhpcy5wYXJ0aWNsZUNyZWF0ZUNvdW50ZXIg
PSAwOw0KCQl0aGlzLnBhcnRpY2xlc2NhbGUgPSAxOw0KCQl0aGlzLnBhcnRpY2xlQm94TGVmdCA9
IHRoaXMueDsNCgkJdGhpcy5wYXJ0aWNsZUJveFRvcCA9IHRoaXMueTsNCgkJdGhpcy5wYXJ0aWNs
ZUJveFJpZ2h0ID0gdGhpcy54Ow0KCQl0aGlzLnBhcnRpY2xlQm94Qm90dG9tID0gdGhpcy55Ow0K
CQl0aGlzLmFkZF9iYm94X2NoYW5nZWRfY2FsbGJhY2soZnVuY3Rpb24gKHNlbGYpIHsNCgkJCXNl
bGYuYmJveC5zZXQoc2VsZi5wYXJ0aWNsZUJveExlZnQsIHNlbGYucGFydGljbGVCb3hUb3AsIHNl
bGYucGFydGljbGVCb3hSaWdodCwgc2VsZi5wYXJ0aWNsZUJveEJvdHRvbSk7DQoJCQlzZWxmLmJx
dWFkLnNldF9mcm9tX3JlY3Qoc2VsZi5iYm94KTsNCgkJCXNlbGYuYmJveF9jaGFuZ2VkID0gZmFs
c2U7DQoJCQlzZWxmLnVwZGF0ZV9jb2xsaXNpb25fY2VsbCgpOw0KCQkJc2VsZi51cGRhdGVfcmVu
ZGVyX2NlbGwoKTsNCgkJfSk7DQoJCWlmICghdGhpcy5yZWN5Y2xlZCkNCgkJCXRoaXMucGFydGlj
bGVzID0gW107DQoJCXRoaXMucnVudGltZS50aWNrTWUodGhpcyk7DQoJCXRoaXMudHlwZS5sb2Fk
VGV4dHVyZXMoKTsNCgkJaWYgKHRoaXMuc3ByYXl0eXBlID09PSAxKQ0KCQl7DQoJCQlmb3IgKHZh
ciBpID0gMDsgaSA8IHRoaXMucmF0ZTsgaSsrKQ0KCQkJCXRoaXMuYWxsb2NhdGVQYXJ0aWNsZSgp
Lm9wYWNpdHkgPSAwOw0KCQl9DQoJCXRoaXMuZmlyc3RfdGljayA9IHRydWU7CQkvLyBmb3IgcmUt
aW5pdCdpbmcgb25lLXNob3QgcGFydGljbGVzIG9uIGZpcnN0IHRpY2sgc28gdGhleSBhc3N1bWUg
YW55IG5ldyBhbmdsZS9wb3NpdGlvbg0KCX07DQoJaW5zdGFuY2VQcm90by5zYXZlVG9KU09OID0g
ZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBvID0gew0KCQkJInIiOiB0aGlzLnJhdGUsDQoJCQkic2Mi
OiB0aGlzLnNwcmF5Y29uZSwNCgkJCSJzdCI6IHRoaXMuc3ByYXl0eXBlLA0KCQkJInMiOiB0aGlz
LnNwcmF5aW5nLA0KCQkJImlzcCI6IHRoaXMuaW5pdHNwZWVkLA0KCQkJImlzeiI6IHRoaXMuaW5p
dHNpemUsDQoJCQkiaW8iOiB0aGlzLmluaXRvcGFjaXR5LA0KCQkJImdyIjogdGhpcy5ncm93cmF0
ZSwNCgkJCSJ4ciI6IHRoaXMueHJhbmRvbSwNCgkJCSJ5ciI6IHRoaXMueXJhbmRvbSwNCgkJCSJz
cHIiOiB0aGlzLnNwZWVkcmFuZG9tLA0KCQkJInN6ciI6IHRoaXMuc2l6ZXJhbmRvbSwNCgkJCSJn
cm5kIjogdGhpcy5ncm93cmFuZG9tLA0KCQkJImFjYyI6IHRoaXMuYWNjLA0KCQkJImciOiB0aGlz
LmcsDQoJCQkibGFyIjogdGhpcy5saWZlYW5nbGVyYW5kb20sDQoJCQkibHNyIjogdGhpcy5saWZl
c3BlZWRyYW5kb20sDQoJCQkibG9yIjogdGhpcy5saWZlb3BhY2l0eXJhbmRvbSwNCgkJCSJkbSI6
IHRoaXMuZGVzdHJveW1vZGUsDQoJCQkidG8iOiB0aGlzLnRpbWVvdXQsDQoJCQkicGNjIjogdGhp
cy5wYXJ0aWNsZUNyZWF0ZUNvdW50ZXIsDQoJCQkiZnQiOiB0aGlzLmZpcnN0X3RpY2ssDQoJCQki
cCI6IFtdDQoJCX07DQoJCXZhciBpLCBsZW4sIHA7DQoJCXZhciBhcnIgPSBvWyJwIl07DQoJCWZv
ciAoaSA9IDAsIGxlbiA9IHRoaXMucGFydGljbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7
DQoJCQlwID0gdGhpcy5wYXJ0aWNsZXNbaV07DQoJCQlhcnIucHVzaChbcC54LCBwLnksIHAuc3Bl
ZWQsIHAuYW5nbGUsIHAub3BhY2l0eSwgcC5ncm93LCBwLnNpemUsIHAuZ3MsIHAuYWdlXSk7DQoJ
CX0NCgkJcmV0dXJuIG87DQoJfTsNCglpbnN0YW5jZVByb3RvLmxvYWRGcm9tSlNPTiA9IGZ1bmN0
aW9uIChvKQ0KCXsNCgkJdGhpcy5yYXRlID0gb1siciJdOw0KCQl0aGlzLnNwcmF5Y29uZSA9IG9b
InNjIl07DQoJCXRoaXMuc3ByYXl0eXBlID0gb1sic3QiXTsNCgkJdGhpcy5zcHJheWluZyA9IG9b
InMiXTsNCgkJdGhpcy5pbml0c3BlZWQgPSBvWyJpc3AiXTsNCgkJdGhpcy5pbml0c2l6ZSA9IG9b
ImlzeiJdOw0KCQl0aGlzLmluaXRvcGFjaXR5ID0gb1siaW8iXTsNCgkJdGhpcy5ncm93cmF0ZSA9
IG9bImdyIl07DQoJCXRoaXMueHJhbmRvbSA9IG9bInhyIl07DQoJCXRoaXMueXJhbmRvbSA9IG9b
InlyIl07DQoJCXRoaXMuc3BlZWRyYW5kb20gPSBvWyJzcHIiXTsNCgkJdGhpcy5zaXplcmFuZG9t
ID0gb1sic3pyIl07DQoJCXRoaXMuZ3Jvd3JhbmRvbSA9IG9bImdybmQiXTsNCgkJdGhpcy5hY2Mg
PSBvWyJhY2MiXTsNCgkJdGhpcy5nID0gb1siZyJdOw0KCQl0aGlzLmxpZmVhbmdsZXJhbmRvbSA9
IG9bImxhciJdOw0KCQl0aGlzLmxpZmVzcGVlZHJhbmRvbSA9IG9bImxzciJdOw0KCQl0aGlzLmxp
ZmVvcGFjaXR5cmFuZG9tID0gb1sibG9yIl07DQoJCXRoaXMuZGVzdHJveW1vZGUgPSBvWyJkbSJd
Ow0KCQl0aGlzLnRpbWVvdXQgPSBvWyJ0byJdOw0KCQl0aGlzLnBhcnRpY2xlQ3JlYXRlQ291bnRl
ciA9IG9bInBjYyJdOw0KCQl0aGlzLmZpcnN0X3RpY2sgPSBvWyJmdCJdOw0KCQlkZWFkcGFydGlj
bGVzLnB1c2guYXBwbHkoZGVhZHBhcnRpY2xlcywgdGhpcy5wYXJ0aWNsZXMpOw0KCQljci5jbGVh
ckFycmF5KHRoaXMucGFydGljbGVzKTsNCgkJdmFyIGksIGxlbiwgcCwgZDsNCgkJdmFyIGFyciA9
IG9bInAiXTsNCgkJZm9yIChpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0K
CQl7DQoJCQlwID0gdGhpcy5hbGxvY2F0ZVBhcnRpY2xlKCk7DQoJCQlkID0gYXJyW2ldOw0KCQkJ
cC54ID0gZFswXTsNCgkJCXAueSA9IGRbMV07DQoJCQlwLnNwZWVkID0gZFsyXTsNCgkJCXAuYW5n
bGUgPSBkWzNdOw0KCQkJcC5vcGFjaXR5ID0gZFs0XTsNCgkJCXAuZ3JvdyA9IGRbNV07DQoJCQlw
LnNpemUgPSBkWzZdOw0KCQkJcC5ncyA9IGRbN107DQoJCQlwLmFnZSA9IGRbOF07DQoJCX0NCgl9
Ow0KCWluc3RhbmNlUHJvdG8ub25EZXN0cm95ID0gZnVuY3Rpb24gKCkNCgl7DQoJCWRlYWRwYXJ0
aWNsZXMucHVzaC5hcHBseShkZWFkcGFydGljbGVzLCB0aGlzLnBhcnRpY2xlcyk7DQoJCWNyLmNs
ZWFyQXJyYXkodGhpcy5wYXJ0aWNsZXMpOw0KCX07DQoJaW5zdGFuY2VQcm90by5hbGxvY2F0ZVBh
cnRpY2xlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBwOw0KCQlpZiAoZGVhZHBhcnRpY2xlcy5s
ZW5ndGgpDQoJCXsNCgkJCXAgPSBkZWFkcGFydGljbGVzLnBvcCgpOw0KCQkJcC5vd25lciA9IHRo
aXM7DQoJCX0NCgkJZWxzZQ0KCQkJcCA9IG5ldyBQYXJ0aWNsZSh0aGlzKTsNCgkJdGhpcy5wYXJ0
aWNsZXMucHVzaChwKTsNCgkJcC5hY3RpdmUgPSB0cnVlOw0KCQlyZXR1cm4gcDsNCgl9Ow0KCWlu
c3RhbmNlUHJvdG8udGljayA9IGZ1bmN0aW9uKCkNCgl7DQoJCXZhciBkdCA9IHRoaXMucnVudGlt
ZS5nZXREdCh0aGlzKTsNCgkJdmFyIGksIGxlbiwgcCwgbiwgajsNCgkJaWYgKHRoaXMuc3ByYXl0
eXBlID09PSAwICYmIHRoaXMuc3ByYXlpbmcpDQoJCXsNCgkJCXRoaXMucGFydGljbGVDcmVhdGVD
b3VudGVyICs9IGR0ICogdGhpcy5yYXRlOw0KCQkJbiA9IGNyLmZsb29yKHRoaXMucGFydGljbGVD
cmVhdGVDb3VudGVyKTsNCgkJCXRoaXMucGFydGljbGVDcmVhdGVDb3VudGVyIC09IG47DQoJCQlm
b3IgKGkgPSAwOyBpIDwgbjsgaSsrKQ0KCQkJew0KCQkJCXAgPSB0aGlzLmFsbG9jYXRlUGFydGlj
bGUoKTsNCgkJCQlwLmluaXQoKTsNCgkJCX0NCgkJfQ0KCQl0aGlzLnBhcnRpY2xlQm94TGVmdCA9
IHRoaXMueDsNCgkJdGhpcy5wYXJ0aWNsZUJveFRvcCA9IHRoaXMueTsNCgkJdGhpcy5wYXJ0aWNs
ZUJveFJpZ2h0ID0gdGhpcy54Ow0KCQl0aGlzLnBhcnRpY2xlQm94Qm90dG9tID0gdGhpcy55Ow0K
CQlmb3IgKGkgPSAwLCBqID0gMCwgbGVuID0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoOyBpIDwgbGVu
OyBpKyspDQoJCXsNCgkJCXAgPSB0aGlzLnBhcnRpY2xlc1tpXTsNCgkJCXRoaXMucGFydGljbGVz
W2pdID0gcDsNCgkJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCQkJaWYgKHRoaXMuc3By
YXl0eXBlID09PSAxICYmIHRoaXMuZmlyc3RfdGljaykNCgkJCQlwLmluaXQoKTsNCgkJCXAudGlj
ayhkdCk7DQoJCQlpZiAoIXAuYWN0aXZlKQ0KCQkJew0KCQkJCWRlYWRwYXJ0aWNsZXMucHVzaChw
KTsNCgkJCQljb250aW51ZTsNCgkJCX0NCgkJCWlmIChwLmxlZnQoKSA8IHRoaXMucGFydGljbGVC
b3hMZWZ0KQ0KCQkJCXRoaXMucGFydGljbGVCb3hMZWZ0ID0gcC5sZWZ0KCk7DQoJCQlpZiAocC5y
aWdodCgpID4gdGhpcy5wYXJ0aWNsZUJveFJpZ2h0KQ0KCQkJCXRoaXMucGFydGljbGVCb3hSaWdo
dCA9IHAucmlnaHQoKTsNCgkJCWlmIChwLnRvcCgpIDwgdGhpcy5wYXJ0aWNsZUJveFRvcCkNCgkJ
CQl0aGlzLnBhcnRpY2xlQm94VG9wID0gcC50b3AoKTsNCgkJCWlmIChwLmJvdHRvbSgpID4gdGhp
cy5wYXJ0aWNsZUJveEJvdHRvbSkNCgkJCQl0aGlzLnBhcnRpY2xlQm94Qm90dG9tID0gcC5ib3R0
b20oKTsNCgkJCWorKzsNCgkJfQ0KCQljci50cnVuY2F0ZUFycmF5KHRoaXMucGFydGljbGVzLCBq
KTsNCgkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCXRoaXMuZmlyc3RfdGljayA9IGZhbHNl
Ow0KCQlpZiAodGhpcy5zcHJheXR5cGUgPT09IDEgJiYgdGhpcy5wYXJ0aWNsZXMubGVuZ3RoID09
PSAwKQ0KCQkJdGhpcy5ydW50aW1lLkRlc3Ryb3lJbnN0YW5jZSh0aGlzKTsNCgl9Ow0KCWluc3Rh
bmNlUHJvdG8uZHJhdyA9IGZ1bmN0aW9uIChjdHgpDQoJew0KCQl2YXIgaSwgbGVuLCBwLCBsYXll
ciA9IHRoaXMubGF5ZXI7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMucGFydGljbGVzLmxlbmd0
aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlwID0gdGhpcy5wYXJ0aWNsZXNbaV07DQoJCQlpZiAo
cC5yaWdodCgpID49IGxheWVyLnZpZXdMZWZ0ICYmIHAuYm90dG9tKCkgPj0gbGF5ZXIudmlld1Rv
cCAmJiBwLmxlZnQoKSA8PSBsYXllci52aWV3UmlnaHQgJiYgcC50b3AoKSA8PSBsYXllci52aWV3
Qm90dG9tKQ0KCQkJew0KCQkJCXAuZHJhdyhjdHgpOw0KCQkJfQ0KCQl9DQoJfTsNCglpbnN0YW5j
ZVByb3RvLmRyYXdHTCA9IGZ1bmN0aW9uIChnbHcpDQoJew0KCQl0aGlzLnBhcnRpY2xlc2NhbGUg
PSB0aGlzLmxheWVyLmdldFNjYWxlKCk7DQoJCWdsdy5zZXRUZXh0dXJlKHRoaXMudHlwZS53ZWJH
TF90ZXh0dXJlKTsNCgkJdmFyIGksIGxlbiwgcCwgbGF5ZXIgPSB0aGlzLmxheWVyOw0KCQlmb3Ig
KGkgPSAwLCBsZW4gPSB0aGlzLnBhcnRpY2xlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0K
CQkJcCA9IHRoaXMucGFydGljbGVzW2ldOw0KCQkJaWYgKHAucmlnaHQoKSA+PSBsYXllci52aWV3
TGVmdCAmJiBwLmJvdHRvbSgpID49IGxheWVyLnZpZXdUb3AgJiYgcC5sZWZ0KCkgPD0gbGF5ZXIu
dmlld1JpZ2h0ICYmIHAudG9wKCkgPD0gbGF5ZXIudmlld0JvdHRvbSkNCgkJCXsNCgkJCQlwLmRy
YXdHTChnbHcpOw0KCQkJfQ0KCQl9DQoJfTsNCglmdW5jdGlvbiBDbmRzKCkge307DQoJQ25kcy5w
cm90b3R5cGUuSXNTcHJheWluZyA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5zcHJh
eWluZzsNCgl9Ow0KCXBsdWdpblByb3RvLmNuZHMgPSBuZXcgQ25kcygpOw0KCWZ1bmN0aW9uIEFj
dHMoKSB7fTsNCglBY3RzLnByb3RvdHlwZS5TZXRTcHJheWluZyA9IGZ1bmN0aW9uIChzZXRfKQ0K
CXsNCgkJdGhpcy5zcHJheWluZyA9IChzZXRfICE9PSAwKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBl
LlNldEVmZmVjdCA9IGZ1bmN0aW9uIChlZmZlY3QpDQoJew0KCQl0aGlzLmJsZW5kX21vZGUgPSBl
ZmZlY3Q7DQoJCXRoaXMuY29tcG9zaXRlT3AgPSBjci5lZmZlY3RUb0NvbXBvc2l0ZU9wKGVmZmVj
dCk7DQoJCWNyLnNldEdMQmxlbmQodGhpcywgZWZmZWN0LCB0aGlzLnJ1bnRpbWUuZ2wpOw0KCQl0
aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFJhdGUg
PSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMucmF0ZSA9IHg7DQoJCXZhciBkaWZmLCBpOw0KCQlp
ZiAodGhpcy5zcHJheXR5cGUgPT09IDEgJiYgdGhpcy5maXJzdF90aWNrKQ0KCQl7DQoJCQlpZiAo
eCA8IHRoaXMucGFydGljbGVzLmxlbmd0aCkNCgkJCXsNCgkJCQlkaWZmID0gdGhpcy5wYXJ0aWNs
ZXMubGVuZ3RoIC0geDsNCgkJCQlmb3IgKGkgPSAwOyBpIDwgZGlmZjsgaSsrKQ0KCQkJCQlkZWFk
cGFydGljbGVzLnB1c2godGhpcy5wYXJ0aWNsZXMucG9wKCkpOw0KCQkJfQ0KCQkJZWxzZSBpZiAo
eCA+IHRoaXMucGFydGljbGVzLmxlbmd0aCkNCgkJCXsNCgkJCQlkaWZmID0geCAtIHRoaXMucGFy
dGljbGVzLmxlbmd0aDsNCgkJCQlmb3IgKGkgPSAwOyBpIDwgZGlmZjsgaSsrKQ0KCQkJCQl0aGlz
LmFsbG9jYXRlUGFydGljbGUoKS5vcGFjaXR5ID0gMDsNCgkJCX0NCgkJfQ0KCX07DQoJQWN0cy5w
cm90b3R5cGUuU2V0U3ByYXlDb25lID0gZnVuY3Rpb24gKHgpDQoJew0KCQl0aGlzLnNwcmF5Y29u
ZSA9IGNyLnRvX3JhZGlhbnMoeCk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRJbml0U3BlZWQg
PSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMuaW5pdHNwZWVkID0geDsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLlNldEluaXRTaXplID0gZnVuY3Rpb24gKHgpDQoJew0KCQl0aGlzLmluaXRzaXplID0g
eDsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEluaXRPcGFjaXR5ID0gZnVuY3Rpb24gKHgpDQoJ
ew0KCQl0aGlzLmluaXRvcGFjaXR5ID0geCAvIDEwMDsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNl
dEdyb3dSYXRlID0gZnVuY3Rpb24gKHgpDQoJew0KCQl0aGlzLmdyb3dyYXRlID0geDsNCgl9Ow0K
CUFjdHMucHJvdG90eXBlLlNldFhSYW5kb21pc2VyID0gZnVuY3Rpb24gKHgpDQoJew0KCQl0aGlz
LnhyYW5kb20gPSB4Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0WVJhbmRvbWlzZXIgPSBmdW5j
dGlvbiAoeCkNCgl7DQoJCXRoaXMueXJhbmRvbSA9IHg7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5T
ZXRTcGVlZFJhbmRvbWlzZXIgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMuc3BlZWRyYW5kb20g
PSB4Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0U2l6ZVJhbmRvbWlzZXIgPSBmdW5jdGlvbiAo
eCkNCgl7DQoJCXRoaXMuc2l6ZXJhbmRvbSA9IHg7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRH
cm93UmF0ZVJhbmRvbWlzZXIgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMuZ3Jvd3JhbmRvbSA9
IHg7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRQYXJ0aWNsZUFjYyA9IGZ1bmN0aW9uICh4KQ0K
CXsNCgkJdGhpcy5hY2MgPSB4Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0R3Jhdml0eSA9IGZ1
bmN0aW9uICh4KQ0KCXsNCgkJdGhpcy5nID0geDsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEFu
Z2xlUmFuZG9taXNlciA9IGZ1bmN0aW9uICh4KQ0KCXsNCgkJdGhpcy5saWZlYW5nbGVyYW5kb20g
PSB4Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0TGlmZVNwZWVkUmFuZG9taXNlciA9IGZ1bmN0
aW9uICh4KQ0KCXsNCgkJdGhpcy5saWZlc3BlZWRyYW5kb20gPSB4Ow0KCX07DQoJQWN0cy5wcm90
b3R5cGUuU2V0T3BhY2l0eVJhbmRvbWlzZXIgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMubGlm
ZW9wYWNpdHlyYW5kb20gPSB4Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0VGltZW91dCA9IGZ1
bmN0aW9uICh4KQ0KCXsNCgkJdGhpcy50aW1lb3V0ID0geDsNCgl9Ow0KCXBsdWdpblByb3RvLmFj
dHMgPSBuZXcgQWN0cygpOw0KCWZ1bmN0aW9uIEV4cHMoKSB7fTsNCglFeHBzLnByb3RvdHlwZS5Q
YXJ0aWNsZUNvdW50ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfaW50KHRoaXMucGFy
dGljbGVzLmxlbmd0aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5SYXRlID0gZnVuY3Rpb24gKHJl
dCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5yYXRlKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBl
LlNwcmF5Q29uZSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KGNyLnRvX2Rl
Z3JlZXModGhpcy5zcHJheWNvbmUpKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkluaXRTcGVlZCA9
IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuaW5pdHNwZWVkKTsNCgl9
Ow0KCUV4cHMucHJvdG90eXBlLkluaXRTaXplID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5z
ZXRfZmxvYXQodGhpcy5pbml0c2l6ZSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5Jbml0T3BhY2l0
eSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuaW5pdG9wYWNpdHkg
KiAxMDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuSW5pdEdyb3dSYXRlID0gZnVuY3Rpb24gKHJl
dCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5ncm93cmF0ZSk7DQoJfTsNCglFeHBzLnByb3Rv
dHlwZS5YUmFuZG9tID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy54
cmFuZG9tKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLllSYW5kb20gPSBmdW5jdGlvbiAocmV0KQ0K
CXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLnlyYW5kb20pOw0KCX07DQoJRXhwcy5wcm90b3R5cGUu
SW5pdFNwZWVkUmFuZG9tID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhp
cy5zcGVlZHJhbmRvbSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5Jbml0U2l6ZVJhbmRvbSA9IGZ1
bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuc2l6ZXJhbmRvbSk7DQoJfTsN
CglFeHBzLnByb3RvdHlwZS5Jbml0R3Jvd1JhbmRvbSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQly
ZXQuc2V0X2Zsb2F0KHRoaXMuZ3Jvd3JhbmRvbSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5QYXJ0
aWNsZUFjY2VsZXJhdGlvbiA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRo
aXMuYWNjKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkdyYXZpdHkgPSBmdW5jdGlvbiAocmV0KQ0K
CXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmcpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuUGFydGlj
bGVBbmdsZVJhbmRvbSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMu
bGlmZWFuZ2xlcmFuZG9tKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlBhcnRpY2xlU3BlZWRSYW5k
b20gPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmxpZmVzcGVlZHJh
bmRvbSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5QYXJ0aWNsZU9wYWNpdHlSYW5kb20gPSBmdW5j
dGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmxpZmVvcGFjaXR5cmFuZG9tKTsN
Cgl9Ow0KCUV4cHMucHJvdG90eXBlLlRpbWVvdXQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0
LnNldF9mbG9hdCh0aGlzLnRpbWVvdXQpOw0KCX07DQoJcGx1Z2luUHJvdG8uZXhwcyA9IG5ldyBF
eHBzKCk7DQp9KCkpOw0KOw0KOw0KY3IucGx1Z2luc18uU3ByaXRlID0gZnVuY3Rpb24ocnVudGlt
ZSkNCnsNCgl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0KfTsNCihmdW5jdGlvbiAoKQ0Kew0KCXZh
ciBwbHVnaW5Qcm90byA9IGNyLnBsdWdpbnNfLlNwcml0ZS5wcm90b3R5cGU7DQoJcGx1Z2luUHJv
dG8uVHlwZSA9IGZ1bmN0aW9uKHBsdWdpbikNCgl7DQoJCXRoaXMucGx1Z2luID0gcGx1Z2luOw0K
CQl0aGlzLnJ1bnRpbWUgPSBwbHVnaW4ucnVudGltZTsNCgl9Ow0KCXZhciB0eXBlUHJvdG8gPSBw
bHVnaW5Qcm90by5UeXBlLnByb3RvdHlwZTsNCglmdW5jdGlvbiBmcmFtZV9nZXREYXRhVXJpKCkN
Cgl7DQoJCWlmICh0aGlzLmRhdGF1cmkubGVuZ3RoID09PSAwKQ0KCQl7DQoJCQl2YXIgdG1wY2Fu
dmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7DQoJCQl0bXBjYW52YXMud2lk
dGggPSB0aGlzLndpZHRoOw0KCQkJdG1wY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0Ow0KCQkJ
dmFyIHRtcGN0eCA9IHRtcGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOw0KCQkJaWYgKHRoaXMuc3By
aXRlc2hlZXRlZCkNCgkJCXsNCgkJCQl0bXBjdHguZHJhd0ltYWdlKHRoaXMudGV4dHVyZV9pbWcs
IHRoaXMub2ZmeCwgdGhpcy5vZmZ5LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwNCgkJCQkJCQkJ
CQkgMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0K
CQkJCXRtcGN0eC5kcmF3SW1hZ2UodGhpcy50ZXh0dXJlX2ltZywgMCwgMCwgdGhpcy53aWR0aCwg
dGhpcy5oZWlnaHQpOw0KCQkJfQ0KCQkJdGhpcy5kYXRhdXJpID0gdG1wY2FudmFzLnRvRGF0YVVS
TCgiaW1hZ2UvcG5nIik7DQoJCX0NCgkJcmV0dXJuIHRoaXMuZGF0YXVyaTsNCgl9Ow0KCXR5cGVQ
cm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSkNCgkJ
CXJldHVybjsNCgkJdmFyIGksIGxlbmksIGosIGxlbmo7DQoJCXZhciBhbmltLCBmcmFtZSwgYW5p
bW9iaiwgZnJhbWVvYmosIHd0LCB1djsNCgkJdGhpcy5hbGxfZnJhbWVzID0gW107DQoJCXRoaXMu
aGFzX2xvYWRlZF90ZXh0dXJlcyA9IGZhbHNlOw0KCQlmb3IgKGkgPSAwLCBsZW5pID0gdGhpcy5h
bmltYXRpb25zLmxlbmd0aDsgaSA8IGxlbmk7IGkrKykNCgkJew0KCQkJYW5pbSA9IHRoaXMuYW5p
bWF0aW9uc1tpXTsNCgkJCWFuaW1vYmogPSB7fTsNCgkJCWFuaW1vYmoubmFtZSA9IGFuaW1bMF07
DQoJCQlhbmltb2JqLnNwZWVkID0gYW5pbVsxXTsNCgkJCWFuaW1vYmoubG9vcCA9IGFuaW1bMl07
DQoJCQlhbmltb2JqLnJlcGVhdGNvdW50ID0gYW5pbVszXTsNCgkJCWFuaW1vYmoucmVwZWF0dG8g
PSBhbmltWzRdOw0KCQkJYW5pbW9iai5waW5ncG9uZyA9IGFuaW1bNV07DQoJCQlhbmltb2JqLnNp
ZCA9IGFuaW1bNl07DQoJCQlhbmltb2JqLmZyYW1lcyA9IFtdOw0KCQkJZm9yIChqID0gMCwgbGVu
aiA9IGFuaW1bN10ubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJew0KCQkJCWZyYW1lID0gYW5p
bVs3XVtqXTsNCgkJCQlmcmFtZW9iaiA9IHt9Ow0KCQkJCWZyYW1lb2JqLnRleHR1cmVfZmlsZSA9
IGZyYW1lWzBdOw0KCQkJCWZyYW1lb2JqLnRleHR1cmVfZmlsZXNpemUgPSBmcmFtZVsxXTsNCgkJ
CQlmcmFtZW9iai5vZmZ4ID0gZnJhbWVbMl07DQoJCQkJZnJhbWVvYmoub2ZmeSA9IGZyYW1lWzNd
Ow0KCQkJCWZyYW1lb2JqLndpZHRoID0gZnJhbWVbNF07DQoJCQkJZnJhbWVvYmouaGVpZ2h0ID0g
ZnJhbWVbNV07DQoJCQkJZnJhbWVvYmouZHVyYXRpb24gPSBmcmFtZVs2XTsNCgkJCQlmcmFtZW9i
ai5ob3RzcG90WCA9IGZyYW1lWzddOw0KCQkJCWZyYW1lb2JqLmhvdHNwb3RZID0gZnJhbWVbOF07
DQoJCQkJZnJhbWVvYmouaW1hZ2VfcG9pbnRzID0gZnJhbWVbOV07DQoJCQkJZnJhbWVvYmoucG9s
eV9wdHMgPSBmcmFtZVsxMF07DQoJCQkJZnJhbWVvYmoucGl4ZWxmb3JtYXQgPSBmcmFtZVsxMV07
DQoJCQkJZnJhbWVvYmouc3ByaXRlc2hlZXRlZCA9IChmcmFtZW9iai53aWR0aCAhPT0gMCk7DQoJ
CQkJZnJhbWVvYmouZGF0YXVyaSA9ICIiOwkJLy8gZ2VuZXJhdGVkIG9uIGRlbWFuZCBhbmQgY2Fj
aGVkDQoJCQkJZnJhbWVvYmouZ2V0RGF0YVVyaSA9IGZyYW1lX2dldERhdGFVcmk7DQoJCQkJdXYg
PSB7fTsNCgkJCQl1di5sZWZ0ID0gMDsNCgkJCQl1di50b3AgPSAwOw0KCQkJCXV2LnJpZ2h0ID0g
MTsNCgkJCQl1di5ib3R0b20gPSAxOw0KCQkJCWZyYW1lb2JqLnNoZWV0VGV4ID0gdXY7DQoJCQkJ
ZnJhbWVvYmoud2ViR0xfdGV4dHVyZSA9IG51bGw7DQoJCQkJd3QgPSB0aGlzLnJ1bnRpbWUuZmlu
ZFdhaXRpbmdUZXh0dXJlKGZyYW1lWzBdKTsNCgkJCQlpZiAod3QpDQoJCQkJew0KCQkJCQlmcmFt
ZW9iai50ZXh0dXJlX2ltZyA9IHd0Ow0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQlmcmFt
ZW9iai50ZXh0dXJlX2ltZyA9IG5ldyBJbWFnZSgpOw0KCQkJCQlmcmFtZW9iai50ZXh0dXJlX2lt
Zy5jcl9zcmMgPSBmcmFtZVswXTsNCgkJCQkJZnJhbWVvYmoudGV4dHVyZV9pbWcuY3JfZmlsZXNp
emUgPSBmcmFtZVsxXTsNCgkJCQkJZnJhbWVvYmoudGV4dHVyZV9pbWcuYzJ3ZWJHTF90ZXh0dXJl
ID0gbnVsbDsNCgkJCQkJdGhpcy5ydW50aW1lLndhaXRGb3JJbWFnZUxvYWQoZnJhbWVvYmoudGV4
dHVyZV9pbWcsIGZyYW1lWzBdKTsNCgkJCQl9DQoJCQkJY3Iuc2VhbChmcmFtZW9iaik7DQoJCQkJ
YW5pbW9iai5mcmFtZXMucHVzaChmcmFtZW9iaik7DQoJCQkJdGhpcy5hbGxfZnJhbWVzLnB1c2go
ZnJhbWVvYmopOw0KCQkJfQ0KCQkJY3Iuc2VhbChhbmltb2JqKTsNCgkJCXRoaXMuYW5pbWF0aW9u
c1tpXSA9IGFuaW1vYmo7CQkvLyBzd2FwIGFycmF5IGRhdGEgZm9yIG9iamVjdA0KCQl9DQoJfTsN
Cgl0eXBlUHJvdG8udXBkYXRlQWxsQ3VycmVudFRleHR1cmUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
dmFyIGksIGxlbiwgaW5zdDsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy5pbnN0YW5jZXMubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCWluc3QgPSB0aGlzLmluc3RhbmNlc1tpXTsNCgkJ
CWluc3QuY3VyV2ViR0xUZXh0dXJlID0gaW5zdC5jdXJGcmFtZS53ZWJHTF90ZXh0dXJlOw0KCQl9
DQoJfTsNCgl0eXBlUHJvdG8ub25Mb3N0V2ViR0xDb250ZXh0ID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CWlmICh0aGlzLmlzX2ZhbWlseSkNCgkJCXJldHVybjsNCgkJdmFyIGksIGxlbiwgZnJhbWU7DQoJ
CWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuYWxsX2ZyYW1lcy5sZW5ndGg7IGkgPCBsZW47ICsraSkN
CgkJew0KCQkJZnJhbWUgPSB0aGlzLmFsbF9mcmFtZXNbaV07DQoJCQlmcmFtZS50ZXh0dXJlX2lt
Zy5jMndlYkdMX3RleHR1cmUgPSBudWxsOw0KCQkJZnJhbWUud2ViR0xfdGV4dHVyZSA9IG51bGw7
DQoJCX0NCgkJdGhpcy5oYXNfbG9hZGVkX3RleHR1cmVzID0gZmFsc2U7DQoJCXRoaXMudXBkYXRl
QWxsQ3VycmVudFRleHR1cmUoKTsNCgl9Ow0KCXR5cGVQcm90by5vblJlc3RvcmVXZWJHTENvbnRl
eHQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMuaXNfZmFtaWx5IHx8ICF0aGlzLmluc3Rh
bmNlcy5sZW5ndGgpDQoJCQlyZXR1cm47DQoJCXZhciBpLCBsZW4sIGZyYW1lOw0KCQlmb3IgKGkg
PSAwLCBsZW4gPSB0aGlzLmFsbF9mcmFtZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJ
CWZyYW1lID0gdGhpcy5hbGxfZnJhbWVzW2ldOw0KCQkJZnJhbWUud2ViR0xfdGV4dHVyZSA9IHRo
aXMucnVudGltZS5nbHdyYXAubG9hZFRleHR1cmUoZnJhbWUudGV4dHVyZV9pbWcsIGZhbHNlLCB0
aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcsIGZyYW1lLnBpeGVsZm9ybWF0KTsNCgkJfQ0KCQl0
aGlzLnVwZGF0ZUFsbEN1cnJlbnRUZXh0dXJlKCk7DQoJfTsNCgl0eXBlUHJvdG8ubG9hZFRleHR1
cmVzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSB8fCB0aGlzLmhhc19s
b2FkZWRfdGV4dHVyZXMgfHwgIXRoaXMucnVudGltZS5nbHdyYXApDQoJCQlyZXR1cm47DQoJCXZh
ciBpLCBsZW4sIGZyYW1lOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmFsbF9mcmFtZXMubGVu
Z3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCWZyYW1lID0gdGhpcy5hbGxfZnJhbWVzW2ldOw0K
CQkJZnJhbWUud2ViR0xfdGV4dHVyZSA9IHRoaXMucnVudGltZS5nbHdyYXAubG9hZFRleHR1cmUo
ZnJhbWUudGV4dHVyZV9pbWcsIGZhbHNlLCB0aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcsIGZy
YW1lLnBpeGVsZm9ybWF0KTsNCgkJfQ0KCQl0aGlzLmhhc19sb2FkZWRfdGV4dHVyZXMgPSB0cnVl
Ow0KCX07DQoJdHlwZVByb3RvLnVubG9hZFRleHR1cmVzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlm
ICh0aGlzLmlzX2ZhbWlseSB8fCB0aGlzLmluc3RhbmNlcy5sZW5ndGggfHwgIXRoaXMuaGFzX2xv
YWRlZF90ZXh0dXJlcykNCgkJCXJldHVybjsNCgkJdmFyIGksIGxlbiwgZnJhbWU7DQoJCWZvciAo
aSA9IDAsIGxlbiA9IHRoaXMuYWxsX2ZyYW1lcy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJew0K
CQkJZnJhbWUgPSB0aGlzLmFsbF9mcmFtZXNbaV07DQoJCQl0aGlzLnJ1bnRpbWUuZ2x3cmFwLmRl
bGV0ZVRleHR1cmUoZnJhbWUud2ViR0xfdGV4dHVyZSk7DQoJCQlmcmFtZS53ZWJHTF90ZXh0dXJl
ID0gbnVsbDsNCgkJfQ0KCQl0aGlzLmhhc19sb2FkZWRfdGV4dHVyZXMgPSBmYWxzZTsNCgl9Ow0K
CXZhciBhbHJlYWR5X2RyYXduX2ltYWdlcyA9IFtdOw0KCXR5cGVQcm90by5wcmVsb2FkQ2FudmFz
MkQgPSBmdW5jdGlvbiAoY3R4KQ0KCXsNCgkJdmFyIGksIGxlbiwgZnJhbWVpbWc7DQoJCWNyLmNs
ZWFyQXJyYXkoYWxyZWFkeV9kcmF3bl9pbWFnZXMpOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlz
LmFsbF9mcmFtZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCXsNCgkJCWZyYW1laW1nID0gdGhp
cy5hbGxfZnJhbWVzW2ldLnRleHR1cmVfaW1nOw0KCQkJaWYgKGFscmVhZHlfZHJhd25faW1hZ2Vz
LmluZGV4T2YoZnJhbWVpbWcpICE9PSAtMSkNCgkJCQkJY29udGludWU7DQoJCQljdHguZHJhd0lt
YWdlKGZyYW1laW1nLCAwLCAwKTsNCgkJCWFscmVhZHlfZHJhd25faW1hZ2VzLnB1c2goZnJhbWVp
bWcpOw0KCQl9DQoJfTsNCglwbHVnaW5Qcm90by5JbnN0YW5jZSA9IGZ1bmN0aW9uKHR5cGUpDQoJ
ew0KCQl0aGlzLnR5cGUgPSB0eXBlOw0KCQl0aGlzLnJ1bnRpbWUgPSB0eXBlLnJ1bnRpbWU7DQoJ
CXZhciBwb2x5X3B0cyA9IHRoaXMudHlwZS5hbmltYXRpb25zWzBdLmZyYW1lc1swXS5wb2x5X3B0
czsNCgkJaWYgKHRoaXMucmVjeWNsZWQpDQoJCQl0aGlzLmNvbGxpc2lvbl9wb2x5LnNldF9wdHMo
cG9seV9wdHMpOw0KCQllbHNlDQoJCQl0aGlzLmNvbGxpc2lvbl9wb2x5ID0gbmV3IGNyLkNvbGxp
c2lvblBvbHkocG9seV9wdHMpOw0KCX07DQoJdmFyIGluc3RhbmNlUHJvdG8gPSBwbHVnaW5Qcm90
by5JbnN0YW5jZS5wcm90b3R5cGU7DQoJaW5zdGFuY2VQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9u
KCkNCgl7DQoJCXRoaXMudmlzaWJsZSA9ICh0aGlzLnByb3BlcnRpZXNbMF0gPT09IDApOwkvLyAw
PXZpc2libGUsIDE9aW52aXNpYmxlDQoJCXRoaXMuaXNUaWNraW5nID0gZmFsc2U7DQoJCXRoaXMu
aW5BbmltVHJpZ2dlciA9IGZhbHNlOw0KCQl0aGlzLmNvbGxpc2lvbnNFbmFibGVkID0gKHRoaXMu
cHJvcGVydGllc1szXSAhPT0gMCk7DQoJCXRoaXMuY3VyX2FuaW1hdGlvbiA9IHRoaXMuZ2V0QW5p
bWF0aW9uQnlOYW1lKHRoaXMucHJvcGVydGllc1sxXSkgfHwgdGhpcy50eXBlLmFuaW1hdGlvbnNb
MF07DQoJCXRoaXMuY3VyX2ZyYW1lID0gdGhpcy5wcm9wZXJ0aWVzWzJdOw0KCQlpZiAodGhpcy5j
dXJfZnJhbWUgPCAwKQ0KCQkJdGhpcy5jdXJfZnJhbWUgPSAwOw0KCQlpZiAodGhpcy5jdXJfZnJh
bWUgPj0gdGhpcy5jdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGgpDQoJCQl0aGlzLmN1cl9mcmFt
ZSA9IHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXMubGVuZ3RoIC0gMTsNCgkJdmFyIGN1cmFuaW1m
cmFtZSA9IHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXNbdGhpcy5jdXJfZnJhbWVdOw0KCQl0aGlz
LmNvbGxpc2lvbl9wb2x5LnNldF9wdHMoY3VyYW5pbWZyYW1lLnBvbHlfcHRzKTsNCgkJdGhpcy5o
b3RzcG90WCA9IGN1cmFuaW1mcmFtZS5ob3RzcG90WDsNCgkJdGhpcy5ob3RzcG90WSA9IGN1cmFu
aW1mcmFtZS5ob3RzcG90WTsNCgkJdGhpcy5jdXJfYW5pbV9zcGVlZCA9IHRoaXMuY3VyX2FuaW1h
dGlvbi5zcGVlZDsNCgkJdGhpcy5jdXJfYW5pbV9yZXBlYXR0byA9IHRoaXMuY3VyX2FuaW1hdGlv
bi5yZXBlYXR0bzsNCgkJaWYgKCEodGhpcy50eXBlLmFuaW1hdGlvbnMubGVuZ3RoID09PSAxICYm
IHRoaXMudHlwZS5hbmltYXRpb25zWzBdLmZyYW1lcy5sZW5ndGggPT09IDEpICYmIHRoaXMuY3Vy
X2FuaW1fc3BlZWQgIT09IDApDQoJCXsNCgkJCXRoaXMucnVudGltZS50aWNrTWUodGhpcyk7DQoJ
CQl0aGlzLmlzVGlja2luZyA9IHRydWU7DQoJCX0NCgkJaWYgKHRoaXMucmVjeWNsZWQpDQoJCQl0
aGlzLmFuaW1UaW1lci5yZXNldCgpOw0KCQllbHNlDQoJCQl0aGlzLmFuaW1UaW1lciA9IG5ldyBj
ci5LYWhhbkFkZGVyKCk7DQoJCXRoaXMuZnJhbWVTdGFydCA9IHRoaXMuZ2V0Tm93VGltZSgpOw0K
CQl0aGlzLmFuaW1QbGF5aW5nID0gdHJ1ZTsNCgkJdGhpcy5hbmltUmVwZWF0cyA9IDA7DQoJCXRo
aXMuYW5pbUZvcndhcmRzID0gdHJ1ZTsNCgkJdGhpcy5hbmltVHJpZ2dlck5hbWUgPSAiIjsNCgkJ
dGhpcy5jaGFuZ2VBbmltTmFtZSA9ICIiOw0KCQl0aGlzLmNoYW5nZUFuaW1Gcm9tID0gMDsNCgkJ
dGhpcy5jaGFuZ2VBbmltRnJhbWUgPSAtMTsNCgkJdGhpcy50eXBlLmxvYWRUZXh0dXJlcygpOw0K
CQl2YXIgaSwgbGVuaSwgaiwgbGVuajsNCgkJdmFyIGFuaW0sIGZyYW1lLCB1diwgbWFpbnRleDsN
CgkJZm9yIChpID0gMCwgbGVuaSA9IHRoaXMudHlwZS5hbmltYXRpb25zLmxlbmd0aDsgaSA8IGxl
bmk7IGkrKykNCgkJew0KCQkJYW5pbSA9IHRoaXMudHlwZS5hbmltYXRpb25zW2ldOw0KCQkJZm9y
IChqID0gMCwgbGVuaiA9IGFuaW0uZnJhbWVzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykNCgkJCXsN
CgkJCQlmcmFtZSA9IGFuaW0uZnJhbWVzW2pdOw0KCQkJCWlmIChmcmFtZS53aWR0aCA9PT0gMCkN
CgkJCQl7DQoJCQkJCWZyYW1lLndpZHRoID0gZnJhbWUudGV4dHVyZV9pbWcud2lkdGg7DQoJCQkJ
CWZyYW1lLmhlaWdodCA9IGZyYW1lLnRleHR1cmVfaW1nLmhlaWdodDsNCgkJCQl9DQoJCQkJaWYg
KGZyYW1lLnNwcml0ZXNoZWV0ZWQpDQoJCQkJew0KCQkJCQltYWludGV4ID0gZnJhbWUudGV4dHVy
ZV9pbWc7DQoJCQkJCXV2ID0gZnJhbWUuc2hlZXRUZXg7DQoJCQkJCXV2LmxlZnQgPSBmcmFtZS5v
ZmZ4IC8gbWFpbnRleC53aWR0aDsNCgkJCQkJdXYudG9wID0gZnJhbWUub2ZmeSAvIG1haW50ZXgu
aGVpZ2h0Ow0KCQkJCQl1di5yaWdodCA9IChmcmFtZS5vZmZ4ICsgZnJhbWUud2lkdGgpIC8gbWFp
bnRleC53aWR0aDsNCgkJCQkJdXYuYm90dG9tID0gKGZyYW1lLm9mZnkgKyBmcmFtZS5oZWlnaHQp
IC8gbWFpbnRleC5oZWlnaHQ7DQoJCQkJCWlmIChmcmFtZS5vZmZ4ID09PSAwICYmIGZyYW1lLm9m
ZnkgPT09IDAgJiYgZnJhbWUud2lkdGggPT09IG1haW50ZXgud2lkdGggJiYgZnJhbWUuaGVpZ2h0
ID09PSBtYWludGV4LmhlaWdodCkNCgkJCQkJew0KCQkJCQkJZnJhbWUuc3ByaXRlc2hlZXRlZCA9
IGZhbHNlOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCXRoaXMuY3VyRnJhbWUgPSB0aGlz
LmN1cl9hbmltYXRpb24uZnJhbWVzW3RoaXMuY3VyX2ZyYW1lXTsNCgkJdGhpcy5jdXJXZWJHTFRl
eHR1cmUgPSB0aGlzLmN1ckZyYW1lLndlYkdMX3RleHR1cmU7DQoJfTsNCglpbnN0YW5jZVByb3Rv
LnNhdmVUb0pTT04gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIG8gPSB7DQoJCQkiYSI6IHRoaXMu
Y3VyX2FuaW1hdGlvbi5zaWQsDQoJCQkiZiI6IHRoaXMuY3VyX2ZyYW1lLA0KCQkJImNhcyI6IHRo
aXMuY3VyX2FuaW1fc3BlZWQsDQoJCQkiZnMiOiB0aGlzLmZyYW1lU3RhcnQsDQoJCQkiYXIiOiB0
aGlzLmFuaW1SZXBlYXRzLA0KCQkJImF0IjogdGhpcy5hbmltVGltZXIuc3VtLA0KCQkJInJ0Ijog
dGhpcy5jdXJfYW5pbV9yZXBlYXR0bw0KCQl9Ow0KCQlpZiAoIXRoaXMuYW5pbVBsYXlpbmcpDQoJ
CQlvWyJhcCJdID0gdGhpcy5hbmltUGxheWluZzsNCgkJaWYgKCF0aGlzLmFuaW1Gb3J3YXJkcykN
CgkJCW9bImFmIl0gPSB0aGlzLmFuaW1Gb3J3YXJkczsNCgkJcmV0dXJuIG87DQoJfTsNCglpbnN0
YW5jZVByb3RvLmxvYWRGcm9tSlNPTiA9IGZ1bmN0aW9uIChvKQ0KCXsNCgkJdmFyIGFuaW0gPSB0
aGlzLmdldEFuaW1hdGlvbkJ5U2lkKG9bImEiXSk7DQoJCWlmIChhbmltKQ0KCQkJdGhpcy5jdXJf
YW5pbWF0aW9uID0gYW5pbTsNCgkJdGhpcy5jdXJfZnJhbWUgPSBvWyJmIl07DQoJCWlmICh0aGlz
LmN1cl9mcmFtZSA8IDApDQoJCQl0aGlzLmN1cl9mcmFtZSA9IDA7DQoJCWlmICh0aGlzLmN1cl9m
cmFtZSA+PSB0aGlzLmN1cl9hbmltYXRpb24uZnJhbWVzLmxlbmd0aCkNCgkJCXRoaXMuY3VyX2Zy
YW1lID0gdGhpcy5jdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGggLSAxOw0KCQl0aGlzLmN1cl9h
bmltX3NwZWVkID0gb1siY2FzIl07DQoJCXRoaXMuZnJhbWVTdGFydCA9IG9bImZzIl07DQoJCXRo
aXMuYW5pbVJlcGVhdHMgPSBvWyJhciJdOw0KCQl0aGlzLmFuaW1UaW1lci5yZXNldCgpOw0KCQl0
aGlzLmFuaW1UaW1lci5zdW0gPSBvWyJhdCJdOw0KCQl0aGlzLmFuaW1QbGF5aW5nID0gby5oYXNP
d25Qcm9wZXJ0eSgiYXAiKSA/IG9bImFwIl0gOiB0cnVlOw0KCQl0aGlzLmFuaW1Gb3J3YXJkcyA9
IG8uaGFzT3duUHJvcGVydHkoImFmIikgPyBvWyJhZiJdIDogdHJ1ZTsNCgkJaWYgKG8uaGFzT3du
UHJvcGVydHkoInJ0IikpDQoJCQl0aGlzLmN1cl9hbmltX3JlcGVhdHRvID0gb1sicnQiXTsNCgkJ
ZWxzZQ0KCQkJdGhpcy5jdXJfYW5pbV9yZXBlYXR0byA9IHRoaXMuY3VyX2FuaW1hdGlvbi5yZXBl
YXR0bzsNCgkJdGhpcy5jdXJGcmFtZSA9IHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXNbdGhpcy5j
dXJfZnJhbWVdOw0KCQl0aGlzLmN1cldlYkdMVGV4dHVyZSA9IHRoaXMuY3VyRnJhbWUud2ViR0xf
dGV4dHVyZTsNCgkJdGhpcy5jb2xsaXNpb25fcG9seS5zZXRfcHRzKHRoaXMuY3VyRnJhbWUucG9s
eV9wdHMpOw0KCQl0aGlzLmhvdHNwb3RYID0gdGhpcy5jdXJGcmFtZS5ob3RzcG90WDsNCgkJdGhp
cy5ob3RzcG90WSA9IHRoaXMuY3VyRnJhbWUuaG90c3BvdFk7DQoJfTsNCglpbnN0YW5jZVByb3Rv
LmFuaW1hdGlvbkZpbmlzaCA9IGZ1bmN0aW9uIChyZXZlcnNlKQ0KCXsNCgkJdGhpcy5jdXJfZnJh
bWUgPSByZXZlcnNlID8gMCA6IHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXMubGVuZ3RoIC0gMTsN
CgkJdGhpcy5hbmltUGxheWluZyA9IGZhbHNlOw0KCQl0aGlzLmFuaW1UcmlnZ2VyTmFtZSA9IHRo
aXMuY3VyX2FuaW1hdGlvbi5uYW1lOw0KCQl0aGlzLmluQW5pbVRyaWdnZXIgPSB0cnVlOw0KCQl0
aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5TcHJpdGUucHJvdG90eXBlLmNuZHMuT25B
bnlBbmltRmluaXNoZWQsIHRoaXMpOw0KCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5z
Xy5TcHJpdGUucHJvdG90eXBlLmNuZHMuT25BbmltRmluaXNoZWQsIHRoaXMpOw0KCQl0aGlzLmlu
QW5pbVRyaWdnZXIgPSBmYWxzZTsNCgkJdGhpcy5hbmltUmVwZWF0cyA9IDA7DQoJfTsNCglpbnN0
YW5jZVByb3RvLmdldE5vd1RpbWUgPSBmdW5jdGlvbigpDQoJew0KCQlyZXR1cm4gdGhpcy5hbmlt
VGltZXIuc3VtOw0KCX07DQoJaW5zdGFuY2VQcm90by50aWNrID0gZnVuY3Rpb24oKQ0KCXsNCgkJ
dGhpcy5hbmltVGltZXIuYWRkKHRoaXMucnVudGltZS5nZXREdCh0aGlzKSk7DQoJCWlmICh0aGlz
LmNoYW5nZUFuaW1OYW1lLmxlbmd0aCkNCgkJCXRoaXMuZG9DaGFuZ2VBbmltKCk7DQoJCWlmICh0
aGlzLmNoYW5nZUFuaW1GcmFtZSA+PSAwKQ0KCQkJdGhpcy5kb0NoYW5nZUFuaW1GcmFtZSgpOw0K
CQl2YXIgbm93ID0gdGhpcy5nZXROb3dUaW1lKCk7DQoJCXZhciBjdXJfYW5pbWF0aW9uID0gdGhp
cy5jdXJfYW5pbWF0aW9uOw0KCQl2YXIgcHJldl9mcmFtZSA9IGN1cl9hbmltYXRpb24uZnJhbWVz
W3RoaXMuY3VyX2ZyYW1lXTsNCgkJdmFyIG5leHRfZnJhbWU7DQoJCXZhciBjdXJfZnJhbWVfdGlt
ZSA9IHByZXZfZnJhbWUuZHVyYXRpb24gLyB0aGlzLmN1cl9hbmltX3NwZWVkOw0KCQlpZiAodGhp
cy5hbmltUGxheWluZyAmJiBub3cgPj0gdGhpcy5mcmFtZVN0YXJ0ICsgY3VyX2ZyYW1lX3RpbWUp
DQoJCXsNCgkJCWlmICh0aGlzLmFuaW1Gb3J3YXJkcykNCgkJCXsNCgkJCQl0aGlzLmN1cl9mcmFt
ZSsrOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRoaXMuY3VyX2ZyYW1lLS07DQoJCQl9DQoJ
CQl0aGlzLmZyYW1lU3RhcnQgKz0gY3VyX2ZyYW1lX3RpbWU7DQoJCQlpZiAodGhpcy5jdXJfZnJh
bWUgPj0gY3VyX2FuaW1hdGlvbi5mcmFtZXMubGVuZ3RoKQ0KCQkJew0KCQkJCWlmIChjdXJfYW5p
bWF0aW9uLnBpbmdwb25nKQ0KCQkJCXsNCgkJCQkJdGhpcy5hbmltRm9yd2FyZHMgPSBmYWxzZTsN
CgkJCQkJdGhpcy5jdXJfZnJhbWUgPSBjdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGggLSAyOw0K
CQkJCX0NCgkJCQllbHNlIGlmIChjdXJfYW5pbWF0aW9uLmxvb3ApDQoJCQkJew0KCQkJCQl0aGlz
LmN1cl9mcmFtZSA9IHRoaXMuY3VyX2FuaW1fcmVwZWF0dG87DQoJCQkJfQ0KCQkJCWVsc2UNCgkJ
CQl7DQoJCQkJCXRoaXMuYW5pbVJlcGVhdHMrKzsNCgkJCQkJaWYgKHRoaXMuYW5pbVJlcGVhdHMg
Pj0gY3VyX2FuaW1hdGlvbi5yZXBlYXRjb3VudCkNCgkJCQkJew0KCQkJCQkJdGhpcy5hbmltYXRp
b25GaW5pc2goZmFsc2UpOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJdGhpcy5j
dXJfZnJhbWUgPSB0aGlzLmN1cl9hbmltX3JlcGVhdHRvOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0K
CQkJaWYgKHRoaXMuY3VyX2ZyYW1lIDwgMCkNCgkJCXsNCgkJCQlpZiAoY3VyX2FuaW1hdGlvbi5w
aW5ncG9uZykNCgkJCQl7DQoJCQkJCXRoaXMuY3VyX2ZyYW1lID0gMTsNCgkJCQkJdGhpcy5hbmlt
Rm9yd2FyZHMgPSB0cnVlOw0KCQkJCQlpZiAoIWN1cl9hbmltYXRpb24ubG9vcCkNCgkJCQkJew0K
CQkJCQkJdGhpcy5hbmltUmVwZWF0cysrOw0KCQkJCQkJaWYgKHRoaXMuYW5pbVJlcGVhdHMgPj0g
Y3VyX2FuaW1hdGlvbi5yZXBlYXRjb3VudCkNCgkJCQkJCXsNCgkJCQkJCQl0aGlzLmFuaW1hdGlv
bkZpbmlzaCh0cnVlKTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0K
CQkJCQlpZiAoY3VyX2FuaW1hdGlvbi5sb29wKQ0KCQkJCQl7DQoJCQkJCQl0aGlzLmN1cl9mcmFt
ZSA9IHRoaXMuY3VyX2FuaW1fcmVwZWF0dG87DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJ
CQkJCQl0aGlzLmFuaW1SZXBlYXRzKys7DQoJCQkJCQlpZiAodGhpcy5hbmltUmVwZWF0cyA+PSBj
dXJfYW5pbWF0aW9uLnJlcGVhdGNvdW50KQ0KCQkJCQkJew0KCQkJCQkJCXRoaXMuYW5pbWF0aW9u
RmluaXNoKHRydWUpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZQ0KCQkJCQkJew0KCQkJCQkJCXRoaXMu
Y3VyX2ZyYW1lID0gdGhpcy5jdXJfYW5pbV9yZXBlYXR0bzsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJ
CX0NCgkJCX0NCgkJCWlmICh0aGlzLmN1cl9mcmFtZSA8IDApDQoJCQkJdGhpcy5jdXJfZnJhbWUg
PSAwOw0KCQkJZWxzZSBpZiAodGhpcy5jdXJfZnJhbWUgPj0gY3VyX2FuaW1hdGlvbi5mcmFtZXMu
bGVuZ3RoKQ0KCQkJCXRoaXMuY3VyX2ZyYW1lID0gY3VyX2FuaW1hdGlvbi5mcmFtZXMubGVuZ3Ro
IC0gMTsNCgkJCWlmIChub3cgPiB0aGlzLmZyYW1lU3RhcnQgKyAoY3VyX2FuaW1hdGlvbi5mcmFt
ZXNbdGhpcy5jdXJfZnJhbWVdLmR1cmF0aW9uIC8gdGhpcy5jdXJfYW5pbV9zcGVlZCkpDQoJCQl7
DQoJCQkJdGhpcy5mcmFtZVN0YXJ0ID0gbm93Ow0KCQkJfQ0KCQkJbmV4dF9mcmFtZSA9IGN1cl9h
bmltYXRpb24uZnJhbWVzW3RoaXMuY3VyX2ZyYW1lXTsNCgkJCXRoaXMuT25GcmFtZUNoYW5nZWQo
cHJldl9mcmFtZSwgbmV4dF9mcmFtZSk7DQoJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsN
CgkJfQ0KCX07DQoJaW5zdGFuY2VQcm90by5nZXRBbmltYXRpb25CeU5hbWUgPSBmdW5jdGlvbiAo
bmFtZV8pDQoJew0KCQl2YXIgaSwgbGVuLCBhOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnR5
cGUuYW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJYSA9IHRoaXMudHlw
ZS5hbmltYXRpb25zW2ldOw0KCQkJaWYgKGNyLmVxdWFsc19ub2Nhc2UoYS5uYW1lLCBuYW1lXykp
DQoJCQkJcmV0dXJuIGE7DQoJCX0NCgkJcmV0dXJuIG51bGw7DQoJfTsNCglpbnN0YW5jZVByb3Rv
LmdldEFuaW1hdGlvbkJ5U2lkID0gZnVuY3Rpb24gKHNpZF8pDQoJew0KCQl2YXIgaSwgbGVuLCBh
Ow0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLnR5cGUuYW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBs
ZW47IGkrKykNCgkJew0KCQkJYSA9IHRoaXMudHlwZS5hbmltYXRpb25zW2ldOw0KCQkJaWYgKGEu
c2lkID09PSBzaWRfKQ0KCQkJCXJldHVybiBhOw0KCQl9DQoJCXJldHVybiBudWxsOw0KCX07DQoJ
aW5zdGFuY2VQcm90by5kb0NoYW5nZUFuaW0gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIHByZXZf
ZnJhbWUgPSB0aGlzLmN1cl9hbmltYXRpb24uZnJhbWVzW3RoaXMuY3VyX2ZyYW1lXTsNCgkJdmFy
IGFuaW0gPSB0aGlzLmdldEFuaW1hdGlvbkJ5TmFtZSh0aGlzLmNoYW5nZUFuaW1OYW1lKTsNCgkJ
dGhpcy5jaGFuZ2VBbmltTmFtZSA9ICIiOw0KCQlpZiAoIWFuaW0pDQoJCQlyZXR1cm47DQoJCWlm
IChjci5lcXVhbHNfbm9jYXNlKGFuaW0ubmFtZSwgdGhpcy5jdXJfYW5pbWF0aW9uLm5hbWUpICYm
IHRoaXMuYW5pbVBsYXlpbmcpDQoJCQlyZXR1cm47DQoJCXRoaXMuY3VyX2FuaW1hdGlvbiA9IGFu
aW07DQoJCXRoaXMuY3VyX2FuaW1fc3BlZWQgPSBhbmltLnNwZWVkOw0KCQl0aGlzLmN1cl9hbmlt
X3JlcGVhdHRvID0gYW5pbS5yZXBlYXR0bzsNCgkJaWYgKHRoaXMuY3VyX2ZyYW1lIDwgMCkNCgkJ
CXRoaXMuY3VyX2ZyYW1lID0gMDsNCgkJaWYgKHRoaXMuY3VyX2ZyYW1lID49IHRoaXMuY3VyX2Fu
aW1hdGlvbi5mcmFtZXMubGVuZ3RoKQ0KCQkJdGhpcy5jdXJfZnJhbWUgPSB0aGlzLmN1cl9hbmlt
YXRpb24uZnJhbWVzLmxlbmd0aCAtIDE7DQoJCWlmICh0aGlzLmNoYW5nZUFuaW1Gcm9tID09PSAx
KQ0KCQkJdGhpcy5jdXJfZnJhbWUgPSAwOw0KCQl0aGlzLmFuaW1QbGF5aW5nID0gdHJ1ZTsNCgkJ
dGhpcy5mcmFtZVN0YXJ0ID0gdGhpcy5nZXROb3dUaW1lKCk7DQoJCXRoaXMuYW5pbUZvcndhcmRz
ID0gdHJ1ZTsNCgkJdGhpcy5PbkZyYW1lQ2hhbmdlZChwcmV2X2ZyYW1lLCB0aGlzLmN1cl9hbmlt
YXRpb24uZnJhbWVzW3RoaXMuY3VyX2ZyYW1lXSk7DQoJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0
cnVlOw0KCX07DQoJaW5zdGFuY2VQcm90by5kb0NoYW5nZUFuaW1GcmFtZSA9IGZ1bmN0aW9uICgp
DQoJew0KCQl2YXIgcHJldl9mcmFtZSA9IHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXNbdGhpcy5j
dXJfZnJhbWVdOw0KCQl2YXIgcHJldl9mcmFtZV9udW1iZXIgPSB0aGlzLmN1cl9mcmFtZTsNCgkJ
dGhpcy5jdXJfZnJhbWUgPSBjci5mbG9vcih0aGlzLmNoYW5nZUFuaW1GcmFtZSk7DQoJCWlmICh0
aGlzLmN1cl9mcmFtZSA8IDApDQoJCQl0aGlzLmN1cl9mcmFtZSA9IDA7DQoJCWlmICh0aGlzLmN1
cl9mcmFtZSA+PSB0aGlzLmN1cl9hbmltYXRpb24uZnJhbWVzLmxlbmd0aCkNCgkJCXRoaXMuY3Vy
X2ZyYW1lID0gdGhpcy5jdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGggLSAxOw0KCQlpZiAocHJl
dl9mcmFtZV9udW1iZXIgIT09IHRoaXMuY3VyX2ZyYW1lKQ0KCQl7DQoJCQl0aGlzLk9uRnJhbWVD
aGFuZ2VkKHByZXZfZnJhbWUsIHRoaXMuY3VyX2FuaW1hdGlvbi5mcmFtZXNbdGhpcy5jdXJfZnJh
bWVdKTsNCgkJCXRoaXMuZnJhbWVTdGFydCA9IHRoaXMuZ2V0Tm93VGltZSgpOw0KCQkJdGhpcy5y
dW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCX0NCgkJdGhpcy5jaGFuZ2VBbmltRnJhbWUgPSAtMTsN
Cgl9Ow0KCWluc3RhbmNlUHJvdG8uT25GcmFtZUNoYW5nZWQgPSBmdW5jdGlvbiAocHJldl9mcmFt
ZSwgbmV4dF9mcmFtZSkNCgl7DQoJCXZhciBvbGR3ID0gcHJldl9mcmFtZS53aWR0aDsNCgkJdmFy
IG9sZGggPSBwcmV2X2ZyYW1lLmhlaWdodDsNCgkJdmFyIG5ld3cgPSBuZXh0X2ZyYW1lLndpZHRo
Ow0KCQl2YXIgbmV3aCA9IG5leHRfZnJhbWUuaGVpZ2h0Ow0KCQlpZiAob2xkdyAhPSBuZXd3KQ0K
CQkJdGhpcy53aWR0aCAqPSAobmV3dyAvIG9sZHcpOw0KCQlpZiAob2xkaCAhPSBuZXdoKQ0KCQkJ
dGhpcy5oZWlnaHQgKj0gKG5ld2ggLyBvbGRoKTsNCgkJdGhpcy5ob3RzcG90WCA9IG5leHRfZnJh
bWUuaG90c3BvdFg7DQoJCXRoaXMuaG90c3BvdFkgPSBuZXh0X2ZyYW1lLmhvdHNwb3RZOw0KCQl0
aGlzLmNvbGxpc2lvbl9wb2x5LnNldF9wdHMobmV4dF9mcmFtZS5wb2x5X3B0cyk7DQoJCXRoaXMu
c2V0X2Jib3hfY2hhbmdlZCgpOw0KCQl0aGlzLmN1ckZyYW1lID0gbmV4dF9mcmFtZTsNCgkJdGhp
cy5jdXJXZWJHTFRleHR1cmUgPSBuZXh0X2ZyYW1lLndlYkdMX3RleHR1cmU7DQoJCXZhciBpLCBs
ZW4sIGI7DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMuYmVoYXZpb3JfaW5zdHMubGVuZ3RoOyBp
IDwgbGVuOyBpKyspDQoJCXsNCgkJCWIgPSB0aGlzLmJlaGF2aW9yX2luc3RzW2ldOw0KCQkJaWYg
KGIub25TcHJpdGVGcmFtZUNoYW5nZWQpDQoJCQkJYi5vblNwcml0ZUZyYW1lQ2hhbmdlZChwcmV2
X2ZyYW1lLCBuZXh0X2ZyYW1lKTsNCgkJfQ0KCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVn
aW5zXy5TcHJpdGUucHJvdG90eXBlLmNuZHMuT25GcmFtZUNoYW5nZWQsIHRoaXMpOw0KCX07DQoJ
aW5zdGFuY2VQcm90by5kcmF3ID0gZnVuY3Rpb24oY3R4KQ0KCXsNCgkJY3R4Lmdsb2JhbEFscGhh
ID0gdGhpcy5vcGFjaXR5Ow0KCQl2YXIgY3VyX2ZyYW1lID0gdGhpcy5jdXJGcmFtZTsNCgkJdmFy
IHNwcml0ZXNoZWV0ZWQgPSBjdXJfZnJhbWUuc3ByaXRlc2hlZXRlZDsNCgkJdmFyIGN1cl9pbWFn
ZSA9IGN1cl9mcmFtZS50ZXh0dXJlX2ltZzsNCgkJdmFyIG15eCA9IHRoaXMueDsNCgkJdmFyIG15
eSA9IHRoaXMueTsNCgkJdmFyIHcgPSB0aGlzLndpZHRoOw0KCQl2YXIgaCA9IHRoaXMuaGVpZ2h0
Ow0KCQlpZiAodGhpcy5hbmdsZSA9PT0gMCAmJiB3ID49IDAgJiYgaCA+PSAwKQ0KCQl7DQoJCQlt
eXggLT0gdGhpcy5ob3RzcG90WCAqIHc7DQoJCQlteXkgLT0gdGhpcy5ob3RzcG90WSAqIGg7DQoJ
CQlpZiAodGhpcy5ydW50aW1lLnBpeGVsX3JvdW5kaW5nKQ0KCQkJew0KCQkJCW15eCA9IE1hdGgu
cm91bmQobXl4KTsNCgkJCQlteXkgPSBNYXRoLnJvdW5kKG15eSk7DQoJCQl9DQoJCQlpZiAoc3By
aXRlc2hlZXRlZCkNCgkJCXsNCgkJCQljdHguZHJhd0ltYWdlKGN1cl9pbWFnZSwgY3VyX2ZyYW1l
Lm9mZngsIGN1cl9mcmFtZS5vZmZ5LCBjdXJfZnJhbWUud2lkdGgsIGN1cl9mcmFtZS5oZWlnaHQs
DQoJCQkJCQkJCQkJIG15eCwgbXl5LCB3LCBoKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlj
dHguZHJhd0ltYWdlKGN1cl9pbWFnZSwgbXl4LCBteXksIHcsIGgpOw0KCQkJfQ0KCQl9DQoJCWVs
c2UNCgkJew0KCQkJaWYgKHRoaXMucnVudGltZS5waXhlbF9yb3VuZGluZykNCgkJCXsNCgkJCQlt
eXggPSBNYXRoLnJvdW5kKG15eCk7DQoJCQkJbXl5ID0gTWF0aC5yb3VuZChteXkpOw0KCQkJfQ0K
CQkJY3R4LnNhdmUoKTsNCgkJCXZhciB3aWR0aGZhY3RvciA9IHcgPiAwID8gMSA6IC0xOw0KCQkJ
dmFyIGhlaWdodGZhY3RvciA9IGggPiAwID8gMSA6IC0xOw0KCQkJY3R4LnRyYW5zbGF0ZShteXgs
IG15eSk7DQoJCQlpZiAod2lkdGhmYWN0b3IgIT09IDEgfHwgaGVpZ2h0ZmFjdG9yICE9PSAxKQ0K
CQkJCWN0eC5zY2FsZSh3aWR0aGZhY3RvciwgaGVpZ2h0ZmFjdG9yKTsNCgkJCWN0eC5yb3RhdGUo
dGhpcy5hbmdsZSAqIHdpZHRoZmFjdG9yICogaGVpZ2h0ZmFjdG9yKTsNCgkJCXZhciBkcmF3eCA9
IDAgLSAodGhpcy5ob3RzcG90WCAqIGNyLmFicyh3KSkNCgkJCXZhciBkcmF3eSA9IDAgLSAodGhp
cy5ob3RzcG90WSAqIGNyLmFicyhoKSk7DQoJCQlpZiAoc3ByaXRlc2hlZXRlZCkNCgkJCXsNCgkJ
CQljdHguZHJhd0ltYWdlKGN1cl9pbWFnZSwgY3VyX2ZyYW1lLm9mZngsIGN1cl9mcmFtZS5vZmZ5
LCBjdXJfZnJhbWUud2lkdGgsIGN1cl9mcmFtZS5oZWlnaHQsDQoJCQkJCQkJCQkJIGRyYXd4LCBk
cmF3eSwgY3IuYWJzKHcpLCBjci5hYnMoaCkpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWN0
eC5kcmF3SW1hZ2UoY3VyX2ltYWdlLCBkcmF3eCwgZHJhd3ksIGNyLmFicyh3KSwgY3IuYWJzKGgp
KTsNCgkJCX0NCgkJCWN0eC5yZXN0b3JlKCk7DQoJCX0NCgkJLyoNCgkJY3R4LnN0cm9rZVN0eWxl
ID0gIiNmMDAiOw0KCQljdHgubGluZVdpZHRoID0gMzsNCgkJY3R4LmJlZ2luUGF0aCgpOw0KCQl0
aGlzLmNvbGxpc2lvbl9wb2x5LmNhY2hlX3BvbHkodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRo
aXMuYW5nbGUpOw0KCQl2YXIgaSwgbGVuLCBheCwgYXksIGJ4LCBieTsNCgkJZm9yIChpID0gMCwg
bGVuID0gdGhpcy5jb2xsaXNpb25fcG9seS5wdHNfY291bnQ7IGkgPCBsZW47IGkrKykNCgkJew0K
CQkJYXggPSB0aGlzLmNvbGxpc2lvbl9wb2x5LnB0c19jYWNoZVtpKjJdICsgdGhpcy54Ow0KCQkJ
YXkgPSB0aGlzLmNvbGxpc2lvbl9wb2x5LnB0c19jYWNoZVtpKjIrMV0gKyB0aGlzLnk7DQoJCQli
eCA9IHRoaXMuY29sbGlzaW9uX3BvbHkucHRzX2NhY2hlWygoaSsxKSVsZW4pKjJdICsgdGhpcy54
Ow0KCQkJYnkgPSB0aGlzLmNvbGxpc2lvbl9wb2x5LnB0c19jYWNoZVsoKGkrMSklbGVuKSoyKzFd
ICsgdGhpcy55Ow0KCQkJY3R4Lm1vdmVUbyhheCwgYXkpOw0KCQkJY3R4LmxpbmVUbyhieCwgYnkp
Ow0KCQl9DQoJCWN0eC5zdHJva2UoKTsNCgkJY3R4LmNsb3NlUGF0aCgpOw0KCQkqLw0KCQkvKg0K
CQlpZiAodGhpcy5iZWhhdmlvcl9pbnN0cy5sZW5ndGggPj0gMSAmJiB0aGlzLmJlaGF2aW9yX2lu
c3RzWzBdLmRyYXcpDQoJCXsNCgkJCXRoaXMuYmVoYXZpb3JfaW5zdHNbMF0uZHJhdyhjdHgpOw0K
CQl9DQoJCSovDQoJfTsNCglpbnN0YW5jZVByb3RvLmRyYXdHTF9lYXJseVpQYXNzID0gZnVuY3Rp
b24oZ2x3KQ0KCXsNCgkJdGhpcy5kcmF3R0woZ2x3KTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8uZHJh
d0dMID0gZnVuY3Rpb24oZ2x3KQ0KCXsNCgkJZ2x3LnNldFRleHR1cmUodGhpcy5jdXJXZWJHTFRl
eHR1cmUpOw0KCQlnbHcuc2V0T3BhY2l0eSh0aGlzLm9wYWNpdHkpOw0KCQl2YXIgY3VyX2ZyYW1l
ID0gdGhpcy5jdXJGcmFtZTsNCgkJdmFyIHEgPSB0aGlzLmJxdWFkOw0KCQlpZiAodGhpcy5ydW50
aW1lLnBpeGVsX3JvdW5kaW5nKQ0KCQl7DQoJCQl2YXIgb3ggPSBNYXRoLnJvdW5kKHRoaXMueCkg
LSB0aGlzLng7DQoJCQl2YXIgb3kgPSBNYXRoLnJvdW5kKHRoaXMueSkgLSB0aGlzLnk7DQoJCQlp
ZiAoY3VyX2ZyYW1lLnNwcml0ZXNoZWV0ZWQpDQoJCQkJZ2x3LnF1YWRUZXgocS50bHggKyBveCwg
cS50bHkgKyBveSwgcS50cnggKyBveCwgcS50cnlfICsgb3ksIHEuYnJ4ICsgb3gsIHEuYnJ5ICsg
b3ksIHEuYmx4ICsgb3gsIHEuYmx5ICsgb3ksIGN1cl9mcmFtZS5zaGVldFRleCk7DQoJCQllbHNl
DQoJCQkJZ2x3LnF1YWQocS50bHggKyBveCwgcS50bHkgKyBveSwgcS50cnggKyBveCwgcS50cnlf
ICsgb3ksIHEuYnJ4ICsgb3gsIHEuYnJ5ICsgb3ksIHEuYmx4ICsgb3gsIHEuYmx5ICsgb3kpOw0K
CQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKGN1cl9mcmFtZS5zcHJpdGVzaGVldGVkKQ0KCQkJCWds
dy5xdWFkVGV4KHEudGx4LCBxLnRseSwgcS50cngsIHEudHJ5XywgcS5icngsIHEuYnJ5LCBxLmJs
eCwgcS5ibHksIGN1cl9mcmFtZS5zaGVldFRleCk7DQoJCQllbHNlDQoJCQkJZ2x3LnF1YWQocS50
bHgsIHEudGx5LCBxLnRyeCwgcS50cnlfLCBxLmJyeCwgcS5icnksIHEuYmx4LCBxLmJseSk7DQoJ
CX0NCgl9Ow0KCWluc3RhbmNlUHJvdG8uZ2V0SW1hZ2VQb2ludEluZGV4QnlOYW1lID0gZnVuY3Rp
b24obmFtZV8pDQoJew0KCQl2YXIgY3VyX2ZyYW1lID0gdGhpcy5jdXJGcmFtZTsNCgkJdmFyIGks
IGxlbjsNCgkJZm9yIChpID0gMCwgbGVuID0gY3VyX2ZyYW1lLmltYWdlX3BvaW50cy5sZW5ndGg7
IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKGNyLmVxdWFsc19ub2Nhc2UobmFtZV8sIGN1cl9m
cmFtZS5pbWFnZV9wb2ludHNbaV1bMF0pKQ0KCQkJCXJldHVybiBpOw0KCQl9DQoJCXJldHVybiAt
MTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8uZ2V0SW1hZ2VQb2ludCA9IGZ1bmN0aW9uKGltZ3B0LCBn
ZXRYKQ0KCXsNCgkJdmFyIGN1cl9mcmFtZSA9IHRoaXMuY3VyRnJhbWU7DQoJCXZhciBpbWFnZV9w
b2ludHMgPSBjdXJfZnJhbWUuaW1hZ2VfcG9pbnRzOw0KCQl2YXIgaW5kZXg7DQoJCWlmIChjci5p
c19zdHJpbmcoaW1ncHQpKQ0KCQkJaW5kZXggPSB0aGlzLmdldEltYWdlUG9pbnRJbmRleEJ5TmFt
ZShpbWdwdCk7DQoJCWVsc2UNCgkJCWluZGV4ID0gaW1ncHQgLSAxOwkvLyAwIGlzIG9yaWdpbg0K
CQlpbmRleCA9IGNyLmZsb29yKGluZGV4KTsNCgkJaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBp
bWFnZV9wb2ludHMubGVuZ3RoKQ0KCQkJcmV0dXJuIGdldFggPyB0aGlzLnggOiB0aGlzLnk7CS8v
IHJldHVybiBvcmlnaW4NCgkJdmFyIHggPSAoaW1hZ2VfcG9pbnRzW2luZGV4XVsxXSAtIGN1cl9m
cmFtZS5ob3RzcG90WCkgKiB0aGlzLndpZHRoOw0KCQl2YXIgeSA9IGltYWdlX3BvaW50c1tpbmRl
eF1bMl07DQoJCXkgPSAoeSAtIGN1cl9mcmFtZS5ob3RzcG90WSkgKiB0aGlzLmhlaWdodDsNCgkJ
dmFyIGNvc2EgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKTsNCgkJdmFyIHNpbmEgPSBNYXRoLnNpbih0
aGlzLmFuZ2xlKTsNCgkJdmFyIHhfdGVtcCA9ICh4ICogY29zYSkgLSAoeSAqIHNpbmEpOw0KCQl5
ID0gKHkgKiBjb3NhKSArICh4ICogc2luYSk7DQoJCXggPSB4X3RlbXA7DQoJCXggKz0gdGhpcy54
Ow0KCQl5ICs9IHRoaXMueTsNCgkJcmV0dXJuIGdldFggPyB4IDogeTsNCgl9Ow0KCWZ1bmN0aW9u
IENuZHMoKSB7fTsNCgl2YXIgYXJyQ2FjaGUgPSBbXTsNCglmdW5jdGlvbiBhbGxvY0FycigpDQoJ
ew0KCQlpZiAoYXJyQ2FjaGUubGVuZ3RoKQ0KCQkJcmV0dXJuIGFyckNhY2hlLnBvcCgpOw0KCQll
bHNlDQoJCQlyZXR1cm4gWzAsIDAsIDBdOw0KCX07DQoJZnVuY3Rpb24gZnJlZUFycihhKQ0KCXsN
CgkJYVswXSA9IDA7DQoJCWFbMV0gPSAwOw0KCQlhWzJdID0gMDsNCgkJYXJyQ2FjaGUucHVzaChh
KTsNCgl9Ow0KCWZ1bmN0aW9uIG1ha2VDb2xsS2V5KGEsIGIpDQoJew0KCQlpZiAoYSA8IGIpDQoJ
CQlyZXR1cm4gIiIgKyBhICsgIiwiICsgYjsNCgkJZWxzZQ0KCQkJcmV0dXJuICIiICsgYiArICIs
IiArIGE7DQoJfTsNCglmdW5jdGlvbiBjb2xsbWVtb3J5X2FkZChjb2xsbWVtb3J5LCBhLCBiLCB0
aWNrY291bnQpDQoJew0KCQl2YXIgYV91aWQgPSBhLnVpZDsNCgkJdmFyIGJfdWlkID0gYi51aWQ7
DQoJCXZhciBrZXkgPSBtYWtlQ29sbEtleShhX3VpZCwgYl91aWQpOw0KCQlpZiAoY29sbG1lbW9y
eS5oYXNPd25Qcm9wZXJ0eShrZXkpKQ0KCQl7DQoJCQljb2xsbWVtb3J5W2tleV1bMl0gPSB0aWNr
Y291bnQ7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIGFyciA9IGFsbG9jQXJyKCk7DQoJCWFyclsw
XSA9IGFfdWlkOw0KCQlhcnJbMV0gPSBiX3VpZDsNCgkJYXJyWzJdID0gdGlja2NvdW50Ow0KCQlj
b2xsbWVtb3J5W2tleV0gPSBhcnI7DQoJfTsNCglmdW5jdGlvbiBjb2xsbWVtb3J5X3JlbW92ZShj
b2xsbWVtb3J5LCBhLCBiKQ0KCXsNCgkJdmFyIGtleSA9IG1ha2VDb2xsS2V5KGEudWlkLCBiLnVp
ZCk7DQoJCWlmIChjb2xsbWVtb3J5Lmhhc093blByb3BlcnR5KGtleSkpDQoJCXsNCgkJCWZyZWVB
cnIoY29sbG1lbW9yeVtrZXldKTsNCgkJCWRlbGV0ZSBjb2xsbWVtb3J5W2tleV07DQoJCX0NCgl9
Ow0KCWZ1bmN0aW9uIGNvbGxtZW1vcnlfcmVtb3ZlSW5zdGFuY2UoY29sbG1lbW9yeSwgaW5zdCkN
Cgl7DQoJCXZhciB1aWQgPSBpbnN0LnVpZDsNCgkJdmFyIHAsIGVudHJ5Ow0KCQlmb3IgKHAgaW4g
Y29sbG1lbW9yeSkNCgkJew0KCQkJaWYgKGNvbGxtZW1vcnkuaGFzT3duUHJvcGVydHkocCkpDQoJ
CQl7DQoJCQkJZW50cnkgPSBjb2xsbWVtb3J5W3BdOw0KCQkJCWlmIChlbnRyeVswXSA9PT0gdWlk
IHx8IGVudHJ5WzFdID09PSB1aWQpDQoJCQkJew0KCQkJCQlmcmVlQXJyKGNvbGxtZW1vcnlbcF0p
Ow0KCQkJCQlkZWxldGUgY29sbG1lbW9yeVtwXTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9Ow0KCXZh
ciBsYXN0X2NvbGxfdGlja2NvdW50ID0gLTI7DQoJZnVuY3Rpb24gY29sbG1lbW9yeV9oYXMoY29s
bG1lbW9yeSwgYSwgYikNCgl7DQoJCXZhciBrZXkgPSBtYWtlQ29sbEtleShhLnVpZCwgYi51aWQp
Ow0KCQlpZiAoY29sbG1lbW9yeS5oYXNPd25Qcm9wZXJ0eShrZXkpKQ0KCQl7DQoJCQlsYXN0X2Nv
bGxfdGlja2NvdW50ID0gY29sbG1lbW9yeVtrZXldWzJdOw0KCQkJcmV0dXJuIHRydWU7DQoJCX0N
CgkJZWxzZQ0KCQl7DQoJCQlsYXN0X2NvbGxfdGlja2NvdW50ID0gLTI7DQoJCQlyZXR1cm4gZmFs
c2U7DQoJCX0NCgl9Ow0KCXZhciBjYW5kaWRhdGVzMSA9IFtdOw0KCUNuZHMucHJvdG90eXBlLk9u
Q29sbGlzaW9uID0gZnVuY3Rpb24gKHJ0eXBlKQ0KCXsNCgkJaWYgKCFydHlwZSkNCgkJCXJldHVy
biBmYWxzZTsNCgkJdmFyIHJ1bnRpbWUgPSB0aGlzLnJ1bnRpbWU7DQoJCXZhciBjbmQgPSBydW50
aW1lLmdldEN1cnJlbnRDb25kaXRpb24oKTsNCgkJdmFyIGx0eXBlID0gY25kLnR5cGU7DQoJCXZh
ciBjb2xsbWVtb3J5ID0gbnVsbDsNCgkJaWYgKGNuZC5leHRyYVsiY29sbG1lbW9yeSJdKQ0KCQl7
DQoJCQljb2xsbWVtb3J5ID0gY25kLmV4dHJhWyJjb2xsbWVtb3J5Il07DQoJCX0NCgkJZWxzZQ0K
CQl7DQoJCQljb2xsbWVtb3J5ID0ge307DQoJCQljbmQuZXh0cmFbImNvbGxtZW1vcnkiXSA9IGNv
bGxtZW1vcnk7DQoJCX0NCgkJaWYgKCFjbmQuZXh0cmFbInNwcml0ZUNyZWF0ZWREZXN0cm95Q2Fs
bGJhY2siXSkNCgkJew0KCQkJY25kLmV4dHJhWyJzcHJpdGVDcmVhdGVkRGVzdHJveUNhbGxiYWNr
Il0gPSB0cnVlOw0KCQkJcnVudGltZS5hZGREZXN0cm95Q2FsbGJhY2soZnVuY3Rpb24oaW5zdCkg
ew0KCQkJCWNvbGxtZW1vcnlfcmVtb3ZlSW5zdGFuY2UoY25kLmV4dHJhWyJjb2xsbWVtb3J5Il0s
IGluc3QpOw0KCQkJfSk7DQoJCX0NCgkJdmFyIGxzb2wgPSBsdHlwZS5nZXRDdXJyZW50U29sKCk7
DQoJCXZhciByc29sID0gcnR5cGUuZ2V0Q3VycmVudFNvbCgpOw0KCQl2YXIgbGluc3RhbmNlcyA9
IGxzb2wuZ2V0T2JqZWN0cygpOw0KCQl2YXIgcmluc3RhbmNlczsNCgkJdmFyIHJlZ2lzdGVyZWRJ
bnN0YW5jZXM7DQoJCXZhciBsLCBsaW5zdCwgciwgcmluc3Q7DQoJCXZhciBjdXJsc29sLCBjdXJy
c29sOw0KCQl2YXIgdGlja2NvdW50ID0gdGhpcy5ydW50aW1lLnRpY2tjb3VudDsNCgkJdmFyIGxh
c3R0aWNrY291bnQgPSB0aWNrY291bnQgLSAxOw0KCQl2YXIgZXhpc3RzLCBydW47DQoJCXZhciBj
dXJyZW50X2V2ZW50ID0gcnVudGltZS5nZXRDdXJyZW50RXZlbnRTdGFjaygpLmN1cnJlbnRfZXZl
bnQ7DQoJCXZhciBvcmJsb2NrID0gY3VycmVudF9ldmVudC5vcmJsb2NrOw0KCQlmb3IgKGwgPSAw
OyBsIDwgbGluc3RhbmNlcy5sZW5ndGg7IGwrKykNCgkJew0KCQkJbGluc3QgPSBsaW5zdGFuY2Vz
W2xdOw0KCQkJaWYgKHJzb2wuc2VsZWN0X2FsbCkNCgkJCXsNCgkJCQlsaW5zdC51cGRhdGVfYmJv
eCgpOw0KCQkJCXRoaXMucnVudGltZS5nZXRDb2xsaXNpb25DYW5kaWRhdGVzKGxpbnN0LmxheWVy
LCBydHlwZSwgbGluc3QuYmJveCwgY2FuZGlkYXRlczEpOw0KCQkJCXJpbnN0YW5jZXMgPSBjYW5k
aWRhdGVzMTsNCgkJCQl0aGlzLnJ1bnRpbWUuYWRkUmVnaXN0ZXJlZENvbGxpc2lvbkNhbmRpZGF0
ZXMobGluc3QsIHJ0eXBlLCByaW5zdGFuY2VzKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQly
aW5zdGFuY2VzID0gcnNvbC5nZXRPYmplY3RzKCk7DQoJCQl9DQoJCQlmb3IgKHIgPSAwOyByIDwg
cmluc3RhbmNlcy5sZW5ndGg7IHIrKykNCgkJCXsNCgkJCQlyaW5zdCA9IHJpbnN0YW5jZXNbcl07
DQoJCQkJaWYgKHJ1bnRpbWUudGVzdE92ZXJsYXAobGluc3QsIHJpbnN0KSB8fCBydW50aW1lLmNo
ZWNrUmVnaXN0ZXJlZENvbGxpc2lvbihsaW5zdCwgcmluc3QpKQ0KCQkJCXsNCgkJCQkJZXhpc3Rz
ID0gY29sbG1lbW9yeV9oYXMoY29sbG1lbW9yeSwgbGluc3QsIHJpbnN0KTsNCgkJCQkJcnVuID0g
KCFleGlzdHMgfHwgKGxhc3RfY29sbF90aWNrY291bnQgPCBsYXN0dGlja2NvdW50KSk7DQoJCQkJ
CWNvbGxtZW1vcnlfYWRkKGNvbGxtZW1vcnksIGxpbnN0LCByaW5zdCwgdGlja2NvdW50KTsNCgkJ
CQkJaWYgKHJ1bikNCgkJCQkJew0KCQkJCQkJcnVudGltZS5wdXNoQ29weVNvbChjdXJyZW50X2V2
ZW50LnNvbE1vZGlmaWVycyk7DQoJCQkJCQljdXJsc29sID0gbHR5cGUuZ2V0Q3VycmVudFNvbCgp
Ow0KCQkJCQkJY3VycnNvbCA9IHJ0eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJCQkJCWN1cmxzb2wu
c2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCQkJY3VycnNvbC5zZWxlY3RfYWxsID0gZmFsc2U7DQoJ
CQkJCQlpZiAobHR5cGUgPT09IHJ0eXBlKQ0KCQkJCQkJew0KCQkJCQkJCWN1cmxzb2wuaW5zdGFu
Y2VzLmxlbmd0aCA9IDI7CS8vIGp1c3QgdXNlIGxzb2wsIGlzIHNhbWUgcmVmZXJlbmNlIGFzIHJz
b2wNCgkJCQkJCQljdXJsc29sLmluc3RhbmNlc1swXSA9IGxpbnN0Ow0KCQkJCQkJCWN1cmxzb2wu
aW5zdGFuY2VzWzFdID0gcmluc3Q7DQoJCQkJCQkJbHR5cGUuYXBwbHlTb2xUb0NvbnRhaW5lcigp
Ow0KCQkJCQkJfQ0KCQkJCQkJZWxzZQ0KCQkJCQkJew0KCQkJCQkJCWN1cmxzb2wuaW5zdGFuY2Vz
Lmxlbmd0aCA9IDE7DQoJCQkJCQkJY3VycnNvbC5pbnN0YW5jZXMubGVuZ3RoID0gMTsNCgkJCQkJ
CQljdXJsc29sLmluc3RhbmNlc1swXSA9IGxpbnN0Ow0KCQkJCQkJCWN1cnJzb2wuaW5zdGFuY2Vz
WzBdID0gcmluc3Q7DQoJCQkJCQkJbHR5cGUuYXBwbHlTb2xUb0NvbnRhaW5lcigpOw0KCQkJCQkJ
CXJ0eXBlLmFwcGx5U29sVG9Db250YWluZXIoKTsNCgkJCQkJCX0NCgkJCQkJCWN1cnJlbnRfZXZl
bnQucmV0cmlnZ2VyKCk7DQoJCQkJCQlydW50aW1lLnBvcFNvbChjdXJyZW50X2V2ZW50LnNvbE1v
ZGlmaWVycyk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJY29sbG1lbW9y
eV9yZW1vdmUoY29sbG1lbW9yeSwgbGluc3QsIHJpbnN0KTsNCgkJCQl9DQoJCQl9DQoJCQljci5j
bGVhckFycmF5KGNhbmRpZGF0ZXMxKTsNCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCgl2YXIg
cnBpY2t0eXBlID0gbnVsbDsNCgl2YXIgcnRvcGljayA9IG5ldyBjci5PYmplY3RTZXQoKTsNCgl2
YXIgbmVlZHNjb2xsaXNpb25maW5pc2ggPSBmYWxzZTsNCgl2YXIgY2FuZGlkYXRlczIgPSBbXTsN
Cgl2YXIgdGVtcF9iYm94ID0gbmV3IGNyLnJlY3QoMCwgMCwgMCwgMCk7DQoJZnVuY3Rpb24gRG9P
dmVybGFwQ29uZGl0aW9uKHJ0eXBlLCBvZmZ4LCBvZmZ5KQ0KCXsNCgkJaWYgKCFydHlwZSkNCgkJ
CXJldHVybiBmYWxzZTsNCgkJdmFyIGRvX29mZnNldCA9IChvZmZ4ICE9PSAwIHx8IG9mZnkgIT09
IDApOw0KCQl2YXIgb2xkeCwgb2xkeSwgcmV0ID0gZmFsc2UsIHIsIGxlbnIsIHJpbnN0Ow0KCQl2
YXIgY25kID0gdGhpcy5ydW50aW1lLmdldEN1cnJlbnRDb25kaXRpb24oKTsNCgkJdmFyIGx0eXBl
ID0gY25kLnR5cGU7DQoJCXZhciBpbnZlcnRlZCA9IGNuZC5pbnZlcnRlZDsNCgkJdmFyIHJzb2wg
PSBydHlwZS5nZXRDdXJyZW50U29sKCk7DQoJCXZhciBvcmJsb2NrID0gdGhpcy5ydW50aW1lLmdl
dEN1cnJlbnRFdmVudFN0YWNrKCkuY3VycmVudF9ldmVudC5vcmJsb2NrOw0KCQl2YXIgcmluc3Rh
bmNlczsNCgkJaWYgKHJzb2wuc2VsZWN0X2FsbCkNCgkJew0KCQkJdGhpcy51cGRhdGVfYmJveCgp
Ow0KCQkJdGVtcF9iYm94LmNvcHkodGhpcy5iYm94KTsNCgkJCXRlbXBfYmJveC5vZmZzZXQob2Zm
eCwgb2ZmeSk7DQoJCQl0aGlzLnJ1bnRpbWUuZ2V0Q29sbGlzaW9uQ2FuZGlkYXRlcyh0aGlzLmxh
eWVyLCBydHlwZSwgdGVtcF9iYm94LCBjYW5kaWRhdGVzMik7DQoJCQlyaW5zdGFuY2VzID0gY2Fu
ZGlkYXRlczI7DQoJCX0NCgkJZWxzZSBpZiAob3JibG9jaykNCgkJew0KCQkJaWYgKHRoaXMucnVu
dGltZS5pc0N1cnJlbnRDb25kaXRpb25GaXJzdCgpICYmICFyc29sLmVsc2VfaW5zdGFuY2VzLmxl
bmd0aCAmJiByc29sLmluc3RhbmNlcy5sZW5ndGgpDQoJCQkJcmluc3RhbmNlcyA9IHJzb2wuaW5z
dGFuY2VzOw0KCQkJZWxzZQ0KCQkJCXJpbnN0YW5jZXMgPSByc29sLmVsc2VfaW5zdGFuY2VzOw0K
CQl9DQoJCWVsc2UNCgkJew0KCQkJcmluc3RhbmNlcyA9IHJzb2wuaW5zdGFuY2VzOw0KCQl9DQoJ
CXJwaWNrdHlwZSA9IHJ0eXBlOw0KCQluZWVkc2NvbGxpc2lvbmZpbmlzaCA9IChsdHlwZSAhPT0g
cnR5cGUgJiYgIWludmVydGVkKTsNCgkJaWYgKGRvX29mZnNldCkNCgkJew0KCQkJb2xkeCA9IHRo
aXMueDsNCgkJCW9sZHkgPSB0aGlzLnk7DQoJCQl0aGlzLnggKz0gb2ZmeDsNCgkJCXRoaXMueSAr
PSBvZmZ5Ow0KCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCX0NCgkJZm9yIChyID0gMCwg
bGVuciA9IHJpbnN0YW5jZXMubGVuZ3RoOyByIDwgbGVucjsgcisrKQ0KCQl7DQoJCQlyaW5zdCA9
IHJpbnN0YW5jZXNbcl07DQoJCQlpZiAodGhpcy5ydW50aW1lLnRlc3RPdmVybGFwKHRoaXMsIHJp
bnN0KSkNCgkJCXsNCgkJCQlyZXQgPSB0cnVlOw0KCQkJCWlmIChpbnZlcnRlZCkNCgkJCQkJYnJl
YWs7DQoJCQkJaWYgKGx0eXBlICE9PSBydHlwZSkNCgkJCQkJcnRvcGljay5hZGQocmluc3QpOw0K
CQkJfQ0KCQl9DQoJCWlmIChkb19vZmZzZXQpDQoJCXsNCgkJCXRoaXMueCA9IG9sZHg7DQoJCQl0
aGlzLnkgPSBvbGR5Ow0KCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCX0NCgkJY3IuY2xl
YXJBcnJheShjYW5kaWRhdGVzMik7DQoJCXJldHVybiByZXQ7DQoJfTsNCgl0eXBlUHJvdG8uZmlu
aXNoID0gZnVuY3Rpb24gKGRvX3BpY2spDQoJew0KCQlpZiAoIW5lZWRzY29sbGlzaW9uZmluaXNo
KQ0KCQkJcmV0dXJuOw0KCQlpZiAoZG9fcGljaykNCgkJew0KCQkJdmFyIG9yYmxvY2sgPSB0aGlz
LnJ1bnRpbWUuZ2V0Q3VycmVudEV2ZW50U3RhY2soKS5jdXJyZW50X2V2ZW50Lm9yYmxvY2s7DQoJ
CQl2YXIgc29sID0gcnBpY2t0eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJCXZhciB0b3BpY2sgPSBy
dG9waWNrLnZhbHVlc1JlZigpOw0KCQkJdmFyIGksIGxlbiwgaW5zdDsNCgkJCWlmIChzb2wuc2Vs
ZWN0X2FsbCkNCgkJCXsNCgkJCQlzb2wuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJCWNyLmNsZWFy
QXJyYXkoc29sLmluc3RhbmNlcyk7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gdG9waWNrLmxlbmd0
aDsgaSA8IGxlbjsgKytpKQ0KCQkJCXsNCgkJCQkJc29sLmluc3RhbmNlc1tpXSA9IHRvcGlja1tp
XTsNCgkJCQl9DQoJCQkJaWYgKG9yYmxvY2spDQoJCQkJew0KCQkJCQljci5jbGVhckFycmF5KHNv
bC5lbHNlX2luc3RhbmNlcyk7DQoJCQkJCWZvciAoaSA9IDAsIGxlbiA9IHJwaWNrdHlwZS5pbnN0
YW5jZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpDQoJCQkJCXsNCgkJCQkJCWluc3QgPSBycGlja3R5
cGUuaW5zdGFuY2VzW2ldOw0KCQkJCQkJaWYgKCFydG9waWNrLmNvbnRhaW5zKGluc3QpKQ0KCQkJ
CQkJCXNvbC5lbHNlX2luc3RhbmNlcy5wdXNoKGluc3QpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0K
CQkJZWxzZQ0KCQkJew0KCQkJCWlmIChvcmJsb2NrKQ0KCQkJCXsNCgkJCQkJdmFyIGluaXRzaXpl
ID0gc29sLmluc3RhbmNlcy5sZW5ndGg7DQoJCQkJCWZvciAoaSA9IDAsIGxlbiA9IHRvcGljay5s
ZW5ndGg7IGkgPCBsZW47ICsraSkNCgkJCQkJew0KCQkJCQkJc29sLmluc3RhbmNlc1tpbml0c2l6
ZSArIGldID0gdG9waWNrW2ldOw0KCQkJCQkJY3IuYXJyYXlGaW5kUmVtb3ZlKHNvbC5lbHNlX2lu
c3RhbmNlcywgdG9waWNrW2ldKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJ
CQljci5zaGFsbG93QXNzaWduQXJyYXkoc29sLmluc3RhbmNlcywgdG9waWNrKTsNCgkJCQl9DQoJ
CQl9DQoJCQlycGlja3R5cGUuYXBwbHlTb2xUb0NvbnRhaW5lcigpOw0KCQl9DQoJCXJ0b3BpY2su
Y2xlYXIoKTsNCgkJbmVlZHNjb2xsaXNpb25maW5pc2ggPSBmYWxzZTsNCgl9Ow0KCUNuZHMucHJv
dG90eXBlLklzT3ZlcmxhcHBpbmcgPSBmdW5jdGlvbiAocnR5cGUpDQoJew0KCQlyZXR1cm4gRG9P
dmVybGFwQ29uZGl0aW9uLmNhbGwodGhpcywgcnR5cGUsIDAsIDApOw0KCX07DQoJQ25kcy5wcm90
b3R5cGUuSXNPdmVybGFwcGluZ09mZnNldCA9IGZ1bmN0aW9uIChydHlwZSwgb2ZmeCwgb2ZmeSkN
Cgl7DQoJCXJldHVybiBEb092ZXJsYXBDb25kaXRpb24uY2FsbCh0aGlzLCBydHlwZSwgb2ZmeCwg
b2ZmeSk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Jc0FuaW1QbGF5aW5nID0gZnVuY3Rpb24gKGFu
aW1uYW1lKQ0KCXsNCgkJaWYgKHRoaXMuY2hhbmdlQW5pbU5hbWUubGVuZ3RoKQ0KCQkJcmV0dXJu
IGNyLmVxdWFsc19ub2Nhc2UodGhpcy5jaGFuZ2VBbmltTmFtZSwgYW5pbW5hbWUpOw0KCQllbHNl
DQoJCQlyZXR1cm4gY3IuZXF1YWxzX25vY2FzZSh0aGlzLmN1cl9hbmltYXRpb24ubmFtZSwgYW5p
bW5hbWUpOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuQ29tcGFyZUZyYW1lID0gZnVuY3Rpb24gKGNt
cCwgZnJhbWVudW0pDQoJew0KCQlyZXR1cm4gY3IuZG9fY21wKHRoaXMuY3VyX2ZyYW1lLCBjbXAs
IGZyYW1lbnVtKTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVBbmltU3BlZWQgPSBmdW5j
dGlvbiAoY21wLCB4KQ0KCXsNCgkJdmFyIHMgPSAodGhpcy5hbmltRm9yd2FyZHMgPyB0aGlzLmN1
cl9hbmltX3NwZWVkIDogLXRoaXMuY3VyX2FuaW1fc3BlZWQpOw0KCQlyZXR1cm4gY3IuZG9fY21w
KHMsIGNtcCwgeCk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbkFuaW1GaW5pc2hlZCA9IGZ1bmN0
aW9uIChhbmltbmFtZSkNCgl7DQoJCXJldHVybiBjci5lcXVhbHNfbm9jYXNlKHRoaXMuYW5pbVRy
aWdnZXJOYW1lLCBhbmltbmFtZSk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbkFueUFuaW1GaW5p
c2hlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdHJ1ZTsNCgl9Ow0KCUNuZHMucHJvdG90
eXBlLk9uRnJhbWVDaGFuZ2VkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07
DQoJQ25kcy5wcm90b3R5cGUuSXNNaXJyb3JlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
dGhpcy53aWR0aCA8IDA7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Jc0ZsaXBwZWQgPSBmdW5jdGlv
biAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuaGVpZ2h0IDwgMDsNCgl9Ow0KCUNuZHMucHJvdG90eXBl
Lk9uVVJMTG9hZGVkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25k
cy5wcm90b3R5cGUuSXNDb2xsaXNpb25FbmFibGVkID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVy
biB0aGlzLmNvbGxpc2lvbnNFbmFibGVkOw0KCX07DQoJcGx1Z2luUHJvdG8uY25kcyA9IG5ldyBD
bmRzKCk7DQoJZnVuY3Rpb24gQWN0cygpIHt9Ow0KCUFjdHMucHJvdG90eXBlLlNwYXduID0gZnVu
Y3Rpb24gKG9iaiwgbGF5ZXIsIGltZ3B0KQ0KCXsNCgkJaWYgKCFvYmogfHwgIWxheWVyKQ0KCQkJ
cmV0dXJuOw0KCQl2YXIgaW5zdCA9IHRoaXMucnVudGltZS5jcmVhdGVJbnN0YW5jZShvYmosIGxh
eWVyLCB0aGlzLmdldEltYWdlUG9pbnQoaW1ncHQsIHRydWUpLCB0aGlzLmdldEltYWdlUG9pbnQo
aW1ncHQsIGZhbHNlKSk7DQoJCWlmICghaW5zdCkNCgkJCXJldHVybjsNCgkJaWYgKHR5cGVvZiBp
bnN0LmFuZ2xlICE9PSAidW5kZWZpbmVkIikNCgkJew0KCQkJaW5zdC5hbmdsZSA9IHRoaXMuYW5n
bGU7DQoJCQlpbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJfQ0KCQl0aGlzLnJ1bnRpbWUuaXNJ
bk9uRGVzdHJveSsrOw0KCQl2YXIgaSwgbGVuLCBzOw0KCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihP
YmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqLnBsdWdpbikuY25kcy5PbkNyZWF0ZWQsIGluc3QpOw0K
CQlpZiAoaW5zdC5pc19jb250YWluZWQpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGxlbiA9IGluc3Qu
c2libGluZ3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl7DQoJCQkJcyA9IGluc3Quc2libGlu
Z3NbaV07DQoJCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKHMu
dHlwZS5wbHVnaW4pLmNuZHMuT25DcmVhdGVkLCBzKTsNCgkJCX0NCgkJfQ0KCQl0aGlzLnJ1bnRp
bWUuaXNJbk9uRGVzdHJveS0tOw0KCQl2YXIgY3VyX2FjdCA9IHRoaXMucnVudGltZS5nZXRDdXJy
ZW50QWN0aW9uKCk7DQoJCXZhciByZXNldF9zb2wgPSBmYWxzZTsNCgkJaWYgKGNyLmlzX3VuZGVm
aW5lZChjdXJfYWN0LmV4dHJhWyJTcGF3bl9MYXN0RXhlYyJdKSB8fCBjdXJfYWN0LmV4dHJhWyJT
cGF3bl9MYXN0RXhlYyJdIDwgdGhpcy5ydW50aW1lLmV4ZWNjb3VudCkNCgkJew0KCQkJcmVzZXRf
c29sID0gdHJ1ZTsNCgkJCWN1cl9hY3QuZXh0cmFbIlNwYXduX0xhc3RFeGVjIl0gPSB0aGlzLnJ1
bnRpbWUuZXhlY2NvdW50Ow0KCQl9DQoJCXZhciBzb2w7DQoJCWlmIChvYmogIT0gdGhpcy50eXBl
KQ0KCQl7DQoJCQlzb2wgPSBvYmouZ2V0Q3VycmVudFNvbCgpOw0KCQkJc29sLnNlbGVjdF9hbGwg
PSBmYWxzZTsNCgkJCWlmIChyZXNldF9zb2wpDQoJCQl7DQoJCQkJY3IuY2xlYXJBcnJheShzb2wu
aW5zdGFuY2VzKTsNCgkJCQlzb2wuaW5zdGFuY2VzWzBdID0gaW5zdDsNCgkJCX0NCgkJCWVsc2UN
CgkJCQlzb2wuaW5zdGFuY2VzLnB1c2goaW5zdCk7DQoJCQlpZiAoaW5zdC5pc19jb250YWluZWQp
DQoJCQl7DQoJCQkJZm9yIChpID0gMCwgbGVuID0gaW5zdC5zaWJsaW5ncy5sZW5ndGg7IGkgPCBs
ZW47IGkrKykNCgkJCQl7DQoJCQkJCXMgPSBpbnN0LnNpYmxpbmdzW2ldOw0KCQkJCQlzb2wgPSBz
LnR5cGUuZ2V0Q3VycmVudFNvbCgpOw0KCQkJCQlzb2wuc2VsZWN0X2FsbCA9IGZhbHNlOw0KCQkJ
CQlpZiAocmVzZXRfc29sKQ0KCQkJCQl7DQoJCQkJCQljci5jbGVhckFycmF5KHNvbC5pbnN0YW5j
ZXMpOw0KCQkJCQkJc29sLmluc3RhbmNlc1swXSA9IHM7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJ
CQkJc29sLmluc3RhbmNlcy5wdXNoKHMpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCX07DQoJQWN0cy5w
cm90b3R5cGUuU2V0RWZmZWN0ID0gZnVuY3Rpb24gKGVmZmVjdCkNCgl7DQoJCXRoaXMuYmxlbmRf
bW9kZSA9IGVmZmVjdDsNCgkJdGhpcy5jb21wb3NpdGVPcCA9IGNyLmVmZmVjdFRvQ29tcG9zaXRl
T3AoZWZmZWN0KTsNCgkJY3Iuc2V0R0xCbGVuZCh0aGlzLCBlZmZlY3QsIHRoaXMucnVudGltZS5n
bCk7DQoJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCX07DQoJQWN0cy5wcm90b3R5cGUu
U3RvcEFuaW0gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5hbmltUGxheWluZyA9IGZhbHNlOw0K
CX07DQoJQWN0cy5wcm90b3R5cGUuU3RhcnRBbmltID0gZnVuY3Rpb24gKGZyb20pDQoJew0KCQl0
aGlzLmFuaW1QbGF5aW5nID0gdHJ1ZTsNCgkJdGhpcy5mcmFtZVN0YXJ0ID0gdGhpcy5nZXROb3dU
aW1lKCk7DQoJCWlmIChmcm9tID09PSAxICYmIHRoaXMuY3VyX2ZyYW1lICE9PSAwKQ0KCQl7DQoJ
CQl0aGlzLmNoYW5nZUFuaW1GcmFtZSA9IDA7DQoJCQlpZiAoIXRoaXMuaW5BbmltVHJpZ2dlcikN
CgkJCQl0aGlzLmRvQ2hhbmdlQW5pbUZyYW1lKCk7DQoJCX0NCgkJaWYgKCF0aGlzLmlzVGlja2lu
ZykNCgkJew0KCQkJdGhpcy5ydW50aW1lLnRpY2tNZSh0aGlzKTsNCgkJCXRoaXMuaXNUaWNraW5n
ID0gdHJ1ZTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0QW5pbSA9IGZ1bmN0aW9uIChh
bmltbmFtZSwgZnJvbSkNCgl7DQoJCXRoaXMuY2hhbmdlQW5pbU5hbWUgPSBhbmltbmFtZTsNCgkJ
dGhpcy5jaGFuZ2VBbmltRnJvbSA9IGZyb207DQoJCWlmICghdGhpcy5pc1RpY2tpbmcpDQoJCXsN
CgkJCXRoaXMucnVudGltZS50aWNrTWUodGhpcyk7DQoJCQl0aGlzLmlzVGlja2luZyA9IHRydWU7
DQoJCX0NCgkJaWYgKCF0aGlzLmluQW5pbVRyaWdnZXIpDQoJCQl0aGlzLmRvQ2hhbmdlQW5pbSgp
Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0QW5pbUZyYW1lID0gZnVuY3Rpb24gKGZyYW1lbnVt
YmVyKQ0KCXsNCgkJdGhpcy5jaGFuZ2VBbmltRnJhbWUgPSBmcmFtZW51bWJlcjsNCgkJaWYgKCF0
aGlzLmlzVGlja2luZykNCgkJew0KCQkJdGhpcy5ydW50aW1lLnRpY2tNZSh0aGlzKTsNCgkJCXRo
aXMuaXNUaWNraW5nID0gdHJ1ZTsNCgkJfQ0KCQlpZiAoIXRoaXMuaW5BbmltVHJpZ2dlcikNCgkJ
CXRoaXMuZG9DaGFuZ2VBbmltRnJhbWUoKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEFuaW1T
cGVlZCA9IGZ1bmN0aW9uIChzKQ0KCXsNCgkJdGhpcy5jdXJfYW5pbV9zcGVlZCA9IGNyLmFicyhz
KTsNCgkJdGhpcy5hbmltRm9yd2FyZHMgPSAocyA+PSAwKTsNCgkJaWYgKCF0aGlzLmlzVGlja2lu
ZykNCgkJew0KCQkJdGhpcy5ydW50aW1lLnRpY2tNZSh0aGlzKTsNCgkJCXRoaXMuaXNUaWNraW5n
ID0gdHJ1ZTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0QW5pbVJlcGVhdFRvRnJhbWUg
PSBmdW5jdGlvbiAocykNCgl7DQoJCXMgPSBNYXRoLmZsb29yKHMpOw0KCQlpZiAocyA8IDApDQoJ
CQlzID0gMDsNCgkJaWYgKHMgPj0gdGhpcy5jdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGgpDQoJ
CQlzID0gdGhpcy5jdXJfYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGggLSAxOw0KCQl0aGlzLmN1cl9h
bmltX3JlcGVhdHRvID0gczsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldE1pcnJvcmVkID0gZnVu
Y3Rpb24gKG0pDQoJew0KCQl2YXIgbmV3dyA9IGNyLmFicyh0aGlzLndpZHRoKSAqIChtID09PSAw
ID8gLTEgOiAxKTsNCgkJaWYgKHRoaXMud2lkdGggPT09IG5ld3cpDQoJCQlyZXR1cm47DQoJCXRo
aXMud2lkdGggPSBuZXd3Ow0KCQl0aGlzLnNldF9iYm94X2NoYW5nZWQoKTsNCgl9Ow0KCUFjdHMu
cHJvdG90eXBlLlNldEZsaXBwZWQgPSBmdW5jdGlvbiAoZikNCgl7DQoJCXZhciBuZXdoID0gY3Iu
YWJzKHRoaXMuaGVpZ2h0KSAqIChmID09PSAwID8gLTEgOiAxKTsNCgkJaWYgKHRoaXMuaGVpZ2h0
ID09PSBuZXdoKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLmhlaWdodCA9IG5ld2g7DQoJCXRoaXMuc2V0
X2Jib3hfY2hhbmdlZCgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0U2NhbGUgPSBmdW5jdGlv
biAocykNCgl7DQoJCXZhciBjdXJfZnJhbWUgPSB0aGlzLmN1ckZyYW1lOw0KCQl2YXIgbWlycm9y
X2ZhY3RvciA9ICh0aGlzLndpZHRoIDwgMCA/IC0xIDogMSk7DQoJCXZhciBmbGlwX2ZhY3RvciA9
ICh0aGlzLmhlaWdodCA8IDAgPyAtMSA6IDEpOw0KCQl2YXIgbmV3X3dpZHRoID0gY3VyX2ZyYW1l
LndpZHRoICogcyAqIG1pcnJvcl9mYWN0b3I7DQoJCXZhciBuZXdfaGVpZ2h0ID0gY3VyX2ZyYW1l
LmhlaWdodCAqIHMgKiBmbGlwX2ZhY3RvcjsNCgkJaWYgKHRoaXMud2lkdGggIT09IG5ld193aWR0
aCB8fCB0aGlzLmhlaWdodCAhPT0gbmV3X2hlaWdodCkNCgkJew0KCQkJdGhpcy53aWR0aCA9IG5l
d193aWR0aDsNCgkJCXRoaXMuaGVpZ2h0ID0gbmV3X2hlaWdodDsNCgkJCXRoaXMuc2V0X2Jib3hf
Y2hhbmdlZCgpOw0KCQl9DQoJfTsNCglBY3RzLnByb3RvdHlwZS5Mb2FkVVJMID0gZnVuY3Rpb24g
KHVybF8sIHJlc2l6ZV8sIGNyb3NzT3JpZ2luXykNCgl7DQoJCXZhciBpbWcgPSBuZXcgSW1hZ2Uo
KTsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQl2YXIgY3VyRnJhbWVfID0gdGhpcy5jdXJGcmFtZTsN
CgkJaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpDQoJCXsNCgkJCWlmIChjdXJGcmFtZV8udGV4dHVy
ZV9pbWcuc3JjID09PSBpbWcuc3JjKQ0KCQkJew0KCQkJCWlmIChzZWxmLnJ1bnRpbWUuZ2x3cmFw
ICYmIHNlbGYuY3VyRnJhbWUgPT09IGN1ckZyYW1lXykNCgkJCQkJc2VsZi5jdXJXZWJHTFRleHR1
cmUgPSBjdXJGcmFtZV8ud2ViR0xfdGV4dHVyZTsNCgkJCQlpZiAocmVzaXplXyA9PT0gMCkJCS8v
IHJlc2l6ZSB0byBpbWFnZSBzaXplDQoJCQkJew0KCQkJCQlzZWxmLndpZHRoID0gaW1nLndpZHRo
Ow0KCQkJCQlzZWxmLmhlaWdodCA9IGltZy5oZWlnaHQ7DQoJCQkJCXNlbGYuc2V0X2Jib3hfY2hh
bmdlZCgpOw0KCQkJCX0NCgkJCQlzZWxmLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgkJCQlzZWxm
LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5TcHJpdGUucHJvdG90eXBlLmNuZHMuT25VUkxM
b2FkZWQsIHNlbGYpOw0KCQkJCXJldHVybjsNCgkJCX0NCgkJCWN1ckZyYW1lXy50ZXh0dXJlX2lt
ZyA9IGltZzsNCgkJCWN1ckZyYW1lXy5vZmZ4ID0gMDsNCgkJCWN1ckZyYW1lXy5vZmZ5ID0gMDsN
CgkJCWN1ckZyYW1lXy53aWR0aCA9IGltZy53aWR0aDsNCgkJCWN1ckZyYW1lXy5oZWlnaHQgPSBp
bWcuaGVpZ2h0Ow0KCQkJY3VyRnJhbWVfLnNwcml0ZXNoZWV0ZWQgPSBmYWxzZTsNCgkJCWN1ckZy
YW1lXy5kYXRhdXJpID0gIiI7DQoJCQljdXJGcmFtZV8ucGl4ZWxmb3JtYXQgPSAwOwkvLyByZXNl
dCB0byBSR0JBLCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoYXQgdHlwZSBvZiBpbWFnZSB3aWxsIGhh
dmUgY29tZSBpbg0KCQkJaWYgKHNlbGYucnVudGltZS5nbHdyYXApDQoJCQl7DQoJCQkJaWYgKGN1
ckZyYW1lXy53ZWJHTF90ZXh0dXJlKQ0KCQkJCQlzZWxmLnJ1bnRpbWUuZ2x3cmFwLmRlbGV0ZVRl
eHR1cmUoY3VyRnJhbWVfLndlYkdMX3RleHR1cmUpOw0KCQkJCWN1ckZyYW1lXy53ZWJHTF90ZXh0
dXJlID0gc2VsZi5ydW50aW1lLmdsd3JhcC5sb2FkVGV4dHVyZShpbWcsIGZhbHNlLCBzZWxmLnJ1
bnRpbWUubGluZWFyU2FtcGxpbmcpOw0KCQkJCWlmIChzZWxmLmN1ckZyYW1lID09PSBjdXJGcmFt
ZV8pDQoJCQkJCXNlbGYuY3VyV2ViR0xUZXh0dXJlID0gY3VyRnJhbWVfLndlYkdMX3RleHR1cmU7
DQoJCQkJc2VsZi50eXBlLnVwZGF0ZUFsbEN1cnJlbnRUZXh0dXJlKCk7DQoJCQl9DQoJCQlpZiAo
cmVzaXplXyA9PT0gMCkJCS8vIHJlc2l6ZSB0byBpbWFnZSBzaXplDQoJCQl7DQoJCQkJc2VsZi53
aWR0aCA9IGltZy53aWR0aDsNCgkJCQlzZWxmLmhlaWdodCA9IGltZy5oZWlnaHQ7DQoJCQkJc2Vs
Zi5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQl9DQoJCQlzZWxmLnJ1bnRpbWUucmVkcmF3ID0gdHJ1
ZTsNCgkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLlNwcml0ZS5wcm90b3R5cGUu
Y25kcy5PblVSTExvYWRlZCwgc2VsZik7DQoJCX07DQoJCWlmICh1cmxfLnN1YnN0cigwLCA1KSAh
PT0gImRhdGE6IiAmJiBjcm9zc09yaWdpbl8gPT09IDApDQoJCQlpbWdbImNyb3NzT3JpZ2luIl0g
PSAiYW5vbnltb3VzIjsNCgkJdGhpcy5ydW50aW1lLnNldEltYWdlU3JjKGltZywgdXJsXyk7DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5TZXRDb2xsaXNpb25zID0gZnVuY3Rpb24gKHNldF8pDQoJew0K
CQlpZiAodGhpcy5jb2xsaXNpb25zRW5hYmxlZCA9PT0gKHNldF8gIT09IDApKQ0KCQkJcmV0dXJu
OwkJLy8gbm8gY2hhbmdlDQoJCXRoaXMuY29sbGlzaW9uc0VuYWJsZWQgPSAoc2V0XyAhPT0gMCk7
DQoJCWlmICh0aGlzLmNvbGxpc2lvbnNFbmFibGVkKQ0KCQkJdGhpcy5zZXRfYmJveF9jaGFuZ2Vk
KCk7CQkvLyBuZWVkcyB0byBiZSBhZGRlZCBiYWNrIHRvIGNlbGxzDQoJCWVsc2UNCgkJew0KCQkJ
aWYgKHRoaXMuY29sbGNlbGxzLnJpZ2h0ID49IHRoaXMuY29sbGNlbGxzLmxlZnQpDQoJCQkJdGhp
cy50eXBlLmNvbGxpc2lvbl9ncmlkLnVwZGF0ZSh0aGlzLCB0aGlzLmNvbGxjZWxscywgbnVsbCk7
DQoJCQl0aGlzLmNvbGxjZWxscy5zZXQoMCwgMCwgLTEsIC0xKTsNCgkJfQ0KCX07DQoJcGx1Z2lu
UHJvdG8uYWN0cyA9IG5ldyBBY3RzKCk7DQoJZnVuY3Rpb24gRXhwcygpIHt9Ow0KCUV4cHMucHJv
dG90eXBlLkFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfaW50
KHRoaXMuY3VyX2ZyYW1lKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFuaW1hdGlvbkZyYW1lQ291
bnQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9pbnQodGhpcy5jdXJfYW5pbWF0aW9u
LmZyYW1lcy5sZW5ndGgpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuQW5pbWF0aW9uTmFtZSA9IGZ1
bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X3N0cmluZyh0aGlzLmN1cl9hbmltYXRpb24ubmFt
ZSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BbmltYXRpb25TcGVlZCA9IGZ1bmN0aW9uIChyZXQp
DQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYW5pbUZvcndhcmRzID8gdGhpcy5jdXJfYW5pbV9z
cGVlZCA6IC10aGlzLmN1cl9hbmltX3NwZWVkKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkltYWdl
UG9pbnRYID0gZnVuY3Rpb24gKHJldCwgaW1ncHQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMu
Z2V0SW1hZ2VQb2ludChpbWdwdCwgdHJ1ZSkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuSW1hZ2VQ
b2ludFkgPSBmdW5jdGlvbiAocmV0LCBpbWdwdCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5n
ZXRJbWFnZVBvaW50KGltZ3B0LCBmYWxzZSkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuSW1hZ2VQ
b2ludENvdW50ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfaW50KHRoaXMuY3VyRnJh
bWUuaW1hZ2VfcG9pbnRzLmxlbmd0aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5JbWFnZVdpZHRo
ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5jdXJGcmFtZS53aWR0
aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5JbWFnZUhlaWdodCA9IGZ1bmN0aW9uIChyZXQpDQoJ
ew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuY3VyRnJhbWUuaGVpZ2h0KTsNCgl9Ow0KCXBsdWdpblBy
b3RvLmV4cHMgPSBuZXcgRXhwcygpOw0KfSgpKTsNCjsNCjsNCmNyLnBsdWdpbnNfLlRleHQgPSBm
dW5jdGlvbihydW50aW1lKQ0Kew0KCXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0
aW9uICgpDQp7DQoJdmFyIHBsdWdpblByb3RvID0gY3IucGx1Z2luc18uVGV4dC5wcm90b3R5cGU7
DQoJcGx1Z2luUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcGx1Z2luUHJvdG8u
YWN0cy5TZXRXaWR0aCA9IGZ1bmN0aW9uICh3KQ0KCQl7DQoJCQlpZiAodGhpcy53aWR0aCAhPT0g
dykNCgkJCXsNCgkJCQl0aGlzLndpZHRoID0gdzsNCgkJCQl0aGlzLnRleHRfY2hhbmdlZCA9IHRy
dWU7CS8vIGFsc28gcmVjYWxjdWxhdGUgdGV4dCB3cmFwcGluZw0KCQkJCXRoaXMuc2V0X2Jib3hf
Y2hhbmdlZCgpOw0KCQkJfQ0KCQl9Ow0KCX07DQoJcGx1Z2luUHJvdG8uVHlwZSA9IGZ1bmN0aW9u
KHBsdWdpbikNCgl7DQoJCXRoaXMucGx1Z2luID0gcGx1Z2luOw0KCQl0aGlzLnJ1bnRpbWUgPSBw
bHVnaW4ucnVudGltZTsNCgl9Ow0KCXZhciB0eXBlUHJvdG8gPSBwbHVnaW5Qcm90by5UeXBlLnBy
b3RvdHlwZTsNCgl0eXBlUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0KCX07DQoJdHlw
ZVByb3RvLm9uTG9zdFdlYkdMQ29udGV4dCA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5p
c19mYW1pbHkpDQoJCQlyZXR1cm47DQoJCXZhciBpLCBsZW4sIGluc3Q7DQoJCWZvciAoaSA9IDAs
IGxlbiA9IHRoaXMuaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQlpbnN0
ID0gdGhpcy5pbnN0YW5jZXNbaV07DQoJCQlpbnN0Lm15Y2FudmFzID0gbnVsbDsNCgkJCWluc3Qu
bXljdHggPSBudWxsOw0KCQkJaW5zdC5teXRleCA9IG51bGw7DQoJCX0NCgl9Ow0KCXBsdWdpblBy
b3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSkNCgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJ
CXRoaXMucnVudGltZSA9IHR5cGUucnVudGltZTsNCgkJaWYgKHRoaXMucmVjeWNsZWQpDQoJCQlj
ci5jbGVhckFycmF5KHRoaXMubGluZXMpOw0KCQllbHNlDQoJCQl0aGlzLmxpbmVzID0gW107CQkv
LyBmb3Igd29yZCB3cmFwcGluZw0KCQl0aGlzLnRleHRfY2hhbmdlZCA9IHRydWU7DQoJfTsNCgl2
YXIgaW5zdGFuY2VQcm90byA9IHBsdWdpblByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgl2YXIg
cmVxdWVzdGVkV2ViRm9udHMgPSB7fTsJCS8vIGFscmVhZHkgcmVxdWVzdGVkIHdlYiBmb250cyBo
YXZlIGFuIGVudHJ5IGhlcmUNCglpbnN0YW5jZVByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0K
CXsNCgkJdGhpcy50ZXh0ID0gdGhpcy5wcm9wZXJ0aWVzWzBdOw0KCQl0aGlzLnZpc2libGUgPSAo
dGhpcy5wcm9wZXJ0aWVzWzFdID09PSAwKTsJCS8vIDA9dmlzaWJsZSwgMT1pbnZpc2libGUNCgkJ
dGhpcy5mb250ID0gdGhpcy5wcm9wZXJ0aWVzWzJdOw0KCQl0aGlzLmNvbG9yID0gdGhpcy5wcm9w
ZXJ0aWVzWzNdOw0KCQl0aGlzLmhhbGlnbiA9IHRoaXMucHJvcGVydGllc1s0XTsJCQkJLy8gMD1s
ZWZ0LCAxPWNlbnRlciwgMj1yaWdodA0KCQl0aGlzLnZhbGlnbiA9IHRoaXMucHJvcGVydGllc1s1
XTsJCQkJLy8gMD10b3AsIDE9Y2VudGVyLCAyPWJvdHRvbQ0KCQl0aGlzLndyYXBieXdvcmQgPSAo
dGhpcy5wcm9wZXJ0aWVzWzddID09PSAwKTsJLy8gMD13b3JkLCAxPWNoYXJhY3Rlcg0KCQl0aGlz
Lmxhc3R3aWR0aCA9IHRoaXMud2lkdGg7DQoJCXRoaXMubGFzdHdyYXB3aWR0aCA9IHRoaXMud2lk
dGg7DQoJCXRoaXMubGFzdGhlaWdodCA9IHRoaXMuaGVpZ2h0Ow0KCQl0aGlzLmxpbmVfaGVpZ2h0
X29mZnNldCA9IHRoaXMucHJvcGVydGllc1s4XTsNCgkJdGhpcy5mYWNlbmFtZSA9ICIiOw0KCQl0
aGlzLmZvbnRzdHlsZSA9ICIiOw0KCQl0aGlzLnB0U2l6ZSA9IDA7DQoJCXRoaXMudGV4dFdpZHRo
ID0gMDsNCgkJdGhpcy50ZXh0SGVpZ2h0ID0gMDsNCgkJdGhpcy5wYXJzZUZvbnQoKTsNCgkJdGhp
cy5teWNhbnZhcyA9IG51bGw7DQoJCXRoaXMubXljdHggPSBudWxsOw0KCQl0aGlzLm15dGV4ID0g
bnVsbDsNCgkJdGhpcy5uZWVkX3RleHRfcmVkcmF3ID0gZmFsc2U7DQoJCXRoaXMubGFzdF9yZW5k
ZXJfdGljayA9IHRoaXMucnVudGltZS50aWNrY291bnQ7DQoJCWlmICh0aGlzLnJlY3ljbGVkKQ0K
CQkJdGhpcy5yY1RleC5zZXQoMCwgMCwgMSwgMSk7DQoJCWVsc2UNCgkJCXRoaXMucmNUZXggPSBu
ZXcgY3IucmVjdCgwLCAwLCAxLCAxKTsNCgkJaWYgKHRoaXMucnVudGltZS5nbHdyYXApDQoJCQl0
aGlzLnJ1bnRpbWUudGlja01lKHRoaXMpOw0KOw0KCX07DQoJaW5zdGFuY2VQcm90by5wYXJzZUZv
bnQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGFyciA9IHRoaXMuZm9udC5zcGxpdCgiICIpOw0K
CQl2YXIgaTsNCgkJZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykNCgkJew0KCQkJaWYg
KGFycltpXS5zdWJzdHIoYXJyW2ldLmxlbmd0aCAtIDIsIDIpID09PSAicHQiKQ0KCQkJew0KCQkJ
CXRoaXMucHRTaXplID0gcGFyc2VJbnQoYXJyW2ldLnN1YnN0cigwLCBhcnJbaV0ubGVuZ3RoIC0g
MikpOw0KCQkJCXRoaXMucHhIZWlnaHQgPSBNYXRoLmNlaWwoKHRoaXMucHRTaXplIC8gNzIuMCkg
KiA5Ni4wKSArIDQ7CS8vIGFzc3VtZSA5NmRwaS4uLg0KCQkJCWlmIChpID4gMCkNCgkJCQkJdGhp
cy5mb250c3R5bGUgPSBhcnJbaSAtIDFdOw0KCQkJCXRoaXMuZmFjZW5hbWUgPSBhcnJbaSArIDFd
Ow0KCQkJCWZvciAoaSA9IGkgKyAyOyBpIDwgYXJyLmxlbmd0aDsgaSsrKQ0KCQkJCQl0aGlzLmZh
Y2VuYW1lICs9ICIgIiArIGFycltpXTsNCgkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCX07DQoJaW5z
dGFuY2VQcm90by5zYXZlVG9KU09OID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB7DQoJCQki
dCI6IHRoaXMudGV4dCwNCgkJCSJmIjogdGhpcy5mb250LA0KCQkJImMiOiB0aGlzLmNvbG9yLA0K
CQkJImhhIjogdGhpcy5oYWxpZ24sDQoJCQkidmEiOiB0aGlzLnZhbGlnbiwNCgkJCSJ3ciI6IHRo
aXMud3JhcGJ5d29yZCwNCgkJCSJsaG8iOiB0aGlzLmxpbmVfaGVpZ2h0X29mZnNldCwNCgkJCSJm
biI6IHRoaXMuZmFjZW5hbWUsDQoJCQkiZnMiOiB0aGlzLmZvbnRzdHlsZSwNCgkJCSJwcyI6IHRo
aXMucHRTaXplLA0KCQkJInB4aCI6IHRoaXMucHhIZWlnaHQsDQoJCQkidHciOiB0aGlzLnRleHRX
aWR0aCwNCgkJCSJ0aCI6IHRoaXMudGV4dEhlaWdodCwNCgkJCSJscnQiOiB0aGlzLmxhc3RfcmVu
ZGVyX3RpY2sNCgkJfTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8ubG9hZEZyb21KU09OID0gZnVuY3Rp
b24gKG8pDQoJew0KCQl0aGlzLnRleHQgPSBvWyJ0Il07DQoJCXRoaXMuZm9udCA9IG9bImYiXTsN
CgkJdGhpcy5jb2xvciA9IG9bImMiXTsNCgkJdGhpcy5oYWxpZ24gPSBvWyJoYSJdOw0KCQl0aGlz
LnZhbGlnbiA9IG9bInZhIl07DQoJCXRoaXMud3JhcGJ5d29yZCA9IG9bIndyIl07DQoJCXRoaXMu
bGluZV9oZWlnaHRfb2Zmc2V0ID0gb1sibGhvIl07DQoJCXRoaXMuZmFjZW5hbWUgPSBvWyJmbiJd
Ow0KCQl0aGlzLmZvbnRzdHlsZSA9IG9bImZzIl07DQoJCXRoaXMucHRTaXplID0gb1sicHMiXTsN
CgkJdGhpcy5weEhlaWdodCA9IG9bInB4aCJdOw0KCQl0aGlzLnRleHRXaWR0aCA9IG9bInR3Il07
DQoJCXRoaXMudGV4dEhlaWdodCA9IG9bInRoIl07DQoJCXRoaXMubGFzdF9yZW5kZXJfdGljayA9
IG9bImxydCJdOw0KCQl0aGlzLnRleHRfY2hhbmdlZCA9IHRydWU7DQoJCXRoaXMubGFzdHdpZHRo
ID0gdGhpcy53aWR0aDsNCgkJdGhpcy5sYXN0d3JhcHdpZHRoID0gdGhpcy53aWR0aDsNCgkJdGhp
cy5sYXN0aGVpZ2h0ID0gdGhpcy5oZWlnaHQ7DQoJfTsNCglpbnN0YW5jZVByb3RvLnRpY2sgPSBm
dW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMucnVudGltZS5nbHdyYXAgJiYgdGhpcy5teXRleCAm
JiAodGhpcy5ydW50aW1lLnRpY2tjb3VudCAtIHRoaXMubGFzdF9yZW5kZXJfdGljayA+PSAzMDAp
KQ0KCQl7DQoJCQl2YXIgbGF5ZXIgPSB0aGlzLmxheWVyOw0KICAgICAgICAgICAgdGhpcy51cGRh
dGVfYmJveCgpOw0KICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmJib3g7DQogICAgICAgICAg
ICBpZiAoYmJveC5yaWdodCA8IGxheWVyLnZpZXdMZWZ0IHx8IGJib3guYm90dG9tIDwgbGF5ZXIu
dmlld1RvcCB8fCBiYm94LmxlZnQgPiBsYXllci52aWV3UmlnaHQgfHwgYmJveC50b3AgPiBsYXll
ci52aWV3Qm90dG9tKQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5nbHdyYXAuZGVsZXRlVGV4dHVy
ZSh0aGlzLm15dGV4KTsNCgkJCQl0aGlzLm15dGV4ID0gbnVsbDsNCgkJCQl0aGlzLm15Y3R4ID0g
bnVsbDsNCgkJCQl0aGlzLm15Y2FudmFzID0gbnVsbDsNCgkJCX0NCgkJfQ0KCX07DQoJaW5zdGFu
Y2VQcm90by5vbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5teWN0eCA9IG51bGw7
DQoJCXRoaXMubXljYW52YXMgPSBudWxsOw0KCQlpZiAodGhpcy5ydW50aW1lLmdsd3JhcCAmJiB0
aGlzLm15dGV4KQ0KCQkJdGhpcy5ydW50aW1lLmdsd3JhcC5kZWxldGVUZXh0dXJlKHRoaXMubXl0
ZXgpOw0KCQl0aGlzLm15dGV4ID0gbnVsbDsNCgl9Ow0KCWluc3RhbmNlUHJvdG8udXBkYXRlRm9u
dCA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLmZvbnQgPSB0aGlzLmZvbnRzdHlsZSArICIgIiAr
IHRoaXMucHRTaXplLnRvU3RyaW5nKCkgKyAicHQgIiArIHRoaXMuZmFjZW5hbWU7DQoJCXRoaXMu
dGV4dF9jaGFuZ2VkID0gdHJ1ZTsNCgkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJfTsN
CglpbnN0YW5jZVByb3RvLmRyYXcgPSBmdW5jdGlvbihjdHgsIGdsbW9kZSkNCgl7DQoJCWN0eC5m
b250ID0gdGhpcy5mb250Ow0KCQljdHgudGV4dEJhc2VsaW5lID0gInRvcCI7DQoJCWN0eC5maWxs
U3R5bGUgPSB0aGlzLmNvbG9yOw0KCQljdHguZ2xvYmFsQWxwaGEgPSBnbG1vZGUgPyAxIDogdGhp
cy5vcGFjaXR5Ow0KCQl2YXIgbXlzY2FsZSA9IDE7DQoJCWlmIChnbG1vZGUpDQoJCXsNCgkJCW15
c2NhbGUgPSBNYXRoLmFicyh0aGlzLmxheWVyLmdldFNjYWxlKCkpOw0KCQkJY3R4LnNhdmUoKTsN
CgkJCWN0eC5zY2FsZShteXNjYWxlLCBteXNjYWxlKTsNCgkJfQ0KCQlpZiAodGhpcy50ZXh0X2No
YW5nZWQgfHwgdGhpcy53aWR0aCAhPT0gdGhpcy5sYXN0d3JhcHdpZHRoKQ0KCQl7DQoJCQl0aGlz
LnR5cGUucGx1Z2luLldvcmRXcmFwKHRoaXMudGV4dCwgdGhpcy5saW5lcywgY3R4LCB0aGlzLndp
ZHRoLCB0aGlzLndyYXBieXdvcmQpOw0KCQkJdGhpcy50ZXh0X2NoYW5nZWQgPSBmYWxzZTsNCgkJ
CXRoaXMubGFzdHdyYXB3aWR0aCA9IHRoaXMud2lkdGg7DQoJCX0NCgkJdGhpcy51cGRhdGVfYmJv
eCgpOw0KCQl2YXIgcGVuWCA9IGdsbW9kZSA/IDAgOiB0aGlzLmJxdWFkLnRseDsNCgkJdmFyIHBl
blkgPSBnbG1vZGUgPyAwIDogdGhpcy5icXVhZC50bHk7DQoJCWlmICh0aGlzLnJ1bnRpbWUucGl4
ZWxfcm91bmRpbmcpDQoJCXsNCgkJCXBlblggPSAocGVuWCArIDAuNSkgfCAwOw0KCQkJcGVuWSA9
IChwZW5ZICsgMC41KSB8IDA7DQoJCX0NCgkJaWYgKHRoaXMuYW5nbGUgIT09IDAgJiYgIWdsbW9k
ZSkNCgkJew0KCQkJY3R4LnNhdmUoKTsNCgkJCWN0eC50cmFuc2xhdGUocGVuWCwgcGVuWSk7DQoJ
CQljdHgucm90YXRlKHRoaXMuYW5nbGUpOw0KCQkJcGVuWCA9IDA7DQoJCQlwZW5ZID0gMDsNCgkJ
fQ0KCQl2YXIgZW5kWSA9IHBlblkgKyB0aGlzLmhlaWdodDsNCgkJdmFyIGxpbmVfaGVpZ2h0ID0g
dGhpcy5weEhlaWdodDsNCgkJbGluZV9oZWlnaHQgKz0gdGhpcy5saW5lX2hlaWdodF9vZmZzZXQ7
DQoJCXZhciBkcmF3WDsNCgkJdmFyIGk7DQoJCWlmICh0aGlzLnZhbGlnbiA9PT0gMSkJCS8vIGNl
bnRlcg0KCQkJcGVuWSArPSBNYXRoLm1heCh0aGlzLmhlaWdodCAvIDIgLSAodGhpcy5saW5lcy5s
ZW5ndGggKiBsaW5lX2hlaWdodCkgLyAyLCAwKTsNCgkJZWxzZSBpZiAodGhpcy52YWxpZ24gPT09
IDIpCS8vIGJvdHRvbQ0KCQkJcGVuWSArPSBNYXRoLm1heCh0aGlzLmhlaWdodCAtICh0aGlzLmxp
bmVzLmxlbmd0aCAqIGxpbmVfaGVpZ2h0KSAtIDIsIDApOw0KCQlmb3IgKGkgPSAwOyBpIDwgdGhp
cy5saW5lcy5sZW5ndGg7IGkrKykNCgkJew0KCQkJZHJhd1ggPSBwZW5YOw0KCQkJaWYgKHRoaXMu
aGFsaWduID09PSAxKQkJLy8gY2VudGVyDQoJCQkJZHJhd1ggPSBwZW5YICsgKHRoaXMud2lkdGgg
LSB0aGlzLmxpbmVzW2ldLndpZHRoKSAvIDI7DQoJCQllbHNlIGlmICh0aGlzLmhhbGlnbiA9PT0g
MikJLy8gcmlnaHQNCgkJCQlkcmF3WCA9IHBlblggKyAodGhpcy53aWR0aCAtIHRoaXMubGluZXNb
aV0ud2lkdGgpOw0KCQkJY3R4LmZpbGxUZXh0KHRoaXMubGluZXNbaV0udGV4dCwgZHJhd1gsIHBl
blkpOw0KCQkJcGVuWSArPSBsaW5lX2hlaWdodDsNCgkJCWlmIChwZW5ZID49IGVuZFkgLSBsaW5l
X2hlaWdodCkNCgkJCQlicmVhazsNCgkJfQ0KCQlpZiAodGhpcy5hbmdsZSAhPT0gMCB8fCBnbG1v
ZGUpDQoJCQljdHgucmVzdG9yZSgpOw0KCQl0aGlzLmxhc3RfcmVuZGVyX3RpY2sgPSB0aGlzLnJ1
bnRpbWUudGlja2NvdW50Ow0KCX07DQoJaW5zdGFuY2VQcm90by5kcmF3R0wgPSBmdW5jdGlvbihn
bHcpDQoJew0KCQlpZiAodGhpcy53aWR0aCA8IDEgfHwgdGhpcy5oZWlnaHQgPCAxKQ0KCQkJcmV0
dXJuOw0KCQl2YXIgbmVlZF9yZWRyYXcgPSB0aGlzLnRleHRfY2hhbmdlZCB8fCB0aGlzLm5lZWRf
dGV4dF9yZWRyYXc7DQoJCXRoaXMubmVlZF90ZXh0X3JlZHJhdyA9IGZhbHNlOw0KCQl2YXIgbGF5
ZXJfc2NhbGUgPSB0aGlzLmxheWVyLmdldFNjYWxlKCk7DQoJCXZhciBsYXllcl9hbmdsZSA9IHRo
aXMubGF5ZXIuZ2V0QW5nbGUoKTsNCgkJdmFyIHJjVGV4ID0gdGhpcy5yY1RleDsNCgkJdmFyIGZs
b2F0c2NhbGVkd2lkdGggPSBsYXllcl9zY2FsZSAqIHRoaXMud2lkdGg7DQoJCXZhciBmbG9hdHNj
YWxlZGhlaWdodCA9IGxheWVyX3NjYWxlICogdGhpcy5oZWlnaHQ7DQoJCXZhciBzY2FsZWR3aWR0
aCA9IE1hdGguY2VpbChmbG9hdHNjYWxlZHdpZHRoKTsNCgkJdmFyIHNjYWxlZGhlaWdodCA9IE1h
dGguY2VpbChmbG9hdHNjYWxlZGhlaWdodCk7DQoJCXZhciBhYnNzY2FsZWR3aWR0aCA9IE1hdGgu
YWJzKHNjYWxlZHdpZHRoKTsNCgkJdmFyIGFic3NjYWxlZGhlaWdodCA9IE1hdGguYWJzKHNjYWxl
ZGhlaWdodCk7DQoJCXZhciBoYWxmdyA9IHRoaXMucnVudGltZS5kcmF3X3dpZHRoIC8gMjsNCgkJ
dmFyIGhhbGZoID0gdGhpcy5ydW50aW1lLmRyYXdfaGVpZ2h0IC8gMjsNCgkJaWYgKCF0aGlzLm15
Y3R4KQ0KCQl7DQoJCQl0aGlzLm15Y2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2Fu
dmFzIik7DQoJCQl0aGlzLm15Y2FudmFzLndpZHRoID0gYWJzc2NhbGVkd2lkdGg7DQoJCQl0aGlz
Lm15Y2FudmFzLmhlaWdodCA9IGFic3NjYWxlZGhlaWdodDsNCgkJCXRoaXMubGFzdHdpZHRoID0g
YWJzc2NhbGVkd2lkdGg7DQoJCQl0aGlzLmxhc3RoZWlnaHQgPSBhYnNzY2FsZWRoZWlnaHQ7DQoJ
CQluZWVkX3JlZHJhdyA9IHRydWU7DQoJCQl0aGlzLm15Y3R4ID0gdGhpcy5teWNhbnZhcy5nZXRD
b250ZXh0KCIyZCIpOw0KCQl9DQoJCWlmIChhYnNzY2FsZWR3aWR0aCAhPT0gdGhpcy5sYXN0d2lk
dGggfHwgYWJzc2NhbGVkaGVpZ2h0ICE9PSB0aGlzLmxhc3RoZWlnaHQpDQoJCXsNCgkJCXRoaXMu
bXljYW52YXMud2lkdGggPSBhYnNzY2FsZWR3aWR0aDsNCgkJCXRoaXMubXljYW52YXMuaGVpZ2h0
ID0gYWJzc2NhbGVkaGVpZ2h0Ow0KCQkJaWYgKHRoaXMubXl0ZXgpDQoJCQl7DQoJCQkJZ2x3LmRl
bGV0ZVRleHR1cmUodGhpcy5teXRleCk7DQoJCQkJdGhpcy5teXRleCA9IG51bGw7DQoJCQl9DQoJ
CQluZWVkX3JlZHJhdyA9IHRydWU7DQoJCX0NCgkJaWYgKG5lZWRfcmVkcmF3KQ0KCQl7DQoJCQl0
aGlzLm15Y3R4LmNsZWFyUmVjdCgwLCAwLCBhYnNzY2FsZWR3aWR0aCwgYWJzc2NhbGVkaGVpZ2h0
KTsNCgkJCXRoaXMuZHJhdyh0aGlzLm15Y3R4LCB0cnVlKTsNCgkJCWlmICghdGhpcy5teXRleCkN
CgkJCQl0aGlzLm15dGV4ID0gZ2x3LmNyZWF0ZUVtcHR5VGV4dHVyZShhYnNzY2FsZWR3aWR0aCwg
YWJzc2NhbGVkaGVpZ2h0LCB0aGlzLnJ1bnRpbWUubGluZWFyU2FtcGxpbmcsIHRoaXMucnVudGlt
ZS5pc01vYmlsZSk7DQoJCQlnbHcudmlkZW9Ub1RleHR1cmUodGhpcy5teWNhbnZhcywgdGhpcy5t
eXRleCwgdGhpcy5ydW50aW1lLmlzTW9iaWxlKTsNCgkJfQ0KCQl0aGlzLmxhc3R3aWR0aCA9IGFi
c3NjYWxlZHdpZHRoOw0KCQl0aGlzLmxhc3RoZWlnaHQgPSBhYnNzY2FsZWRoZWlnaHQ7DQoJCWds
dy5zZXRUZXh0dXJlKHRoaXMubXl0ZXgpOw0KCQlnbHcuc2V0T3BhY2l0eSh0aGlzLm9wYWNpdHkp
Ow0KCQlnbHcucmVzZXRNb2RlbFZpZXcoKTsNCgkJZ2x3LnRyYW5zbGF0ZSgtaGFsZncsIC1oYWxm
aCk7DQoJCWdsdy51cGRhdGVNb2RlbFZpZXcoKTsNCgkJdmFyIHEgPSB0aGlzLmJxdWFkOw0KCQl2
YXIgdGx4ID0gdGhpcy5sYXllci5sYXllclRvQ2FudmFzKHEudGx4LCBxLnRseSwgdHJ1ZSwgdHJ1
ZSk7DQoJCXZhciB0bHkgPSB0aGlzLmxheWVyLmxheWVyVG9DYW52YXMocS50bHgsIHEudGx5LCBm
YWxzZSwgdHJ1ZSk7DQoJCXZhciB0cnggPSB0aGlzLmxheWVyLmxheWVyVG9DYW52YXMocS50cngs
IHEudHJ5XywgdHJ1ZSwgdHJ1ZSk7DQoJCXZhciB0cnlfID0gdGhpcy5sYXllci5sYXllclRvQ2Fu
dmFzKHEudHJ4LCBxLnRyeV8sIGZhbHNlLCB0cnVlKTsNCgkJdmFyIGJyeCA9IHRoaXMubGF5ZXIu
bGF5ZXJUb0NhbnZhcyhxLmJyeCwgcS5icnksIHRydWUsIHRydWUpOw0KCQl2YXIgYnJ5ID0gdGhp
cy5sYXllci5sYXllclRvQ2FudmFzKHEuYnJ4LCBxLmJyeSwgZmFsc2UsIHRydWUpOw0KCQl2YXIg
Ymx4ID0gdGhpcy5sYXllci5sYXllclRvQ2FudmFzKHEuYmx4LCBxLmJseSwgdHJ1ZSwgdHJ1ZSk7
DQoJCXZhciBibHkgPSB0aGlzLmxheWVyLmxheWVyVG9DYW52YXMocS5ibHgsIHEuYmx5LCBmYWxz
ZSwgdHJ1ZSk7DQoJCWlmICh0aGlzLnJ1bnRpbWUucGl4ZWxfcm91bmRpbmcgfHwgKHRoaXMuYW5n
bGUgPT09IDAgJiYgbGF5ZXJfYW5nbGUgPT09IDApKQ0KCQl7DQoJCQl2YXIgb3ggPSAoKHRseCAr
IDAuNSkgfCAwKSAtIHRseDsNCgkJCXZhciBveSA9ICgodGx5ICsgMC41KSB8IDApIC0gdGx5DQoJ
CQl0bHggKz0gb3g7DQoJCQl0bHkgKz0gb3k7DQoJCQl0cnggKz0gb3g7DQoJCQl0cnlfICs9IG95
Ow0KCQkJYnJ4ICs9IG94Ow0KCQkJYnJ5ICs9IG95Ow0KCQkJYmx4ICs9IG94Ow0KCQkJYmx5ICs9
IG95Ow0KCQl9DQoJCWlmICh0aGlzLmFuZ2xlID09PSAwICYmIGxheWVyX2FuZ2xlID09PSAwKQ0K
CQl7DQoJCQl0cnggPSB0bHggKyBzY2FsZWR3aWR0aDsNCgkJCXRyeV8gPSB0bHk7DQoJCQlicngg
PSB0cng7DQoJCQlicnkgPSB0bHkgKyBzY2FsZWRoZWlnaHQ7DQoJCQlibHggPSB0bHg7DQoJCQli
bHkgPSBicnk7DQoJCQlyY1RleC5yaWdodCA9IDE7DQoJCQlyY1RleC5ib3R0b20gPSAxOw0KCQl9
DQoJCWVsc2UNCgkJew0KCQkJcmNUZXgucmlnaHQgPSBmbG9hdHNjYWxlZHdpZHRoIC8gc2NhbGVk
d2lkdGg7DQoJCQlyY1RleC5ib3R0b20gPSBmbG9hdHNjYWxlZGhlaWdodCAvIHNjYWxlZGhlaWdo
dDsNCgkJfQ0KCQlnbHcucXVhZFRleCh0bHgsIHRseSwgdHJ4LCB0cnlfLCBicngsIGJyeSwgYmx4
LCBibHksIHJjVGV4KTsNCgkJZ2x3LnJlc2V0TW9kZWxWaWV3KCk7DQoJCWdsdy5zY2FsZShsYXll
cl9zY2FsZSwgbGF5ZXJfc2NhbGUpOw0KCQlnbHcucm90YXRlWigtdGhpcy5sYXllci5nZXRBbmds
ZSgpKTsNCgkJZ2x3LnRyYW5zbGF0ZSgodGhpcy5sYXllci52aWV3TGVmdCArIHRoaXMubGF5ZXIu
dmlld1JpZ2h0KSAvIC0yLCAodGhpcy5sYXllci52aWV3VG9wICsgdGhpcy5sYXllci52aWV3Qm90
dG9tKSAvIC0yKTsNCgkJZ2x3LnVwZGF0ZU1vZGVsVmlldygpOw0KCQl0aGlzLmxhc3RfcmVuZGVy
X3RpY2sgPSB0aGlzLnJ1bnRpbWUudGlja2NvdW50Ow0KCX07DQoJdmFyIHdvcmRzQ2FjaGUgPSBb
XTsNCglwbHVnaW5Qcm90by5Ub2tlbmlzZVdvcmRzID0gZnVuY3Rpb24gKHRleHQpDQoJew0KCQlj
ci5jbGVhckFycmF5KHdvcmRzQ2FjaGUpOw0KCQl2YXIgY3VyX3dvcmQgPSAiIjsNCgkJdmFyIGNo
Ow0KCQl2YXIgaSA9IDA7DQoJCXdoaWxlIChpIDwgdGV4dC5sZW5ndGgpDQoJCXsNCgkJCWNoID0g
dGV4dC5jaGFyQXQoaSk7DQoJCQlpZiAoY2ggPT09ICJcbiIpDQoJCQl7DQoJCQkJaWYgKGN1cl93
b3JkLmxlbmd0aCkNCgkJCQl7DQoJCQkJCXdvcmRzQ2FjaGUucHVzaChjdXJfd29yZCk7DQoJCQkJ
CWN1cl93b3JkID0gIiI7DQoJCQkJfQ0KCQkJCXdvcmRzQ2FjaGUucHVzaCgiXG4iKTsNCgkJCQkr
K2k7DQoJCQl9DQoJCQllbHNlIGlmIChjaCA9PT0gIiAiIHx8IGNoID09PSAiXHQiIHx8IGNoID09
PSAiLSIpDQoJCQl7DQoJCQkJZG8gew0KCQkJCQljdXJfd29yZCArPSB0ZXh0LmNoYXJBdChpKTsN
CgkJCQkJaSsrOw0KCQkJCX0NCgkJCQl3aGlsZSAoaSA8IHRleHQubGVuZ3RoICYmICh0ZXh0LmNo
YXJBdChpKSA9PT0gIiAiIHx8IHRleHQuY2hhckF0KGkpID09PSAiXHQiKSk7DQoJCQkJd29yZHND
YWNoZS5wdXNoKGN1cl93b3JkKTsNCgkJCQljdXJfd29yZCA9ICIiOw0KCQkJfQ0KCQkJZWxzZSBp
ZiAoaSA8IHRleHQubGVuZ3RoKQ0KCQkJew0KCQkJCWN1cl93b3JkICs9IGNoOw0KCQkJCWkrKzsN
CgkJCX0NCgkJfQ0KCQlpZiAoY3VyX3dvcmQubGVuZ3RoKQ0KCQkJd29yZHNDYWNoZS5wdXNoKGN1
cl93b3JkKTsNCgl9Ow0KCXZhciBsaW5lc0NhY2hlID0gW107DQoJZnVuY3Rpb24gYWxsb2NMaW5l
KCkNCgl7DQoJCWlmIChsaW5lc0NhY2hlLmxlbmd0aCkNCgkJCXJldHVybiBsaW5lc0NhY2hlLnBv
cCgpOw0KCQllbHNlDQoJCQlyZXR1cm4ge307DQoJfTsNCglmdW5jdGlvbiBmcmVlTGluZShsKQ0K
CXsNCgkJbGluZXNDYWNoZS5wdXNoKGwpOw0KCX07DQoJZnVuY3Rpb24gZnJlZUFsbExpbmVzKGFy
cikNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkg
PCBsZW47IGkrKykNCgkJew0KCQkJZnJlZUxpbmUoYXJyW2ldKTsNCgkJfQ0KCQljci5jbGVhckFy
cmF5KGFycik7DQoJfTsNCglwbHVnaW5Qcm90by5Xb3JkV3JhcCA9IGZ1bmN0aW9uICh0ZXh0LCBs
aW5lcywgY3R4LCB3aWR0aCwgd3JhcGJ5d29yZCkNCgl7DQoJCWlmICghdGV4dCB8fCAhdGV4dC5s
ZW5ndGgpDQoJCXsNCgkJCWZyZWVBbGxMaW5lcyhsaW5lcyk7DQoJCQlyZXR1cm47DQoJCX0NCgkJ
aWYgKHdpZHRoIDw9IDIuMCkNCgkJew0KCQkJZnJlZUFsbExpbmVzKGxpbmVzKTsNCgkJCXJldHVy
bjsNCgkJfQ0KCQlpZiAodGV4dC5sZW5ndGggPD0gMTAwICYmIHRleHQuaW5kZXhPZigiXG4iKSA9
PT0gLTEpDQoJCXsNCgkJCXZhciBhbGxfd2lkdGggPSBjdHgubWVhc3VyZVRleHQodGV4dCkud2lk
dGg7DQoJCQlpZiAoYWxsX3dpZHRoIDw9IHdpZHRoKQ0KCQkJew0KCQkJCWZyZWVBbGxMaW5lcyhs
aW5lcyk7DQoJCQkJbGluZXMucHVzaChhbGxvY0xpbmUoKSk7DQoJCQkJbGluZXNbMF0udGV4dCA9
IHRleHQ7DQoJCQkJbGluZXNbMF0ud2lkdGggPSBhbGxfd2lkdGg7DQoJCQkJcmV0dXJuOw0KCQkJ
fQ0KCQl9DQoJCXRoaXMuV3JhcFRleHQodGV4dCwgbGluZXMsIGN0eCwgd2lkdGgsIHdyYXBieXdv
cmQpOw0KCX07DQoJZnVuY3Rpb24gdHJpbVNpbmdsZVNwYWNlUmlnaHQoc3RyKQ0KCXsNCgkJaWYg
KCFzdHIubGVuZ3RoIHx8IHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpICE9PSAiICIpDQoJCQly
ZXR1cm4gc3RyOw0KCQlyZXR1cm4gc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gMSk7DQoJ
fTsNCglwbHVnaW5Qcm90by5XcmFwVGV4dCA9IGZ1bmN0aW9uICh0ZXh0LCBsaW5lcywgY3R4LCB3
aWR0aCwgd3JhcGJ5d29yZCkNCgl7DQoJCXZhciB3b3JkQXJyYXk7DQoJCWlmICh3cmFwYnl3b3Jk
KQ0KCQl7DQoJCQl0aGlzLlRva2VuaXNlV29yZHModGV4dCk7CS8vIHdyaXRlcyB0byB3b3Jkc0Nh
Y2hlDQoJCQl3b3JkQXJyYXkgPSB3b3Jkc0NhY2hlOw0KCQl9DQoJCWVsc2UNCgkJCXdvcmRBcnJh
eSA9IHRleHQ7DQoJCXZhciBjdXJfbGluZSA9ICIiOw0KCQl2YXIgcHJldl9saW5lOw0KCQl2YXIg
bGluZV93aWR0aDsNCgkJdmFyIGk7DQoJCXZhciBsaW5lSW5kZXggPSAwOw0KCQl2YXIgbGluZTsN
CgkJZm9yIChpID0gMDsgaSA8IHdvcmRBcnJheS5sZW5ndGg7IGkrKykNCgkJew0KCQkJaWYgKHdv
cmRBcnJheVtpXSA9PT0gIlxuIikNCgkJCXsNCgkJCQlpZiAobGluZUluZGV4ID49IGxpbmVzLmxl
bmd0aCkNCgkJCQkJbGluZXMucHVzaChhbGxvY0xpbmUoKSk7DQoJCQkJY3VyX2xpbmUgPSB0cmlt
U2luZ2xlU3BhY2VSaWdodChjdXJfbGluZSk7CQkvLyBmb3IgY29ycmVjdCBjZW50ZXIvcmlnaHQg
YWxpZ25tZW50DQoJCQkJbGluZSA9IGxpbmVzW2xpbmVJbmRleF07DQoJCQkJbGluZS50ZXh0ID0g
Y3VyX2xpbmU7DQoJCQkJbGluZS53aWR0aCA9IGN0eC5tZWFzdXJlVGV4dChjdXJfbGluZSkud2lk
dGg7DQoJCQkJbGluZUluZGV4Kys7DQoJCQkJY3VyX2xpbmUgPSAiIjsNCgkJCQljb250aW51ZTsN
CgkJCX0NCgkJCXByZXZfbGluZSA9IGN1cl9saW5lOw0KCQkJY3VyX2xpbmUgKz0gd29yZEFycmF5
W2ldOw0KCQkJbGluZV93aWR0aCA9IGN0eC5tZWFzdXJlVGV4dChjdXJfbGluZSkud2lkdGg7DQoJ
CQlpZiAobGluZV93aWR0aCA+PSB3aWR0aCkNCgkJCXsNCgkJCQlpZiAobGluZUluZGV4ID49IGxp
bmVzLmxlbmd0aCkNCgkJCQkJbGluZXMucHVzaChhbGxvY0xpbmUoKSk7DQoJCQkJcHJldl9saW5l
ID0gdHJpbVNpbmdsZVNwYWNlUmlnaHQocHJldl9saW5lKTsNCgkJCQlsaW5lID0gbGluZXNbbGlu
ZUluZGV4XTsNCgkJCQlsaW5lLnRleHQgPSBwcmV2X2xpbmU7DQoJCQkJbGluZS53aWR0aCA9IGN0
eC5tZWFzdXJlVGV4dChwcmV2X2xpbmUpLndpZHRoOw0KCQkJCWxpbmVJbmRleCsrOw0KCQkJCWN1
cl9saW5lID0gd29yZEFycmF5W2ldOw0KCQkJCWlmICghd3JhcGJ5d29yZCAmJiBjdXJfbGluZSA9
PT0gIiAiKQ0KCQkJCQljdXJfbGluZSA9ICIiOw0KCQkJfQ0KCQl9DQoJCWlmIChjdXJfbGluZS5s
ZW5ndGgpDQoJCXsNCgkJCWlmIChsaW5lSW5kZXggPj0gbGluZXMubGVuZ3RoKQ0KCQkJCWxpbmVz
LnB1c2goYWxsb2NMaW5lKCkpOw0KCQkJY3VyX2xpbmUgPSB0cmltU2luZ2xlU3BhY2VSaWdodChj
dXJfbGluZSk7DQoJCQlsaW5lID0gbGluZXNbbGluZUluZGV4XTsNCgkJCWxpbmUudGV4dCA9IGN1
cl9saW5lOw0KCQkJbGluZS53aWR0aCA9IGN0eC5tZWFzdXJlVGV4dChjdXJfbGluZSkud2lkdGg7
DQoJCQlsaW5lSW5kZXgrKzsNCgkJfQ0KCQlmb3IgKGkgPSBsaW5lSW5kZXg7IGkgPCBsaW5lcy5s
ZW5ndGg7IGkrKykNCgkJCWZyZWVMaW5lKGxpbmVzW2ldKTsNCgkJbGluZXMubGVuZ3RoID0gbGlu
ZUluZGV4Ow0KCX07DQoJZnVuY3Rpb24gQ25kcygpIHt9Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBh
cmVUZXh0ID0gZnVuY3Rpb24odGV4dF90b19jb21wYXJlLCBjYXNlX3NlbnNpdGl2ZSkNCgl7DQoJ
CWlmIChjYXNlX3NlbnNpdGl2ZSkNCgkJCXJldHVybiB0aGlzLnRleHQgPT0gdGV4dF90b19jb21w
YXJlOw0KCQllbHNlDQoJCQlyZXR1cm4gY3IuZXF1YWxzX25vY2FzZSh0aGlzLnRleHQsIHRleHRf
dG9fY29tcGFyZSk7DQoJfTsNCglwbHVnaW5Qcm90by5jbmRzID0gbmV3IENuZHMoKTsNCglmdW5j
dGlvbiBBY3RzKCkge307DQoJQWN0cy5wcm90b3R5cGUuU2V0VGV4dCA9IGZ1bmN0aW9uKHBhcmFt
KQ0KCXsNCgkJaWYgKGNyLmlzX251bWJlcihwYXJhbSkgJiYgcGFyYW0gPCAxZTkpDQoJCQlwYXJh
bSA9IE1hdGgucm91bmQocGFyYW0gKiAxZTEwKSAvIDFlMTA7CS8vIHJvdW5kIHRvIG5lYXJlc3Qg
dGVuIGJpbGxpb250aCAtIGhpZGVzIGZsb2F0aW5nIHBvaW50IGVycm9ycw0KCQl2YXIgdGV4dF90
b19zZXQgPSBwYXJhbS50b1N0cmluZygpOw0KCQlpZiAodGhpcy50ZXh0ICE9PSB0ZXh0X3RvX3Nl
dCkNCgkJew0KCQkJdGhpcy50ZXh0ID0gdGV4dF90b19zZXQ7DQoJCQl0aGlzLnRleHRfY2hhbmdl
ZCA9IHRydWU7DQoJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgkJfQ0KCX07DQoJQWN0
cy5wcm90b3R5cGUuQXBwZW5kVGV4dCA9IGZ1bmN0aW9uKHBhcmFtKQ0KCXsNCgkJaWYgKGNyLmlz
X251bWJlcihwYXJhbSkpDQoJCQlwYXJhbSA9IE1hdGgucm91bmQocGFyYW0gKiAxZTEwKSAvIDFl
MTA7CS8vIHJvdW5kIHRvIG5lYXJlc3QgdGVuIGJpbGxpb250aCAtIGhpZGVzIGZsb2F0aW5nIHBv
aW50IGVycm9ycw0KCQl2YXIgdGV4dF90b19hcHBlbmQgPSBwYXJhbS50b1N0cmluZygpOw0KCQlp
ZiAodGV4dF90b19hcHBlbmQpCS8vIG5vdCBlbXB0eQ0KCQl7DQoJCQl0aGlzLnRleHQgKz0gdGV4
dF90b19hcHBlbmQ7DQoJCQl0aGlzLnRleHRfY2hhbmdlZCA9IHRydWU7DQoJCQl0aGlzLnJ1bnRp
bWUucmVkcmF3ID0gdHJ1ZTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0Rm9udEZhY2Ug
PSBmdW5jdGlvbiAoZmFjZV8sIHN0eWxlXykNCgl7DQoJCXZhciBuZXdzdHlsZSA9ICIiOw0KCQlz
d2l0Y2ggKHN0eWxlXykgew0KCQljYXNlIDE6IG5ld3N0eWxlID0gImJvbGQiOyBicmVhazsNCgkJ
Y2FzZSAyOiBuZXdzdHlsZSA9ICJpdGFsaWMiOyBicmVhazsNCgkJY2FzZSAzOiBuZXdzdHlsZSA9
ICJib2xkIGl0YWxpYyI7IGJyZWFrOw0KCQl9DQoJCWlmIChmYWNlXyA9PT0gdGhpcy5mYWNlbmFt
ZSAmJiBuZXdzdHlsZSA9PT0gdGhpcy5mb250c3R5bGUpDQoJCQlyZXR1cm47CQkvLyBubyBjaGFu
Z2UNCgkJdGhpcy5mYWNlbmFtZSA9IGZhY2VfOw0KCQl0aGlzLmZvbnRzdHlsZSA9IG5ld3N0eWxl
Ow0KCQl0aGlzLnVwZGF0ZUZvbnQoKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEZvbnRTaXpl
ID0gZnVuY3Rpb24gKHNpemVfKQ0KCXsNCgkJaWYgKHRoaXMucHRTaXplID09PSBzaXplXykNCgkJ
CXJldHVybjsNCgkJdGhpcy5wdFNpemUgPSBzaXplXzsNCgkJdGhpcy5weEhlaWdodCA9IE1hdGgu
Y2VpbCgodGhpcy5wdFNpemUgLyA3Mi4wKSAqIDk2LjApICsgNDsJLy8gYXNzdW1lIDk2ZHBpLi4u
DQoJCXRoaXMudXBkYXRlRm9udCgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0Rm9udENvbG9y
ID0gZnVuY3Rpb24gKHJnYikNCgl7DQoJCXZhciBuZXdjb2xvciA9ICJyZ2IoIiArIGNyLkdldFJW
YWx1ZShyZ2IpLnRvU3RyaW5nKCkgKyAiLCIgKyBjci5HZXRHVmFsdWUocmdiKS50b1N0cmluZygp
ICsgIiwiICsgY3IuR2V0QlZhbHVlKHJnYikudG9TdHJpbmcoKSArICIpIjsNCgkJaWYgKG5ld2Nv
bG9yID09PSB0aGlzLmNvbG9yKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLmNvbG9yID0gbmV3Y29sb3I7
DQoJCXRoaXMubmVlZF90ZXh0X3JlZHJhdyA9IHRydWU7DQoJCXRoaXMucnVudGltZS5yZWRyYXcg
PSB0cnVlOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0V2ViRm9udCA9IGZ1bmN0aW9uIChmYW1p
bHluYW1lXywgY3NzdXJsXykNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUuaXNEb21GcmVlKQ0KCQl7
DQoJCQljci5sb2dleHBvcnQoIltDb25zdHJ1Y3QgMl0gVGV4dCBwbHVnaW46ICdTZXQgd2ViIGZv
bnQnIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybSAtIHRoZSBhY3Rpb24gaGFzIGJlZW4g
aWdub3JlZCIpOw0KCQkJcmV0dXJuOwkJLy8gREMgdG9kbw0KCQl9DQoJCXZhciBzZWxmID0gdGhp
czsNCgkJdmFyIHJlZnJlc2hGdW5jID0gKGZ1bmN0aW9uICgpIHsNCgkJCQkJCQlzZWxmLnJ1bnRp
bWUucmVkcmF3ID0gdHJ1ZTsNCgkJCQkJCQlzZWxmLnRleHRfY2hhbmdlZCA9IHRydWU7DQoJCQkJ
CQl9KTsNCgkJaWYgKHJlcXVlc3RlZFdlYkZvbnRzLmhhc093blByb3BlcnR5KGNzc3VybF8pKQ0K
CQl7DQoJCQl2YXIgbmV3ZmFjZW5hbWUgPSAiJyIgKyBmYW1pbHluYW1lXyArICInIjsNCgkJCWlm
ICh0aGlzLmZhY2VuYW1lID09PSBuZXdmYWNlbmFtZSkNCgkJCQlyZXR1cm47CS8vIG5vIGNoYW5n
ZQ0KCQkJdGhpcy5mYWNlbmFtZSA9IG5ld2ZhY2VuYW1lOw0KCQkJdGhpcy51cGRhdGVGb250KCk7
DQoJCQlmb3IgKHZhciBpID0gMTsgaSA8IDEwOyBpKyspDQoJCQl7DQoJCQkJc2V0VGltZW91dChy
ZWZyZXNoRnVuYywgaSAqIDEwMCk7DQoJCQkJc2V0VGltZW91dChyZWZyZXNoRnVuYywgaSAqIDEw
MDApOw0KCQkJfQ0KCQkJcmV0dXJuOw0KCQl9DQoJCXZhciB3ZiA9IGRvY3VtZW50LmNyZWF0ZUVs
ZW1lbnQoImxpbmsiKTsNCgkJd2YuaHJlZiA9IGNzc3VybF87DQoJCXdmLnJlbCA9ICJzdHlsZXNo
ZWV0IjsNCgkJd2YudHlwZSA9ICJ0ZXh0L2NzcyI7DQoJCXdmLm9ubG9hZCA9IHJlZnJlc2hGdW5j
Ow0KCQlkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxk
KHdmKTsNCgkJcmVxdWVzdGVkV2ViRm9udHNbY3NzdXJsX10gPSB0cnVlOw0KCQl0aGlzLmZhY2Vu
YW1lID0gIiciICsgZmFtaWx5bmFtZV8gKyAiJyI7DQoJCXRoaXMudXBkYXRlRm9udCgpOw0KCQlm
b3IgKHZhciBpID0gMTsgaSA8IDEwOyBpKyspDQoJCXsNCgkJCXNldFRpbWVvdXQocmVmcmVzaEZ1
bmMsIGkgKiAxMDApOw0KCQkJc2V0VGltZW91dChyZWZyZXNoRnVuYywgaSAqIDEwMDApOw0KCQl9
DQo7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRFZmZlY3QgPSBmdW5jdGlvbiAoZWZmZWN0KQ0K
CXsNCgkJdGhpcy5ibGVuZF9tb2RlID0gZWZmZWN0Ow0KCQl0aGlzLmNvbXBvc2l0ZU9wID0gY3Iu
ZWZmZWN0VG9Db21wb3NpdGVPcChlZmZlY3QpOw0KCQljci5zZXRHTEJsZW5kKHRoaXMsIGVmZmVj
dCwgdGhpcy5ydW50aW1lLmdsKTsNCgkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJfTsN
CglwbHVnaW5Qcm90by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJ
RXhwcy5wcm90b3R5cGUuVGV4dCA9IGZ1bmN0aW9uKHJldCkNCgl7DQoJCXJldC5zZXRfc3RyaW5n
KHRoaXMudGV4dCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5GYWNlTmFtZSA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQlyZXQuc2V0X3N0cmluZyh0aGlzLmZhY2VuYW1lKTsNCgl9Ow0KCUV4cHMucHJv
dG90eXBlLkZhY2VTaXplID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfaW50KHRoaXMu
cHRTaXplKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlRleHRXaWR0aCA9IGZ1bmN0aW9uIChyZXQp
DQoJew0KCQl2YXIgdyA9IDA7DQoJCXZhciBpLCBsZW4sIHg7DQoJCWZvciAoaSA9IDAsIGxlbiA9
IHRoaXMubGluZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXggPSB0aGlzLmxpbmVz
W2ldLndpZHRoOw0KCQkJaWYgKHcgPCB4KQ0KCQkJCXcgPSB4Ow0KCQl9DQoJCXJldC5zZXRfaW50
KHcpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuVGV4dEhlaWdodCA9IGZ1bmN0aW9uIChyZXQpDQoJ
ew0KCQlyZXQuc2V0X2ludCh0aGlzLmxpbmVzLmxlbmd0aCAqICh0aGlzLnB4SGVpZ2h0ICsgdGhp
cy5saW5lX2hlaWdodF9vZmZzZXQpIC0gdGhpcy5saW5lX2hlaWdodF9vZmZzZXQpOw0KCX07DQoJ
cGx1Z2luUHJvdG8uZXhwcyA9IG5ldyBFeHBzKCk7DQp9KCkpOw0KOw0KOw0KY3IucGx1Z2luc18u
VGlsZWRCZyA9IGZ1bmN0aW9uKHJ1bnRpbWUpDQp7DQoJdGhpcy5ydW50aW1lID0gcnVudGltZTsN
Cn07DQooZnVuY3Rpb24gKCkNCnsNCgl2YXIgcGx1Z2luUHJvdG8gPSBjci5wbHVnaW5zXy5UaWxl
ZEJnLnByb3RvdHlwZTsNCglwbHVnaW5Qcm90by5UeXBlID0gZnVuY3Rpb24ocGx1Z2luKQ0KCXsN
CgkJdGhpcy5wbHVnaW4gPSBwbHVnaW47DQoJCXRoaXMucnVudGltZSA9IHBsdWdpbi5ydW50aW1l
Ow0KCX07DQoJdmFyIHR5cGVQcm90byA9IHBsdWdpblByb3RvLlR5cGUucHJvdG90eXBlOw0KCXR5
cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSkN
CgkJCXJldHVybjsNCgkJdGhpcy50ZXh0dXJlX2ltZyA9IG5ldyBJbWFnZSgpOw0KCQl0aGlzLnRl
eHR1cmVfaW1nLmNyX2ZpbGVzaXplID0gdGhpcy50ZXh0dXJlX2ZpbGVzaXplOw0KCQl0aGlzLnJ1
bnRpbWUud2FpdEZvckltYWdlTG9hZCh0aGlzLnRleHR1cmVfaW1nLCB0aGlzLnRleHR1cmVfZmls
ZSk7DQoJCXRoaXMucGF0dGVybiA9IG51bGw7DQoJCXRoaXMud2ViR0xfdGV4dHVyZSA9IG51bGw7
DQoJfTsNCgl0eXBlUHJvdG8ub25Mb3N0V2ViR0xDb250ZXh0ID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CWlmICh0aGlzLmlzX2ZhbWlseSkNCgkJCXJldHVybjsNCgkJdGhpcy53ZWJHTF90ZXh0dXJlID0g
bnVsbDsNCgl9Ow0KCXR5cGVQcm90by5vblJlc3RvcmVXZWJHTENvbnRleHQgPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJaWYgKHRoaXMuaXNfZmFtaWx5IHx8ICF0aGlzLmluc3RhbmNlcy5sZW5ndGgpDQoJ
CQlyZXR1cm47DQoJCWlmICghdGhpcy53ZWJHTF90ZXh0dXJlKQ0KCQl7DQoJCQl0aGlzLndlYkdM
X3RleHR1cmUgPSB0aGlzLnJ1bnRpbWUuZ2x3cmFwLmxvYWRUZXh0dXJlKHRoaXMudGV4dHVyZV9p
bWcsIHRydWUsIHRoaXMucnVudGltZS5saW5lYXJTYW1wbGluZywgdGhpcy50ZXh0dXJlX3BpeGVs
Zm9ybWF0KTsNCgkJfQ0KCQl2YXIgaSwgbGVuOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmlu
c3RhbmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCXRoaXMuaW5zdGFuY2VzW2ldLndlYkdM
X3RleHR1cmUgPSB0aGlzLndlYkdMX3RleHR1cmU7DQoJfTsNCgl0eXBlUHJvdG8ubG9hZFRleHR1
cmVzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSB8fCB0aGlzLndlYkdM
X3RleHR1cmUgfHwgIXRoaXMucnVudGltZS5nbHdyYXApDQoJCQlyZXR1cm47DQoJCXRoaXMud2Vi
R0xfdGV4dHVyZSA9IHRoaXMucnVudGltZS5nbHdyYXAubG9hZFRleHR1cmUodGhpcy50ZXh0dXJl
X2ltZywgdHJ1ZSwgdGhpcy5ydW50aW1lLmxpbmVhclNhbXBsaW5nLCB0aGlzLnRleHR1cmVfcGl4
ZWxmb3JtYXQpOw0KCX07DQoJdHlwZVByb3RvLnVubG9hZFRleHR1cmVzID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCWlmICh0aGlzLmlzX2ZhbWlseSB8fCB0aGlzLmluc3RhbmNlcy5sZW5ndGggfHwgIXRo
aXMud2ViR0xfdGV4dHVyZSkNCgkJCXJldHVybjsNCgkJdGhpcy5ydW50aW1lLmdsd3JhcC5kZWxl
dGVUZXh0dXJlKHRoaXMud2ViR0xfdGV4dHVyZSk7DQoJCXRoaXMud2ViR0xfdGV4dHVyZSA9IG51
bGw7DQoJfTsNCgl0eXBlUHJvdG8ucHJlbG9hZENhbnZhczJEID0gZnVuY3Rpb24gKGN0eCkNCgl7
DQoJCWN0eC5kcmF3SW1hZ2UodGhpcy50ZXh0dXJlX2ltZywgMCwgMCk7DQoJfTsNCglwbHVnaW5Q
cm90by5JbnN0YW5jZSA9IGZ1bmN0aW9uKHR5cGUpDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBlOw0K
CQl0aGlzLnJ1bnRpbWUgPSB0eXBlLnJ1bnRpbWU7DQoJfTsNCgl2YXIgaW5zdGFuY2VQcm90byA9
IHBsdWdpblByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCglpbnN0YW5jZVByb3RvLm9uQ3JlYXRl
ID0gZnVuY3Rpb24oKQ0KCXsNCgkJdGhpcy52aXNpYmxlID0gKHRoaXMucHJvcGVydGllc1swXSA9
PT0gMCk7CQkJCQkJCS8vIDA9dmlzaWJsZSwgMT1pbnZpc2libGUNCgkJdGhpcy5yY1RleCA9IG5l
dyBjci5yZWN0KDAsIDAsIDAsIDApOw0KCQl0aGlzLmhhc19vd25fdGV4dHVyZSA9IGZhbHNlOwkJ
CQkJCQkJCQkvLyB0cnVlIGlmIGEgdGV4dHVyZSBsb2FkZWQgaW4gZnJvbSBVUkwNCgkJdGhpcy50
ZXh0dXJlX2ltZyA9IHRoaXMudHlwZS50ZXh0dXJlX2ltZzsNCgkJaWYgKHRoaXMucnVudGltZS5n
bHdyYXApDQoJCXsNCgkJCXRoaXMudHlwZS5sb2FkVGV4dHVyZXMoKTsNCgkJCXRoaXMud2ViR0xf
dGV4dHVyZSA9IHRoaXMudHlwZS53ZWJHTF90ZXh0dXJlOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJ
aWYgKCF0aGlzLnR5cGUucGF0dGVybikNCgkJCQl0aGlzLnR5cGUucGF0dGVybiA9IHRoaXMucnVu
dGltZS5jdHguY3JlYXRlUGF0dGVybih0aGlzLnR5cGUudGV4dHVyZV9pbWcsICJyZXBlYXQiKTsN
CgkJCXRoaXMucGF0dGVybiA9IHRoaXMudHlwZS5wYXR0ZXJuOw0KCQl9DQoJfTsNCglpbnN0YW5j
ZVByb3RvLmFmdGVyTG9hZCA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLmhhc19vd25fdGV4dHVy
ZSA9IGZhbHNlOw0KCQl0aGlzLnRleHR1cmVfaW1nID0gdGhpcy50eXBlLnRleHR1cmVfaW1nOw0K
CX07DQoJaW5zdGFuY2VQcm90by5vbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRo
aXMucnVudGltZS5nbHdyYXAgJiYgdGhpcy5oYXNfb3duX3RleHR1cmUgJiYgdGhpcy53ZWJHTF90
ZXh0dXJlKQ0KCQl7DQoJCQl0aGlzLnJ1bnRpbWUuZ2x3cmFwLmRlbGV0ZVRleHR1cmUodGhpcy53
ZWJHTF90ZXh0dXJlKTsNCgkJCXRoaXMud2ViR0xfdGV4dHVyZSA9IG51bGw7DQoJCX0NCgl9Ow0K
CWluc3RhbmNlUHJvdG8uZHJhdyA9IGZ1bmN0aW9uKGN0eCkNCgl7DQoJCWN0eC5nbG9iYWxBbHBo
YSA9IHRoaXMub3BhY2l0eTsNCgkJY3R4LnNhdmUoKTsNCgkJY3R4LmZpbGxTdHlsZSA9IHRoaXMu
cGF0dGVybjsNCgkJdmFyIG15eCA9IHRoaXMueDsNCgkJdmFyIG15eSA9IHRoaXMueTsNCgkJaWYg
KHRoaXMucnVudGltZS5waXhlbF9yb3VuZGluZykNCgkJew0KCQkJbXl4ID0gTWF0aC5yb3VuZCht
eXgpOw0KCQkJbXl5ID0gTWF0aC5yb3VuZChteXkpOw0KCQl9DQoJCXZhciBkcmF3WCA9IC0odGhp
cy5ob3RzcG90WCAqIHRoaXMud2lkdGgpOw0KCQl2YXIgZHJhd1kgPSAtKHRoaXMuaG90c3BvdFkg
KiB0aGlzLmhlaWdodCk7DQoJCXZhciBvZmZYID0gZHJhd1ggJSB0aGlzLnRleHR1cmVfaW1nLndp
ZHRoOw0KCQl2YXIgb2ZmWSA9IGRyYXdZICUgdGhpcy50ZXh0dXJlX2ltZy5oZWlnaHQ7DQoJCWlm
IChvZmZYIDwgMCkNCgkJCW9mZlggKz0gdGhpcy50ZXh0dXJlX2ltZy53aWR0aDsNCgkJaWYgKG9m
ZlkgPCAwKQ0KCQkJb2ZmWSArPSB0aGlzLnRleHR1cmVfaW1nLmhlaWdodDsNCgkJY3R4LnRyYW5z
bGF0ZShteXgsIG15eSk7DQoJCWN0eC5yb3RhdGUodGhpcy5hbmdsZSk7DQoJCWN0eC50cmFuc2xh
dGUob2ZmWCwgb2ZmWSk7DQoJCWN0eC5maWxsUmVjdChkcmF3WCAtIG9mZlgsDQoJCQkJCSBkcmF3
WSAtIG9mZlksDQoJCQkJCSB0aGlzLndpZHRoLA0KCQkJCQkgdGhpcy5oZWlnaHQpOw0KCQljdHgu
cmVzdG9yZSgpOw0KCX07DQoJaW5zdGFuY2VQcm90by5kcmF3R0xfZWFybHlaUGFzcyA9IGZ1bmN0
aW9uKGdsdykNCgl7DQoJCXRoaXMuZHJhd0dMKGdsdyk7DQoJfTsNCglpbnN0YW5jZVByb3RvLmRy
YXdHTCA9IGZ1bmN0aW9uKGdsdykNCgl7DQoJCWdsdy5zZXRUZXh0dXJlKHRoaXMud2ViR0xfdGV4
dHVyZSk7DQoJCWdsdy5zZXRPcGFjaXR5KHRoaXMub3BhY2l0eSk7DQoJCXZhciByY1RleCA9IHRo
aXMucmNUZXg7DQoJCXJjVGV4LnJpZ2h0ID0gdGhpcy53aWR0aCAvIHRoaXMudGV4dHVyZV9pbWcu
d2lkdGg7DQoJCXJjVGV4LmJvdHRvbSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy50ZXh0dXJlX2ltZy5o
ZWlnaHQ7DQoJCXZhciBxID0gdGhpcy5icXVhZDsNCgkJaWYgKHRoaXMucnVudGltZS5waXhlbF9y
b3VuZGluZykNCgkJew0KCQkJdmFyIG94ID0gTWF0aC5yb3VuZCh0aGlzLngpIC0gdGhpcy54Ow0K
CQkJdmFyIG95ID0gTWF0aC5yb3VuZCh0aGlzLnkpIC0gdGhpcy55Ow0KCQkJZ2x3LnF1YWRUZXgo
cS50bHggKyBveCwgcS50bHkgKyBveSwgcS50cnggKyBveCwgcS50cnlfICsgb3ksIHEuYnJ4ICsg
b3gsIHEuYnJ5ICsgb3ksIHEuYmx4ICsgb3gsIHEuYmx5ICsgb3ksIHJjVGV4KTsNCgkJfQ0KCQll
bHNlDQoJCQlnbHcucXVhZFRleChxLnRseCwgcS50bHksIHEudHJ4LCBxLnRyeV8sIHEuYnJ4LCBx
LmJyeSwgcS5ibHgsIHEuYmx5LCByY1RleCk7DQoJfTsNCglmdW5jdGlvbiBDbmRzKCkge307DQoJ
Q25kcy5wcm90b3R5cGUuT25VUkxMb2FkZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRy
dWU7DQoJfTsNCglwbHVnaW5Qcm90by5jbmRzID0gbmV3IENuZHMoKTsNCglmdW5jdGlvbiBBY3Rz
KCkge307DQoJQWN0cy5wcm90b3R5cGUuU2V0RWZmZWN0ID0gZnVuY3Rpb24gKGVmZmVjdCkNCgl7
DQoJCXRoaXMuYmxlbmRfbW9kZSA9IGVmZmVjdDsNCgkJdGhpcy5jb21wb3NpdGVPcCA9IGNyLmVm
ZmVjdFRvQ29tcG9zaXRlT3AoZWZmZWN0KTsNCgkJY3Iuc2V0R0xCbGVuZCh0aGlzLCBlZmZlY3Qs
IHRoaXMucnVudGltZS5nbCk7DQoJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCX07DQoJ
QWN0cy5wcm90b3R5cGUuTG9hZFVSTCA9IGZ1bmN0aW9uICh1cmxfLCBjcm9zc09yaWdpbl8pDQoJ
ew0KCQl2YXIgaW1nID0gbmV3IEltYWdlKCk7DQoJCXZhciBzZWxmID0gdGhpczsNCgkJaW1nLm9u
bG9hZCA9IGZ1bmN0aW9uICgpDQoJCXsNCgkJCXNlbGYudGV4dHVyZV9pbWcgPSBpbWc7DQoJCQlp
ZiAoc2VsZi5ydW50aW1lLmdsd3JhcCkNCgkJCXsNCgkJCQlpZiAoc2VsZi5oYXNfb3duX3RleHR1
cmUgJiYgc2VsZi53ZWJHTF90ZXh0dXJlKQ0KCQkJCQlzZWxmLnJ1bnRpbWUuZ2x3cmFwLmRlbGV0
ZVRleHR1cmUoc2VsZi53ZWJHTF90ZXh0dXJlKTsNCgkJCQlzZWxmLndlYkdMX3RleHR1cmUgPSBz
ZWxmLnJ1bnRpbWUuZ2x3cmFwLmxvYWRUZXh0dXJlKGltZywgdHJ1ZSwgc2VsZi5ydW50aW1lLmxp
bmVhclNhbXBsaW5nKTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlzZWxmLnBhdHRlcm4gPSBz
ZWxmLnJ1bnRpbWUuY3R4LmNyZWF0ZVBhdHRlcm4oaW1nLCAicmVwZWF0Iik7DQoJCQl9DQoJCQlz
ZWxmLmhhc19vd25fdGV4dHVyZSA9IHRydWU7DQoJCQlzZWxmLnJ1bnRpbWUucmVkcmF3ID0gdHJ1
ZTsNCgkJCXNlbGYucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLlRpbGVkQmcucHJvdG90eXBl
LmNuZHMuT25VUkxMb2FkZWQsIHNlbGYpOw0KCQl9Ow0KCQlpZiAodXJsXy5zdWJzdHIoMCwgNSkg
IT09ICJkYXRhOiIgJiYgY3Jvc3NPcmlnaW5fID09PSAwKQ0KCQkJaW1nLmNyb3NzT3JpZ2luID0g
ImFub255bW91cyI7DQoJCXRoaXMucnVudGltZS5zZXRJbWFnZVNyYyhpbWcsIHVybF8pOw0KCX07
DQoJcGx1Z2luUHJvdG8uYWN0cyA9IG5ldyBBY3RzKCk7DQoJZnVuY3Rpb24gRXhwcygpIHt9Ow0K
CUV4cHMucHJvdG90eXBlLkltYWdlV2lkdGggPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNl
dF9mbG9hdCh0aGlzLnRleHR1cmVfaW1nLndpZHRoKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLklt
YWdlSGVpZ2h0ID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy50ZXh0
dXJlX2ltZy5oZWlnaHQpOw0KCX07DQoJcGx1Z2luUHJvdG8uZXhwcyA9IG5ldyBFeHBzKCk7DQp9
KCkpOw0KOw0KOw0KY3IucGx1Z2luc18uVG91Y2ggPSBmdW5jdGlvbihydW50aW1lKQ0Kew0KCXRo
aXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIHBsdWdpblBy
b3RvID0gY3IucGx1Z2luc18uVG91Y2gucHJvdG90eXBlOw0KCXBsdWdpblByb3RvLlR5cGUgPSBm
dW5jdGlvbihwbHVnaW4pDQoJew0KCQl0aGlzLnBsdWdpbiA9IHBsdWdpbjsNCgkJdGhpcy5ydW50
aW1lID0gcGx1Z2luLnJ1bnRpbWU7DQoJfTsNCgl2YXIgdHlwZVByb3RvID0gcGx1Z2luUHJvdG8u
VHlwZS5wcm90b3R5cGU7DQoJdHlwZVByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgl9
Ow0KCXBsdWdpblByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSkNCgl7DQoJCXRoaXMudHlw
ZSA9IHR5cGU7DQoJCXRoaXMucnVudGltZSA9IHR5cGUucnVudGltZTsNCgkJdGhpcy50b3VjaGVz
ID0gW107DQoJCXRoaXMubW91c2VEb3duID0gZmFsc2U7DQoJfTsNCgl2YXIgaW5zdGFuY2VQcm90
byA9IHBsdWdpblByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgl2YXIgZHVtbXlvZmZzZXQgPSB7
bGVmdDogMCwgdG9wOiAwfTsNCglpbnN0YW5jZVByb3RvLmZpbmRUb3VjaCA9IGZ1bmN0aW9uIChp
ZCkNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAsIGxlbiA9IHRoaXMudG91Y2hlcy5s
ZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKHRoaXMudG91Y2hlc1tpXVsiaWQiXSA9
PT0gaWQpDQoJCQkJcmV0dXJuIGk7DQoJCX0NCgkJcmV0dXJuIC0xOw0KCX07DQoJdmFyIGFwcG1v
YmlfYWNjeCA9IDA7DQoJdmFyIGFwcG1vYmlfYWNjeSA9IDA7DQoJdmFyIGFwcG1vYmlfYWNjeiA9
IDA7DQoJZnVuY3Rpb24gQXBwTW9iaUdldEFjY2VsZXJhdGlvbihldnQpDQoJew0KCQlhcHBtb2Jp
X2FjY3ggPSBldnQueDsNCgkJYXBwbW9iaV9hY2N5ID0gZXZ0Lnk7DQoJCWFwcG1vYmlfYWNjeiA9
IGV2dC56Ow0KCX07DQoJdmFyIHBnX2FjY3ggPSAwOw0KCXZhciBwZ19hY2N5ID0gMDsNCgl2YXIg
cGdfYWNjeiA9IDA7DQoJZnVuY3Rpb24gUGhvbmVHYXBHZXRBY2NlbGVyYXRpb24oZXZ0KQ0KCXsN
CgkJcGdfYWNjeCA9IGV2dC54Ow0KCQlwZ19hY2N5ID0gZXZ0Lnk7DQoJCXBnX2FjY3ogPSBldnQu
ejsNCgl9Ow0KCXZhciB0aGVJbnN0YW5jZSA9IG51bGw7DQoJdmFyIHRvdWNoaW5mb19jYWNoZSA9
IFtdOw0KCWZ1bmN0aW9uIEFsbG9jVG91Y2hJbmZvKHgsIHksIGlkLCBpbmRleCkNCgl7DQoJCXZh
ciByZXQ7DQoJCWlmICh0b3VjaGluZm9fY2FjaGUubGVuZ3RoKQ0KCQkJcmV0ID0gdG91Y2hpbmZv
X2NhY2hlLnBvcCgpOw0KCQllbHNlDQoJCQlyZXQgPSBuZXcgVG91Y2hJbmZvKCk7DQoJCXJldC5p
bml0KHgsIHksIGlkLCBpbmRleCk7DQoJCXJldHVybiByZXQ7DQoJfTsNCglmdW5jdGlvbiBSZWxl
YXNlVG91Y2hJbmZvKHRpKQ0KCXsNCgkJaWYgKHRvdWNoaW5mb19jYWNoZS5sZW5ndGggPCAxMDAp
DQoJCQl0b3VjaGluZm9fY2FjaGUucHVzaCh0aSk7DQoJfTsNCgl2YXIgR0VTVFVSRV9IT0xEX1RI
UkVTSE9MRCA9IDE1OwkJLy8gbWF4IHB4IG1vdGlvbiBmb3IgaG9sZCBnZXN0dXJlIHRvIHJlZ2lz
dGVyDQoJdmFyIEdFU1RVUkVfSE9MRF9USU1FT1VUID0gNTAwOwkJCS8vIHRpbWUgZm9yIGhvbGQg
Z2VzdHVyZSB0byByZWdpc3Rlcg0KCXZhciBHRVNUVVJFX1RBUF9USU1FT1VUID0gMzMzOwkJCS8v
IHRpbWUgZm9yIHRhcCBnZXN0dXJlIHRvIHJlZ2lzdGVyDQoJdmFyIEdFU1RVUkVfRE9VQkxFVEFQ
X1RIUkVTSE9MRCA9IDI1OwkvLyBtYXggZGlzdGFuY2UgYXBhcnQgZm9yIHRhcHMgdG8gYmUNCglm
dW5jdGlvbiBUb3VjaEluZm8oKQ0KCXsNCgkJdGhpcy5zdGFydHRpbWUgPSAwOw0KCQl0aGlzLnRp
bWUgPSAwOw0KCQl0aGlzLmxhc3R0aW1lID0gMDsNCgkJdGhpcy5zdGFydHggPSAwOw0KCQl0aGlz
LnN0YXJ0eSA9IDA7DQoJCXRoaXMueCA9IDA7DQoJCXRoaXMueSA9IDA7DQoJCXRoaXMubGFzdHgg
PSAwOw0KCQl0aGlzLmxhc3R5ID0gMDsNCgkJdGhpc1siaWQiXSA9IDA7DQoJCXRoaXMuc3RhcnRp
bmRleCA9IDA7DQoJCXRoaXMudHJpZ2dlcmVkSG9sZCA9IGZhbHNlOw0KCQl0aGlzLnRvb0ZhckZv
ckhvbGQgPSBmYWxzZTsNCgl9Ow0KCVRvdWNoSW5mby5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9u
ICh4LCB5LCBpZCwgaW5kZXgpDQoJew0KCQl2YXIgbm93dGltZSA9IGNyLnBlcmZvcm1hbmNlX25v
dygpOw0KCQl0aGlzLnRpbWUgPSBub3d0aW1lOw0KCQl0aGlzLmxhc3R0aW1lID0gbm93dGltZTsN
CgkJdGhpcy5zdGFydHRpbWUgPSBub3d0aW1lOw0KCQl0aGlzLnN0YXJ0eCA9IHg7DQoJCXRoaXMu
c3RhcnR5ID0geTsNCgkJdGhpcy54ID0geDsNCgkJdGhpcy55ID0geTsNCgkJdGhpcy5sYXN0eCA9
IHg7DQoJCXRoaXMubGFzdHkgPSB5Ow0KCQl0aGlzLndpZHRoID0gMDsNCgkJdGhpcy5oZWlnaHQg
PSAwOw0KCQl0aGlzLnByZXNzdXJlID0gMDsNCgkJdGhpc1siaWQiXSA9IGlkOw0KCQl0aGlzLnN0
YXJ0aW5kZXggPSBpbmRleDsNCgkJdGhpcy50cmlnZ2VyZWRIb2xkID0gZmFsc2U7DQoJCXRoaXMu
dG9vRmFyRm9ySG9sZCA9IGZhbHNlOw0KCX07DQoJVG91Y2hJbmZvLnByb3RvdHlwZS51cGRhdGUg
PSBmdW5jdGlvbiAobm93dGltZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgcHJlc3N1cmUpDQoJew0K
CQl0aGlzLmxhc3R0aW1lID0gdGhpcy50aW1lOw0KCQl0aGlzLnRpbWUgPSBub3d0aW1lOw0KCQl0
aGlzLmxhc3R4ID0gdGhpcy54Ow0KCQl0aGlzLmxhc3R5ID0gdGhpcy55Ow0KCQl0aGlzLnggPSB4
Ow0KCQl0aGlzLnkgPSB5Ow0KCQl0aGlzLndpZHRoID0gd2lkdGg7DQoJCXRoaXMuaGVpZ2h0ID0g
aGVpZ2h0Ow0KCQl0aGlzLnByZXNzdXJlID0gcHJlc3N1cmU7DQoJCWlmICghdGhpcy50b29GYXJG
b3JIb2xkICYmIGNyLmRpc3RhbmNlVG8odGhpcy5zdGFydHgsIHRoaXMuc3RhcnR5LCB0aGlzLngs
IHRoaXMueSkgPj0gR0VTVFVSRV9IT0xEX1RIUkVTSE9MRCkNCgkJew0KCQkJdGhpcy50b29GYXJG
b3JIb2xkID0gdHJ1ZTsNCgkJfQ0KCX07DQoJVG91Y2hJbmZvLnByb3RvdHlwZS5tYXliZVRyaWdn
ZXJIb2xkID0gZnVuY3Rpb24gKGluc3QsIGluZGV4KQ0KCXsNCgkJaWYgKHRoaXMudHJpZ2dlcmVk
SG9sZCkNCgkJCXJldHVybjsJCS8vIGFscmVhZHkgdHJpZ2dlcmVkIHRoaXMgZ2VzdHVyZQ0KCQl2
YXIgbm93dGltZSA9IGNyLnBlcmZvcm1hbmNlX25vdygpOw0KCQlpZiAobm93dGltZSAtIHRoaXMu
c3RhcnR0aW1lID49IEdFU1RVUkVfSE9MRF9USU1FT1VUICYmICF0aGlzLnRvb0ZhckZvckhvbGQg
JiYgY3IuZGlzdGFuY2VUbyh0aGlzLnN0YXJ0eCwgdGhpcy5zdGFydHksIHRoaXMueCwgdGhpcy55
KSA8IEdFU1RVUkVfSE9MRF9USFJFU0hPTEQpDQoJCXsNCgkJCXRoaXMudHJpZ2dlcmVkSG9sZCA9
IHRydWU7DQoJCQlpbnN0LnRyaWdnZXJfaW5kZXggPSB0aGlzLnN0YXJ0aW5kZXg7DQoJCQlpbnN0
LnRyaWdnZXJfaWQgPSB0aGlzWyJpZCJdOw0KCQkJaW5zdC5nZXRUb3VjaEluZGV4ID0gaW5kZXg7
DQoJCQlpbnN0LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25k
cy5PbkhvbGRHZXN0dXJlLCBpbnN0KTsNCgkJCWluc3QuY3VyVG91Y2hYID0gdGhpcy54Ow0KCQkJ
aW5zdC5jdXJUb3VjaFkgPSB0aGlzLnk7DQoJCQlpbnN0LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVn
aW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5PbkhvbGRHZXN0dXJlT2JqZWN0LCBpbnN0KTsNCgkJ
CWluc3QuZ2V0VG91Y2hJbmRleCA9IDA7DQoJCX0NCgl9Ow0KCXZhciBsYXN0VGFwWCA9IC0xMDAw
Ow0KCXZhciBsYXN0VGFwWSA9IC0xMDAwOw0KCXZhciBsYXN0VGFwVGltZSA9IC0xMDAwMDsNCglU
b3VjaEluZm8ucHJvdG90eXBlLm1heWJlVHJpZ2dlclRhcCA9IGZ1bmN0aW9uIChpbnN0LCBpbmRl
eCkNCgl7DQoJCWlmICh0aGlzLnRyaWdnZXJlZEhvbGQpDQoJCQlyZXR1cm47DQoJCXZhciBub3d0
aW1lID0gY3IucGVyZm9ybWFuY2Vfbm93KCk7DQoJCWlmIChub3d0aW1lIC0gdGhpcy5zdGFydHRp
bWUgPD0gR0VTVFVSRV9UQVBfVElNRU9VVCAmJiAhdGhpcy50b29GYXJGb3JIb2xkICYmIGNyLmRp
c3RhbmNlVG8odGhpcy5zdGFydHgsIHRoaXMuc3RhcnR5LCB0aGlzLngsIHRoaXMueSkgPCBHRVNU
VVJFX0hPTERfVEhSRVNIT0xEKQ0KCQl7DQoJCQlpbnN0LnRyaWdnZXJfaW5kZXggPSB0aGlzLnN0
YXJ0aW5kZXg7DQoJCQlpbnN0LnRyaWdnZXJfaWQgPSB0aGlzWyJpZCJdOw0KCQkJaW5zdC5nZXRU
b3VjaEluZGV4ID0gaW5kZXg7DQoJCQlpZiAoKG5vd3RpbWUgLSBsYXN0VGFwVGltZSA8PSBHRVNU
VVJFX1RBUF9USU1FT1VUICogMikgJiYgY3IuZGlzdGFuY2VUbyhsYXN0VGFwWCwgbGFzdFRhcFks
IHRoaXMueCwgdGhpcy55KSA8IEdFU1RVUkVfRE9VQkxFVEFQX1RIUkVTSE9MRCkNCgkJCXsNCgkJ
CQlpbnN0LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5P
bkRvdWJsZVRhcEdlc3R1cmUsIGluc3QpOw0KCQkJCWluc3QuY3VyVG91Y2hYID0gdGhpcy54Ow0K
CQkJCWluc3QuY3VyVG91Y2hZID0gdGhpcy55Ow0KCQkJCWluc3QucnVudGltZS50cmlnZ2VyKGNy
LnBsdWdpbnNfLlRvdWNoLnByb3RvdHlwZS5jbmRzLk9uRG91YmxlVGFwR2VzdHVyZU9iamVjdCwg
aW5zdCk7DQoJCQkJbGFzdFRhcFggPSAtMTAwMDsNCgkJCQlsYXN0VGFwWSA9IC0xMDAwOw0KCQkJ
CWxhc3RUYXBUaW1lID0gLTEwMDAwOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWluc3QucnVu
dGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLlRvdWNoLnByb3RvdHlwZS5jbmRzLk9uVGFwR2VzdHVy
ZSwgaW5zdCk7DQoJCQkJaW5zdC5jdXJUb3VjaFggPSB0aGlzLng7DQoJCQkJaW5zdC5jdXJUb3Vj
aFkgPSB0aGlzLnk7DQoJCQkJaW5zdC5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uVG91Y2gu
cHJvdG90eXBlLmNuZHMuT25UYXBHZXN0dXJlT2JqZWN0LCBpbnN0KTsNCgkJCQlsYXN0VGFwWCA9
IHRoaXMueDsNCgkJCQlsYXN0VGFwWSA9IHRoaXMueTsNCgkJCQlsYXN0VGFwVGltZSA9IG5vd3Rp
bWU7DQoJCQl9DQoJCQlpbnN0LmdldFRvdWNoSW5kZXggPSAwOw0KCQl9DQoJfTsNCglpbnN0YW5j
ZVByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgkJdGhlSW5zdGFuY2UgPSB0aGlzOw0K
CQl0aGlzLmlzV2luZG93czggPSAhISh0eXBlb2Ygd2luZG93WyJjMmlzV2luZG93czgiXSAhPT0g
InVuZGVmaW5lZCIgJiYgd2luZG93WyJjMmlzV2luZG93czgiXSk7DQoJCXRoaXMub3JpZW50X2Fs
cGhhID0gMDsNCgkJdGhpcy5vcmllbnRfYmV0YSA9IDA7DQoJCXRoaXMub3JpZW50X2dhbW1hID0g
MDsNCgkJdGhpcy5hY2NfZ194ID0gMDsNCgkJdGhpcy5hY2NfZ195ID0gMDsNCgkJdGhpcy5hY2Nf
Z196ID0gMDsNCgkJdGhpcy5hY2NfeCA9IDA7DQoJCXRoaXMuYWNjX3kgPSAwOw0KCQl0aGlzLmFj
Y196ID0gMDsNCgkJdGhpcy5jdXJUb3VjaFggPSAwOw0KCQl0aGlzLmN1clRvdWNoWSA9IDA7DQoJ
CXRoaXMudHJpZ2dlcl9pbmRleCA9IDA7DQoJCXRoaXMudHJpZ2dlcl9pZCA9IDA7DQoJCXRoaXMu
dHJpZ2dlcl9wZXJtaXNzaW9uID0gMDsNCgkJdGhpcy5nZXRUb3VjaEluZGV4ID0gMDsNCgkJdGhp
cy51c2VNb3VzZUlucHV0ID0gKHRoaXMucHJvcGVydGllc1swXSAhPT0gMCk7DQoJCXZhciBlbGVt
ID0gKHRoaXMucnVudGltZS5mdWxsc2NyZWVuX21vZGUgPiAwKSA/IGRvY3VtZW50IDogdGhpcy5y
dW50aW1lLmNhbnZhczsNCgkJdmFyIGVsZW0yID0gZG9jdW1lbnQ7DQoJCWlmICh0aGlzLnJ1bnRp
bWUuaXNEaXJlY3RDYW52YXMpDQoJCQllbGVtMiA9IGVsZW0gPSB3aW5kb3dbIkNhbnZhcyJdOw0K
CQllbHNlIGlmICh0aGlzLnJ1bnRpbWUuaXNDb2Nvb25KcykNCgkJCWVsZW0yID0gZWxlbSA9IHdp
bmRvdzsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQlpZiAodHlwZW9mIFBvaW50ZXJFdmVudCAhPT0g
InVuZGVmaW5lZCIpDQoJCXsNCgkJCWVsZW0uYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24i
LA0KCQkJCWZ1bmN0aW9uKGluZm8pIHsNCgkJCQkJc2VsZi5vblBvaW50ZXJTdGFydChpbmZvKTsN
CgkJCQl9LA0KCQkJCWZhbHNlDQoJCQkpOw0KCQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCJwb2lu
dGVybW92ZSIsDQoJCQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uUG9pbnRlck1vdmUo
aW5mbyk7DQoJCQkJfSwNCgkJCQlmYWxzZQ0KCQkJKTsNCgkJCWVsZW0yLmFkZEV2ZW50TGlzdGVu
ZXIoInBvaW50ZXJ1cCIsDQoJCQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uUG9pbnRl
ckVuZChpbmZvLCBmYWxzZSk7DQoJCQkJfSwNCgkJCQlmYWxzZQ0KCQkJKTsNCgkJCWVsZW0yLmFk
ZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLA0KCQkJCWZ1bmN0aW9uKGluZm8pIHsNCgkJ
CQkJc2VsZi5vblBvaW50ZXJFbmQoaW5mbywgdHJ1ZSk7DQoJCQkJfSwNCgkJCQlmYWxzZQ0KCQkJ
KTsNCgkJCWlmICh0aGlzLnJ1bnRpbWUuY2FudmFzKQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5j
YW52YXMuYWRkRXZlbnRMaXN0ZW5lcigiTVNHZXN0dXJlSG9sZCIsIGZ1bmN0aW9uKGUpIHsNCgkJ
CQkJZS5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCX0sIGZhbHNlKTsNCgkJCQlkb2N1bWVudC5hZGRF
dmVudExpc3RlbmVyKCJNU0dlc3R1cmVIb2xkIiwgZnVuY3Rpb24oZSkgew0KCQkJCQllLnByZXZl
bnREZWZhdWx0KCk7DQoJCQkJfSwgZmFsc2UpOw0KCQkJCXRoaXMucnVudGltZS5jYW52YXMuYWRk
RXZlbnRMaXN0ZW5lcigiZ2VzdHVyZWhvbGQiLCBmdW5jdGlvbihlKSB7DQoJCQkJCWUucHJldmVu
dERlZmF1bHQoKTsNCgkJCQl9LCBmYWxzZSk7DQoJCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5l
cigiZ2VzdHVyZWhvbGQiLCBmdW5jdGlvbihlKSB7DQoJCQkJCWUucHJldmVudERlZmF1bHQoKTsN
CgkJCQl9LCBmYWxzZSk7DQoJCQl9DQoJCX0NCgkJZWxzZSBpZiAod2luZG93Lm5hdmlnYXRvclsi
bXNQb2ludGVyRW5hYmxlZCJdKQ0KCQl7DQoJCQllbGVtLmFkZEV2ZW50TGlzdGVuZXIoIk1TUG9p
bnRlckRvd24iLA0KCQkJCWZ1bmN0aW9uKGluZm8pIHsNCgkJCQkJc2VsZi5vblBvaW50ZXJTdGFy
dChpbmZvKTsNCgkJCQl9LA0KCQkJCWZhbHNlDQoJCQkpOw0KCQkJZWxlbS5hZGRFdmVudExpc3Rl
bmVyKCJNU1BvaW50ZXJNb3ZlIiwNCgkJCQlmdW5jdGlvbihpbmZvKSB7DQoJCQkJCXNlbGYub25Q
b2ludGVyTW92ZShpbmZvKTsNCgkJCQl9LA0KCQkJCWZhbHNlDQoJCQkpOw0KCQkJZWxlbTIuYWRk
RXZlbnRMaXN0ZW5lcigiTVNQb2ludGVyVXAiLA0KCQkJCWZ1bmN0aW9uKGluZm8pIHsNCgkJCQkJ
c2VsZi5vblBvaW50ZXJFbmQoaW5mbywgZmFsc2UpOw0KCQkJCX0sDQoJCQkJZmFsc2UNCgkJCSk7
DQoJCQllbGVtMi5hZGRFdmVudExpc3RlbmVyKCJNU1BvaW50ZXJDYW5jZWwiLA0KCQkJCWZ1bmN0
aW9uKGluZm8pIHsNCgkJCQkJc2VsZi5vblBvaW50ZXJFbmQoaW5mbywgdHJ1ZSk7DQoJCQkJfSwN
CgkJCQlmYWxzZQ0KCQkJKTsNCgkJCWlmICh0aGlzLnJ1bnRpbWUuY2FudmFzKQ0KCQkJew0KCQkJ
CXRoaXMucnVudGltZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigiTVNHZXN0dXJlSG9sZCIsIGZ1
bmN0aW9uKGUpIHsNCgkJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCX0sIGZhbHNlKTsNCgkJ
CQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJNU0dlc3R1cmVIb2xkIiwgZnVuY3Rpb24oZSkg
ew0KCQkJCQllLnByZXZlbnREZWZhdWx0KCk7DQoJCQkJfSwgZmFsc2UpOw0KCQkJfQ0KCQl9DQoJ
CWVsc2UNCgkJew0KCQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwNCgkJCQlm
dW5jdGlvbihpbmZvKSB7DQoJCQkJCXNlbGYub25Ub3VjaFN0YXJ0KGluZm8pOw0KCQkJCX0sDQoJ
CQkJZmFsc2UNCgkJCSk7DQoJCQllbGVtLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsDQoJ
CQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uVG91Y2hNb3ZlKGluZm8pOw0KCQkJCX0s
DQoJCQkJZmFsc2UNCgkJCSk7DQoJCQllbGVtMi5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIs
DQoJCQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uVG91Y2hFbmQoaW5mbywgZmFsc2Up
Ow0KCQkJCX0sDQoJCQkJZmFsc2UNCgkJCSk7DQoJCQllbGVtMi5hZGRFdmVudExpc3RlbmVyKCJ0
b3VjaGNhbmNlbCIsDQoJCQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uVG91Y2hFbmQo
aW5mbywgdHJ1ZSk7DQoJCQkJfSwNCgkJCQlmYWxzZQ0KCQkJKTsNCgkJfQ0KCQlpZiAodGhpcy5p
c1dpbmRvd3M4KQ0KCQl7DQoJCQl2YXIgd2luOGFjY2VsZXJvbWV0ZXJGbiA9IGZ1bmN0aW9uKGUp
IHsNCgkJCQkJdmFyIHJlYWRpbmcgPSBlWyJyZWFkaW5nIl07DQoJCQkJCXNlbGYuYWNjX3ggPSBy
ZWFkaW5nWyJhY2NlbGVyYXRpb25YIl07DQoJCQkJCXNlbGYuYWNjX3kgPSByZWFkaW5nWyJhY2Nl
bGVyYXRpb25ZIl07DQoJCQkJCXNlbGYuYWNjX3ogPSByZWFkaW5nWyJhY2NlbGVyYXRpb25aIl07
DQoJCQkJfTsNCgkJCXZhciB3aW44aW5jbGlub21ldGVyRm4gPSBmdW5jdGlvbihlKSB7DQoJCQkJ
CXZhciByZWFkaW5nID0gZVsicmVhZGluZyJdOw0KCQkJCQlzZWxmLm9yaWVudF9hbHBoYSA9IHJl
YWRpbmdbInlhd0RlZ3JlZXMiXTsNCgkJCQkJc2VsZi5vcmllbnRfYmV0YSA9IHJlYWRpbmdbInBp
dGNoRGVncmVlcyJdOw0KCQkJCQlzZWxmLm9yaWVudF9nYW1tYSA9IHJlYWRpbmdbInJvbGxEZWdy
ZWVzIl07DQoJCQkJfTsNCgkJCXZhciBhY2NlbGVyb21ldGVyID0gV2luZG93c1siRGV2aWNlcyJd
WyJTZW5zb3JzIl1bIkFjY2VsZXJvbWV0ZXIiXVsiZ2V0RGVmYXVsdCJdKCk7DQogICAgICAgICAg
ICBpZiAoYWNjZWxlcm9tZXRlcikNCgkJCXsNCiAgICAgICAgICAgICAgICBhY2NlbGVyb21ldGVy
WyJyZXBvcnRJbnRlcnZhbCJdID0gTWF0aC5tYXgoYWNjZWxlcm9tZXRlclsibWluaW11bVJlcG9y
dEludGVydmFsIl0sIDE2KTsNCgkJCQlhY2NlbGVyb21ldGVyLmFkZEV2ZW50TGlzdGVuZXIoInJl
YWRpbmdjaGFuZ2VkIiwgd2luOGFjY2VsZXJvbWV0ZXJGbik7DQogICAgICAgICAgICB9DQoJCQl2
YXIgaW5jbGlub21ldGVyID0gV2luZG93c1siRGV2aWNlcyJdWyJTZW5zb3JzIl1bIkluY2xpbm9t
ZXRlciJdWyJnZXREZWZhdWx0Il0oKTsNCgkJCWlmIChpbmNsaW5vbWV0ZXIpDQoJCQl7DQoJCQkJ
aW5jbGlub21ldGVyWyJyZXBvcnRJbnRlcnZhbCJdID0gTWF0aC5tYXgoaW5jbGlub21ldGVyWyJt
aW5pbXVtUmVwb3J0SW50ZXJ2YWwiXSwgMTYpOw0KCQkJCWluY2xpbm9tZXRlci5hZGRFdmVudExp
c3RlbmVyKCJyZWFkaW5nY2hhbmdlZCIsIHdpbjhpbmNsaW5vbWV0ZXJGbik7DQoJCQl9DQoJCQlk
b2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgZnVuY3Rpb24oZSkg
ew0KCQkJCWlmIChkb2N1bWVudFsiaGlkZGVuIl0gfHwgZG9jdW1lbnRbIm1zSGlkZGVuIl0pDQoJ
CQkJew0KCQkJCQlpZiAoYWNjZWxlcm9tZXRlcikNCgkJCQkJCWFjY2VsZXJvbWV0ZXIucmVtb3Zl
RXZlbnRMaXN0ZW5lcigicmVhZGluZ2NoYW5nZWQiLCB3aW44YWNjZWxlcm9tZXRlckZuKTsNCgkJ
CQkJaWYgKGluY2xpbm9tZXRlcikNCgkJCQkJCWluY2xpbm9tZXRlci5yZW1vdmVFdmVudExpc3Rl
bmVyKCJyZWFkaW5nY2hhbmdlZCIsIHdpbjhpbmNsaW5vbWV0ZXJGbik7DQoJCQkJfQ0KCQkJCWVs
c2UNCgkJCQl7DQoJCQkJCWlmIChhY2NlbGVyb21ldGVyKQ0KCQkJCQkJYWNjZWxlcm9tZXRlci5h
ZGRFdmVudExpc3RlbmVyKCJyZWFkaW5nY2hhbmdlZCIsIHdpbjhhY2NlbGVyb21ldGVyRm4pOw0K
CQkJCQlpZiAoaW5jbGlub21ldGVyKQ0KCQkJCQkJaW5jbGlub21ldGVyLmFkZEV2ZW50TGlzdGVu
ZXIoInJlYWRpbmdjaGFuZ2VkIiwgd2luOGluY2xpbm9tZXRlckZuKTsNCgkJCQl9DQoJCQl9LCBm
YWxzZSk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiZGV2
aWNlb3JpZW50YXRpb24iLCBmdW5jdGlvbiAoZXZlbnREYXRhKSB7DQoJCQkJc2VsZi5vcmllbnRf
YWxwaGEgPSBldmVudERhdGFbImFscGhhIl0gfHwgMDsNCgkJCQlzZWxmLm9yaWVudF9iZXRhID0g
ZXZlbnREYXRhWyJiZXRhIl0gfHwgMDsNCgkJCQlzZWxmLm9yaWVudF9nYW1tYSA9IGV2ZW50RGF0
YVsiZ2FtbWEiXSB8fCAwOw0KCQkJfSwgZmFsc2UpOw0KCQkJd2luZG93LmFkZEV2ZW50TGlzdGVu
ZXIoImRldmljZW1vdGlvbiIsIGZ1bmN0aW9uIChldmVudERhdGEpIHsNCgkJCQlpZiAoZXZlbnRE
YXRhWyJhY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Il0pDQoJCQkJew0KCQkJCQlzZWxmLmFj
Y19nX3ggPSBldmVudERhdGFbImFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkiXVsieCJdIHx8
IDA7DQoJCQkJCXNlbGYuYWNjX2dfeSA9IGV2ZW50RGF0YVsiYWNjZWxlcmF0aW9uSW5jbHVkaW5n
R3Jhdml0eSJdWyJ5Il0gfHwgMDsNCgkJCQkJc2VsZi5hY2NfZ196ID0gZXZlbnREYXRhWyJhY2Nl
bGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Il1bInoiXSB8fCAwOw0KCQkJCX0NCgkJCQlpZiAoZXZl
bnREYXRhWyJhY2NlbGVyYXRpb24iXSkNCgkJCQl7DQoJCQkJCXNlbGYuYWNjX3ggPSBldmVudERh
dGFbImFjY2VsZXJhdGlvbiJdWyJ4Il0gfHwgMDsNCgkJCQkJc2VsZi5hY2NfeSA9IGV2ZW50RGF0
YVsiYWNjZWxlcmF0aW9uIl1bInkiXSB8fCAwOw0KCQkJCQlzZWxmLmFjY196ID0gZXZlbnREYXRh
WyJhY2NlbGVyYXRpb24iXVsieiJdIHx8IDA7DQoJCQkJfQ0KCQkJfSwgZmFsc2UpOw0KCQl9DQoJ
CWlmICh0aGlzLnVzZU1vdXNlSW5wdXQgJiYgIXRoaXMucnVudGltZS5pc0RvbUZyZWUpDQoJCXsN
CgkJCWpRdWVyeShkb2N1bWVudCkubW91c2Vtb3ZlKA0KCQkJCWZ1bmN0aW9uKGluZm8pIHsNCgkJ
CQkJc2VsZi5vbk1vdXNlTW92ZShpbmZvKTsNCgkJCQl9DQoJCQkpOw0KCQkJalF1ZXJ5KGRvY3Vt
ZW50KS5tb3VzZWRvd24oDQoJCQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uTW91c2VE
b3duKGluZm8pOw0KCQkJCX0NCgkJCSk7DQoJCQlqUXVlcnkoZG9jdW1lbnQpLm1vdXNldXAoDQoJ
CQkJZnVuY3Rpb24oaW5mbykgew0KCQkJCQlzZWxmLm9uTW91c2VVcChpbmZvKTsNCgkJCQl9DQoJ
CQkpOw0KCQl9DQoJCWlmICghdGhpcy5ydW50aW1lLmlzaU9TICYmIHRoaXMucnVudGltZS5pc0Nv
cmRvdmEgJiYgbmF2aWdhdG9yWyJhY2NlbGVyb21ldGVyIl0gJiYgbmF2aWdhdG9yWyJhY2NlbGVy
b21ldGVyIl1bIndhdGNoQWNjZWxlcmF0aW9uIl0pDQoJCXsNCgkJCW5hdmlnYXRvclsiYWNjZWxl
cm9tZXRlciJdWyJ3YXRjaEFjY2VsZXJhdGlvbiJdKFBob25lR2FwR2V0QWNjZWxlcmF0aW9uLCBu
dWxsLCB7ICJmcmVxdWVuY3kiOiA0MCB9KTsNCgkJfQ0KCQl0aGlzLnJ1bnRpbWUudGljazJNZSh0
aGlzKTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8ub25Qb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChpbmZv
KQ0KCXsNCgkJaWYgKGluZm9bInBvaW50ZXJUeXBlIl0gPT09IGluZm9bIk1TUE9JTlRFUl9UWVBF
X01PVVNFIl0gfHwgaW5mb1sicG9pbnRlclR5cGUiXSA9PT0gIm1vdXNlIikNCgkJCXJldHVybjsN
CgkJaWYgKGluZm8ucHJldmVudERlZmF1bHQpDQoJCQlpbmZvLnByZXZlbnREZWZhdWx0KCk7DQoJ
CXZhciBpID0gdGhpcy5maW5kVG91Y2goaW5mb1sicG9pbnRlcklkIl0pOw0KCQl2YXIgbm93dGlt
ZSA9IGNyLnBlcmZvcm1hbmNlX25vdygpOw0KCQlpZiAoaSA+PSAwKQ0KCQl7DQoJCQl2YXIgb2Zm
c2V0ID0gdGhpcy5ydW50aW1lLmlzRG9tRnJlZSA/IGR1bW15b2Zmc2V0IDogalF1ZXJ5KHRoaXMu
cnVudGltZS5jYW52YXMpLm9mZnNldCgpOw0KCQkJdmFyIHQgPSB0aGlzLnRvdWNoZXNbaV07DQoJ
CQlpZiAobm93dGltZSAtIHQudGltZSA8IDIpDQoJCQkJcmV0dXJuOw0KCQkJdC51cGRhdGUobm93
dGltZSwgaW5mby5wYWdlWCAtIG9mZnNldC5sZWZ0LCBpbmZvLnBhZ2VZIC0gb2Zmc2V0LnRvcCwg
aW5mby53aWR0aCB8fCAwLCBpbmZvLmhlaWdodCB8fCAwLCBpbmZvLnByZXNzdXJlIHx8IDApOw0K
CQl9DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uUG9pbnRlclN0YXJ0ID0gZnVuY3Rpb24gKGluZm8p
DQoJew0KCQlpZiAoaW5mb1sicG9pbnRlclR5cGUiXSA9PT0gaW5mb1siTVNQT0lOVEVSX1RZUEVf
TU9VU0UiXSB8fCBpbmZvWyJwb2ludGVyVHlwZSJdID09PSAibW91c2UiKQ0KCQkJcmV0dXJuOw0K
CQlpZiAoaW5mby5wcmV2ZW50RGVmYXVsdCAmJiBjci5pc0NhbnZhc0lucHV0RXZlbnQoaW5mbykp
DQoJCQlpbmZvLnByZXZlbnREZWZhdWx0KCk7DQoJCXZhciBvZmZzZXQgPSB0aGlzLnJ1bnRpbWUu
aXNEb21GcmVlID8gZHVtbXlvZmZzZXQgOiBqUXVlcnkodGhpcy5ydW50aW1lLmNhbnZhcykub2Zm
c2V0KCk7DQoJCXZhciB0b3VjaHggPSBpbmZvLnBhZ2VYIC0gb2Zmc2V0LmxlZnQ7DQoJCXZhciB0
b3VjaHkgPSBpbmZvLnBhZ2VZIC0gb2Zmc2V0LnRvcDsNCgkJdmFyIG5vd3RpbWUgPSBjci5wZXJm
b3JtYW5jZV9ub3coKTsNCgkJdGhpcy50cmlnZ2VyX2luZGV4ID0gdGhpcy50b3VjaGVzLmxlbmd0
aDsNCgkJdGhpcy50cmlnZ2VyX2lkID0gaW5mb1sicG9pbnRlcklkIl07DQoJCXRoaXMudG91Y2hl
cy5wdXNoKEFsbG9jVG91Y2hJbmZvKHRvdWNoeCwgdG91Y2h5LCBpbmZvWyJwb2ludGVySWQiXSwg
dGhpcy50cmlnZ2VyX2luZGV4KSk7DQoJCXRoaXMucnVudGltZS5pc0luVXNlcklucHV0RXZlbnQg
PSB0cnVlOw0KCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5
cGUuY25kcy5Pbk50aFRvdWNoU3RhcnQsIHRoaXMpOw0KCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihj
ci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5PblRvdWNoU3RhcnQsIHRoaXMpOw0KCQl0
aGlzLmN1clRvdWNoWCA9IHRvdWNoeDsNCgkJdGhpcy5jdXJUb3VjaFkgPSB0b3VjaHk7DQoJCXRo
aXMucnVudGltZS50cmlnZ2VyKGNyLnBsdWdpbnNfLlRvdWNoLnByb3RvdHlwZS5jbmRzLk9uVG91
Y2hPYmplY3QsIHRoaXMpOw0KCQl0aGlzLnJ1bnRpbWUuaXNJblVzZXJJbnB1dEV2ZW50ID0gZmFs
c2U7DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uUG9pbnRlckVuZCA9IGZ1bmN0aW9uIChpbmZvLCBp
c0NhbmNlbCkNCgl7DQoJCWlmIChpbmZvWyJwb2ludGVyVHlwZSJdID09PSBpbmZvWyJNU1BPSU5U
RVJfVFlQRV9NT1VTRSJdIHx8IGluZm9bInBvaW50ZXJUeXBlIl0gPT09ICJtb3VzZSIpDQoJCQly
ZXR1cm47DQoJCWlmIChpbmZvLnByZXZlbnREZWZhdWx0ICYmIGNyLmlzQ2FudmFzSW5wdXRFdmVu
dChpbmZvKSkNCgkJCWluZm8ucHJldmVudERlZmF1bHQoKTsNCgkJdmFyIGkgPSB0aGlzLmZpbmRU
b3VjaChpbmZvWyJwb2ludGVySWQiXSk7DQoJCXRoaXMudHJpZ2dlcl9pbmRleCA9IChpID49IDAg
PyB0aGlzLnRvdWNoZXNbaV0uc3RhcnRpbmRleCA6IC0xKTsNCgkJdGhpcy50cmlnZ2VyX2lkID0g
KGkgPj0gMCA/IHRoaXMudG91Y2hlc1tpXVsiaWQiXSA6IC0xKTsNCgkJdGhpcy5ydW50aW1lLmlz
SW5Vc2VySW5wdXRFdmVudCA9IHRydWU7DQoJCXRoaXMucnVudGltZS50cmlnZ2VyKGNyLnBsdWdp
bnNfLlRvdWNoLnByb3RvdHlwZS5jbmRzLk9uTnRoVG91Y2hFbmQsIHRoaXMpOw0KCQl0aGlzLnJ1
bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5PblRvdWNoRW5k
LCB0aGlzKTsNCgkJaWYgKGkgPj0gMCkNCgkJew0KCQkJaWYgKCFpc0NhbmNlbCkNCgkJCQl0aGlz
LnRvdWNoZXNbaV0ubWF5YmVUcmlnZ2VyVGFwKHRoaXMsIGkpOw0KCQkJUmVsZWFzZVRvdWNoSW5m
byh0aGlzLnRvdWNoZXNbaV0pOw0KCQkJdGhpcy50b3VjaGVzLnNwbGljZShpLCAxKTsNCgkJfQ0K
CQl0aGlzLnJ1bnRpbWUuaXNJblVzZXJJbnB1dEV2ZW50ID0gZmFsc2U7DQoJfTsNCglpbnN0YW5j
ZVByb3RvLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24gKGluZm8pDQoJew0KCQlpZiAoaW5mby5wcmV2
ZW50RGVmYXVsdCkNCgkJCWluZm8ucHJldmVudERlZmF1bHQoKTsNCgkJdmFyIG5vd3RpbWUgPSBj
ci5wZXJmb3JtYW5jZV9ub3coKTsNCgkJdmFyIGksIGxlbiwgdCwgdTsNCgkJZm9yIChpID0gMCwg
bGVuID0gaW5mby5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJ
dCA9IGluZm8uY2hhbmdlZFRvdWNoZXNbaV07DQoJCQl2YXIgaiA9IHRoaXMuZmluZFRvdWNoKHRb
ImlkZW50aWZpZXIiXSk7DQoJCQlpZiAoaiA+PSAwKQ0KCQkJew0KCQkJCXZhciBvZmZzZXQgPSB0
aGlzLnJ1bnRpbWUuaXNEb21GcmVlID8gZHVtbXlvZmZzZXQgOiBqUXVlcnkodGhpcy5ydW50aW1l
LmNhbnZhcykub2Zmc2V0KCk7DQoJCQkJdSA9IHRoaXMudG91Y2hlc1tqXTsNCgkJCQlpZiAobm93
dGltZSAtIHUudGltZSA8IDIpDQoJCQkJCWNvbnRpbnVlOw0KCQkJCXZhciB0b3VjaFdpZHRoID0g
KHQucmFkaXVzWCB8fCB0LndlYmtpdFJhZGl1c1ggfHwgdC5tb3pSYWRpdXNYIHx8IHQubXNSYWRp
dXNYIHx8IDApICogMjsNCgkJCQl2YXIgdG91Y2hIZWlnaHQgPSAodC5yYWRpdXNZIHx8IHQud2Vi
a2l0UmFkaXVzWSB8fCB0Lm1velJhZGl1c1kgfHwgdC5tc1JhZGl1c1kgfHwgMCkgKiAyOw0KCQkJ
CXZhciB0b3VjaEZvcmNlID0gdC5mb3JjZSB8fCB0LndlYmtpdEZvcmNlIHx8IHQubW96Rm9yY2Ug
fHwgdC5tc0ZvcmNlIHx8IDA7DQoJCQkJdS51cGRhdGUobm93dGltZSwgdC5wYWdlWCAtIG9mZnNl
dC5sZWZ0LCB0LnBhZ2VZIC0gb2Zmc2V0LnRvcCwgdG91Y2hXaWR0aCwgdG91Y2hIZWlnaHQsIHRv
dWNoRm9yY2UpOw0KCQkJfQ0KCQl9DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uVG91Y2hTdGFydCA9
IGZ1bmN0aW9uIChpbmZvKQ0KCXsNCgkJaWYgKGluZm8ucHJldmVudERlZmF1bHQgJiYgY3IuaXND
YW52YXNJbnB1dEV2ZW50KGluZm8pKQ0KCQkJaW5mby5wcmV2ZW50RGVmYXVsdCgpOw0KCQl2YXIg
b2Zmc2V0ID0gdGhpcy5ydW50aW1lLmlzRG9tRnJlZSA/IGR1bW15b2Zmc2V0IDogalF1ZXJ5KHRo
aXMucnVudGltZS5jYW52YXMpLm9mZnNldCgpOw0KCQl2YXIgbm93dGltZSA9IGNyLnBlcmZvcm1h
bmNlX25vdygpOw0KCQl0aGlzLnJ1bnRpbWUuaXNJblVzZXJJbnB1dEV2ZW50ID0gdHJ1ZTsNCgkJ
dmFyIGksIGxlbiwgdCwgajsNCgkJZm9yIChpID0gMCwgbGVuID0gaW5mby5jaGFuZ2VkVG91Y2hl
cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJdCA9IGluZm8uY2hhbmdlZFRvdWNoZXNb
aV07DQoJCQlqID0gdGhpcy5maW5kVG91Y2godFsiaWRlbnRpZmllciJdKTsNCgkJCWlmIChqICE9
PSAtMSkNCgkJCQljb250aW51ZTsNCgkJCXZhciB0b3VjaHggPSB0LnBhZ2VYIC0gb2Zmc2V0Lmxl
ZnQ7DQoJCQl2YXIgdG91Y2h5ID0gdC5wYWdlWSAtIG9mZnNldC50b3A7DQoJCQl0aGlzLnRyaWdn
ZXJfaW5kZXggPSB0aGlzLnRvdWNoZXMubGVuZ3RoOw0KCQkJdGhpcy50cmlnZ2VyX2lkID0gdFsi
aWRlbnRpZmllciJdOw0KCQkJdGhpcy50b3VjaGVzLnB1c2goQWxsb2NUb3VjaEluZm8odG91Y2h4
LCB0b3VjaHksIHRbImlkZW50aWZpZXIiXSwgdGhpcy50cmlnZ2VyX2luZGV4KSk7DQoJCQl0aGlz
LnJ1bnRpbWUudHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5Pbk50aFRv
dWNoU3RhcnQsIHRoaXMpOw0KCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uVG91
Y2gucHJvdG90eXBlLmNuZHMuT25Ub3VjaFN0YXJ0LCB0aGlzKTsNCgkJCXRoaXMuY3VyVG91Y2hY
ID0gdG91Y2h4Ow0KCQkJdGhpcy5jdXJUb3VjaFkgPSB0b3VjaHk7DQoJCQl0aGlzLnJ1bnRpbWUu
dHJpZ2dlcihjci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5PblRvdWNoT2JqZWN0LCB0
aGlzKTsNCgkJfQ0KCQl0aGlzLnJ1bnRpbWUuaXNJblVzZXJJbnB1dEV2ZW50ID0gZmFsc2U7DQoJ
fTsNCglpbnN0YW5jZVByb3RvLm9uVG91Y2hFbmQgPSBmdW5jdGlvbiAoaW5mbywgaXNDYW5jZWwp
DQoJew0KCQlpZiAoaW5mby5wcmV2ZW50RGVmYXVsdCAmJiBjci5pc0NhbnZhc0lucHV0RXZlbnQo
aW5mbykpDQoJCQlpbmZvLnByZXZlbnREZWZhdWx0KCk7DQoJCXRoaXMucnVudGltZS5pc0luVXNl
cklucHV0RXZlbnQgPSB0cnVlOw0KCQl2YXIgaSwgbGVuLCB0LCBqOw0KCQlmb3IgKGkgPSAwLCBs
ZW4gPSBpbmZvLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7DQoJCQl0
ID0gaW5mby5jaGFuZ2VkVG91Y2hlc1tpXTsNCgkJCWogPSB0aGlzLmZpbmRUb3VjaCh0WyJpZGVu
dGlmaWVyIl0pOw0KCQkJaWYgKGogPj0gMCkNCgkJCXsNCgkJCQl0aGlzLnRyaWdnZXJfaW5kZXgg
PSB0aGlzLnRvdWNoZXNbal0uc3RhcnRpbmRleDsNCgkJCQl0aGlzLnRyaWdnZXJfaWQgPSB0aGlz
LnRvdWNoZXNbal1bImlkIl07DQoJCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18u
VG91Y2gucHJvdG90eXBlLmNuZHMuT25OdGhUb3VjaEVuZCwgdGhpcyk7DQoJCQkJdGhpcy5ydW50
aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uVG91Y2gucHJvdG90eXBlLmNuZHMuT25Ub3VjaEVuZCwg
dGhpcyk7DQoJCQkJaWYgKCFpc0NhbmNlbCkNCgkJCQkJdGhpcy50b3VjaGVzW2pdLm1heWJlVHJp
Z2dlclRhcCh0aGlzLCBqKTsNCgkJCQlSZWxlYXNlVG91Y2hJbmZvKHRoaXMudG91Y2hlc1tqXSk7
DQoJCQkJdGhpcy50b3VjaGVzLnNwbGljZShqLCAxKTsNCgkJCX0NCgkJfQ0KCQl0aGlzLnJ1bnRp
bWUuaXNJblVzZXJJbnB1dEV2ZW50ID0gZmFsc2U7DQoJfTsNCglpbnN0YW5jZVByb3RvLmdldEFs
cGhhID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLnJ1bnRpbWUuaXNDb3Jkb3ZhICYmIHRo
aXMub3JpZW50X2FscGhhID09PSAwICYmIHBnX2FjY3ogIT09IDApDQoJCQlyZXR1cm4gcGdfYWNj
eiAqIDkwOw0KCQllbHNlDQoJCQlyZXR1cm4gdGhpcy5vcmllbnRfYWxwaGE7DQoJfTsNCglpbnN0
YW5jZVByb3RvLmdldEJldGEgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMucnVudGltZS5p
c0NvcmRvdmEgJiYgdGhpcy5vcmllbnRfYmV0YSA9PT0gMCAmJiBwZ19hY2N5ICE9PSAwKQ0KCQkJ
cmV0dXJuIHBnX2FjY3kgKiA5MDsNCgkJZWxzZQ0KCQkJcmV0dXJuIHRoaXMub3JpZW50X2JldGE7
DQoJfTsNCglpbnN0YW5jZVByb3RvLmdldEdhbW1hID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0
aGlzLnJ1bnRpbWUuaXNDb3Jkb3ZhICYmIHRoaXMub3JpZW50X2dhbW1hID09PSAwICYmIHBnX2Fj
Y3ggIT09IDApDQoJCQlyZXR1cm4gcGdfYWNjeCAqIDkwOw0KCQllbHNlDQoJCQlyZXR1cm4gdGhp
cy5vcmllbnRfZ2FtbWE7DQoJfTsNCgl2YXIgbm9vcF9mdW5jID0gZnVuY3Rpb24oKXt9Ow0KCWZ1
bmN0aW9uIGlzQ29tcGF0aWJpbGl0eU1vdXNlRXZlbnQoZSkNCgl7DQoJCXJldHVybiAoZVsic291
cmNlQ2FwYWJpbGl0aWVzIl0gJiYgZVsic291cmNlQ2FwYWJpbGl0aWVzIl1bImZpcmVzVG91Y2hF
dmVudHMiXSkgfHwNCgkJCQkoZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudFsic291
cmNlQ2FwYWJpbGl0aWVzIl0gJiYgZS5vcmlnaW5hbEV2ZW50WyJzb3VyY2VDYXBhYmlsaXRpZXMi
XVsiZmlyZXNUb3VjaEV2ZW50cyJdKTsNCgl9Ow0KCWluc3RhbmNlUHJvdG8ub25Nb3VzZURvd24g
PSBmdW5jdGlvbihpbmZvKQ0KCXsNCgkJaWYgKGlzQ29tcGF0aWJpbGl0eU1vdXNlRXZlbnQoaW5m
bykpDQoJCQlyZXR1cm47DQoJCXZhciB0ID0geyBwYWdlWDogaW5mby5wYWdlWCwgcGFnZVk6IGlu
Zm8ucGFnZVksICJpZGVudGlmaWVyIjogMCB9Ow0KCQl2YXIgZmFrZWluZm8gPSB7IGNoYW5nZWRU
b3VjaGVzOiBbdF0gfTsNCgkJdGhpcy5vblRvdWNoU3RhcnQoZmFrZWluZm8pOw0KCQl0aGlzLm1v
dXNlRG93biA9IHRydWU7DQoJfTsNCglpbnN0YW5jZVByb3RvLm9uTW91c2VNb3ZlID0gZnVuY3Rp
b24oaW5mbykNCgl7DQoJCWlmICghdGhpcy5tb3VzZURvd24pDQoJCQlyZXR1cm47DQoJCWlmIChp
c0NvbXBhdGliaWxpdHlNb3VzZUV2ZW50KGluZm8pKQ0KCQkJcmV0dXJuOw0KCQl2YXIgdCA9IHsg
cGFnZVg6IGluZm8ucGFnZVgsIHBhZ2VZOiBpbmZvLnBhZ2VZLCAiaWRlbnRpZmllciI6IDAgfTsN
CgkJdmFyIGZha2VpbmZvID0geyBjaGFuZ2VkVG91Y2hlczogW3RdIH07DQoJCXRoaXMub25Ub3Vj
aE1vdmUoZmFrZWluZm8pOw0KCX07DQoJaW5zdGFuY2VQcm90by5vbk1vdXNlVXAgPSBmdW5jdGlv
bihpbmZvKQ0KCXsNCgkJaWYgKGluZm8ucHJldmVudERlZmF1bHQgJiYgdGhpcy5ydW50aW1lLmhh
ZF9hX2NsaWNrICYmICF0aGlzLnJ1bnRpbWUuaXNNb2JpbGUpDQoJCQlpbmZvLnByZXZlbnREZWZh
dWx0KCk7DQoJCXRoaXMucnVudGltZS5oYWRfYV9jbGljayA9IHRydWU7DQoJCWlmIChpc0NvbXBh
dGliaWxpdHlNb3VzZUV2ZW50KGluZm8pKQ0KCQkJcmV0dXJuOw0KCQl2YXIgdCA9IHsgcGFnZVg6
IGluZm8ucGFnZVgsIHBhZ2VZOiBpbmZvLnBhZ2VZLCAiaWRlbnRpZmllciI6IDAgfTsNCgkJdmFy
IGZha2VpbmZvID0geyBjaGFuZ2VkVG91Y2hlczogW3RdIH07DQoJCXRoaXMub25Ub3VjaEVuZChm
YWtlaW5mbyk7DQoJCXRoaXMubW91c2VEb3duID0gZmFsc2U7DQoJfTsNCglpbnN0YW5jZVByb3Rv
LnRpY2syID0gZnVuY3Rpb24oKQ0KCXsNCgkJdmFyIGksIGxlbiwgdDsNCgkJdmFyIG5vd3RpbWUg
PSBjci5wZXJmb3JtYW5jZV9ub3coKTsNCgkJZm9yIChpID0gMCwgbGVuID0gdGhpcy50b3VjaGVz
Lmxlbmd0aDsgaSA8IGxlbjsgKytpKQ0KCQl7DQoJCQl0ID0gdGhpcy50b3VjaGVzW2ldOw0KCQkJ
aWYgKHQudGltZSA8PSBub3d0aW1lIC0gNTApDQoJCQkJdC5sYXN0dGltZSA9IG5vd3RpbWU7DQoJ
CQl0Lm1heWJlVHJpZ2dlckhvbGQodGhpcywgaSk7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIENuZHMo
KSB7fTsNCglDbmRzLnByb3RvdHlwZS5PblRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
cmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PblRvdWNoRW5kID0gZnVuY3Rpb24g
KCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNJblRvdWNoID0g
ZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0aGlzLnRvdWNoZXMubGVuZ3RoOw0KCX07DQoJQ25k
cy5wcm90b3R5cGUuT25Ub3VjaE9iamVjdCA9IGZ1bmN0aW9uICh0eXBlKQ0KCXsNCgkJaWYgKCF0
eXBlKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQlyZXR1cm4gdGhpcy5ydW50aW1lLnRlc3RBbmRTZWxl
Y3RDYW52YXNQb2ludE92ZXJsYXAodHlwZSwgdGhpcy5jdXJUb3VjaFgsIHRoaXMuY3VyVG91Y2hZ
LCBmYWxzZSk7DQoJfTsNCgl2YXIgdG91Y2hpbmcgPSBbXTsNCglDbmRzLnByb3RvdHlwZS5Jc1Rv
dWNoaW5nT2JqZWN0ID0gZnVuY3Rpb24gKHR5cGUpDQoJew0KCQlpZiAoIXR5cGUpDQoJCQlyZXR1
cm4gZmFsc2U7DQoJCXZhciBzb2wgPSB0eXBlLmdldEN1cnJlbnRTb2woKTsNCgkJdmFyIGluc3Rh
bmNlcyA9IHNvbC5nZXRPYmplY3RzKCk7DQoJCXZhciBweCwgcHk7DQoJCXZhciBpLCBsZW5pLCBq
LCBsZW5qOw0KCQlmb3IgKGkgPSAwLCBsZW5pID0gaW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbmk7
IGkrKykNCgkJew0KCQkJdmFyIGluc3QgPSBpbnN0YW5jZXNbaV07DQoJCQlpbnN0LnVwZGF0ZV9i
Ym94KCk7DQoJCQlmb3IgKGogPSAwLCBsZW5qID0gdGhpcy50b3VjaGVzLmxlbmd0aDsgaiA8IGxl
bmo7IGorKykNCgkJCXsNCgkJCQl2YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbal07DQoJCQkJcHgg
PSBpbnN0LmxheWVyLmNhbnZhc1RvTGF5ZXIodG91Y2gueCwgdG91Y2gueSwgdHJ1ZSk7DQoJCQkJ
cHkgPSBpbnN0LmxheWVyLmNhbnZhc1RvTGF5ZXIodG91Y2gueCwgdG91Y2gueSwgZmFsc2UpOw0K
CQkJCWlmIChpbnN0LmNvbnRhaW5zX3B0KHB4LCBweSkpDQoJCQkJew0KCQkJCQl0b3VjaGluZy5w
dXNoKGluc3QpOw0KCQkJCQlicmVhazsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJaWYgKHRvdWNoaW5n
Lmxlbmd0aCkNCgkJew0KCQkJc29sLnNlbGVjdF9hbGwgPSBmYWxzZTsNCgkJCWNyLnNoYWxsb3dB
c3NpZ25BcnJheShzb2wuaW5zdGFuY2VzLCB0b3VjaGluZyk7DQoJCQl0eXBlLmFwcGx5U29sVG9D
b250YWluZXIoKTsNCgkJCWNyLmNsZWFyQXJyYXkodG91Y2hpbmcpOw0KCQkJcmV0dXJuIHRydWU7
DQoJCX0NCgkJZWxzZQ0KCQkJcmV0dXJuIGZhbHNlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuQ29t
cGFyZVRvdWNoU3BlZWQgPSBmdW5jdGlvbiAoaW5kZXgsIGNtcCwgcykNCgl7DQoJCWluZGV4ID0g
TWF0aC5mbG9vcihpbmRleCk7DQoJCWlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy50b3Vj
aGVzLmxlbmd0aCkNCgkJCXJldHVybiBmYWxzZTsNCgkJdmFyIHQgPSB0aGlzLnRvdWNoZXNbaW5k
ZXhdOw0KCQl2YXIgZGlzdCA9IGNyLmRpc3RhbmNlVG8odC54LCB0LnksIHQubGFzdHgsIHQubGFz
dHkpOw0KCQl2YXIgdGltZWRpZmYgPSAodC50aW1lIC0gdC5sYXN0dGltZSkgLyAxMDAwOw0KCQl2
YXIgc3BlZWQgPSAwOw0KCQlpZiAodGltZWRpZmYgPiAwKQ0KCQkJc3BlZWQgPSBkaXN0IC8gdGlt
ZWRpZmY7DQoJCXJldHVybiBjci5kb19jbXAoc3BlZWQsIGNtcCwgcyk7DQoJfTsNCglDbmRzLnBy
b3RvdHlwZS5PcmllbnRhdGlvblN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
dHlwZW9mIHdpbmRvd1siRGV2aWNlT3JpZW50YXRpb25FdmVudCJdICE9PSAidW5kZWZpbmVkIjsN
Cgl9Ow0KCUNuZHMucHJvdG90eXBlLk1vdGlvblN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpDQoJew0K
CQlyZXR1cm4gdHlwZW9mIHdpbmRvd1siRGV2aWNlTW90aW9uRXZlbnQiXSAhPT0gInVuZGVmaW5l
ZCI7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Db21wYXJlT3JpZW50YXRpb24gPSBmdW5jdGlvbiAo
b3JpZW50YXRpb25fLCBjbXBfLCBhbmdsZV8pDQoJew0KCQl2YXIgdiA9IDA7DQoJCWlmIChvcmll
bnRhdGlvbl8gPT09IDApDQoJCQl2ID0gdGhpcy5nZXRBbHBoYSgpOw0KCQllbHNlIGlmIChvcmll
bnRhdGlvbl8gPT09IDEpDQoJCQl2ID0gdGhpcy5nZXRCZXRhKCk7DQoJCWVsc2UNCgkJCXYgPSB0
aGlzLmdldEdhbW1hKCk7DQoJCXJldHVybiBjci5kb19jbXAodiwgY21wXywgYW5nbGVfKTsNCgl9
Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVBY2NlbGVyYXRpb24gPSBmdW5jdGlvbiAoYWNjZWxl
cmF0aW9uXywgY21wXywgYW5nbGVfKQ0KCXsNCgkJdmFyIHYgPSAwOw0KCQlpZiAoYWNjZWxlcmF0
aW9uXyA9PT0gMCkNCgkJCXYgPSB0aGlzLmFjY19nX3g7DQoJCWVsc2UgaWYgKGFjY2VsZXJhdGlv
bl8gPT09IDEpDQoJCQl2ID0gdGhpcy5hY2NfZ195Ow0KCQllbHNlIGlmIChhY2NlbGVyYXRpb25f
ID09PSAyKQ0KCQkJdiA9IHRoaXMuYWNjX2dfejsNCgkJZWxzZSBpZiAoYWNjZWxlcmF0aW9uXyA9
PT0gMykNCgkJCXYgPSB0aGlzLmFjY194Ow0KCQllbHNlIGlmIChhY2NlbGVyYXRpb25fID09PSA0
KQ0KCQkJdiA9IHRoaXMuYWNjX3k7DQoJCWVsc2UgaWYgKGFjY2VsZXJhdGlvbl8gPT09IDUpDQoJ
CQl2ID0gdGhpcy5hY2NfejsNCgkJcmV0dXJuIGNyLmRvX2NtcCh2LCBjbXBfLCBhbmdsZV8pOw0K
CX07DQoJQ25kcy5wcm90b3R5cGUuT25OdGhUb3VjaFN0YXJ0ID0gZnVuY3Rpb24gKHRvdWNoXykN
Cgl7DQoJCXRvdWNoXyA9IE1hdGguZmxvb3IodG91Y2hfKTsNCgkJcmV0dXJuIHRvdWNoXyA9PT0g
dGhpcy50cmlnZ2VyX2luZGV4Ow0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25OdGhUb3VjaEVuZCA9
IGZ1bmN0aW9uICh0b3VjaF8pDQoJew0KCQl0b3VjaF8gPSBNYXRoLmZsb29yKHRvdWNoXyk7DQoJ
CXJldHVybiB0b3VjaF8gPT09IHRoaXMudHJpZ2dlcl9pbmRleDsNCgl9Ow0KCUNuZHMucHJvdG90
eXBlLkhhc050aFRvdWNoID0gZnVuY3Rpb24gKHRvdWNoXykNCgl7DQoJCXRvdWNoXyA9IE1hdGgu
Zmxvb3IodG91Y2hfKTsNCgkJcmV0dXJuIHRoaXMudG91Y2hlcy5sZW5ndGggPj0gdG91Y2hfICsg
MTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLk9uSG9sZEdlc3R1cmUgPSBmdW5jdGlvbiAoKQ0KCXsN
CgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PblRhcEdlc3R1cmUgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbkRvdWJs
ZVRhcEdlc3R1cmUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRydWU7DQoJfTsNCglDbmRz
LnByb3RvdHlwZS5PbkhvbGRHZXN0dXJlT2JqZWN0ID0gZnVuY3Rpb24gKHR5cGUpDQoJew0KCQlp
ZiAoIXR5cGUpDQoJCQlyZXR1cm4gZmFsc2U7DQoJCXJldHVybiB0aGlzLnJ1bnRpbWUudGVzdEFu
ZFNlbGVjdENhbnZhc1BvaW50T3ZlcmxhcCh0eXBlLCB0aGlzLmN1clRvdWNoWCwgdGhpcy5jdXJU
b3VjaFksIGZhbHNlKTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLk9uVGFwR2VzdHVyZU9iamVjdCA9
IGZ1bmN0aW9uICh0eXBlKQ0KCXsNCgkJaWYgKCF0eXBlKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQly
ZXR1cm4gdGhpcy5ydW50aW1lLnRlc3RBbmRTZWxlY3RDYW52YXNQb2ludE92ZXJsYXAodHlwZSwg
dGhpcy5jdXJUb3VjaFgsIHRoaXMuY3VyVG91Y2hZLCBmYWxzZSk7DQoJfTsNCglDbmRzLnByb3Rv
dHlwZS5PbkRvdWJsZVRhcEdlc3R1cmVPYmplY3QgPSBmdW5jdGlvbiAodHlwZSkNCgl7DQoJCWlm
ICghdHlwZSkNCgkJCXJldHVybiBmYWxzZTsNCgkJcmV0dXJuIHRoaXMucnVudGltZS50ZXN0QW5k
U2VsZWN0Q2FudmFzUG9pbnRPdmVybGFwKHR5cGUsIHRoaXMuY3VyVG91Y2hYLCB0aGlzLmN1clRv
dWNoWSwgZmFsc2UpOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25QZXJtaXNzaW9uR3JhbnRlZCA9
IGZ1bmN0aW9uICh0eXBlKQ0KCXsNCgkJcmV0dXJuIHRoaXMudHJpZ2dlcl9wZXJtaXNzaW9uID09
PSB0eXBlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25QZXJtaXNzaW9uRGVuaWVkID0gZnVuY3Rp
b24gKHR5cGUpDQoJew0KCQlyZXR1cm4gdGhpcy50cmlnZ2VyX3Blcm1pc3Npb24gPT09IHR5cGU7
DQoJfTsNCglwbHVnaW5Qcm90by5jbmRzID0gbmV3IENuZHMoKTsNCglmdW5jdGlvbiBBY3RzKCkg
e307DQoJQWN0cy5wcm90b3R5cGUuUmVxdWVzdFBlcm1pc3Npb24gPSBmdW5jdGlvbiAodHlwZSkN
Cgl7DQoJCXZhciBzZWxmID0gdGhpczsNCgkJdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUo
dHJ1ZSk7DQoJCWlmICh0eXBlID09PSAwKQkJLy8gb3JpZW50YXRpb24NCgkJew0KCQkJaWYgKHdp
bmRvd1siRGV2aWNlT3JpZW50YXRpb25FdmVudCJdICYmIHdpbmRvd1siRGV2aWNlT3JpZW50YXRp
b25FdmVudCJdWyJyZXF1ZXN0UGVybWlzc2lvbiJdKQ0KCQkJew0KCQkJCXByb21pc2UgPSB3aW5k
b3dbIkRldmljZU9yaWVudGF0aW9uRXZlbnQiXVsicmVxdWVzdFBlcm1pc3Npb24iXSgpDQoJCQkJ
LnRoZW4oZnVuY3Rpb24gKHN0YXRlKQ0KCQkJCXsNCgkJCQkJcmV0dXJuIHN0YXRlID09PSAiZ3Jh
bnRlZCI7DQoJCQkJfSk7DQoJCQl9DQoJCX0NCgkJZWxzZQkJCQkvLyBtb3Rpb24NCgkJew0KCQkJ
aWYgKHdpbmRvd1siRGV2aWNlTW90aW9uRXZlbnQiXSAmJiB3aW5kb3dbIkRldmljZU1vdGlvbkV2
ZW50Il1bInJlcXVlc3RQZXJtaXNzaW9uIl0pDQoJCQl7DQoJCQkJcHJvbWlzZSA9IHdpbmRvd1si
RGV2aWNlTW90aW9uRXZlbnQiXVsicmVxdWVzdFBlcm1pc3Npb24iXSgpDQoJCQkJLnRoZW4oZnVu
Y3Rpb24gKHN0YXRlKQ0KCQkJCXsNCgkJCQkJcmV0dXJuIHN0YXRlID09PSAiZ3JhbnRlZCI7DQoJ
CQkJfSk7DQoJCQl9DQoJCX0NCgkJcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpDQoJCXsN
CgkJCXNlbGYudHJpZ2dlcl9wZXJtaXNzaW9uID0gdHlwZTsNCgkJCWlmIChyZXN1bHQpDQoJCQkJ
c2VsZi5ydW50aW1lLnRyaWdnZXIoY3IucGx1Z2luc18uVG91Y2gucHJvdG90eXBlLmNuZHMuT25Q
ZXJtaXNzaW9uR3JhbnRlZCwgc2VsZik7DQoJCQllbHNlDQoJCQkJc2VsZi5ydW50aW1lLnRyaWdn
ZXIoY3IucGx1Z2luc18uVG91Y2gucHJvdG90eXBlLmNuZHMuT25QZXJtaXNzaW9uRGVuaWVkLCBz
ZWxmKTsNCgkJfSk7DQoJfTsNCglwbHVnaW5Qcm90by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5j
dGlvbiBFeHBzKCkge307DQoJRXhwcy5wcm90b3R5cGUuVG91Y2hDb3VudCA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQlyZXQuc2V0X2ludCh0aGlzLnRvdWNoZXMubGVuZ3RoKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLlggPSBmdW5jdGlvbiAocmV0LCBsYXllcnBhcmFtKQ0KCXsNCgkJdmFyIGluZGV4
ID0gdGhpcy5nZXRUb3VjaEluZGV4Ow0KCQlpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMu
dG91Y2hlcy5sZW5ndGgpDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJ
CX0NCgkJdmFyIGxheWVyLCBvbGRTY2FsZSwgb2xkWm9vbVJhdGUsIG9sZFBhcmFsbGF4WCwgb2xk
QW5nbGU7DQoJCWlmIChjci5pc191bmRlZmluZWQobGF5ZXJwYXJhbSkpDQoJCXsNCgkJCWxheWVy
ID0gdGhpcy5ydW50aW1lLmdldExheWVyQnlOdW1iZXIoMCk7DQoJCQlvbGRTY2FsZSA9IGxheWVy
LnNjYWxlOw0KCQkJb2xkWm9vbVJhdGUgPSBsYXllci56b29tUmF0ZTsNCgkJCW9sZFBhcmFsbGF4
WCA9IGxheWVyLnBhcmFsbGF4WDsNCgkJCW9sZEFuZ2xlID0gbGF5ZXIuYW5nbGU7DQoJCQlsYXll
ci5zY2FsZSA9IDE7DQoJCQlsYXllci56b29tUmF0ZSA9IDEuMDsNCgkJCWxheWVyLnBhcmFsbGF4
WCA9IDEuMDsNCgkJCWxheWVyLmFuZ2xlID0gMDsNCgkJCXJldC5zZXRfZmxvYXQobGF5ZXIuY2Fu
dmFzVG9MYXllcih0aGlzLnRvdWNoZXNbaW5kZXhdLngsIHRoaXMudG91Y2hlc1tpbmRleF0ueSwg
dHJ1ZSkpOw0KCQkJbGF5ZXIuc2NhbGUgPSBvbGRTY2FsZTsNCgkJCWxheWVyLnpvb21SYXRlID0g
b2xkWm9vbVJhdGU7DQoJCQlsYXllci5wYXJhbGxheFggPSBvbGRQYXJhbGxheFg7DQoJCQlsYXll
ci5hbmdsZSA9IG9sZEFuZ2xlOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKGNyLmlzX251bWJl
cihsYXllcnBhcmFtKSkNCgkJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllckJ5TnVtYmVy
KGxheWVycGFyYW0pOw0KCQkJZWxzZQ0KCQkJCWxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVy
QnlOYW1lKGxheWVycGFyYW0pOw0KCQkJaWYgKGxheWVyKQ0KCQkJCXJldC5zZXRfZmxvYXQobGF5
ZXIuY2FudmFzVG9MYXllcih0aGlzLnRvdWNoZXNbaW5kZXhdLngsIHRoaXMudG91Y2hlc1tpbmRl
eF0ueSwgdHJ1ZSkpOw0KCQkJZWxzZQ0KCQkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCX0NCgl9Ow0K
CUV4cHMucHJvdG90eXBlLlhBdCA9IGZ1bmN0aW9uIChyZXQsIGluZGV4LCBsYXllcnBhcmFtKQ0K
CXsNCgkJaW5kZXggPSBNYXRoLmZsb29yKGluZGV4KTsNCgkJaWYgKGluZGV4IDwgMCB8fCBpbmRl
eCA+PSB0aGlzLnRvdWNoZXMubGVuZ3RoKQ0KCQl7DQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCQkJ
cmV0dXJuOw0KCQl9DQoJCXZhciBsYXllciwgb2xkU2NhbGUsIG9sZFpvb21SYXRlLCBvbGRQYXJh
bGxheFgsIG9sZEFuZ2xlOw0KCQlpZiAoY3IuaXNfdW5kZWZpbmVkKGxheWVycGFyYW0pKQ0KCQl7
DQoJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllckJ5TnVtYmVyKDApOw0KCQkJb2xkU2Nh
bGUgPSBsYXllci5zY2FsZTsNCgkJCW9sZFpvb21SYXRlID0gbGF5ZXIuem9vbVJhdGU7DQoJCQlv
bGRQYXJhbGxheFggPSBsYXllci5wYXJhbGxheFg7DQoJCQlvbGRBbmdsZSA9IGxheWVyLmFuZ2xl
Ow0KCQkJbGF5ZXIuc2NhbGUgPSAxOw0KCQkJbGF5ZXIuem9vbVJhdGUgPSAxLjA7DQoJCQlsYXll
ci5wYXJhbGxheFggPSAxLjA7DQoJCQlsYXllci5hbmdsZSA9IDA7DQoJCQlyZXQuc2V0X2Zsb2F0
KGxheWVyLmNhbnZhc1RvTGF5ZXIodGhpcy50b3VjaGVzW2luZGV4XS54LCB0aGlzLnRvdWNoZXNb
aW5kZXhdLnksIHRydWUpKTsNCgkJCWxheWVyLnNjYWxlID0gb2xkU2NhbGU7DQoJCQlsYXllci56
b29tUmF0ZSA9IG9sZFpvb21SYXRlOw0KCQkJbGF5ZXIucGFyYWxsYXhYID0gb2xkUGFyYWxsYXhY
Ow0KCQkJbGF5ZXIuYW5nbGUgPSBvbGRBbmdsZTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChj
ci5pc19udW1iZXIobGF5ZXJwYXJhbSkpDQoJCQkJbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5
ZXJCeU51bWJlcihsYXllcnBhcmFtKTsNCgkJCWVsc2UNCgkJCQlsYXllciA9IHRoaXMucnVudGlt
ZS5nZXRMYXllckJ5TmFtZShsYXllcnBhcmFtKTsNCgkJCWlmIChsYXllcikNCgkJCQlyZXQuc2V0
X2Zsb2F0KGxheWVyLmNhbnZhc1RvTGF5ZXIodGhpcy50b3VjaGVzW2luZGV4XS54LCB0aGlzLnRv
dWNoZXNbaW5kZXhdLnksIHRydWUpKTsNCgkJCWVsc2UNCgkJCQlyZXQuc2V0X2Zsb2F0KDApOw0K
CQl9DQoJfTsNCglFeHBzLnByb3RvdHlwZS5YRm9ySUQgPSBmdW5jdGlvbiAocmV0LCBpZCwgbGF5
ZXJwYXJhbSkNCgl7DQoJCXZhciBpbmRleCA9IHRoaXMuZmluZFRvdWNoKGlkKTsNCgkJaWYgKGlu
ZGV4IDwgMCkNCgkJew0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2
YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbaW5kZXhdOw0KCQl2YXIgbGF5ZXIsIG9sZFNjYWxlLCBv
bGRab29tUmF0ZSwgb2xkUGFyYWxsYXhYLCBvbGRBbmdsZTsNCgkJaWYgKGNyLmlzX3VuZGVmaW5l
ZChsYXllcnBhcmFtKSkNCgkJew0KCQkJbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXJCeU51
bWJlcigwKTsNCgkJCW9sZFNjYWxlID0gbGF5ZXIuc2NhbGU7DQoJCQlvbGRab29tUmF0ZSA9IGxh
eWVyLnpvb21SYXRlOw0KCQkJb2xkUGFyYWxsYXhYID0gbGF5ZXIucGFyYWxsYXhYOw0KCQkJb2xk
QW5nbGUgPSBsYXllci5hbmdsZTsNCgkJCWxheWVyLnNjYWxlID0gMTsNCgkJCWxheWVyLnpvb21S
YXRlID0gMS4wOw0KCQkJbGF5ZXIucGFyYWxsYXhYID0gMS4wOw0KCQkJbGF5ZXIuYW5nbGUgPSAw
Ow0KCQkJcmV0LnNldF9mbG9hdChsYXllci5jYW52YXNUb0xheWVyKHRvdWNoLngsIHRvdWNoLnks
IHRydWUpKTsNCgkJCWxheWVyLnNjYWxlID0gb2xkU2NhbGU7DQoJCQlsYXllci56b29tUmF0ZSA9
IG9sZFpvb21SYXRlOw0KCQkJbGF5ZXIucGFyYWxsYXhYID0gb2xkUGFyYWxsYXhYOw0KCQkJbGF5
ZXIuYW5nbGUgPSBvbGRBbmdsZTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChjci5pc19udW1i
ZXIobGF5ZXJwYXJhbSkpDQoJCQkJbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXJCeU51bWJl
cihsYXllcnBhcmFtKTsNCgkJCWVsc2UNCgkJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXll
ckJ5TmFtZShsYXllcnBhcmFtKTsNCgkJCWlmIChsYXllcikNCgkJCQlyZXQuc2V0X2Zsb2F0KGxh
eWVyLmNhbnZhc1RvTGF5ZXIodG91Y2gueCwgdG91Y2gueSwgdHJ1ZSkpOw0KCQkJZWxzZQ0KCQkJ
CXJldC5zZXRfZmxvYXQoMCk7DQoJCX0NCgl9Ow0KCUV4cHMucHJvdG90eXBlLlkgPSBmdW5jdGlv
biAocmV0LCBsYXllcnBhcmFtKQ0KCXsNCgkJdmFyIGluZGV4ID0gdGhpcy5nZXRUb3VjaEluZGV4
Ow0KCQlpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMudG91Y2hlcy5sZW5ndGgpDQoJCXsN
CgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIGxheWVyLCBvbGRT
Y2FsZSwgb2xkWm9vbVJhdGUsIG9sZFBhcmFsbGF4WSwgb2xkQW5nbGU7DQoJCWlmIChjci5pc191
bmRlZmluZWQobGF5ZXJwYXJhbSkpDQoJCXsNCgkJCWxheWVyID0gdGhpcy5ydW50aW1lLmdldExh
eWVyQnlOdW1iZXIoMCk7DQoJCQlvbGRTY2FsZSA9IGxheWVyLnNjYWxlOw0KCQkJb2xkWm9vbVJh
dGUgPSBsYXllci56b29tUmF0ZTsNCgkJCW9sZFBhcmFsbGF4WSA9IGxheWVyLnBhcmFsbGF4WTsN
CgkJCW9sZEFuZ2xlID0gbGF5ZXIuYW5nbGU7DQoJCQlsYXllci5zY2FsZSA9IDE7DQoJCQlsYXll
ci56b29tUmF0ZSA9IDEuMDsNCgkJCWxheWVyLnBhcmFsbGF4WSA9IDEuMDsNCgkJCWxheWVyLmFu
Z2xlID0gMDsNCgkJCXJldC5zZXRfZmxvYXQobGF5ZXIuY2FudmFzVG9MYXllcih0aGlzLnRvdWNo
ZXNbaW5kZXhdLngsIHRoaXMudG91Y2hlc1tpbmRleF0ueSwgZmFsc2UpKTsNCgkJCWxheWVyLnNj
YWxlID0gb2xkU2NhbGU7DQoJCQlsYXllci56b29tUmF0ZSA9IG9sZFpvb21SYXRlOw0KCQkJbGF5
ZXIucGFyYWxsYXhZID0gb2xkUGFyYWxsYXhZOw0KCQkJbGF5ZXIuYW5nbGUgPSBvbGRBbmdsZTsN
CgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChjci5pc19udW1iZXIobGF5ZXJwYXJhbSkpDQoJCQkJ
bGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXJCeU51bWJlcihsYXllcnBhcmFtKTsNCgkJCWVs
c2UNCgkJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllckJ5TmFtZShsYXllcnBhcmFtKTsN
CgkJCWlmIChsYXllcikNCgkJCQlyZXQuc2V0X2Zsb2F0KGxheWVyLmNhbnZhc1RvTGF5ZXIodGhp
cy50b3VjaGVzW2luZGV4XS54LCB0aGlzLnRvdWNoZXNbaW5kZXhdLnksIGZhbHNlKSk7DQoJCQll
bHNlDQoJCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJfQ0KCX07DQoJRXhwcy5wcm90b3R5cGUuWUF0
ID0gZnVuY3Rpb24gKHJldCwgaW5kZXgsIGxheWVycGFyYW0pDQoJew0KCQlpbmRleCA9IE1hdGgu
Zmxvb3IoaW5kZXgpOw0KCQlpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMudG91Y2hlcy5s
ZW5ndGgpDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFy
IGxheWVyLCBvbGRTY2FsZSwgb2xkWm9vbVJhdGUsIG9sZFBhcmFsbGF4WSwgb2xkQW5nbGU7DQoJ
CWlmIChjci5pc191bmRlZmluZWQobGF5ZXJwYXJhbSkpDQoJCXsNCgkJCWxheWVyID0gdGhpcy5y
dW50aW1lLmdldExheWVyQnlOdW1iZXIoMCk7DQoJCQlvbGRTY2FsZSA9IGxheWVyLnNjYWxlOw0K
CQkJb2xkWm9vbVJhdGUgPSBsYXllci56b29tUmF0ZTsNCgkJCW9sZFBhcmFsbGF4WSA9IGxheWVy
LnBhcmFsbGF4WTsNCgkJCW9sZEFuZ2xlID0gbGF5ZXIuYW5nbGU7DQoJCQlsYXllci5zY2FsZSA9
IDE7DQoJCQlsYXllci56b29tUmF0ZSA9IDEuMDsNCgkJCWxheWVyLnBhcmFsbGF4WSA9IDEuMDsN
CgkJCWxheWVyLmFuZ2xlID0gMDsNCgkJCXJldC5zZXRfZmxvYXQobGF5ZXIuY2FudmFzVG9MYXll
cih0aGlzLnRvdWNoZXNbaW5kZXhdLngsIHRoaXMudG91Y2hlc1tpbmRleF0ueSwgZmFsc2UpKTsN
CgkJCWxheWVyLnNjYWxlID0gb2xkU2NhbGU7DQoJCQlsYXllci56b29tUmF0ZSA9IG9sZFpvb21S
YXRlOw0KCQkJbGF5ZXIucGFyYWxsYXhZID0gb2xkUGFyYWxsYXhZOw0KCQkJbGF5ZXIuYW5nbGUg
PSBvbGRBbmdsZTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWlmIChjci5pc19udW1iZXIobGF5ZXJw
YXJhbSkpDQoJCQkJbGF5ZXIgPSB0aGlzLnJ1bnRpbWUuZ2V0TGF5ZXJCeU51bWJlcihsYXllcnBh
cmFtKTsNCgkJCWVsc2UNCgkJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllckJ5TmFtZShs
YXllcnBhcmFtKTsNCgkJCWlmIChsYXllcikNCgkJCQlyZXQuc2V0X2Zsb2F0KGxheWVyLmNhbnZh
c1RvTGF5ZXIodGhpcy50b3VjaGVzW2luZGV4XS54LCB0aGlzLnRvdWNoZXNbaW5kZXhdLnksIGZh
bHNlKSk7DQoJCQllbHNlDQoJCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJfQ0KCX07DQoJRXhwcy5w
cm90b3R5cGUuWUZvcklEID0gZnVuY3Rpb24gKHJldCwgaWQsIGxheWVycGFyYW0pDQoJew0KCQl2
YXIgaW5kZXggPSB0aGlzLmZpbmRUb3VjaChpZCk7DQoJCWlmIChpbmRleCA8IDApDQoJCXsNCgkJ
CXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIHRvdWNoID0gdGhpcy50
b3VjaGVzW2luZGV4XTsNCgkJdmFyIGxheWVyLCBvbGRTY2FsZSwgb2xkWm9vbVJhdGUsIG9sZFBh
cmFsbGF4WSwgb2xkQW5nbGU7DQoJCWlmIChjci5pc191bmRlZmluZWQobGF5ZXJwYXJhbSkpDQoJ
CXsNCgkJCWxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVyQnlOdW1iZXIoMCk7DQoJCQlvbGRT
Y2FsZSA9IGxheWVyLnNjYWxlOw0KCQkJb2xkWm9vbVJhdGUgPSBsYXllci56b29tUmF0ZTsNCgkJ
CW9sZFBhcmFsbGF4WSA9IGxheWVyLnBhcmFsbGF4WTsNCgkJCW9sZEFuZ2xlID0gbGF5ZXIuYW5n
bGU7DQoJCQlsYXllci5zY2FsZSA9IDE7DQoJCQlsYXllci56b29tUmF0ZSA9IDEuMDsNCgkJCWxh
eWVyLnBhcmFsbGF4WSA9IDEuMDsNCgkJCWxheWVyLmFuZ2xlID0gMDsNCgkJCXJldC5zZXRfZmxv
YXQobGF5ZXIuY2FudmFzVG9MYXllcih0b3VjaC54LCB0b3VjaC55LCBmYWxzZSkpOw0KCQkJbGF5
ZXIuc2NhbGUgPSBvbGRTY2FsZTsNCgkJCWxheWVyLnpvb21SYXRlID0gb2xkWm9vbVJhdGU7DQoJ
CQlsYXllci5wYXJhbGxheFkgPSBvbGRQYXJhbGxheFk7DQoJCQlsYXllci5hbmdsZSA9IG9sZEFu
Z2xlOw0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKGNyLmlzX251bWJlcihsYXllcnBhcmFtKSkN
CgkJCQlsYXllciA9IHRoaXMucnVudGltZS5nZXRMYXllckJ5TnVtYmVyKGxheWVycGFyYW0pOw0K
CQkJZWxzZQ0KCQkJCWxheWVyID0gdGhpcy5ydW50aW1lLmdldExheWVyQnlOYW1lKGxheWVycGFy
YW0pOw0KCQkJaWYgKGxheWVyKQ0KCQkJCXJldC5zZXRfZmxvYXQobGF5ZXIuY2FudmFzVG9MYXll
cih0b3VjaC54LCB0b3VjaC55LCBmYWxzZSkpOw0KCQkJZWxzZQ0KCQkJCXJldC5zZXRfZmxvYXQo
MCk7DQoJCX0NCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFic29sdXRlWCA9IGZ1bmN0aW9uIChyZXQp
DQoJew0KCQlpZiAodGhpcy50b3VjaGVzLmxlbmd0aCkNCgkJCXJldC5zZXRfZmxvYXQodGhpcy50
b3VjaGVzWzBdLngpOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCX07DQoJRXhwcy5w
cm90b3R5cGUuQWJzb2x1dGVYQXQgPSBmdW5jdGlvbiAocmV0LCBpbmRleCkNCgl7DQoJCWluZGV4
ID0gTWF0aC5mbG9vcihpbmRleCk7DQoJCWlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy50
b3VjaGVzLmxlbmd0aCkNCgkJew0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJCXJldHVybjsNCgkJ
fQ0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMudG91Y2hlc1tpbmRleF0ueCk7DQoJfTsNCglFeHBzLnBy
b3RvdHlwZS5BYnNvbHV0ZVhGb3JJRCA9IGZ1bmN0aW9uIChyZXQsIGlkKQ0KCXsNCgkJdmFyIGlu
ZGV4ID0gdGhpcy5maW5kVG91Y2goaWQpOw0KCQlpZiAoaW5kZXggPCAwKQ0KCQl7DQoJCQlyZXQu
c2V0X2Zsb2F0KDApOw0KCQkJcmV0dXJuOw0KCQl9DQoJCXZhciB0b3VjaCA9IHRoaXMudG91Y2hl
c1tpbmRleF07DQoJCXJldC5zZXRfZmxvYXQodG91Y2gueCk7DQoJfTsNCglFeHBzLnByb3RvdHlw
ZS5BYnNvbHV0ZVkgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJaWYgKHRoaXMudG91Y2hlcy5sZW5n
dGgpDQoJCQlyZXQuc2V0X2Zsb2F0KHRoaXMudG91Y2hlc1swXS55KTsNCgkJZWxzZQ0KCQkJcmV0
LnNldF9mbG9hdCgwKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFic29sdXRlWUF0ID0gZnVuY3Rp
b24gKHJldCwgaW5kZXgpDQoJew0KCQlpbmRleCA9IE1hdGguZmxvb3IoaW5kZXgpOw0KCQlpZiAo
aW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMudG91Y2hlcy5sZW5ndGgpDQoJCXsNCgkJCXJldC5z
ZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0NCgkJcmV0LnNldF9mbG9hdCh0aGlzLnRvdWNo
ZXNbaW5kZXhdLnkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuQWJzb2x1dGVZRm9ySUQgPSBmdW5j
dGlvbiAocmV0LCBpZCkNCgl7DQoJCXZhciBpbmRleCA9IHRoaXMuZmluZFRvdWNoKGlkKTsNCgkJ
aWYgKGluZGV4IDwgMCkNCgkJew0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJCXJldHVybjsNCgkJ
fQ0KCQl2YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbaW5kZXhdOw0KCQlyZXQuc2V0X2Zsb2F0KHRv
dWNoLnkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuU3BlZWRBdCA9IGZ1bmN0aW9uIChyZXQsIGlu
ZGV4KQ0KCXsNCgkJaW5kZXggPSBNYXRoLmZsb29yKGluZGV4KTsNCgkJaWYgKGluZGV4IDwgMCB8
fCBpbmRleCA+PSB0aGlzLnRvdWNoZXMubGVuZ3RoKQ0KCQl7DQoJCQlyZXQuc2V0X2Zsb2F0KDAp
Ow0KCQkJcmV0dXJuOw0KCQl9DQoJCXZhciB0ID0gdGhpcy50b3VjaGVzW2luZGV4XTsNCgkJdmFy
IGRpc3QgPSBjci5kaXN0YW5jZVRvKHQueCwgdC55LCB0Lmxhc3R4LCB0Lmxhc3R5KTsNCgkJdmFy
IHRpbWVkaWZmID0gKHQudGltZSAtIHQubGFzdHRpbWUpIC8gMTAwMDsNCgkJaWYgKHRpbWVkaWZm
IDw9IDApDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCQllbHNlDQoJCQlyZXQuc2V0X2Zsb2F0KGRp
c3QgLyB0aW1lZGlmZik7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5TcGVlZEZvcklEID0gZnVuY3Rp
b24gKHJldCwgaWQpDQoJew0KCQl2YXIgaW5kZXggPSB0aGlzLmZpbmRUb3VjaChpZCk7DQoJCWlm
IChpbmRleCA8IDApDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0N
CgkJdmFyIHRvdWNoID0gdGhpcy50b3VjaGVzW2luZGV4XTsNCgkJdmFyIGRpc3QgPSBjci5kaXN0
YW5jZVRvKHRvdWNoLngsIHRvdWNoLnksIHRvdWNoLmxhc3R4LCB0b3VjaC5sYXN0eSk7DQoJCXZh
ciB0aW1lZGlmZiA9ICh0b3VjaC50aW1lIC0gdG91Y2gubGFzdHRpbWUpIC8gMTAwMDsNCgkJaWYg
KHRpbWVkaWZmIDw9IDApDQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCQllbHNlDQoJCQlyZXQuc2V0
X2Zsb2F0KGRpc3QgLyB0aW1lZGlmZik7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BbmdsZUF0ID0g
ZnVuY3Rpb24gKHJldCwgaW5kZXgpDQoJew0KCQlpbmRleCA9IE1hdGguZmxvb3IoaW5kZXgpOw0K
CQlpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMudG91Y2hlcy5sZW5ndGgpDQoJCXsNCgkJ
CXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47DQoJCX0NCgkJdmFyIHQgPSB0aGlzLnRvdWNo
ZXNbaW5kZXhdOw0KCQlyZXQuc2V0X2Zsb2F0KGNyLnRvX2RlZ3JlZXMoY3IuYW5nbGVUbyh0Lmxh
c3R4LCB0Lmxhc3R5LCB0LngsIHQueSkpKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFuZ2xlRm9y
SUQgPSBmdW5jdGlvbiAocmV0LCBpZCkNCgl7DQoJCXZhciBpbmRleCA9IHRoaXMuZmluZFRvdWNo
KGlkKTsNCgkJaWYgKGluZGV4IDwgMCkNCgkJew0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJCXJl
dHVybjsNCgkJfQ0KCQl2YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbaW5kZXhdOw0KCQlyZXQuc2V0
X2Zsb2F0KGNyLnRvX2RlZ3JlZXMoY3IuYW5nbGVUbyh0b3VjaC5sYXN0eCwgdG91Y2gubGFzdHks
IHRvdWNoLngsIHRvdWNoLnkpKSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BbHBoYSA9IGZ1bmN0
aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZ2V0QWxwaGEoKSk7DQoJfTsNCglF
eHBzLnByb3RvdHlwZS5CZXRhID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQo
dGhpcy5nZXRCZXRhKCkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuR2FtbWEgPSBmdW5jdGlvbiAo
cmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmdldEdhbW1hKCkpOw0KCX07DQoJRXhwcy5w
cm90b3R5cGUuQWNjZWxlcmF0aW9uWFdpdGhHID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5z
ZXRfZmxvYXQodGhpcy5hY2NfZ194KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFjY2VsZXJhdGlv
bllXaXRoRyA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYWNjX2df
eSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5BY2NlbGVyYXRpb25aV2l0aEcgPSBmdW5jdGlvbiAo
cmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmFjY19nX3opOw0KCX07DQoJRXhwcy5wcm90
b3R5cGUuQWNjZWxlcmF0aW9uWCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0
KHRoaXMuYWNjX3gpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuQWNjZWxlcmF0aW9uWSA9IGZ1bmN0
aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYWNjX3kpOw0KCX07DQoJRXhwcy5w
cm90b3R5cGUuQWNjZWxlcmF0aW9uWiA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zs
b2F0KHRoaXMuYWNjX3opOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuVG91Y2hJbmRleCA9IGZ1bmN0
aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2ludCh0aGlzLnRyaWdnZXJfaW5kZXgpOw0KCX07DQoJ
RXhwcy5wcm90b3R5cGUuVG91Y2hJRCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zs
b2F0KHRoaXMudHJpZ2dlcl9pZCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5XaWR0aEZvcklEID0g
ZnVuY3Rpb24gKHJldCwgaWQpDQoJew0KCQl2YXIgaW5kZXggPSB0aGlzLmZpbmRUb3VjaChpZCk7
DQoJCWlmIChpbmRleCA8IDApDQoJCXsNCgkJCXJldC5zZXRfZmxvYXQoMCk7DQoJCQlyZXR1cm47
DQoJCX0NCgkJdmFyIHRvdWNoID0gdGhpcy50b3VjaGVzW2luZGV4XTsNCgkJcmV0LnNldF9mbG9h
dCh0b3VjaC53aWR0aCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5IZWlnaHRGb3JJRCA9IGZ1bmN0
aW9uIChyZXQsIGlkKQ0KCXsNCgkJdmFyIGluZGV4ID0gdGhpcy5maW5kVG91Y2goaWQpOw0KCQlp
ZiAoaW5kZXggPCAwKQ0KCQl7DQoJCQlyZXQuc2V0X2Zsb2F0KDApOw0KCQkJcmV0dXJuOw0KCQl9
DQoJCXZhciB0b3VjaCA9IHRoaXMudG91Y2hlc1tpbmRleF07DQoJCXJldC5zZXRfZmxvYXQodG91
Y2guaGVpZ2h0KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlByZXNzdXJlRm9ySUQgPSBmdW5jdGlv
biAocmV0LCBpZCkNCgl7DQoJCXZhciBpbmRleCA9IHRoaXMuZmluZFRvdWNoKGlkKTsNCgkJaWYg
KGluZGV4IDwgMCkNCgkJew0KCQkJcmV0LnNldF9mbG9hdCgwKTsNCgkJCXJldHVybjsNCgkJfQ0K
CQl2YXIgdG91Y2ggPSB0aGlzLnRvdWNoZXNbaW5kZXhdOw0KCQlyZXQuc2V0X2Zsb2F0KHRvdWNo
LnByZXNzdXJlKTsNCgl9Ow0KCXBsdWdpblByb3RvLmV4cHMgPSBuZXcgRXhwcygpOw0KfSgpKTsN
CjsNCjsNCmNyLmJlaGF2aW9ycy5CdWxsZXQgPSBmdW5jdGlvbihydW50aW1lKQ0Kew0KCXRoaXMu
cnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIGJlaGF2aW9yUHJv
dG8gPSBjci5iZWhhdmlvcnMuQnVsbGV0LnByb3RvdHlwZTsNCgliZWhhdmlvclByb3RvLlR5cGUg
PSBmdW5jdGlvbihiZWhhdmlvciwgb2JqdHlwZSkNCgl7DQoJCXRoaXMuYmVoYXZpb3IgPSBiZWhh
dmlvcjsNCgkJdGhpcy5vYmp0eXBlID0gb2JqdHlwZTsNCgkJdGhpcy5ydW50aW1lID0gYmVoYXZp
b3IucnVudGltZTsNCgl9Ow0KCXZhciBiZWh0eXBlUHJvdG8gPSBiZWhhdmlvclByb3RvLlR5cGUu
cHJvdG90eXBlOw0KCWJlaHR5cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJfTsN
CgliZWhhdmlvclByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSwgaW5zdCkNCgl7DQoJCXRo
aXMudHlwZSA9IHR5cGU7DQoJCXRoaXMuYmVoYXZpb3IgPSB0eXBlLmJlaGF2aW9yOw0KCQl0aGlz
Lmluc3QgPSBpbnN0OwkJCQkvLyBhc3NvY2lhdGVkIG9iamVjdCBpbnN0YW5jZSB0byBtb2RpZnkN
CgkJdGhpcy5ydW50aW1lID0gdHlwZS5ydW50aW1lOw0KCX07DQoJdmFyIGJlaGluc3RQcm90byA9
IGJlaGF2aW9yUHJvdG8uSW5zdGFuY2UucHJvdG90eXBlOw0KCWJlaGluc3RQcm90by5vbkNyZWF0
ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCXZhciBzcGVlZCA9IHRoaXMucHJvcGVydGllc1swXTsNCgkJ
dGhpcy5hY2MgPSB0aGlzLnByb3BlcnRpZXNbMV07DQoJCXRoaXMuZyA9IHRoaXMucHJvcGVydGll
c1syXTsNCgkJdGhpcy5ib3VuY2VPZmZTb2xpZCA9ICh0aGlzLnByb3BlcnRpZXNbM10gIT09IDAp
Ow0KCQl0aGlzLnNldEFuZ2xlID0gKHRoaXMucHJvcGVydGllc1s0XSAhPT0gMCk7DQoJCXRoaXMu
ZHggPSBNYXRoLmNvcyh0aGlzLmluc3QuYW5nbGUpICogc3BlZWQ7DQoJCXRoaXMuZHkgPSBNYXRo
LnNpbih0aGlzLmluc3QuYW5nbGUpICogc3BlZWQ7DQoJCXRoaXMubGFzdHggPSB0aGlzLmluc3Qu
eDsNCgkJdGhpcy5sYXN0eSA9IHRoaXMuaW5zdC55Ow0KCQl0aGlzLmxhc3RLbm93bkFuZ2xlID0g
dGhpcy5pbnN0LmFuZ2xlOw0KCQl0aGlzLnRyYXZlbGxlZCA9IDA7DQoJCXRoaXMuZW5hYmxlZCA9
ICh0aGlzLnByb3BlcnRpZXNbNV0gIT09IDApOw0KCX07DQoJYmVoaW5zdFByb3RvLnNhdmVUb0pT
T04gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHsNCgkJCSJhY2MiOiB0aGlzLmFjYywNCgkJ
CSJnIjogdGhpcy5nLA0KCQkJImR4IjogdGhpcy5keCwNCgkJCSJkeSI6IHRoaXMuZHksDQoJCQki
bHgiOiB0aGlzLmxhc3R4LA0KCQkJImx5IjogdGhpcy5sYXN0eSwNCgkJCSJsa2EiOiB0aGlzLmxh
c3RLbm93bkFuZ2xlLA0KCQkJInQiOiB0aGlzLnRyYXZlbGxlZCwNCgkJCSJlIjogdGhpcy5lbmFi
bGVkDQoJCX07DQoJfTsNCgliZWhpbnN0UHJvdG8ubG9hZEZyb21KU09OID0gZnVuY3Rpb24gKG8p
DQoJew0KCQl0aGlzLmFjYyA9IG9bImFjYyJdOw0KCQl0aGlzLmcgPSBvWyJnIl07DQoJCXRoaXMu
ZHggPSBvWyJkeCJdOw0KCQl0aGlzLmR5ID0gb1siZHkiXTsNCgkJdGhpcy5sYXN0eCA9IG9bImx4
Il07DQoJCXRoaXMubGFzdHkgPSBvWyJseSJdOw0KCQl0aGlzLmxhc3RLbm93bkFuZ2xlID0gb1si
bGthIl07DQoJCXRoaXMudHJhdmVsbGVkID0gb1sidCJdOw0KCQl0aGlzLmVuYWJsZWQgPSBvWyJl
Il07DQoJfTsNCgliZWhpbnN0UHJvdG8udGljayA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAoIXRo
aXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJdmFyIGR0ID0gdGhpcy5ydW50aW1lLmdldER0KHRo
aXMuaW5zdCk7DQoJCXZhciBzLCBhOw0KCQl2YXIgYm91bmNlU29saWQsIGJvdW5jZUFuZ2xlOw0K
CQlpZiAodGhpcy5pbnN0LmFuZ2xlICE9PSB0aGlzLmxhc3RLbm93bkFuZ2xlKQ0KCQl7DQoJCQlp
ZiAodGhpcy5zZXRBbmdsZSkNCgkJCXsNCgkJCQlzID0gY3IuZGlzdGFuY2VUbygwLCAwLCB0aGlz
LmR4LCB0aGlzLmR5KTsNCgkJCQl0aGlzLmR4ID0gTWF0aC5jb3ModGhpcy5pbnN0LmFuZ2xlKSAq
IHM7DQoJCQkJdGhpcy5keSA9IE1hdGguc2luKHRoaXMuaW5zdC5hbmdsZSkgKiBzOw0KCQkJfQ0K
CQkJdGhpcy5sYXN0S25vd25BbmdsZSA9IHRoaXMuaW5zdC5hbmdsZTsNCgkJfQ0KCQlpZiAodGhp
cy5hY2MgIT09IDApDQoJCXsNCgkJCXMgPSBjci5kaXN0YW5jZVRvKDAsIDAsIHRoaXMuZHgsIHRo
aXMuZHkpOw0KCQkJaWYgKHRoaXMuZHggPT09IDAgJiYgdGhpcy5keSA9PT0gMCkNCgkJCQlhID0g
dGhpcy5pbnN0LmFuZ2xlOw0KCQkJZWxzZQ0KCQkJCWEgPSBjci5hbmdsZVRvKDAsIDAsIHRoaXMu
ZHgsIHRoaXMuZHkpOw0KCQkJcyArPSB0aGlzLmFjYyAqIGR0Ow0KCQkJaWYgKHMgPCAwKQ0KCQkJ
CXMgPSAwOw0KCQkJdGhpcy5keCA9IE1hdGguY29zKGEpICogczsNCgkJCXRoaXMuZHkgPSBNYXRo
LnNpbihhKSAqIHM7DQoJCX0NCgkJaWYgKHRoaXMuZyAhPT0gMCkNCgkJCXRoaXMuZHkgKz0gdGhp
cy5nICogZHQ7DQoJCXRoaXMubGFzdHggPSB0aGlzLmluc3QueDsNCgkJdGhpcy5sYXN0eSA9IHRo
aXMuaW5zdC55Ow0KCQlpZiAodGhpcy5keCAhPT0gMCB8fCB0aGlzLmR5ICE9PSAwKQ0KCQl7DQoJ
CQl0aGlzLmluc3QueCArPSB0aGlzLmR4ICogZHQ7DQoJCQl0aGlzLmluc3QueSArPSB0aGlzLmR5
ICogZHQ7DQoJCQl0aGlzLnRyYXZlbGxlZCArPSBjci5kaXN0YW5jZVRvKDAsIDAsIHRoaXMuZHgg
KiBkdCwgdGhpcy5keSAqIGR0KQ0KCQkJaWYgKHRoaXMuc2V0QW5nbGUpDQoJCQl7DQoJCQkJdGhp
cy5pbnN0LmFuZ2xlID0gY3IuYW5nbGVUbygwLCAwLCB0aGlzLmR4LCB0aGlzLmR5KTsNCgkJCQl0
aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCXRoaXMubGFzdEtub3duQW5nbGUgPSB0
aGlzLmluc3QuYW5nbGU7DQoJCQl9DQoJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0K
CQkJaWYgKHRoaXMuYm91bmNlT2ZmU29saWQpDQoJCQl7DQoJCQkJYm91bmNlU29saWQgPSB0aGlz
LnJ1bnRpbWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3QpOw0KCQkJCWlmIChib3VuY2VTb2xp
ZCkNCgkJCQl7DQoJCQkJCXRoaXMucnVudGltZS5yZWdpc3RlckNvbGxpc2lvbih0aGlzLmluc3Qs
IGJvdW5jZVNvbGlkKTsNCgkJCQkJcyA9IGNyLmRpc3RhbmNlVG8oMCwgMCwgdGhpcy5keCwgdGhp
cy5keSk7DQoJCQkJCWJvdW5jZUFuZ2xlID0gdGhpcy5ydW50aW1lLmNhbGN1bGF0ZVNvbGlkQm91
bmNlQW5nbGUodGhpcy5pbnN0LCB0aGlzLmxhc3R4LCB0aGlzLmxhc3R5KTsNCgkJCQkJdGhpcy5k
eCA9IE1hdGguY29zKGJvdW5jZUFuZ2xlKSAqIHM7DQoJCQkJCXRoaXMuZHkgPSBNYXRoLnNpbihi
b3VuY2VBbmdsZSkgKiBzOw0KCQkJCQl0aGlzLmluc3QueCArPSB0aGlzLmR4ICogZHQ7CQkJLy8g
bW92ZSBvdXQgZm9yIG9uZSB0aWNrIHNpbmNlIHRoZSBvYmplY3QgY2FuJ3QgaGF2ZSBzcGVudCBh
IHRpY2sgaW4gdGhlIHNvbGlkDQoJCQkJCXRoaXMuaW5zdC55ICs9IHRoaXMuZHkgKiBkdDsNCgkJ
CQkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQkJaWYgKHRoaXMuc2V0QW5nbGUp
DQoJCQkJCXsNCgkJCQkJCXRoaXMuaW5zdC5hbmdsZSA9IGJvdW5jZUFuZ2xlOw0KCQkJCQkJdGhp
cy5sYXN0S25vd25BbmdsZSA9IGJvdW5jZUFuZ2xlOw0KCQkJCQkJdGhpcy5pbnN0LnNldF9iYm94
X2NoYW5nZWQoKTsNCgkJCQkJfQ0KCQkJCQlpZiAoIXRoaXMucnVudGltZS5wdXNoT3V0U29saWQo
dGhpcy5pbnN0LCB0aGlzLmR4IC8gcywgdGhpcy5keSAvIHMsIE1hdGgubWF4KHMgKiAyLjUgKiBk
dCwgMzApKSkNCgkJCQkJCXRoaXMucnVudGltZS5wdXNoT3V0U29saWROZWFyZXN0KHRoaXMuaW5z
dCwgMTAwKTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIENuZHMoKSB7fTsNCglD
bmRzLnByb3RvdHlwZS5Db21wYXJlU3BlZWQgPSBmdW5jdGlvbiAoY21wLCBzKQ0KCXsNCgkJcmV0
dXJuIGNyLmRvX2NtcChjci5kaXN0YW5jZVRvKDAsIDAsIHRoaXMuZHgsIHRoaXMuZHkpLCBjbXAs
IHMpOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuQ29tcGFyZVRyYXZlbGxlZCA9IGZ1bmN0aW9uIChj
bXAsIGQpDQoJew0KCQlyZXR1cm4gY3IuZG9fY21wKHRoaXMudHJhdmVsbGVkLCBjbXAsIGQpOw0K
CX07DQoJYmVoYXZpb3JQcm90by5jbmRzID0gbmV3IENuZHMoKTsNCglmdW5jdGlvbiBBY3RzKCkg
e307DQoJQWN0cy5wcm90b3R5cGUuU2V0U3BlZWQgPSBmdW5jdGlvbiAocykNCgl7DQoJCXZhciBh
ID0gY3IuYW5nbGVUbygwLCAwLCB0aGlzLmR4LCB0aGlzLmR5KTsNCgkJdGhpcy5keCA9IE1hdGgu
Y29zKGEpICogczsNCgkJdGhpcy5keSA9IE1hdGguc2luKGEpICogczsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLlNldEFjY2VsZXJhdGlvbiA9IGZ1bmN0aW9uIChhKQ0KCXsNCgkJdGhpcy5hY2MgPSBh
Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0R3Jhdml0eSA9IGZ1bmN0aW9uIChnKQ0KCXsNCgkJ
dGhpcy5nID0gZzsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEFuZ2xlT2ZNb3Rpb24gPSBmdW5j
dGlvbiAoYSkNCgl7DQoJCWEgPSBjci50b19yYWRpYW5zKGEpOw0KCQl2YXIgcyA9IGNyLmRpc3Rh
bmNlVG8oMCwgMCwgdGhpcy5keCwgdGhpcy5keSkNCgkJdGhpcy5keCA9IE1hdGguY29zKGEpICog
czsNCgkJdGhpcy5keSA9IE1hdGguc2luKGEpICogczsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkJv
dW5jZSA9IGZ1bmN0aW9uIChvYmp0eXBlKQ0KCXsNCgkJaWYgKCFvYmp0eXBlKQ0KCQkJcmV0dXJu
Ow0KCQl2YXIgb3RoZXJpbnN0ID0gb2JqdHlwZS5nZXRGaXJzdFBpY2tlZCh0aGlzLmluc3QpOw0K
CQlpZiAoIW90aGVyaW5zdCkNCgkJCXJldHVybjsNCgkJdmFyIGR0ID0gdGhpcy5ydW50aW1lLmdl
dER0KHRoaXMuaW5zdCk7DQoJCXZhciBzID0gY3IuZGlzdGFuY2VUbygwLCAwLCB0aGlzLmR4LCB0
aGlzLmR5KTsNCgkJdmFyIGJvdW5jZUFuZ2xlID0gdGhpcy5ydW50aW1lLmNhbGN1bGF0ZVNvbGlk
Qm91bmNlQW5nbGUodGhpcy5pbnN0LCB0aGlzLmxhc3R4LCB0aGlzLmxhc3R5LCBvdGhlcmluc3Qp
Ow0KCQl0aGlzLmR4ID0gTWF0aC5jb3MoYm91bmNlQW5nbGUpICogczsNCgkJdGhpcy5keSA9IE1h
dGguc2luKGJvdW5jZUFuZ2xlKSAqIHM7DQoJCXRoaXMuaW5zdC54ICs9IHRoaXMuZHggKiBkdDsJ
CQkvLyBtb3ZlIG91dCBmb3Igb25lIHRpY2sgc2luY2UgdGhlIG9iamVjdCBjYW4ndCBoYXZlIHNw
ZW50IGEgdGljayBpbiB0aGUgc29saWQNCgkJdGhpcy5pbnN0LnkgKz0gdGhpcy5keSAqIGR0Ow0K
CQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQlpZiAodGhpcy5zZXRBbmdsZSkNCgkJ
ew0KCQkJdGhpcy5pbnN0LmFuZ2xlID0gYm91bmNlQW5nbGU7DQoJCQl0aGlzLmxhc3RLbm93bkFu
Z2xlID0gYm91bmNlQW5nbGU7DQoJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQl9
DQoJCWlmIChzICE9PSAwKQkJLy8gcHJldmVudCBkaXZpZGUtYnktemVybw0KCQl7DQoJCQlpZiAo
dGhpcy5ib3VuY2VPZmZTb2xpZCkNCgkJCXsNCgkJCQlpZiAoIXRoaXMucnVudGltZS5wdXNoT3V0
U29saWQodGhpcy5pbnN0LCB0aGlzLmR4IC8gcywgdGhpcy5keSAvIHMsIE1hdGgubWF4KHMgKiAy
LjUgKiBkdCwgMzApKSkNCgkJCQkJdGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZE5lYXJlc3QodGhp
cy5pbnN0LCAxMDApOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5wdXNo
T3V0KHRoaXMuaW5zdCwgdGhpcy5keCAvIHMsIHRoaXMuZHkgLyBzLCBNYXRoLm1heChzICogMi41
ICogZHQsIDMwKSwgb3RoZXJpbnN0KQ0KCQkJfQ0KCQl9DQoJfTsNCglBY3RzLnByb3RvdHlwZS5T
ZXREaXN0YW5jZVRyYXZlbGxlZCA9IGZ1bmN0aW9uIChkKQ0KCXsNCgkJdGhpcy50cmF2ZWxsZWQg
PSBkOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0RW5hYmxlZCA9IGZ1bmN0aW9uIChlbikNCgl7
DQoJCXRoaXMuZW5hYmxlZCA9IChlbiA9PT0gMSk7DQoJfTsNCgliZWhhdmlvclByb3RvLmFjdHMg
PSBuZXcgQWN0cygpOw0KCWZ1bmN0aW9uIEV4cHMoKSB7fTsNCglFeHBzLnByb3RvdHlwZS5TcGVl
ZCA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQl2YXIgcyA9IGNyLmRpc3RhbmNlVG8oMCwgMCwgdGhp
cy5keCwgdGhpcy5keSk7DQoJCXMgPSBjci5yb3VuZDZkcChzKTsNCgkJcmV0LnNldF9mbG9hdChz
KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFjY2VsZXJhdGlvbiA9IGZ1bmN0aW9uIChyZXQpDQoJ
ew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYWNjKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFuZ2xl
T2ZNb3Rpb24gPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChjci50b19kZWdy
ZWVzKGNyLmFuZ2xlVG8oMCwgMCwgdGhpcy5keCwgdGhpcy5keSkpKTsNCgl9Ow0KCUV4cHMucHJv
dG90eXBlLkRpc3RhbmNlVHJhdmVsbGVkID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRf
ZmxvYXQodGhpcy50cmF2ZWxsZWQpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuR3Jhdml0eSA9IGZ1
bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZyk7DQoJfTsNCgliZWhhdmlv
clByb3RvLmV4cHMgPSBuZXcgRXhwcygpOw0KfSgpKTsNCjsNCjsNCmNyLmJlaGF2aW9ycy5GYWRl
ID0gZnVuY3Rpb24ocnVudGltZSkNCnsNCgl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0KfTsNCihm
dW5jdGlvbiAoKQ0Kew0KCXZhciBiZWhhdmlvclByb3RvID0gY3IuYmVoYXZpb3JzLkZhZGUucHJv
dG90eXBlOw0KCWJlaGF2aW9yUHJvdG8uVHlwZSA9IGZ1bmN0aW9uKGJlaGF2aW9yLCBvYmp0eXBl
KQ0KCXsNCgkJdGhpcy5iZWhhdmlvciA9IGJlaGF2aW9yOw0KCQl0aGlzLm9ianR5cGUgPSBvYmp0
eXBlOw0KCQl0aGlzLnJ1bnRpbWUgPSBiZWhhdmlvci5ydW50aW1lOw0KCX07DQoJdmFyIGJlaHR5
cGVQcm90byA9IGJlaGF2aW9yUHJvdG8uVHlwZS5wcm90b3R5cGU7DQoJYmVodHlwZVByb3RvLm9u
Q3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgl9Ow0KCWJlaGF2aW9yUHJvdG8uSW5zdGFuY2UgPSBm
dW5jdGlvbih0eXBlLCBpbnN0KQ0KCXsNCgkJdGhpcy50eXBlID0gdHlwZTsNCgkJdGhpcy5iZWhh
dmlvciA9IHR5cGUuYmVoYXZpb3I7DQoJCXRoaXMuaW5zdCA9IGluc3Q7CQkJCS8vIGFzc29jaWF0
ZWQgb2JqZWN0IGluc3RhbmNlIHRvIG1vZGlmeQ0KCQl0aGlzLnJ1bnRpbWUgPSB0eXBlLnJ1bnRp
bWU7DQoJfTsNCgl2YXIgYmVoaW5zdFByb3RvID0gYmVoYXZpb3JQcm90by5JbnN0YW5jZS5wcm90
b3R5cGU7DQoJYmVoaW5zdFByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgkJdGhpcy5h
Y3RpdmVBdFN0YXJ0ID0gdGhpcy5wcm9wZXJ0aWVzWzBdID09PSAxOw0KCQl0aGlzLnNldE1heE9w
YWNpdHkgPSBmYWxzZTsJCQkJCS8vIHVzZWQgdG8gcmV0cmlldmUgbWF4T3BhY2l0eSBvbmNlIGlu
IGZpcnN0ICdTdGFydCBmYWRlJyBhY3Rpb24gaWYgaW5pdGlhbGx5IGluYWN0aXZlDQoJCXRoaXMu
ZmFkZUluVGltZSA9IHRoaXMucHJvcGVydGllc1sxXTsNCgkJdGhpcy53YWl0VGltZSA9IHRoaXMu
cHJvcGVydGllc1syXTsNCgkJdGhpcy5mYWRlT3V0VGltZSA9IHRoaXMucHJvcGVydGllc1szXTsN
CgkJdGhpcy5kZXN0cm95ID0gdGhpcy5wcm9wZXJ0aWVzWzRdOwkJCS8vIDAgPSBubywgMSA9IGFm
dGVyIGZhZGUgb3V0DQoJCXRoaXMuc3RhZ2UgPSB0aGlzLmFjdGl2ZUF0U3RhcnQgPyAwIDogMzsJ
CS8vIDAgPSBmYWRlIGluLCAxID0gd2FpdCwgMiA9IGZhZGUgb3V0LCAzID0gZG9uZQ0KCQlpZiAo
dGhpcy5yZWN5Y2xlZCkNCgkJCXRoaXMuc3RhZ2VUaW1lLnJlc2V0KCk7DQoJCWVsc2UNCgkJCXRo
aXMuc3RhZ2VUaW1lID0gbmV3IGNyLkthaGFuQWRkZXIoKTsNCgkJdGhpcy5tYXhPcGFjaXR5ID0g
KHRoaXMuaW5zdC5vcGFjaXR5ID8gdGhpcy5pbnN0Lm9wYWNpdHkgOiAxLjApOw0KCQlpZiAodGhp
cy5hY3RpdmVBdFN0YXJ0KQ0KCQl7DQoJCQlpZiAodGhpcy5mYWRlSW5UaW1lID09PSAwKQ0KCQkJ
ew0KCQkJCXRoaXMuc3RhZ2UgPSAxOw0KCQkJCWlmICh0aGlzLndhaXRUaW1lID09PSAwKQ0KCQkJ
CQl0aGlzLnN0YWdlID0gMjsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl0aGlzLmluc3Qub3Bh
Y2l0eSA9IDA7DQoJCQkJdGhpcy5ydW50aW1lLnJlZHJhdyA9IHRydWU7DQoJCQl9DQoJCX0NCgl9
Ow0KCWJlaGluc3RQcm90by5zYXZlVG9KU09OID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB7
DQoJCQkiZml0IjogdGhpcy5mYWRlSW5UaW1lLA0KCQkJInd0IjogdGhpcy53YWl0VGltZSwNCgkJ
CSJmb3QiOiB0aGlzLmZhZGVPdXRUaW1lLA0KCQkJInMiOiB0aGlzLnN0YWdlLA0KCQkJInN0Ijog
dGhpcy5zdGFnZVRpbWUuc3VtLA0KCQkJIm1vIjogdGhpcy5tYXhPcGFjaXR5LA0KCQl9Ow0KCX07
DQoJYmVoaW5zdFByb3RvLmxvYWRGcm9tSlNPTiA9IGZ1bmN0aW9uIChvKQ0KCXsNCgkJdGhpcy5m
YWRlSW5UaW1lID0gb1siZml0Il07DQoJCXRoaXMud2FpdFRpbWUgPSBvWyJ3dCJdOw0KCQl0aGlz
LmZhZGVPdXRUaW1lID0gb1siZm90Il07DQoJCXRoaXMuc3RhZ2UgPSBvWyJzIl07DQoJCXRoaXMu
c3RhZ2VUaW1lLnJlc2V0KCk7DQoJCXRoaXMuc3RhZ2VUaW1lLnN1bSA9IG9bInN0Il07DQoJCXRo
aXMubWF4T3BhY2l0eSA9IG9bIm1vIl07DQoJfTsNCgliZWhpbnN0UHJvdG8udGljayA9IGZ1bmN0
aW9uICgpDQoJew0KCQl0aGlzLnN0YWdlVGltZS5hZGQodGhpcy5ydW50aW1lLmdldER0KHRoaXMu
aW5zdCkpOw0KCQlpZiAodGhpcy5zdGFnZSA9PT0gMCkNCgkJew0KCQkJdGhpcy5pbnN0Lm9wYWNp
dHkgPSAodGhpcy5zdGFnZVRpbWUuc3VtIC8gdGhpcy5mYWRlSW5UaW1lKSAqIHRoaXMubWF4T3Bh
Y2l0eTsNCgkJCXRoaXMucnVudGltZS5yZWRyYXcgPSB0cnVlOw0KCQkJaWYgKHRoaXMuaW5zdC5v
cGFjaXR5ID49IHRoaXMubWF4T3BhY2l0eSkNCgkJCXsNCgkJCQl0aGlzLmluc3Qub3BhY2l0eSA9
IHRoaXMubWF4T3BhY2l0eTsNCgkJCQl0aGlzLnN0YWdlID0gMTsJLy8gd2FpdCBzdGFnZQ0KCQkJ
CXRoaXMuc3RhZ2VUaW1lLnJlc2V0KCk7DQoJCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IuYmVo
YXZpb3JzLkZhZGUucHJvdG90eXBlLmNuZHMuT25GYWRlSW5FbmQsIHRoaXMuaW5zdCk7DQoJCQl9
DQoJCX0NCgkJaWYgKHRoaXMuc3RhZ2UgPT09IDEpDQoJCXsNCgkJCWlmICh0aGlzLnN0YWdlVGlt
ZS5zdW0gPj0gdGhpcy53YWl0VGltZSkNCgkJCXsNCgkJCQl0aGlzLnN0YWdlID0gMjsJLy8gZmFk
ZSBvdXQgc3RhZ2UNCgkJCQl0aGlzLnN0YWdlVGltZS5yZXNldCgpOw0KCQkJCXRoaXMucnVudGlt
ZS50cmlnZ2VyKGNyLmJlaGF2aW9ycy5GYWRlLnByb3RvdHlwZS5jbmRzLk9uV2FpdEVuZCwgdGhp
cy5pbnN0KTsNCgkJCX0NCgkJfQ0KCQlpZiAodGhpcy5zdGFnZSA9PT0gMikNCgkJew0KCQkJaWYg
KHRoaXMuZmFkZU91dFRpbWUgIT09IDApDQoJCQl7DQoJCQkJdGhpcy5pbnN0Lm9wYWNpdHkgPSB0
aGlzLm1heE9wYWNpdHkgLSAoKHRoaXMuc3RhZ2VUaW1lLnN1bSAvIHRoaXMuZmFkZU91dFRpbWUp
ICogdGhpcy5tYXhPcGFjaXR5KTsNCgkJCQl0aGlzLnJ1bnRpbWUucmVkcmF3ID0gdHJ1ZTsNCgkJ
CQlpZiAodGhpcy5pbnN0Lm9wYWNpdHkgPCAwKQ0KCQkJCXsNCgkJCQkJdGhpcy5pbnN0Lm9wYWNp
dHkgPSAwOw0KCQkJCQl0aGlzLnN0YWdlID0gMzsJLy8gZG9uZQ0KCQkJCQl0aGlzLnN0YWdlVGlt
ZS5yZXNldCgpOw0KCQkJCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5iZWhhdmlvcnMuRmFkZS5w
cm90b3R5cGUuY25kcy5PbkZhZGVPdXRFbmQsIHRoaXMuaW5zdCk7DQoJCQkJCWlmICh0aGlzLmRl
c3Ryb3kgPT09IDEpDQoJCQkJCQl0aGlzLnJ1bnRpbWUuRGVzdHJveUluc3RhbmNlKHRoaXMuaW5z
dCk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfTsNCgliZWhpbnN0UHJvdG8uZG9TdGFydCA9IGZ1bmN0
aW9uICgpDQoJew0KCQl0aGlzLnN0YWdlID0gMDsNCgkJdGhpcy5zdGFnZVRpbWUucmVzZXQoKTsN
CgkJaWYgKHRoaXMuZmFkZUluVGltZSA9PT0gMCkNCgkJew0KCQkJdGhpcy5zdGFnZSA9IDE7DQoJ
CQlpZiAodGhpcy53YWl0VGltZSA9PT0gMCkNCgkJCQl0aGlzLnN0YWdlID0gMjsNCgkJfQ0KCQll
bHNlDQoJCXsNCgkJCXRoaXMuaW5zdC5vcGFjaXR5ID0gMDsNCgkJCXRoaXMucnVudGltZS5yZWRy
YXcgPSB0cnVlOw0KCQl9DQoJfTsNCglmdW5jdGlvbiBDbmRzKCkge307DQoJQ25kcy5wcm90b3R5
cGUuT25GYWRlT3V0RW5kID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJ
Q25kcy5wcm90b3R5cGUuT25GYWRlSW5FbmQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRy
dWU7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5PbldhaXRFbmQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
cmV0dXJuIHRydWU7DQoJfTsNCgliZWhhdmlvclByb3RvLmNuZHMgPSBuZXcgQ25kcygpOw0KCWZ1
bmN0aW9uIEFjdHMoKSB7fTsNCglBY3RzLnByb3RvdHlwZS5TdGFydEZhZGUgPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJaWYgKCF0aGlzLmFjdGl2ZUF0U3RhcnQgJiYgIXRoaXMuc2V0TWF4T3BhY2l0eSkN
CgkJew0KCQkJdGhpcy5tYXhPcGFjaXR5ID0gKHRoaXMuaW5zdC5vcGFjaXR5ID8gdGhpcy5pbnN0
Lm9wYWNpdHkgOiAxLjApOw0KCQkJdGhpcy5zZXRNYXhPcGFjaXR5ID0gdHJ1ZTsNCgkJfQ0KCQlp
ZiAodGhpcy5zdGFnZSA9PT0gMykNCgkJCXRoaXMuZG9TdGFydCgpOw0KCX07DQoJQWN0cy5wcm90
b3R5cGUuUmVzdGFydEZhZGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5kb1N0YXJ0KCk7DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5TZXRGYWRlSW5UaW1lID0gZnVuY3Rpb24gKHQpDQoJew0KCQlp
ZiAodCA8IDApDQoJCQl0ID0gMDsNCgkJdGhpcy5mYWRlSW5UaW1lID0gdDsNCgl9Ow0KCUFjdHMu
cHJvdG90eXBlLlNldFdhaXRUaW1lID0gZnVuY3Rpb24gKHQpDQoJew0KCQlpZiAodCA8IDApDQoJ
CQl0ID0gMDsNCgkJdGhpcy53YWl0VGltZSA9IHQ7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRG
YWRlT3V0VGltZSA9IGZ1bmN0aW9uICh0KQ0KCXsNCgkJaWYgKHQgPCAwKQ0KCQkJdCA9IDA7DQoJ
CXRoaXMuZmFkZU91dFRpbWUgPSB0Ow0KCX07DQoJYmVoYXZpb3JQcm90by5hY3RzID0gbmV3IEFj
dHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5wcm90b3R5cGUuRmFkZUluVGltZSA9
IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZmFkZUluVGltZSk7DQoJ
fTsNCglFeHBzLnByb3RvdHlwZS5XYWl0VGltZSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQu
c2V0X2Zsb2F0KHRoaXMud2FpdFRpbWUpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuRmFkZU91dFRp
bWUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmZhZGVPdXRUaW1l
KTsNCgl9Ow0KCWJlaGF2aW9yUHJvdG8uZXhwcyA9IG5ldyBFeHBzKCk7DQp9KCkpOw0KdmFyIEJv
eDJEID0ge307DQpCb3gyRC5EeW5hbWljcyAgICAgICAgID0ge307DQpCb3gyRC5EeW5hbWljcy5K
b2ludHMgID0ge307DQpCb3gyRC5Db21tb24gICAgICAgICAgID0ge307DQpCb3gyRC5Db21tb24u
TWF0aCAgICAgID0ge307DQpCb3gyRC5Db2xsaXNpb24gICAgICAgID0ge307DQpCb3gyRC5Db2xs
aXNpb24uU2hhcGVzID0ge307DQpmdW5jdGlvbiBjMmluaGVyaXQoZGVyaXZlZCwgYmFzZSkNCnsN
Cglmb3IgKHZhciBpIGluIGJhc2UucHJvdG90eXBlKQ0KCXsNCgkJaWYgKGJhc2UucHJvdG90eXBl
Lmhhc093blByb3BlcnR5KGkpKQ0KCQkJZGVyaXZlZC5wcm90b3R5cGVbaV0gPSBiYXNlLnByb3Rv
dHlwZVtpXTsNCgl9DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uID0ge307DQpCb3gy
RC5Db2xsaXNpb24uYjJEaXN0YW5jZSA9IHt9Ow0KQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MgPSB7
fTsNCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aCA9IHt9Ow0KQm94MkQuQ29uc3RzID0ge307DQpC
b3gyRC5EeW5hbWljcy5Db250YWN0cyA9IHt9Ow0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMg
PSB7fTsNCi8qKg0KICogQ3JlYXRlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uDQogKiBAcGFyYW0geyFP
YmplY3R9IGNvbnRleHQgVGhlIGNvbnRleHQgKCd0aGlzJyB2YXJpYWJsZSkgb2YgdGhlIGNhbGxi
YWNrIGZ1bmN0aW9uDQogKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLlsqXSl9IGZuIFRoZSBmdW5jdGlv
biB0byBleGVjdXRlIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgZm9yIHRoZSByZXR1cm5lZCBjYWxs
YmFjaw0KICogQHJldHVybiB7ZnVuY3Rpb24oKX0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uDQogKi8N
CkJveDJELmdlbmVyYXRlQ2FsbGJhY2sgPSBmdW5jdGlvbihjb250ZXh0LCBmbikgew0KCXJldHVy
biBmdW5jdGlvbigpIHsNCgkJZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTsNCgl9Ow0KfTsN
Ci8qKg0KICogQHR5cGUge251bWJlcn0NCiAqIEBjb25zdA0KICovDQpCb3gyRC5Db25zdHMuTUlO
X1ZBTFVFX1NRVUFSRUQgPSBOdW1iZXIuTUlOX1ZBTFVFICogTnVtYmVyLk1JTl9WQUxVRTsNCi8q
Kg0KICogQHBhcmFtIHtudW1iZXJ9IGZyaWN0aW9uMQ0KICogQHBhcmFtIHtudW1iZXJ9IGZyaWN0
aW9uMg0KICovDQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMk1peEZyaWN0aW9uID0gZnVuY3Rp
b24gKGZyaWN0aW9uMSwgZnJpY3Rpb24yKSB7DQoJcmV0dXJuIE1hdGguc3FydChmcmljdGlvbjEg
KiBmcmljdGlvbjIpOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IHJlc3RpdHV0aW9uMQ0K
ICogQHBhcmFtIHtudW1iZXJ9IHJlc3RpdHV0aW9uMg0KICovDQpCb3gyRC5Db21tb24uYjJTZXR0
aW5ncy5iMk1peFJlc3RpdHV0aW9uID0gZnVuY3Rpb24gKHJlc3RpdHV0aW9uMSwgcmVzdGl0dXRp
b24yKSB7DQoJcmV0dXJuIHJlc3RpdHV0aW9uMSA+IHJlc3RpdHV0aW9uMiA/IHJlc3RpdHV0aW9u
MSA6IHJlc3RpdHV0aW9uMjsNCn07DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5WRVJTSU9OID0g
IjIuMWFscGhhLWlsbGFuZHJpbCI7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5VU0hSVF9NQVgg
PSAweDAwMDBmZmZmOw0KQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2lu
dHMgPSAyOw0KQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbiA9IDAuMTsN
CkJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2FhYmJNdWx0aXBsaWVyID0gMi4wOw0KQm94MkQu
Q29tbW9uLmIyU2V0dGluZ3MuYjJfcG9seWdvblJhZGl1cyA9IDIuMCAqIEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX2xpbmVhclNsb3A7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5l
YXJTbG9wID0gMC4wMDU7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcCA9
IDIuMCAvIDE4MC4wICogTWF0aC5QSTsNCkJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX3RvaVNs
b3AgPSA4LjAgKiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wOw0KQm94MkQu
Q29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4VE9JQ29udGFjdHNQZXJJc2xhbmQgPSAzMjsNCkJveDJE
LkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRPSUpvaW50c1BlcklzbGFuZCA9IDMyOw0KQm94MkQu
Q29tbW9uLmIyU2V0dGluZ3MuYjJfdmVsb2NpdHlUaHJlc2hvbGQgPSAxLjA7DQpCb3gyRC5Db21t
b24uYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uID0gMC4yOw0KQm94MkQuQ29tbW9u
LmIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24gPSA4LjAgLyAxODAuMCAqIE1hdGgu
UEk7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvbiA9IDIuMDsNCkJv
eDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uU3F1YXJlZCA9IEJveDJELkNv
bW1vbi5iMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogQm94MkQuQ29tbW9uLmIyU2V0dGlu
Z3MuYjJfbWF4VHJhbnNsYXRpb247DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhSb3Rh
dGlvbiA9IDAuNSAqIE1hdGguUEk7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhSb3Rh
dGlvblNxdWFyZWQgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvbiAqIEJv
eDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFJvdGF0aW9uOw0KQm94MkQuQ29tbW9uLmIyU2V0
dGluZ3MuYjJfY29udGFjdEJhdW1nYXJ0ZSA9IDAuMjsNCkJveDJELkNvbW1vbi5iMlNldHRpbmdz
LmIyX3RpbWVUb1NsZWVwID0gMC41Ow0KQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFy
U2xlZXBUb2xlcmFuY2UgPSAwLjAxOw0KQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFy
U2xlZXBUb2xlcmFuY2VTcXVhcmVkID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFy
U2xlZXBUb2xlcmFuY2UgKiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbGVlcFRv
bGVyYW5jZTsNCkJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2FuZ3VsYXJTbGVlcFRvbGVyYW5j
ZSA9IDIuMCAvIDE4MC4wICogTWF0aC5QSTsNCkJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2Fu
Z3VsYXJTbGVlcFRvbGVyYW5jZVNxdWFyZWQgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9h
bmd1bGFyU2xlZXBUb2xlcmFuY2UgKiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9hbmd1bGFy
U2xlZXBUb2xlcmFuY2U7DQpCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5NSU5fVkFMVUVfU1FVQVJF
RCA9IE51bWJlci5NSU5fVkFMVUUgKiBOdW1iZXIuTUlOX1ZBTFVFOw0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMn0gYg0KICogQHJldHVybiB7bnVtYmVyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0
aC5iMk1hdGguRG90ID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgcmV0dXJuIGEueCAqIGIueCArIGEu
eSAqIGIueTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0g
YQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBiDQogKiBAcmV0dXJuIHtu
dW1iZXJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Dcm9zc1ZWID0gZnVuY3Rpb24g
KGEsIGIpIHsNCiAgcmV0dXJuIGEueCAqIGIueSAtIGEueSAqIGIueDsNCn07DQovKioNCiAqIEBw
YXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gYQ0KICogQHBhcmFtIHtudW1iZXJ9IHMN
CiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9DQogKi8NCkJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5Dcm9zc1ZGID0gZnVuY3Rpb24gKGEsIHMpIHsNCiAgcmV0dXJuIEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQocyAqIGEueSwgKC1zICogYS54KSk7DQp9Ow0KLyoqDQog
KiBAcGFyYW0ge251bWJlcn0gcw0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
fSBhDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5D
b21tb24uTWF0aC5iMk1hdGguQ3Jvc3NGViA9IGZ1bmN0aW9uIChzLCBhKSB7DQogIHJldHVybiBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KCgtcyAqIGEueSksIHMgKiBhLngpOw0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMn0gQQ0KICogQHBhcmFtIHsh
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSB2DQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1h
dGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsTVYgPSBmdW5jdGlv
biAoQSwgdikgew0KICByZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChBLmNvbDEu
eCAqIHYueCArIEEuY29sMi54ICogdi55LCBBLmNvbDEueSAqIHYueCArIEEuY29sMi55ICogdi55
KTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IEENCiAq
IEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdg0KICogQHJldHVybiB7IUJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFRN
ViA9IGZ1bmN0aW9uIChBLCB2KSB7DQogIHJldHVybiBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIu
R2V0KEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3QodiwgQS5jb2wxKSwgQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXRoLkRvdCh2LCBBLmNvbDIpKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtfSBUDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzJ9IHYNCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9DQogKi8N
CkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYID0gZnVuY3Rpb24gKFQsIHYpIHsNCiAgdmFy
IGEgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsTVYoVC5SLCB2KTsNCiAgYS54ICs9IFQu
cG9zaXRpb24ueDsNCiAgYS55ICs9IFQucG9zaXRpb24ueTsNCiAgcmV0dXJuIGE7DQp9Ow0KLyoq
DQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0gVA0KICogQHBhcmFt
IHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSB2DQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsWFQgPSBmdW5j
dGlvbiAoVCwgdikgew0KICB2YXIgYSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFj
dFZWKHYsIFQucG9zaXRpb24pOw0KICB2YXIgdFggPSAoYS54ICogVC5SLmNvbDEueCArIGEueSAq
IFQuUi5jb2wxLnkpOw0KICBhLnkgPSAoYS54ICogVC5SLmNvbDIueCArIGEueSAqIFQuUi5jb2wy
LnkpOw0KICBhLnggPSB0WDsNCiAgcmV0dXJuIGE7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzJ9IGENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMn0gYg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94
MkQuQ29tbW9uLk1hdGguYjJNYXRoLkFkZFZWID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgcmV0dXJu
IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoYS54ICsgYi54LCBhLnkgKyBiLnkpOw0KfTsN
Ci8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBhDQogKiBAcGFyYW0g
eyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGINCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWID0g
ZnVuY3Rpb24gKGEsIGIpIHsNCiAgcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQo
YS54IC0gYi54LCBhLnkgLSBiLnkpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMyfSBhDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGIN
CiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkRpc3Rh
bmNlID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgdmFyIGNYID0gYS54IC0gYi54Ow0KICB2YXIgY1kg
PSBhLnkgLSBiLnk7DQogIHJldHVybiBNYXRoLnNxcnQoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
LkRpc3RhbmNlU3F1YXJlZChhLGIpKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMn0gYQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBi
DQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5EaXN0
YW5jZVNxdWFyZWQgPSBmdW5jdGlvbiAoYSwgYikgew0KICB2YXIgY1ggPSBhLnggLSBiLng7DQog
IHZhciBjWSA9IGEueSAtIGIueTsNCiAgcmV0dXJuIChjWCAqIGNYICsgY1kgKiBjWSk7DQp9Ow0K
LyoqDQogKiBAcGFyYW0ge251bWJlcn0gcw0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyfSBhDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpC
b3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsRlYgPSBmdW5jdGlvbiAocywgYSkgew0KICByZXR1
cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChzICogYS54LCBzICogYS55KTsNCn07DQov
KioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IEENCiAqIEBwYXJhbSB7
IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IEINCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24u
TWF0aC5iMk1hdDIyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQWRkTU0gPSBmdW5j
dGlvbiAoQSwgQikgew0KICByZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5Gcm9tVlYo
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkFkZFZWKEEuY29sMSwgQi5jb2wxKSwgQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLkFkZFZWKEEuY29sMiwgQi5jb2wyKSk7DQp9Ow0KLyoqDQogKiBAcGFy
YW0geyFCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyfSBBDQogKiBAcGFyYW0geyFCb3gyRC5Db21t
b24uTWF0aC5iMk1hdDIyfSBCDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJNYXQy
Mn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bE1NID0gZnVuY3Rpb24gKEEsIEIp
IHsNCiAgcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIuRnJvbVZWKEJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5NdWxNVihBLCBCLmNvbDEpLCBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGgu
TXVsTVYoQSwgQi5jb2wyKSk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0
aC5iMk1hdDIyfSBBDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyfSBCDQog
KiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMn0NCiAqLw0KQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXRoLk11bFRNTSA9IGZ1bmN0aW9uIChBLCBCKSB7DQogIHZhciBjMSA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkRvdChBLmNv
bDEsIEIuY29sMSksIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3QoQS5jb2wyLCBCLmNvbDEp
KTsNCiAgdmFyIGMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChCb3gyRC5Db21tb24u
TWF0aC5iMk1hdGguRG90KEEuY29sMSwgQi5jb2wyKSwgQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
LkRvdChBLmNvbDIsIEIuY29sMikpOw0KICByZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQy
Mi5Gcm9tVlYoYzEsIGMyKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMn0gYQ0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0K
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkFic1YgPSBmdW5jdGlvbiAoYSkgew0KICByZXR1cm4g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChNYXRoLmFicyhhLngpLCBNYXRoLmFicyhhLnkp
KTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IEENCiAq
IEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyfQ0KICovDQpCb3gyRC5Db21tb24u
TWF0aC5iMk1hdGguQWJzTSA9IGZ1bmN0aW9uIChBKSB7DQogIHJldHVybiBCb3gyRC5Db21tb24u
TWF0aC5iMk1hdDIyLkZyb21WVihCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQWJzVihBLmNvbDEp
LCBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQWJzVihBLmNvbDIpKTsNCn07DQovKioNCiAqIEBw
YXJhbSB7bnVtYmVyfSBhDQogKiBAcGFyYW0ge251bWJlcn0gbG93DQogKiBAcGFyYW0ge251bWJl
cn0gaGlnaA0KICogQHJldHVybiB7bnVtYmVyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1h
dGguQ2xhbXAgPSBmdW5jdGlvbiAoYSwgbG93LCBoaWdoKSB7DQogIHJldHVybiBhIDwgbG93ID8g
bG93IDogYSA+IGhpZ2ggPyBoaWdoIDogYTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNv
bW1vbi5NYXRoLmIyVmVjMn0gYQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
fSBsb3cNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gaGlnaA0KICogQHJl
dHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGgu
YjJNYXRoLkNsYW1wViA9IGZ1bmN0aW9uIChhLCBsb3csIGhpZ2gpIHsNCgl2YXIgeCA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyTWF0aC5DbGFtcChhLngsIGxvdy54LCBoaWdoLngpOw0KCXZhciB5ID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNsYW1wKGEueSwgbG93LnksIGhpZ2gueSk7DQogIHJl
dHVybiBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KHgsIHkpOw0KfTsNCi8qKg0KICogQGNv
bnN0cnVjdG9yDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIgPSBmdW5jdGlvbigpIHsN
Cgl0aGlzLmNvbDEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMu
Y29sMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5TZXRJZGVu
dGl0eSgpOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlDQogKiBAcmV0dXJuIHsh
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXQy
Mi5Gcm9tQW5nbGUgPSBmdW5jdGlvbihhbmdsZSkgew0KCXZhciBtYXQgPSBuZXcgQm94MkQuQ29t
bW9uLk1hdGguYjJNYXQyMigpOw0KCW1hdC5TZXQoYW5nbGUpOw0KCXJldHVybiBtYXQ7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGMxDQogKiBAcGFyYW0g
eyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGMyDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXQyMn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5Gcm9tVlYgPSBm
dW5jdGlvbihjMSwgYzIpIHsNCgl2YXIgbWF0ID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
MjIoKTsNCgltYXQuU2V0VlYoYzEsIGMyKTsNCglyZXR1cm4gbWF0Ow0KfTsNCi8qKg0KICogQHBh
cmFtIHtudW1iZXJ9IGFuZ2xlDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIucHJvdG90
eXBlLlNldCA9IGZ1bmN0aW9uKGFuZ2xlKSB7DQoJdmFyIGMgPSBNYXRoLmNvcyhhbmdsZSk7DQoJ
dmFyIHMgPSBNYXRoLnNpbihhbmdsZSk7DQoJdGhpcy5jb2wxLlNldChjLCBzKTsNCgl0aGlzLmNv
bDIuU2V0KC1zLCBjKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMn0gYzENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gYzINCiAqLw0K
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5wcm90b3R5cGUuU2V0VlYgPSBmdW5jdGlvbihjMSwg
YzIpIHsNCgl0aGlzLmNvbDEuU2V0VihjMSk7DQoJdGhpcy5jb2wyLlNldFYoYzIpOw0KfTsNCi8q
Kg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9DQogKi8NCkJveDJELkNv
bW1vbi5NYXRoLmIyTWF0MjIucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHsNCgl2YXIgbWF0
ID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIoKTsNCgltYXQuU2V0TSh0aGlzKTsNCgly
ZXR1cm4gbWF0Ow0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJNYXQy
Mn0gbQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyLnByb3RvdHlwZS5TZXRNID0gZnVu
Y3Rpb24obSkgew0KCXRoaXMuY29sMS5TZXRWKG0uY29sMSk7DQoJdGhpcy5jb2wyLlNldFYobS5j
b2wyKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IG0N
CiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5wcm90b3R5cGUuQWRkTSA9IGZ1bmN0aW9u
KG0pIHsNCgl0aGlzLmNvbDEuQWRkKG0uY29sMSk7DQoJdGhpcy5jb2wyLkFkZChtLmNvbDIpOw0K
fTsNCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIucHJvdG90eXBlLlNldElkZW50aXR5ID0gZnVu
Y3Rpb24oKSB7DQoJdGhpcy5jb2wxLlNldCgxLCAwKTsNCgl0aGlzLmNvbDIuU2V0KDAsIDEpOw0K
fTsNCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlv
bigpIHsNCgl0aGlzLmNvbDEuU2V0KDAsIDApOw0KCXRoaXMuY29sMi5TZXQoMCwgMCk7DQp9Ow0K
LyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIu
cHJvdG90eXBlLkdldEFuZ2xlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIE1hdGguYXRhbjIodGhp
cy5jb2wxLnksIHRoaXMuY29sMS54KTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyTWF0MjJ9IG91dA0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0
MjJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIucHJvdG90eXBlLkdldEludmVyc2Ug
PSBmdW5jdGlvbihvdXQpIHsNCgl2YXIgZGV0ID0gdGhpcy5jb2wxLnggKiB0aGlzLmNvbDIueSAt
IHRoaXMuY29sMi54ICogdGhpcy5jb2wxLnk7DQoJaWYgKGRldCAhPT0gMCkgew0KCQlkZXQgPSAx
IC8gZGV0Ow0KCX0NCglvdXQuY29sMS54ID0gZGV0ICogdGhpcy5jb2wyLnk7DQoJb3V0LmNvbDIu
eCA9IC1kZXQgKiB0aGlzLmNvbDIueDsNCglvdXQuY29sMS55ID0gLWRldCAqIHRoaXMuY29sMS55
Ow0KCW91dC5jb2wyLnkgPSBkZXQgKiB0aGlzLmNvbDEueDsNCglyZXR1cm4gb3V0Ow0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBvdXQNCiAqIEBwYXJhbSB7
bnVtYmVyfSBiWA0KICogQHBhcmFtIHtudW1iZXJ9IGJZDQogKiBAcmV0dXJuIHshQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyLnByb3RvdHlw
ZS5Tb2x2ZSA9IGZ1bmN0aW9uKG91dCwgYlgsIGJZKSB7DQoJdmFyIGRldCA9IHRoaXMuY29sMS54
ICogdGhpcy5jb2wyLnkgLSB0aGlzLmNvbDIueCAqIHRoaXMuY29sMS55Ow0KCWlmIChkZXQgIT09
IDApIHsNCgkJZGV0ID0gMSAvIGRldDsNCgl9DQoJb3V0LnggPSBkZXQgKiAodGhpcy5jb2wyLnkg
KiBiWCAtIHRoaXMuY29sMi54ICogYlkpOw0KCW91dC55ID0gZGV0ICogKHRoaXMuY29sMS54ICog
YlkgLSB0aGlzLmNvbDEueSAqIGJYKTsNCglyZXR1cm4gb3V0Ow0KfTsNCkJveDJELkNvbW1vbi5N
YXRoLmIyTWF0MjIucHJvdG90eXBlLkFicyA9IGZ1bmN0aW9uKCkgew0KCXRoaXMuY29sMS5BYnMo
KTsNCgl0aGlzLmNvbDIuQWJzKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzM9fSBjMQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzPX0g
YzINCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMz19IGMzDQogKiBAY29uc3Ry
dWN0b3INCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXQzMyA9IGZ1bmN0aW9uKGMxLCBjMiwg
YzMpIHsNCgl0aGlzLmNvbDEgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzKDAsIDAsIDAp
Ow0KCXRoaXMuY29sMiA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMoMCwgMCwgMCk7DQoJ
dGhpcy5jb2wzID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMygwLCAwLCAwKTsNCglpZiAo
YzEpIHsNCgkJdGhpcy5jb2wxLlNldFYoYzEpOw0KCX0NCglpZiAoYzIpIHsNCgkJdGhpcy5jb2wy
LlNldFYoYzIpOw0KCX0NCglpZiAoYzMpIHsNCgkJdGhpcy5jb2wzLlNldFYoYzMpOw0KCX0NCn07
DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjM30gYzENCiAqIEBwYXJh
bSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjM30gYzINCiAqIEBwYXJhbSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjM30gYzMNCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJNYXQzMy5wcm90b3R5
cGUuU2V0VlZWID0gZnVuY3Rpb24oYzEsIGMyLCBjMykgew0KCXRoaXMuY29sMS5TZXRWKGMxKTsN
Cgl0aGlzLmNvbDIuU2V0VihjMik7DQoJdGhpcy5jb2wzLlNldFYoYzMpOw0KfTsNCi8qKg0KICog
QHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyTWF0MzN9DQogKi8NCkJveDJELkNvbW1vbi5N
YXRoLmIyTWF0MzMucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gbmV3IEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0MzModGhpcy5jb2wxLCB0aGlzLmNvbDIsIHRoaXMuY29sMyk7
DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMk1hdDMzfSBtDQogKi8N
CkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MzMucHJvdG90eXBlLlNldE0gPSBmdW5jdGlvbihtKSB7
DQoJdGhpcy5jb2wxLlNldFYobS5jb2wxKTsNCgl0aGlzLmNvbDIuU2V0VihtLmNvbDIpOw0KCXRo
aXMuY29sMy5TZXRWKG0uY29sMyk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24u
TWF0aC5iMk1hdDMzfSBtDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MzMucHJvdG90eXBl
LkFkZE0gPSBmdW5jdGlvbihtKSB7DQoJdGhpcy5jb2wxLnggKz0gbS5jb2wxLng7DQoJdGhpcy5j
b2wxLnkgKz0gbS5jb2wxLnk7DQoJdGhpcy5jb2wxLnogKz0gbS5jb2wxLno7DQoJdGhpcy5jb2wy
LnggKz0gbS5jb2wyLng7DQoJdGhpcy5jb2wyLnkgKz0gbS5jb2wyLnk7DQoJdGhpcy5jb2wyLnog
Kz0gbS5jb2wyLno7DQoJdGhpcy5jb2wzLnggKz0gbS5jb2wzLng7DQoJdGhpcy5jb2wzLnkgKz0g
bS5jb2wzLnk7DQoJdGhpcy5jb2wzLnogKz0gbS5jb2wzLno7DQp9Ow0KQm94MkQuQ29tbW9uLk1h
dGguYjJNYXQzMy5wcm90b3R5cGUuU2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHsNCgl0aGlzLmNv
bDEuU2V0KDEsMCwwKTsNCgl0aGlzLmNvbDIuU2V0KDAsMSwwKTsNCgl0aGlzLmNvbDMuU2V0KDAs
MCwxKTsNCn07DQpCb3gyRC5Db21tb24uTWF0aC5iMk1hdDMzLnByb3RvdHlwZS5TZXRaZXJvID0g
ZnVuY3Rpb24oKSB7DQoJdGhpcy5jb2wxLlNldCgwLDAsMCk7DQoJdGhpcy5jb2wyLlNldCgwLDAs
MCk7DQoJdGhpcy5jb2wzLlNldCgwLDAsMCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5D
b21tb24uTWF0aC5iMlZlYzJ9IG91dA0KICogQHBhcmFtIHtudW1iZXJ9IGJYDQogKiBAcGFyYW0g
e251bWJlcn0gYlkNCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9DQogKi8N
CkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MzMucHJvdG90eXBlLlNvbHZlMjIgPSBmdW5jdGlvbihv
dXQsIGJYLCBiWSkgew0KCXZhciBhMTEgPSB0aGlzLmNvbDEueDsNCgl2YXIgYTEyID0gdGhpcy5j
b2wyLng7DQoJdmFyIGEyMSA9IHRoaXMuY29sMS55Ow0KCXZhciBhMjIgPSB0aGlzLmNvbDIueTsN
Cgl2YXIgZGV0ID0gYTExICogYTIyIC0gYTEyICogYTIxOw0KCWlmIChkZXQgIT0gMC4wKSB7DQoJ
CWRldCA9IDEuMCAvIGRldDsNCgl9DQoJb3V0LnggPSBkZXQgKiAoYTIyICogYlggLSBhMTIgKiBi
WSk7DQoJb3V0LnkgPSBkZXQgKiAoYTExICogYlkgLSBhMjEgKiBiWCk7DQoJcmV0dXJuIG91dDsN
Cn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjM30gb3V0DQogKiBA
cGFyYW0ge251bWJlcn0gYlgNCiAqIEBwYXJhbSB7bnVtYmVyfSBiWQ0KICogQHBhcmFtIHtudW1i
ZXJ9IGJaDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzfQ0KICovDQpCb3gy
RC5Db21tb24uTWF0aC5iMk1hdDMzLnByb3RvdHlwZS5Tb2x2ZTMzID0gZnVuY3Rpb24ob3V0LCBi
WCwgYlksIGJaKSB7DQoJdmFyIGExMSA9IHRoaXMuY29sMS54Ow0KCXZhciBhMjEgPSB0aGlzLmNv
bDEueTsNCgl2YXIgYTMxID0gdGhpcy5jb2wxLno7DQoJdmFyIGExMiA9IHRoaXMuY29sMi54Ow0K
CXZhciBhMjIgPSB0aGlzLmNvbDIueTsNCgl2YXIgYTMyID0gdGhpcy5jb2wyLno7DQoJdmFyIGEx
MyA9IHRoaXMuY29sMy54Ow0KCXZhciBhMjMgPSB0aGlzLmNvbDMueTsNCgl2YXIgYTMzID0gdGhp
cy5jb2wzLno7DQoJdmFyIGRldCA9IGExMSAqIChhMjIgKiBhMzMgLSBhMzIgKiBhMjMpICsgYTIx
ICogKGEzMiAqIGExMyAtIGExMiAqIGEzMykgKyBhMzEgKiAoYTEyICogYTIzIC0gYTIyICogYTEz
KTsNCglpZiAoZGV0ICE9IDAuMCkgew0KCQlkZXQgPSAxLjAgLyBkZXQ7DQoJfQ0KCW91dC54ID0g
ZGV0ICogKGJYICogKGEyMiAqIGEzMyAtIGEzMiAqIGEyMykgKyBiWSAqIChhMzIgKiBhMTMgLSBh
MTIgKiBhMzMpICsgYlogKiAoYTEyICogYTIzIC0gYTIyICogYTEzKSk7DQoJb3V0LnkgPSBkZXQg
KiAoYTExICogKGJZICogYTMzIC0gYlogKiBhMjMpICsgYTIxICogKGJaICogYTEzIC0gYlggKiBh
MzMpICsgYTMxICogKGJYICogYTIzIC0gYlkgKiBhMTMpKTsNCglvdXQueiA9IGRldCAqIChhMTEg
KiAoYTIyICogYlogLSBhMzIgKiBiWSkgKyBhMjEgKiAoYTMyICogYlggLSBhMTIgKiBiWikgKyBh
MzEgKiAoYTEyICogYlkgLSBhMjIgKiBiWCkpOw0KCXJldHVybiBvdXQ7DQp9DQovKioNCiAqIEBj
b25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMlN3ZWVwID0gZnVuY3Rpb24oKSB7
DQoJdGhpcy5sb2NhbENlbnRlciA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7
DQoJdGhpcy5jMCA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5j
ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCn07DQpCb3gyRC5Db21tb24u
TWF0aC5iMlN3ZWVwLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikgew0KCXRoaXMubG9j
YWxDZW50ZXIuU2V0VihvdGhlci5sb2NhbENlbnRlcik7DQoJdGhpcy5jMC5TZXRWKG90aGVyLmMw
KTsNCgl0aGlzLmMuU2V0VihvdGhlci5jKTsNCgl0aGlzLmEwID0gb3RoZXIuYTA7DQoJdGhpcy5h
ID0gb3RoZXIuYTsNCgl0aGlzLnQwID0gb3RoZXIudDA7DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGgu
YjJTd2VlcC5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkgew0KCXZhciBjb3B5ID0gbmV3IEJv
eDJELkNvbW1vbi5NYXRoLmIyU3dlZXAoKTsNCgljb3B5LmxvY2FsQ2VudGVyLlNldFYodGhpcy5s
b2NhbENlbnRlcik7DQoJY29weS5jMC5TZXRWKHRoaXMuYzApOw0KCWNvcHkuYy5TZXRWKHRoaXMu
Yyk7DQoJY29weS5hMCA9IHRoaXMuYTA7DQoJY29weS5hID0gdGhpcy5hOw0KCWNvcHkudDAgPSB0
aGlzLnQwOw0KCXJldHVybiBjb3B5Ow0KfTsNCkJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXAucHJv
dG90eXBlLkdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uKHhmLCBhbHBoYSkgew0KCWlmIChhbHBoYSA9
PT0gdW5kZWZpbmVkKSBhbHBoYSA9IDA7DQoJeGYucG9zaXRpb24ueCA9ICgxLjAgLSBhbHBoYSkg
KiB0aGlzLmMwLnggKyBhbHBoYSAqIHRoaXMuYy54Ow0KCXhmLnBvc2l0aW9uLnkgPSAoMS4wIC0g
YWxwaGEpICogdGhpcy5jMC55ICsgYWxwaGEgKiB0aGlzLmMueTsNCgl2YXIgYW5nbGUgPSAoMS4w
IC0gYWxwaGEpICogdGhpcy5hMCArIGFscGhhICogdGhpcy5hOw0KCXhmLlIuU2V0KGFuZ2xlKTsN
Cgl2YXIgdE1hdCA9IHhmLlI7DQoJeGYucG9zaXRpb24ueCAtPSAodE1hdC5jb2wxLnggKiB0aGlz
LmxvY2FsQ2VudGVyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubG9jYWxDZW50ZXIueSk7DQoJeGYu
cG9zaXRpb24ueSAtPSAodE1hdC5jb2wxLnkgKiB0aGlzLmxvY2FsQ2VudGVyLnggKyB0TWF0LmNv
bDIueSAqIHRoaXMubG9jYWxDZW50ZXIueSk7DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGguYjJTd2Vl
cC5wcm90b3R5cGUuQWR2YW5jZSA9IGZ1bmN0aW9uKHQpIHsNCglpZiAodCA9PT0gdW5kZWZpbmVk
KSB0ID0gMDsNCglpZiAodGhpcy50MCA8IHQgJiYgMS4wIC0gdGhpcy50MCA+IE51bWJlci5NSU5f
VkFMVUUpIHsNCgkJdmFyIGFscGhhID0gKHQgLSB0aGlzLnQwKSAvICgxLjAgLSB0aGlzLnQwKTsN
CgkJdGhpcy5jMC54ID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYzAueCArIGFscGhhICogdGhpcy5j
Lng7DQoJCXRoaXMuYzAueSA9ICgxLjAgLSBhbHBoYSkgKiB0aGlzLmMwLnkgKyBhbHBoYSAqIHRo
aXMuYy55Ow0KCQl0aGlzLmEwID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYTAgKyBhbHBoYSAqIHRo
aXMuYTsNCgkJdGhpcy50MCA9IHQ7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyPX0gcG9zDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMk1h
dDIyPX0gcg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNm
b3JtID0gZnVuY3Rpb24ocG9zLCByKSB7DQoJdGhpcy5wb3NpdGlvbiA9IEJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5SID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIy
TWF0MjIoKTsNCglpZiAocG9zKSB7DQoJCXRoaXMucG9zaXRpb24uU2V0Vihwb3MpOw0KCX0NCglp
ZiAocikgew0KCQl0aGlzLlIuU2V0TShyKTsNCgl9DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGguYjJU
cmFuc2Zvcm0ucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihwb3MsIHIpIHsNCgl0aGlz
LnBvc2l0aW9uLlNldFYocG9zKTsNCgl0aGlzLlIuU2V0TShyKTsNCn07DQpCb3gyRC5Db21tb24u
TWF0aC5iMlRyYW5zZm9ybS5wcm90b3R5cGUuU2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHsNCgl0
aGlzLnBvc2l0aW9uLlNldFplcm8oKTsNCgl0aGlzLlIuU2V0SWRlbnRpdHkoKTsNCn07DQpCb3gy
RC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybS5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oeCkgew0K
CXRoaXMucG9zaXRpb24uU2V0Vih4LnBvc2l0aW9uKTsNCgl0aGlzLlIuU2V0TSh4LlIpOw0KfTsN
CkJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtLnByb3RvdHlwZS5HZXRBbmdsZSA9IGZ1bmN0
aW9uKCkgew0KCXJldHVybiBNYXRoLmF0YW4yKHRoaXMuUi5jb2wxLnksIHRoaXMuUi5jb2wxLngp
Ow0KfTsNCi8qKg0KICogQHByaXZhdGUNCiAqIEBwYXJhbSB7bnVtYmVyfSB4DQogKiBAcGFyYW0g
e251bWJlcn0geQ0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVj
MiA9IGZ1bmN0aW9uKHgsIHkpIHsNCgl0aGlzLnggPSB4Ow0KCXRoaXMueSA9IHk7DQp9Ow0KLyoq
DQogKiBAcHJpdmF0ZQ0KICogQHR5cGUge0FycmF5LjwhQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
Pn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLl9mcmVlQ2FjaGUgPSBbXTsNCi8qKg0K
ICogQHBhcmFtIHtudW1iZXJ9IHgNCiAqIEBwYXJhbSB7bnVtYmVyfSB5DQogKiBAcmV0dXJuIHsh
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIu
R2V0ID0gZnVuY3Rpb24oeCwgeSkgew0KCWlmIChCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuX2Zy
ZWVDYWNoZS5sZW5ndGggPiAwKSB7DQoJCXZhciB2ZWMgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuX2ZyZWVDYWNoZS5wb3AoKTsNCgkJdmVjLlNldCh4LCB5KTsNCgkJcmV0dXJuIHZlYzsNCgl9
DQoJcmV0dXJuIG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIoeCwgeSk7DQp9Ow0KLyoqDQog
KiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IHZlYw0KICovDQpCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuRnJlZSA9IGZ1bmN0aW9uKHZlYykgew0KCUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5fZnJlZUNhY2hlLnB1c2godmVjKTsNCn07DQpCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlvbigpIHsNCgl0aGlzLnggPSAwLjA7DQoJdGhp
cy55ID0gMC4wOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IHgNCiAqIEBwYXJhbSB7bnVt
YmVyfSB5DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuU2V0ID0gZnVu
Y3Rpb24oeCwgeSkgew0KCXRoaXMueCA9IHg7DQoJdGhpcy55ID0geTsNCn07DQovKioNCiAqIEBw
YXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdg0KICovDQpCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIucHJvdG90eXBlLlNldFYgPSBmdW5jdGlvbih2KSB7DQoJdGhpcy54ID0gdi54Ow0K
CXRoaXMueSA9IHYueTsNCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0aC5i
MlZlYzJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuR2V0TmVnYXRp
dmUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgo
LXRoaXMueCksICgtdGhpcy55KSk7DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3Rv
dHlwZS5OZWdhdGl2ZVNlbGYgPSBmdW5jdGlvbigpIHsNCgl0aGlzLnggPSAoLXRoaXMueCk7DQoJ
dGhpcy55ID0gKC10aGlzLnkpOw0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5Db3B5
ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQodGhp
cy54LCB0aGlzLnkpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyfSB2DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuQWRkID0gZnVu
Y3Rpb24odikgew0KCXRoaXMueCArPSB2Lng7DQoJdGhpcy55ICs9IHYueTsNCn07DQovKioNCiAq
IEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdg0KICovDQpCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzIucHJvdG90eXBlLlN1YnRyYWN0ID0gZnVuY3Rpb24odikgew0KCXRoaXMueCAt
PSB2Lng7DQoJdGhpcy55IC09IHYueTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBhDQog
Ki8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuTXVsdGlwbHkgPSBmdW5jdGlv
bihhKSB7DQoJdGhpcy54ICo9IGE7DQoJdGhpcy55ICo9IGE7DQp9Ow0KLyoqDQogKiBAcGFyYW0g
e0JveDJELkNvbW1vbi5NYXRoLmIyTWF0MjJ9IEENCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLnByb3RvdHlwZS5NdWxNID0gZnVuY3Rpb24oQSkgew0KCXZhciB0WCA9IHRoaXMueDsNCgl0
aGlzLnggPSBBLmNvbDEueCAqIHRYICsgQS5jb2wyLnggKiB0aGlzLnk7DQoJdGhpcy55ID0gQS5j
b2wxLnkgKiB0WCArIEEuY29sMi55ICogdGhpcy55Ow0KfTsNCi8qKg0KICogQHBhcmFtIHtCb3gy
RC5Db21tb24uTWF0aC5iMk1hdDIyfSBBDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5w
cm90b3R5cGUuTXVsVE0gPSBmdW5jdGlvbihBKSB7DQoJdmFyIHRYID0gdGhpcy54ICogQS5jb2wx
LnggKyB0aGlzLnkgKiBBLmNvbDEueTsNCgl0aGlzLnkgPSB0aGlzLnggKiBBLmNvbDIueCArIHRo
aXMueSAqIEEuY29sMi55Ow0KCXRoaXMueCA9IHRYOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1i
ZXJ9IHMNCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5Dcm9zc1ZGID0g
ZnVuY3Rpb24ocykgew0KCXZhciB0WCA9IHRoaXMueDsNCgl0aGlzLnggPSBzICogdGhpcy55Ow0K
CXRoaXMueSA9ICgtcyAqIHRYKTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBzDQogKi8N
CkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuQ3Jvc3NGViA9IGZ1bmN0aW9uKHMp
IHsNCgl2YXIgdFggPSB0aGlzLng7DQoJdGhpcy54ID0gKC1zICogdGhpcy55KTsNCgl0aGlzLnkg
PSBzICogdFg7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9
IGINCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5NaW5WID0gZnVuY3Rp
b24oYikgew0KCXRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgYi54KTsNCgl0aGlzLnkgPSBNYXRo
Lm1pbih0aGlzLnksIGIueSk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzJ9IGINCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5NYXhW
ID0gZnVuY3Rpb24oYikgew0KCXRoaXMueCA9IE1hdGgubWF4KHRoaXMueCwgYi54KTsNCgl0aGlz
LnkgPSBNYXRoLm1heCh0aGlzLnksIGIueSk7DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
LnByb3RvdHlwZS5BYnMgPSBmdW5jdGlvbigpIHsNCgl0aGlzLnggPSBNYXRoLmFicyh0aGlzLngp
Ow0KCXRoaXMueSA9IE1hdGguYWJzKHRoaXMueSk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1i
ZXJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5wcm90b3R5cGUuTGVuZ3RoID0gZnVu
Y3Rpb24oKSB7DQoJcmV0dXJuIE1hdGguc3FydCh0aGlzLkxlbmd0aFNxdWFyZWQoKSk7DQp9Ow0K
LyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5w
cm90b3R5cGUuTGVuZ3RoU3F1YXJlZCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiAodGhpcy54ICog
dGhpcy54ICsgdGhpcy55ICogdGhpcy55KTsNCn07DQovKioNCiAqIEByZXR1cm4ge251bWJlcn0N
CiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5Ob3JtYWxpemUgPSBmdW5j
dGlvbigpIHsNCgl2YXIgbGVuZ3RoID0gdGhpcy5MZW5ndGgoKTsNCglpZiAobGVuZ3RoIDwgTnVt
YmVyLk1JTl9WQUxVRSkgew0KCQlyZXR1cm4gMC4wOw0KCX0NCgl2YXIgaW52TGVuZ3RoID0gMS4w
IC8gbGVuZ3RoOw0KCXRoaXMueCAqPSBpbnZMZW5ndGg7DQoJdGhpcy55ICo9IGludkxlbmd0aDsN
CglyZXR1cm4gbGVuZ3RoOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLnByb3RvdHlwZS5Jc1ZhbGlkID0gZnVuY3Rpb24gKCkgew0K
ICByZXR1cm4gaXNGaW5pdGUodGhpcy54KSAmJiBpc0Zpbml0ZSh0aGlzLnkpOw0KfTsNCi8qKg0K
ICogQHBhcmFtIHtudW1iZXJ9IHgNCiAqIEBwYXJhbSB7bnVtYmVyfSB5DQogKiBAcGFyYW0ge251
bWJlcn0geg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMyA9
IGZ1bmN0aW9uKHgsIHksIHopIHsNCgl0aGlzLnggPSB4Ow0KCXRoaXMueSA9IHk7DQoJdGhpcy56
ID0gejsNCn07DQpCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMucHJvdG90eXBlLlNldFplcm8gPSBm
dW5jdGlvbigpIHsNCgl0aGlzLnggPSAwOw0KCXRoaXMueSA9IDA7DQoJdGhpcy56ID0gMDsNCn07
DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSB4DQogKiBAcGFyYW0ge251bWJlcn0geQ0KICogQHBh
cmFtIHtudW1iZXJ9IHoNCiAqLw0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzLnByb3RvdHlwZS5T
ZXQgPSBmdW5jdGlvbih4LCB5LCB6KSB7DQoJdGhpcy54ID0geDsNCgl0aGlzLnkgPSB5Ow0KCXRo
aXMueiA9IHo7DQp9DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjM30g
dg0KICovDQpCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMucHJvdG90eXBlLlNldFYgPSBmdW5jdGlv
bih2KSB7DQoJdGhpcy54ID0gdi54Ow0KCXRoaXMueSA9IHYueTsNCgl0aGlzLnogPSB2Lno7DQp9
Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzfQ0KICovDQpCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzMucHJvdG90eXBlLkdldE5lZ2F0aXZlID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMoKC10aGlzLngpLCAoLXRoaXMu
eSksICgtdGhpcy56KSk7DQp9Ow0KQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzLnByb3RvdHlwZS5O
ZWdhdGl2ZVNlbGYgPSBmdW5jdGlvbigpIHsNCgl0aGlzLnggPSAoLXRoaXMueCk7DQoJdGhpcy55
ID0gKC10aGlzLnkpOw0KCXRoaXMueiA9ICgtdGhpcy56KTsNCn07DQovKioNCiAqIEByZXR1cm4g
eyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzN9DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVj
My5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiBuZXcgQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopOw0KfTsNCi8qKg0KICogQHBhcmFt
IHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzfSB2DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMy5wcm90b3R5cGUuQWRkID0gZnVuY3Rpb24odikgew0KCXRoaXMueCArPSB2Lng7DQoJdGhp
cy55ICs9IHYueTsNCgl0aGlzLnogKz0gdi56Ow0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMzfSB2DQogKi8NCkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMy5wcm90
b3R5cGUuU3VidHJhY3QgPSBmdW5jdGlvbih2KSB7DQoJdGhpcy54IC09IHYueDsNCgl0aGlzLnkg
LT0gdi55Ow0KCXRoaXMueiAtPSB2Lno7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gYQ0K
ICovDQpCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMucHJvdG90eXBlLk11bHRpcGx5ID0gZnVuY3Rp
b24oYSkgew0KCXRoaXMueCAqPSBhOw0KCXRoaXMueSAqPSBhOw0KCXRoaXMueiAqPSBhOw0KfTsN
Ci8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFw
ZSA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubV9yYWRpdXMgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5n
cy5iMl9saW5lYXJTbG9wOw0KfTsNCi8qKg0KICogQHJldHVybiB7c3RyaW5nfQ0KICovDQpCb3gy
RC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUucHJvdG90eXBlLkdldFR5cGVOYW1lID0gZnVuY3Rp
b24oKXt9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBl
fQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUucHJvdG90eXBlLkNvcHkgPSBm
dW5jdGlvbigpe307DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJT
aGFwZX0gb3RoZXINCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlLnByb3RvdHlw
ZS5TZXQgPSBmdW5jdGlvbihvdGhlcikgew0KCXRoaXMubV9yYWRpdXMgPSBvdGhlci5tX3JhZGl1
czsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtfSB4
Zg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwDQogKiBAcmV0dXJuIHti
b29sZWFufQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUucHJvdG90eXBlLlRl
c3RQb2ludCA9IGZ1bmN0aW9uKCl7fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9u
LmIyUmF5Q2FzdE91dHB1dH0gb3V0cHV0DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJS
YXlDYXN0SW5wdXR9IGlucHV0DQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5z
Zm9ybX0gdHJhbnNmb3JtDQogKiBAcmV0dXJuIHtib29sZWFufQ0KICovDQpCb3gyRC5Db2xsaXNp
b24uU2hhcGVzLmIyU2hhcGUucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbigpe307DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkFBQkJ9IGFhYmINCiAqIEBwYXJhbSB7IUJv
eDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtfSB0cmFuc2Zvcm0NCiAqLw0KQm94MkQuQ29sbGlz
aW9uLlNoYXBlcy5iMlNoYXBlLnByb3RvdHlwZS5Db21wdXRlQUFCQiA9IGZ1bmN0aW9uKCl7fTsN
Ci8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhfSBtYXNz
RGF0YQ0KICogQHBhcmFtIHtudW1iZXJ9IGRlbnNpdHkNCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNo
YXBlcy5iMlNoYXBlLnByb3RvdHlwZS5Db21wdXRlTWFzcyA9IGZ1bmN0aW9uKCl7fTsNCi8qKg0K
ICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBub3JtYWwNCiAqIEBwYXJhbSB7
bnVtYmVyfSBvZmZzZXQNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3Jt
fSB4Zg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBjDQogKiBAcmV0dXJu
IHtudW1iZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZS5wcm90b3R5cGUu
Q29tcHV0ZVN1Ym1lcmdlZEFyZWEgPSBmdW5jdGlvbigpe307DQovKioNCiAqIEBwYXJhbSB7IUJv
eDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHl9IHByb3h5DQogKi8NCkJveDJELkNvbGxpc2lv
bi5TaGFwZXMuYjJTaGFwZS5wcm90b3R5cGUuU2V0RGlzdGFuY2VQcm94eSA9IGZ1bmN0aW9uKCl7
fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlfSBzaGFw
ZTENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtfSB0cmFuc2Zvcm0x
DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGV9IHNoYXBlMg0KICog
QHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHRyYW5zZm9ybTINCiAqIEBy
ZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZS5UZXN0
T3ZlcmxhcCA9IGZ1bmN0aW9uKHNoYXBlMSwgdHJhbnNmb3JtMSwgc2hhcGUyLCB0cmFuc2Zvcm0y
KSB7DQoJdmFyIGlucHV0ID0gbmV3IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlSW5wdXQoKTsN
CglpbnB1dC5wcm94eUEgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VQcm94eSgpOw0K
CWlucHV0LnByb3h5QS5TZXQoc2hhcGUxKTsNCglpbnB1dC5wcm94eUIgPSBuZXcgQm94MkQuQ29s
bGlzaW9uLmIyRGlzdGFuY2VQcm94eSgpOw0KCWlucHV0LnByb3h5Qi5TZXQoc2hhcGUyKTsNCglp
bnB1dC50cmFuc2Zvcm1BID0gdHJhbnNmb3JtMTsNCglpbnB1dC50cmFuc2Zvcm1CID0gdHJhbnNm
b3JtMjsNCglpbnB1dC51c2VSYWRpaSA9IHRydWU7DQoJdmFyIHNpbXBsZXhDYWNoZSA9IG5ldyBC
b3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4Q2FjaGUoKTsNCglzaW1wbGV4Q2FjaGUuY291bnQgPSAw
Ow0KCXZhciBvdXRwdXQgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VPdXRwdXQoKTsN
CglCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZS5EaXN0YW5jZShvdXRwdXQsIHNpbXBsZXhDYWNo
ZSwgaW5wdXQpOw0KCXJldHVybiBvdXRwdXQuZGlzdGFuY2UgPCAxMC4wICogTnVtYmVyLk1JTl9W
QUxVRTsNCn07DQovKioNCiAqIEBjb25zdA0KICogQHR5cGUge251bWJlcn0NCiAqLw0KQm94MkQu
Q29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlLmVfc3RhcnRzSW5zaWRlQ29sbGlkZSA9IC0xOw0KLyoq
DQogKiBAY29uc3QNCiAqIEB0eXBlIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFw
ZXMuYjJTaGFwZS5lX21pc3NDb2xsaWRlID0gMDsNCi8qKg0KICogQGNvbnN0DQogKiBAdHlwZSB7
bnVtYmVyfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUuZV9oaXRDb2xsaWRl
ID0gMTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cw0KICogQGNvbnN0cnVjdG9yDQog
KiBAZXh0ZW5kcyB7Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlfQ0KICovDQpCb3gyRC5D
b2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hhcGUgPSBmdW5jdGlvbihyYWRpdXMpIHsNCglCb3gy
RC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUuY2FsbCh0aGlzKTsNCgkvKiogQHR5cGUge251bWJl
cn0gKi8NCgl0aGlzLm1fcmFkaXVzID0gcmFkaXVzOw0KCS8qKiBAdHlwZSB7bnVtYmVyfSAqLw0K
CXRoaXMubV9yYWRpdXNTcXVhcmVkID0gcmFkaXVzICogcmFkaXVzOw0KCS8qKiBAdHlwZSB7IUJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gKi8NCgl0aGlzLm1fcCA9IEJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5HZXQoMCwgMCk7DQp9Ow0KYzJpbmhlcml0KEJveDJELkNvbGxpc2lvbi5TaGFwZXMu
YjJDaXJjbGVTaGFwZSwgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlKTsNCi8qKg0KICog
QHJldHVybiB7c3RyaW5nfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hh
cGUucHJvdG90eXBlLkdldFR5cGVOYW1lID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIEJveDJELkNv
bGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZS5OQU1FOw0KfTsNCi8qKg0KICogQHJldHVybiB7
IUJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZX0NCiAqLw0KQm94MkQuQ29sbGlz
aW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7DQoJ
dmFyIHMgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlKHRoaXMubV9y
YWRpdXMpOw0KCXMuU2V0KHRoaXMpOw0KCXJldHVybiBzOw0KfTsNCi8qKg0KICogQHBhcmFtIHsh
Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlfSBvdGhlcg0KICovDQpCb3gyRC5Db2xsaXNp
b24uU2hhcGVzLmIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKG90aGVyKSB7
DQoJQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlLnByb3RvdHlwZS5TZXQuY2FsbCh0aGlz
LCBvdGhlcik7DQoJaWYgKG90aGVyIGluc3RhbmNlb2YgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5i
MkNpcmNsZVNoYXBlKSB7DQoJCXRoaXMubV9wLlNldFYob3RoZXIubV9wKTsNCgl9DQp9Ow0KLyoq
DQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0gdHJhbnNmb3JtDQog
KiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IHANCiAqIEByZXR1cm4ge2Jvb2xl
YW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUu
VGVzdFBvaW50ID0gZnVuY3Rpb24odHJhbnNmb3JtLCBwKSB7DQoJdmFyIHRNYXQgPSB0cmFuc2Zv
cm0uUjsNCgl2YXIgZFggPSBwLnggLSAodHJhbnNmb3JtLnBvc2l0aW9uLnggKyAodHJhbnNmb3Jt
LlIuY29sMS54ICogdGhpcy5tX3AueCArIHRyYW5zZm9ybS5SLmNvbDIueCAqIHRoaXMubV9wLnkp
KTsNCgl2YXIgZFkgPSBwLnkgLSAodHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodHJhbnNmb3JtLlIu
Y29sMS55ICogdGhpcy5tX3AueCArIHRyYW5zZm9ybS5SLmNvbDIueSAqIHRoaXMubV9wLnkpKTsN
CglyZXR1cm4gKGRYICogZFggKyBkWSAqIGRZKSA8PSB0aGlzLm1fcmFkaXVzU3F1YXJlZDsNCn07
DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RPdXRwdXR9IG91dHB1
dA0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdElucHV0fSBpbnB1dA0KICog
QHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHRyYW5zZm9ybQ0KICogQHJl
dHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBl
LnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCwgdHJhbnNmb3JtKSB7
DQoJdmFyIHRNYXQgPSB0cmFuc2Zvcm0uUjsNCgl2YXIgcG9zaXRpb25YID0gdHJhbnNmb3JtLnBv
c2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnggKiB0aGlz
Lm1fcC55KTsNCgl2YXIgcG9zaXRpb25ZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5j
b2wxLnkgKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fcC55KTsNCgl2YXIgc1gg
PSBpbnB1dC5wMS54IC0gcG9zaXRpb25YOw0KCXZhciBzWSA9IGlucHV0LnAxLnkgLSBwb3NpdGlv
blk7DQoJdmFyIGIgPSAoc1ggKiBzWCArIHNZICogc1kpIC0gdGhpcy5tX3JhZGl1c1NxdWFyZWQ7
DQoJdmFyIHJYID0gaW5wdXQucDIueCAtIGlucHV0LnAxLng7DQoJdmFyIHJZID0gaW5wdXQucDIu
eSAtIGlucHV0LnAxLnk7DQoJdmFyIGMgPSAoc1ggKiByWCArIHNZICogclkpOw0KCXZhciByciA9
IChyWCAqIHJYICsgclkgKiByWSk7DQoJdmFyIHNpZ21hID0gYyAqIGMgLSByciAqIGI7DQoJaWYg
KHNpZ21hIDwgMC4wIHx8IHJyIDwgTnVtYmVyLk1JTl9WQUxVRSkgew0KCQlyZXR1cm4gZmFsc2U7
DQoJfQ0KCXZhciBhID0gKC0oYyArIE1hdGguc3FydChzaWdtYSkpKTsNCglpZiAoMC4wIDw9IGEg
JiYgYSA8PSBpbnB1dC5tYXhGcmFjdGlvbiAqIHJyKSB7DQoJCWEgLz0gcnI7DQoJCW91dHB1dC5m
cmFjdGlvbiA9IGE7DQoJCW91dHB1dC5ub3JtYWwueCA9IHNYICsgYSAqIHJYOw0KCQlvdXRwdXQu
bm9ybWFsLnkgPSBzWSArIGEgKiByWTsNCgkJb3V0cHV0Lm5vcm1hbC5Ob3JtYWxpemUoKTsNCgkJ
cmV0dXJuIHRydWU7DQoJfQ0KCXJldHVybiBmYWxzZTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJv
eDJELkNvbGxpc2lvbi5iMkFBQkJ9IGFhYmINCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVHJhbnNmb3JtfSB0cmFuc2Zvcm0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNp
cmNsZVNoYXBlLnByb3RvdHlwZS5Db21wdXRlQUFCQiA9IGZ1bmN0aW9uKGFhYmIsIHRyYW5zZm9y
bSkgew0KCXZhciB0TWF0ID0gdHJhbnNmb3JtLlI7DQoJdmFyIHBYID0gdHJhbnNmb3JtLnBvc2l0
aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1f
cC55KTsNCgl2YXIgcFkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRo
aXMubV9wLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV9wLnkpOw0KCWFhYmIubG93ZXJCb3VuZF8u
U2V0KHBYIC0gdGhpcy5tX3JhZGl1cywgcFkgLSB0aGlzLm1fcmFkaXVzKTsNCglhYWJiLnVwcGVy
Qm91bmRfLlNldChwWCArIHRoaXMubV9yYWRpdXMsIHBZICsgdGhpcy5tX3JhZGl1cyk7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyTWFzc0RhdGF9IG1hc3NE
YXRhDQogKiBAcGFyYW0ge251bWJlcn0gZGVuc2l0eQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hh
cGVzLmIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkNvbXB1dGVNYXNzID0gZnVuY3Rpb24obWFzc0Rh
dGEsIGRlbnNpdHkpIHsNCgltYXNzRGF0YS5tYXNzID0gZGVuc2l0eSAqIE1hdGguUEkgKiB0aGlz
Lm1fcmFkaXVzU3F1YXJlZDsNCgltYXNzRGF0YS5jZW50ZXIuU2V0Vih0aGlzLm1fcCk7DQoJbWFz
c0RhdGEuSSA9IG1hc3NEYXRhLm1hc3MgKiAoMC41ICogdGhpcy5tX3JhZGl1c1NxdWFyZWQgKyAo
dGhpcy5tX3AueCAqIHRoaXMubV9wLnggKyB0aGlzLm1fcC55ICogdGhpcy5tX3AueSkpOw0KfTsN
Ci8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBub3JtYWwNCiAqIEBw
YXJhbSB7bnVtYmVyfSBvZmZzZXQNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVHJh
bnNmb3JtfSB4Zg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBjDQogKiBA
cmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFw
ZS5wcm90b3R5cGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWEgPSBmdW5jdGlvbihub3JtYWwsIG9mZnNl
dCwgeGYsIGMpIHsNCgl2YXIgcCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHhmLCB0
aGlzLm1fcCk7DQoJdmFyIGwgPSAoLShCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguRG90KG5vcm1h
bCwgcCkgLSBvZmZzZXQpKTsNCglpZiAobCA8ICgtdGhpcy5tX3JhZGl1cykgKyBOdW1iZXIuTUlO
X1ZBTFVFKSB7DQoJCXJldHVybiAwOw0KCX0NCglpZiAobCA+IHRoaXMubV9yYWRpdXMpIHsNCgkJ
Yy5TZXRWKHApOw0KCQlyZXR1cm4gTWF0aC5QSSAqIHRoaXMubV9yYWRpdXNTcXVhcmVkOw0KCX0N
Cgl2YXIgbDIgPSBsICogbDsNCgl2YXIgYXJlYSA9IHRoaXMubV9yYWRpdXNTcXVhcmVkICogKE1h
dGguYXNpbihsIC8gdGhpcy5tX3JhZGl1cykgKyBNYXRoLlBJIC8gMikgKyBsICogTWF0aC5zcXJ0
KHRoaXMubV9yYWRpdXNTcXVhcmVkIC0gbDIpOw0KCXZhciBjb20gPSAoLTIgLyAzICogTWF0aC5w
b3codGhpcy5tX3JhZGl1c1NxdWFyZWQgLSBsMiwgMS41KSAvIGFyZWEpOw0KCWMueCA9IHAueCAr
IG5vcm1hbC54ICogY29tOw0KCWMueSA9IHAueSArIG5vcm1hbC55ICogY29tOw0KCXJldHVybiBh
cmVhOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VQcm94
eX0gcHJveHkNCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlLnByb3Rv
dHlwZS5TZXREaXN0YW5jZVByb3h5ID0gZnVuY3Rpb24ocHJveHkpIHsNCglwcm94eS5tX3ZlcnRp
Y2VzID0gW3RoaXMubV9wXTsNCglwcm94eS5tX2NvdW50ID0gMTsNCglwcm94eS5tX3JhZGl1cyA9
IHRoaXMubV9yYWRpdXM7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hhcGUucHJvdG90
eXBlLkdldExvY2FsUG9zaXRpb24gPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX3A7DQp9
Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IHBvc2l0aW9uDQog
Ki8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuU2V0TG9j
YWxQb3NpdGlvbiA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7DQoJdGhpcy5tX3AuU2V0Vihwb3NpdGlv
bik7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5T
aGFwZXMuYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuR2V0UmFkaXVzID0gZnVuY3Rpb24oKSB7DQoJ
cmV0dXJuIHRoaXMubV9yYWRpdXM7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gcmFkaXVz
DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuU2V0
UmFkaXVzID0gZnVuY3Rpb24ocmFkaXVzKSB7DQoJdGhpcy5tX3JhZGl1cyA9IHJhZGl1czsNCgl0
aGlzLm1fcmFkaXVzU3F1YXJlZCA9IHJhZGl1cyAqIHJhZGl1czsNCn07DQovKioNCiAqIEBjb25z
dA0KICogQHR5cGUge3N0cmluZ30NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNs
ZVNoYXBlLk5BTUUgPSAnYjJDaXJjbGVTaGFwZSc7DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICov
DQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZUNoYWluRGVmID0gZnVuY3Rpb24oKSB7DQoJ
LyoqIEB0eXBlIHtudW1iZXJ9ICovDQoJdGhpcy52ZXJ0ZXhDb3VudCA9IDA7DQoJLyoqIEB0eXBl
IHtib29sZWFufSAqLw0KCXRoaXMuaXNBTG9vcCA9IHRydWU7DQoJLyoqIEB0eXBlIHtBcnJheS48
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSAqLw0KCXRoaXMudmVydGljZXMgPSBbXTsNCn07DQov
KioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdjENCiAqIEBwYXJhbSB7
IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdjINCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVu
ZHMge0JveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZX0NCiAqLw0KQm94MkQuQ29sbGlzaW9u
LlNoYXBlcy5iMkVkZ2VTaGFwZSA9IGZ1bmN0aW9uKHYxLCB2Mikgew0KCUJveDJELkNvbGxpc2lv
bi5TaGFwZXMuYjJTaGFwZS5jYWxsKHRoaXMpOw0KCS8qKiBAdHlwZSB7Qm94MkQuQ29sbGlzaW9u
LlNoYXBlcy5iMkVkZ2VTaGFwZX0gKi8NCgl0aGlzLm1fcHJldkVkZ2UgPSBudWxsOw0KCS8qKiBA
dHlwZSB7Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZX0gKi8NCgl0aGlzLm1fbmV4
dEVkZ2UgPSBudWxsOw0KCS8qKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gKi8N
Cgl0aGlzLm1fdjEgPSB2MTsNCgkvKiogQHR5cGUgeyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9
ICovDQoJdGhpcy5tX3YyID0gdjI7DQoJLyoqIEB0eXBlIHshQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyfSAqLw0KCXRoaXMubV9kaXJlY3Rpb24gPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0
KHRoaXMubV92Mi54IC0gdGhpcy5tX3YxLngsIHRoaXMubV92Mi55IC0gdGhpcy5tX3YxLnkpOw0K
CS8qKiBAdHlwZSB7bnVtYmVyfSAqLw0KCXRoaXMubV9sZW5ndGggPSB0aGlzLm1fZGlyZWN0aW9u
Lk5vcm1hbGl6ZSgpOw0KCS8qKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gKi8N
Cgl0aGlzLm1fbm9ybWFsID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCh0aGlzLm1fZGly
ZWN0aW9uLnksIC10aGlzLm1fZGlyZWN0aW9uLngpOw0KCS8qKiBAdHlwZSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMn0gKi8NCgl0aGlzLm1fY29yZVYxID0gQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkdldCgoLUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25v
cm1hbC54IC0gdGhpcy5tX2RpcmVjdGlvbi54KSkgKyB0aGlzLm1fdjEueCwgKC1Cb3gyRC5Db21t
b24uYjJTZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueSAtIHRoaXMubV9kaXJl
Y3Rpb24ueSkpICsgdGhpcy5tX3YxLnkpOw0KCS8qKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMn0gKi8NCgl0aGlzLm1fY29yZVYyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgoLUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX3RvaVNsb3AgKiAodGhpcy5tX25vcm1hbC54
ICsgdGhpcy5tX2RpcmVjdGlvbi54KSkgKyB0aGlzLm1fdjIueCwgKC1Cb3gyRC5Db21tb24uYjJT
ZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueSArIHRoaXMubV9kaXJlY3Rpb24u
eSkpICsgdGhpcy5tX3YyLnkpOw0KCS8qKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVj
Mn0gKi8NCgl0aGlzLm1fY29ybmVyRGlyMSA9IHRoaXMubV9ub3JtYWw7DQoJLyoqIEB0eXBlIHsh
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSAqLw0KCXRoaXMubV9jb3JuZXJEaXIyID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgtdGhpcy5tX25vcm1hbC54LCAtdGhpcy5tX25vcm1hbC55
KTsNCgkvKiogQHR5cGUge2Jvb2xlYW59ICovDQoJdGhpcy5tX2Nvcm5lckNvbnZleDEgPSBmYWxz
ZTsNCgkvKiogQHR5cGUge2Jvb2xlYW59ICovDQoJdGhpcy5tX2Nvcm5lckNvbnZleDIgPSBmYWxz
ZTsNCn07DQpjMmluaGVyaXQoQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZSwgQm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlKTsNCi8qKg0KICogQHJldHVybiB7c3RyaW5nfQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRUeXBl
TmFtZSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRn
ZVNoYXBlLk5BTUU7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRy
YW5zZm9ybX0gdHJhbnNmb3JtDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9
IHANCiAqIEByZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJF
ZGdlU2hhcGUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHRyYW5zZm9ybSwgcCkgew0K
CXJldHVybiBmYWxzZTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMlJh
eUNhc3RPdXRwdXR9IG91dHB1dA0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2Fz
dElucHV0fSBpbnB1dA0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19
IHRyYW5zZm9ybQ0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNo
YXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dCwgaW5w
dXQsIHRyYW5zZm9ybSkgew0KCXZhciByWCA9IGlucHV0LnAyLnggLSBpbnB1dC5wMS54Ow0KCXZh
ciByWSA9IGlucHV0LnAyLnkgLSBpbnB1dC5wMS55Ow0KCXZhciB0TWF0ID0gdHJhbnNmb3JtLlI7
DQoJdmFyIHYxWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5t
X3YxLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV92MS55KTsNCgl2YXIgdjFZID0gdHJhbnNmb3Jt
LnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fdjEueCArIHRNYXQuY29sMi55ICog
dGhpcy5tX3YxLnkpOw0KCXZhciBuWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi55ICsgKHRNYXQuY29s
MS55ICogdGhpcy5tX3YyLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV92Mi55KSAtIHYxWTsNCgl2
YXIgblkgPSAoLSh0cmFuc2Zvcm0ucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV92
Mi54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fdjIueSkgLSB2MVgpKTsNCgl2YXIga19zbG9wID0g
MTAwLjAgKiBOdW1iZXIuTUlOX1ZBTFVFOw0KCXZhciBkZW5vbSA9ICgtKHJYICogblggKyByWSAq
IG5ZKSk7DQoJaWYgKGRlbm9tID4ga19zbG9wKSB7DQoJCXZhciBiWCA9IGlucHV0LnAxLnggLSB2
MVg7DQoJCXZhciBiWSA9IGlucHV0LnAxLnkgLSB2MVk7DQoJCXZhciBhID0gKGJYICogblggKyBi
WSAqIG5ZKTsNCgkJaWYgKDAuMCA8PSBhICYmIGEgPD0gaW5wdXQubWF4RnJhY3Rpb24gKiBkZW5v
bSkgew0KCQkJdmFyIG11MiA9ICgtclggKiBiWSkgKyByWSAqIGJYOw0KCQkJaWYgKCgta19zbG9w
ICogZGVub20pIDw9IG11MiAmJiBtdTIgPD0gZGVub20gKiAoMS4wICsga19zbG9wKSkgew0KCQkJ
CWEgLz0gZGVub207DQoJCQkJb3V0cHV0LmZyYWN0aW9uID0gYTsNCgkJCQl2YXIgbkxlbiA9IE1h
dGguc3FydChuWCAqIG5YICsgblkgKiBuWSk7DQoJCQkJb3V0cHV0Lm5vcm1hbC54ID0gblggLyBu
TGVuOw0KCQkJCW91dHB1dC5ub3JtYWwueSA9IG5ZIC8gbkxlbjsNCgkJCQlyZXR1cm4gdHJ1ZTsN
CgkJCX0NCgkJfQ0KCX0NCglyZXR1cm4gZmFsc2U7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gy
RC5Db2xsaXNpb24uYjJBQUJCfSBhYWJiDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5i
MlRyYW5zZm9ybX0gdHJhbnNmb3JtDQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdl
U2hhcGUucHJvdG90eXBlLkNvbXB1dGVBQUJCID0gZnVuY3Rpb24oYWFiYiwgdHJhbnNmb3JtKSB7
DQoJdmFyIHRNYXQgPSB0cmFuc2Zvcm0uUjsNCgl2YXIgdjFYID0gdHJhbnNmb3JtLnBvc2l0aW9u
LnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fdjEueCArIHRNYXQuY29sMi54ICogdGhpcy5tX3Yx
LnkpOw0KCXZhciB2MVkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRo
aXMubV92MS54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fdjEueSk7DQoJdmFyIHYyWCA9IHRyYW5z
Zm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3YyLnggKyB0TWF0LmNvbDIu
eCAqIHRoaXMubV92Mi55KTsNCgl2YXIgdjJZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1h
dC5jb2wxLnkgKiB0aGlzLm1fdjIueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3YyLnkpOw0KCWlm
ICh2MVggPCB2MlgpIHsNCgkJYWFiYi5sb3dlckJvdW5kXy54ID0gdjFYOw0KCQlhYWJiLnVwcGVy
Qm91bmRfLnggPSB2Mlg7DQoJfSBlbHNlIHsNCgkJYWFiYi5sb3dlckJvdW5kXy54ID0gdjJYOw0K
CQlhYWJiLnVwcGVyQm91bmRfLnggPSB2MVg7DQoJfQ0KCWlmICh2MVkgPCB2MlkpIHsNCgkJYWFi
Yi5sb3dlckJvdW5kXy55ID0gdjFZOw0KCQlhYWJiLnVwcGVyQm91bmRfLnkgPSB2Mlk7DQoJfSBl
bHNlIHsNCgkJYWFiYi5sb3dlckJvdW5kXy55ID0gdjJZOw0KCQlhYWJiLnVwcGVyQm91bmRfLnkg
PSB2MVk7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5i
Mk1hc3NEYXRhfSBtYXNzRGF0YQ0KICogQHBhcmFtIHtudW1iZXJ9IGRlbnNpdHkNCiAqLw0KQm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZU1hc3MgPSBm
dW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkgew0KCW1hc3NEYXRhLm1hc3MgPSAwOw0KCW1hc3NE
YXRhLmNlbnRlci5TZXRWKHRoaXMubV92MSk7DQoJbWFzc0RhdGEuSSA9IDA7DQp9Ow0KLyoqDQog
KiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IG5vcm1hbA0KICogQHBhcmFtIHtu
dW1iZXJ9IG9mZnNldA0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19
IHhmDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGMNCiAqIEByZXR1cm4g
e251bWJlcn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5
cGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWEgPSBmdW5jdGlvbihub3JtYWwsIG9mZnNldCwgeGYsIGMp
IHsNCglpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIG9mZnNldCA9IDA7DQoJdmFyIHYwID0gQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChub3JtYWwueCAqIG9mZnNldCwgbm9ybWFsLnkgKiBv
ZmZzZXQpOw0KCXZhciB2MSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHhmLCB0aGlz
Lm1fdjEpOw0KCXZhciB2MiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHhmLCB0aGlz
Lm1fdjIpOw0KCXZhciBkMSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3Qobm9ybWFsLCB2
MSkgLSBvZmZzZXQ7DQoJdmFyIGQyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkRvdChub3Jt
YWwsIHYyKSAtIG9mZnNldDsNCglpZiAoZDEgPiAwKSB7DQoJCWlmIChkMiA+IDApIHsNCgkJCXJl
dHVybiAwOw0KCQl9IGVsc2Ugew0KCQkJdjEueCA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS54KSAr
IGQxIC8gKGQxIC0gZDIpICogdjIueDsNCgkJCXYxLnkgPSAoLWQyIC8gKGQxIC0gZDIpICogdjEu
eSkgKyBkMSAvIChkMSAtIGQyKSAqIHYyLnk7DQoJCX0NCgl9IGVsc2Ugew0KCQlpZiAoZDIgPiAw
KSB7DQoJCQl2Mi54ID0gKC1kMiAvIChkMSAtIGQyKSAqIHYxLngpICsgZDEgLyAoZDEgLSBkMikg
KiB2Mi54Ow0KCQkJdjIueSA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS55KSArIGQxIC8gKGQxIC0g
ZDIpICogdjIueTsNCgkJfQ0KCX0NCgljLnggPSAodjAueCArIHYxLnggKyB2Mi54KSAvIDM7DQoJ
Yy55ID0gKHYwLnkgKyB2MS55ICsgdjIueSkgLyAzOw0KCXJldHVybiAwLjUgKiAoKHYxLnggLSB2
MC54KSAqICh2Mi55IC0gdjAueSkgLSAodjEueSAtIHYwLnkpICogKHYyLnggLSB2MC54KSk7DQp9
Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMu
YjJFZGdlU2hhcGUucHJvdG90eXBlLkdldExlbmd0aCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0
aGlzLm1fbGVuZ3RoOw0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUu
R2V0VmVydGV4MSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fdjE7DQp9Ow0KLyoqDQog
KiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db2xsaXNp
b24uU2hhcGVzLmIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRWZXJ0ZXgyID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIHRoaXMubV92MjsNCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGUucHJv
dG90eXBlLkdldENvcmVWZXJ0ZXgxID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9jb3Jl
VjE7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICov
DQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRDb3JlVmVy
dGV4MiA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fY29yZVYyOw0KfTsNCi8qKg0KICog
QHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuQ29sbGlzaW9u
LlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0Tm9ybWFsVmVjdG9yID0gZnVuY3Rpb24o
KSB7DQoJcmV0dXJuIHRoaXMubV9ub3JtYWw7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZVNo
YXBlLnByb3RvdHlwZS5HZXREaXJlY3Rpb25WZWN0b3IgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4g
dGhpcy5tX2RpcmVjdGlvbjsNCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGUucHJvdG90
eXBlLkdldENvcm5lcjFWZWN0b3IgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2Nvcm5l
ckRpcjE7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRDb3Ju
ZXIyVmVjdG9yID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9jb3JuZXJEaXIyOw0KfTsN
Ci8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5i
MkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29ybmVyMUlzQ29udmV4ID0gZnVuY3Rpb24oKSB7DQoJcmV0
dXJuIHRoaXMubV9jb3JuZXJDb252ZXgxOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0N
CiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29ybmVy
MklzQ29udmV4ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9jb3JuZXJDb252ZXgyOw0K
fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHhmDQog
KiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db2xsaXNp
b24uU2hhcGVzLmIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRGaXJzdFZlcnRleCA9IGZ1bmN0aW9u
KHhmKSB7DQoJdmFyIHRNYXQgPSB4Zi5SOw0KCXJldHVybiBCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuR2V0KHhmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fY29yZVYxLnggKyB0
TWF0LmNvbDIueCAqIHRoaXMubV9jb3JlVjEueSksIHhmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wx
LnkgKiB0aGlzLm1fY29yZVYxLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV9jb3JlVjEueSkpOw0K
fTsNCi8qKg0KICogQHJldHVybiB7Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZX0N
CiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0TmV4
dEVkZ2UgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX25leHRFZGdlOw0KfTsNCi8qKg0K
ICogQHJldHVybiB7Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZX0NCiAqLw0KQm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0UHJldkVkZ2UgPSBm
dW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX3ByZXZFZGdlOw0KfTsNCi8qKg0KICogQHBhcmFt
IHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHhmDQogKiBAcGFyYW0ge251bWJlcn0g
ZFgNCiAqIEBwYXJhbSB7bnVtYmVyfSBkWQ0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5
cGUuU3VwcG9ydCA9IGZ1bmN0aW9uKHhmLCBkWCwgZFkpIHsNCgl2YXIgdE1hdCA9IHhmLlI7DQoJ
dmFyIHYxWCA9IHhmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fY29yZVYxLngg
KyB0TWF0LmNvbDIueCAqIHRoaXMubV9jb3JlVjEueSk7DQoJdmFyIHYxWSA9IHhmLnBvc2l0aW9u
LnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fY29yZVYxLnggKyB0TWF0LmNvbDIueSAqIHRoaXMu
bV9jb3JlVjEueSk7DQoJdmFyIHYyWCA9IHhmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0
aGlzLm1fY29yZVYyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV9jb3JlVjIueSk7DQoJdmFyIHYy
WSA9IHhmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fY29yZVYyLnggKyB0TWF0
LmNvbDIueSAqIHRoaXMubV9jb3JlVjIueSk7DQoJaWYgKCh2MVggKiBkWCArIHYxWSAqIGRZKSA+
ICh2MlggKiBkWCArIHYyWSAqIGRZKSkgew0KCQlyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkdldCh2MVgsIHYxWSk7DQoJfSBlbHNlIHsNCgkJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5HZXQodjJYLCB2MlkpOw0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7Qm94MkQuQ29s
bGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZX0gZWRnZQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMyfSBjb3JlDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9
IGNvcm5lckRpcg0KICogQHBhcmFtIHtib29sZWFufSBjb252ZXgNCiAqLw0KQm94MkQuQ29sbGlz
aW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5wcm90b3R5cGUuU2V0UHJldkVkZ2UgPSBmdW5jdGlvbihl
ZGdlLCBjb3JlLCBjb3JuZXJEaXIsIGNvbnZleCkgew0KCXRoaXMubV9wcmV2RWRnZSA9IGVkZ2U7
DQoJdGhpcy5tX2NvcmVWMSA9IGNvcmU7DQoJdGhpcy5tX2Nvcm5lckRpcjEgPSBjb3JuZXJEaXI7
DQoJdGhpcy5tX2Nvcm5lckNvbnZleDEgPSBjb252ZXg7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge0Jv
eDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGV9IGVkZ2UNCiAqIEBwYXJhbSB7IUJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMn0gY29yZQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyfSBjb3JuZXJEaXINCiAqIEBwYXJhbSB7Ym9vbGVhbn0gY29udmV4DQogKi8NCkJveDJE
LkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGUucHJvdG90eXBlLlNldE5leHRFZGdlID0gZnVu
Y3Rpb24oZWRnZSwgY29yZSwgY29ybmVyRGlyLCBjb252ZXgpIHsNCgl0aGlzLm1fbmV4dEVkZ2Ug
PSBlZGdlOw0KCXRoaXMubV9jb3JlVjIgPSBjb3JlOw0KCXRoaXMubV9jb3JuZXJEaXIyID0gY29y
bmVyRGlyOw0KCXRoaXMubV9jb3JuZXJDb252ZXgyID0gY29udmV4Ow0KfTsNCi8qKg0KICogQGNv
bnN0DQogKiBAdHlwZSB7c3RyaW5nfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyRWRn
ZVNoYXBlLk5BTUUgPSAnYjJFZGdlU2hhcGUnOw0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0K
Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhID0gZnVuY3Rpb24oKSB7DQoJLyoqIEB0
eXBlIHtudW1iZXJ9ICovDQoJdGhpcy5tYXNzID0gMDsNCgkvKiogQHR5cGUgeyFCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzJ9ICovDQoJdGhpcy5jZW50ZXIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuR2V0KDAsIDApOw0KCS8qKiBAdHlwZSB7bnVtYmVyfSAqLw0KCXRoaXMuSSA9IDA7DQp9Ow0K
LyoqDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5Db2xsaXNpb24uU2hhcGVz
LmIyU2hhcGV9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUgPSBm
dW5jdGlvbigpIHsNCglCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUuY2FsbCh0aGlzKTsN
CgkvKiogQHR5cGUgeyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9ICovDQoJdGhpcy5tX2NlbnRy
b2lkID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgkvKiogQHR5cGUge0Fy
cmF5LjwhQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyPn0gKi8NCgl0aGlzLm1fdmVydGljZXMgPSBb
XTsNCgkvKiogQHR5cGUge0FycmF5LjwhQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyPn0gKi8NCgl0
aGlzLm1fbm9ybWFscyA9IFtdOw0KfTsNCmMyaW5oZXJpdChCb3gyRC5Db2xsaXNpb24uU2hhcGVz
LmIyUG9seWdvblNoYXBlLCBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGUpOw0KLyoqDQog
KiBAcmV0dXJuIHtzdHJpbmd9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29u
U2hhcGUucHJvdG90eXBlLkdldFR5cGVOYW1lID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIEJveDJE
LkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUuTkFNRTsNCn07DQovKioNCiAqIEByZXR1
cm4geyFCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlfQ0KICovDQpCb3gyRC5D
b2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24o
KSB7DQoJdmFyIHMgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZSgp
Ow0KCXMuU2V0KHRoaXMpOw0KCXJldHVybiBzOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQu
Q29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlfSBvdGhlcg0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hh
cGVzLmIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikgew0KCUJv
eDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZS5wcm90b3R5cGUuU2V0LmNhbGwodGhpcywgb3Ro
ZXIpOw0KCWlmIChvdGhlciBpbnN0YW5jZW9mIEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5
Z29uU2hhcGUpIHsNCgkJdGhpcy5tX2NlbnRyb2lkLlNldFYob3RoZXIubV9jZW50cm9pZCk7DQoJ
CXRoaXMubV92ZXJ0ZXhDb3VudCA9IG90aGVyLm1fdmVydGV4Q291bnQ7DQoJCXRoaXMuUmVzZXJ2
ZSh0aGlzLm1fdmVydGV4Q291bnQpOw0KCQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV92ZXJ0
ZXhDb3VudDsgaSsrKSB7DQoJCQl0aGlzLm1fdmVydGljZXNbaV0uU2V0VihvdGhlci5tX3ZlcnRp
Y2VzW2ldKTsNCgkJCXRoaXMubV9ub3JtYWxzW2ldLlNldFYob3RoZXIubV9ub3JtYWxzW2ldKTsN
CgkJfQ0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7QXJyYXkuPEJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMj59IHZlcnRpY2VzDQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hh
cGUucHJvdG90eXBlLlNldEFzQXJyYXkgPSBmdW5jdGlvbih2ZXJ0aWNlcykgew0KCXRoaXMuU2V0
QXNWZWN0b3IodmVydGljZXMpOw0KfTsNCi8qKg0KICogQHBhcmFtIHtBcnJheS48Qm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyPn0gdmVydGljZXMNCiAqIEByZXR1cm4geyFCb3gyRC5Db2xsaXNpb24u
U2hhcGVzLmIyUG9seWdvblNoYXBlfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9s
eWdvblNoYXBlLkFzQXJyYXkgPSBmdW5jdGlvbih2ZXJ0aWNlcykgew0KCXZhciBwb2x5Z29uU2hh
cGUgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZSgpOw0KCXBvbHln
b25TaGFwZS5TZXRBc0FycmF5KHZlcnRpY2VzKTsNCglyZXR1cm4gcG9seWdvblNoYXBlOw0KfTsN
Ci8qKg0KICogQHBhcmFtIHtBcnJheS48IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMj59IHZlcnRp
Y2VzDQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUucHJvdG90eXBl
LlNldEFzVmVjdG9yID0gZnVuY3Rpb24odmVydGljZXMpIHsNCgl2YXIgdmVydGV4Q291bnQgPSB2
ZXJ0aWNlcy5sZW5ndGg7DQo7DQoJdGhpcy5tX3ZlcnRleENvdW50ID0gdmVydGV4Q291bnQ7DQoJ
dGhpcy5SZXNlcnZlKHZlcnRleENvdW50KTsNCgl2YXIgaSA9IDA7DQoJZm9yIChpID0gMDsgaSA8
IHRoaXMubV92ZXJ0ZXhDb3VudDsgaSsrKSB7DQoJCXRoaXMubV92ZXJ0aWNlc1tpXS5TZXRWKHZl
cnRpY2VzW2ldKTsNCgl9DQoJZm9yIChpID0gMDsgaSA8IHRoaXMubV92ZXJ0ZXhDb3VudDsgKytp
KSB7DQoJCXZhciBpMSA9IGk7DQoJCXZhciBpMiA9IGkgKyAxIDwgdGhpcy5tX3ZlcnRleENvdW50
ID8gaSArIDEgOiAwOw0KCQl2YXIgZWRnZSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0
cmFjdFZWKHRoaXMubV92ZXJ0aWNlc1tpMl0sIHRoaXMubV92ZXJ0aWNlc1tpMV0pOw0KOw0KCQl0
aGlzLm1fbm9ybWFsc1tpXS5TZXRWKEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Dcm9zc1ZGKGVk
Z2UsIDEuMCkpOw0KCQl0aGlzLm1fbm9ybWFsc1tpXS5Ob3JtYWxpemUoKTsNCgl9DQoJdGhpcy5t
X2NlbnRyb2lkID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5Db21wdXRl
Q2VudHJvaWQodGhpcy5tX3ZlcnRpY2VzLCB0aGlzLm1fdmVydGV4Q291bnQpOw0KfTsNCi8qKg0K
ICogQHBhcmFtIHtBcnJheS48Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyPn0gdmVydGljZXMNCiAq
IEByZXR1cm4geyFCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlfQ0KICovDQpC
b3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlLkFzVmVjdG9yID0gZnVuY3Rpb24o
dmVydGljZXMpIHsNCgl2YXIgcG9seWdvblNoYXBlID0gbmV3IEJveDJELkNvbGxpc2lvbi5TaGFw
ZXMuYjJQb2x5Z29uU2hhcGUoKTsNCglwb2x5Z29uU2hhcGUuU2V0QXNWZWN0b3IodmVydGljZXMp
Ow0KCXJldHVybiBwb2x5Z29uU2hhcGU7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gaHgN
CiAqIEBwYXJhbSB7bnVtYmVyfSBoeQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9s
eWdvblNoYXBlLnByb3RvdHlwZS5TZXRBc0JveCA9IGZ1bmN0aW9uKGh4LCBoeSkgew0KCXRoaXMu
bV92ZXJ0ZXhDb3VudCA9IDQ7DQoJdGhpcy5SZXNlcnZlKDQpOw0KCXRoaXMubV92ZXJ0aWNlc1sw
XS5TZXQoKC1oeCksICgtaHkpKTsNCgl0aGlzLm1fdmVydGljZXNbMV0uU2V0KGh4LCAoLWh5KSk7
DQoJdGhpcy5tX3ZlcnRpY2VzWzJdLlNldChoeCwgaHkpOw0KCXRoaXMubV92ZXJ0aWNlc1szXS5T
ZXQoKC1oeCksIGh5KTsNCgl0aGlzLm1fbm9ybWFsc1swXS5TZXQoMC4wLCAoLTEuMCkpOw0KCXRo
aXMubV9ub3JtYWxzWzFdLlNldCgxLjAsIDAuMCk7DQoJdGhpcy5tX25vcm1hbHNbMl0uU2V0KDAu
MCwgMS4wKTsNCgl0aGlzLm1fbm9ybWFsc1szXS5TZXQoKC0xLjApLCAwLjApOw0KCXRoaXMubV9j
ZW50cm9pZC5TZXRaZXJvKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gaHgNCiAqIEBw
YXJhbSB7bnVtYmVyfSBoeQ0KICogQHJldHVybiB7IUJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQ
b2x5Z29uU2hhcGV9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUu
QXNCb3ggPSBmdW5jdGlvbihoeCwgaHkpIHsNCgl2YXIgcG9seWdvblNoYXBlID0gbmV3IEJveDJE
LkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUoKTsNCglwb2x5Z29uU2hhcGUuU2V0QXNC
b3goaHgsIGh5KTsNCglyZXR1cm4gcG9seWdvblNoYXBlOw0KfTsNCi8qKg0KICogQHBhcmFtIHtu
dW1iZXJ9IGh4DQogKiBAcGFyYW0ge251bWJlcn0gaHkNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMn0gY2VudGVyDQogKiBAcGFyYW0ge251bWJlcn0gYW5nbGUNCiAqLw0KQm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuU2V0QXNPcmllbnRl
ZEJveCA9IGZ1bmN0aW9uKGh4LCBoeSwgY2VudGVyLCBhbmdsZSkgew0KCXRoaXMubV92ZXJ0ZXhD
b3VudCA9IDQ7DQoJdGhpcy5SZXNlcnZlKDQpOw0KCXRoaXMubV92ZXJ0aWNlc1swXS5TZXQoKC1o
eCksICgtaHkpKTsNCgl0aGlzLm1fdmVydGljZXNbMV0uU2V0KGh4LCAoLWh5KSk7DQoJdGhpcy5t
X3ZlcnRpY2VzWzJdLlNldChoeCwgaHkpOw0KCXRoaXMubV92ZXJ0aWNlc1szXS5TZXQoKC1oeCks
IGh5KTsNCgl0aGlzLm1fbm9ybWFsc1swXS5TZXQoMC4wLCAoLTEuMCkpOw0KCXRoaXMubV9ub3Jt
YWxzWzFdLlNldCgxLjAsIDAuMCk7DQoJdGhpcy5tX25vcm1hbHNbMl0uU2V0KDAuMCwgMS4wKTsN
Cgl0aGlzLm1fbm9ybWFsc1szXS5TZXQoKC0xLjApLCAwLjApOw0KCXRoaXMubV9jZW50cm9pZCA9
IGNlbnRlcjsNCgl2YXIgbWF0ID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIoKTsNCglt
YXQuU2V0KGFuZ2xlKTsNCgl2YXIgeGYgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zv
cm0oY2VudGVyLCBtYXQpOw0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX3ZlcnRleENvdW50
OyArK2kpIHsNCgkJdGhpcy5tX3ZlcnRpY2VzW2ldID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
Lk11bFgoeGYsIHRoaXMubV92ZXJ0aWNlc1tpXSk7DQoJCXRoaXMubV9ub3JtYWxzW2ldID0gQm94
MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bE1WKHhmLlIsIHRoaXMubV9ub3JtYWxzW2ldKTsNCgl9
DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gaHgNCiAqIEBwYXJhbSB7bnVtYmVyfSBoeQ0K
ICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBjZW50ZXINCiAqIEBwYXJhbSB7
bnVtYmVyfSBhbmdsZQ0KICogQHJldHVybiB7IUJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5
Z29uU2hhcGV9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUuQXNP
cmllbnRlZEJveCA9IGZ1bmN0aW9uKGh4LCBoeSwgY2VudGVyLCBhbmdsZSkgew0KCXZhciBwb2x5
Z29uU2hhcGUgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZSgpOw0K
CXBvbHlnb25TaGFwZS5TZXRBc09yaWVudGVkQm94KGh4LCBoeSwgY2VudGVyLCBhbmdsZSk7DQoJ
cmV0dXJuIHBvbHlnb25TaGFwZTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMn0gdjENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdjIN
CiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuU2V0
QXNFZGdlID0gZnVuY3Rpb24odjEsIHYyKSB7DQoJdGhpcy5tX3ZlcnRleENvdW50ID0gMjsNCgl0
aGlzLlJlc2VydmUoMik7DQoJdGhpcy5tX3ZlcnRpY2VzWzBdLlNldFYodjEpOw0KCXRoaXMubV92
ZXJ0aWNlc1sxXS5TZXRWKHYyKTsNCgl0aGlzLm1fY2VudHJvaWQueCA9IDAuNSAqICh2MS54ICsg
djIueCk7DQoJdGhpcy5tX2NlbnRyb2lkLnkgPSAwLjUgKiAodjEueSArIHYyLnkpOw0KCXRoaXMu
bV9ub3JtYWxzWzBdID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNyb3NzVkYoQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLlN1YnRyYWN0VlYodjIsIHYxKSwgMS4wKTsNCgl0aGlzLm1fbm9ybWFs
c1swXS5Ob3JtYWxpemUoKTsNCgl0aGlzLm1fbm9ybWFsc1sxXS54ID0gKC10aGlzLm1fbm9ybWFs
c1swXS54KTsNCgl0aGlzLm1fbm9ybWFsc1sxXS55ID0gKC10aGlzLm1fbm9ybWFsc1swXS55KTsN
Cn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdjENCiAqIEBw
YXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdjINCiAqIEByZXR1cm4geyFCb3gyRC5D
b2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hh
cGVzLmIyUG9seWdvblNoYXBlLkFzRWRnZSA9IGZ1bmN0aW9uKHYxLCB2Mikgew0KCXZhciBwb2x5
Z29uU2hhcGUgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZSgpOw0K
CXBvbHlnb25TaGFwZS5TZXRBc0VkZ2UodjEsIHYyKTsNCglyZXR1cm4gcG9seWdvblNoYXBlOw0K
fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHhmDQog
KiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IHANCiAqIEByZXR1cm4ge2Jvb2xl
YW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUucHJvdG90eXBl
LlRlc3RQb2ludCA9IGZ1bmN0aW9uKHhmLCBwKSB7DQoJdmFyIHRWZWM7DQoJdmFyIHRNYXQgPSB4
Zi5SOw0KCXZhciB0WCA9IHAueCAtIHhmLnBvc2l0aW9uLng7DQoJdmFyIHRZID0gcC55IC0geGYu
cG9zaXRpb24ueTsNCgl2YXIgcExvY2FsWCA9ICh0WCAqIHRNYXQuY29sMS54ICsgdFkgKiB0TWF0
LmNvbDEueSk7DQoJdmFyIHBMb2NhbFkgPSAodFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5j
b2wyLnkpOw0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX3ZlcnRleENvdW50OyArK2kpIHsN
CgkJdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1tpXTsNCgkJdFggPSBwTG9jYWxYIC0gdFZlYy54Ow0K
CQl0WSA9IHBMb2NhbFkgLSB0VmVjLnk7DQoJCXRWZWMgPSB0aGlzLm1fbm9ybWFsc1tpXTsNCgkJ
dmFyIGRvdCA9ICh0VmVjLnggKiB0WCArIHRWZWMueSAqIHRZKTsNCgkJaWYgKGRvdCA+IDAuMCkg
ew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJfQ0KCXJldHVybiB0cnVlOw0KfTsNCi8qKg0KICog
QHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdE91dHB1dH0gb3V0cHV0DQogKiBAcGFy
YW0geyFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXR9IGlucHV0DQogKiBAcGFyYW0geyFC
b3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0gdHJhbnNmb3JtDQogKiBAcmV0dXJuIHtib29s
ZWFufQ0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlLnByb3RvdHlw
ZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCwgdHJhbnNmb3JtKSB7DQoJdmFyIGxv
d2VyID0gMC4wOw0KCXZhciB1cHBlciA9IGlucHV0Lm1heEZyYWN0aW9uOw0KCXZhciB0WCA9IDA7
DQoJdmFyIHRZID0gMDsNCgl2YXIgdE1hdDsNCgl2YXIgdFZlYzsNCgl0WCA9IGlucHV0LnAxLngg
LSB0cmFuc2Zvcm0ucG9zaXRpb24ueDsNCgl0WSA9IGlucHV0LnAxLnkgLSB0cmFuc2Zvcm0ucG9z
aXRpb24ueTsNCgl0TWF0ID0gdHJhbnNmb3JtLlI7DQoJdmFyIHAxWCA9ICh0WCAqIHRNYXQuY29s
MS54ICsgdFkgKiB0TWF0LmNvbDEueSk7DQoJdmFyIHAxWSA9ICh0WCAqIHRNYXQuY29sMi54ICsg
dFkgKiB0TWF0LmNvbDIueSk7DQoJdFggPSBpbnB1dC5wMi54IC0gdHJhbnNmb3JtLnBvc2l0aW9u
Lng7DQoJdFkgPSBpbnB1dC5wMi55IC0gdHJhbnNmb3JtLnBvc2l0aW9uLnk7DQoJdE1hdCA9IHRy
YW5zZm9ybS5SOw0KCXZhciBwMlggPSAodFggKiB0TWF0LmNvbDEueCArIHRZICogdE1hdC5jb2wx
LnkpOw0KCXZhciBwMlkgPSAodFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5jb2wyLnkpOw0K
CXZhciBkWCA9IHAyWCAtIHAxWDsNCgl2YXIgZFkgPSBwMlkgLSBwMVk7DQoJdmFyIGluZGV4ID0g
LTE7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fdmVydGV4Q291bnQ7ICsraSkgew0KCQl0
VmVjID0gdGhpcy5tX3ZlcnRpY2VzW2ldOw0KCQl0WCA9IHRWZWMueCAtIHAxWDsNCgkJdFkgPSB0
VmVjLnkgLSBwMVk7DQoJCXRWZWMgPSB0aGlzLm1fbm9ybWFsc1tpXTsNCgkJdmFyIG51bWVyYXRv
ciA9ICh0VmVjLnggKiB0WCArIHRWZWMueSAqIHRZKTsNCgkJdmFyIGRlbm9taW5hdG9yID0gKHRW
ZWMueCAqIGRYICsgdFZlYy55ICogZFkpOw0KCQlpZiAoZGVub21pbmF0b3IgPT0gMC4wKSB7DQoJ
CQlpZiAobnVtZXJhdG9yIDwgMC4wKSB7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQl9IGVs
c2Ugew0KCQkJaWYgKGRlbm9taW5hdG9yIDwgMC4wICYmIG51bWVyYXRvciA8IGxvd2VyICogZGVu
b21pbmF0b3IpIHsNCgkJCQlsb3dlciA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yOw0KCQkJCWlu
ZGV4ID0gaTsNCgkJCX0gZWxzZSBpZiAoZGVub21pbmF0b3IgPiAwLjAgJiYgbnVtZXJhdG9yIDwg
dXBwZXIgKiBkZW5vbWluYXRvcikgew0KCQkJCXVwcGVyID0gbnVtZXJhdG9yIC8gZGVub21pbmF0
b3I7DQoJCQl9DQoJCX0NCgkJaWYgKHVwcGVyIDwgbG93ZXIgLSBOdW1iZXIuTUlOX1ZBTFVFKSB7
DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgl9DQoJaWYgKGluZGV4ID49IDApIHsNCgkJb3V0cHV0
LmZyYWN0aW9uID0gbG93ZXI7DQoJCXRNYXQgPSB0cmFuc2Zvcm0uUjsNCgkJdFZlYyA9IHRoaXMu
bV9ub3JtYWxzW2luZGV4XTsNCgkJb3V0cHV0Lm5vcm1hbC54ID0gKHRNYXQuY29sMS54ICogdFZl
Yy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpOw0KCQlvdXRwdXQubm9ybWFsLnkgPSAodE1hdC5j
b2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7DQoJCXJldHVybiB0cnVlOw0K
CX0NCglyZXR1cm4gZmFsc2U7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24u
YjJBQUJCfSBhYWJiDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0g
eGYNCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUu
Q29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB4Zikgew0KCXZhciB0TWF0ID0geGYuUjsNCgl2
YXIgdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1swXTsNCgl2YXIgbG93ZXJYID0geGYucG9zaXRpb24u
eCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsNCgl2YXIg
bG93ZXJZID0geGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29s
Mi55ICogdFZlYy55KTsNCgl2YXIgdXBwZXJYID0gbG93ZXJYOw0KCXZhciB1cHBlclkgPSBsb3dl
clk7DQoJZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLm1fdmVydGV4Q291bnQ7ICsraSkgew0KCQl0
VmVjID0gdGhpcy5tX3ZlcnRpY2VzW2ldOw0KCQl2YXIgdlggPSB4Zi5wb3NpdGlvbi54ICsgKHRN
YXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpOw0KCQl2YXIgdlkgPSB4
Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVj
LnkpOw0KCQlsb3dlclggPSBsb3dlclggPCB2WCA/IGxvd2VyWCA6IHZYOw0KCQlsb3dlclkgPSBs
b3dlclkgPCB2WSA/IGxvd2VyWSA6IHZZOw0KCQl1cHBlclggPSB1cHBlclggPiB2WCA/IHVwcGVy
WCA6IHZYOw0KCQl1cHBlclkgPSB1cHBlclkgPiB2WSA/IHVwcGVyWSA6IHZZOw0KCX0NCglhYWJi
Lmxvd2VyQm91bmRfLnggPSBsb3dlclggLSB0aGlzLm1fcmFkaXVzOw0KCWFhYmIubG93ZXJCb3Vu
ZF8ueSA9IGxvd2VyWSAtIHRoaXMubV9yYWRpdXM7DQoJYWFiYi51cHBlckJvdW5kXy54ID0gdXBw
ZXJYICsgdGhpcy5tX3JhZGl1czsNCglhYWJiLnVwcGVyQm91bmRfLnkgPSB1cHBlclkgKyB0aGlz
Lm1fcmFkaXVzOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5i
Mk1hc3NEYXRhfSBtYXNzRGF0YQ0KICogQHBhcmFtIHtudW1iZXJ9IGRlbnNpdHkNCiAqLw0KQm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuQ29tcHV0ZU1hc3Mg
PSBmdW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkgew0KCWlmICh0aGlzLm1fdmVydGV4Q291bnQg
PT0gMikgew0KCQltYXNzRGF0YS5jZW50ZXIueCA9IDAuNSAqICh0aGlzLm1fdmVydGljZXNbMF0u
eCArIHRoaXMubV92ZXJ0aWNlc1sxXS54KTsNCgkJbWFzc0RhdGEuY2VudGVyLnkgPSAwLjUgKiAo
dGhpcy5tX3ZlcnRpY2VzWzBdLnkgKyB0aGlzLm1fdmVydGljZXNbMV0ueSk7DQoJCW1hc3NEYXRh
Lm1hc3MgPSAwLjA7DQoJCW1hc3NEYXRhLkkgPSAwLjA7DQoJCXJldHVybjsNCgl9DQoJdmFyIGNl
bnRlclggPSAwLjA7DQoJdmFyIGNlbnRlclkgPSAwLjA7DQoJdmFyIGFyZWEgPSAwLjA7DQoJdmFy
IEkgPSAwLjA7DQoJdmFyIHAxWCA9IDAuMDsNCgl2YXIgcDFZID0gMC4wOw0KCXZhciBrX2ludjMg
PSAxLjAgLyAzLjA7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fdmVydGV4Q291bnQ7ICsr
aSkgew0KCQl2YXIgcDIgPSB0aGlzLm1fdmVydGljZXNbaV07DQoJCXZhciBwMyA9IGkgKyAxIDwg
dGhpcy5tX3ZlcnRleENvdW50ID8gdGhpcy5tX3ZlcnRpY2VzW2kgKyAxXSA6IHRoaXMubV92ZXJ0
aWNlc1swXTsNCgkJdmFyIGUxWCA9IHAyLnggLSBwMVg7DQoJCXZhciBlMVkgPSBwMi55IC0gcDFZ
Ow0KCQl2YXIgZTJYID0gcDMueCAtIHAxWDsNCgkJdmFyIGUyWSA9IHAzLnkgLSBwMVk7DQoJCXZh
ciBEID0gZTFYICogZTJZIC0gZTFZICogZTJYOw0KCQl2YXIgdHJpYW5nbGVBcmVhID0gMC41ICog
RDsNCgkJYXJlYSArPSB0cmlhbmdsZUFyZWE7DQoJCWNlbnRlclggKz0gdHJpYW5nbGVBcmVhICog
a19pbnYzICogKHAxWCArIHAyLnggKyBwMy54KTsNCgkJY2VudGVyWSArPSB0cmlhbmdsZUFyZWEg
KiBrX2ludjMgKiAocDFZICsgcDIueSArIHAzLnkpOw0KCQl2YXIgcHggPSBwMVg7DQoJCXZhciBw
eSA9IHAxWTsNCgkJdmFyIGV4MSA9IGUxWDsNCgkJdmFyIGV5MSA9IGUxWTsNCgkJdmFyIGV4MiA9
IGUyWDsNCgkJdmFyIGV5MiA9IGUyWTsNCgkJdmFyIGludHgyID0ga19pbnYzICogKDAuMjUgKiAo
ZXgxICogZXgxICsgZXgyICogZXgxICsgZXgyICogZXgyKSArIChweCAqIGV4MSArIHB4ICogZXgy
KSkgKyAwLjUgKiBweCAqIHB4Ow0KCQl2YXIgaW50eTIgPSBrX2ludjMgKiAoMC4yNSAqIChleTEg
KiBleTEgKyBleTIgKiBleTEgKyBleTIgKiBleTIpICsgKHB5ICogZXkxICsgcHkgKiBleTIpKSAr
IDAuNSAqIHB5ICogcHk7DQoJCUkgKz0gRCAqIChpbnR4MiArIGludHkyKTsNCgl9DQoJbWFzc0Rh
dGEubWFzcyA9IGRlbnNpdHkgKiBhcmVhOw0KCWNlbnRlclggKj0gMS4wIC8gYXJlYTsNCgljZW50
ZXJZICo9IDEuMCAvIGFyZWE7DQoJbWFzc0RhdGEuY2VudGVyLlNldChjZW50ZXJYLCBjZW50ZXJZ
KTsNCgltYXNzRGF0YS5JID0gZGVuc2l0eSAqIEk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzJ9IG5vcm1hbA0KICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldA0K
ICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHhmDQogKiBAcGFyYW0g
eyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGMNCiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0K
Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuQ29tcHV0ZVN1
Ym1lcmdlZEFyZWEgPSBmdW5jdGlvbihub3JtYWwsIG9mZnNldCwgeGYsIGMpIHsNCgl2YXIgbm9y
bWFsTCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxUTVYoeGYuUiwgbm9ybWFsKTsNCgl2
YXIgb2Zmc2V0TCA9IG9mZnNldCAtIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3Qobm9ybWFs
LCB4Zi5wb3NpdGlvbik7DQoJdmFyIGRlcHRocyA9IFtdOw0KCXZhciBkaXZlQ291bnQgPSAwOw0K
CXZhciBpbnRvSW5kZXggPSAtMTsNCgl2YXIgb3V0b0luZGV4ID0gLTE7DQoJdmFyIGxhc3RTdWJt
ZXJnZWQgPSBmYWxzZTsNCgl2YXIgaSA9IDA7DQoJZm9yIChpID0gMDsgaSA8IHRoaXMubV92ZXJ0
ZXhDb3VudDsgKytpKSB7DQoJCWRlcHRoc1tpXSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5E
b3Qobm9ybWFsTCwgdGhpcy5tX3ZlcnRpY2VzW2ldKSAtIG9mZnNldEw7DQoJCXZhciBpc1N1Ym1l
cmdlZCA9IGRlcHRoc1tpXSA8ICgtTnVtYmVyLk1JTl9WQUxVRSk7DQoJCWlmIChpID4gMCkgew0K
CQkJaWYgKGlzU3VibWVyZ2VkKSB7DQoJCQkJaWYgKCFsYXN0U3VibWVyZ2VkKSB7DQoJCQkJCWlu
dG9JbmRleCA9IGkgLSAxOw0KCQkJCQlkaXZlQ291bnQrKzsNCgkJCQl9DQoJCQl9IGVsc2Ugew0K
CQkJCWlmIChsYXN0U3VibWVyZ2VkKSB7DQoJCQkJCW91dG9JbmRleCA9IGkgLSAxOw0KCQkJCQlk
aXZlQ291bnQrKzsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJbGFzdFN1Ym1lcmdlZCA9IGlzU3VibWVy
Z2VkOw0KCX0NCglzd2l0Y2ggKGRpdmVDb3VudCkgew0KCWNhc2UgMDoNCgkJaWYgKGxhc3RTdWJt
ZXJnZWQpIHsNCgkJCXZhciBtZCA9IG5ldyBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyTWFzc0Rh
dGEoKTsNCgkJCXRoaXMuQ29tcHV0ZU1hc3MobWQsIDEpOw0KCQkJYy5TZXRWKEJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5NdWxYKHhmLCBtZC5jZW50ZXIpKTsNCgkJCXJldHVybiBtZC5tYXNzOw0K
CQl9IGVsc2Ugew0KCQkJcmV0dXJuIDA7DQoJCX0NCgkJYnJlYWs7DQoJY2FzZSAxOg0KCQlpZiAo
aW50b0luZGV4ID09ICgtMSkpIHsNCgkJCWludG9JbmRleCA9IHRoaXMubV92ZXJ0ZXhDb3VudCAt
IDE7DQoJCX0gZWxzZSB7DQoJCQlvdXRvSW5kZXggPSB0aGlzLm1fdmVydGV4Q291bnQgLSAxOw0K
CQl9DQoJCWJyZWFrOw0KCX0NCgl2YXIgaW50b0luZGV4MiA9ICgoaW50b0luZGV4ICsgMSkgJSB0
aGlzLm1fdmVydGV4Q291bnQpOw0KCXZhciBvdXRvSW5kZXgyID0gKChvdXRvSW5kZXggKyAxKSAl
IHRoaXMubV92ZXJ0ZXhDb3VudCk7DQoJdmFyIGludG9MYW1kZGEgPSAoMCAtIGRlcHRoc1tpbnRv
SW5kZXhdKSAvIChkZXB0aHNbaW50b0luZGV4Ml0gLSBkZXB0aHNbaW50b0luZGV4XSk7DQoJdmFy
IG91dG9MYW1kZGEgPSAoMCAtIGRlcHRoc1tvdXRvSW5kZXhdKSAvIChkZXB0aHNbb3V0b0luZGV4
Ml0gLSBkZXB0aHNbb3V0b0luZGV4XSk7DQoJdmFyIGludG9WZWMgPSBCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIuR2V0KHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXhdLnggKiAoMSAtIGludG9MYW1k
ZGEpICsgdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleDJdLnggKiBpbnRvTGFtZGRhLCB0aGlzLm1f
dmVydGljZXNbaW50b0luZGV4XS55ICogKDEgLSBpbnRvTGFtZGRhKSArIHRoaXMubV92ZXJ0aWNl
c1tpbnRvSW5kZXgyXS55ICogaW50b0xhbWRkYSk7DQoJdmFyIG91dG9WZWMgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KHRoaXMubV92ZXJ0aWNlc1tvdXRvSW5kZXhdLnggKiAoMSAtIG91
dG9MYW1kZGEpICsgdGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleDJdLnggKiBvdXRvTGFtZGRhLCB0
aGlzLm1fdmVydGljZXNbb3V0b0luZGV4XS55ICogKDEgLSBvdXRvTGFtZGRhKSArIHRoaXMubV92
ZXJ0aWNlc1tvdXRvSW5kZXgyXS55ICogb3V0b0xhbWRkYSk7DQoJdmFyIGFyZWEgPSAwOw0KCXZh
ciBjZW50ZXIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXZhciBwMiA9
IHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXgyXTsNCgl2YXIgcDM7DQoJaSA9IGludG9JbmRleDI7
DQoJd2hpbGUgKGkgIT0gb3V0b0luZGV4Mikgew0KCQlpID0gKGkgKyAxKSAlIHRoaXMubV92ZXJ0
ZXhDb3VudDsNCgkJaWYgKGkgPT0gb3V0b0luZGV4MikgcDMgPSBvdXRvVmVjOw0KCQllbHNlIHAz
ID0gdGhpcy5tX3ZlcnRpY2VzW2ldOw0KCQl2YXIgdHJpYW5nbGVBcmVhID0gMC41ICogKChwMi54
IC0gaW50b1ZlYy54KSAqIChwMy55IC0gaW50b1ZlYy55KSAtIChwMi55IC0gaW50b1ZlYy55KSAq
IChwMy54IC0gaW50b1ZlYy54KSk7DQoJCWFyZWEgKz0gdHJpYW5nbGVBcmVhOw0KCQljZW50ZXIu
eCArPSB0cmlhbmdsZUFyZWEgKiAoaW50b1ZlYy54ICsgcDIueCArIHAzLngpIC8gMzsNCgkJY2Vu
dGVyLnkgKz0gdHJpYW5nbGVBcmVhICogKGludG9WZWMueSArIHAyLnkgKyBwMy55KSAvIDM7DQoJ
CXAyID0gcDM7DQoJfQ0KCWNlbnRlci5NdWx0aXBseSgxIC8gYXJlYSk7DQoJYy5TZXRWKEJveDJE
LkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHhmLCBjZW50ZXIpKTsNCglyZXR1cm4gYXJlYTsNCn07
DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHl9IHByb3h5
DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNl
dERpc3RhbmNlUHJveHkgPSBmdW5jdGlvbihwcm94eSkgew0KCXByb3h5Lm1fdmVydGljZXMgPSB0
aGlzLm1fdmVydGljZXM7DQoJcHJveHkubV9jb3VudCA9IHRoaXMubV92ZXJ0ZXhDb3VudDsNCglw
cm94eS5tX3JhZGl1cyA9IHRoaXMubV9yYWRpdXM7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1i
ZXJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUucHJvdG90eXBl
LkdldFZlcnRleENvdW50ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV92ZXJ0ZXhDb3Vu
dDsNCn07DQovKioNCiAqIEByZXR1cm4ge0FycmF5LjwhQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
Pn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUu
R2V0VmVydGljZXMgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX3ZlcnRpY2VzOw0KfTsN
Ci8qKg0KICogQHJldHVybiB7QXJyYXkuPCFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI+fQ0KICov
DQpCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5HZXROb3Jt
YWxzID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9ub3JtYWxzOw0KfTsNCi8qKg0KICog
QHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBkDQogKiByZXR1cm4ge251bWJlcn0N
CiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuR2V0
U3VwcG9ydCA9IGZ1bmN0aW9uKGQpIHsNCgl2YXIgYmVzdEluZGV4ID0gMDsNCgl2YXIgYmVzdFZh
bHVlID0gdGhpcy5tX3ZlcnRpY2VzWzBdLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbMF0ueSAq
IGQueTsNCglmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMubV92ZXJ0ZXhDb3VudDsgKytpKSB7DQoJ
CXZhciB2YWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1tpXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2Vz
W2ldLnkgKiBkLnk7DQoJCWlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkgew0KCQkJYmVzdEluZGV4ID0g
aTsNCgkJCWJlc3RWYWx1ZSA9IHZhbHVlOw0KCQl9DQoJfQ0KCXJldHVybiBiZXN0SW5kZXg7DQp9
Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IGQNCiAqIHJldHVy
biB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBl
cy5iMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuR2V0U3VwcG9ydFZlcnRleCA9IGZ1bmN0aW9uKGQp
IHsNCgl2YXIgYmVzdEluZGV4ID0gMDsNCgl2YXIgYmVzdFZhbHVlID0gdGhpcy5tX3ZlcnRpY2Vz
WzBdLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbMF0ueSAqIGQueTsNCglmb3IgKHZhciBpID0g
MTsgaSA8IHRoaXMubV92ZXJ0ZXhDb3VudDsgKytpKSB7DQoJCXZhciB2YWx1ZSA9IHRoaXMubV92
ZXJ0aWNlc1tpXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzW2ldLnkgKiBkLnk7DQoJCWlmICh2
YWx1ZSA+IGJlc3RWYWx1ZSkgew0KCQkJYmVzdEluZGV4ID0gaTsNCgkJCWJlc3RWYWx1ZSA9IHZh
bHVlOw0KCQl9DQoJfQ0KCXJldHVybiB0aGlzLm1fdmVydGljZXNbYmVzdEluZGV4XTsNCn07DQov
KioNCiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudA0KICovDQpCb3gyRC5Db2xsaXNpb24uU2hhcGVz
LmIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5SZXNlcnZlID0gZnVuY3Rpb24oY291bnQpIHsNCgl0
aGlzLm1fdmVydGljZXMgPSBbXTsNCgl0aGlzLm1fbm9ybWFscyA9IFtdOw0KCWZvciAodmFyIGkg
PSB0aGlzLm1fdmVydGljZXMubGVuZ3RoOyBpIDwgY291bnQ7IGkrKykgew0KCQl0aGlzLm1fdmVy
dGljZXNbaV0gPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCQl0aGlzLm1f
bm9ybWFsc1tpXSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJfQ0KfTsN
Ci8qKg0KICogQHBhcmFtIHtBcnJheS48IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMj59IHZzDQog
KiBAcGFyYW0ge251bWJlcn0gY291bnQNCiAqIHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5Db21wdXRl
Q2VudHJvaWQgPSBmdW5jdGlvbih2cywgY291bnQpIHsNCgl2YXIgYyA9IEJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdmFyIGFyZWEgPSAwLjA7DQoJdmFyIHAxWCA9IDAuMDsN
Cgl2YXIgcDFZID0gMC4wOw0KCXZhciBpbnYzID0gMS4wIC8gMy4wOw0KCWZvciAodmFyIGkgPSAw
OyBpIDwgY291bnQ7ICsraSkgew0KCQl2YXIgcDIgPSB2c1tpXTsNCgkJdmFyIHAzID0gaSArIDEg
PCBjb3VudCA/IHZzW2kgKyAxXSA6IHZzWzBdOw0KCQl2YXIgZTFYID0gcDIueCAtIHAxWDsNCgkJ
dmFyIGUxWSA9IHAyLnkgLSBwMVk7DQoJCXZhciBlMlggPSBwMy54IC0gcDFYOw0KCQl2YXIgZTJZ
ID0gcDMueSAtIHAxWTsNCgkJdmFyIEQgPSAoZTFYICogZTJZIC0gZTFZICogZTJYKTsNCgkJdmFy
IHRyaWFuZ2xlQXJlYSA9IDAuNSAqIEQ7DQoJCWFyZWEgKz0gdHJpYW5nbGVBcmVhOw0KCQljLngg
Kz0gdHJpYW5nbGVBcmVhICogaW52MyAqIChwMVggKyBwMi54ICsgcDMueCk7DQoJCWMueSArPSB0
cmlhbmdsZUFyZWEgKiBpbnYzICogKHAxWSArIHAyLnkgKyBwMy55KTsNCgl9DQoJYy54ICo9IDEu
MCAvIGFyZWE7DQoJYy55ICo9IDEuMCAvIGFyZWE7DQoJcmV0dXJuIGM7DQp9Ow0KLyoqIEB0eXBl
IHshQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMn0gKi8NCkJveDJELkNvbGxpc2lvbi5TaGFwZXMu
YjJQb2x5Z29uU2hhcGUuc19tYXQgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMigpOw0K
LyoqDQogKiBAY29uc3QNCiAqIEB0eXBlIHtzdHJpbmd9DQogKi8NCkJveDJELkNvbGxpc2lvbi5T
aGFwZXMuYjJQb2x5Z29uU2hhcGUuTkFNRSA9ICdiMlBvbHlnb25TaGFwZSc7DQovKioNCiAqIEBj
b25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQgPSBmdW5jdGlvbigp
IHsNCgkvKiogQHR5cGUge251bWJlcn0gKi8NCgl0aGlzLl9rZXkgPSAwOw0KCS8qKiBAdHlwZSB7
bnVtYmVyfSAqLw0KCXRoaXMuX3JlZmVyZW5jZUVkZ2UgPSAwOw0KCS8qKiBAdHlwZSB7bnVtYmVy
fSAqLw0KCXRoaXMuX2luY2lkZW50RWRnZSA9IDA7DQoJLyoqIEB0eXBlIHtudW1iZXJ9ICovDQoJ
dGhpcy5faW5jaWRlbnRWZXJ0ZXggPSAwOw0KfTsNCi8qKg0KICogQHJldHVybiB7bnVtYmVyfQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQucHJvdG90eXBlLkdldEtleSA9IGZ1bmN0
aW9uICgpIHsNCglyZXR1cm4gdGhpcy5fa2V5Ow0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9
IGtleQ0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQucHJvdG90eXBlLlNldEtleSA9
IGZ1bmN0aW9uIChrZXkpIHsNCgl0aGlzLl9rZXkgPSBrZXk7DQoJdGhpcy5fcmVmZXJlbmNlRWRn
ZSA9IHRoaXMuX2tleSAmIDB4MDAwMDAwZmY7DQoJdGhpcy5faW5jaWRlbnRFZGdlID0gKCh0aGlz
Ll9rZXkgJiAweDAwMDBmZjAwKSA+PiA4KSAmIDB4MDAwMDAwZmY7DQoJdGhpcy5faW5jaWRlbnRW
ZXJ0ZXggPSAoKHRoaXMuX2tleSAmIDB4MDBmZjAwMDApID4+IDE2KSAmIDB4MDAwMDAwZmY7DQoJ
dGhpcy5fZmxpcCA9ICgodGhpcy5fa2V5ICYgMHhmZjAwMDAwMCkgPj4gMjQpICYgMHgwMDAwMDBm
ZjsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRH0gaWQN
CiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElELnByb3RvdHlwZS5TZXQgPSBmdW5jdGlv
biAoaWQpIHsNCgl0aGlzLlNldEtleShpZC5fa2V5KTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVt
YmVyfSBlZGdlDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRC5wcm90b3R5cGUuU2V0
UmVmZXJlbmNlRWRnZSA9IGZ1bmN0aW9uKGVkZ2UpIHsNCgl0aGlzLl9yZWZlcmVuY2VFZGdlID0g
ZWRnZTsNCgl0aGlzLl9rZXkgPSAodGhpcy5fa2V5ICYgMHhmZmZmZmYwMCkgfCAodGhpcy5fcmVm
ZXJlbmNlRWRnZSAmIDB4MDAwMDAwZmYpOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IGVk
Z2UNCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElELnByb3RvdHlwZS5TZXRJbmNpZGVu
dEVkZ2UgPSBmdW5jdGlvbihlZGdlKSB7DQoJdGhpcy5faW5jaWRlbnRFZGdlID0gZWRnZTsNCgl0
aGlzLl9rZXkgPSAodGhpcy5fa2V5ICYgMHhmZmZmMDBmZikgfCAoKHRoaXMuX2luY2lkZW50RWRn
ZSA8PCA4KSAmIDB4MDAwMGZmMDApOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IHZlcnRl
eA0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQucHJvdG90eXBlLlNldEluY2lkZW50
VmVydGV4ID0gZnVuY3Rpb24odmVydGV4KSB7DQoJdGhpcy5faW5jaWRlbnRWZXJ0ZXggPSB2ZXJ0
ZXg7DQoJdGhpcy5fa2V5ID0gKHRoaXMuX2tleSAmIDB4ZmYwMGZmZmYpIHwgKCh0aGlzLl9pbmNp
ZGVudFZlcnRleCA8PCAxNikgJiAweDAwZmYwMDAwKTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVt
YmVyfSBmbGlwDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRC5wcm90b3R5cGUuU2V0
RmxpcCA9IGZ1bmN0aW9uKGZsaXApIHsNCgl0aGlzLl9mbGlwID0gZmxpcDsNCgl0aGlzLl9rZXkg
PSAodGhpcy5fa2V5ICYgMHgwMGZmZmZmZikgfCAoKHRoaXMuX2ZsaXAgPDwgMjQpICYgMHhmZjAw
MDAwMCk7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElELnByb3RvdHlwZS5Db3B5ID0g
ZnVuY3Rpb24gKCkgew0KICB2YXIgaWQgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElE
KCk7DQogIGlkLlNldCh0aGlzKTsNCiAgcmV0dXJuIGlkOw0KfTsNCi8qKg0KICogQGNvbnN0cnVj
dG9yDQogKi8NCkJveDJELkNvbGxpc2lvbi5DbGlwVmVydGV4ID0gZnVuY3Rpb24oKSB7DQoJdGhp
cy52ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmlkID0gbmV3
IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRCgpOw0KfTsNCkJveDJELkNvbGxpc2lvbi5DbGlw
VmVydGV4LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikgew0KCXRoaXMudi5TZXRWKG90
aGVyLnYpOw0KCXRoaXMuaWQuU2V0KG90aGVyLmlkKTsNCn07DQovKioNCiAqIEBjb25zdA0KICog
QHR5cGUge3N0cmluZ30NCiAqLw0KQm94MkQuQ29sbGlzaW9uLklCcm9hZFBoYXNlID0gJ0JveDJE
LkNvbGxpc2lvbi5JQnJvYWRQaGFzZSc7DQovKioNCiAqIEBwcml2YXRlDQogKiBAY29uc3RydWN0
b3INCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyQUFCQiA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubG93
ZXJCb3VuZF8gPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMudXBw
ZXJCb3VuZF8gPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KfTsNCi8qKg0K
ICogQHByaXZhdGUNCiAqIEB0eXBlIHtBcnJheS48IUJveDJELkNvbGxpc2lvbi5iMkFBQkI+fQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uYjJBQUJCLl9mcmVlQ2FjaGUgPSBbXTsNCi8qKg0KICogQHJl
dHVybiB7IUJveDJELkNvbGxpc2lvbi5iMkFBQkJ9DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkFB
QkIuR2V0ID0gZnVuY3Rpb24oKSB7DQoJaWYgKEJveDJELkNvbGxpc2lvbi5iMkFBQkIuX2ZyZWVD
YWNoZS5sZW5ndGggPiAwKSB7DQoJCXZhciBhYWJiID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5f
ZnJlZUNhY2hlLnBvcCgpOw0KCQlhYWJiLlNldFplcm8oKTsNCgkJcmV0dXJuIGFhYmI7DQoJfQ0K
CXJldHVybiBuZXcgQm94MkQuQ29sbGlzaW9uLmIyQUFCQigpOw0KfTsNCi8qKg0KICogQHBhcmFt
IHshQm94MkQuQ29sbGlzaW9uLmIyQUFCQn0gYWFiYg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJB
QUJCLkZyZWUgPSBmdW5jdGlvbihhYWJiKSB7DQoJQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5fZnJl
ZUNhY2hlLnB1c2goYWFiYik7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5wcm90b3R5cGUu
U2V0WmVybyA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubG93ZXJCb3VuZF8uU2V0KDAsIDApOw0KCXRo
aXMudXBwZXJCb3VuZF8uU2V0KDAsIDApOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0N
CiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5wcm90b3R5cGUuSXNWYWxpZCA9IGZ1bmN0aW9u
KCkgew0KCXZhciBkWCA9IHRoaXMudXBwZXJCb3VuZF8ueCAtIHRoaXMubG93ZXJCb3VuZF8ueDsN
CglpZiAoZFggPCAwKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJdmFyIGRZID0gdGhpcy51cHBl
ckJvdW5kXy55IC0gdGhpcy5sb3dlckJvdW5kXy55Ow0KCWlmIChkWSA8IDApIHsNCgkJcmV0dXJu
IGZhbHNlOw0KCX0NCglyZXR1cm4gdGhpcy5sb3dlckJvdW5kXy5Jc1ZhbGlkKCkgJiYgdGhpcy51
cHBlckJvdW5kXy5Jc1ZhbGlkKCk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMyfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJBQUJCLnByb3RvdHlwZS5HZXRD
ZW50ZXIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgodGhpcy5sb3dlckJvdW5kXy54ICsgdGhpcy51cHBlckJvdW5kXy54KSAvIDIsICh0aGlzLmxv
d2VyQm91bmRfLnkgKyB0aGlzLnVwcGVyQm91bmRfLnkpIC8gMik7DQp9Ow0KLyoqDQogKiBAcGFy
YW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IG5ld0NlbnRlcg0KICovDQpCb3gyRC5Db2xs
aXNpb24uYjJBQUJCLnByb3RvdHlwZS5TZXRDZW50ZXIgPSBmdW5jdGlvbihuZXdDZW50ZXIpIHsN
Cgl2YXIgb2xkQ2VudGVyID0gdGhpcy5HZXRDZW50ZXIoKTsNCgl0aGlzLmxvd2VyQm91bmRfLlN1
YnRyYWN0KG9sZENlbnRlcik7DQoJdGhpcy51cHBlckJvdW5kXy5TdWJ0cmFjdChvbGRDZW50ZXIp
Ow0KCXRoaXMubG93ZXJCb3VuZF8uQWRkKG5ld0NlbnRlcik7DQoJdGhpcy51cHBlckJvdW5kXy5B
ZGQobmV3Q2VudGVyKTsNCglCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuRnJlZShvbGRDZW50ZXIp
Ow0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0K
Qm94MkQuQ29sbGlzaW9uLmIyQUFCQi5wcm90b3R5cGUuR2V0RXh0ZW50cyA9IGZ1bmN0aW9uKCkg
ew0KCXJldHVybiBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KCh0aGlzLnVwcGVyQm91bmRf
LnggLSB0aGlzLmxvd2VyQm91bmRfLngpIC8gMiwgKHRoaXMudXBwZXJCb3VuZF8ueSAtIHRoaXMu
bG93ZXJCb3VuZF8ueSkgLyAyKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lv
bi5iMkFBQkJ9IGFhYmINCiAqIEByZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lv
bi5iMkFBQkIucHJvdG90eXBlLkNvbnRhaW5zID0gZnVuY3Rpb24oYWFiYikgew0KCXZhciByZXN1
bHQgPSB0cnVlOw0KCXJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmRfLnggPD0gYWFi
Yi5sb3dlckJvdW5kXy54Ow0KCXJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmRfLnkg
PD0gYWFiYi5sb3dlckJvdW5kXy55Ow0KCXJlc3VsdCA9IHJlc3VsdCAmJiBhYWJiLnVwcGVyQm91
bmRfLnggPD0gdGhpcy51cHBlckJvdW5kXy54Ow0KCXJlc3VsdCA9IHJlc3VsdCAmJiBhYWJiLnVw
cGVyQm91bmRfLnkgPD0gdGhpcy51cHBlckJvdW5kXy55Ow0KCXJldHVybiByZXN1bHQ7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0T3V0cHV0fSBvdXRwdXQN
CiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RJbnB1dH0gaW5wdXQNCiAqIEBy
ZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkFBQkIucHJvdG90eXBlLlJh
eUNhc3QgPSBmdW5jdGlvbihvdXRwdXQsIGlucHV0KSB7DQoJdmFyIHRtaW4gPSAoLU51bWJlci5N
QVhfVkFMVUUpOw0KCXZhciB0bWF4ID0gTnVtYmVyLk1BWF9WQUxVRTsNCgl2YXIgZFggPSBpbnB1
dC5wMi54IC0gaW5wdXQucDEueDsNCgl2YXIgYWJzRFggPSBNYXRoLmFicyhkWCk7DQoJaWYgKGFi
c0RYIDwgTnVtYmVyLk1JTl9WQUxVRSkgew0KCQlpZiAoaW5wdXQucDEueCA8IHRoaXMubG93ZXJC
b3VuZF8ueCB8fCB0aGlzLnVwcGVyQm91bmRfLnggPCBpbnB1dC5wMS54KSB7DQoJCQlyZXR1cm4g
ZmFsc2U7DQoJCX0NCgl9IGVsc2Ugew0KCQl2YXIgaW52X2QgPSAxLjAgLyBkWDsNCgkJdmFyIHQx
ID0gKHRoaXMubG93ZXJCb3VuZF8ueCAtIGlucHV0LnAxLngpICogaW52X2Q7DQoJCXZhciB0MiA9
ICh0aGlzLnVwcGVyQm91bmRfLnggLSBpbnB1dC5wMS54KSAqIGludl9kOw0KCQl2YXIgcyA9ICgt
MS4wKTsNCgkJaWYgKHQxID4gdDIpIHsNCgkJCXZhciB0MyA9IHQxOw0KCQkJdDEgPSB0MjsNCgkJ
CXQyID0gdDM7DQoJCQlzID0gMS4wOw0KCQl9DQoJCWlmICh0MSA+IHRtaW4pIHsNCgkJCW91dHB1
dC5ub3JtYWwueCA9IHM7DQoJCQlvdXRwdXQubm9ybWFsLnkgPSAwOw0KCQkJdG1pbiA9IHQxOw0K
CQl9DQoJCXRtYXggPSBNYXRoLm1pbih0bWF4LCB0Mik7DQoJCWlmICh0bWluID4gdG1heCkgcmV0
dXJuIGZhbHNlOw0KCX0NCgl2YXIgZFkgPSBpbnB1dC5wMi55IC0gaW5wdXQucDEueTsNCgl2YXIg
YWJzRFkgPSBNYXRoLmFicyhkWSk7DQoJaWYgKGFic0RZIDwgTnVtYmVyLk1JTl9WQUxVRSkgew0K
CQlpZiAoaW5wdXQucDEueSA8IHRoaXMubG93ZXJCb3VuZF8ueSB8fCB0aGlzLnVwcGVyQm91bmRf
LnkgPCBpbnB1dC5wMS55KSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgl9IGVsc2Ugew0KCQl2
YXIgaW52X2QgPSAxLjAgLyBkWTsNCgkJdmFyIHQxID0gKHRoaXMubG93ZXJCb3VuZF8ueSAtIGlu
cHV0LnAxLnkpICogaW52X2Q7DQoJCXZhciB0MiA9ICh0aGlzLnVwcGVyQm91bmRfLnkgLSBpbnB1
dC5wMS55KSAqIGludl9kOw0KCQl2YXIgcyA9ICgtMS4wKTsNCgkJaWYgKHQxID4gdDIpIHsNCgkJ
CXZhciB0MyA9IHQxOw0KCQkJdDEgPSB0MjsNCgkJCXQyID0gdDM7DQoJCQlzID0gMS4wOw0KCQl9
DQoJCWlmICh0MSA+IHRtaW4pIHsNCgkJCW91dHB1dC5ub3JtYWwueSA9IHM7DQoJCQlvdXRwdXQu
bm9ybWFsLnggPSAwOw0KCQkJdG1pbiA9IHQxOw0KCQl9DQoJCXRtYXggPSBNYXRoLm1pbih0bWF4
LCB0Mik7DQoJCWlmICh0bWluID4gdG1heCkgew0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJfQ0K
CW91dHB1dC5mcmFjdGlvbiA9IHRtaW47DQoJcmV0dXJuIHRydWU7DQp9Ow0KLyoqDQogKiBAcGFy
YW0geyFCb3gyRC5Db2xsaXNpb24uYjJBQUJCfSBvdGhlcg0KICogQHJldHVybiB7Ym9vbGVhbn0N
CiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5wcm90b3R5cGUuVGVzdE92ZXJsYXAgPSBmdW5j
dGlvbihvdGhlcikgew0KCWlmICggb3RoZXIubG93ZXJCb3VuZF8ueCAtIHRoaXMudXBwZXJCb3Vu
ZF8ueCA+IDAgKSB7IHJldHVybiBmYWxzZTsgfQ0KCWlmICggb3RoZXIubG93ZXJCb3VuZF8ueSAt
IHRoaXMudXBwZXJCb3VuZF8ueSA+IDAgKSB7IHJldHVybiBmYWxzZTsgfQ0KCWlmICggdGhpcy5s
b3dlckJvdW5kXy54IC0gb3RoZXIudXBwZXJCb3VuZF8ueCA+IDAgKSB7IHJldHVybiBmYWxzZTsg
fQ0KCWlmICggdGhpcy5sb3dlckJvdW5kXy55IC0gb3RoZXIudXBwZXJCb3VuZF8ueSA+IDAgKSB7
IHJldHVybiBmYWxzZTsgfQ0KCXJldHVybiB0cnVlOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuQ29sbGlzaW9uLmIyQUFCQn0gYWFiYjENCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5i
MkFBQkJ9IGFhYmIyDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlzaW9uLmIyQUFCQn0NCiAqLw0K
Qm94MkQuQ29sbGlzaW9uLmIyQUFCQi5Db21iaW5lID0gZnVuY3Rpb24oYWFiYjEsIGFhYmIyKSB7
DQoJdmFyIGFhYmIgPSBCb3gyRC5Db2xsaXNpb24uYjJBQUJCLkdldCgpOw0KCWFhYmIuQ29tYmlu
ZShhYWJiMSwgYWFiYjIpOw0KCXJldHVybiBhYWJiOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuQ29sbGlzaW9uLmIyQUFCQn0gYWFiYjENCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5i
MkFBQkJ9IGFhYmIyDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkFBQkIucHJvdG90eXBlLkNvbWJp
bmUgPSBmdW5jdGlvbihhYWJiMSwgYWFiYjIpIHsNCgl0aGlzLmxvd2VyQm91bmRfLnggPSBNYXRo
Lm1pbihhYWJiMS5sb3dlckJvdW5kXy54LCBhYWJiMi5sb3dlckJvdW5kXy54KTsNCgl0aGlzLmxv
d2VyQm91bmRfLnkgPSBNYXRoLm1pbihhYWJiMS5sb3dlckJvdW5kXy55LCBhYWJiMi5sb3dlckJv
dW5kXy55KTsNCgl0aGlzLnVwcGVyQm91bmRfLnggPSBNYXRoLm1heChhYWJiMS51cHBlckJvdW5k
Xy54LCBhYWJiMi51cHBlckJvdW5kXy54KTsNCgl0aGlzLnVwcGVyQm91bmRfLnkgPSBNYXRoLm1h
eChhYWJiMS51cHBlckJvdW5kXy55LCBhYWJiMi51cHBlckJvdW5kXy55KTsNCn07DQovKioNCiAq
IEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gdk91dA0KICogQHBhcmFtIHshQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyfSB2SW4NCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMn0gbm9ybWFsDQogKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0DQogKi8NCkJveDJELkNv
bGxpc2lvbi5iMkNvbGxpc2lvbi5DbGlwU2VnbWVudFRvTGluZSA9IGZ1bmN0aW9uKHZPdXQsIHZJ
biwgbm9ybWFsLCBvZmZzZXQpIHsNCgl2YXIgbnVtT3V0ID0gMDsNCgl2YXIgdkluMCA9IHZJblsw
XS52Ow0KCXZhciB2SW4xID0gdkluWzFdLnY7DQoJdmFyIGRpc3RhbmNlMCA9IG5vcm1hbC54ICog
dkluMC54ICsgbm9ybWFsLnkgKiB2SW4wLnkgLSBvZmZzZXQ7DQoJdmFyIGRpc3RhbmNlMSA9IG5v
cm1hbC54ICogdkluMS54ICsgbm9ybWFsLnkgKiB2SW4xLnkgLSBvZmZzZXQ7DQoJaWYgKGRpc3Rh
bmNlMCA8PSAwLjApIHsNCgkJdk91dFtudW1PdXQrK10uU2V0KHZJblswXSk7DQoJfQ0KCWlmIChk
aXN0YW5jZTEgPD0gMC4wKSB7DQoJCXZPdXRbbnVtT3V0KytdLlNldCh2SW5bMV0pOw0KCX0NCglp
ZiAoZGlzdGFuY2UwICogZGlzdGFuY2UxIDwgMC4wKSB7DQoJCXZhciBpbnRlcnAgPSBkaXN0YW5j
ZTAgLyAoZGlzdGFuY2UwIC0gZGlzdGFuY2UxKTsNCgkJdmFyIHRWZWMgPSB2T3V0W251bU91dF0u
djsNCgkJdFZlYy54ID0gdkluMC54ICsgaW50ZXJwICogKHZJbjEueCAtIHZJbjAueCk7DQoJCXRW
ZWMueSA9IHZJbjAueSArIGludGVycCAqICh2SW4xLnkgLSB2SW4wLnkpOw0KCQlpZiAoZGlzdGFu
Y2UwID4gMC4wKSB7DQoJCQl2T3V0W251bU91dF0uaWQgPSB2SW5bMF0uaWQ7DQoJCX0gZWxzZSB7
DQoJCQl2T3V0W251bU91dF0uaWQgPSB2SW5bMV0uaWQ7DQoJCX0NCgkJbnVtT3V0Kys7DQoJfQ0K
CXJldHVybiBudW1PdXQ7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uU2hh
cGVzLmIyUG9seWdvblNoYXBlfSBwb2x5MQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGgu
YjJUcmFuc2Zvcm19IHhmMQ0KICogQHBhcmFtIHtudW1iZXJ9IGVkZ2UxDQogKiBAcGFyYW0geyFC
b3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlfSBwb2x5Mg0KICogQHBhcmFtIHsh
Qm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHhmMQ0KICogQHJldHVybiB7bnVtYmVyfQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uRWRnZVNlcGFyYXRpb24gPSBmdW5jdGlv
bihwb2x5MSwgeGYxLCBlZGdlMSwgcG9seTIsIHhmMikgew0KCXZhciBub3JtYWwxV29ybGRYID0g
KHhmMS5SLmNvbDEueCAqIHBvbHkxLm1fbm9ybWFsc1tlZGdlMV0ueCArIHhmMS5SLmNvbDIueCAq
IHBvbHkxLm1fbm9ybWFsc1tlZGdlMV0ueSk7DQoJdmFyIG5vcm1hbDFXb3JsZFkgPSAoeGYxLlIu
Y29sMS55ICogcG9seTEubV9ub3JtYWxzW2VkZ2UxXS54ICsgeGYxLlIuY29sMi55ICogcG9seTEu
bV9ub3JtYWxzW2VkZ2UxXS55KTsNCgl2YXIgbm9ybWFsMVggPSAoeGYyLlIuY29sMS54ICogbm9y
bWFsMVdvcmxkWCArIHhmMi5SLmNvbDEueSAqIG5vcm1hbDFXb3JsZFkpOw0KCXZhciBub3JtYWwx
WSA9ICh4ZjIuUi5jb2wyLnggKiBub3JtYWwxV29ybGRYICsgeGYyLlIuY29sMi55ICogbm9ybWFs
MVdvcmxkWSk7DQoJdmFyIGluZGV4ID0gMDsNCgl2YXIgbWluRG90ID0gTnVtYmVyLk1BWF9WQUxV
RTsNCglmb3IgKHZhciBpID0gMDsgaSA8IHBvbHkyLm1fdmVydGV4Q291bnQ7IGkrKykgew0KCQl2
YXIgZG90ID0gcG9seTIubV92ZXJ0aWNlc1tpXS54ICogbm9ybWFsMVggKyBwb2x5Mi5tX3ZlcnRp
Y2VzW2ldLnkgKiBub3JtYWwxWTsNCgkJaWYgKGRvdCA8IG1pbkRvdCkgew0KCQkJbWluRG90ID0g
ZG90Ow0KCQkJaW5kZXggPSBpOw0KCQl9DQoJfQ0KCXZhciB2MVggPSB4ZjEucG9zaXRpb24ueCAr
ICh4ZjEuUi5jb2wxLnggKiBwb2x5MS5tX3ZlcnRpY2VzW2VkZ2UxXS54ICsgeGYxLlIuY29sMi54
ICogcG9seTEubV92ZXJ0aWNlc1tlZGdlMV0ueSk7DQoJdmFyIHYxWSA9IHhmMS5wb3NpdGlvbi55
ICsgKHhmMS5SLmNvbDEueSAqIHBvbHkxLm1fdmVydGljZXNbZWRnZTFdLnggKyB4ZjEuUi5jb2wy
LnkgKiBwb2x5MS5tX3ZlcnRpY2VzW2VkZ2UxXS55KTsNCgl2YXIgdjJYID0geGYyLnBvc2l0aW9u
LnggKyAoeGYyLlIuY29sMS54ICogcG9seTIubV92ZXJ0aWNlc1tpbmRleF0ueCArIHhmMi5SLmNv
bDIueCAqIHBvbHkyLm1fdmVydGljZXNbaW5kZXhdLnkpOw0KCXZhciB2MlkgPSB4ZjIucG9zaXRp
b24ueSArICh4ZjIuUi5jb2wxLnkgKiBwb2x5Mi5tX3ZlcnRpY2VzW2luZGV4XS54ICsgeGYyLlIu
Y29sMi55ICogcG9seTIubV92ZXJ0aWNlc1tpbmRleF0ueSk7DQoJdmFyIHNlcGFyYXRpb24gPSAo
djJYIC0gdjFYKSAqIG5vcm1hbDFXb3JsZFggKyAodjJZIC0gdjFZKSAqIG5vcm1hbDFXb3JsZFk7
DQoJcmV0dXJuIHNlcGFyYXRpb247DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNp
b24uU2hhcGVzLmIyUG9seWdvblNoYXBlfSBwb2x5MQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9u
Lk1hdGguYjJUcmFuc2Zvcm19IHhmMQ0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLlNoYXBl
cy5iMlBvbHlnb25TaGFwZX0gcG9seTINCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIy
VHJhbnNmb3JtfSB4ZjENCiAqIEByZXR1cm4ge3tiZXN0RWRnZTogbnVtYmVyLCBzZXBhcmF0aW9u
OiBudW1iZXJ9fQ0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uRmluZE1heFNlcGFy
YXRpb24gPSBmdW5jdGlvbihwb2x5MSwgeGYxLCBwb2x5MiwgeGYyKSB7DQoJdmFyIGRYID0geGYy
LnBvc2l0aW9uLnggKyAoeGYyLlIuY29sMS54ICogcG9seTIubV9jZW50cm9pZC54ICsgeGYyLlIu
Y29sMi54ICogcG9seTIubV9jZW50cm9pZC55KTsNCgl2YXIgZFkgPSB4ZjIucG9zaXRpb24ueSAr
ICh4ZjIuUi5jb2wxLnkgKiBwb2x5Mi5tX2NlbnRyb2lkLnggKyB4ZjIuUi5jb2wyLnkgKiBwb2x5
Mi5tX2NlbnRyb2lkLnkpOw0KCWRYIC09IHhmMS5wb3NpdGlvbi54ICsgKHhmMS5SLmNvbDEueCAq
IHBvbHkxLm1fY2VudHJvaWQueCArIHhmMS5SLmNvbDIueCAqIHBvbHkxLm1fY2VudHJvaWQueSk7
DQoJZFkgLT0geGYxLnBvc2l0aW9uLnkgKyAoeGYxLlIuY29sMS55ICogcG9seTEubV9jZW50cm9p
ZC54ICsgeGYxLlIuY29sMi55ICogcG9seTEubV9jZW50cm9pZC55KTsNCgl2YXIgZExvY2FsMVgg
PSAoZFggKiB4ZjEuUi5jb2wxLnggKyBkWSAqIHhmMS5SLmNvbDEueSk7DQoJdmFyIGRMb2NhbDFZ
ID0gKGRYICogeGYxLlIuY29sMi54ICsgZFkgKiB4ZjEuUi5jb2wyLnkpOw0KCXZhciBlZGdlID0g
MDsNCgl2YXIgbWF4RG90ID0gKC1OdW1iZXIuTUFYX1ZBTFVFKTsNCglmb3IgKHZhciBpID0gMDsg
aSA8IHBvbHkxLm1fdmVydGV4Q291bnQ7ICsraSkgew0KCQl2YXIgZG90ID0gKHBvbHkxLm1fbm9y
bWFsc1tpXS54ICogZExvY2FsMVggKyBwb2x5MS5tX25vcm1hbHNbaV0ueSAqIGRMb2NhbDFZKTsN
CgkJaWYgKGRvdCA+IG1heERvdCkgew0KCQkJbWF4RG90ID0gZG90Ow0KCQkJZWRnZSA9IGk7DQoJ
CX0NCgl9DQoJdmFyIHMgPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uRWRnZVNlcGFyYXRp
b24ocG9seTEsIHhmMSwgZWRnZSwgcG9seTIsIHhmMik7DQoJdmFyIHByZXZFZGdlID0gZWRnZSAt
IDE7DQoJaWYgKHByZXZFZGdlIDwgMCkgew0KCQlwcmV2RWRnZSA9IHBvbHkxLm1fdmVydGV4Q291
bnQgLSAxOw0KCX0NCgl2YXIgc1ByZXYgPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uRWRn
ZVNlcGFyYXRpb24ocG9seTEsIHhmMSwgcHJldkVkZ2UsIHBvbHkyLCB4ZjIpOw0KCXZhciBuZXh0
RWRnZSA9IGVkZ2UgKyAxOw0KCWlmIChuZXh0RWRnZSA+PSBwb2x5MS5tX3ZlcnRleENvdW50KSB7
DQoJCW5leHRFZGdlID0gMDsNCgl9DQoJdmFyIHNOZXh0ID0gQm94MkQuQ29sbGlzaW9uLmIyQ29s
bGlzaW9uLkVkZ2VTZXBhcmF0aW9uKHBvbHkxLCB4ZjEsIG5leHRFZGdlLCBwb2x5MiwgeGYyKTsN
Cgl2YXIgYmVzdEVkZ2UgPSAwOw0KCXZhciBiZXN0U2VwYXJhdGlvbiA9IDA7DQoJaWYgKHNQcmV2
ID4gcyAmJiBzUHJldiA+IHNOZXh0KSB7DQoJCWJlc3RFZGdlID0gcHJldkVkZ2U7DQoJCWJlc3RT
ZXBhcmF0aW9uID0gc1ByZXY7DQoJCXdoaWxlICh0cnVlKSB7DQoJCQllZGdlID0gYmVzdEVkZ2Ug
LSAxOw0KCQkJaWYgKGVkZ2UgPCAwKSB7DQoJCQkJZWRnZSA9IHBvbHkxLm1fdmVydGV4Q291bnQg
LSAxOw0KCQkJfQ0KCQkJcyA9IEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5FZGdlU2VwYXJh
dGlvbihwb2x5MSwgeGYxLCBlZGdlLCBwb2x5MiwgeGYyKTsNCgkJCWlmIChzID4gYmVzdFNlcGFy
YXRpb24pIHsNCgkJCQliZXN0RWRnZSA9IGVkZ2U7DQoJCQkJYmVzdFNlcGFyYXRpb24gPSBzOw0K
CQkJfSBlbHNlIHsNCgkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCX0gZWxzZSBpZiAoc05leHQgPiBz
KSB7DQoJCWJlc3RFZGdlID0gbmV4dEVkZ2U7DQoJCWJlc3RTZXBhcmF0aW9uID0gc05leHQ7DQoJ
CXdoaWxlICh0cnVlKSB7DQoJCQllZGdlID0gYmVzdEVkZ2UgKyAxOw0KCQkJaWYgKGVkZ2UgPj0g
cG9seTEubV92ZXJ0ZXhDb3VudCkgew0KCQkJCWVkZ2UgPSAwOw0KCQkJfQ0KCQkJcyA9IEJveDJE
LkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5FZGdlU2VwYXJhdGlvbihwb2x5MSwgeGYxLCBlZGdlLCBw
b2x5MiwgeGYyKTsNCgkJCWlmIChzID4gYmVzdFNlcGFyYXRpb24pIHsNCgkJCQliZXN0RWRnZSA9
IGVkZ2U7DQoJCQkJYmVzdFNlcGFyYXRpb24gPSBzOw0KCQkJfSBlbHNlIHsNCgkJCQlicmVhazsN
CgkJCX0NCgkJfQ0KCX0gZWxzZSB7DQoJCWJlc3RFZGdlID0gZWRnZTsNCgkJYmVzdFNlcGFyYXRp
b24gPSBzOw0KCX0NCglyZXR1cm4ge2Jlc3RFZGdlOiBiZXN0RWRnZSwgc2VwYXJhdGlvbjogYmVz
dFNlcGFyYXRpb259Ow0KfTsNCkJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5GaW5kSW5jaWRl
bnRFZGdlID0gZnVuY3Rpb24oYywgcG9seTEsIHhmMSwgZWRnZTEsIHBvbHkyLCB4ZjIpIHsNCglp
ZiAoZWRnZTEgPT09IHVuZGVmaW5lZCkgZWRnZTEgPSAwOw0KCXZhciBub3JtYWwxWCA9ICh4ZjEu
Ui5jb2wxLnggKiBwb2x5MS5tX25vcm1hbHNbZWRnZTFdLnggKyB4ZjEuUi5jb2wyLnggKiBwb2x5
MS5tX25vcm1hbHNbZWRnZTFdLnkpOw0KCXZhciBub3JtYWwxWSA9ICh4ZjEuUi5jb2wxLnkgKiBw
b2x5MS5tX25vcm1hbHNbZWRnZTFdLnggKyB4ZjEuUi5jb2wyLnkgKiBwb2x5MS5tX25vcm1hbHNb
ZWRnZTFdLnkpOw0KCXZhciB0WCA9ICh4ZjIuUi5jb2wxLnggKiBub3JtYWwxWCArIHhmMi5SLmNv
bDEueSAqIG5vcm1hbDFZKTsNCglub3JtYWwxWSA9ICh4ZjIuUi5jb2wyLnggKiBub3JtYWwxWCAr
IHhmMi5SLmNvbDIueSAqIG5vcm1hbDFZKTsNCglub3JtYWwxWCA9IHRYOw0KCXZhciBpMSA9IDA7
DQoJdmFyIG1pbkRvdCA9IE51bWJlci5NQVhfVkFMVUU7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCBw
b2x5Mi5tX3ZlcnRleENvdW50OyBpKyspIHsNCgkJdmFyIGRvdCA9IChub3JtYWwxWCAqIHBvbHky
Lm1fbm9ybWFsc1tpXS54ICsgbm9ybWFsMVkgKiBwb2x5Mi5tX25vcm1hbHNbaV0ueSk7DQoJCWlm
IChkb3QgPCBtaW5Eb3QpIHsNCgkJCW1pbkRvdCA9IGRvdDsNCgkJCWkxID0gaTsNCgkJfQ0KCX0N
Cgl2YXIgaTIgPSBpMSArIDE7DQoJaWYgKGkyID49IHBvbHkyLm1fdmVydGV4Q291bnQpIHsNCgkJ
aTIgPSAwOw0KCX0NCgljWzBdLnYueCA9IHhmMi5wb3NpdGlvbi54ICsgKHhmMi5SLmNvbDEueCAq
IHBvbHkyLm1fdmVydGljZXNbaTFdLnggKyB4ZjIuUi5jb2wyLnggKiBwb2x5Mi5tX3ZlcnRpY2Vz
W2kxXS55KTsNCgljWzBdLnYueSA9IHhmMi5wb3NpdGlvbi55ICsgKHhmMi5SLmNvbDEueSAqIHBv
bHkyLm1fdmVydGljZXNbaTFdLnggKyB4ZjIuUi5jb2wyLnkgKiBwb2x5Mi5tX3ZlcnRpY2VzW2kx
XS55KTsNCgljWzBdLmlkLlNldFJlZmVyZW5jZUVkZ2UoZWRnZTEpOw0KCWNbMF0uaWQuU2V0SW5j
aWRlbnRFZGdlKGkxKTsNCgljWzBdLmlkLlNldEluY2lkZW50VmVydGV4KDApOw0KCWNbMV0udi54
ID0geGYyLnBvc2l0aW9uLnggKyAoeGYyLlIuY29sMS54ICogcG9seTIubV92ZXJ0aWNlc1tpMl0u
eCArIHhmMi5SLmNvbDIueCAqIHBvbHkyLm1fdmVydGljZXNbaTJdLnkpOw0KCWNbMV0udi55ID0g
eGYyLnBvc2l0aW9uLnkgKyAoeGYyLlIuY29sMS55ICogcG9seTIubV92ZXJ0aWNlc1tpMl0ueCAr
IHhmMi5SLmNvbDIueSAqIHBvbHkyLm1fdmVydGljZXNbaTJdLnkpOw0KCWNbMV0uaWQuU2V0UmVm
ZXJlbmNlRWRnZShlZGdlMSk7DQoJY1sxXS5pZC5TZXRJbmNpZGVudEVkZ2UoaTIpOw0KCWNbMV0u
aWQuU2V0SW5jaWRlbnRWZXJ0ZXgoMSk7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9u
Lk1ha2VDbGlwUG9pbnRWZWN0b3IgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gW25ldyBCb3gyRC5D
b2xsaXNpb24uQ2xpcFZlcnRleCgpLCBuZXcgQm94MkQuQ29sbGlzaW9uLkNsaXBWZXJ0ZXgoKV07
DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLkNvbGxpZGVQb2x5Z29ucyA9IGZ1bmN0
aW9uKG1hbmlmb2xkLCBwb2x5QSwgeGZBLCBwb2x5QiwgeGZCKSB7DQoJbWFuaWZvbGQubV9wb2lu
dENvdW50ID0gMDsNCgl2YXIgdG90YWxSYWRpdXMgPSBwb2x5QS5tX3JhZGl1cyArIHBvbHlCLm1f
cmFkaXVzOw0KCXZhciBzZXBhcmF0aW9uRWRnZUEgPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNp
b24uRmluZE1heFNlcGFyYXRpb24ocG9seUEsIHhmQSwgcG9seUIsIHhmQik7DQoJdmFyIGVkZ2Ux
ID0gc2VwYXJhdGlvbkVkZ2VBLmJlc3RFZGdlOw0KCWlmIChzZXBhcmF0aW9uRWRnZUEuc2VwYXJh
dGlvbiA+IHRvdGFsUmFkaXVzKSB7DQoJCXJldHVybjsNCgl9DQoJdmFyIHNlcGFyYXRpb25FZGdl
QiA9IEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5GaW5kTWF4U2VwYXJhdGlvbihwb2x5Qiwg
eGZCLCBwb2x5QSwgeGZBKTsNCglpZiAoc2VwYXJhdGlvbkVkZ2VCLnNlcGFyYXRpb24gPiB0b3Rh
bFJhZGl1cykgew0KCQlyZXR1cm47DQoJfQ0KCXZhciBwb2x5MSA9IHBvbHlBOw0KCXZhciBwb2x5
MiA9IHBvbHlCOw0KCXZhciB4ZjEgPSB4ZkE7DQoJdmFyIHhmMiA9IHhmQjsNCgl2YXIgZmxpcCA9
IDA7DQoJbWFuaWZvbGQubV90eXBlID0gQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQuZV9mYWNl
QTsNCglpZiAoc2VwYXJhdGlvbkVkZ2VCLnNlcGFyYXRpb24gPiAwLjk4IC8qIGtfcmVsYXRpdmVU
b2wgKi8gKiBzZXBhcmF0aW9uRWRnZUEuc2VwYXJhdGlvbiArIDAuMDAxIC8qIGtfYWJzb2x1dGVU
b2wgKi8gKSB7DQoJCXBvbHkxID0gcG9seUI7DQoJCXBvbHkyID0gcG9seUE7DQoJCXhmMSA9IHhm
QjsNCgkJeGYyID0geGZBOw0KCQllZGdlMSA9IHNlcGFyYXRpb25FZGdlQi5iZXN0RWRnZTsNCgkJ
bWFuaWZvbGQubV90eXBlID0gQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQuZV9mYWNlQjsNCgkJ
ZmxpcCA9IDE7DQoJfQ0KCXZhciBpbmNpZGVudEVkZ2UgPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xs
aXNpb24uc19pbmNpZGVudEVkZ2U7DQoJQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLkZpbmRJ
bmNpZGVudEVkZ2UoaW5jaWRlbnRFZGdlLCBwb2x5MSwgeGYxLCBlZGdlMSwgcG9seTIsIHhmMik7
DQoJdmFyIGxvY2FsX3YxMSA9IHBvbHkxLm1fdmVydGljZXNbZWRnZTFdOw0KCXZhciBsb2NhbF92
MTI7DQoJaWYgKGVkZ2UxICsgMSA8IHBvbHkxLm1fdmVydGV4Q291bnQpIHsNCgkJbG9jYWxfdjEy
ID0gcG9seTEubV92ZXJ0aWNlc1tlZGdlMSArIDFdOw0KCX0gZWxzZSB7DQoJCWxvY2FsX3YxMiA9
IHBvbHkxLm1fdmVydGljZXNbMF07DQoJfQ0KCUJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5z
X2xvY2FsVGFuZ2VudC5TZXQobG9jYWxfdjEyLnggLSBsb2NhbF92MTEueCwgbG9jYWxfdjEyLnkg
LSBsb2NhbF92MTEueSk7DQoJQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfbG9jYWxUYW5n
ZW50Lk5vcm1hbGl6ZSgpOw0KCUJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX2xvY2FsTm9y
bWFsLnggPSBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQueTsNCglC
b3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc19sb2NhbE5vcm1hbC55ID0gKC1Cb3gyRC5Db2xs
aXNpb24uYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQueCk7DQoJQm94MkQuQ29sbGlzaW9uLmIy
Q29sbGlzaW9uLnNfcGxhbmVQb2ludC5TZXQoMC41ICogKGxvY2FsX3YxMS54ICsgbG9jYWxfdjEy
LngpLCAwLjUgKiAobG9jYWxfdjExLnkgKyBsb2NhbF92MTIueSkpOw0KCUJveDJELkNvbGxpc2lv
bi5iMkNvbGxpc2lvbi5zX3RhbmdlbnQueCA9ICh4ZjEuUi5jb2wxLnggKiBCb3gyRC5Db2xsaXNp
b24uYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQueCArIHhmMS5SLmNvbDIueCAqIEJveDJELkNv
bGxpc2lvbi5iMkNvbGxpc2lvbi5zX2xvY2FsVGFuZ2VudC55KTsNCglCb3gyRC5Db2xsaXNpb24u
YjJDb2xsaXNpb24uc190YW5nZW50LnkgPSAoeGYxLlIuY29sMS55ICogQm94MkQuQ29sbGlzaW9u
LmIyQ29sbGlzaW9uLnNfbG9jYWxUYW5nZW50LnggKyB4ZjEuUi5jb2wyLnkgKiBCb3gyRC5Db2xs
aXNpb24uYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQueSk7DQoJQm94MkQuQ29sbGlzaW9uLmIy
Q29sbGlzaW9uLnNfdGFuZ2VudDIueCA9ICgtQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNf
dGFuZ2VudC54KTsNCglCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50Mi55ID0g
KC1Cb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50LnkpOw0KCUJveDJELkNvbGxp
c2lvbi5iMkNvbGxpc2lvbi5zX25vcm1hbC54ID0gQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9u
LnNfdGFuZ2VudC55Ow0KCUJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX25vcm1hbC55ID0g
KC1Cb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50LngpOw0KCUJveDJELkNvbGxp
c2lvbi5iMkNvbGxpc2lvbi5zX3YxMS54ID0geGYxLnBvc2l0aW9uLnggKyAoeGYxLlIuY29sMS54
ICogbG9jYWxfdjExLnggKyB4ZjEuUi5jb2wyLnggKiBsb2NhbF92MTEueSk7DQoJQm94MkQuQ29s
bGlzaW9uLmIyQ29sbGlzaW9uLnNfdjExLnkgPSB4ZjEucG9zaXRpb24ueSArICh4ZjEuUi5jb2wx
LnkgKiBsb2NhbF92MTEueCArIHhmMS5SLmNvbDIueSAqIGxvY2FsX3YxMS55KTsNCglCb3gyRC5D
b2xsaXNpb24uYjJDb2xsaXNpb24uc192MTIueCA9IHhmMS5wb3NpdGlvbi54ICsgKHhmMS5SLmNv
bDEueCAqIGxvY2FsX3YxMi54ICsgeGYxLlIuY29sMi54ICogbG9jYWxfdjEyLnkpOw0KCUJveDJE
LkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX3YxMi55ID0geGYxLnBvc2l0aW9uLnkgKyAoeGYxLlIu
Y29sMS55ICogbG9jYWxfdjEyLnggKyB4ZjEuUi5jb2wyLnkgKiBsb2NhbF92MTIueSk7DQoJdmFy
IHNpZGVPZmZzZXQxID0gKC1Cb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50Lngg
KiBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc192MTEueCkgLSBCb3gyRC5Db2xsaXNpb24u
YjJDb2xsaXNpb24uc190YW5nZW50LnkgKiBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc192
MTEueSArIHRvdGFsUmFkaXVzOw0KCWlmIChCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uQ2xp
cFNlZ21lbnRUb0xpbmUoQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfY2xpcFBvaW50czEs
IGluY2lkZW50RWRnZSwgQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfdGFuZ2VudDIsIHNp
ZGVPZmZzZXQxKSA8IDIpIHsNCgkJcmV0dXJuOw0KCX0NCgl2YXIgc2lkZU9mZnNldDIgPSBCb3gy
RC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50LnggKiBCb3gyRC5Db2xsaXNpb24uYjJD
b2xsaXNpb24uc192MTIueCArIEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX3RhbmdlbnQu
eSAqIEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX3YxMi55ICsgdG90YWxSYWRpdXM7DQoJ
aWYgKEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5DbGlwU2VnbWVudFRvTGluZShCb3gyRC5D
b2xsaXNpb24uYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMiwgQm94MkQuQ29sbGlzaW9uLmIyQ29s
bGlzaW9uLnNfY2xpcFBvaW50czEsIEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX3Rhbmdl
bnQsIHNpZGVPZmZzZXQyKSA8IDIpIHsNCgkJcmV0dXJuOw0KCX0NCgltYW5pZm9sZC5tX2xvY2Fs
UGxhbmVOb3JtYWwuU2V0VihCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc19sb2NhbE5vcm1h
bCk7DQoJbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYoQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlz
aW9uLnNfcGxhbmVQb2ludCk7DQoJdmFyIGZyb250T2Zmc2V0ID0gQm94MkQuQ29sbGlzaW9uLmIy
Q29sbGlzaW9uLnNfbm9ybWFsLnggKiBCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc192MTEu
eCArIEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX25vcm1hbC55ICogQm94MkQuQ29sbGlz
aW9uLmIyQ29sbGlzaW9uLnNfdjExLnk7DQoJdmFyIHBvaW50Q291bnQgPSAwOw0KCWZvciAodmFy
IGkgPSAwOyBpIDwgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHM7
ICsraSkgew0KCQl2YXIgc2VwYXJhdGlvbiA9IEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5z
X25vcm1hbC54ICogQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfY2xpcFBvaW50czJbaV0u
di54ICsgQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfbm9ybWFsLnkgKiBCb3gyRC5Db2xs
aXNpb24uYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMltpXS52LnkgLSBmcm9udE9mZnNldDsNCgkJ
aWYgKHNlcGFyYXRpb24gPD0gdG90YWxSYWRpdXMpIHsNCgkJCXZhciB0WCA9IEJveDJELkNvbGxp
c2lvbi5iMkNvbGxpc2lvbi5zX2NsaXBQb2ludHMyW2ldLnYueCAtIHhmMi5wb3NpdGlvbi54Ow0K
CQkJdmFyIHRZID0gQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfY2xpcFBvaW50czJbaV0u
di55IC0geGYyLnBvc2l0aW9uLnk7DQoJCQltYW5pZm9sZC5tX3BvaW50c1twb2ludENvdW50XS5t
X2xvY2FsUG9pbnQueCA9ICh0WCAqIHhmMi5SLmNvbDEueCArIHRZICogeGYyLlIuY29sMS55KTsN
CgkJCW1hbmlmb2xkLm1fcG9pbnRzW3BvaW50Q291bnRdLm1fbG9jYWxQb2ludC55ID0gKHRYICog
eGYyLlIuY29sMi54ICsgdFkgKiB4ZjIuUi5jb2wyLnkpOw0KCQkJbWFuaWZvbGQubV9wb2ludHNb
cG9pbnRDb3VudF0ubV9pZC5TZXQoQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfY2xpcFBv
aW50czJbaV0uaWQpOw0KCQkJbWFuaWZvbGQubV9wb2ludHNbcG9pbnRDb3VudF0ubV9pZC5TZXRG
bGlwKGZsaXApOw0KCQkJcG9pbnRDb3VudCsrOw0KCQl9DQoJfQ0KCW1hbmlmb2xkLm1fcG9pbnRD
b3VudCA9IHBvaW50Q291bnQ7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLkNvbGxp
ZGVDaXJjbGVzID0gZnVuY3Rpb24obWFuaWZvbGQsIGNpcmNsZTEsIHhmMSwgY2lyY2xlMiwgeGYy
KSB7DQoJbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDsNCgl2YXIgcDFYID0geGYxLnBvc2l0aW9u
LnggKyAoeGYxLlIuY29sMS54ICogY2lyY2xlMS5tX3AueCArIHhmMS5SLmNvbDIueCAqIGNpcmNs
ZTEubV9wLnkpOw0KCXZhciBwMVkgPSB4ZjEucG9zaXRpb24ueSArICh4ZjEuUi5jb2wxLnkgKiBj
aXJjbGUxLm1fcC54ICsgeGYxLlIuY29sMi55ICogY2lyY2xlMS5tX3AueSk7DQoJdmFyIHAyWCA9
IHhmMi5wb3NpdGlvbi54ICsgKHhmMi5SLmNvbDEueCAqIGNpcmNsZTIubV9wLnggKyB4ZjIuUi5j
b2wyLnggKiBjaXJjbGUyLm1fcC55KTsNCgl2YXIgcDJZID0geGYyLnBvc2l0aW9uLnkgKyAoeGYy
LlIuY29sMS55ICogY2lyY2xlMi5tX3AueCArIHhmMi5SLmNvbDIueSAqIGNpcmNsZTIubV9wLnkp
Ow0KCXZhciBkWCA9IHAyWCAtIHAxWDsNCgl2YXIgZFkgPSBwMlkgLSBwMVk7DQoJdmFyIGRpc3RT
cXIgPSBkWCAqIGRYICsgZFkgKiBkWTsNCgl2YXIgcmFkaXVzID0gY2lyY2xlMS5tX3JhZGl1cyAr
IGNpcmNsZTIubV9yYWRpdXM7DQoJaWYgKGRpc3RTcXIgPiByYWRpdXMgKiByYWRpdXMpIHsNCgkJ
cmV0dXJuOw0KCX0NCgltYW5pZm9sZC5tX3R5cGUgPSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9s
ZC5lX2NpcmNsZXM7DQoJbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlMS5tX3ApOw0K
CW1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRaZXJvKCk7DQoJbWFuaWZvbGQubV9wb2lu
dENvdW50ID0gMTsNCgltYW5pZm9sZC5tX3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJj
bGUyLm1fcCk7DQoJbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5TZXRLZXkoMCk7DQp9Ow0KQm94
MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlID0gZnVuY3Rp
b24obWFuaWZvbGQsIHBvbHlnb24sIHhmMSwgY2lyY2xlLCB4ZjIpIHsNCgltYW5pZm9sZC5tX3Bv
aW50Q291bnQgPSAwOw0KCXZhciBkWCA9IHhmMi5wb3NpdGlvbi54ICsgKHhmMi5SLmNvbDEueCAq
IGNpcmNsZS5tX3AueCArIHhmMi5SLmNvbDIueCAqIGNpcmNsZS5tX3AueSkgLSB4ZjEucG9zaXRp
b24ueDsNCgl2YXIgZFkgPSB4ZjIucG9zaXRpb24ueSArICh4ZjIuUi5jb2wxLnkgKiBjaXJjbGUu
bV9wLnggKyB4ZjIuUi5jb2wyLnkgKiBjaXJjbGUubV9wLnkpIC0geGYxLnBvc2l0aW9uLnk7DQoJ
dmFyIGNMb2NhbFggPSAoZFggKiB4ZjEuUi5jb2wxLnggKyBkWSAqIHhmMS5SLmNvbDEueSk7DQoJ
dmFyIGNMb2NhbFkgPSAoZFggKiB4ZjEuUi5jb2wyLnggKyBkWSAqIHhmMS5SLmNvbDIueSk7DQoJ
dmFyIG5vcm1hbEluZGV4ID0gMDsNCgl2YXIgc2VwYXJhdGlvbiA9ICgtTnVtYmVyLk1BWF9WQUxV
RSk7DQoJdmFyIHJhZGl1cyA9IHBvbHlnb24ubV9yYWRpdXMgKyBjaXJjbGUubV9yYWRpdXM7DQoJ
Zm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5Z29uLm1fdmVydGV4Q291bnQ7ICsraSkgew0KCQl2YXIg
cyA9IHBvbHlnb24ubV9ub3JtYWxzW2ldLnggKiAoY0xvY2FsWCAtIHBvbHlnb24ubV92ZXJ0aWNl
c1tpXS54KSArIHBvbHlnb24ubV9ub3JtYWxzW2ldLnkgKiAoY0xvY2FsWSAtIHBvbHlnb24ubV92
ZXJ0aWNlc1tpXS55KTsNCgkJaWYgKHMgPiByYWRpdXMpIHsNCgkJCXJldHVybjsNCgkJfQ0KCQlp
ZiAocyA+IHNlcGFyYXRpb24pIHsNCgkJCXNlcGFyYXRpb24gPSBzOw0KCQkJbm9ybWFsSW5kZXgg
PSBpOw0KCQl9DQoJfQ0KCXZhciB2ZXJ0SW5kZXgyID0gbm9ybWFsSW5kZXggKyAxOw0KCWlmICh2
ZXJ0SW5kZXgyID49IHBvbHlnb24ubV92ZXJ0ZXhDb3VudCkgew0KCQl2ZXJ0SW5kZXgyID0gMDsN
Cgl9DQoJdmFyIHYxID0gcG9seWdvbi5tX3ZlcnRpY2VzW25vcm1hbEluZGV4XTsNCgl2YXIgdjIg
PSBwb2x5Z29uLm1fdmVydGljZXNbdmVydEluZGV4Ml07DQoJaWYgKHNlcGFyYXRpb24gPCBOdW1i
ZXIuTUlOX1ZBTFVFKSB7DQoJCW1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDE7DQoJCW1hbmlmb2xk
Lm1fdHlwZSA9IEJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkLmVfZmFjZUE7DQoJCW1hbmlmb2xk
Lm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRWKHBvbHlnb24ubV9ub3JtYWxzW25vcm1hbEluZGV4XSk7
DQoJCW1hbmlmb2xkLm1fbG9jYWxQb2ludC54ID0gMC41ICogKHYxLnggKyB2Mi54KTsNCgkJbWFu
aWZvbGQubV9sb2NhbFBvaW50LnkgPSAwLjUgKiAodjEueSArIHYyLnkpOw0KCQltYW5pZm9sZC5t
X3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJjbGUubV9wKTsNCgkJbWFuaWZvbGQubV9w
b2ludHNbMF0ubV9pZC5TZXRLZXkoMCk7DQoJfSBlbHNlIHsNCgkJdmFyIHUxID0gKGNMb2NhbFgg
LSB2MS54KSAqICh2Mi54IC0gdjEueCkgKyAoY0xvY2FsWSAtIHYxLnkpICogKHYyLnkgLSB2MS55
KTsNCgkJaWYgKHUxIDw9IDAuMCkgew0KCQkJaWYgKChjTG9jYWxYIC0gdjEueCkgKiAoY0xvY2Fs
WCAtIHYxLngpICsgKGNMb2NhbFkgLSB2MS55KSAqIChjTG9jYWxZIC0gdjEueSkgPiByYWRpdXMg
KiByYWRpdXMpIHJldHVybjsNCgkJCW1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDE7DQoJCQltYW5p
Zm9sZC5tX3R5cGUgPSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5lX2ZhY2VBOw0KCQkJbWFu
aWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnggPSBjTG9jYWxYIC0gdjEueDsNCgkJCW1hbmlmb2xk
Lm1fbG9jYWxQbGFuZU5vcm1hbC55ID0gY0xvY2FsWSAtIHYxLnk7DQoJCQltYW5pZm9sZC5tX2xv
Y2FsUGxhbmVOb3JtYWwuTm9ybWFsaXplKCk7DQoJCQltYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0
Vih2MSk7DQoJCQltYW5pZm9sZC5tX3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJjbGUu
bV9wKTsNCgkJCW1hbmlmb2xkLm1fcG9pbnRzWzBdLm1faWQuU2V0S2V5KDApOw0KCQl9IGVsc2Ug
ew0KCQkJdmFyIHUyID0gKGNMb2NhbFggLSB2Mi54KSAqICh2MS54IC0gdjIueCkgKyAoY0xvY2Fs
WSAtIHYyLnkpICogKHYxLnkgLSB2Mi55KTsNCgkJCWlmICh1MiA8PSAwKSB7DQoJCQkJaWYgKChj
TG9jYWxYIC0gdjIueCkgKiAoY0xvY2FsWCAtIHYyLngpICsgKGNMb2NhbFkgLSB2Mi55KSAqIChj
TG9jYWxZIC0gdjIueSkgPiByYWRpdXMgKiByYWRpdXMpIHJldHVybjsNCgkJCQltYW5pZm9sZC5t
X3BvaW50Q291bnQgPSAxOw0KCQkJCW1hbmlmb2xkLm1fdHlwZSA9IEJveDJELkNvbGxpc2lvbi5i
Mk1hbmlmb2xkLmVfZmFjZUE7DQoJCQkJbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnggPSBj
TG9jYWxYIC0gdjIueDsNCgkJCQltYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueSA9IGNMb2Nh
bFkgLSB2Mi55Ow0KCQkJCW1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5Ob3JtYWxpemUoKTsN
CgkJCQltYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0Vih2Mik7DQoJCQkJbWFuaWZvbGQubV9wb2lu
dHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlLm1fcCk7DQoJCQkJbWFuaWZvbGQubV9wb2lu
dHNbMF0ubV9pZC5TZXRLZXkoMCk7DQoJCQl9IGVsc2Ugew0KCQkJCXZhciBmYWNlQ2VudGVyWCA9
IDAuNSAqICh2MS54ICsgdjIueCk7DQoJCQkJdmFyIGZhY2VDZW50ZXJZID0gMC41ICogKHYxLnkg
KyB2Mi55KTsNCgkJCQlzZXBhcmF0aW9uID0gKGNMb2NhbFggLSBmYWNlQ2VudGVyWCkgKiBwb2x5
Z29uLm1fbm9ybWFsc1tub3JtYWxJbmRleF0ueCArIChjTG9jYWxZIC0gZmFjZUNlbnRlclkpICog
cG9seWdvbi5tX25vcm1hbHNbbm9ybWFsSW5kZXhdLnk7DQoJCQkJaWYgKHNlcGFyYXRpb24gPiBy
YWRpdXMpIHJldHVybjsNCgkJCQltYW5pZm9sZC5tX3BvaW50Q291bnQgPSAxOw0KCQkJCW1hbmlm
b2xkLm1fdHlwZSA9IEJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkLmVfZmFjZUE7DQoJCQkJbWFu
aWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnggPSBwb2x5Z29uLm1fbm9ybWFsc1tub3JtYWxJbmRl
eF0ueDsNCgkJCQltYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueSA9IHBvbHlnb24ubV9ub3Jt
YWxzW25vcm1hbEluZGV4XS55Ow0KCQkJCW1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5Ob3Jt
YWxpemUoKTsNCgkJCQltYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0KGZhY2VDZW50ZXJYLCBmYWNl
Q2VudGVyWSk7DQoJCQkJbWFuaWZvbGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2ly
Y2xlLm1fcCk7DQoJCQkJbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5TZXRLZXkoMCk7DQoJCQl9
DQoJCX0NCgl9DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLlRlc3RPdmVybGFwID0g
ZnVuY3Rpb24oYSwgYikgew0KCWlmIChiLmxvd2VyQm91bmRfLnggLSBhLnVwcGVyQm91bmRfLngg
PiAwKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJaWYgKGIubG93ZXJCb3VuZF8ueSAtIGEudXBw
ZXJCb3VuZF8ueSA+IDApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCglpZiAoYS5sb3dlckJvdW5k
Xy54IC0gYi51cHBlckJvdW5kXy54ID4gMCkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCWlmIChh
Lmxvd2VyQm91bmRfLnkgLSBiLnVwcGVyQm91bmRfLnkgPiAwKSB7DQoJCXJldHVybiBmYWxzZTsN
Cgl9DQoJcmV0dXJuIHRydWU7DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQu
Q29sbGlzaW9uLmIyQ29udGFjdFBvaW50ID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5wb3NpdGlvbiA9
IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy52ZWxvY2l0eSA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5ub3JtYWwgPSBCb3gyRC5D
b21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMuaWQgPSBuZXcgQm94MkQuQ29sbGlz
aW9uLmIyQ29udGFjdElEKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24u
YjJEaXN0YW5jZU91dHB1dH0gb3V0cHV0DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJT
aW1wbGV4Q2FjaGV9IGNhY2hlDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5j
ZUlucHV0fSBpbnB1dA0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZS5EaXN0YW5jZSA9
IGZ1bmN0aW9uKG91dHB1dCwgY2FjaGUsIGlucHV0KSB7DQoJdmFyIHNfc2ltcGxleCA9IG5ldyBC
b3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4KCk7DQoJc19zaW1wbGV4LlJlYWRDYWNoZShjYWNoZSwg
aW5wdXQucHJveHlBLCBpbnB1dC50cmFuc2Zvcm1BLCBpbnB1dC5wcm94eUIsIGlucHV0LnRyYW5z
Zm9ybUIpOw0KCWlmIChzX3NpbXBsZXgubV9jb3VudCA8IDEgfHwgc19zaW1wbGV4Lm1fY291bnQg
PiAzKSB7DQo7DQoJfQ0KCXZhciBpdGVyID0gMDsNCgl3aGlsZSAoaXRlciA8IDIwKSB7DQoJCXZh
ciBzYXZlID0gW107DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgc19zaW1wbGV4Lm1fY291bnQ7IGkr
Kykgew0KCQkJc2F2ZVtpXSA9IHt9Ow0KCQkJc2F2ZVtpXS5pbmRleEEgPSBzX3NpbXBsZXgubV92
ZXJ0aWNlc1tpXS5pbmRleEE7DQoJCQlzYXZlW2ldLmluZGV4QiA9IHNfc2ltcGxleC5tX3ZlcnRp
Y2VzW2ldLmluZGV4QjsNCgkJfQ0KCQlpZiAoc19zaW1wbGV4Lm1fY291bnQgPT0gMikgew0KCQkJ
c19zaW1wbGV4LlNvbHZlMigpOw0KCQl9IGVsc2UgaWYgKHNfc2ltcGxleC5tX2NvdW50ID09IDMp
IHsNCgkJCXNfc2ltcGxleC5Tb2x2ZTMoKTsNCgkJfQ0KCQlpZiAoc19zaW1wbGV4Lm1fY291bnQg
PT0gMykgew0KCQkJYnJlYWs7DQoJCX0NCgkJdmFyIGQgPSBzX3NpbXBsZXguR2V0U2VhcmNoRGly
ZWN0aW9uKCk7DQoJCWlmIChkLkxlbmd0aFNxdWFyZWQoKSA8IEJveDJELkNvbW1vbi5iMlNldHRp
bmdzLk1JTl9WQUxVRV9TUVVBUkVEKSB7DQoJCQlicmVhazsNCgkJfQ0KCQl2YXIgbmVnRCA9IGQu
R2V0TmVnYXRpdmUoKTsNCgkJc19zaW1wbGV4Lm1fdmVydGljZXNbc19zaW1wbGV4Lm1fY291bnRd
LmluZGV4QSA9IGlucHV0LnByb3h5QS5HZXRTdXBwb3J0KEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
aC5NdWxUTVYoaW5wdXQudHJhbnNmb3JtQS5SLCBuZWdEKSk7DQoJCXNfc2ltcGxleC5tX3ZlcnRp
Y2VzW3Nfc2ltcGxleC5tX2NvdW50XS53QSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxY
KGlucHV0LnRyYW5zZm9ybUEsIGlucHV0LnByb3h5QS5HZXRWZXJ0ZXgoc19zaW1wbGV4Lm1fdmVy
dGljZXNbc19zaW1wbGV4Lm1fY291bnRdLmluZGV4QSkpOw0KCQlzX3NpbXBsZXgubV92ZXJ0aWNl
c1tzX3NpbXBsZXgubV9jb3VudF0uaW5kZXhCID0gaW5wdXQucHJveHlCLkdldFN1cHBvcnQoQm94
MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFRNVihpbnB1dC50cmFuc2Zvcm1CLlIsIGQpKTsNCgkJ
c19zaW1wbGV4Lm1fdmVydGljZXNbc19zaW1wbGV4Lm1fY291bnRdLndCID0gQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXRoLk11bFgoaW5wdXQudHJhbnNmb3JtQiwgaW5wdXQucHJveHlCLkdldFZlcnRl
eChzX3NpbXBsZXgubV92ZXJ0aWNlc1tzX3NpbXBsZXgubV9jb3VudF0uaW5kZXhCKSk7DQoJCXNf
c2ltcGxleC5tX3ZlcnRpY2VzW3Nfc2ltcGxleC5tX2NvdW50XS53ID0gQm94MkQuQ29tbW9uLk1h
dGguYjJNYXRoLlN1YnRyYWN0VlYoc19zaW1wbGV4Lm1fdmVydGljZXNbc19zaW1wbGV4Lm1fY291
bnRdLndCLCBzX3NpbXBsZXgubV92ZXJ0aWNlc1tzX3NpbXBsZXgubV9jb3VudF0ud0EpOw0KCQlC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuRnJlZShkKTsNCgkJQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkZyZWUobmVnRCk7DQoJCWl0ZXIrKzsNCgkJdmFyIGR1cGxpY2F0ZSA9IGZhbHNlOw0KCQlm
b3IgKHZhciBpID0gMDsgaSA8IHNhdmUubGVuZ3RoOyBpKyspIHsNCgkJCWlmIChzX3NpbXBsZXgu
bV92ZXJ0aWNlc1tzX3NpbXBsZXgubV9jb3VudF0uaW5kZXhBID09IHNhdmVbaV0uaW5kZXhBICYm
IHNfc2ltcGxleC5tX3ZlcnRpY2VzW3Nfc2ltcGxleC5tX2NvdW50XS5pbmRleEIgPT0gc2F2ZVtp
XS5pbmRleEIpIHsNCgkJCQlkdXBsaWNhdGUgPSB0cnVlOw0KCQkJCWJyZWFrOw0KCQkJfQ0KCQl9
DQoJCWlmIChkdXBsaWNhdGUpIHsNCgkJCWJyZWFrOw0KCQl9DQoJCXNfc2ltcGxleC5tX2NvdW50
Kys7DQoJfQ0KCXNfc2ltcGxleC5HZXRXaXRuZXNzUG9pbnRzKG91dHB1dC5wb2ludEEsIG91dHB1
dC5wb2ludEIpOw0KCW91dHB1dC5kaXN0YW5jZSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5T
dWJ0cmFjdFZWKG91dHB1dC5wb2ludEEsIG91dHB1dC5wb2ludEIpLkxlbmd0aCgpOw0KCXNfc2lt
cGxleC5Xcml0ZUNhY2hlKGNhY2hlKTsNCglpZiAoaW5wdXQudXNlUmFkaWkpIHsNCgkJdmFyIHJB
ID0gaW5wdXQucHJveHlBLm1fcmFkaXVzOw0KCQl2YXIgckIgPSBpbnB1dC5wcm94eUIubV9yYWRp
dXM7DQoJCWlmIChvdXRwdXQuZGlzdGFuY2UgPiByQSArIHJCICYmIG91dHB1dC5kaXN0YW5jZSA+
IE51bWJlci5NSU5fVkFMVUUpIHsNCgkJCW91dHB1dC5kaXN0YW5jZSAtPSByQSArIHJCOw0KCQkJ
dmFyIG5vcm1hbCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKG91dHB1dC5w
b2ludEIsIG91dHB1dC5wb2ludEEpOw0KCQkJbm9ybWFsLk5vcm1hbGl6ZSgpOw0KCQkJb3V0cHV0
LnBvaW50QS54ICs9IHJBICogbm9ybWFsLng7DQoJCQlvdXRwdXQucG9pbnRBLnkgKz0gckEgKiBu
b3JtYWwueTsNCgkJCW91dHB1dC5wb2ludEIueCAtPSByQiAqIG5vcm1hbC54Ow0KCQkJb3V0cHV0
LnBvaW50Qi55IC09IHJCICogbm9ybWFsLnk7DQoJCQlCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIu
RnJlZShub3JtYWwpOw0KCQl9IGVsc2Ugew0KCQkJdmFyIHAgPSBCb3gyRC5Db21tb24uTWF0aC5i
MlZlYzIuR2V0KDAsIDApOw0KCQkJcC54ID0gMC41ICogKG91dHB1dC5wb2ludEEueCArIG91dHB1
dC5wb2ludEIueCk7DQoJCQlwLnkgPSAwLjUgKiAob3V0cHV0LnBvaW50QS55ICsgb3V0cHV0LnBv
aW50Qi55KTsNCgkJCW91dHB1dC5wb2ludEEueCA9IG91dHB1dC5wb2ludEIueCA9IHAueDsNCgkJ
CW91dHB1dC5wb2ludEEueSA9IG91dHB1dC5wb2ludEIueSA9IHAueTsNCgkJCW91dHB1dC5kaXN0
YW5jZSA9IDAuMDsNCgkJCUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5GcmVlKHApOw0KCQl9DQoJ
fQ0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkRpc3Rh
bmNlSW5wdXQgPSBmdW5jdGlvbiAoKSB7fTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJv
eDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlT3V0cHV0ID0gZnVuY3Rpb24gKCkgew0KCS8qKiBAdHlw
ZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gKi8NCgl0aGlzLnBvaW50QSA9IEJveDJELkNv
bW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJLyoqIEB0eXBlIHshQm94MkQuQ29tbW9uLk1h
dGguYjJWZWMyfSAqLw0KCXRoaXMucG9pbnRCID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgwLCAwKTsNCgkvKiogQHR5cGUge251bWJlcn0gKi8NCgl0aGlzLmRpc3RhbmNlID0gMDsNCn07
DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVBy
b3h5ID0gZnVuY3Rpb24oKSB7fTsNCkJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHkucHJv
dG90eXBlLlNldCA9IGZ1bmN0aW9uIChzaGFwZSkgew0KCXNoYXBlLlNldERpc3RhbmNlUHJveHko
dGhpcyk7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUuR2V0
U3VwcG9ydCA9IGZ1bmN0aW9uIChkKSB7DQoJdmFyIGJlc3RJbmRleCA9IDA7DQoJdmFyIGJlc3RW
YWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkg
KiBkLnk7DQoJZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLm1fY291bnQ7IGkrKykgew0KCQl2YXIg
dmFsdWUgPSB0aGlzLm1fdmVydGljZXNbaV0ueCAqIGQueCArIHRoaXMubV92ZXJ0aWNlc1tpXS55
ICogZC55Ow0KCQlpZiAodmFsdWUgPiBiZXN0VmFsdWUpIHsNCgkJCWJlc3RJbmRleCA9IGk7DQoJ
CQliZXN0VmFsdWUgPSB2YWx1ZTsNCgkJfQ0KCX0NCglyZXR1cm4gYmVzdEluZGV4Ow0KfTsNCkJv
eDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFN1cHBvcnRWZXJ0ZXgg
PSBmdW5jdGlvbiAoZCkgew0KCXJldHVybiB0aGlzLm1fdmVydGljZXNbdGhpcy5HZXRTdXBwb3J0
KGQpXTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVByb3h5LnByb3RvdHlwZS5HZXRW
ZXJ0ZXhDb3VudCA9IGZ1bmN0aW9uICgpIHsNCglyZXR1cm4gdGhpcy5tX2NvdW50Ow0KfTsNCkJv
eDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFZlcnRleCA9IGZ1bmN0
aW9uIChpbmRleCkgew0KCWlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSBpbmRleCA9IDA7DQo7DQoJ
cmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tpbmRleF07DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3IN
CiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWUgPSBmdW5jdGlvbigpIHsNCgkvKiog
QHR5cGUge0JveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlTm9kZX0gKi8NCgl0aGlzLm1fcm9v
dCA9IG51bGw7DQoJLyoqIEB0eXBlIHtudW1iZXJ9ICovDQoJdGhpcy5tX3BhdGggPSAwOw0KCS8q
KiBAdHlwZSB7bnVtYmVyfSAqLw0KCXRoaXMubV9pbnNlcnRpb25Db3VudCA9IDA7DQp9Ow0KLyoq
DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJBQUJCfSBhYWJiDQogKiBAcGFyYW0ge0Jv
eDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZQ0KICogQHJldHVybiB7IUJveDJELkNvbGxp
c2lvbi5iMkR5bmFtaWNUcmVlTm9kZX0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1Ry
ZWUucHJvdG90eXBlLkNyZWF0ZVByb3h5ID0gZnVuY3Rpb24oYWFiYiwgZml4dHVyZSkgew0KCXZh
ciBub2RlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlLkdldChmaXh0dXJlKTsN
Cgl2YXIgZXh0ZW5kWCA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2FhYmJFeHRlbnNpb247
DQoJdmFyIGV4dGVuZFkgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9hYWJiRXh0ZW5zaW9u
Ow0KCW5vZGUuYWFiYi5sb3dlckJvdW5kXy54ID0gYWFiYi5sb3dlckJvdW5kXy54IC0gZXh0ZW5k
WDsNCglub2RlLmFhYmIubG93ZXJCb3VuZF8ueSA9IGFhYmIubG93ZXJCb3VuZF8ueSAtIGV4dGVu
ZFk7DQoJbm9kZS5hYWJiLnVwcGVyQm91bmRfLnggPSBhYWJiLnVwcGVyQm91bmRfLnggKyBleHRl
bmRYOw0KCW5vZGUuYWFiYi51cHBlckJvdW5kXy55ID0gYWFiYi51cHBlckJvdW5kXy55ICsgZXh0
ZW5kWTsNCgl0aGlzLkluc2VydExlYWYobm9kZSk7DQoJcmV0dXJuIG5vZGU7DQp9Ow0KLyoqDQog
KiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGV9IHByb3h5DQogKi8N
CkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5EZXN0cm95UHJveHkgPSBm
dW5jdGlvbihwcm94eSkgew0KCXRoaXMuUmVtb3ZlTGVhZihwcm94eSk7DQoJcHJveHkuRGVzdHJv
eSgpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVO
b2RlfSBwcm94eQ0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyQUFCQn0gYWFiYg0KICog
QHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBkaXNwbGFjZW1lbnQNCiAqIEByZXR1
cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlLnByb3RvdHlw
ZS5Nb3ZlUHJveHkgPSBmdW5jdGlvbihwcm94eSwgYWFiYiwgZGlzcGxhY2VtZW50KSB7DQo7DQoJ
aWYgKHByb3h5LmFhYmIuQ29udGFpbnMoYWFiYikpIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCgl0
aGlzLlJlbW92ZUxlYWYocHJveHkpOw0KCXZhciBleHRlbmRYID0gQm94MkQuQ29tbW9uLmIyU2V0
dGluZ3MuYjJfYWFiYkV4dGVuc2lvbiArIEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2FhYmJN
dWx0aXBsaWVyICogTWF0aC5hYnMoZGlzcGxhY2VtZW50LngpOw0KCXZhciBleHRlbmRZID0gQm94
MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbiArIEJveDJELkNvbW1vbi5iMlNl
dHRpbmdzLmIyX2FhYmJNdWx0aXBsaWVyICogTWF0aC5hYnMoZGlzcGxhY2VtZW50LnkpOw0KCXBy
b3h5LmFhYmIubG93ZXJCb3VuZF8ueCA9IGFhYmIubG93ZXJCb3VuZF8ueCAtIGV4dGVuZFg7DQoJ
cHJveHkuYWFiYi5sb3dlckJvdW5kXy55ID0gYWFiYi5sb3dlckJvdW5kXy55IC0gZXh0ZW5kWTsN
Cglwcm94eS5hYWJiLnVwcGVyQm91bmRfLnggPSBhYWJiLnVwcGVyQm91bmRfLnggKyBleHRlbmRY
Ow0KCXByb3h5LmFhYmIudXBwZXJCb3VuZF8ueSA9IGFhYmIudXBwZXJCb3VuZF8ueSArIGV4dGVu
ZFk7DQoJdGhpcy5JbnNlcnRMZWFmKHByb3h5KTsNCglyZXR1cm4gdHJ1ZTsNCn07DQovKioNCiAq
IEBwYXJhbSB7bnVtYmVyfSBpdGVyYXRpb25zDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkR5bmFt
aWNUcmVlLnByb3RvdHlwZS5SZWJhbGFuY2UgPSBmdW5jdGlvbihpdGVyYXRpb25zKSB7DQoJaWYg
KHRoaXMubV9yb290ICE9PSBudWxsKSB7DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgaXRlcmF0aW9u
czsgaSsrKSB7DQoJCQl2YXIgbm9kZSA9IHRoaXMubV9yb290Ow0KCQkJdmFyIGJpdCA9IDA7DQoJ
CQl3aGlsZSAoIW5vZGUuSXNMZWFmKCkpIHsNCgkJCQlub2RlID0gKHRoaXMubV9wYXRoID4+IGJp
dCkgJiAxID8gbm9kZS5jaGlsZDIgOiBub2RlLmNoaWxkMTsNCgkJCQliaXQgPSAoYml0ICsgMSkg
JiAzMTsNCgkJCX0NCgkJCXRoaXMubV9wYXRoKys7DQoJCQl0aGlzLlJlbW92ZUxlYWYobm9kZSk7
DQoJCQl0aGlzLkluc2VydExlYWYobm9kZSk7DQoJCX0NCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGV9IHByb3h5DQogKiBAcmV0dXJuIHsh
Qm94MkQuQ29sbGlzaW9uLmIyQUFCQn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1Ry
ZWUucHJvdG90eXBlLkdldEZhdEFBQkIgPSBmdW5jdGlvbihwcm94eSkgew0KCXJldHVybiBwcm94
eS5hYWJiOw0KfTsNCi8qKg0KICogQHBhcmFtIHtmdW5jdGlvbighQm94MkQuRHluYW1pY3MuYjJG
aXh0dXJlKTogYm9vbGVhbn0gY2FsbGJhY2sNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5i
MkFBQkJ9IGFhYmINCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWUucHJvdG90eXBl
LlF1ZXJ5ID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFhYmIpIHsNCglpZiAodGhpcy5tX3Jvb3QgIT09
IG51bGwpIHsNCgkJdmFyIHN0YWNrID0gW107DQoJCXN0YWNrLnB1c2godGhpcy5tX3Jvb3QpOw0K
CQl3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkgew0KCQkJdmFyIG5vZGUgPSBzdGFjay5wb3AoKTsN
CgkJCWlmIChub2RlLmFhYmIuVGVzdE92ZXJsYXAoYWFiYikpIHsNCgkJCQlpZiAobm9kZS5Jc0xl
YWYoKSkgew0KCQkJCQlpZiAoIWNhbGxiYWNrKG5vZGUuZml4dHVyZSkpIHsNCgkJCQkJCXJldHVy
bjsNCgkJCQkJfQ0KCQkJCX0gZWxzZSB7DQoJCQkJCXN0YWNrLnB1c2gobm9kZS5jaGlsZDEpOw0K
CQkJCQlzdGFjay5wdXNoKG5vZGUuY2hpbGQyKTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQp9Ow0K
LyoqDQogKiBAcGFyYW0ge2Z1bmN0aW9uKCFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXQs
ICFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUpOiBudW1iZXJ9IGNhbGxiYWNrDQogKiBAcGFyYW0g
eyFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXR9IGlucHV0DQogKi8NCkJveDJELkNvbGxp
c2lvbi5iMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24oY2FsbGJhY2ss
IGlucHV0KSB7DQoJaWYgKHRoaXMubV9yb290ID09PSBudWxsKSB7DQoJCXJldHVybjsNCgl9DQoJ
dmFyIHIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVihpbnB1dC5wMSwgaW5w
dXQucDIpOw0KCXIuTm9ybWFsaXplKCk7DQoJdmFyIHYgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1h
dGguQ3Jvc3NGVigxLjAsIHIpOw0KCXZhciBhYnNfdiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
aC5BYnNWKHYpOw0KCXZhciBtYXhGcmFjdGlvbiA9IGlucHV0Lm1heEZyYWN0aW9uOw0KCXZhciB0
WCA9IGlucHV0LnAxLnggKyBtYXhGcmFjdGlvbiAqIChpbnB1dC5wMi54IC0gaW5wdXQucDEueCk7
DQoJdmFyIHRZID0gaW5wdXQucDEueSArIG1heEZyYWN0aW9uICogKGlucHV0LnAyLnkgLSBpbnB1
dC5wMS55KTsNCgl2YXIgc2VnbWVudEFBQkIgPSBCb3gyRC5Db2xsaXNpb24uYjJBQUJCLkdldCgp
Ow0KCXNlZ21lbnRBQUJCLmxvd2VyQm91bmRfLnggPSBNYXRoLm1pbihpbnB1dC5wMS54LCB0WCk7
DQoJc2VnbWVudEFBQkIubG93ZXJCb3VuZF8ueSA9IE1hdGgubWluKGlucHV0LnAxLnksIHRZKTsN
CglzZWdtZW50QUFCQi51cHBlckJvdW5kXy54ID0gTWF0aC5tYXgoaW5wdXQucDEueCwgdFgpOw0K
CXNlZ21lbnRBQUJCLnVwcGVyQm91bmRfLnkgPSBNYXRoLm1heChpbnB1dC5wMS55LCB0WSk7DQoJ
dmFyIHN0YWNrID0gW107DQoJc3RhY2sucHVzaCh0aGlzLm1fcm9vdCk7DQoJd2hpbGUgKHN0YWNr
Lmxlbmd0aCA+IDApIHsNCgkJdmFyIG5vZGUgPSBzdGFjay5wb3AoKTsNCgkJaWYgKCFub2RlLmFh
YmIuVGVzdE92ZXJsYXAoc2VnbWVudEFBQkIpKSB7DQoJCQljb250aW51ZTsNCgkJfQ0KCQl2YXIg
YyA9IG5vZGUuYWFiYi5HZXRDZW50ZXIoKTsNCgkJdmFyIGggPSBub2RlLmFhYmIuR2V0RXh0ZW50
cygpOw0KCQl2YXIgc2VwYXJhdGlvbiA9IE1hdGguYWJzKHYueCAqIChpbnB1dC5wMS54IC0gYy54
KSArIHYueSAqIChpbnB1dC5wMS55IC0gYy55KSkgLSBhYnNfdi54ICogaC54IC0gYWJzX3YueSAq
IGgueTsNCgkJaWYgKHNlcGFyYXRpb24gPiAwLjApIHsNCgkJCWNvbnRpbnVlOw0KCQl9DQoJCWlm
IChub2RlLklzTGVhZigpKSB7DQoJCQl2YXIgc3ViSW5wdXQgPSBuZXcgQm94MkQuQ29sbGlzaW9u
LmIyUmF5Q2FzdElucHV0KGlucHV0LnAxLCBpbnB1dC5wMiwgaW5wdXQubWF4RnJhY3Rpb24pOw0K
CQkJbWF4RnJhY3Rpb24gPSBjYWxsYmFjayhpbnB1dCwgbm9kZS5maXh0dXJlKTsNCgkJCWlmICht
YXhGcmFjdGlvbiA9PSAwLjApIHsNCgkJCQlicmVhazsNCgkJCX0NCgkJCWlmIChtYXhGcmFjdGlv
biA+IDAuMCkgew0KCQkJCXRYID0gaW5wdXQucDEueCArIG1heEZyYWN0aW9uICogKGlucHV0LnAy
LnggLSBpbnB1dC5wMS54KTsNCgkJCQl0WSA9IGlucHV0LnAxLnkgKyBtYXhGcmFjdGlvbiAqIChp
bnB1dC5wMi55IC0gaW5wdXQucDEueSk7DQoJCQkJc2VnbWVudEFBQkIubG93ZXJCb3VuZF8ueCA9
IE1hdGgubWluKGlucHV0LnAxLngsIHRYKTsNCgkJCQlzZWdtZW50QUFCQi5sb3dlckJvdW5kXy55
ID0gTWF0aC5taW4oaW5wdXQucDEueSwgdFkpOw0KCQkJCXNlZ21lbnRBQUJCLnVwcGVyQm91bmRf
LnggPSBNYXRoLm1heChpbnB1dC5wMS54LCB0WCk7DQoJCQkJc2VnbWVudEFBQkIudXBwZXJCb3Vu
ZF8ueSA9IE1hdGgubWF4KGlucHV0LnAxLnksIHRZKTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCXN0
YWNrLnB1c2gobm9kZS5jaGlsZDEpOw0KCQkJc3RhY2sucHVzaChub2RlLmNoaWxkMik7DQoJCX0N
Cgl9DQoJQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5GcmVlKHNlZ21lbnRBQUJCKTsNCn07DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlTm9kZX0gbGVhZg0KICov
DQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuSW5zZXJ0TGVhZiA9IGZ1
bmN0aW9uKGxlYWYpIHsNCgl0aGlzLm1faW5zZXJ0aW9uQ291bnQrKzsNCglpZiAodGhpcy5tX3Jv
b3QgPT09IG51bGwpIHsNCgkJdGhpcy5tX3Jvb3QgPSBsZWFmOw0KCQl0aGlzLm1fcm9vdC5wYXJl
bnQgPSBudWxsOw0KCQlyZXR1cm47DQoJfQ0KCXZhciBzaWJsaW5nID0gdGhpcy5HZXRCZXN0U2li
bGluZyhsZWFmKTsNCgl2YXIgcGFyZW50ID0gc2libGluZy5wYXJlbnQ7DQoJdmFyIG5vZGUyID0g
Qm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlLkdldCgpOw0KCW5vZGUyLnBhcmVudCA9
IHBhcmVudDsNCglub2RlMi5hYWJiLkNvbWJpbmUobGVhZi5hYWJiLCBzaWJsaW5nLmFhYmIpOw0K
CWlmIChwYXJlbnQpIHsNCgkJaWYgKHNpYmxpbmcucGFyZW50LmNoaWxkMSA9PSBzaWJsaW5nKSB7
DQoJCQlwYXJlbnQuY2hpbGQxID0gbm9kZTI7DQoJCX0gZWxzZSB7DQoJCQlwYXJlbnQuY2hpbGQy
ID0gbm9kZTI7DQoJCX0NCgkJbm9kZTIuY2hpbGQxID0gc2libGluZzsNCgkJbm9kZTIuY2hpbGQy
ID0gbGVhZjsNCgkJc2libGluZy5wYXJlbnQgPSBub2RlMjsNCgkJbGVhZi5wYXJlbnQgPSBub2Rl
MjsNCgkJd2hpbGUgKHBhcmVudCkgew0KCQkJaWYgKHBhcmVudC5hYWJiLkNvbnRhaW5zKG5vZGUy
LmFhYmIpKSB7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCQlwYXJlbnQuYWFiYi5Db21iaW5lKHBhcmVu
dC5jaGlsZDEuYWFiYiwgcGFyZW50LmNoaWxkMi5hYWJiKTsNCgkJCW5vZGUyID0gcGFyZW50Ow0K
CQkJcGFyZW50ID0gcGFyZW50LnBhcmVudDsNCgkJfQ0KCX0gZWxzZSB7DQoJCW5vZGUyLmNoaWxk
MSA9IHNpYmxpbmc7DQoJCW5vZGUyLmNoaWxkMiA9IGxlYWY7DQoJCXNpYmxpbmcucGFyZW50ID0g
bm9kZTI7DQoJCWxlYWYucGFyZW50ID0gbm9kZTI7DQoJCXRoaXMubV9yb290ID0gbm9kZTI7DQoJ
fQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2Rl
fSBsZWFmDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlfQ0K
ICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuR2V0QmVzdFNpYmxp
bmcgPSBmdW5jdGlvbihsZWFmKSB7DQoJdmFyIGNlbnRlciA9IGxlYWYuYWFiYi5HZXRDZW50ZXIo
KTsNCgl2YXIgc2libGluZyA9IHRoaXMubV9yb290Ow0KCXdoaWxlKCFzaWJsaW5nLklzTGVhZigp
KSB7DQoJCXZhciBjaGlsZDEgPSBzaWJsaW5nLmNoaWxkMTsNCgkJdmFyIGNoaWxkMiA9IHNpYmxp
bmcuY2hpbGQyOw0KCQl2YXIgbm9ybTEgPSBNYXRoLmFicygoY2hpbGQxLmFhYmIubG93ZXJCb3Vu
ZF8ueCArIGNoaWxkMS5hYWJiLnVwcGVyQm91bmRfLngpIC8gMiAtIGNlbnRlci54KSArIE1hdGgu
YWJzKChjaGlsZDEuYWFiYi5sb3dlckJvdW5kXy55ICsgY2hpbGQxLmFhYmIudXBwZXJCb3VuZF8u
eSkgLyAyIC0gY2VudGVyLnkpOw0KCQl2YXIgbm9ybTIgPSBNYXRoLmFicygoY2hpbGQyLmFhYmIu
bG93ZXJCb3VuZF8ueCArIGNoaWxkMi5hYWJiLnVwcGVyQm91bmRfLngpIC8gMiAtIGNlbnRlci54
KSArIE1hdGguYWJzKChjaGlsZDIuYWFiYi5sb3dlckJvdW5kXy55ICsgY2hpbGQyLmFhYmIudXBw
ZXJCb3VuZF8ueSkgLyAyIC0gY2VudGVyLnkpOw0KCQlpZiAobm9ybTEgPCBub3JtMikgew0KCQkJ
c2libGluZyA9IGNoaWxkMTsNCgkJfSBlbHNlIHsNCgkJCXNpYmxpbmcgPSBjaGlsZDI7DQoJCX0N
Cgl9DQoJQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkZyZWUoY2VudGVyKTsNCglyZXR1cm4gc2li
bGluZzsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVl
Tm9kZX0gbGVhZg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZS5wcm90b3R5cGUu
UmVtb3ZlTGVhZiA9IGZ1bmN0aW9uKGxlYWYpIHsNCglpZiAobGVhZiA9PSB0aGlzLm1fcm9vdCkg
ew0KCQl0aGlzLm1fcm9vdCA9IG51bGw7DQoJCXJldHVybjsNCgl9DQoJdmFyIG5vZGUyID0gbGVh
Zi5wYXJlbnQ7DQoJdmFyIG5vZGUxID0gbm9kZTIucGFyZW50Ow0KCXZhciBzaWJsaW5nOw0KCWlm
IChub2RlMi5jaGlsZDEgPT0gbGVhZikgew0KCQlzaWJsaW5nID0gbm9kZTIuY2hpbGQyOw0KCX0g
ZWxzZSB7DQoJCXNpYmxpbmcgPSBub2RlMi5jaGlsZDE7DQoJfQ0KCWlmIChub2RlMSkgew0KCQlp
ZiAobm9kZTEuY2hpbGQxID09IG5vZGUyKSB7DQoJCQlub2RlMS5jaGlsZDEgPSBzaWJsaW5nOw0K
CQl9IGVsc2Ugew0KCQkJbm9kZTEuY2hpbGQyID0gc2libGluZzsNCgkJfQ0KCQlzaWJsaW5nLnBh
cmVudCA9IG5vZGUxOw0KCQl3aGlsZSAobm9kZTEpIHsNCgkJCXZhciBvbGRBQUJCID0gbm9kZTEu
YWFiYjsNCgkJCW5vZGUxLmFhYmIuQ29tYmluZShub2RlMS5jaGlsZDEuYWFiYiwgbm9kZTEuY2hp
bGQyLmFhYmIpOw0KCQkJaWYgKG9sZEFBQkIuQ29udGFpbnMobm9kZTEuYWFiYikpIHsNCgkJCQli
cmVhazsNCgkJCX0NCgkJCW5vZGUxID0gbm9kZTEucGFyZW50Ow0KCQl9DQoJfSBlbHNlIHsNCgkJ
dGhpcy5tX3Jvb3QgPSBzaWJsaW5nOw0KCQlzaWJsaW5nLnBhcmVudCA9IG51bGw7DQoJfQ0KCW5v
ZGUyLkRlc3Ryb3koKTsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5Db2xs
aXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UgPSBmdW5jdGlvbigpIHsNCgkvKioNCgkgKiBA
cHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWV9DQoJICov
DQoJdGhpcy5tX3RyZWUgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWUoKTsNCgkv
KioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtBcnJheS48IUJveDJELkNvbGxpc2lvbi5iMkR5
bmFtaWNUcmVlTm9kZT59DQoJICovDQoJdGhpcy5tX21vdmVCdWZmZXIgPSBbXTsNCn07DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkNvbGxpc2lvbi5iMkFBQkJ9IGFhYmINCiAqIEBwYXJhbSB7Qm94
MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJlDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlz
aW9uLmIyRHluYW1pY1RyZWVOb2RlfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJl
ZUJyb2FkUGhhc2UucHJvdG90eXBlLkNyZWF0ZVByb3h5ID0gZnVuY3Rpb24oYWFiYiwgZml4dHVy
ZSkgew0KCXZhciBwcm94eSA9IHRoaXMubV90cmVlLkNyZWF0ZVByb3h5KGFhYmIsIGZpeHR1cmUp
Ow0KCXRoaXMuQnVmZmVyTW92ZShwcm94eSk7DQoJcmV0dXJuIHByb3h5Ow0KfTsNCi8qKg0KICog
QHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlfSBwcm94eQ0KICovDQpC
b3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLkRlc3Ryb3lQ
cm94eSA9IGZ1bmN0aW9uKHByb3h5KSB7DQoJdGhpcy5VbkJ1ZmZlck1vdmUocHJveHkpOw0KCXRo
aXMubV90cmVlLkRlc3Ryb3lQcm94eShwcm94eSk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gy
RC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGV9IHByb3h5DQogKiBAcGFyYW0geyFCb3gyRC5D
b2xsaXNpb24uYjJBQUJCfSBhYWJiDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzJ9IGRpc3BsYWNlbWVudA0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2Fk
UGhhc2UucHJvdG90eXBlLk1vdmVQcm94eSA9IGZ1bmN0aW9uKHByb3h5LCBhYWJiLCBkaXNwbGFj
ZW1lbnQpIHsNCgl2YXIgYnVmZmVyID0gdGhpcy5tX3RyZWUuTW92ZVByb3h5KHByb3h5LCBhYWJi
LCBkaXNwbGFjZW1lbnQpOw0KCWlmIChidWZmZXIpIHsNCgkJdGhpcy5CdWZmZXJNb3ZlKHByb3h5
KTsNCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJl
ZU5vZGV9IHByb3h5QQ0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVO
b2RlfSBwcm94eUINCiAqIEByZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkNvbGxpc2lvbi5i
MkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVGVzdE92ZXJsYXAgPSBmdW5jdGlvbihw
cm94eUEsIHByb3h5Qikgew0KCXZhciBhYWJiQSA9IHRoaXMubV90cmVlLkdldEZhdEFBQkIocHJv
eHlBKTsNCgl2YXIgYWFiYkIgPSB0aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHByb3h5Qik7DQoJcmV0
dXJuIGFhYmJBLlRlc3RPdmVybGFwKGFhYmJCKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlTm9kZX0gcHJveHkNCiAqIEByZXR1cm4geyFCb3gyRC5D
b2xsaXNpb24uYjJBQUJCfQ0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2Fk
UGhhc2UucHJvdG90eXBlLkdldEZhdEFBQkIgPSBmdW5jdGlvbihwcm94eSkgew0KCXJldHVybiB0
aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHByb3h5KTsNCn07DQovKioNCiAqIEByZXR1cm4ge251bWJl
cn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlw
ZS5HZXRQcm94eUNvdW50ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV90cmVlLmxlbmd0
aDsNCn07DQovKioNCiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUJveDJELkR5bmFtaWNzLmIyRml4dHVy
ZSwgIUJveDJELkR5bmFtaWNzLmIyRml4dHVyZSl9IGNhbGxiYWNrDQogKi8NCkJveDJELkNvbGxp
c2lvbi5iMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVXBkYXRlUGFpcnMgPSBmdW5j
dGlvbihjYWxsYmFjaykgew0KCXZhciBfX3RoaXMgPSB0aGlzOw0KCXZhciBwYWlycyA9IFtdOw0K
CXdoaWxlICh0aGlzLm1fbW92ZUJ1ZmZlci5sZW5ndGggPiAwKSB7DQoJCXZhciBxdWVyeVByb3h5
ID0gdGhpcy5tX21vdmVCdWZmZXIucG9wKCk7DQoJCXZhciBRdWVyeUNhbGxiYWNrID0gZnVuY3Rp
b24oZml4dHVyZSkgew0KCQkJaWYgKGZpeHR1cmUgIT0gcXVlcnlQcm94eS5maXh0dXJlKSB7DQoJ
CQkJcGFpcnMucHVzaChuZXcgQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVQYWlyKHF1ZXJ5
UHJveHkuZml4dHVyZSwgZml4dHVyZSkpOw0KCQkJfQ0KCQkJcmV0dXJuIHRydWU7DQoJCX07DQoJ
CXZhciBmYXRBQUJCID0gdGhpcy5tX3RyZWUuR2V0RmF0QUFCQihxdWVyeVByb3h5KTsNCgkJdGhp
cy5tX3RyZWUuUXVlcnkoUXVlcnlDYWxsYmFjaywgZmF0QUFCQik7DQoJfQ0KCXZhciBpID0gMDsN
Cgl3aGlsZShpIDwgcGFpcnMubGVuZ3RoKSB7DQoJCXZhciBwcmltYXJ5UGFpciA9IHBhaXJzW2ld
Ow0KCQljYWxsYmFjayhwcmltYXJ5UGFpci5maXh0dXJlQSwgcHJpbWFyeVBhaXIuZml4dHVyZUIp
Ow0KCQlpKys7DQoJCXdoaWxlKGkgPCBwYWlycy5sZW5ndGgpIHsNCgkJCXZhciBwYWlyID0gcGFp
cnNbaV07DQoJCQlpZiAoIShwYWlyLmZpeHR1cmVBID09IHByaW1hcnlQYWlyLmZpeHR1cmVBICYm
IHBhaXIuZml4dHVyZUIgPT0gcHJpbWFyeVBhaXIuZml4dHVyZUIpDQoJCQkJJiYgIShwYWlyLmZp
eHR1cmVBID09IHByaW1hcnlQYWlyLmZpeHR1cmVCICYmIHBhaXIuZml4dHVyZUIgPT0gcHJpbWFy
eVBhaXIuZml4dHVyZUEpKSB7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCQlpKys7DQoJCX0NCgl9DQp9
Ow0KLyoqDQogKiBAcGFyYW0ge2Z1bmN0aW9uKCFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUpOiBi
b29sZWFufSBjYWxsYmFjaw0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyQUFCQn0gYWFi
Yg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBl
LlF1ZXJ5ID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFhYmIpIHsNCgl0aGlzLm1fdHJlZS5RdWVyeShj
YWxsYmFjaywgYWFiYik7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge2Z1bmN0aW9uKCFCb3gyRC5Db2xs
aXNpb24uYjJSYXlDYXN0SW5wdXQsICFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUpOiBudW1iZXJ9
IGNhbGxiYWNrDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXR9IGlu
cHV0DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5
cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBpbnB1dCkgew0KCXRoaXMubV90cmVlLlJh
eUNhc3QoY2FsbGJhY2ssIGlucHV0KTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBpdGVy
YXRpb25zDQogKi8NCkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90
b3R5cGUuUmViYWxhbmNlID0gZnVuY3Rpb24oaXRlcmF0aW9ucykgew0KCXRoaXMubV90cmVlLlJl
YmFsYW5jZShpdGVyYXRpb25zKTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJy
b2FkUGhhc2UucHJvdG90eXBlLkJ1ZmZlck1vdmUgPSBmdW5jdGlvbihwcm94eSkgew0KCXRoaXMu
bV9tb3ZlQnVmZmVyLnB1c2gocHJveHkpOw0KfTsNCkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNU
cmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVW5CdWZmZXJNb3ZlID0gZnVuY3Rpb24ocHJveHkpIHsN
Cgljci5hcnJheUZpbmRSZW1vdmUodGhpcy5tX21vdmVCdWZmZXIsIHByb3h5KTsNCn07DQpCb3gy
RC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UuX19pbXBsZW1lbnRzID0ge307DQpC
b3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UuX19pbXBsZW1lbnRzW0JveDJE
LkNvbGxpc2lvbi5JQnJvYWRQaGFzZV0gPSB0cnVlOw0KLyoqDQogKiBAcHJpdmF0ZQ0KICogQHBh
cmFtIHtCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmU9fSBmaXh0dXJlDQogKiBAY29uc3RydWN0b3IN
CiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlID0gZnVuY3Rpb24oZml4dHVy
ZSkgew0KCS8qKiBAdHlwZSB7IUJveDJELkNvbGxpc2lvbi5iMkFBQkJ9ICovDQoJdGhpcy5hYWJi
ID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5HZXQoKTsNCgkvKiogQHR5cGUge0JveDJELkNvbGxp
c2lvbi5iMkR5bmFtaWNUcmVlTm9kZX0gKi8NCgl0aGlzLmNoaWxkMSA9IG51bGw7DQoJLyoqIEB0
eXBlIHtCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGV9ICovDQoJdGhpcy5jaGlsZDIg
PSBudWxsOw0KCS8qKiBAdHlwZSB7Qm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlfSAq
Lw0KCXRoaXMucGFyZW50ID0gbnVsbDsNCgkvKiogQHR5cGUge0JveDJELkR5bmFtaWNzLmIyRml4
dHVyZX0gKi8NCgl0aGlzLmZpeHR1cmUgPSBudWxsOw0KCWlmICh0eXBlb2YoZml4dHVyZSkgIT0g
InVuZGVmaW5lZCIpIHsNCgkJdGhpcy5maXh0dXJlID0gZml4dHVyZTsNCgl9DQp9Ow0KLyoqDQog
KiBAcHJpdmF0ZQ0KICogQHR5cGUge0FycmF5LjwhQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1Ry
ZWVOb2RlPn0NCiAqLw0KQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlLl9mcmVlQ2Fj
aGUgPSBbXTsNCi8qKg0KICogQHBhcmFtIHtCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmU9fSBmaXh0
dXJlDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlfQ0KICov
DQpCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGUuR2V0ID0gZnVuY3Rpb24oZml4dHVy
ZSkgew0KCWlmIChCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGUuX2ZyZWVDYWNoZS5s
ZW5ndGggPiAwKSB7DQoJCXZhciBub2RlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVO
b2RlLl9mcmVlQ2FjaGUucG9wKCk7DQoJCWlmICh0eXBlb2YoZml4dHVyZSkgIT0gInVuZGVmaW5l
ZCIpIHsNCgkJCW5vZGUuZml4dHVyZSA9IGZpeHR1cmU7DQoJCX0NCgkJbm9kZS5hYWJiLlNldFpl
cm8oKTsNCgkJcmV0dXJuIG5vZGU7DQoJfQ0KCXJldHVybiBuZXcgQm94MkQuQ29sbGlzaW9uLmIy
RHluYW1pY1RyZWVOb2RlKGZpeHR1cmUpOw0KfTsNCkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNU
cmVlTm9kZS5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uKCkgew0KCXRoaXMuY2hpbGQxID0g
bnVsbDsNCgl0aGlzLmNoaWxkMiA9IG51bGw7DQoJdGhpcy5wYXJlbnQgPSBudWxsOw0KCXRoaXMu
Zml4dHVyZSA9IG51bGw7DQoJQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVOb2RlLl9mcmVl
Q2FjaGUucHVzaCh0aGlzKTsNCn07DQovKioNCiAqIEByZXR1cm4gYm9vbGVhbg0KICovDQpCb3gy
RC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZU5vZGUucHJvdG90eXBlLklzTGVhZiA9IGZ1bmN0aW9u
ICgpIHsNCglyZXR1cm4gdGhpcy5jaGlsZDEgPT09IG51bGw7DQp9Ow0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVBDQogKiBAcGFyYW0geyFCb3gyRC5E
eW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVCDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQu
Q29sbGlzaW9uLmIyRHluYW1pY1RyZWVQYWlyID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVC
KSB7DQoJLyoqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlfSAqLw0KCXRoaXMuZml4
dHVyZUEgPSBmaXh0dXJlQTsNCgkvKiogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9
ICovDQoJdGhpcy5maXh0dXJlQiA9IGZpeHR1cmVCOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9y
DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5t
X3BvaW50Q291bnQgPSAwOw0KCXRoaXMubV90eXBlID0gMDsNCgl0aGlzLm1fcG9pbnRzID0gW107
DQoJZm9yICh2YXIgaSA9IDA7IGkgPCBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhNYW5p
Zm9sZFBvaW50czsgaSsrKSB7DQoJCXRoaXMubV9wb2ludHNbaV0gPSBuZXcgQm94MkQuQ29sbGlz
aW9uLmIyTWFuaWZvbGRQb2ludCgpOw0KCX0NCgl0aGlzLm1fbG9jYWxQbGFuZU5vcm1hbCA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5tX2xvY2FsUG9pbnQgPSBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KfTsNCkJveDJELkNvbGxpc2lvbi5i
Mk1hbmlmb2xkLnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uKCkgew0KCWZvciAodmFyIGkgPSAw
OyBpIDwgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHM7IGkrKykg
ew0KCQl0aGlzLm1fcG9pbnRzW2ldLlJlc2V0KCk7DQoJfQ0KCXRoaXMubV9sb2NhbFBsYW5lTm9y
bWFsLlNldFplcm8oKTsNCgl0aGlzLm1fbG9jYWxQb2ludC5TZXRaZXJvKCk7DQoJdGhpcy5tX3R5
cGUgPSAwOw0KCXRoaXMubV9wb2ludENvdW50ID0gMDsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJN
YW5pZm9sZC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24obSkgew0KCXRoaXMubV9wb2ludENvdW50
ID0gbS5tX3BvaW50Q291bnQ7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCBCb3gyRC5Db21tb24uYjJT
ZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50czsgaSsrKSB7DQoJCXRoaXMubV9wb2ludHNbaV0u
U2V0KG0ubV9wb2ludHNbaV0pOw0KCX0NCgl0aGlzLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRWKG0u
bV9sb2NhbFBsYW5lTm9ybWFsKTsNCgl0aGlzLm1fbG9jYWxQb2ludC5TZXRWKG0ubV9sb2NhbFBv
aW50KTsNCgl0aGlzLm1fdHlwZSA9IG0ubV90eXBlOw0KfTsNCkJveDJELkNvbGxpc2lvbi5iMk1h
bmlmb2xkLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7DQoJdmFyIGNvcHkgPSBuZXcgQm94
MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQoKTsNCgljb3B5LlNldCh0aGlzKTsNCglyZXR1cm4gY29w
eTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5lX2NpcmNsZXMgPSAweDAwMDE7DQpC
b3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5lX2ZhY2VBID0gMHgwMDAyOw0KQm94MkQuQ29sbGlz
aW9uLmIyTWFuaWZvbGQuZV9mYWNlQiA9IDB4MDAwNDsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQog
Ki8NCkJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkUG9pbnQgPSBmdW5jdGlvbigpIHsNCgl0aGlz
Lm1fbG9jYWxQb2ludCA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhp
cy5tX2lkID0gbmV3IEJveDJELkNvbGxpc2lvbi5iMkNvbnRhY3RJRCgpOw0KCXRoaXMuUmVzZXQo
KTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZFBvaW50LnByb3RvdHlwZS5SZXNldCA9
IGZ1bmN0aW9uKCkgew0KCXRoaXMubV9sb2NhbFBvaW50LlNldFplcm8oKTsNCgl0aGlzLm1fbm9y
bWFsSW1wdWxzZSA9IDAuMDsNCgl0aGlzLm1fdGFuZ2VudEltcHVsc2UgPSAwLjA7DQoJdGhpcy5t
X2lkLlNldEtleSgwKTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZFBvaW50LnByb3Rv
dHlwZS5TZXQgPSBmdW5jdGlvbihtKSB7DQoJdGhpcy5tX2xvY2FsUG9pbnQuU2V0VihtLm1fbG9j
YWxQb2ludCk7DQoJdGhpcy5tX25vcm1hbEltcHVsc2UgPSBtLm1fbm9ybWFsSW1wdWxzZTsNCgl0
aGlzLm1fdGFuZ2VudEltcHVsc2UgPSBtLm1fdGFuZ2VudEltcHVsc2U7DQoJdGhpcy5tX2lkLlNl
dChtLm1faWQpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
fSBwMQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwMg0KICogQHBhcmFt
IHtudW1iZXJ9IG1heEZyYWN0aW9uDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQuQ29sbGlz
aW9uLmIyUmF5Q2FzdElucHV0ID0gZnVuY3Rpb24ocDEsIHAyLCBtYXhGcmFjdGlvbikgew0KCSAg
dGhpcy5wMSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJICB0aGlzLnAy
ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgkgIGlmIChtYXhGcmFjdGlv
biA9PT0gdW5kZWZpbmVkKSBtYXhGcmFjdGlvbiA9IDE7DQoJICBpZiAocDEpIHRoaXMucDEuU2V0
VihwMSk7DQoJICBpZiAocDIpIHRoaXMucDIuU2V0VihwMik7DQoJICB0aGlzLm1heEZyYWN0aW9u
ID0gbWF4RnJhY3Rpb247DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQuQ29s
bGlzaW9uLmIyUmF5Q2FzdE91dHB1dCA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubm9ybWFsID0gQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rv
cg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJTZWdtZW50ID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5w
MSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5wMiA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyU2Vn
bWVudC5wcm90b3R5cGUuVGVzdFNlZ21lbnQgPSBmdW5jdGlvbihsYW1iZGEsIG5vcm1hbCwgc2Vn
bWVudCwgbWF4TGFtYmRhKSB7DQoJaWYgKG1heExhbWJkYSA9PT0gdW5kZWZpbmVkKSBtYXhMYW1i
ZGEgPSAwOw0KCXZhciBzID0gc2VnbWVudC5wMTsNCgl2YXIgclggPSBzZWdtZW50LnAyLnggLSBz
Lng7DQoJdmFyIHJZID0gc2VnbWVudC5wMi55IC0gcy55Ow0KCXZhciBkWCA9IHRoaXMucDIueCAt
IHRoaXMucDEueDsNCgl2YXIgZFkgPSB0aGlzLnAyLnkgLSB0aGlzLnAxLnk7DQoJdmFyIG5YID0g
ZFk7DQoJdmFyIG5ZID0gKC1kWCk7DQoJdmFyIGtfc2xvcCA9IDEwMC4wICogTnVtYmVyLk1JTl9W
QUxVRTsNCgl2YXIgZGVub20gPSAoLShyWCAqIG5YICsgclkgKiBuWSkpOw0KCWlmIChkZW5vbSA+
IGtfc2xvcCkgew0KCQl2YXIgYlggPSBzLnggLSB0aGlzLnAxLng7DQoJCXZhciBiWSA9IHMueSAt
IHRoaXMucDEueTsNCgkJdmFyIGEgPSAoYlggKiBuWCArIGJZICogblkpOw0KCQlpZiAoMC4wIDw9
IGEgJiYgYSA8PSBtYXhMYW1iZGEgKiBkZW5vbSkgew0KCQkJdmFyIG11MiA9ICgtclggKiBiWSkg
KyByWSAqIGJYOw0KCQkJaWYgKCgta19zbG9wICogZGVub20pIDw9IG11MiAmJiBtdTIgPD0gZGVu
b20gKiAoMS4wICsga19zbG9wKSkgew0KCQkJCWEgLz0gZGVub207DQoJCQkJdmFyIG5MZW4gPSBN
YXRoLnNxcnQoblggKiBuWCArIG5ZICogblkpOw0KCQkJCW5YIC89IG5MZW47DQoJCQkJblkgLz0g
bkxlbjsNCgkJCQlsYW1iZGFbMF0gPSBhOw0KCQkJCW5vcm1hbC5TZXQoblgsIG5ZKTsNCgkJCQly
ZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJfQ0KCX0NCglyZXR1cm4gZmFsc2U7DQp9Ow0KQm94MkQuQ29s
bGlzaW9uLmIyU2VnbWVudC5wcm90b3R5cGUuRXh0ZW5kID0gZnVuY3Rpb24oYWFiYikgew0KCXRo
aXMuRXh0ZW5kRm9yd2FyZChhYWJiKTsNCgl0aGlzLkV4dGVuZEJhY2t3YXJkKGFhYmIpOw0KfTsN
CkJveDJELkNvbGxpc2lvbi5iMlNlZ21lbnQucHJvdG90eXBlLkV4dGVuZEZvcndhcmQgPSBmdW5j
dGlvbihhYWJiKSB7DQoJdmFyIGRYID0gdGhpcy5wMi54IC0gdGhpcy5wMS54Ow0KCXZhciBkWSA9
IHRoaXMucDIueSAtIHRoaXMucDEueTsNCgl2YXIgbGFtYmRhID0gTWF0aC5taW4oZFggPiAwID8g
KGFhYmIudXBwZXJCb3VuZF8ueCAtIHRoaXMucDEueCkgLyBkWCA6IGRYIDwgMCA/IChhYWJiLmxv
d2VyQm91bmRfLnggLSB0aGlzLnAxLngpIC8gZFggOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFks
IGRZID4gMCA/IChhYWJiLnVwcGVyQm91bmRfLnkgLSB0aGlzLnAxLnkpIC8gZFkgOiBkWSA8IDAg
PyAoYWFiYi5sb3dlckJvdW5kXy55IC0gdGhpcy5wMS55KSAvIGRZIDogTnVtYmVyLlBPU0lUSVZF
X0lORklOSVRZKTsNCgl0aGlzLnAyLnggPSB0aGlzLnAxLnggKyBkWCAqIGxhbWJkYTsNCgl0aGlz
LnAyLnkgPSB0aGlzLnAxLnkgKyBkWSAqIGxhbWJkYTsNCn07DQpCb3gyRC5Db2xsaXNpb24uYjJT
ZWdtZW50LnByb3RvdHlwZS5FeHRlbmRCYWNrd2FyZCA9IGZ1bmN0aW9uKGFhYmIpIHsNCgl2YXIg
ZFggPSAoLXRoaXMucDIueCkgKyB0aGlzLnAxLng7DQoJdmFyIGRZID0gKC10aGlzLnAyLnkpICsg
dGhpcy5wMS55Ow0KCXZhciBsYW1iZGEgPSBNYXRoLm1pbihkWCA+IDAgPyAoYWFiYi51cHBlckJv
dW5kXy54IC0gdGhpcy5wMi54KSAvIGRYIDogZFggPCAwID8gKGFhYmIubG93ZXJCb3VuZF8ueCAt
IHRoaXMucDIueCkgLyBkWCA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgZFkgPiAwID8gKGFh
YmIudXBwZXJCb3VuZF8ueSAtIHRoaXMucDIueSkgLyBkWSA6IGRZIDwgMCA/IChhYWJiLmxvd2Vy
Qm91bmRfLnkgLSB0aGlzLnAyLnkpIC8gZFkgOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpOw0K
CXRoaXMucDEueCA9IHRoaXMucDIueCArIGRYICogbGFtYmRhOw0KCXRoaXMucDEueSA9IHRoaXMu
cDIueSArIGRZICogbGFtYmRhOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJE
LkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbiA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubV9s
b2NhbFBvaW50ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1f
YXhpcyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQp9Ow0KQm94MkQuQ29s
bGlzaW9uLmIyU2VwYXJhdGlvbkZ1bmN0aW9uLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rp
b24oY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKSB7DQoJdGhp
cy5tX3Byb3h5QSA9IHByb3h5QTsNCgl0aGlzLm1fcHJveHlCID0gcHJveHlCOw0KCXZhciBjb3Vu
dCA9IGNhY2hlLmNvdW50Ow0KOw0KCXZhciBsb2NhbFBvaW50QTsNCgl2YXIgbG9jYWxQb2ludEEx
Ow0KCXZhciBsb2NhbFBvaW50QTI7DQoJdmFyIGxvY2FsUG9pbnRCOw0KCXZhciBsb2NhbFBvaW50
QjE7DQoJdmFyIGxvY2FsUG9pbnRCMjsNCgl2YXIgcG9pbnRBWCA9IDA7DQoJdmFyIHBvaW50QVkg
PSAwOw0KCXZhciBwb2ludEJYID0gMDsNCgl2YXIgcG9pbnRCWSA9IDA7DQoJdmFyIG5vcm1hbFgg
PSAwOw0KCXZhciBub3JtYWxZID0gMDsNCgl2YXIgdE1hdDsNCgl2YXIgdFZlYzsNCgl2YXIgcyA9
IDA7DQoJdmFyIHNnbiA9IDA7DQoJaWYgKGNvdW50ID09IDEpIHsNCgkJdGhpcy5tX3R5cGUgPSBC
b3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9wb2ludHM7DQoJCWxvY2FsUG9p
bnRBID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhBWzBdKTsNCgkJbG9jYWxQ
b2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRleEJbMF0pOw0KCQl0VmVj
ID0gbG9jYWxQb2ludEE7DQoJCXRNYXQgPSB0cmFuc2Zvcm1BLlI7DQoJCXBvaW50QVggPSB0cmFu
c2Zvcm1BLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAq
IHRWZWMueSk7DQoJCXBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wx
LnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7DQoJCXRWZWMgPSBsb2NhbFBvaW50
QjsNCgkJdE1hdCA9IHRyYW5zZm9ybUIuUjsNCgkJcG9pbnRCWCA9IHRyYW5zZm9ybUIucG9zaXRp
b24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsNCgkJ
cG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCAr
IHRNYXQuY29sMi55ICogdFZlYy55KTsNCgkJdGhpcy5tX2F4aXMueCA9IHBvaW50QlggLSBwb2lu
dEFYOw0KCQl0aGlzLm1fYXhpcy55ID0gcG9pbnRCWSAtIHBvaW50QVk7DQoJCXRoaXMubV9heGlz
Lk5vcm1hbGl6ZSgpOw0KCX0gZWxzZSBpZiAoY2FjaGUuaW5kZXhCWzBdID09IGNhY2hlLmluZGV4
QlsxXSkgew0KCQl0aGlzLm1fdHlwZSA9IEJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5j
dGlvbi5lX2ZhY2VBOw0KCQlsb2NhbFBvaW50QTEgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChj
YWNoZS5pbmRleEFbMF0pOw0KCQlsb2NhbFBvaW50QTIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRl
eChjYWNoZS5pbmRleEFbMV0pOw0KCQlsb2NhbFBvaW50QiA9IHRoaXMubV9wcm94eUIuR2V0VmVy
dGV4KGNhY2hlLmluZGV4QlswXSk7DQoJCXRoaXMubV9sb2NhbFBvaW50LnggPSAwLjUgKiAobG9j
YWxQb2ludEExLnggKyBsb2NhbFBvaW50QTIueCk7DQoJCXRoaXMubV9sb2NhbFBvaW50LnkgPSAw
LjUgKiAobG9jYWxQb2ludEExLnkgKyBsb2NhbFBvaW50QTIueSk7DQoJCXRoaXMubV9heGlzID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNyb3NzVkYoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
LlN1YnRyYWN0VlYobG9jYWxQb2ludEEyLCBsb2NhbFBvaW50QTEpLCAxLjApOw0KCQl0aGlzLm1f
YXhpcy5Ob3JtYWxpemUoKTsNCgkJdFZlYyA9IHRoaXMubV9heGlzOw0KCQl0TWF0ID0gdHJhbnNm
b3JtQS5SOw0KCQlub3JtYWxYID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAq
IHRWZWMueTsNCgkJbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkg
KiB0VmVjLnk7DQoJCXRWZWMgPSB0aGlzLm1fbG9jYWxQb2ludDsNCgkJdE1hdCA9IHRyYW5zZm9y
bUEuUjsNCgkJcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAq
IHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsNCgkJcG9pbnRBWSA9IHRyYW5zZm9ybUEu
cG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55
KTsNCgkJdFZlYyA9IGxvY2FsUG9pbnRCOw0KCQl0TWF0ID0gdHJhbnNmb3JtQi5SOw0KCQlwb2lu
dEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1h
dC5jb2wyLnggKiB0VmVjLnkpOw0KCQlwb2ludEJZID0gdHJhbnNmb3JtQi5wb3NpdGlvbi55ICsg
KHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpOw0KCQlzID0gKHBv
aW50QlggLSBwb2ludEFYKSAqIG5vcm1hbFggKyAocG9pbnRCWSAtIHBvaW50QVkpICogbm9ybWFs
WTsNCgkJaWYgKHMgPCAwLjApIHsNCgkJCXRoaXMubV9heGlzLk5lZ2F0aXZlU2VsZigpOw0KCQl9
DQoJfSBlbHNlIGlmIChjYWNoZS5pbmRleEFbMF0gPT0gY2FjaGUuaW5kZXhBWzBdKSB7DQoJCXRo
aXMubV90eXBlID0gQm94MkQuQ29sbGlzaW9uLmIyU2VwYXJhdGlvbkZ1bmN0aW9uLmVfZmFjZUI7
DQoJCWxvY2FsUG9pbnRCMSA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4Qlsw
XSk7DQoJCWxvY2FsUG9pbnRCMiA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4
QlsxXSk7DQoJCWxvY2FsUG9pbnRBID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5k
ZXhBWzBdKTsNCgkJdGhpcy5tX2xvY2FsUG9pbnQueCA9IDAuNSAqIChsb2NhbFBvaW50QjEueCAr
IGxvY2FsUG9pbnRCMi54KTsNCgkJdGhpcy5tX2xvY2FsUG9pbnQueSA9IDAuNSAqIChsb2NhbFBv
aW50QjEueSArIGxvY2FsUG9pbnRCMi55KTsNCgkJdGhpcy5tX2F4aXMgPSBCb3gyRC5Db21tb24u
TWF0aC5iMk1hdGguQ3Jvc3NWRihCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVihs
b2NhbFBvaW50QjIsIGxvY2FsUG9pbnRCMSksIDEuMCk7DQoJCXRoaXMubV9heGlzLk5vcm1hbGl6
ZSgpOw0KCQl0VmVjID0gdGhpcy5tX2F4aXM7DQoJCXRNYXQgPSB0cmFuc2Zvcm1CLlI7DQoJCW5v
cm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55Ow0KCQlu
b3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTsNCgkJ
dFZlYyA9IHRoaXMubV9sb2NhbFBvaW50Ow0KCQl0TWF0ID0gdHJhbnNmb3JtQi5SOw0KCQlwb2lu
dEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1h
dC5jb2wyLnggKiB0VmVjLnkpOw0KCQlwb2ludEJZID0gdHJhbnNmb3JtQi5wb3NpdGlvbi55ICsg
KHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpOw0KCQl0VmVjID0g
bG9jYWxQb2ludEE7DQoJCXRNYXQgPSB0cmFuc2Zvcm1BLlI7DQoJCXBvaW50QVggPSB0cmFuc2Zv
cm1BLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRW
ZWMueSk7DQoJCXBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkg
KiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7DQoJCXMgPSAocG9pbnRBWCAtIHBvaW50
QlgpICogbm9ybWFsWCArIChwb2ludEFZIC0gcG9pbnRCWSkgKiBub3JtYWxZOw0KCQlpZiAocyA8
IDAuMCkgew0KCQkJdGhpcy5tX2F4aXMuTmVnYXRpdmVTZWxmKCk7DQoJCX0NCgl9IGVsc2Ugew0K
CQlsb2NhbFBvaW50QTEgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMF0p
Ow0KCQlsb2NhbFBvaW50QTIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFb
MV0pOw0KCQlsb2NhbFBvaW50QjEgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRl
eEJbMF0pOw0KCQlsb2NhbFBvaW50QjIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5p
bmRleEJbMV0pOw0KCQl2YXIgZEEgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsTVYodHJh
bnNmb3JtQS5SLCBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVihsb2NhbFBvaW50
QTIsIGxvY2FsUG9pbnRBMSkpOw0KCQl2YXIgZEIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGgu
TXVsTVYodHJhbnNmb3JtQi5SLCBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVihs
b2NhbFBvaW50QjIsIGxvY2FsUG9pbnRCMSkpOw0KCQl2YXIgYSA9IGRBLnggKiBkQS54ICsgZEEu
eSAqIGRBLnk7DQoJCXZhciBlID0gZEIueCAqIGRCLnggKyBkQi55ICogZEIueTsNCgkJdmFyIHIg
PSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVihkQiwgZEEpOw0KCQl2YXIgYyA9
IGRBLnggKiByLnggKyBkQS55ICogci55Ow0KCQl2YXIgZiA9IGRCLnggKiByLnggKyBkQi55ICog
ci55Ow0KCQl2YXIgYiA9IGRBLnggKiBkQi54ICsgZEEueSAqIGRCLnk7DQoJCXZhciBkZW5vbSA9
IGEgKiBlIC0gYiAqIGI7DQoJCXMgPSAwLjA7DQoJCWlmIChkZW5vbSAhPSAwLjApIHsNCgkJCXMg
PSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAoKGIgKiBmIC0gYyAqIGUpIC8gZGVub20s
IDAuMCwgMS4wKTsNCgkJfQ0KCQl2YXIgdCA9IChiICogcyArIGYpIC8gZTsNCgkJaWYgKHQgPCAw
LjApIHsNCgkJCXQgPSAwLjA7DQoJCQlzID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNsYW1w
KChiIC0gYykgLyBhLCAwLjAsIDEuMCk7DQoJCX0NCgkJbG9jYWxQb2ludEEgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCQlsb2NhbFBvaW50QS54ID0gbG9jYWxQb2ludEEx
LnggKyBzICogKGxvY2FsUG9pbnRBMi54IC0gbG9jYWxQb2ludEExLngpOw0KCQlsb2NhbFBvaW50
QS55ID0gbG9jYWxQb2ludEExLnkgKyBzICogKGxvY2FsUG9pbnRBMi55IC0gbG9jYWxQb2ludEEx
LnkpOw0KCQlsb2NhbFBvaW50QiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7
DQoJCWxvY2FsUG9pbnRCLnggPSBsb2NhbFBvaW50QjEueCArIHMgKiAobG9jYWxQb2ludEIyLngg
LSBsb2NhbFBvaW50QjEueCk7DQoJCWxvY2FsUG9pbnRCLnkgPSBsb2NhbFBvaW50QjEueSArIHMg
KiAobG9jYWxQb2ludEIyLnkgLSBsb2NhbFBvaW50QjEueSk7DQoJCWlmIChzID09IDAuMCB8fCBz
ID09IDEuMCkgew0KCQkJdGhpcy5tX3R5cGUgPSBCb3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0aW9u
RnVuY3Rpb24uZV9mYWNlQjsNCgkJCXRoaXMubV9heGlzID0gQm94MkQuQ29tbW9uLk1hdGguYjJN
YXRoLkNyb3NzVkYoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLlN1YnRyYWN0VlYobG9jYWxQb2lu
dEIyLCBsb2NhbFBvaW50QjEpLCAxLjApOw0KCQkJdGhpcy5tX2F4aXMuTm9ybWFsaXplKCk7DQoJ
CQl0aGlzLm1fbG9jYWxQb2ludCA9IGxvY2FsUG9pbnRCOw0KCQkJdFZlYyA9IHRoaXMubV9heGlz
Ow0KCQkJdE1hdCA9IHRyYW5zZm9ybUIuUjsNCgkJCW5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRW
ZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55Ow0KCQkJbm9ybWFsWSA9IHRNYXQuY29sMS55ICog
dFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7DQoJCQl0VmVjID0gdGhpcy5tX2xvY2FsUG9p
bnQ7DQoJCQl0TWF0ID0gdHJhbnNmb3JtQi5SOw0KCQkJcG9pbnRCWCA9IHRyYW5zZm9ybUIucG9z
aXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsN
CgkJCXBvaW50QlkgPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVj
LnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7DQoJCQl0VmVjID0gbG9jYWxQb2ludEE7DQoJCQl0
TWF0ID0gdHJhbnNmb3JtQS5SOw0KCQkJcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCAr
ICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsNCgkJCXBvaW50
QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0
LmNvbDIueSAqIHRWZWMueSk7DQoJCQlzZ24gPSAocG9pbnRBWCAtIHBvaW50QlgpICogbm9ybWFs
WCArIChwb2ludEFZIC0gcG9pbnRCWSkgKiBub3JtYWxZOw0KCQkJaWYgKHMgPCAwLjApIHsNCgkJ
CQl0aGlzLm1fYXhpcy5OZWdhdGl2ZVNlbGYoKTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCXRoaXMu
bV90eXBlID0gQm94MkQuQ29sbGlzaW9uLmIyU2VwYXJhdGlvbkZ1bmN0aW9uLmVfZmFjZUE7DQoJ
CQl0aGlzLm1fYXhpcyA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Dcm9zc1ZGKEJveDJELkNv
bW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEExKSwg
MS4wKTsNCgkJCXRoaXMubV9sb2NhbFBvaW50ID0gbG9jYWxQb2ludEE7DQoJCQl0VmVjID0gdGhp
cy5tX2F4aXM7DQoJCQl0TWF0ID0gdHJhbnNmb3JtQS5SOw0KCQkJbm9ybWFsWCA9IHRNYXQuY29s
MS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7DQoJCQlub3JtYWxZID0gdE1hdC5j
b2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTsNCgkJCXRWZWMgPSB0aGlzLm1f
bG9jYWxQb2ludDsNCgkJCXRNYXQgPSB0cmFuc2Zvcm1BLlI7DQoJCQlwb2ludEFYID0gdHJhbnNm
b3JtQS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0
VmVjLnkpOw0KCQkJcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEu
eSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTsNCgkJCXRWZWMgPSBsb2NhbFBvaW50
QjsNCgkJCXRNYXQgPSB0cmFuc2Zvcm1CLlI7DQoJCQlwb2ludEJYID0gdHJhbnNmb3JtQi5wb3Np
dGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpOw0K
CQkJcG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMu
eCArIHRNYXQuY29sMi55ICogdFZlYy55KTsNCgkJCXNnbiA9IChwb2ludEJYIC0gcG9pbnRBWCkg
KiBub3JtYWxYICsgKHBvaW50QlkgLSBwb2ludEFZKSAqIG5vcm1hbFk7DQoJCQlpZiAocyA8IDAu
MCkgew0KCQkJCXRoaXMubV9heGlzLk5lZ2F0aXZlU2VsZigpOw0KCQkJfQ0KCQl9DQoJfQ0KfTsN
CkJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUuRXZhbHVhdGUg
PSBmdW5jdGlvbih0cmFuc2Zvcm1BLCB0cmFuc2Zvcm1CKSB7DQoJdmFyIGF4aXNBOw0KCXZhciBh
eGlzQjsNCgl2YXIgbG9jYWxQb2ludEE7DQoJdmFyIGxvY2FsUG9pbnRCOw0KCXZhciBwb2ludEE7
DQoJdmFyIHBvaW50QjsNCgl2YXIgc2VwZXJhdGlvbiA9IDA7DQoJdmFyIG5vcm1hbDsNCglzd2l0
Y2ggKHRoaXMubV90eXBlKSB7DQoJY2FzZSBCb3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0aW9uRnVu
Y3Rpb24uZV9wb2ludHM6DQoJCWF4aXNBID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFRN
Vih0cmFuc2Zvcm1BLlIsIHRoaXMubV9heGlzKTsNCgkJYXhpc0IgPSBCb3gyRC5Db21tb24uTWF0
aC5iMk1hdGguTXVsVE1WKHRyYW5zZm9ybUIuUiwgdGhpcy5tX2F4aXMuR2V0TmVnYXRpdmUoKSk7
DQoJCWxvY2FsUG9pbnRBID0gdGhpcy5tX3Byb3h5QS5HZXRTdXBwb3J0VmVydGV4KGF4aXNBKTsN
CgkJbG9jYWxQb2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFN1cHBvcnRWZXJ0ZXgoYXhpc0IpOw0K
CQlwb2ludEEgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCBsb2Nh
bFBvaW50QSk7DQoJCXBvaW50QiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHRyYW5z
Zm9ybUIsIGxvY2FsUG9pbnRCKTsNCgkJc2VwZXJhdGlvbiA9IChwb2ludEIueCAtIHBvaW50QS54
KSAqIHRoaXMubV9heGlzLnggKyAocG9pbnRCLnkgLSBwb2ludEEueSkgKiB0aGlzLm1fYXhpcy55
Ow0KCQlicmVhazsNCgljYXNlIEJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbi5l
X2ZhY2VBOg0KCQlub3JtYWwgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsTVYodHJhbnNm
b3JtQS5SLCB0aGlzLm1fYXhpcyk7DQoJCXBvaW50QSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
aC5NdWxYKHRyYW5zZm9ybUEsIHRoaXMubV9sb2NhbFBvaW50KTsNCgkJYXhpc0IgPSBCb3gyRC5D
b21tb24uTWF0aC5iMk1hdGguTXVsVE1WKHRyYW5zZm9ybUIuUiwgbm9ybWFsLkdldE5lZ2F0aXZl
KCkpOw0KCQlsb2NhbFBvaW50QiA9IHRoaXMubV9wcm94eUIuR2V0U3VwcG9ydFZlcnRleChheGlz
Qik7DQoJCXBvaW50QiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHRyYW5zZm9ybUIs
IGxvY2FsUG9pbnRCKTsNCgkJc2VwZXJhdGlvbiA9IChwb2ludEIueCAtIHBvaW50QS54KSAqIG5v
cm1hbC54ICsgKHBvaW50Qi55IC0gcG9pbnRBLnkpICogbm9ybWFsLnk7DQoJCWJyZWFrOw0KCWNh
c2UgQm94MkQuQ29sbGlzaW9uLmIyU2VwYXJhdGlvbkZ1bmN0aW9uLmVfZmFjZUI6DQoJCW5vcm1h
bCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxNVih0cmFuc2Zvcm1CLlIsIHRoaXMubV9h
eGlzKTsNCgkJcG9pbnRCID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFgodHJhbnNmb3Jt
QiwgdGhpcy5tX2xvY2FsUG9pbnQpOw0KCQlheGlzQSA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
aC5NdWxUTVYodHJhbnNmb3JtQS5SLCBub3JtYWwuR2V0TmVnYXRpdmUoKSk7DQoJCWxvY2FsUG9p
bnRBID0gdGhpcy5tX3Byb3h5QS5HZXRTdXBwb3J0VmVydGV4KGF4aXNBKTsNCgkJcG9pbnRBID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFgodHJhbnNmb3JtQSwgbG9jYWxQb2ludEEpOw0K
CQlzZXBlcmF0aW9uID0gKHBvaW50QS54IC0gcG9pbnRCLngpICogbm9ybWFsLnggKyAocG9pbnRB
LnkgLSBwb2ludEIueSkgKiBub3JtYWwueTsNCgkJYnJlYWs7DQoJZGVmYXVsdDoNCjsNCgkJYnJl
YWs7DQoJfQ0KCXJldHVybiBzZXBlcmF0aW9uOw0KfTsNCkJveDJELkNvbGxpc2lvbi5iMlNlcGFy
YXRpb25GdW5jdGlvbi5lX3BvaW50cyA9IDB4MDE7DQpCb3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0
aW9uRnVuY3Rpb24uZV9mYWNlQSA9IDB4MDI7DQpCb3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0aW9u
RnVuY3Rpb24uZV9mYWNlQiA9IDB4MDQ7DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gy
RC5Db2xsaXNpb24uYjJTaW1wbGV4ID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5tX3YxID0gbmV3IEJv
eDJELkNvbGxpc2lvbi5iMlNpbXBsZXhWZXJ0ZXgoKTsNCgl0aGlzLm1fdjIgPSBuZXcgQm94MkQu
Q29sbGlzaW9uLmIyU2ltcGxleFZlcnRleCgpOw0KCXRoaXMubV92MyA9IG5ldyBCb3gyRC5Db2xs
aXNpb24uYjJTaW1wbGV4VmVydGV4KCk7DQoJdGhpcy5tX3ZlcnRpY2VzID0gW3RoaXMubV92MSwg
dGhpcy5tX3YyLCB0aGlzLm1fdjNdOw0KfTsNCkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXgucHJv
dG90eXBlLlJlYWRDYWNoZSA9IGZ1bmN0aW9uKGNhY2hlLCBwcm94eUEsIHRyYW5zZm9ybUEsIHBy
b3h5QiwgdHJhbnNmb3JtQikgew0KOw0KCXZhciB3QUxvY2FsOw0KCXZhciB3QkxvY2FsOw0KCXRo
aXMubV9jb3VudCA9IGNhY2hlLmNvdW50Ow0KCXZhciB2ZXJ0aWNlcyA9IHRoaXMubV92ZXJ0aWNl
czsNCglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7DQoJCXZhciB2ID0g
dmVydGljZXNbaV07DQoJCXYuaW5kZXhBID0gY2FjaGUuaW5kZXhBW2ldOw0KCQl2LmluZGV4QiA9
IGNhY2hlLmluZGV4QltpXTsNCgkJd0FMb2NhbCA9IHByb3h5QS5HZXRWZXJ0ZXgodi5pbmRleEEp
Ow0KCQl3QkxvY2FsID0gcHJveHlCLkdldFZlcnRleCh2LmluZGV4Qik7DQoJCXYud0EgPSBCb3gy
RC5Db21tb24uTWF0aC5iMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCB3QUxvY2FsKTsNCgkJdi53QiA9
IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIHdCTG9jYWwpOw0KCQl2
LncgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVih2LndCLCB2LndBKTsNCgkJ
di5hID0gMDsNCgl9DQoJaWYgKHRoaXMubV9jb3VudCA+IDEpIHsNCgkJdmFyIG1ldHJpYzEgPSBj
YWNoZS5tZXRyaWM7DQoJCXZhciBtZXRyaWMyID0gdGhpcy5HZXRNZXRyaWMoKTsNCgkJaWYgKG1l
dHJpYzIgPCAuNSAqIG1ldHJpYzEgfHwgMi4wICogbWV0cmljMSA8IG1ldHJpYzIgfHwgbWV0cmlj
MiA8IE51bWJlci5NSU5fVkFMVUUpIHsNCgkJCXRoaXMubV9jb3VudCA9IDA7DQoJCX0NCgl9DQoJ
aWYgKHRoaXMubV9jb3VudCA9PSAwKSB7DQoJCXYgPSB2ZXJ0aWNlc1swXTsNCgkJdi5pbmRleEEg
PSAwOw0KCQl2LmluZGV4QiA9IDA7DQoJCXdBTG9jYWwgPSBwcm94eUEuR2V0VmVydGV4KDApOw0K
CQl3QkxvY2FsID0gcHJveHlCLkdldFZlcnRleCgwKTsNCgkJdi53QSA9IEJveDJELkNvbW1vbi5N
YXRoLmIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIHdBTG9jYWwpOw0KCQl2LndCID0gQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLk11bFgodHJhbnNmb3JtQiwgd0JMb2NhbCk7DQoJCXYudyA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKHYud0IsIHYud0EpOw0KCQl0aGlzLm1fY291
bnQgPSAxOw0KCX0NCn07DQpCb3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4LnByb3RvdHlwZS5Xcml0
ZUNhY2hlID0gZnVuY3Rpb24oY2FjaGUpIHsNCgljYWNoZS5tZXRyaWMgPSB0aGlzLkdldE1ldHJp
YygpOw0KCWNhY2hlLmNvdW50ID0gdGhpcy5tX2NvdW50Ow0KCXZhciB2ZXJ0aWNlcyA9IHRoaXMu
bV92ZXJ0aWNlczsNCglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgaSsrKSB7DQoJ
CWNhY2hlLmluZGV4QVtpXSA9IHZlcnRpY2VzW2ldLmluZGV4QTsNCgkJY2FjaGUuaW5kZXhCW2ld
ID0gdmVydGljZXNbaV0uaW5kZXhCOw0KCX0NCn07DQpCb3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4
LnByb3RvdHlwZS5HZXRTZWFyY2hEaXJlY3Rpb24gPSBmdW5jdGlvbigpIHsNCglpZiAodGhpcy5t
X2NvdW50ID09IDEpIHsNCgkJcmV0dXJuIHRoaXMubV92MS53LkdldE5lZ2F0aXZlKCk7DQoJfSBl
bHNlIGlmICh0aGlzLm1fY291bnQgPT0gMikgew0KCQkJdmFyIGUxMiA9IEJveDJELkNvbW1vbi5N
YXRoLmIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92Mi53LCB0aGlzLm1fdjEudyk7DQoJCQl2YXIg
c2duID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNyb3NzVlYoZTEyLCB0aGlzLm1fdjEudy5H
ZXROZWdhdGl2ZSgpKTsNCgkJCWlmIChzZ24gPiAwLjApIHsNCgkJCQlyZXR1cm4gQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLkNyb3NzRlYoMS4wLCBlMTIpOw0KCQkJfQ0KCQkJZWxzZSB7DQoJCQkJ
cmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Dcm9zc1ZGKGUxMiwgMS4wKTsNCgkJCX0N
Cgl9IGVsc2Ugew0KOw0KCQlyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAw
KTsNCgl9DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleC5wcm90b3R5cGUuR2V0Q2xvc2Vz
dFBvaW50ID0gZnVuY3Rpb24oKSB7DQoJaWYgKHRoaXMubV9jb3VudCA9PSAxKSB7DQoJCXJldHVy
biB0aGlzLm1fdjEudzsNCgl9IGVsc2UgaWYgKHRoaXMubV9jb3VudCA9PSAyKSB7DQoJCXJldHVy
biBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KHRoaXMubV92MS5hICogdGhpcy5tX3YxLncu
eCArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLncueCwgdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEu
dy55ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIudy55KTsNCgl9IGVsc2Ugew0KOw0KCQlyZXR1
cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl9DQp9Ow0KQm94MkQuQ29s
bGlzaW9uLmIyU2ltcGxleC5wcm90b3R5cGUuR2V0V2l0bmVzc1BvaW50cyA9IGZ1bmN0aW9uKHBB
LCBwQikgew0KCWlmICh0aGlzLm1fY291bnQgPT0gMSkgew0KCQlwQS5TZXRWKHRoaXMubV92MS53
QSk7DQoJCXBCLlNldFYodGhpcy5tX3YxLndCKTsNCgl9IGVsc2UgaWYgKHRoaXMubV9jb3VudCA9
PSAyKSB7DQoJCXBBLnggPSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53QS54ICsgdGhpcy5tX3Yy
LmEgKiB0aGlzLm1fdjIud0EueDsNCgkJcEEueSA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndB
LnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS55Ow0KCQlwQi54ID0gdGhpcy5tX3YxLmEg
KiB0aGlzLm1fdjEud0IueCArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndCLng7DQoJCXBCLnkg
PSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53Qi55ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIu
d0IueTsNCgl9IGVsc2UgaWYgKHRoaXMubV9jb3VudCA9PSAzKSB7DQoJCXBCLnggPSBwQS54ID0g
dGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueCArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndB
LnggKyB0aGlzLm1fdjMuYSAqIHRoaXMubV92My53QS54Ow0KCQlwQi55ID0gcEEueSA9IHRoaXMu
bV92MS5hICogdGhpcy5tX3YxLndBLnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS55ICsg
dGhpcy5tX3YzLmEgKiB0aGlzLm1fdjMud0EueTsNCgl9IGVsc2Ugew0KOw0KCX0NCn07DQpCb3gy
RC5Db2xsaXNpb24uYjJTaW1wbGV4LnByb3RvdHlwZS5HZXRNZXRyaWMgPSBmdW5jdGlvbigpIHsN
CglpZiAodGhpcy5tX2NvdW50ID09IDEpIHsNCgkJcmV0dXJuIDAuMDsNCgl9IGVsc2UgaWYgKHRo
aXMubV9jb3VudCA9PSAyKSB7DQoJCXJldHVybiBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3Vi
dHJhY3RWVih0aGlzLm1fdjEudywgdGhpcy5tX3YyLncpLkxlbmd0aCgpOw0KCX0gZWxzZSBpZiAo
dGhpcy5tX2NvdW50ID09IDMpIHsNCgkJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5D
cm9zc1ZWKEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92Mi53LCB0
aGlzLm1fdjEudyksIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92
My53LCB0aGlzLm1fdjEudykpOw0KCX0gZWxzZSB7DQo7DQoJCXJldHVybiAwLjA7DQoJfQ0KfTsN
CkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXgucHJvdG90eXBlLlNvbHZlMiA9IGZ1bmN0aW9uKCkg
ew0KCXZhciB3MSA9IHRoaXMubV92MS53Ow0KCXZhciB3MiA9IHRoaXMubV92Mi53Ow0KCXZhciBl
MTIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVih3MiwgdzEpOw0KCXZhciBk
MTJfMiA9ICgtKHcxLnggKiBlMTIueCArIHcxLnkgKiBlMTIueSkpOw0KCWlmIChkMTJfMiA8PSAw
LjApIHsNCgkJdGhpcy5tX3YxLmEgPSAxLjA7DQoJCXRoaXMubV9jb3VudCA9IDE7DQoJCXJldHVy
bjsNCgl9DQoJdmFyIGQxMl8xID0gKHcyLnggKiBlMTIueCArIHcyLnkgKiBlMTIueSk7DQoJaWYg
KGQxMl8xIDw9IDAuMCkgew0KCQl0aGlzLm1fdjIuYSA9IDEuMDsNCgkJdGhpcy5tX2NvdW50ID0g
MTsNCgkJdGhpcy5tX3YxLlNldCh0aGlzLm1fdjIpOw0KCQlyZXR1cm47DQoJfQ0KCXZhciBpbnZf
ZDEyID0gMS4wIC8gKGQxMl8xICsgZDEyXzIpOw0KCXRoaXMubV92MS5hID0gZDEyXzEgKiBpbnZf
ZDEyOw0KCXRoaXMubV92Mi5hID0gZDEyXzIgKiBpbnZfZDEyOw0KCXRoaXMubV9jb3VudCA9IDI7
DQp9Ow0KQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleC5wcm90b3R5cGUuU29sdmUzID0gZnVuY3Rp
b24oKSB7DQoJdmFyIHcxID0gdGhpcy5tX3YxLnc7DQoJdmFyIHcyID0gdGhpcy5tX3YyLnc7DQoJ
dmFyIHczID0gdGhpcy5tX3YzLnc7DQoJdmFyIGUxMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0
aC5TdWJ0cmFjdFZWKHcyLCB3MSk7DQoJdmFyIHcxZTEyID0gQm94MkQuQ29tbW9uLk1hdGguYjJN
YXRoLkRvdCh3MSwgZTEyKTsNCgl2YXIgdzJlMTIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGgu
RG90KHcyLCBlMTIpOw0KCXZhciBkMTJfMSA9IHcyZTEyOw0KCXZhciBkMTJfMiA9ICgtdzFlMTIp
Ow0KCXZhciBlMTMgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguU3VidHJhY3RWVih3MywgdzEp
Ow0KCXZhciB3MWUxMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3QodzEsIGUxMyk7DQoJ
dmFyIHczZTEzID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkRvdCh3MywgZTEzKTsNCgl2YXIg
ZDEzXzEgPSB3M2UxMzsNCgl2YXIgZDEzXzIgPSAoLXcxZTEzKTsNCgl2YXIgZTIzID0gQm94MkQu
Q29tbW9uLk1hdGguYjJNYXRoLlN1YnRyYWN0VlYodzMsIHcyKTsNCgl2YXIgdzJlMjMgPSBCb3gy
RC5Db21tb24uTWF0aC5iMk1hdGguRG90KHcyLCBlMjMpOw0KCXZhciB3M2UyMyA9IEJveDJELkNv
bW1vbi5NYXRoLmIyTWF0aC5Eb3QodzMsIGUyMyk7DQoJdmFyIGQyM18xID0gdzNlMjM7DQoJdmFy
IGQyM18yID0gKC13MmUyMyk7DQoJdmFyIG4xMjMgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGgu
Q3Jvc3NWVihlMTIsIGUxMyk7DQoJdmFyIGQxMjNfMSA9IG4xMjMgKiBCb3gyRC5Db21tb24uTWF0
aC5iMk1hdGguQ3Jvc3NWVih3MiwgdzMpOw0KCXZhciBkMTIzXzIgPSBuMTIzICogQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLkNyb3NzVlYodzMsIHcxKTsNCgl2YXIgZDEyM18zID0gbjEyMyAqIEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Dcm9zc1ZWKHcxLCB3Mik7DQoJaWYgKGQxMl8yIDw9IDAu
MCAmJiBkMTNfMiA8PSAwLjApIHsNCgkJdGhpcy5tX3YxLmEgPSAxLjA7DQoJCXRoaXMubV9jb3Vu
dCA9IDE7DQoJCXJldHVybjsNCgl9DQoJaWYgKGQxMl8xID4gMC4wICYmIGQxMl8yID4gMC4wICYm
IGQxMjNfMyA8PSAwLjApIHsNCgkJdmFyIGludl9kMTIgPSAxLjAgLyAoZDEyXzEgKyBkMTJfMik7
DQoJCXRoaXMubV92MS5hID0gZDEyXzEgKiBpbnZfZDEyOw0KCQl0aGlzLm1fdjIuYSA9IGQxMl8y
ICogaW52X2QxMjsNCgkJdGhpcy5tX2NvdW50ID0gMjsNCgkJcmV0dXJuOw0KCX0NCglpZiAoZDEz
XzEgPiAwLjAgJiYgZDEzXzIgPiAwLjAgJiYgZDEyM18yIDw9IDAuMCkgew0KCQl2YXIgaW52X2Qx
MyA9IDEuMCAvIChkMTNfMSArIGQxM18yKTsNCgkJdGhpcy5tX3YxLmEgPSBkMTNfMSAqIGludl9k
MTM7DQoJCXRoaXMubV92My5hID0gZDEzXzIgKiBpbnZfZDEzOw0KCQl0aGlzLm1fY291bnQgPSAy
Ow0KCQl0aGlzLm1fdjIuU2V0KHRoaXMubV92Myk7DQoJCXJldHVybjsNCgl9DQoJaWYgKGQxMl8x
IDw9IDAuMCAmJiBkMjNfMiA8PSAwLjApIHsNCgkJdGhpcy5tX3YyLmEgPSAxLjA7DQoJCXRoaXMu
bV9jb3VudCA9IDE7DQoJCXRoaXMubV92MS5TZXQodGhpcy5tX3YyKTsNCgkJcmV0dXJuOw0KCX0N
CglpZiAoZDEzXzEgPD0gMC4wICYmIGQyM18xIDw9IDAuMCkgew0KCQl0aGlzLm1fdjMuYSA9IDEu
MDsNCgkJdGhpcy5tX2NvdW50ID0gMTsNCgkJdGhpcy5tX3YxLlNldCh0aGlzLm1fdjMpOw0KCQly
ZXR1cm47DQoJfQ0KCWlmIChkMjNfMSA+IDAuMCAmJiBkMjNfMiA+IDAuMCAmJiBkMTIzXzEgPD0g
MC4wKSB7DQoJCXZhciBpbnZfZDIzID0gMS4wIC8gKGQyM18xICsgZDIzXzIpOw0KCQl0aGlzLm1f
djIuYSA9IGQyM18xICogaW52X2QyMzsNCgkJdGhpcy5tX3YzLmEgPSBkMjNfMiAqIGludl9kMjM7
DQoJCXRoaXMubV9jb3VudCA9IDI7DQoJCXRoaXMubV92MS5TZXQodGhpcy5tX3YzKTsNCgkJcmV0
dXJuOw0KCX0NCgl2YXIgaW52X2QxMjMgPSAxLjAgLyAoZDEyM18xICsgZDEyM18yICsgZDEyM18z
KTsNCgl0aGlzLm1fdjEuYSA9IGQxMjNfMSAqIGludl9kMTIzOw0KCXRoaXMubV92Mi5hID0gZDEy
M18yICogaW52X2QxMjM7DQoJdGhpcy5tX3YzLmEgPSBkMTIzXzMgKiBpbnZfZDEyMzsNCgl0aGlz
Lm1fY291bnQgPSAzOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkNvbGxp
c2lvbi5iMlNpbXBsZXhDYWNoZSA9IGZ1bmN0aW9uKCkgew0KCXRoaXMuaW5kZXhBID0gWzAsIDAs
IDBdOw0KCXRoaXMuaW5kZXhCID0gWzAsIDAsIDBdOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9y
DQogKi8NCkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhWZXJ0ZXggPSBmdW5jdGlvbigpIHt9Ow0K
Qm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleFZlcnRleC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24o
b3RoZXIpIHsNCgl0aGlzLndBLlNldFYob3RoZXIud0EpOw0KCXRoaXMud0IuU2V0VihvdGhlci53
Qik7DQoJdGhpcy53LlNldFYob3RoZXIudyk7DQoJdGhpcy5hID0gb3RoZXIuYTsNCgl0aGlzLmlu
ZGV4QSA9IG90aGVyLmluZGV4QTsNCgl0aGlzLmluZGV4QiA9IG90aGVyLmluZGV4QjsNCn07DQov
KioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5Db2xsaXNpb24uYjJUT0lJbnB1dCA9IGZ1
bmN0aW9uKCkgew0KCXRoaXMucHJveHlBID0gbmV3IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNl
UHJveHkoKTsNCgl0aGlzLnByb3h5QiA9IG5ldyBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVBy
b3h5KCk7DQoJdGhpcy5zd2VlcEEgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJTd2VlcCgpOw0K
CXRoaXMuc3dlZXBCID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXAoKTsNCn07DQpCb3gy
RC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3QgPSB7fTsNCkJveDJELkNvbGxpc2lvbi5iMlRpbWVP
ZkltcGFjdC5UaW1lT2ZJbXBhY3QgPSBmdW5jdGlvbihpbnB1dCkgew0KCUJveDJELkNvbGxpc2lv
bi5iMlRpbWVPZkltcGFjdC5iMl90b2lDYWxscysrOw0KCXZhciBwcm94eUEgPSBpbnB1dC5wcm94
eUE7DQoJdmFyIHByb3h5QiA9IGlucHV0LnByb3h5QjsNCgl2YXIgc3dlZXBBID0gaW5wdXQuc3dl
ZXBBOw0KCXZhciBzd2VlcEIgPSBpbnB1dC5zd2VlcEI7DQo7DQo7DQoJdmFyIHJhZGl1cyA9IHBy
b3h5QS5tX3JhZGl1cyArIHByb3h5Qi5tX3JhZGl1czsNCgl2YXIgdG9sZXJhbmNlID0gaW5wdXQu
dG9sZXJhbmNlOw0KCXZhciBhbHBoYSA9IDAuMDsNCgl2YXIga19tYXhJdGVyYXRpb25zID0gMTAw
MDsNCgl2YXIgaXRlciA9IDA7DQoJdmFyIHRhcmdldCA9IDAuMDsNCglCb3gyRC5Db2xsaXNpb24u
YjJUaW1lT2ZJbXBhY3Quc19jYWNoZS5jb3VudCA9IDA7DQoJQm94MkQuQ29sbGlzaW9uLmIyVGlt
ZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dC51c2VSYWRpaSA9IGZhbHNlOw0KCWZvciAoOzspIHsN
CgkJc3dlZXBBLkdldFRyYW5zZm9ybShCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc194
ZkEsIGFscGhhKTsNCgkJc3dlZXBCLkdldFRyYW5zZm9ybShCb3gyRC5Db2xsaXNpb24uYjJUaW1l
T2ZJbXBhY3Quc194ZkIsIGFscGhhKTsNCgkJQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0
LnNfZGlzdGFuY2VJbnB1dC5wcm94eUEgPSBwcm94eUE7DQoJCUJveDJELkNvbGxpc2lvbi5iMlRp
bWVPZkltcGFjdC5zX2Rpc3RhbmNlSW5wdXQucHJveHlCID0gcHJveHlCOw0KCQlCb3gyRC5Db2xs
aXNpb24uYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZUlucHV0LnRyYW5zZm9ybUEgPSBCb3gyRC5D
b2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc194ZkE7DQoJCUJveDJELkNvbGxpc2lvbi5iMlRpbWVP
ZkltcGFjdC5zX2Rpc3RhbmNlSW5wdXQudHJhbnNmb3JtQiA9IEJveDJELkNvbGxpc2lvbi5iMlRp
bWVPZkltcGFjdC5zX3hmQjsNCgkJQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2UuRGlzdGFuY2Uo
Qm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VPdXRwdXQsIEJveDJELkNv
bGxpc2lvbi5iMlRpbWVPZkltcGFjdC5zX2NhY2hlLCBCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJ
bXBhY3Quc19kaXN0YW5jZUlucHV0KTsNCgkJaWYgKEJveDJELkNvbGxpc2lvbi5iMlRpbWVPZklt
cGFjdC5zX2Rpc3RhbmNlT3V0cHV0LmRpc3RhbmNlIDw9IDAuMCkgew0KCQkJYWxwaGEgPSAxLjA7
DQoJCQlicmVhazsNCgkJfQ0KCQlCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc19mY24u
SW5pdGlhbGl6ZShCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc19jYWNoZSwgcHJveHlB
LCBCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc194ZkEsIHByb3h5QiwgQm94MkQuQ29s
bGlzaW9uLmIyVGltZU9mSW1wYWN0LnNfeGZCKTsNCgkJdmFyIHNlcGFyYXRpb24gPSBCb3gyRC5D
b2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc19mY24uRXZhbHVhdGUoQm94MkQuQ29sbGlzaW9uLmIy
VGltZU9mSW1wYWN0LnNfeGZBLCBCb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc194ZkIp
Ow0KCQlpZiAoc2VwYXJhdGlvbiA8PSAwLjApIHsNCgkJCWFscGhhID0gMS4wOw0KCQkJYnJlYWs7
DQoJCX0NCgkJaWYgKGl0ZXIgPT0gMCkgew0KCQkJaWYgKHNlcGFyYXRpb24gPiByYWRpdXMpIHsN
CgkJCQl0YXJnZXQgPSBNYXRoLm1heChyYWRpdXMgLSB0b2xlcmFuY2UsIDAuNzUgKiByYWRpdXMp
Ow0KCQkJfSBlbHNlIHsNCgkJCQl0YXJnZXQgPSBNYXRoLm1heChzZXBhcmF0aW9uIC0gdG9sZXJh
bmNlLCAwLjAyICogcmFkaXVzKTsNCgkJCX0NCgkJfQ0KCQlpZiAoc2VwYXJhdGlvbiAtIHRhcmdl
dCA8IDAuNSAqIHRvbGVyYW5jZSkgew0KCQkJaWYgKGl0ZXIgPT0gMCkgew0KCQkJCWFscGhhID0g
MS4wOw0KCQkJCWJyZWFrOw0KCQkJfQ0KCQkJYnJlYWs7DQoJCX0NCgkJdmFyIG5ld0FscGhhID0g
YWxwaGE7IHsNCgkJCXZhciB4MSA9IGFscGhhOw0KCQkJdmFyIHgyID0gMS4wOw0KCQkJdmFyIGYx
ID0gc2VwYXJhdGlvbjsNCgkJCXN3ZWVwQS5HZXRUcmFuc2Zvcm0oQm94MkQuQ29sbGlzaW9uLmIy
VGltZU9mSW1wYWN0LnNfeGZBLCB4Mik7DQoJCQlzd2VlcEIuR2V0VHJhbnNmb3JtKEJveDJELkNv
bGxpc2lvbi5iMlRpbWVPZkltcGFjdC5zX3hmQiwgeDIpOw0KCQkJdmFyIGYyID0gQm94MkQuQ29s
bGlzaW9uLmIyVGltZU9mSW1wYWN0LnNfZmNuLkV2YWx1YXRlKEJveDJELkNvbGxpc2lvbi5iMlRp
bWVPZkltcGFjdC5zX3hmQSwgQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LnNfeGZCKTsN
CgkJCWlmIChmMiA+PSB0YXJnZXQpIHsNCgkJCQlhbHBoYSA9IDEuMDsNCgkJCQlicmVhazsNCgkJ
CX0NCgkJCXZhciByb290SXRlckNvdW50ID0gMDsNCgkJCWZvciAoOzspIHsNCgkJCQl2YXIgeCA9
IDA7DQoJCQkJaWYgKHJvb3RJdGVyQ291bnQgJiAxKSB7DQoJCQkJCXggPSB4MSArICh0YXJnZXQg
LSBmMSkgKiAoeDIgLSB4MSkgLyAoZjIgLSBmMSk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJeCA9IDAu
NSAqICh4MSArIHgyKTsNCgkJCQl9DQoJCQkJc3dlZXBBLkdldFRyYW5zZm9ybShCb3gyRC5Db2xs
aXNpb24uYjJUaW1lT2ZJbXBhY3Quc194ZkEsIHgpOw0KCQkJCXN3ZWVwQi5HZXRUcmFuc2Zvcm0o
Qm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LnNfeGZCLCB4KTsNCgkJCQl2YXIgZiA9IEJv
eDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5zX2Zjbi5FdmFsdWF0ZShCb3gyRC5Db2xsaXNp
b24uYjJUaW1lT2ZJbXBhY3Quc194ZkEsIEJveDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5z
X3hmQik7DQoJCQkJaWYgKE1hdGguYWJzKGYgLSB0YXJnZXQpIDwgMC4wMjUgKiB0b2xlcmFuY2Up
IHsNCgkJCQkJbmV3QWxwaGEgPSB4Ow0KCQkJCQlicmVhazsNCgkJCQl9DQoJCQkJaWYgKGYgPiB0
YXJnZXQpIHsNCgkJCQkJeDEgPSB4Ow0KCQkJCQlmMSA9IGY7DQoJCQkJfSBlbHNlIHsNCgkJCQkJ
eDIgPSB4Ow0KCQkJCQlmMiA9IGY7DQoJCQkJfQ0KCQkJCXJvb3RJdGVyQ291bnQrKzsNCgkJCQlC
b3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3QuYjJfdG9pUm9vdEl0ZXJzKys7DQoJCQkJaWYg
KHJvb3RJdGVyQ291bnQgPT0gNTApIHsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KCQkJQm94
MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LmIyX3RvaU1heFJvb3RJdGVycyA9IE1hdGgubWF4
KEJveDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5iMl90b2lNYXhSb290SXRlcnMsIHJvb3RJ
dGVyQ291bnQpOw0KCQl9DQoJCWlmIChuZXdBbHBoYSA8ICgxLjAgKyAxMDAuMCAqIE51bWJlci5N
SU5fVkFMVUUpICogYWxwaGEpIHsNCgkJCWJyZWFrOw0KCQl9DQoJCWFscGhhID0gbmV3QWxwaGE7
DQoJCWl0ZXIrKzsNCgkJQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LmIyX3RvaUl0ZXJz
Kys7DQoJCWlmIChpdGVyID09IGtfbWF4SXRlcmF0aW9ucykgew0KCQkJYnJlYWs7DQoJCX0NCgl9
DQoJQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzID0gTWF0aC5t
YXgoQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzLCBpdGVyKTsN
CglyZXR1cm4gYWxwaGE7DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQuQ29s
bGlzaW9uLmIyV29ybGRNYW5pZm9sZCA9IGZ1bmN0aW9uKCkgew0KCS8qKiBAdHlwZSAgeyFCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzJ9ICovDQoJdGhpcy5tX25vcm1hbCA9IEJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJLyoqIEB0eXBlIHtBcnJheS48IUJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMj59ICovDQoJdGhpcy5tX3BvaW50cyA9IFtdOw0KCS8qKiBAdHlwZSB7bnVtYmVy
fSAqLw0KCXRoaXMubV9wb2ludENvdW50ID0gMDsNCglmb3IgKHZhciBpID0gMDsgaSA8IEJveDJE
LkNvbW1vbi5iMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzOyBpKyspIHsNCgkJdGhpcy5t
X3BvaW50c1tpXSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJfQ0KfTsN
Ci8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGR9IG1hbmlmb2xkDQog
KiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0geGZBDQogKiBAcGFyYW0g
e251bWJlcn0gcmFkaXVzQQ0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zv
cm19IHhmQg0KICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1c0INCiAqLw0KQm94MkQuQ29sbGlzaW9u
LmIyV29ybGRNYW5pZm9sZC5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKG1hbmlmb2xk
LCB4ZkEsIHJhZGl1c0EsIHhmQiwgcmFkaXVzQikgew0KCWlmIChtYW5pZm9sZC5tX3BvaW50Q291
bnQgPT0gMCkgew0KCQlyZXR1cm47DQoJfQ0KCXZhciBpID0gMDsNCgl2YXIgdFZlYzsNCgl2YXIg
dE1hdDsNCgl2YXIgbm9ybWFsWCA9IDA7DQoJdmFyIG5vcm1hbFkgPSAwOw0KCXZhciBwbGFuZVBv
aW50WCA9IDA7DQoJdmFyIHBsYW5lUG9pbnRZID0gMDsNCgl2YXIgY2xpcFBvaW50WCA9IDA7DQoJ
dmFyIGNsaXBQb2ludFkgPSAwOw0KCXN3aXRjaCAobWFuaWZvbGQubV90eXBlKSB7DQoJCWNhc2Ug
Qm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQuZV9jaXJjbGVzOg0KCQkJdE1hdCA9IHhmQS5SOw0K
CQkJdFZlYyA9IG1hbmlmb2xkLm1fbG9jYWxQb2ludDsNCgkJCXZhciBwb2ludEFYID0geGZBLnBv
c2l0aW9uLnggKyB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55Ow0K
CQkJdmFyIHBvaW50QVkgPSB4ZkEucG9zaXRpb24ueSArIHRNYXQuY29sMS55ICogdFZlYy54ICsg
dE1hdC5jb2wyLnkgKiB0VmVjLnk7DQoJCQl0TWF0ID0geGZCLlI7DQoJCQl0VmVjID0gbWFuaWZv
bGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50Ow0KCQkJdmFyIHBvaW50QlggPSB4ZkIucG9zaXRp
b24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7DQoJCQl2
YXIgcG9pbnRCWSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0
LmNvbDIueSAqIHRWZWMueTsNCgkJCXZhciBkWCA9IHBvaW50QlggLSBwb2ludEFYOw0KCQkJdmFy
IGRZID0gcG9pbnRCWSAtIHBvaW50QVk7DQoJCQl2YXIgZDIgPSBkWCAqIGRYICsgZFkgKiBkWTsN
CgkJCWlmIChkMiA+IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLk1JTl9WQUxVRV9TUVVBUkVEKSB7
DQoJCQkJdmFyIGQgPSBNYXRoLnNxcnQoZDIpOw0KCQkJCXRoaXMubV9ub3JtYWwueCA9IGRYIC8g
ZDsNCgkJCQl0aGlzLm1fbm9ybWFsLnkgPSBkWSAvIGQ7DQoJCQl9IGVsc2Ugew0KCQkJCXRoaXMu
bV9ub3JtYWwueCA9IDE7DQoJCQkJdGhpcy5tX25vcm1hbC55ID0gMDsNCgkJCX0NCgkJCXZhciBj
QVggPSBwb2ludEFYICsgcmFkaXVzQSAqIHRoaXMubV9ub3JtYWwueDsNCgkJCXZhciBjQVkgPSBw
b2ludEFZICsgcmFkaXVzQSAqIHRoaXMubV9ub3JtYWwueTsNCgkJCXZhciBjQlggPSBwb2ludEJY
IC0gcmFkaXVzQiAqIHRoaXMubV9ub3JtYWwueDsNCgkJCXZhciBjQlkgPSBwb2ludEJZIC0gcmFk
aXVzQiAqIHRoaXMubV9ub3JtYWwueTsNCgkJCXRoaXMubV9wb2ludHNbMF0ueCA9IDAuNSAqIChj
QVggKyBjQlgpOw0KCQkJdGhpcy5tX3BvaW50c1swXS55ID0gMC41ICogKGNBWSArIGNCWSk7DQoJ
CQlicmVhazsNCgkJY2FzZSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5lX2ZhY2VBOg0KCQkJ
dE1hdCA9IHhmQS5SOw0KCQkJdFZlYyA9IG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbDsNCgkJ
CW5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55Ow0K
CQkJbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7
DQoJCQl0TWF0ID0geGZBLlI7DQoJCQl0VmVjID0gbWFuaWZvbGQubV9sb2NhbFBvaW50Ow0KCQkJ
cGxhbmVQb2ludFggPSB4ZkEucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1h
dC5jb2wyLnggKiB0VmVjLnk7DQoJCQlwbGFuZVBvaW50WSA9IHhmQS5wb3NpdGlvbi55ICsgdE1h
dC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTsNCgkJCXRoaXMubV9ub3Jt
YWwueCA9IG5vcm1hbFg7DQoJCQl0aGlzLm1fbm9ybWFsLnkgPSBub3JtYWxZOw0KCQkJZm9yIChp
ID0gMDsgaSA8IG1hbmlmb2xkLm1fcG9pbnRDb3VudDsgaSsrKSB7DQoJCQkJdE1hdCA9IHhmQi5S
Ow0KCQkJCXRWZWMgPSBtYW5pZm9sZC5tX3BvaW50c1tpXS5tX2xvY2FsUG9pbnQ7DQoJCQkJY2xp
cFBvaW50WCA9IHhmQi5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNv
bDIueCAqIHRWZWMueTsNCgkJCQljbGlwUG9pbnRZID0geGZCLnBvc2l0aW9uLnkgKyB0TWF0LmNv
bDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55Ow0KCQkJCXRoaXMubV9wb2ludHNb
aV0ueCA9IGNsaXBQb2ludFggKyAwLjUgKiAocmFkaXVzQSAtIChjbGlwUG9pbnRYIC0gcGxhbmVQ
b2ludFgpICogbm9ybWFsWCAtIChjbGlwUG9pbnRZIC0gcGxhbmVQb2ludFkpICogbm9ybWFsWSAt
IHJhZGl1c0IpICogbm9ybWFsWDsNCgkJCQl0aGlzLm1fcG9pbnRzW2ldLnkgPSBjbGlwUG9pbnRZ
ICsgMC41ICogKHJhZGl1c0EgLSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIG5vcm1hbFgg
LSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkgLSByYWRpdXNCKSAqIG5vcm1h
bFk7DQoJCQl9DQoJCQlicmVhazsNCgkJY2FzZSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5l
X2ZhY2VCOg0KCQkJdE1hdCA9IHhmQi5SOw0KCQkJdFZlYyA9IG1hbmlmb2xkLm1fbG9jYWxQbGFu
ZU5vcm1hbDsNCgkJCW5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54
ICogdFZlYy55Ow0KCQkJbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wy
LnkgKiB0VmVjLnk7DQoJCQl0TWF0ID0geGZCLlI7DQoJCQl0VmVjID0gbWFuaWZvbGQubV9sb2Nh
bFBvaW50Ow0KCQkJcGxhbmVQb2ludFggPSB4ZkIucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICog
dFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7DQoJCQlwbGFuZVBvaW50WSA9IHhmQi5wb3Np
dGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTsNCgkJ
CXRoaXMubV9ub3JtYWwueCA9ICgtbm9ybWFsWCk7DQoJCQl0aGlzLm1fbm9ybWFsLnkgPSAoLW5v
cm1hbFkpOw0KCQkJZm9yIChpID0gMDsgaSA8IG1hbmlmb2xkLm1fcG9pbnRDb3VudDsgaSsrKSB7
DQoJCQkJdE1hdCA9IHhmQS5SOw0KCQkJCXRWZWMgPSBtYW5pZm9sZC5tX3BvaW50c1tpXS5tX2xv
Y2FsUG9pbnQ7DQoJCQkJY2xpcFBvaW50WCA9IHhmQS5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLngg
KiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTsNCgkJCQljbGlwUG9pbnRZID0geGZBLnBv
c2l0aW9uLnkgKyB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55Ow0K
CQkJCXRoaXMubV9wb2ludHNbaV0ueCA9IGNsaXBQb2ludFggKyAwLjUgKiAocmFkaXVzQiAtIChj
bGlwUG9pbnRYIC0gcGxhbmVQb2ludFgpICogbm9ybWFsWCAtIChjbGlwUG9pbnRZIC0gcGxhbmVQ
b2ludFkpICogbm9ybWFsWSAtIHJhZGl1c0EpICogbm9ybWFsWDsNCgkJCQl0aGlzLm1fcG9pbnRz
W2ldLnkgPSBjbGlwUG9pbnRZICsgMC41ICogKHJhZGl1c0IgLSAoY2xpcFBvaW50WCAtIHBsYW5l
UG9pbnRYKSAqIG5vcm1hbFggLSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkg
LSByYWRpdXNBKSAqIG5vcm1hbFk7DQoJCQl9DQoJCQlicmVhazsNCgl9DQp9Ow0KLyoqDQogKiBA
cGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWZ9IGJkDQogKiBAcGFyYW0geyFCb3gyRC5E
eW5hbWljcy5iMldvcmxkfSB3b3JsZA0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFt
aWNzLmIyQm9keSA9IGZ1bmN0aW9uKGJkLCB3b3JsZCkgew0KCS8qKg0KCSAqIEBjb25zdA0KCSAq
IEBwcml2YXRlDQoJICogQHR5cGUge3N0cmluZ30NCgkgKi8NCgl0aGlzLklEID0gIkJvZHkiICsg
Qm94MkQuRHluYW1pY3MuYjJCb2R5Lk5FWFRfSUQrKzsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAq
IEB0eXBlIHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19DQoJICovDQoJdGhpcy5tX3hm
ID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtKCk7DQoJdGhpcy5tX3hmLnBvc2l0
aW9uLlNldFYoYmQucG9zaXRpb24pOw0KCXRoaXMubV94Zi5SLlNldChiZC5hbmdsZSk7DQoJLyoq
DQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXB9DQoJ
ICovDQoJdGhpcy5tX3N3ZWVwID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXAoKTsNCgl0
aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0WmVybygpOw0KCXRoaXMubV9zd2VlcC50MCA9IDEu
MDsNCgl0aGlzLm1fc3dlZXAuYTAgPSB0aGlzLm1fc3dlZXAuYSA9IGJkLmFuZ2xlOw0KCXRoaXMu
bV9zd2VlcC5jLnggPSAodGhpcy5tX3hmLlIuY29sMS54ICogdGhpcy5tX3N3ZWVwLmxvY2FsQ2Vu
dGVyLnggKyB0aGlzLm1feGYuUi5jb2wyLnggKiB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIueSk7
DQoJdGhpcy5tX3N3ZWVwLmMueSA9ICh0aGlzLm1feGYuUi5jb2wxLnkgKiB0aGlzLm1fc3dlZXAu
bG9jYWxDZW50ZXIueCArIHRoaXMubV94Zi5SLmNvbDIueSAqIHRoaXMubV9zd2VlcC5sb2NhbENl
bnRlci55KTsNCgl0aGlzLm1fc3dlZXAuYy54ICs9IHRoaXMubV94Zi5wb3NpdGlvbi54Ow0KCXRo
aXMubV9zd2VlcC5jLnkgKz0gdGhpcy5tX3hmLnBvc2l0aW9uLnk7DQoJdGhpcy5tX3N3ZWVwLmMw
LlNldFYodGhpcy5tX3N3ZWVwLmMpOw0KCS8qKg0KCSAgKiBAcHJpdmF0ZQ0KCSAgKiBAdHlwZSB7
IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCgkgICovDQoJdGhpcy5tX2xpbmVhclZlbG9jaXR5
ID0gYmQubGluZWFyVmVsb2NpdHkuQ29weSgpOw0KCS8qKg0KCSAgKiBAcHJpdmF0ZQ0KCSAgKiBA
dHlwZSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCgkgICovDQoJdGhpcy5tX2ZvcmNlID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0K
CSAqIEB0eXBlIHtib29sZWFufQ0KCSAqLw0KCXRoaXMubV9idWxsZXQgPSBiZC5idWxsZXQ7DQoJ
LyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLm1fZml4
ZWRSb3RhdGlvbiA9IGJkLmZpeGVkUm90YXRpb247DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBA
dHlwZSB7Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLm1fYWxsb3dTbGVlcCA9IGJkLmFsbG93U2xlZXA7
DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLm1f
YXdha2UgPSBiZC5hd2FrZTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtib29sZWFu
fQ0KCSAqLw0KCXRoaXMubV9hY3RpdmUgPSBiZC5hY3RpdmU7DQoJLyoqDQoJICogQHByaXZhdGUN
CgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNzLmIyV29ybGR9DQoJICovDQoJdGhpcy5tX3dvcmxk
ID0gd29ybGQ7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnR9DQoJICovDQoJdGhpcy5tX2pvaW50TGlzdCA9IG51bGw7DQoJLyoqDQoJ
ICogQHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFj
dExpc3R9DQoJICovDQoJIHRoaXMuY29udGFjdExpc3QgPSBuZXcgQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJDb250YWN0TGlzdCgpOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFC
b3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0fQ0KCSAqLw0KCXRoaXMu
Y29udHJvbGxlckxpc3QgPSBuZXcgQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9s
bGVyTGlzdCgpOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge251bWJlcn0NCgkgKi8N
Cgl0aGlzLm1fY29udHJvbGxlckNvdW50ID0gMDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0
eXBlIHtudW1iZXJ9DQoJICovDQoJdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IGJkLmFuZ3VsYXJW
ZWxvY2l0eTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtudW1iZXJ9DQoJICovDQoJ
dGhpcy5tX2xpbmVhckRhbXBpbmcgPSBiZC5saW5lYXJEYW1waW5nOw0KCS8qKg0KCSAqIEBwcml2
YXRlDQoJICogQHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLm1fYW5ndWxhckRhbXBpbmcgPSBi
ZC5hbmd1bGFyRGFtcGluZzsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtudW1iZXJ9
DQoJICovDQoJdGhpcy5tX3RvcnF1ZSA9IDA7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlw
ZSB7bnVtYmVyfQ0KCSAqLw0KCXRoaXMubV9zbGVlcFRpbWUgPSAwOw0KCS8qKg0KCSAqIEBwcml2
YXRlDQoJICogQHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLm1fdHlwZSA9IGJkLnR5cGU7DQoJ
LyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7bnVtYmVyfQ0KCSAqLw0KCXRoaXMubV9tYXNz
ID0gdGhpcy5tX3R5cGUgPT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5
ID8gMSA6IDA7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7bnVtYmVyfQ0KCSAqLw0K
CXRoaXMubV9pbnZNYXNzID0gdGhpcy5tX3R5cGUgPT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVm
LmIyX2R5bmFtaWNCb2R5ID8gMSA6IDA7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7
bnVtYmVyfQ0KCSAqLw0KCXRoaXMubV9JID0gMDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0
eXBlIHtudW1iZXJ9DQoJICovDQoJdGhpcy5tX2ludkkgPSAwOw0KCS8qKg0KCSAqIEBwcml2YXRl
DQoJICogQHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLm1faW5lcnRpYVNjYWxlID0gYmQuaW5l
cnRpYVNjYWxlOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWlj
cy5iMkZpeHR1cmVMaXN0fQ0KCSAqLw0KCXRoaXMuZml4dHVyZUxpc3QgPSBuZXcgQm94MkQuRHlu
YW1pY3MuYjJGaXh0dXJlTGlzdCgpOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge0Fy
cmF5LjwhQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdD59DQoJICovDQoJIHRoaXMubV9saXN0cyA9
IFtdOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlRGVmfSBk
ZWYNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5DcmVhdGVGaXh0dXJlID0g
ZnVuY3Rpb24oZGVmKSB7DQo7DQoJdmFyIGZpeHR1cmUgPSBuZXcgQm94MkQuRHluYW1pY3MuYjJG
aXh0dXJlKHRoaXMsIHRoaXMubV94ZiwgZGVmKTsNCglpZiAodGhpcy5tX2FjdGl2ZSkgew0KCQl2
YXIgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFz
ZTsNCgkJZml4dHVyZS5DcmVhdGVQcm94eShicm9hZFBoYXNlLCB0aGlzLm1feGYpOw0KCX0NCgl0
aGlzLmZpeHR1cmVMaXN0LkFkZEZpeHR1cmUoZml4dHVyZSk7DQoJZml4dHVyZS5tX2JvZHkgPSB0
aGlzOw0KCWlmIChmaXh0dXJlLm1fZGVuc2l0eSA+IDAuMCkgew0KCQl0aGlzLlJlc2V0TWFzc0Rh
dGEoKTsNCgl9DQoJdGhpcy5tX3dvcmxkLm1fbmV3Rml4dHVyZSA9IHRydWU7DQoJcmV0dXJuIGZp
eHR1cmU7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5DcmVhdGVGaXh0dXJl
MiA9IGZ1bmN0aW9uKHNoYXBlLCBkZW5zaXR5KSB7DQoJaWYgKGRlbnNpdHkgPT09IHVuZGVmaW5l
ZCkgZGVuc2l0eSA9IDAuMDsNCgl2YXIgZGVmID0gbmV3IEJveDJELkR5bmFtaWNzLmIyRml4dHVy
ZURlZigpOw0KCWRlZi5zaGFwZSA9IHNoYXBlOw0KCWRlZi5kZW5zaXR5ID0gZGVuc2l0eTsNCgly
ZXR1cm4gdGhpcy5DcmVhdGVGaXh0dXJlKGRlZik7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5
LnByb3RvdHlwZS5EZXN0cm95ID0gZnVuY3Rpb24oKSB7DQoJQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkZyZWUodGhpcy5tX2xpbmVhclZlbG9jaXR5KTsNCglCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuRnJlZSh0aGlzLm1fZm9yY2UpOw0KfTsNCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5
cGUuRGVzdHJveUZpeHR1cmUgPSBmdW5jdGlvbihmaXh0dXJlKSB7DQo7DQoJdGhpcy5maXh0dXJl
TGlzdC5SZW1vdmVGaXh0dXJlKGZpeHR1cmUpOw0KCWZvciAodmFyIGNvbnRhY3ROb2RlID0gdGhp
cy5jb250YWN0TGlzdC5HZXRGaXJzdE5vZGUoQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250
YWN0TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7IGNvbnRhY3ROb2RlOyBjb250YWN0Tm9kZSA9IGNv
bnRhY3ROb2RlLkdldE5leHROb2RlKCkpIHsNCgkJaWYgKGZpeHR1cmUgPT0gY29udGFjdE5vZGUu
Y29udGFjdC5tX2ZpeHR1cmVBIHx8IGZpeHR1cmUgPT0gY29udGFjdE5vZGUuY29udGFjdC5tX2Zp
eHR1cmVCKSB7DQoJCQl0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGNvbnRh
Y3ROb2RlLmNvbnRhY3QpOw0KCQl9DQoJfQ0KCWlmICh0aGlzLm1fYWN0aXZlKSB7DQoJCXZhciBi
cm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlOw0K
CQlmaXh0dXJlLkRlc3Ryb3lQcm94eShicm9hZFBoYXNlKTsNCgl9DQoJZml4dHVyZS5EZXN0cm95
KCk7DQoJZml4dHVyZS5tX2JvZHkgPSBudWxsOw0KCXRoaXMuUmVzZXRNYXNzRGF0YSgpOw0KfTsN
Ci8qKg0KICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwb3NpdGlvbg0KICog
QHBhcmFtIHtudW1iZXJ9IGFuZ2xlDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5
cGUuU2V0UG9zaXRpb25BbmRBbmdsZSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBhbmdsZSkgew0KOw0K
CXRoaXMubV94Zi5SLlNldChhbmdsZSk7DQoJdGhpcy5tX3hmLnBvc2l0aW9uLlNldFYocG9zaXRp
b24pOw0KCXZhciB0TWF0ID0gdGhpcy5tX3hmLlI7DQoJdmFyIHRWZWMgPSB0aGlzLm1fc3dlZXAu
bG9jYWxDZW50ZXI7DQoJdGhpcy5tX3N3ZWVwLmMueCA9ICh0TWF0LmNvbDEueCAqIHRWZWMueCAr
IHRNYXQuY29sMi54ICogdFZlYy55KTsNCgl0aGlzLm1fc3dlZXAuYy55ID0gKHRNYXQuY29sMS55
ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpOw0KCXRoaXMubV9zd2VlcC5jLnggKz0g
dGhpcy5tX3hmLnBvc2l0aW9uLng7DQoJdGhpcy5tX3N3ZWVwLmMueSArPSB0aGlzLm1feGYucG9z
aXRpb24ueTsNCgl0aGlzLm1fc3dlZXAuYzAuU2V0Vih0aGlzLm1fc3dlZXAuYyk7DQoJdGhpcy5t
X3N3ZWVwLmEwID0gdGhpcy5tX3N3ZWVwLmEgPSBhbmdsZTsNCgl2YXIgYnJvYWRQaGFzZSA9IHRo
aXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTsNCglmb3IgKHZhciBub2Rl
ID0gdGhpcy5maXh0dXJlTGlzdC5HZXRGaXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUuR2V0
TmV4dE5vZGUoKSkgew0KCQlub2RlLmZpeHR1cmUuU3luY2hyb25pemUoYnJvYWRQaGFzZSwgdGhp
cy5tX3hmLCB0aGlzLm1feGYpOw0KCX0NCgl0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5G
aW5kTmV3Q29udGFjdHMoKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyVHJhbnNmb3JtfSB4Zg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLlNl
dFRyYW5zZm9ybSA9IGZ1bmN0aW9uKHhmKSB7DQoJdGhpcy5TZXRQb3NpdGlvbkFuZEFuZ2xlKHhm
LnBvc2l0aW9uLCB4Zi5HZXRBbmdsZSgpKTsNCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5D
b21tb24uTWF0aC5iMlRyYW5zZm9ybX0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3Rv
dHlwZS5HZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX3hmOw0KfTsN
Ci8qKg0KICogQHJldHVybiB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQu
RHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkgew0KCXJl
dHVybiB0aGlzLm1feGYucG9zaXRpb247DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzJ9IHBvc2l0aW9uDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90
b3R5cGUuU2V0UG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikgew0KCXRoaXMuU2V0UG9zaXRp
b25BbmRBbmdsZShwb3NpdGlvbiwgdGhpcy5HZXRBbmdsZSgpKTsNCn07DQovKioNCiAqIEByZXR1
cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRBbmds
ZSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fc3dlZXAuYTsNCn07DQovKioNCiAqIEBw
YXJhbSB7bnVtYmVyfSBhbmdsZQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBl
LlNldEFuZ2xlID0gZnVuY3Rpb24oYW5nbGUpIHsNCgl0aGlzLlNldFBvc2l0aW9uQW5kQW5nbGUo
dGhpcy5HZXRQb3NpdGlvbigpLCBhbmdsZSk7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnBy
b3RvdHlwZS5HZXRXb3JsZENlbnRlciA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fc3dl
ZXAuYzsNCn07DQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLkdldExvY2FsQ2VudGVy
ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjsNCn07DQpC
b3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLlNldExpbmVhclZlbG9jaXR5ID0gZnVuY3Rp
b24odikgew0KCWlmICh0aGlzLm1fdHlwZSA9PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJf
c3RhdGljQm9keSkgew0KCQlyZXR1cm47DQoJfQ0KCXRoaXMubV9saW5lYXJWZWxvY2l0eS5TZXRW
KHYpOw0KfTsNCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuR2V0TGluZWFyVmVsb2Np
dHkgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2xpbmVhclZlbG9jaXR5Ow0KfTsNCkJv
eDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuU2V0QW5ndWxhclZlbG9jaXR5ID0gZnVuY3Rp
b24ob21lZ2EpIHsNCglpZiAob21lZ2EgPT09IHVuZGVmaW5lZCkgb21lZ2EgPSAwOw0KCWlmICh0
aGlzLm1fdHlwZSA9PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGljQm9keSkgew0K
CQlyZXR1cm47DQoJfQ0KCXRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSBvbWVnYTsNCn07DQpCb3gy
RC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLkdldEFuZ3VsYXJWZWxvY2l0eSA9IGZ1bmN0aW9u
KCkgew0KCXJldHVybiB0aGlzLm1fYW5ndWxhclZlbG9jaXR5Ow0KfTsNCkJveDJELkR5bmFtaWNz
LmIyQm9keS5wcm90b3R5cGUuR2V0RGVmaW5pdGlvbiA9IGZ1bmN0aW9uKCkgew0KCXZhciBiZCA9
IG5ldyBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYoKTsNCgliZC50eXBlID0gdGhpcy5HZXRUeXBl
KCk7DQoJYmQuYWxsb3dTbGVlcCA9IHRoaXMubV9hbGxvd1NsZWVwOw0KCWJkLmFuZ2xlID0gdGhp
cy5HZXRBbmdsZSgpOw0KCWJkLmFuZ3VsYXJEYW1waW5nID0gdGhpcy5tX2FuZ3VsYXJEYW1waW5n
Ow0KCWJkLmFuZ3VsYXJWZWxvY2l0eSA9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHk7DQoJYmQuZml4
ZWRSb3RhdGlvbiA9IHRoaXMubV9maXhlZFJvdGF0aW9uOw0KCWJkLmJ1bGxldCA9IHRoaXMubV9i
dWxsZXQ7DQoJYmQuYWN0aXZlID0gdGhpcy5tX2FjdGl2ZTsNCgliZC5hd2FrZSA9IHRoaXMubV9h
d2FrZTsNCgliZC5saW5lYXJEYW1waW5nID0gdGhpcy5tX2xpbmVhckRhbXBpbmc7DQoJYmQubGlu
ZWFyVmVsb2NpdHkuU2V0Vih0aGlzLkdldExpbmVhclZlbG9jaXR5KCkpOw0KCWJkLnBvc2l0aW9u
ID0gdGhpcy5HZXRQb3NpdGlvbigpOw0KCXJldHVybiBiZDsNCn07DQpCb3gyRC5EeW5hbWljcy5i
MkJvZHkucHJvdG90eXBlLkFwcGx5Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSwgcG9pbnQpIHsNCglp
ZiAodGhpcy5tX3R5cGUgIT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5
KSB7DQoJCXJldHVybjsNCgl9DQoJdGhpcy5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fZm9yY2Uu
eCArPSBmb3JjZS54Ow0KCXRoaXMubV9mb3JjZS55ICs9IGZvcmNlLnk7DQoJdGhpcy5tX3RvcnF1
ZSArPSAoKHBvaW50LnggLSB0aGlzLm1fc3dlZXAuYy54KSAqIGZvcmNlLnkgLSAocG9pbnQueSAt
IHRoaXMubV9zd2VlcC5jLnkpICogZm9yY2UueCk7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5
LnByb3RvdHlwZS5BcHBseVRvcnF1ZSA9IGZ1bmN0aW9uKHRvcnF1ZSkgew0KCWlmICh0b3JxdWUg
PT09IHVuZGVmaW5lZCkgdG9ycXVlID0gMDsNCglpZiAodGhpcy5tX3R5cGUgIT0gQm94MkQuRHlu
YW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5KSB7DQoJCXJldHVybjsNCgl9DQoJdGhpcy5T
ZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fdG9ycXVlICs9IHRvcnF1ZTsNCn07DQpCb3gyRC5EeW5h
bWljcy5iMkJvZHkucHJvdG90eXBlLkFwcGx5SW1wdWxzZSA9IGZ1bmN0aW9uKGltcHVsc2UsIHBv
aW50KSB7DQoJaWYgKHRoaXMubV90eXBlICE9IEJveDJELkR5bmFtaWNzLmIyQm9keURlZi5iMl9k
eW5hbWljQm9keSkgew0KCQlyZXR1cm47DQoJfQ0KCXRoaXMuU2V0QXdha2UodHJ1ZSk7DQoJdGhp
cy5tX2xpbmVhclZlbG9jaXR5LnggKz0gdGhpcy5tX2ludk1hc3MgKiBpbXB1bHNlLng7DQoJdGhp
cy5tX2xpbmVhclZlbG9jaXR5LnkgKz0gdGhpcy5tX2ludk1hc3MgKiBpbXB1bHNlLnk7DQoJdGhp
cy5tX2FuZ3VsYXJWZWxvY2l0eSArPSB0aGlzLm1faW52SSAqICgocG9pbnQueCAtIHRoaXMubV9z
d2VlcC5jLngpICogaW1wdWxzZS55IC0gKHBvaW50LnkgLSB0aGlzLm1fc3dlZXAuYy55KSAqIGlt
cHVsc2UueCk7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5TcGxpdCA9IGZ1
bmN0aW9uKGNhbGxiYWNrKSB7DQoJdmFyIGxpbmVhclZlbG9jaXR5ID0gdGhpcy5HZXRMaW5lYXJW
ZWxvY2l0eSgpLkNvcHkoKTsNCgl2YXIgYW5ndWxhclZlbG9jaXR5ID0gdGhpcy5HZXRBbmd1bGFy
VmVsb2NpdHkoKTsNCgl2YXIgY2VudGVyID0gdGhpcy5HZXRXb3JsZENlbnRlcigpOw0KCXZhciBi
b2R5MSA9IHRoaXM7DQoJdmFyIGJvZHkyID0gdGhpcy5tX3dvcmxkLkNyZWF0ZUJvZHkodGhpcy5H
ZXREZWZpbml0aW9uKCkpOw0KCXZhciBwcmV2Ow0KCWZvciAodmFyIG5vZGUgPSBib2R5MS5maXh0
dXJlTGlzdC5HZXRGaXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUuR2V0TmV4dE5vZGUoKSkg
ew0KCQl2YXIgZiA9IG5vZGUuZml4dHVyZTsNCgkJaWYgKGNhbGxiYWNrKGYpKSB7DQoJCQlib2R5
MS5maXh0dXJlTGlzdC5SZW1vdmVGaXh0dXJlKGYpOw0KCQkJYm9keTIuZml4dHVyZUxpc3QuQWRk
Rml4dHVyZShmKTsNCgkJfQ0KCX0NCglib2R5MS5SZXNldE1hc3NEYXRhKCk7DQoJYm9keTIuUmVz
ZXRNYXNzRGF0YSgpOw0KCXZhciBjZW50ZXIxID0gYm9keTEuR2V0V29ybGRDZW50ZXIoKTsNCgl2
YXIgY2VudGVyMiA9IGJvZHkyLkdldFdvcmxkQ2VudGVyKCk7DQoJdmFyIHZlbG9jaXR5MSA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0aC5BZGRWVihsaW5lYXJWZWxvY2l0eSwgQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXRoLkNyb3NzRlYoYW5ndWxhclZlbG9jaXR5LCBCb3gyRC5Db21tb24uTWF0aC5i
Mk1hdGguU3VidHJhY3RWVihjZW50ZXIxLCBjZW50ZXIpKSk7DQoJdmFyIHZlbG9jaXR5MiA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0aC5BZGRWVihsaW5lYXJWZWxvY2l0eSwgQm94MkQuQ29tbW9u
Lk1hdGguYjJNYXRoLkNyb3NzRlYoYW5ndWxhclZlbG9jaXR5LCBCb3gyRC5Db21tb24uTWF0aC5i
Mk1hdGguU3VidHJhY3RWVihjZW50ZXIyLCBjZW50ZXIpKSk7DQoJYm9keTEuU2V0TGluZWFyVmVs
b2NpdHkodmVsb2NpdHkxKTsNCglib2R5Mi5TZXRMaW5lYXJWZWxvY2l0eSh2ZWxvY2l0eTIpOw0K
CWJvZHkxLlNldEFuZ3VsYXJWZWxvY2l0eShhbmd1bGFyVmVsb2NpdHkpOw0KCWJvZHkyLlNldEFu
Z3VsYXJWZWxvY2l0eShhbmd1bGFyVmVsb2NpdHkpOw0KCWJvZHkxLlN5bmNocm9uaXplRml4dHVy
ZXMoKTsNCglib2R5Mi5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7DQoJcmV0dXJuIGJvZHkyOw0KfTsN
CkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuTWVyZ2UgPSBmdW5jdGlvbihvdGhlcikg
ew0KCWZvciAodmFyIG5vZGUgPSBvdGhlci5maXh0dXJlTGlzdC5HZXRGaXJzdE5vZGUoKTsgbm9k
ZTsgbm9kZSA9IG5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQl0aGlzLmZpeHR1cmVMaXN0LkFkZEZp
eHR1cmUobm9kZS5maXh0dXJlKTsNCgkJb3RoZXIuZml4dHVyZUxpc3QuUmVtb3ZlRml4dHVyZShu
b2RlLmZpeHR1cmUpOw0KCX0NCglvdGhlci5SZXNldE1hc3NEYXRhKCk7DQoJdGhpcy5SZXNldE1h
c3NEYXRhKCk7DQoJdGhpcy5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7DQp9Ow0KQm94MkQuRHluYW1p
Y3MuYjJCb2R5LnByb3RvdHlwZS5HZXRNYXNzID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMu
bV9tYXNzOw0KfTsNCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuR2V0SW5lcnRpYSA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fSTsNCn07DQovKioNCiAqIEBwYXJhbSB7Qm94
MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhPX0gbWFzc0RhdGENCiAqIEByZXR1cm4geyFC
b3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyTWFzc0RhdGF9DQogKi8NCkJveDJELkR5bmFtaWNzLmIy
Qm9keS5wcm90b3R5cGUuR2V0TWFzc0RhdGEgPSBmdW5jdGlvbihtYXNzRGF0YSkgew0KCWlmICgh
bWFzc0RhdGEpIHsNCgkJbWFzc0RhdGEgPSBuZXcgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1h
c3NEYXRhKCk7DQoJfQ0KCW1hc3NEYXRhLm1hc3MgPSB0aGlzLm1fbWFzczsNCgltYXNzRGF0YS5J
ID0gdGhpcy5tX0k7DQoJbWFzc0RhdGEuY2VudGVyLlNldFYodGhpcy5tX3N3ZWVwLmxvY2FsQ2Vu
dGVyKTsNCglyZXR1cm4gbWFzc0RhdGE7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xs
aXNpb24uU2hhcGVzLmIyTWFzc0RhdGF9IG1hc3NEYXRhDQogKi8NCkJveDJELkR5bmFtaWNzLmIy
Qm9keS5wcm90b3R5cGUuU2V0TWFzc0RhdGEgPSBmdW5jdGlvbihtYXNzRGF0YSkgew0KOw0KCWlm
ICh0aGlzLm1fdHlwZSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfZHluYW1pY0JvZHkp
IHsNCgkJcmV0dXJuOw0KCX0NCgl0aGlzLm1faW52TWFzcyA9IDAuMDsNCgl0aGlzLm1fSSA9IDAu
MDsNCgl0aGlzLm1faW52SSA9IDAuMDsNCgl0aGlzLm1fbWFzcyA9IG1hc3NEYXRhLm1hc3M7DQoJ
aWYgKHRoaXMubV9tYXNzIDw9IDAuMCkgew0KCQl0aGlzLm1fbWFzcyA9IDEuMDsNCgl9DQoJdGhp
cy5tX2ludk1hc3MgPSAxLjAgLyB0aGlzLm1fbWFzczsNCglpZiAobWFzc0RhdGEuSSA+IDAuMCAm
JiAhdGhpcy5tX2ZpeGVkUm90YXRpb24pIHsNCgkJdGhpcy5tX0kgPSBtYXNzRGF0YS5JIC0gdGhp
cy5tX21hc3MgKiAobWFzc0RhdGEuY2VudGVyLnggKiBtYXNzRGF0YS5jZW50ZXIueCArIG1hc3NE
YXRhLmNlbnRlci55ICogbWFzc0RhdGEuY2VudGVyLnkpOw0KCQl0aGlzLm1faW52SSA9IDEuMCAv
IHRoaXMubV9JOw0KCX0NCgl2YXIgb2xkQ2VudGVyID0gdGhpcy5tX3N3ZWVwLmMuQ29weSgpOw0K
CXRoaXMubV9zd2VlcC5sb2NhbENlbnRlci5TZXRWKG1hc3NEYXRhLmNlbnRlcik7DQoJdGhpcy5t
X3N3ZWVwLmMwLlNldFYoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFgodGhpcy5tX3hmLCB0
aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpKTsNCgl0aGlzLm1fc3dlZXAuYy5TZXRWKHRoaXMubV9z
d2VlcC5jMCk7DQoJdGhpcy5tX2xpbmVhclZlbG9jaXR5LnggKz0gdGhpcy5tX2FuZ3VsYXJWZWxv
Y2l0eSAqICgtKHRoaXMubV9zd2VlcC5jLnkgLSBvbGRDZW50ZXIueSkpOw0KCXRoaXMubV9saW5l
YXJWZWxvY2l0eS55ICs9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAoKyh0aGlzLm1fc3dlZXAu
Yy54IC0gb2xkQ2VudGVyLngpKTsNCn07DQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBl
LlJlc2V0TWFzc0RhdGEgPSBmdW5jdGlvbigpIHsNCgl0aGlzLm1fbWFzcyA9IDAuMDsNCgl0aGlz
Lm1faW52TWFzcyA9IDAuMDsNCgl0aGlzLm1fSSA9IDAuMDsNCgl0aGlzLm1faW52SSA9IDAuMDsN
Cgl0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0WmVybygpOw0KCWlmICh0aGlzLm1fdHlwZSA9
PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGljQm9keSB8fCB0aGlzLm1fdHlwZSA9
PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfa2luZW1hdGljQm9keSkgew0KCQlyZXR1cm47
DQoJfQ0KCXZhciBjZW50ZXIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0K
CWZvciAodmFyIG5vZGUgPSB0aGlzLmZpeHR1cmVMaXN0LkdldEZpcnN0Tm9kZSgpOyBub2RlOyBu
b2RlID0gbm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCXZhciBmID0gbm9kZS5maXh0dXJlOw0KCQlp
ZiAoZi5tX2RlbnNpdHkgPT0gMC4wKSB7DQoJCQljb250aW51ZTsNCgkJfQ0KCQl2YXIgbWFzc0Rh
dGEgPSBmLkdldE1hc3NEYXRhKCk7DQoJCXRoaXMubV9tYXNzICs9IG1hc3NEYXRhLm1hc3M7DQoJ
CWNlbnRlci54ICs9IG1hc3NEYXRhLmNlbnRlci54ICogbWFzc0RhdGEubWFzczsNCgkJY2VudGVy
LnkgKz0gbWFzc0RhdGEuY2VudGVyLnkgKiBtYXNzRGF0YS5tYXNzOw0KCQl0aGlzLm1fSSArPSBt
YXNzRGF0YS5JOw0KCX0NCglpZiAodGhpcy5tX21hc3MgPiAwLjApIHsNCgkJdGhpcy5tX2ludk1h
c3MgPSAxLjAgLyB0aGlzLm1fbWFzczsNCgkJY2VudGVyLnggKj0gdGhpcy5tX2ludk1hc3M7DQoJ
CWNlbnRlci55ICo9IHRoaXMubV9pbnZNYXNzOw0KCX0gZWxzZSB7DQoJCXRoaXMubV9tYXNzID0g
MS4wOw0KCQl0aGlzLm1faW52TWFzcyA9IDEuMDsNCgl9DQoJaWYgKHRoaXMubV9JID4gMC4wICYm
ICF0aGlzLm1fZml4ZWRSb3RhdGlvbikgew0KCQl0aGlzLm1fSSAtPSB0aGlzLm1fbWFzcyAqIChj
ZW50ZXIueCAqIGNlbnRlci54ICsgY2VudGVyLnkgKiBjZW50ZXIueSk7DQoJCXRoaXMubV9JICo9
IHRoaXMubV9pbmVydGlhU2NhbGU7DQo7DQoJCXRoaXMubV9pbnZJID0gMS4wIC8gdGhpcy5tX0k7
DQoJfSBlbHNlIHsNCgkJdGhpcy5tX0kgPSAwLjA7DQoJCXRoaXMubV9pbnZJID0gMC4wOw0KCX0N
Cgl2YXIgb2xkQ2VudGVyID0gdGhpcy5tX3N3ZWVwLmMuQ29weSgpOw0KCXRoaXMubV9zd2VlcC5s
b2NhbENlbnRlci5TZXRWKGNlbnRlcik7DQoJdGhpcy5tX3N3ZWVwLmMwLlNldFYoQm94MkQuQ29t
bW9uLk1hdGguYjJNYXRoLk11bFgodGhpcy5tX3hmLCB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIp
KTsNCgl0aGlzLm1fc3dlZXAuYy5TZXRWKHRoaXMubV9zd2VlcC5jMCk7DQoJdGhpcy5tX2xpbmVh
clZlbG9jaXR5LnggKz0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICgtKHRoaXMubV9zd2VlcC5j
LnkgLSBvbGRDZW50ZXIueSkpOw0KCXRoaXMubV9saW5lYXJWZWxvY2l0eS55ICs9IHRoaXMubV9h
bmd1bGFyVmVsb2NpdHkgKiAoKyh0aGlzLm1fc3dlZXAuYy54IC0gb2xkQ2VudGVyLngpKTsNCglC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuRnJlZShjZW50ZXIpOw0KCUJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5GcmVlKG9sZENlbnRlcik7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3Rv
dHlwZS5HZXRXb3JsZFBvaW50ID0gZnVuY3Rpb24obG9jYWxQb2ludCkgew0KCXZhciBBID0gdGhp
cy5tX3hmLlI7DQoJdmFyIHUgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KEEuY29sMS54
ICogbG9jYWxQb2ludC54ICsgQS5jb2wyLnggKiBsb2NhbFBvaW50LnksIEEuY29sMS55ICogbG9j
YWxQb2ludC54ICsgQS5jb2wyLnkgKiBsb2NhbFBvaW50LnkpOw0KCXUueCArPSB0aGlzLm1feGYu
cG9zaXRpb24ueDsNCgl1LnkgKz0gdGhpcy5tX3hmLnBvc2l0aW9uLnk7DQoJcmV0dXJuIHU7DQp9
Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRXb3JsZFZlY3RvciA9IGZ1bmN0
aW9uKGxvY2FsVmVjdG9yKSB7DQoJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxN
Vih0aGlzLm1feGYuUiwgbG9jYWxWZWN0b3IpOw0KfTsNCkJveDJELkR5bmFtaWNzLmIyQm9keS5w
cm90b3R5cGUuR2V0TG9jYWxQb2ludCA9IGZ1bmN0aW9uKHdvcmxkUG9pbnQpIHsNCglyZXR1cm4g
Qm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bFhUKHRoaXMubV94Ziwgd29ybGRQb2ludCk7DQp9
Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRMb2NhbFZlY3RvciA9IGZ1bmN0
aW9uKHdvcmxkVmVjdG9yKSB7DQoJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxU
TVYodGhpcy5tX3hmLlIsIHdvcmxkVmVjdG9yKTsNCn07DQpCb3gyRC5EeW5hbWljcy5iMkJvZHku
cHJvdG90eXBlLkdldExpbmVhclZlbG9jaXR5RnJvbVdvcmxkUG9pbnQgPSBmdW5jdGlvbih3b3Js
ZFBvaW50KSB7DQoJcmV0dXJuIEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQodGhpcy5tX2xp
bmVhclZlbG9jaXR5LnggLSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKHdvcmxkUG9pbnQueSAt
IHRoaXMubV9zd2VlcC5jLnkpLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArIHRoaXMubV9hbmd1
bGFyVmVsb2NpdHkgKiAod29ybGRQb2ludC54IC0gdGhpcy5tX3N3ZWVwLmMueCkpOw0KfTsNCkJv
eDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuR2V0TGluZWFyVmVsb2NpdHlGcm9tTG9jYWxQ
b2ludCA9IGZ1bmN0aW9uKGxvY2FsUG9pbnQpIHsNCgl2YXIgQSA9IHRoaXMubV94Zi5SOw0KCXZh
ciB3b3JsZFBvaW50ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChBLmNvbDEueCAqIGxv
Y2FsUG9pbnQueCArIEEuY29sMi54ICogbG9jYWxQb2ludC55LCBBLmNvbDEueSAqIGxvY2FsUG9p
bnQueCArIEEuY29sMi55ICogbG9jYWxQb2ludC55KTsNCgl3b3JsZFBvaW50LnggKz0gdGhpcy5t
X3hmLnBvc2l0aW9uLng7DQoJd29ybGRQb2ludC55ICs9IHRoaXMubV94Zi5wb3NpdGlvbi55Ow0K
CXZhciB2ZWxvY2l0eSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQodGhpcy5tX2xpbmVh
clZlbG9jaXR5LnggLSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKHdvcmxkUG9pbnQueSAtIHRo
aXMubV9zd2VlcC5jLnkpLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArIHRoaXMubV9hbmd1bGFy
VmVsb2NpdHkgKiAod29ybGRQb2ludC54IC0gdGhpcy5tX3N3ZWVwLmMueCkpOw0KCUJveDJELkNv
bW1vbi5NYXRoLmIyVmVjMi5GcmVlKHdvcmxkUG9pbnQpOw0KCXJldHVybiB2ZWxvY2l0eTsNCn07
DQovKioNCiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnBy
b3RvdHlwZS5HZXRMaW5lYXJEYW1waW5nID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9s
aW5lYXJEYW1waW5nOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9IGxpbmVhckRhbXBpbmcN
CiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5TZXRMaW5lYXJEYW1waW5nID0g
ZnVuY3Rpb24obGluZWFyRGFtcGluZykgew0KCXRoaXMubV9saW5lYXJEYW1waW5nID0gbGluZWFy
RGFtcGluZzsNCn07DQovKioNCiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuYjJCb2R5LnByb3RvdHlwZS5HZXRBbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKCkgew0KCXJl
dHVybiB0aGlzLm1fYW5ndWxhckRhbXBpbmc7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0g
YW5ndWxhckRhbXBpbmcNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5TZXRB
bmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKGFuZ3VsYXJEYW1waW5nKSB7DQoJdGhpcy5tX2FuZ3Vs
YXJEYW1waW5nID0gYW5ndWxhckRhbXBpbmc7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0g
dHlwZQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLlNldFR5cGUgPSBmdW5j
dGlvbih0eXBlKSB7DQoJaWYgKHRoaXMubV90eXBlID09IHR5cGUpIHsNCgkJcmV0dXJuOw0KCX0N
Cgl0aGlzLm1fdHlwZSA9IHR5cGU7DQoJdGhpcy5SZXNldE1hc3NEYXRhKCk7DQoJaWYgKHRoaXMu
bV90eXBlID09IEJveDJELkR5bmFtaWNzLmIyQm9keURlZi5iMl9zdGF0aWNCb2R5KSB7DQoJCXRo
aXMubV9saW5lYXJWZWxvY2l0eS5TZXRaZXJvKCk7DQoJCXRoaXMubV9hbmd1bGFyVmVsb2NpdHkg
PSAwLjA7DQoJfQ0KCXRoaXMuU2V0QXdha2UodHJ1ZSk7DQoJdGhpcy5tX2ZvcmNlLlNldFplcm8o
KTsNCgl0aGlzLm1fdG9ycXVlID0gMC4wOw0KCWZvciAodmFyIGNvbnRhY3ROb2RlID0gdGhpcy5j
b250YWN0TGlzdC5HZXRGaXJzdE5vZGUoQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7IGNvbnRhY3ROb2RlOyBjb250YWN0Tm9kZSA9IGNvbnRh
Y3ROb2RlLkdldE5leHROb2RlKCkpIHsNCgkJY29udGFjdE5vZGUuY29udGFjdC5GbGFnRm9yRmls
dGVyaW5nKCk7DQoJfQ0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2xpc3RzLmxlbmd0aDsg
aSsrKSB7DQoJCXRoaXMubV9saXN0c1tpXS5VcGRhdGVCb2R5KHRoaXMpOw0KCX0NCn07DQovKioN
CiAqIEByZXR1cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlw
ZS5HZXRUeXBlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV90eXBlOw0KfTsNCi8qKg0K
ICogQHBhcmFtIHtib29sZWFufSBmbGFnDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90
b3R5cGUuU2V0QnVsbGV0ID0gZnVuY3Rpb24oZmxhZykgew0KCXRoaXMubV9idWxsZXQgPSBmbGFn
Ow0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJC
b2R5LnByb3RvdHlwZS5Jc0J1bGxldCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYnVs
bGV0Ow0KfTsNCi8qKg0KICogQHBhcmFtIHtib29sZWFufSBmbGFnDQogKi8NCkJveDJELkR5bmFt
aWNzLmIyQm9keS5wcm90b3R5cGUuU2V0U2xlZXBpbmdBbGxvd2VkID0gZnVuY3Rpb24oZmxhZykg
ew0KCXRoaXMubV9hbGxvd1NsZWVwID0gZmxhZzsNCglpZiAoIWZsYWcpIHsNCgkJdGhpcy5TZXRB
d2FrZSh0cnVlKTsNCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWcNCiAqLw0K
Qm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5TZXRBd2FrZSA9IGZ1bmN0aW9uKGZsYWcp
IHsNCglpZiAodGhpcy5tX2F3YWtlICE9IGZsYWcpIHsNCgkJdGhpcy5tX2F3YWtlID0gZmxhZzsN
CgkJdGhpcy5tX3NsZWVwVGltZSA9IDA7DQoJCWlmICghZmxhZykgew0KCQkJdGhpcy5tX2xpbmVh
clZlbG9jaXR5LlNldFplcm8oKTsNCgkJCXRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSAwLjA7DQoJ
CQl0aGlzLm1fZm9yY2UuU2V0WmVybygpOw0KCQkJdGhpcy5tX3RvcnF1ZSA9IDAuMDsNCgkJfQ0K
CQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9saXN0cy5sZW5ndGg7IGkrKykgew0KCQkJdGhp
cy5tX2xpc3RzW2ldLlVwZGF0ZUJvZHkodGhpcyk7DQoJCX0NCgl9DQp9Ow0KLyoqDQogKiBAcmV0
dXJuIHtib29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLklzQXdh
a2UgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2F3YWtlOw0KfTsNCi8qKg0KICogQHBh
cmFtIHtib29sZWFufSBmaXhlZA0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBl
LlNldEZpeGVkUm90YXRpb24gPSBmdW5jdGlvbihmaXhlZCkgew0KCXRoaXMubV9maXhlZFJvdGF0
aW9uID0gZml4ZWQ7DQoJdGhpcy5SZXNldE1hc3NEYXRhKCk7DQp9Ow0KLyoqDQogKiBAcmV0dXJu
IHtib29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLklzRml4ZWRS
b3RhdGlvbiA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fZml4ZWRSb3RhdGlvbjsNCn07
DQovKioNCiAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZw0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJv
ZHkucHJvdG90eXBlLlNldEFjdGl2ZSA9IGZ1bmN0aW9uKGZsYWcpIHsNCglpZiAoZmxhZyA9PSB0
aGlzLm1fYWN0aXZlKSB7DQoJCXJldHVybjsNCgl9DQoJaWYgKGZsYWcpIHsNCgkJdGhpcy5tX2Fj
dGl2ZSA9IHRydWU7DQoJCXZhciBicm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fY29udGFjdE1h
bmFnZXIubV9icm9hZFBoYXNlOw0KCQlmb3IgKHZhciBub2RlID0gdGhpcy5maXh0dXJlTGlzdC5H
ZXRGaXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQkJbm9k
ZS5maXh0dXJlLkNyZWF0ZVByb3h5KGJyb2FkUGhhc2UsIHRoaXMubV94Zik7DQoJCX0NCgl9IGVs
c2Ugew0KCQl0aGlzLm1fYWN0aXZlID0gZmFsc2U7DQoJCXZhciBicm9hZFBoYXNlID0gdGhpcy5t
X3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlOw0KCQlmb3IgKHZhciBub2RlID0g
dGhpcy5maXh0dXJlTGlzdC5HZXRGaXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUuR2V0TmV4
dE5vZGUoKSkgew0KCQkJbm9kZS5maXh0dXJlLkRlc3Ryb3lQcm94eShicm9hZFBoYXNlKTsNCgkJ
fQ0KCQlmb3IgKHZhciBjb250YWN0Tm9kZSA9IHRoaXMuY29udGFjdExpc3QuR2V0Rmlyc3ROb2Rl
KEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMuYWxsQ29udGFjdHMp
OyBjb250YWN0Tm9kZTsgY29udGFjdE5vZGUgPSBjb250YWN0Tm9kZS5HZXROZXh0Tm9kZSgpKSB7
DQoJCQl0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGNvbnRhY3ROb2RlLmNv
bnRhY3QpOw0KCQl9DQoJfQ0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2xpc3RzLmxlbmd0
aDsgaSsrKSB7DQoJCXRoaXMubV9saXN0c1tpXS5VcGRhdGVCb2R5KHRoaXMpOw0KCX0NCn07DQov
KioNCiAqIEByZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5wcm90
b3R5cGUuSXNBY3RpdmUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2FjdGl2ZTsNCn07
DQovKioNCiAqIEByZXR1cm4ge2Jvb2xlYW59DQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5w
cm90b3R5cGUuSXNTbGVlcGluZ0FsbG93ZWQgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5t
X2FsbG93U2xlZXA7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRGaXh0
dXJlTGlzdCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLmZpeHR1cmVMaXN0Ow0KfTsNCkJv
eDJELkR5bmFtaWNzLmIyQm9keS5wcm90b3R5cGUuR2V0Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnBy
b3RvdHlwZS5HZXRDb250cm9sbGVyTGlzdCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLmNv
bnRyb2xsZXJMaXN0Ow0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udHJv
bGxlcnMuYjJDb250cm9sbGVyfSBjb250cm9sbGVyDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9k
eS5wcm90b3R5cGUuQWRkQ29udHJvbGxlciA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHsNCgl0aGlz
LmNvbnRyb2xsZXJMaXN0LkFkZENvbnRyb2xsZXIoY29udHJvbGxlcik7DQp9Ow0KLyoqDQogKiBA
cGFyYW0geyFCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJ9IGNvbnRyb2xs
ZXINCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5SZW1vdmVDb250cm9sbGVy
ID0gZnVuY3Rpb24oY29udHJvbGxlcikgew0KCXRoaXMuY29udHJvbGxlckxpc3QuUmVtb3ZlQ29u
dHJvbGxlcihjb250cm9sbGVyKTsNCn07DQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBl
LkdldENvbnRhY3RMaXN0ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuY29udGFjdExpc3Q7
DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5HZXRXb3JsZCA9IGZ1bmN0aW9u
KCkgew0KCXJldHVybiB0aGlzLm1fd29ybGQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnBy
b3RvdHlwZS5TeW5jaHJvbml6ZUZpeHR1cmVzID0gZnVuY3Rpb24oKSB7DQoJdmFyIHhmMSA9IEJv
eDJELkR5bmFtaWNzLmIyQm9keS5zX3hmMTsNCgl4ZjEuUi5TZXQodGhpcy5tX3N3ZWVwLmEwKTsN
Cgl2YXIgdE1hdCA9IHhmMS5SOw0KCXZhciB0VmVjID0gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVy
Ow0KCXhmMS5wb3NpdGlvbi54ID0gdGhpcy5tX3N3ZWVwLmMwLnggLSAodE1hdC5jb2wxLnggKiB0
VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7DQoJeGYxLnBvc2l0aW9uLnkgPSB0aGlzLm1f
c3dlZXAuYzAueSAtICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55
KTsNCgl2YXIgZjsNCgl2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5h
Z2VyLm1fYnJvYWRQaGFzZTsNCglmb3IgKHZhciBub2RlID0gdGhpcy5maXh0dXJlTGlzdC5HZXRG
aXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQlub2RlLmZp
eHR1cmUuU3luY2hyb25pemUoYnJvYWRQaGFzZSwgeGYxLCB0aGlzLm1feGYpOw0KCX0NCn07DQpC
b3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBlLlN5bmNocm9uaXplVHJhbnNmb3JtID0gZnVu
Y3Rpb24oKSB7DQoJdGhpcy5tX3hmLlIuU2V0KHRoaXMubV9zd2VlcC5hKTsNCgl2YXIgdE1hdCA9
IHRoaXMubV94Zi5SOw0KCXZhciB0VmVjID0gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyOw0KCXRo
aXMubV94Zi5wb3NpdGlvbi54ID0gdGhpcy5tX3N3ZWVwLmMueCAtICh0TWF0LmNvbDEueCAqIHRW
ZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTsNCgl0aGlzLm1feGYucG9zaXRpb24ueSA9IHRo
aXMubV9zd2VlcC5jLnkgLSAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRW
ZWMueSk7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJCb2R5LnByb3RvdHlwZS5TaG91bGRDb2xsaWRl
ID0gZnVuY3Rpb24ob3RoZXIpIHsNCglpZiAodGhpcy5tX3R5cGUgIT0gQm94MkQuRHluYW1pY3Mu
YjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5ICYmIG90aGVyLm1fdHlwZSAhPSBCb3gyRC5EeW5hbWlj
cy5iMkJvZHlEZWYuYjJfZHluYW1pY0JvZHkpIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCglmb3Ig
KHZhciBqbiA9IHRoaXMubV9qb2ludExpc3Q7IGpuOyBqbiA9IGpuLm5leHQpIHsNCgkJaWYgKGpu
Lm90aGVyID09IG90aGVyKSBpZiAoam4uam9pbnQubV9jb2xsaWRlQ29ubmVjdGVkID09IGZhbHNl
KSB7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCgl9DQoJcmV0dXJuIHRydWU7DQp9Ow0KLyoqDQog
KiBAcGFyYW0ge251bWJlcn0gdA0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHkucHJvdG90eXBl
LkFkdmFuY2UgPSBmdW5jdGlvbih0KSB7DQoJdGhpcy5tX3N3ZWVwLkFkdmFuY2UodCk7DQoJdGhp
cy5tX3N3ZWVwLmMuU2V0Vih0aGlzLm1fc3dlZXAuYzApOw0KCXRoaXMubV9zd2VlcC5hID0gdGhp
cy5tX3N3ZWVwLmEwOw0KCXRoaXMuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCn07DQovKioNCiAq
IEB0eXBlIHtudW1iZXJ9DQogKiBAcHJpdmF0ZQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHku
TkVYVF9JRCA9IDA7DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5i
MkJvZHlEZWYgPSBmdW5jdGlvbigpIHsNCgkvKiogQHR5cGUgeyFCb3gyRC5Db21tb24uTWF0aC5i
MlZlYzJ9ICovDQoJdGhpcy5wb3NpdGlvbiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQo
MCwgMCk7DQoJLyoqIEB0eXBlIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSAqLw0KCXRoaXMu
bGluZWFyVmVsb2NpdHkgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCS8q
KiBAdHlwZSB7bnVtYmVyfSAqLw0KCXRoaXMuYW5nbGUgPSAwLjA7DQoJLyoqIEB0eXBlIHtudW1i
ZXJ9ICovDQoJdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSAwLjA7DQoJLyoqIEB0eXBlIHtudW1iZXJ9
ICovDQoJdGhpcy5saW5lYXJEYW1waW5nID0gMC4wOw0KCS8qKiBAdHlwZSB7bnVtYmVyfSAqLw0K
CXRoaXMuYW5ndWxhckRhbXBpbmcgPSAwLjA7DQoJLyoqIEB0eXBlIHtib29sZWFufSAqLw0KCXRo
aXMuYWxsb3dTbGVlcCA9IHRydWU7DQoJLyoqIEB0eXBlIHtib29sZWFufSAqLw0KCXRoaXMuYXdh
a2UgPSB0cnVlOw0KCS8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8NCgl0aGlzLmZpeGVkUm90YXRpb24g
PSBmYWxzZTsNCgkvKiogQHR5cGUge2Jvb2xlYW59ICovDQoJdGhpcy5idWxsZXQgPSBmYWxzZTsN
CgkvKiogQHR5cGUge251bWJlcn0gKi8NCgl0aGlzLnR5cGUgPSBCb3gyRC5EeW5hbWljcy5iMkJv
ZHlEZWYuYjJfc3RhdGljQm9keTsNCgkvKiogQHR5cGUge2Jvb2xlYW59ICovDQoJdGhpcy5hY3Rp
dmUgPSB0cnVlOw0KCS8qKiBAdHlwZSB7bnVtYmVyfSAqLw0KCXRoaXMuaW5lcnRpYVNjYWxlID0g
MS4wOw0KfTsNCi8qKg0KICogQGNvbnN0DQogKiBAdHlwZSB7bnVtYmVyfQ0KICovDQpCb3gyRC5E
eW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGljQm9keSA9IDA7DQovKioNCiAqIEBjb25zdA0KICog
QHR5cGUge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2tpbmVtYXRp
Y0JvZHkgPSAxOw0KLyoqDQogKiBAY29uc3QNCiAqIEB0eXBlIHtudW1iZXJ9DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyQm9keURlZi5iMl9keW5hbWljQm9keSA9IDI7DQovKioNCiAqIEBjb25zdHJ1
Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0ID0gZnVuY3Rpb24oKSB7DQoJLyoq
DQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7QXJyYXkuPEJveDJELkR5bmFtaWNzLmIyQm9keUxp
c3ROb2RlPn0NCgkgKi8NCgl0aGlzLmJvZHlGaXJzdE5vZGVzID0gW107DQoJZm9yKHZhciBpID0g
MDsgaSA8PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmFsbEJvZGllczsgaSsrKSB7
DQoJCXRoaXMuYm9keUZpcnN0Tm9kZXNbaV0gPSBudWxsOw0KCX0NCgkvKioNCgkgKiBAcHJpdmF0
ZQ0KCSAqIEB0eXBlIHtBcnJheS48Qm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdE5vZGU+fQ0KCSAq
Lw0KCXRoaXMuYm9keUxhc3ROb2RlcyA9IFtdOw0KCWZvcih2YXIgaSA9IDA7IGkgPD0gQm94MkQu
RHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5hbGxCb2RpZXM7IGkrKykgew0KCQl0aGlzLmJvZHlM
YXN0Tm9kZXNbaV0gPSBudWxsOw0KCX0NCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtP
YmplY3QuPEFycmF5LjxCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0Tm9kZT4+fQ0KCSAqLw0KCXRo
aXMuYm9keU5vZGVMb29rdXAgPSB7fTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtu
dW1iZXJ9DQoJICovDQoJdGhpcy5ib2R5Q291bnQgPSAwOw0KfTsNCi8qKg0KICogQHBhcmFtIHtu
dW1iZXJ9IHR5cGUNCiAqIEByZXR1cm4ge0JveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlfQ0K
ICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LnByb3RvdHlwZS5HZXRGaXJzdE5vZGUgPSBm
dW5jdGlvbih0eXBlKSB7DQoJcmV0dXJuIHRoaXMuYm9keUZpcnN0Tm9kZXNbdHlwZV07DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkJvZHl9IGJvZHkNCiAqLw0KQm94MkQu
RHluYW1pY3MuYjJCb2R5TGlzdC5wcm90b3R5cGUuQWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHsN
Cgl2YXIgYm9keUlEID0gYm9keS5JRDsNCglpZiAodGhpcy5ib2R5Tm9kZUxvb2t1cFtib2R5SURd
ID09IG51bGwpIHsNCgkJdGhpcy5DcmVhdGVOb2RlKGJvZHksIGJvZHlJRCwgQm94MkQuRHluYW1p
Y3MuYjJCb2R5TGlzdC5UWVBFUy5hbGxCb2RpZXMpOw0KCQl0aGlzLlVwZGF0ZUJvZHkoYm9keSk7
DQoJCWJvZHkubV9saXN0cy5wdXNoKHRoaXMpOw0KCQl0aGlzLmJvZHlDb3VudCsrOw0KCX0NCn07
DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyQm9keX0gYm9keQ0KICovDQpCb3gy
RC5EeW5hbWljcy5iMkJvZHlMaXN0LnByb3RvdHlwZS5VcGRhdGVCb2R5ID0gZnVuY3Rpb24oYm9k
eSkgew0KCXZhciB0eXBlID0gYm9keS5HZXRUeXBlKCk7DQoJdmFyIGJvZHlJRCA9IGJvZHkuSUQ7
DQoJdmFyIGF3YWtlID0gYm9keS5Jc0F3YWtlKCk7DQoJdmFyIGFjdGl2ZSA9IGJvZHkuSXNBY3Rp
dmUoKTsNCglpZiAodHlwZSA9PSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfZHluYW1pY0Jv
ZHkpIHsNCgkJdGhpcy5DcmVhdGVOb2RlKGJvZHksIGJvZHlJRCwgQm94MkQuRHluYW1pY3MuYjJC
b2R5TGlzdC5UWVBFUy5keW5hbWljQm9kaWVzKTsNCgl9IGVsc2Ugew0KCQl0aGlzLlJlbW92ZU5v
ZGUoYm9keUlELCBCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmR5bmFtaWNCb2RpZXMp
Ow0KCX0NCglpZiAodHlwZSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGljQm9k
eSkgew0KCQl0aGlzLkNyZWF0ZU5vZGUoYm9keSwgYm9keUlELCBCb3gyRC5EeW5hbWljcy5iMkJv
ZHlMaXN0LlRZUEVTLm5vblN0YXRpY0JvZGllcyk7DQoJfSBlbHNlIHsNCgkJdGhpcy5SZW1vdmVO
b2RlKGJvZHlJRCwgQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5ub25TdGF0aWNCb2Rp
ZXMpOw0KCX0NCglpZiAodHlwZSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGlj
Qm9keSAmJiBhY3RpdmUgJiYgYXdha2UpIHsNCgkJdGhpcy5DcmVhdGVOb2RlKGJvZHksIGJvZHlJ
RCwgQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5ub25TdGF0aWNBY3RpdmVBd2FrZUJv
ZGllcyk7DQoJfSBlbHNlIHsNCgkJdGhpcy5SZW1vdmVOb2RlKGJvZHlJRCwgQm94MkQuRHluYW1p
Y3MuYjJCb2R5TGlzdC5UWVBFUy5ub25TdGF0aWNBY3RpdmVBd2FrZUJvZGllcyk7DQoJfQ0KCWlm
IChhd2FrZSkgew0KCQl0aGlzLkNyZWF0ZU5vZGUoYm9keSwgYm9keUlELCBCb3gyRC5EeW5hbWlj
cy5iMkJvZHlMaXN0LlRZUEVTLmF3YWtlQm9kaWVzKTsNCgl9IGVsc2Ugew0KCQl0aGlzLlJlbW92
ZU5vZGUoYm9keUlELCBCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmF3YWtlQm9kaWVz
KTsNCgl9DQoJaWYgKGFjdGl2ZSkgew0KCQl0aGlzLkNyZWF0ZU5vZGUoYm9keSwgYm9keUlELCBC
b3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmFjdGl2ZUJvZGllcyk7DQoJfSBlbHNlIHsN
CgkJdGhpcy5SZW1vdmVOb2RlKGJvZHlJRCwgQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBF
Uy5hY3RpdmVCb2RpZXMpOw0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNz
LmIyQm9keX0gYm9keQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LnByb3RvdHlwZS5S
ZW1vdmVCb2R5ID0gZnVuY3Rpb24oYm9keSkgew0KCXZhciBib2R5SUQgPSBib2R5LklEOw0KCWlm
ICh0aGlzLmJvZHlOb2RlTG9va3VwW2JvZHlJRF0gIT0gbnVsbCkgew0KCQljci5hcnJheUZpbmRS
ZW1vdmUoYm9keS5tX2xpc3RzLCB0aGlzKTsNCgkJZm9yKHZhciBpID0gMDsgaSA8PSBCb3gyRC5E
eW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmFsbEJvZGllczsgaSsrKSB7DQoJCQl0aGlzLlJlbW92
ZU5vZGUoYm9keUlELCBpKTsNCgkJfQ0KCQlkZWxldGUgdGhpcy5ib2R5Tm9kZUxvb2t1cFtib2R5
SURdOw0KCQl0aGlzLmJvZHlDb3VudC0tOw0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7c3RyaW5n
fSBib2R5SUQNCiAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlDQogKi8NCkJveDJELkR5bmFtaWNzLmIy
Qm9keUxpc3QucHJvdG90eXBlLlJlbW92ZU5vZGUgPSBmdW5jdGlvbihib2R5SUQsIHR5cGUpIHsN
Cgl2YXIgbm9kZUxpc3QgPSB0aGlzLmJvZHlOb2RlTG9va3VwW2JvZHlJRF07DQoJaWYgKG5vZGVM
aXN0ID09IG51bGwpIHsNCgkJcmV0dXJuOw0KCX0NCgl2YXIgbm9kZSA9IG5vZGVMaXN0W3R5cGVd
Ow0KCWlmIChub2RlID09IG51bGwpIHsNCgkJcmV0dXJuOw0KCX0NCglub2RlTGlzdFt0eXBlXSA9
IG51bGw7DQoJdmFyIHByZXZOb2RlID0gbm9kZS5HZXRQcmV2aW91c05vZGUoKTsNCgl2YXIgbmV4
dE5vZGUgPSBub2RlLkdldE5leHROb2RlKCk7DQoJaWYgKHByZXZOb2RlID09IG51bGwpIHsNCgkJ
dGhpcy5ib2R5Rmlyc3ROb2Rlc1t0eXBlXSA9IG5leHROb2RlOw0KCX0gZWxzZSB7DQoJCXByZXZO
b2RlLlNldE5leHROb2RlKG5leHROb2RlKTsNCgl9DQoJaWYgKG5leHROb2RlID09IG51bGwpIHsN
CgkJdGhpcy5ib2R5TGFzdE5vZGVzW3R5cGVdID0gcHJldk5vZGU7DQoJfSBlbHNlIHsNCgkJbmV4
dE5vZGUuU2V0UHJldmlvdXNOb2RlKHByZXZOb2RlKTsNCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5EeW5hbWljcy5iMkJvZHl9IGJvZHkNCiAqIEBwYXJhbSB7c3RyaW5nfSBib2R5SUQN
CiAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keUxpc3Qu
cHJvdG90eXBlLkNyZWF0ZU5vZGUgPSBmdW5jdGlvbihib2R5LCBib2R5SUQsIHR5cGUpIHsNCgl2
YXIgbm9kZUxpc3QgPSB0aGlzLmJvZHlOb2RlTG9va3VwW2JvZHlJRF07DQoJaWYgKG5vZGVMaXN0
ID09IG51bGwpIHsNCgkJbm9kZUxpc3QgPSBbXTsNCgkJZm9yKHZhciBpID0gMDsgaSA8PSBCb3gy
RC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmFsbEJvZGllczsgaSsrKSB7DQoJCQlub2RlTGlz
dFtpXSA9IG51bGw7DQoJCX0NCgkJdGhpcy5ib2R5Tm9kZUxvb2t1cFtib2R5SURdID0gbm9kZUxp
c3Q7DQoJfQ0KCWlmIChub2RlTGlzdFt0eXBlXSA9PSBudWxsKSB7DQoJCW5vZGVMaXN0W3R5cGVd
ID0gbmV3IEJveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlKGJvZHkpOw0KCQl2YXIgcHJldk5v
ZGUgPSB0aGlzLmJvZHlMYXN0Tm9kZXNbdHlwZV07DQoJCWlmIChwcmV2Tm9kZSAhPSBudWxsKSB7
DQoJCQlwcmV2Tm9kZS5TZXROZXh0Tm9kZShub2RlTGlzdFt0eXBlXSk7DQoJCX0gZWxzZSB7DQoJ
CQl0aGlzLmJvZHlGaXJzdE5vZGVzW3R5cGVdID0gbm9kZUxpc3RbdHlwZV07DQoJCX0NCgkJbm9k
ZUxpc3RbdHlwZV0uU2V0UHJldmlvdXNOb2RlKHByZXZOb2RlKTsNCgkJdGhpcy5ib2R5TGFzdE5v
ZGVzW3R5cGVdID0gbm9kZUxpc3RbdHlwZV07DQoJfQ0KfTsNCi8qKg0KICogQHJldHVybiB7bnVt
YmVyfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LnByb3RvdHlwZS5HZXRCb2R5Q291
bnQgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5ib2R5Q291bnQ7DQp9Ow0KLyoqDQogKiBA
ZW51bSB7bnVtYmVyfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTID0gew0K
CWR5bmFtaWNCb2RpZXM6IDAsDQoJbm9uU3RhdGljQm9kaWVzOiAxLA0KCWFjdGl2ZUJvZGllczog
MiwNCglub25TdGF0aWNBY3RpdmVBd2FrZUJvZGllczogMywNCglhd2FrZUJvZGllczogNCwNCglh
bGxCb2RpZXM6IDUgLy8gQXNzdW1lZCB0byBiZSBsYXN0IGJ5IGFib3ZlIGNvZGUNCn07DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyQm9keX0gYm9keQ0KICogQGNvbnN0cnVjdG9y
DQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlID0gZnVuY3Rpb24oYm9keSkgew0K
CS8qKg0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuYjJCb2R5fQ0KCSAq
Lw0KCXRoaXMuYm9keSA9IGJvZHk7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94
MkQuRHluYW1pY3MuYjJCb2R5TGlzdE5vZGV9DQoJICovDQoJdGhpcy5uZXh0ID0gbnVsbDsNCgkv
KioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0Tm9k
ZX0NCgkgKi8NCgl0aGlzLnByZXZpb3VzID0gbnVsbDsNCn07DQovKioNCiAqIEBwYXJhbSB7Qm94
MkQuRHluYW1pY3MuYjJCb2R5TGlzdE5vZGV9IG5vZGUNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJC
b2R5TGlzdE5vZGUucHJvdG90eXBlLlNldE5leHROb2RlID0gZnVuY3Rpb24obm9kZSkgew0KCXRo
aXMubmV4dCA9IG5vZGU7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge0JveDJELkR5bmFtaWNzLmIyQm9k
eUxpc3ROb2RlfSBub2RlDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlLnByb3Rv
dHlwZS5TZXRQcmV2aW91c05vZGUgPSBmdW5jdGlvbihub2RlKSB7DQoJdGhpcy5wcmV2aW91cyA9
IG5vZGU7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5iMkJvZHl9DQogKi8N
CkJveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlLnByb3RvdHlwZS5HZXRCb2R5ID0gZnVuY3Rp
b24oKSB7DQoJcmV0dXJuIHRoaXMuYm9keTsNCn07DQovKioNCiAqIEByZXR1cm4ge0JveDJELkR5
bmFtaWNzLmIyQm9keUxpc3ROb2RlfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0Tm9k
ZS5wcm90b3R5cGUuR2V0TmV4dE5vZGUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5uZXh0
Ow0KfTsNCi8qKg0KICogQHJldHVybiB7Qm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdE5vZGV9DQog
Ki8NCkJveDJELkR5bmFtaWNzLmIyQm9keUxpc3ROb2RlLnByb3RvdHlwZS5HZXRQcmV2aW91c05v
ZGUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5wcmV2aW91czsNCn07DQovKioNCiAqIEBj
b25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIgPSBmdW5jdGlv
bigpIHt9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1
cmVBDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVCDQogKiBA
cmV0dXJuIHtib29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIucHJv
dG90eXBlLlNob3VsZENvbGxpZGUgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHsNCgl2
YXIgZmlsdGVyMSA9IGZpeHR1cmVBLkdldEZpbHRlckRhdGEoKTsNCgl2YXIgZmlsdGVyMiA9IGZp
eHR1cmVCLkdldEZpbHRlckRhdGEoKTsNCglpZiAoZmlsdGVyMS5ncm91cEluZGV4ID09IGZpbHRl
cjIuZ3JvdXBJbmRleCAmJiBmaWx0ZXIxLmdyb3VwSW5kZXggIT0gMCkgew0KCQlyZXR1cm4gZmls
dGVyMS5ncm91cEluZGV4ID4gMDsNCgl9DQoJcmV0dXJuIChmaWx0ZXIxLm1hc2tCaXRzICYgZmls
dGVyMi5jYXRlZ29yeUJpdHMpICE9IDAgJiYgKGZpbHRlcjEuY2F0ZWdvcnlCaXRzICYgZmlsdGVy
Mi5tYXNrQml0cykgIT0gMDsNCn07DQovKiogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMkNvbnRh
Y3RGaWx0ZXJ9ICovDQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIuYjJfZGVmYXVsdEZp
bHRlciA9IG5ldyBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIoKTsNCi8qKg0KICogQGNv
bnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQ29udGFjdEltcHVsc2UgPSBmdW5jdGlv
biAoKSB7DQoJdGhpcy5ub3JtYWxJbXB1bHNlcyA9IFtdOw0KCXRoaXMudGFuZ2VudEltcHVsc2Vz
ID0gW107DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQuRHluYW1pY3MuYjJD
b250YWN0TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7fTsNCkJveDJELkR5bmFtaWNzLmIyQ29udGFj
dExpc3RlbmVyLnByb3RvdHlwZS5CZWdpbkNvbnRhY3QgPSBmdW5jdGlvbiAoY29udGFjdCkge307
DQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RMaXN0ZW5lci5wcm90b3R5cGUuRW5kQ29udGFjdCA9
IGZ1bmN0aW9uIChjb250YWN0KSB7fTsNCkJveDJELkR5bmFtaWNzLmIyQ29udGFjdExpc3RlbmVy
LnByb3RvdHlwZS5QcmVTb2x2ZSA9IGZ1bmN0aW9uIChjb250YWN0LCBvbGRNYW5pZm9sZCkge307
DQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RMaXN0ZW5lci5wcm90b3R5cGUuUG9zdFNvbHZlID0g
ZnVuY3Rpb24gKGNvbnRhY3QsIGltcHVsc2UpIHt9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5E
eW5hbWljcy5iMldvcmxkfSB3b3JsZA0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFt
aWNzLmIyQ29udGFjdE1hbmFnZXIgPSBmdW5jdGlvbih3b3JsZCkgew0KCS8qKg0KCSAqIEBwcml2
YXRlDQoJICogQGNvbnN0DQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMldvcmxkfQ0KCSAq
Lw0KCXRoaXMubV93b3JsZCA9IHdvcmxkOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUg
eyFCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXJ9DQoJICovDQoJdGhpcy5tX2NvbnRhY3RG
aWx0ZXIgPSBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIuYjJfZGVmYXVsdEZpbHRlcjsN
CgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuYjJDb250YWN0
TGlzdGVuZXJ9DQoJICovDQoJdGhpcy5tX2NvbnRhY3RMaXN0ZW5lciA9IEJveDJELkR5bmFtaWNz
LmIyQ29udGFjdExpc3RlbmVyLmIyX2RlZmF1bHRMaXN0ZW5lcjsNCgkvKioNCgkgKiBAcHJpdmF0
ZQ0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250
YWN0RmFjdG9yeX0NCgkgKi8NCgl0aGlzLm1fY29udGFjdEZhY3RvcnkgPSBuZXcgQm94MkQuRHlu
YW1pY3MuQ29udGFjdHMuYjJDb250YWN0RmFjdG9yeSgpOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJ
ICogQHR5cGUgeyFCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhhc2V9DQoJICov
DQoJdGhpcy5tX2Jyb2FkUGhhc2UgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVC
cm9hZFBoYXNlKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1
cmV9IGZpeHR1cmVBDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1
cmVCDQogKi8NCkJveDJELkR5bmFtaWNzLmIyQ29udGFjdE1hbmFnZXIucHJvdG90eXBlLkFkZFBh
aXIgPSBmdW5jdGlvbiAoZml4dHVyZUEsIGZpeHR1cmVCKSB7DQogIHZhciBib2R5QSA9IGZpeHR1
cmVBLkdldEJvZHkoKTsNCiAgdmFyIGJvZHlCID0gZml4dHVyZUIuR2V0Qm9keSgpOw0KICBpZiAo
Ym9keUEgPT0gYm9keUIpIHsNCgkgIHJldHVybjsNCiAgfQ0KICBpZiAoIWJvZHlCLlNob3VsZENv
bGxpZGUoYm9keUEpKSB7DQoJIHJldHVybjsNCiAgfQ0KICBpZiAoIXRoaXMubV9jb250YWN0Rmls
dGVyLlNob3VsZENvbGxpZGUoZml4dHVyZUEsIGZpeHR1cmVCKSkgew0KCSByZXR1cm47DQogIH0N
CiAgZm9yICh2YXIgY29udGFjdE5vZGUgPSBib2R5Qi5jb250YWN0TGlzdC5HZXRGaXJzdE5vZGUo
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7
IGNvbnRhY3ROb2RlOyBjb250YWN0Tm9kZSA9IGNvbnRhY3ROb2RlLkdldE5leHROb2RlKCkpIHsN
Cgl2YXIgZkEgPSBjb250YWN0Tm9kZS5jb250YWN0Lm1fZml4dHVyZUE7DQoJaWYgKGZBID09IGZp
eHR1cmVBKSB7DQoJCXZhciBmQiA9IGNvbnRhY3ROb2RlLmNvbnRhY3QubV9maXh0dXJlQjsNCgkJ
aWYgKGZCID09IGZpeHR1cmVCKSB7DQoJCQlyZXR1cm47DQoJCX0NCgl9IGVsc2UgaWYgKGZBID09
IGZpeHR1cmVCKSB7DQoJCXZhciBmQiA9IGNvbnRhY3ROb2RlLmNvbnRhY3QubV9maXh0dXJlQjsN
CgkJaWYgKGZCID09IGZpeHR1cmVBKSB7DQoJCQlyZXR1cm47DQoJCX0NCgl9DQogIH0NCiAgdmFy
IGMgPSB0aGlzLm1fY29udGFjdEZhY3RvcnkuQ3JlYXRlKGZpeHR1cmVBLCBmaXh0dXJlQik7DQp9
Ow0KQm94MkQuRHluYW1pY3MuYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuRmluZE5ld0NvbnRh
Y3RzID0gZnVuY3Rpb24gKCkgew0KCXZhciBzZWxmID0gdGhpczsNCgkvKiogQHR5cGUge2Z1bmN0
aW9uKCFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUsICFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUp
fSAqLw0KCXZhciBhZGRQYWlyQ2FsbGJhY2sgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIp
IHsNCgkJc2VsZi5BZGRQYWlyKGZpeHR1cmVBLCBmaXh0dXJlQikNCgl9Ow0KCXRoaXMubV9icm9h
ZFBoYXNlLlVwZGF0ZVBhaXJzKGFkZFBhaXJDYWxsYmFjayk7DQp9Ow0KQm94MkQuRHluYW1pY3Mu
YjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uIChjKSB7DQoJdmFy
IGZpeHR1cmVBID0gYy5tX2ZpeHR1cmVBOw0KCXZhciBmaXh0dXJlQiA9IGMubV9maXh0dXJlQjsN
Cgl2YXIgYm9keUEgPSBmaXh0dXJlQS5HZXRCb2R5KCk7DQoJdmFyIGJvZHlCID0gZml4dHVyZUIu
R2V0Qm9keSgpOw0KCWlmIChjLnRvdWNoaW5nKSB7DQoJCXRoaXMubV9jb250YWN0TGlzdGVuZXIu
RW5kQ29udGFjdChjKTsNCgl9DQoJaWYgKGMubV9tYW5pZm9sZC5tX3BvaW50Q291bnQgPiAwKSB7
DQoJCWMubV9maXh0dXJlQS5HZXRCb2R5KCkuU2V0QXdha2UodHJ1ZSk7DQoJCWMubV9maXh0dXJl
Qi5HZXRCb2R5KCkuU2V0QXdha2UodHJ1ZSk7DQoJfQ0KCWMuUmVtb3ZlRnJvbUxpc3RzKCk7DQoJ
dGhpcy5tX2NvbnRhY3RGYWN0b3J5LkRlc3Ryb3koYyk7DQp9Ow0KQm94MkQuRHluYW1pY3MuYjJD
b250YWN0TWFuYWdlci5wcm90b3R5cGUuQ29sbGlkZSA9IGZ1bmN0aW9uKCkgew0KCWZvciAodmFy
IGNvbnRhY3ROb2RlID0gdGhpcy5tX3dvcmxkLmNvbnRhY3RMaXN0LkdldEZpcnN0Tm9kZShCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LlRZUEVTLmFsbENvbnRhY3RzKTsgY29u
dGFjdE5vZGU7IGNvbnRhY3ROb2RlID0gY29udGFjdE5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQl2
YXIgYyA9IGNvbnRhY3ROb2RlLmNvbnRhY3Q7DQoJCXZhciBmaXh0dXJlQSA9IGMubV9maXh0dXJl
QTsNCgkJdmFyIGZpeHR1cmVCID0gYy5tX2ZpeHR1cmVCOw0KCQl2YXIgYm9keUEgPSBmaXh0dXJl
QS5HZXRCb2R5KCk7DQoJCXZhciBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTsNCgkJaWYgKGJv
ZHlBLklzQXdha2UoKSA9PSBmYWxzZSAmJiBib2R5Qi5Jc0F3YWtlKCkgPT0gZmFsc2UpIHsNCgkJ
CWNvbnRpbnVlOw0KCQl9DQoJCWlmIChjLklzRmlsdGVyaW5nKCkpIHsNCgkJCWlmIChib2R5Qi5T
aG91bGRDb2xsaWRlKGJvZHlBKSA9PSBmYWxzZSkgew0KCQkJCXRoaXMuRGVzdHJveShjKTsNCgkJ
CQljb250aW51ZTsNCgkJCX0NCgkJCWlmICh0aGlzLm1fY29udGFjdEZpbHRlci5TaG91bGRDb2xs
aWRlKGZpeHR1cmVBLCBmaXh0dXJlQikgPT0gZmFsc2UpIHsNCgkJCQl0aGlzLkRlc3Ryb3koYyk7
DQoJCQkJY29udGludWU7DQoJCQl9DQoJCQljLkNsZWFyRmlsdGVyaW5nKCk7DQoJCX0NCgkJdmFy
IHByb3h5QSA9IGZpeHR1cmVBLm1fcHJveHk7DQoJCXZhciBwcm94eUIgPSBmaXh0dXJlQi5tX3By
b3h5Ow0KCQl2YXIgb3ZlcmxhcCA9IHRoaXMubV9icm9hZFBoYXNlLlRlc3RPdmVybGFwKHByb3h5
QSwgcHJveHlCKTsNCgkJaWYgKG92ZXJsYXAgPT0gZmFsc2UpIHsNCgkJCXRoaXMuRGVzdHJveShj
KTsNCgkJCWNvbnRpbnVlOw0KCQl9DQoJCWMuVXBkYXRlKHRoaXMubV9jb250YWN0TGlzdGVuZXIp
Ow0KCX0NCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkRl
c3RydWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7fTsNCkJveDJELkR5bmFtaWNzLmIyRGVz
dHJ1Y3Rpb25MaXN0ZW5lci5wcm90b3R5cGUuU2F5R29vZGJ5ZUpvaW50ID0gZnVuY3Rpb24gKGpv
aW50KSB7fTsNCkJveDJELkR5bmFtaWNzLmIyRGVzdHJ1Y3Rpb25MaXN0ZW5lci5wcm90b3R5cGUu
U2F5R29vZGJ5ZUZpeHR1cmUgPSBmdW5jdGlvbiAoZml4dHVyZSkge307DQovKioNCiAqIEBjb25z
dHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpbHRlckRhdGEgPSBmdW5jdGlvbiAoKSB7
DQogIHRoaXMuY2F0ZWdvcnlCaXRzID0gMHgwMDAxOw0KICB0aGlzLm1hc2tCaXRzID0gMHhGRkZG
Ow0KICB0aGlzLmdyb3VwSW5kZXggPSAwOw0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkR5
bmFtaWNzLmIyRmlsdGVyRGF0YX0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaWx0ZXJEYXRhLnBy
b3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24gKCkgew0KICB2YXIgY29weSA9IG5ldyBCb3gyRC5EeW5h
bWljcy5iMkZpbHRlckRhdGEoKTsNCiAgY29weS5jYXRlZ29yeUJpdHMgPSB0aGlzLmNhdGVnb3J5
Qml0czsNCiAgY29weS5tYXNrQml0cyA9IHRoaXMubWFza0JpdHM7DQogIGNvcHkuZ3JvdXBJbmRl
eCA9IHRoaXMuZ3JvdXBJbmRleDsNCiAgcmV0dXJuIGNvcHk7DQp9Ow0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5EeW5hbWljcy5iMkJvZHl9IGJvZHkNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5N
YXRoLmIyVHJhbnNmb3JtfSB4Zg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJl
RGVmfSBkZWYNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUg
PSBmdW5jdGlvbihib2R5LCB4ZiwgZGVmKSB7DQoJLyoqDQoJICogQGNvbnN0DQoJICogQHByaXZh
dGUNCgkgKiBAdHlwZSB7c3RyaW5nfQ0KCSAqLw0KCXRoaXMuSUQgPSAiRml4dHVyZSIgKyBCb3gy
RC5EeW5hbWljcy5iMkZpeHR1cmUuTkVYVF9JRCsrOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICog
QHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMkZpbHRlckRhdGF9DQoJICovDQoJdGhpcy5tX2ZpbHRl
ciA9IGRlZi5maWx0ZXIuQ29weSgpOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFC
b3gyRC5Db2xsaXNpb24uYjJBQUJCfQ0KCSAqLw0KCXRoaXMubV9hYWJiID0gQm94MkQuQ29sbGlz
aW9uLmIyQUFCQi5HZXQoKTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQu
RHluYW1pY3MuYjJCb2R5fQ0KCSAqLw0KCXRoaXMubV9ib2R5ID0gYm9keTsNCgkvKioNCgkgKiBA
cHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlfQ0KCSAq
Lw0KCXRoaXMubV9zaGFwZSA9IGRlZi5zaGFwZS5Db3B5KCk7DQoJLyoqDQoJICogQHByaXZhdGUN
CgkgKiBAdHlwZSB7bnVtYmVyfQ0KCSAqLw0KCXRoaXMubV9kZW5zaXR5ID0gZGVmLmRlbnNpdHk7
DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7bnVtYmVyfQ0KCSAqLw0KCXRoaXMubV9m
cmljdGlvbiA9IGRlZi5mcmljdGlvbjsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtu
dW1iZXJ9DQoJICovDQoJdGhpcy5tX3Jlc3RpdHV0aW9uID0gZGVmLnJlc3RpdHV0aW9uOw0KCS8q
Kg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy5tX2lzU2Vu
c29yID0gZGVmLmlzU2Vuc29yOw0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkNvbGxpc2lv
bi5TaGFwZXMuYjJTaGFwZX0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlLnByb3RvdHlw
ZS5HZXRTaGFwZSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fc2hhcGU7DQp9Ow0KLyoq
DQogKiBAcGFyYW0ge2Jvb2xlYW59IHNlbnNvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1
cmUucHJvdG90eXBlLlNldFNlbnNvciA9IGZ1bmN0aW9uKHNlbnNvcikgew0KCWlmICh0aGlzLm1f
aXNTZW5zb3IgPT0gc2Vuc29yKSB7DQoJCXJldHVybjsNCgl9DQoJdGhpcy5tX2lzU2Vuc29yID0g
c2Vuc29yOw0KCWlmICh0aGlzLm1fYm9keSA9PSBudWxsKSB7DQoJCXJldHVybjsNCgl9DQoJZm9y
ICh2YXIgY29udGFjdE5vZGUgPSB0aGlzLm1fYm9keS5jb250YWN0TGlzdC5HZXRGaXJzdE5vZGUo
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7
IGNvbnRhY3ROb2RlOyBjb250YWN0Tm9kZSA9IGNvbnRhY3ROb2RlLkdldE5leHROb2RlKCkpIHsN
CgkJdmFyIGZpeHR1cmVBID0gY29udGFjdE5vZGUuY29udGFjdC5tX2ZpeHR1cmVBOw0KCQl2YXIg
Zml4dHVyZUIgPSBjb250YWN0Tm9kZS5jb250YWN0Lm1fZml4dHVyZUI7DQoJCWlmIChmaXh0dXJl
QSA9PSB0aGlzIHx8IGZpeHR1cmVCID09IHRoaXMpIHsNCgkJCWNvbnRhY3ROb2RlLmNvbnRhY3Qu
U2V0U2Vuc29yKGZpeHR1cmVBLnNlbnNvciB8fCBmaXh0dXJlQi5zZW5zb3IpOw0KCQl9DQoJfQ0K
fTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0
dXJlLnByb3RvdHlwZS5Jc1NlbnNvciA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1faXNT
ZW5zb3I7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpbHRlckRhdGF9
IGZpbHRlcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUucHJvdG90eXBlLlNldEZpbHRl
ckRhdGEgPSBmdW5jdGlvbihmaWx0ZXIpIHsNCgl0aGlzLm1fZmlsdGVyID0gZmlsdGVyLkNvcHko
KTsNCglpZiAodGhpcy5tX2JvZHkgPT0gbnVsbCkgew0KCQlyZXR1cm47DQoJfQ0KCWZvciAodmFy
IGNvbnRhY3ROb2RlID0gdGhpcy5tX2JvZHkuY29udGFjdExpc3QuR2V0Rmlyc3ROb2RlKEJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMuYWxsQ29udGFjdHMpOyBjb250
YWN0Tm9kZTsgY29udGFjdE5vZGUgPSBjb250YWN0Tm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCWlm
IChjb250YWN0Tm9kZS5jb250YWN0Lm1fZml4dHVyZUEgPT0gdGhpcyB8fCBjb250YWN0Tm9kZS5j
b250YWN0Lm1fZml4dHVyZUIgPT0gdGhpcykgew0KCQkJY29udGFjdE5vZGUuY29udGFjdC5GbGFn
Rm9yRmlsdGVyaW5nKCk7DQoJCX0NCgl9DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuRHlu
YW1pY3MuYjJGaWx0ZXJEYXRhfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUucHJvdG90
eXBlLkdldEZpbHRlckRhdGEgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2ZpbHRlci5D
b3B5KCk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5iMkJvZHl9DQogKi8N
CkJveDJELkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUuR2V0Qm9keSA9IGZ1bmN0aW9uKCkg
ew0KCXJldHVybiB0aGlzLm1fYm9keTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMn0gcA0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuYjJGaXh0dXJlLnByb3RvdHlwZS5UZXN0UG9pbnQgPSBmdW5jdGlvbihwKSB7DQoJcmV0dXJu
IHRoaXMubV9zaGFwZS5UZXN0UG9pbnQodGhpcy5tX2JvZHkuR2V0VHJhbnNmb3JtKCksIHApOw0K
fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdE91dHB1dH0gb3V0
cHV0DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXR9IGlucHV0DQog
KiBAcmV0dXJuIHtib29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUucHJvdG90
eXBlLlJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQsIGlucHV0KSB7DQoJcmV0dXJuIHRoaXMubV9z
aGFwZS5SYXlDYXN0KG91dHB1dCwgaW5wdXQsIHRoaXMubV9ib2R5LkdldFRyYW5zZm9ybSgpKTsN
Cn07DQovKioNCiAqIEBwYXJhbSB7Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhPX0g
bWFzc0RhdGENCiAqIEByZXR1cm4geyFCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyTWFzc0RhdGF9
DQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUuR2V0TWFzc0RhdGEgPSBm
dW5jdGlvbihtYXNzRGF0YSkgew0KCWlmICghbWFzc0RhdGEpIHsNCgkJbWFzc0RhdGEgPSBuZXcg
Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMk1hc3NEYXRhKCk7DQoJfQ0KCXRoaXMubV9zaGFwZS5D
b21wdXRlTWFzcyhtYXNzRGF0YSwgdGhpcy5tX2RlbnNpdHkpOw0KCXJldHVybiBtYXNzRGF0YTsN
Cn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBkZW5zaXR5DQogKi8NCkJveDJELkR5bmFtaWNz
LmIyRml4dHVyZS5wcm90b3R5cGUuU2V0RGVuc2l0eSA9IGZ1bmN0aW9uKGRlbnNpdHkpIHsNCgl0
aGlzLm1fZGVuc2l0eSA9IGRlbnNpdHk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQog
Ki8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUuR2V0RGVuc2l0eSA9IGZ1bmN0
aW9uKCkgew0KCXJldHVybiB0aGlzLm1fZGVuc2l0eTsNCn07DQovKioNCiAqIEByZXR1cm4ge251
bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRGcmljdGlv
biA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fZnJpY3Rpb247DQp9Ow0KLyoqDQogKiBA
cGFyYW0ge251bWJlcn0gZnJpY3Rpb24NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlLnBy
b3RvdHlwZS5TZXRGcmljdGlvbiA9IGZ1bmN0aW9uKGZyaWN0aW9uKSB7DQoJdGhpcy5tX2ZyaWN0
aW9uID0gZnJpY3Rpb247DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUuR2V0UmVzdGl0dXRpb24gPSBmdW5jdGlvbigp
IHsNCglyZXR1cm4gdGhpcy5tX3Jlc3RpdHV0aW9uOw0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1i
ZXJ9IHJlc3RpdHV0aW9uDQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUu
U2V0UmVzdGl0dXRpb24gPSBmdW5jdGlvbihyZXN0aXR1dGlvbikgew0KCXRoaXMubV9yZXN0aXR1
dGlvbiA9IHJlc3RpdHV0aW9uOw0KfTsNCi8qKg0KICogQHJldHVybiB7IUJveDJELkNvbGxpc2lv
bi5iMkFBQkJ9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZS5wcm90b3R5cGUuR2V0QUFC
QiA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYWFiYjsNCn07DQpCb3gyRC5EeW5hbWlj
cy5iMkZpeHR1cmUucHJvdG90eXBlLkRlc3Ryb3kgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5Db2xs
aXNpb24uYjJBQUJCLkZyZWUodGhpcy5tX2FhYmIpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVCcm9hZFBoYXNlfSBicm9hZFBoYXNlDQogKiBAcGFy
YW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0geGYNCiAqLw0KQm94MkQuRHluYW1p
Y3MuYjJGaXh0dXJlLnByb3RvdHlwZS5DcmVhdGVQcm94eSA9IGZ1bmN0aW9uKGJyb2FkUGhhc2Us
IHhmKSB7DQoJdGhpcy5tX3NoYXBlLkNvbXB1dGVBQUJCKHRoaXMubV9hYWJiLCB4Zik7DQoJdGhp
cy5tX3Byb3h5ID0gYnJvYWRQaGFzZS5DcmVhdGVQcm94eSh0aGlzLm1fYWFiYiwgdGhpcyk7DQp9
Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZUJyb2FkUGhh
c2V9IGJyb2FkUGhhc2UNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlLnByb3RvdHlwZS5E
ZXN0cm95UHJveHkgPSBmdW5jdGlvbihicm9hZFBoYXNlKSB7DQoJaWYgKHRoaXMubV9wcm94eSA9
PSBudWxsKSB7DQoJCXJldHVybjsNCgl9DQoJYnJvYWRQaGFzZS5EZXN0cm95UHJveHkodGhpcy5t
X3Byb3h5KTsNCgl0aGlzLm1fcHJveHkgPSBudWxsOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVCcm9hZFBoYXNlfSBicm9hZFBoYXNlDQogKiBAcGFy
YW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5zZm9ybX0gdHJhbnNmb3JtMQ0KICogQHBhcmFt
IHshQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm19IHRyYW5zZm9ybTINCiAqLw0KQm94MkQu
RHluYW1pY3MuYjJGaXh0dXJlLnByb3RvdHlwZS5TeW5jaHJvbml6ZSA9IGZ1bmN0aW9uKGJyb2Fk
UGhhc2UsIHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHsNCglpZiAoIXRoaXMubV9wcm94eSkgcmV0
dXJuOw0KCXZhciBhYWJiMSA9IEJveDJELkNvbGxpc2lvbi5iMkFBQkIuR2V0KCk7DQoJdmFyIGFh
YmIyID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQi5HZXQoKTsNCgl0aGlzLm1fc2hhcGUuQ29tcHV0
ZUFBQkIoYWFiYjEsIHRyYW5zZm9ybTEpOw0KCXRoaXMubV9zaGFwZS5Db21wdXRlQUFCQihhYWJi
MiwgdHJhbnNmb3JtMik7DQoJdGhpcy5tX2FhYmIuQ29tYmluZShhYWJiMSwgYWFiYjIpOw0KCUJv
eDJELkNvbGxpc2lvbi5iMkFBQkIuRnJlZShhYWJiMSk7DQoJQm94MkQuQ29sbGlzaW9uLmIyQUFC
Qi5GcmVlKGFhYmIyKTsNCgl2YXIgZGlzcGxhY2VtZW50ID0gQm94MkQuQ29tbW9uLk1hdGguYjJN
YXRoLlN1YnRyYWN0VlYodHJhbnNmb3JtMi5wb3NpdGlvbiwgdHJhbnNmb3JtMS5wb3NpdGlvbik7
DQoJYnJvYWRQaGFzZS5Nb3ZlUHJveHkodGhpcy5tX3Byb3h5LCB0aGlzLm1fYWFiYiwgZGlzcGxh
Y2VtZW50KTsNCglCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuRnJlZShkaXNwbGFjZW1lbnQpOw0K
fTsNCi8qKg0KICogQHR5cGUge251bWJlcn0NCiAqIEBwcml2YXRlDQogKi8NCkJveDJELkR5bmFt
aWNzLmIyRml4dHVyZS5ORVhUX0lEID0gMDsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJv
eDJELkR5bmFtaWNzLmIyRml4dHVyZURlZiA9IGZ1bmN0aW9uICgpIHsNCgkvKioNCgkgKiBAdHlw
ZSB7IUJveDJELkR5bmFtaWNzLmIyRmlsdGVyRGF0YX0NCgkgKi8NCgl0aGlzLmZpbHRlciA9IG5l
dyBCb3gyRC5EeW5hbWljcy5iMkZpbHRlckRhdGEoKTsNCgl0aGlzLmZpbHRlci5jYXRlZ29yeUJp
dHMgPSAweDAwMDE7DQoJdGhpcy5maWx0ZXIubWFza0JpdHMgPSAweEZGRkY7DQoJdGhpcy5maWx0
ZXIuZ3JvdXBJbmRleCA9IDA7DQoJLyoqDQoJICogQHR5cGUge0JveDJELkNvbGxpc2lvbi5TaGFw
ZXMuYjJTaGFwZX0NCgkgKi8NCgl0aGlzLnNoYXBlID0gbnVsbDsNCgkvKioNCgkgKiBAdHlwZSB7
bnVtYmVyfQ0KCSAqLw0KCXRoaXMuZnJpY3Rpb24gPSAwLjI7DQoJLyoqDQoJICogQHR5cGUge251
bWJlcn0NCgkgKi8NCgl0aGlzLnJlc3RpdHV0aW9uID0gMC4wOw0KCS8qKg0KCSAqIEB0eXBlIHtu
dW1iZXJ9DQoJICovDQoJdGhpcy5kZW5zaXR5ID0gMC4wOw0KCS8qKg0KCSAqIEB0eXBlIHtib29s
ZWFufQ0KCSAqLw0KCXRoaXMuaXNTZW5zb3IgPSBmYWxzZTsNCn07DQovKioNCiAqIEBjb25zdHJ1
Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0ID0gZnVuY3Rpb24oKSB7DQoJ
LyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94MkQuRHluYW1pY3MuYjJGaXh0dXJlTGlz
dE5vZGV9DQoJICovDQoJdGhpcy5maXh0dXJlRmlyc3ROb2RlID0gbnVsbDsNCgkvKioNCgkgKiBA
cHJpdmF0ZQ0KCSAqIEB0eXBlIHtCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0Tm9kZX0NCgkg
Ki8NCgl0aGlzLmZpeHR1cmVMYXN0Tm9kZSA9IG51bGw7DQoJLyoqDQoJICogQHByaXZhdGUNCgkg
KiBAdHlwZSB7T2JqZWN0LjxCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0Tm9kZT59DQoJICov
DQoJdGhpcy5maXh0dXJlTm9kZUxvb2t1cCA9IHt9Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICog
QHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLmZpeHR1cmVDb3VudCA9IDA7DQp9Ow0KLyoqDQog
KiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0Tm9kZX0NCiAqLw0KQm94MkQu
RHluYW1pY3MuYjJGaXh0dXJlTGlzdC5wcm90b3R5cGUuR2V0Rmlyc3ROb2RlID0gZnVuY3Rpb24o
KSB7DQoJcmV0dXJuIHRoaXMuZml4dHVyZUZpcnN0Tm9kZTsNCn07DQovKioNCiAqIEBwYXJhbSB7
IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZQ0KICovDQpCb3gyRC5EeW5hbWljcy5i
MkZpeHR1cmVMaXN0LnByb3RvdHlwZS5BZGRGaXh0dXJlID0gZnVuY3Rpb24oZml4dHVyZSkgew0K
CXZhciBmaXh0dXJlSUQgPSBmaXh0dXJlLklEOw0KCWlmICh0aGlzLmZpeHR1cmVOb2RlTG9va3Vw
W2ZpeHR1cmVJRF0gPT0gbnVsbCkgew0KCQl2YXIgbm9kZSA9IG5ldyBCb3gyRC5EeW5hbWljcy5i
MkZpeHR1cmVMaXN0Tm9kZShmaXh0dXJlKTsNCgkJdmFyIHByZXZOb2RlID0gdGhpcy5maXh0dXJl
TGFzdE5vZGU7DQoJCWlmIChwcmV2Tm9kZSAhPSBudWxsKSB7DQoJCQlwcmV2Tm9kZS5TZXROZXh0
Tm9kZShub2RlKTsNCgkJfSBlbHNlIHsNCgkJCXRoaXMuZml4dHVyZUZpcnN0Tm9kZSA9IG5vZGU7
DQoJCX0NCgkJbm9kZS5TZXRQcmV2aW91c05vZGUocHJldk5vZGUpOw0KCQl0aGlzLmZpeHR1cmVM
YXN0Tm9kZSA9IG5vZGU7DQoJCXRoaXMuZml4dHVyZU5vZGVMb29rdXBbZml4dHVyZUlEXSA9IG5v
ZGU7DQoJCXRoaXMuZml4dHVyZUNvdW50Kys7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJlDQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4
dHVyZUxpc3QucHJvdG90eXBlLlJlbW92ZUZpeHR1cmUgPSBmdW5jdGlvbihmaXh0dXJlKSB7DQoJ
dmFyIGZpeHR1cmVJRCA9IGZpeHR1cmUuSUQ7DQoJdmFyIG5vZGUgPSB0aGlzLmZpeHR1cmVOb2Rl
TG9va3VwW2ZpeHR1cmVJRF07DQoJaWYgKG5vZGUgPT0gbnVsbCkgew0KCQlyZXR1cm47DQoJfQ0K
CXZhciBwcmV2Tm9kZSA9IG5vZGUuR2V0UHJldmlvdXNOb2RlKCk7DQoJdmFyIG5leHROb2RlID0g
bm9kZS5HZXROZXh0Tm9kZSgpOw0KCWlmIChwcmV2Tm9kZSA9PSBudWxsKSB7DQoJCXRoaXMuZml4
dHVyZUZpcnN0Tm9kZSA9IG5leHROb2RlOw0KCX0gZWxzZSB7DQoJCXByZXZOb2RlLlNldE5leHRO
b2RlKG5leHROb2RlKTsNCgl9DQoJaWYgKG5leHROb2RlID09IG51bGwpIHsNCgkJdGhpcy5maXh0
dXJlTGFzdE5vZGUgPSBwcmV2Tm9kZTsNCgl9IGVsc2Ugew0KCQluZXh0Tm9kZS5TZXRQcmV2aW91
c05vZGUocHJldk5vZGUpOw0KCX0NCglkZWxldGUgdGhpcy5maXh0dXJlTm9kZUxvb2t1cFtmaXh0
dXJlSURdOw0KCXRoaXMuZml4dHVyZUNvdW50LS07DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1i
ZXJ9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZUxpc3QucHJvdG90eXBlLkdldEZpeHR1
cmVDb3VudCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLmZpeHR1cmVDb3VudDsNCn07DQov
KioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZQ0KICogQGNv
bnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZUxpc3ROb2RlID0gZnVuY3Rp
b24oZml4dHVyZSkgew0KCS8qKg0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1p
Y3MuYjJGaXh0dXJlfQ0KCSAqLw0KCXRoaXMuZml4dHVyZSA9IGZpeHR1cmU7DQoJLyoqDQoJICog
QHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94MkQuRHluYW1pY3MuYjJGaXh0dXJlTGlzdE5vZGV9DQoJ
ICovDQoJdGhpcy5uZXh0ID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtC
b3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0Tm9kZX0NCgkgKi8NCgl0aGlzLnByZXZpb3VzID0g
bnVsbDsNCn07DQovKioNCiAqIEBwYXJhbSB7Qm94MkQuRHluYW1pY3MuYjJGaXh0dXJlTGlzdE5v
ZGV9IG5vZGUNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlTGlzdE5vZGUucHJvdG90eXBl
LlNldE5leHROb2RlID0gZnVuY3Rpb24obm9kZSkgew0KCXRoaXMubmV4dCA9IG5vZGU7DQp9Ow0K
LyoqDQogKiBAcGFyYW0ge0JveDJELkR5bmFtaWNzLmIyRml4dHVyZUxpc3ROb2RlfSBub2RlDQog
Ki8NCkJveDJELkR5bmFtaWNzLmIyRml4dHVyZUxpc3ROb2RlLnByb3RvdHlwZS5TZXRQcmV2aW91
c05vZGUgPSBmdW5jdGlvbihub2RlKSB7DQoJdGhpcy5wcmV2aW91cyA9IG5vZGU7DQp9Ow0KLyoq
DQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmVMaXN0Tm9kZX0NCiAqLw0KQm94
MkQuRHluYW1pY3MuYjJGaXh0dXJlTGlzdE5vZGUucHJvdG90eXBlLkdldE5leHROb2RlID0gZnVu
Y3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubmV4dDsNCn07DQovKioNCiAqIEByZXR1cm4ge0JveDJE
LkR5bmFtaWNzLmIyRml4dHVyZUxpc3ROb2RlfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMkZpeHR1
cmVMaXN0Tm9kZS5wcm90b3R5cGUuR2V0UHJldmlvdXNOb2RlID0gZnVuY3Rpb24oKSB7DQoJcmV0
dXJuIHRoaXMucHJldmlvdXM7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5i
MkNvbnRhY3RMaXN0ZW5lcn0gbGlzdGVuZXINCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNv
bnRhY3RzLmIyQ29udGFjdFNvbHZlcn0gY29udGFjdFNvbHZlcg0KICogQGNvbnN0cnVjdG9yDQog
Ki8NCkJveDJELkR5bmFtaWNzLmIySXNsYW5kID0gZnVuY3Rpb24obGlzdGVuZXIsIGNvbnRhY3RT
b2x2ZXIpIHsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3Mu
YjJDb250YWN0TGlzdGVuZXJ9DQoJICovDQoJdGhpcy5tX2xpc3RlbmVyID0gbGlzdGVuZXI7DQoJ
LyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
Q29udGFjdFNvbHZlcn0NCgkgKi8NCgl0aGlzLm1fY29udGFjdFNvbHZlciA9IGNvbnRhY3RTb2x2
ZXI7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7QXJyYXkuPCFCb3gyRC5EeW5hbWlj
cy5iMkJvZHk+fQ0KCSAqLw0KCXRoaXMubV9ib2RpZXMgPSBbXTsNCgkvKioNCgkgKiBAcHJpdmF0
ZQ0KCSAqIEB0eXBlIHtBcnJheS48IUJveDJELkR5bmFtaWNzLmIyQm9keT59DQoJICovDQoJdGhp
cy5tX2R5bmFtaWNCb2RpZXMgPSBbXTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtB
cnJheS48IUJveDJELkR5bmFtaWNzLmIyQm9keT59DQoJICovDQoJdGhpcy5tX25vblN0YXRpY0Jv
ZGllcyA9IFtdOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge0FycmF5LjwhQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Pn0NCgkgKi8NCgl0aGlzLm1fY29udGFjdHMgPSBb
XTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtBcnJheS48IUJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkpvaW50Pn0NCgkgKi8NCgl0aGlzLm1fam9pbnRzID0gW107DQp9Ow0KQm94MkQu
RHluYW1pY3MuYjJJc2xhbmQucHJvdG90eXBlLkNsZWFyID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5t
X2JvZGllcyA9IFtdOw0KCXRoaXMubV9keW5hbWljQm9kaWVzID0gW107DQoJdGhpcy5tX25vblN0
YXRpY0JvZGllcyA9IFtdOw0KCXRoaXMubV9jb250YWN0cyA9IFtdOw0KCXRoaXMubV9qb2ludHMg
PSBbXTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyVGltZVN0ZXB9IHN0
ZXANCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gZ3Jhdml0eQ0KICogQHBh
cmFtIHtib29sZWFufSBhbGxvd1NsZWVwDQogKi8NCkJveDJELkR5bmFtaWNzLmIySXNsYW5kLnBy
b3RvdHlwZS5Tb2x2ZSA9IGZ1bmN0aW9uKHN0ZXAsIGdyYXZpdHksIGFsbG93U2xlZXApIHsNCgl0
aGlzLl9Jbml0aWFsaXplVmVsb2NpdGllcyhzdGVwLCBncmF2aXR5KTsNCgl0aGlzLm1fY29udGFj
dFNvbHZlci5Jbml0aWFsaXplKHN0ZXAsIHRoaXMubV9jb250YWN0cywgdGhpcy5tX2NvbnRhY3Rz
Lmxlbmd0aCk7DQoJdGhpcy5fU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN0ZXApOw0KCXRoaXMu
X1NvbHZlQm9kaWVzKHN0ZXApOw0KCXRoaXMuX1NvbHZlUG9zaXRpb25Db25zdHJhaW50cyhzdGVw
KTsNCgl0aGlzLlJlcG9ydCh0aGlzLm1fY29udGFjdFNvbHZlci5tX2NvbnN0cmFpbnRzKTsNCglp
ZiAoYWxsb3dTbGVlcCkgew0KCQl0aGlzLl9TbGVlcElmVGlyZWQoc3RlcCk7DQoJfQ0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJUaW1lU3RlcH0gc3RlcA0KICogQHBhcmFt
IHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBncmF2aXR5DQogKiBAcHJpdmF0ZQ0KICovDQpC
b3gyRC5EeW5hbWljcy5iMklzbGFuZC5wcm90b3R5cGUuX0luaXRpYWxpemVWZWxvY2l0aWVzID0g
ZnVuY3Rpb24oc3RlcCwgZ3Jhdml0eSkgew0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2R5
bmFtaWNCb2RpZXMubGVuZ3RoOyBpKyspIHsNCgkJdmFyIGIgPSB0aGlzLm1fZHluYW1pY0JvZGll
c1tpXTsNCgkJYi5tX2xpbmVhclZlbG9jaXR5LnggKz0gc3RlcC5kdCAqIChncmF2aXR5LnggKyBi
Lm1faW52TWFzcyAqIGIubV9mb3JjZS54KTsNCgkJYi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gc3Rl
cC5kdCAqIChncmF2aXR5LnkgKyBiLm1faW52TWFzcyAqIGIubV9mb3JjZS55KTsNCgkJYi5tX2Fu
Z3VsYXJWZWxvY2l0eSArPSBzdGVwLmR0ICogYi5tX2ludkkgKiBiLm1fdG9ycXVlOw0KCQliLm1f
bGluZWFyVmVsb2NpdHkuTXVsdGlwbHkoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNsYW1wKDEu
MCAtIHN0ZXAuZHQgKiBiLm1fbGluZWFyRGFtcGluZywgMC4wLCAxLjApKTsNCgkJYi5tX2FuZ3Vs
YXJWZWxvY2l0eSAqPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAoMS4wIC0gc3RlcC5k
dCAqIGIubV9hbmd1bGFyRGFtcGluZywgMC4wLCAxLjApOw0KCX0NCn07DQovKioNCiAqIEBwYXJh
bSB7IUJveDJELkR5bmFtaWNzLmIyVGltZVN0ZXB9IHN0ZXANCiAqIEBwcml2YXRlDQogKi8NCkJv
eDJELkR5bmFtaWNzLmIySXNsYW5kLnByb3RvdHlwZS5fU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRz
ID0gZnVuY3Rpb24oc3RlcCkgew0KCXRoaXMubV9jb250YWN0U29sdmVyLkluaXRWZWxvY2l0eUNv
bnN0cmFpbnRzKHN0ZXApOw0KCWZvciAodmFyIGpvaW50SW5pdElkeCA9IDA7IGpvaW50SW5pdElk
eCA8IHRoaXMubV9qb2ludHMubGVuZ3RoOyBqb2ludEluaXRJZHgrKykgew0KCQl0aGlzLm1fam9p
bnRzW2pvaW50SW5pdElkeF0uSW5pdFZlbG9jaXR5Q29uc3RyYWludHMoc3RlcCk7DQoJfQ0KCWZv
ciAodmFyIHZlbG9jaXR5SXRlcmF0aW9uQ250ID0gMDsgdmVsb2NpdHlJdGVyYXRpb25DbnQgPCBz
dGVwLnZlbG9jaXR5SXRlcmF0aW9uczsgdmVsb2NpdHlJdGVyYXRpb25DbnQrKykgew0KCQlmb3Ig
KHZhciBqb2ludFNvbHZlSWR4ID0gMDsgam9pbnRTb2x2ZUlkeCA8IHRoaXMubV9qb2ludHMubGVu
Z3RoOyBqb2ludFNvbHZlSWR4KyspIHsNCgkJCXRoaXMubV9qb2ludHNbam9pbnRTb2x2ZUlkeF0u
U29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN0ZXApOw0KCQl9DQoJCXRoaXMubV9jb250YWN0U29s
dmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpOw0KCX0NCglmb3IgKHZhciBqb2ludEZpbmFs
aXplSWR4ID0gMDsgam9pbnRGaW5hbGl6ZUlkeCA8IHRoaXMubV9qb2ludHMubGVuZ3RoOyBqb2lu
dEZpbmFsaXplSWR4KyspIHsNCgkJdGhpcy5tX2pvaW50c1tqb2ludEZpbmFsaXplSWR4XS5GaW5h
bGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTsNCgl9DQoJdGhpcy5tX2NvbnRhY3RTb2x2ZXIuRmlu
YWxpemVWZWxvY2l0eUNvbnN0cmFpbnRzKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5E
eW5hbWljcy5iMlRpbWVTdGVwfSBzdGVwDQogKiBAcHJpdmF0ZQ0KICovDQpCb3gyRC5EeW5hbWlj
cy5iMklzbGFuZC5wcm90b3R5cGUuX1NvbHZlQm9kaWVzID0gZnVuY3Rpb24oc3RlcCkgew0KCWZv
ciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX25vblN0YXRpY0JvZGllcy5sZW5ndGg7ICsraSkgew0K
CQl2YXIgYiA9IHRoaXMubV9ub25TdGF0aWNCb2RpZXNbaV07DQoJCXZhciB0cmFuc2xhdGlvblgg
PSBzdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lng7DQoJCXZhciB0cmFuc2xhdGlvblkgPSBz
dGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lnk7DQoJCWlmICgodHJhbnNsYXRpb25YICogdHJh
bnNsYXRpb25YICsgdHJhbnNsYXRpb25ZICogdHJhbnNsYXRpb25ZKSA+IEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uU3F1YXJlZCkgew0KCQkJYi5tX2xpbmVhclZlbG9j
aXR5Lk5vcm1hbGl6ZSgpOw0KCQkJYi5tX2xpbmVhclZlbG9jaXR5LnggKj0gQm94MkQuQ29tbW9u
LmIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb24gKiBzdGVwLmludl9kdDsNCgkJCWIubV9saW5l
YXJWZWxvY2l0eS55ICo9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9u
ICogc3RlcC5pbnZfZHQ7DQoJCX0NCgkJdmFyIHJvdGF0aW9uID0gc3RlcC5kdCAqIGIubV9hbmd1
bGFyVmVsb2NpdHk7DQoJCWlmIChyb3RhdGlvbiAqIHJvdGF0aW9uID4gQm94MkQuQ29tbW9uLmIy
U2V0dGluZ3MuYjJfbWF4Um90YXRpb25TcXVhcmVkKSB7DQoJCQlpZiAoYi5tX2FuZ3VsYXJWZWxv
Y2l0eSA8IDAuMCkgew0KCQkJCWIubV9hbmd1bGFyVmVsb2NpdHkgPSAtQm94MkQuQ29tbW9uLmIy
U2V0dGluZ3MuYjJfbWF4Um90YXRpb24gKiBzdGVwLmludl9kdDsNCgkJCX0gZWxzZSB7DQoJCQkJ
Yi5tX2FuZ3VsYXJWZWxvY2l0eSA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFJvdGF0
aW9uICogc3RlcC5pbnZfZHQ7DQoJCQl9DQoJCX0NCgkJYi5tX3N3ZWVwLmMwLlNldFYoYi5tX3N3
ZWVwLmMpOw0KCQliLm1fc3dlZXAuYTAgPSBiLm1fc3dlZXAuYTsNCgkJYi5tX3N3ZWVwLmMueCAr
PSBzdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lng7DQoJCWIubV9zd2VlcC5jLnkgKz0gc3Rl
cC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS55Ow0KCQliLm1fc3dlZXAuYSArPSBzdGVwLmR0ICog
Yi5tX2FuZ3VsYXJWZWxvY2l0eTsNCgkJYi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpOw0KCX0NCn07
DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyVGltZVN0ZXB9IHN0ZXANCiAqIEBw
cml2YXRlDQogKi8NCkJveDJELkR5bmFtaWNzLmIySXNsYW5kLnByb3RvdHlwZS5fU29sdmVQb3Np
dGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkgew0KCWZvciAodmFyIGkgPSAwOyBpIDwg
c3RlcC5wb3NpdGlvbkl0ZXJhdGlvbnM7IGkrKykgew0KCQl2YXIgY29udGFjdHNPa2F5ID0gdGhp
cy5tX2NvbnRhY3RTb2x2ZXIuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpOw0KCQl2YXIgam9pbnRzT2theSA9IHRydWU7
DQoJCWZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5tX2pvaW50cy5sZW5ndGg7IGorKykgew0KCQkJ
dmFyIGpvaW50T2theSA9IHRoaXMubV9qb2ludHNbal0uU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRz
KEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpOw0KCQkJam9pbnRz
T2theSA9IGpvaW50c09rYXkgJiYgam9pbnRPa2F5Ow0KCQl9DQoJCWlmIChjb250YWN0c09rYXkg
JiYgam9pbnRzT2theSkgew0KCQkJYnJlYWs7DQoJCX0NCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0g
eyFCb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwfSBzdGVwDQogKiBAcHJpdmF0ZQ0KICovDQpCb3gy
RC5EeW5hbWljcy5iMklzbGFuZC5wcm90b3R5cGUuX1NsZWVwSWZUaXJlZCA9IGZ1bmN0aW9uKHN0
ZXApIHsNCgl2YXIgbWluU2xlZXBUaW1lID0gTnVtYmVyLk1BWF9WQUxVRTsNCglmb3IgKHZhciBu
b25zdGF0aWNCb2R5SWR4ID0gMDsgbm9uc3RhdGljQm9keUlkeCA8IHRoaXMubV9ub25TdGF0aWNC
b2RpZXMubGVuZ3RoOyBub25zdGF0aWNCb2R5SWR4KyspIHsNCgkJdmFyIGIgPSB0aGlzLm1fbm9u
U3RhdGljQm9kaWVzW25vbnN0YXRpY0JvZHlJZHhdOw0KCQlpZiAoIWIubV9hbGxvd1NsZWVwIHx8
IE1hdGguYWJzKGIubV9hbmd1bGFyVmVsb2NpdHkpID4gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3Mu
YjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlIHx8IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5Eb3Qo
Yi5tX2xpbmVhclZlbG9jaXR5LCBiLm1fbGluZWFyVmVsb2NpdHkpID4gQm94MkQuQ29tbW9uLmIy
U2V0dGluZ3MuYjJfbGluZWFyU2xlZXBUb2xlcmFuY2VTcXVhcmVkKSB7DQoJCQliLm1fc2xlZXBU
aW1lID0gMC4wOw0KCQkJbWluU2xlZXBUaW1lID0gMC4wOw0KCQl9IGVsc2Ugew0KCQkJYi5tX3Ns
ZWVwVGltZSArPSBzdGVwLmR0Ow0KCQkJbWluU2xlZXBUaW1lID0gTWF0aC5taW4obWluU2xlZXBU
aW1lLCBiLm1fc2xlZXBUaW1lKTsNCgkJfQ0KCX0NCglpZiAobWluU2xlZXBUaW1lID49IEJveDJE
LkNvbW1vbi5iMlNldHRpbmdzLmIyX3RpbWVUb1NsZWVwKSB7DQoJCWZvciAodmFyIGJvZHlJZHgg
PSAwOyBib2R5SWR4IDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7IGJvZHlJZHgrKykgew0KCQkJdGhp
cy5tX2JvZGllc1tib2R5SWR4XS5TZXRBd2FrZShmYWxzZSk7DQoJCX0NCgl9DQp9Ow0KLyoqDQog
KiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwfSBzdWJTdGVwDQogKi8NCkJveDJE
LkR5bmFtaWNzLmIySXNsYW5kLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN1YlN0ZXAp
IHsNCgl2YXIgaSA9IDA7DQoJdmFyIGogPSAwOw0KCXRoaXMubV9jb250YWN0U29sdmVyLkluaXRp
YWxpemUoc3ViU3RlcCwgdGhpcy5tX2NvbnRhY3RzLCB0aGlzLm1fY29udGFjdHMubGVuZ3RoKTsN
Cgl2YXIgY29udGFjdFNvbHZlciA9IHRoaXMubV9jb250YWN0U29sdmVyOw0KCWZvciAoaSA9IDA7
IGkgPCB0aGlzLm1fam9pbnRzLmxlbmd0aDsgKytpKSB7DQoJCXRoaXMubV9qb2ludHNbaV0uSW5p
dFZlbG9jaXR5Q29uc3RyYWludHMoc3ViU3RlcCk7DQoJfQ0KCWZvciAoaSA9IDA7IGkgPCBzdWJT
dGVwLnZlbG9jaXR5SXRlcmF0aW9uczsgKytpKSB7DQoJCWNvbnRhY3RTb2x2ZXIuU29sdmVWZWxv
Y2l0eUNvbnN0cmFpbnRzKCk7DQoJCWZvciAoaiA9IDA7IGogPCB0aGlzLm1fam9pbnRzLmxlbmd0
aDsgKytqKSB7DQoJCQl0aGlzLm1fam9pbnRzW2pdLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhz
dWJTdGVwKTsNCgkJfQ0KCX0NCglmb3IgKGkgPSAwOyBpIDwgdGhpcy5tX25vblN0YXRpY0JvZGll
cy5sZW5ndGg7ICsraSkgew0KCQl2YXIgYiA9IHRoaXMubV9ub25TdGF0aWNCb2RpZXNbaV07DQoJ
CXZhciB0cmFuc2xhdGlvblggPSBzdWJTdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lng7DQoJ
CXZhciB0cmFuc2xhdGlvblkgPSBzdWJTdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lnk7DQoJ
CWlmICgodHJhbnNsYXRpb25YICogdHJhbnNsYXRpb25YICsgdHJhbnNsYXRpb25ZICogdHJhbnNs
YXRpb25ZKSA+IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uU3F1YXJl
ZCkgew0KCQkJYi5tX2xpbmVhclZlbG9jaXR5Lk5vcm1hbGl6ZSgpOw0KCQkJYi5tX2xpbmVhclZl
bG9jaXR5LnggKj0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb24gKiBz
dWJTdGVwLmludl9kdDsNCgkJCWIubV9saW5lYXJWZWxvY2l0eS55ICo9IEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogc3ViU3RlcC5pbnZfZHQ7DQoJCX0NCgkJdmFy
IHJvdGF0aW9uID0gc3ViU3RlcC5kdCAqIGIubV9hbmd1bGFyVmVsb2NpdHk7DQoJCWlmIChyb3Rh
dGlvbiAqIHJvdGF0aW9uID4gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb25T
cXVhcmVkKSB7DQoJCQlpZiAoYi5tX2FuZ3VsYXJWZWxvY2l0eSA8IDAuMCkgew0KCQkJCWIubV9h
bmd1bGFyVmVsb2NpdHkgPSAoLUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFJvdGF0aW9u
ICogc3ViU3RlcC5pbnZfZHQpOw0KCQkJfSBlbHNlIHsNCgkJCQliLm1fYW5ndWxhclZlbG9jaXR5
ID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb24gKiBzdWJTdGVwLmludl9k
dDsNCgkJCX0NCgkJfQ0KCQliLm1fc3dlZXAuYzAuU2V0VihiLm1fc3dlZXAuYyk7DQoJCWIubV9z
d2VlcC5hMCA9IGIubV9zd2VlcC5hOw0KCQliLm1fc3dlZXAuYy54ICs9IHN1YlN0ZXAuZHQgKiBi
Lm1fbGluZWFyVmVsb2NpdHkueDsNCgkJYi5tX3N3ZWVwLmMueSArPSBzdWJTdGVwLmR0ICogYi5t
X2xpbmVhclZlbG9jaXR5Lnk7DQoJCWIubV9zd2VlcC5hICs9IHN1YlN0ZXAuZHQgKiBiLm1fYW5n
dWxhclZlbG9jaXR5Ow0KCQliLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJfQ0KCXZhciBrX3Rv
aUJhdW1nYXJ0ZSA9IDAuNzU7DQoJZm9yIChpID0gMDsgaSA8IHN1YlN0ZXAucG9zaXRpb25JdGVy
YXRpb25zOyArK2kpIHsNCgkJdmFyIGNvbnRhY3RzT2theSA9IGNvbnRhY3RTb2x2ZXIuU29sdmVQ
b3NpdGlvbkNvbnN0cmFpbnRzKGtfdG9pQmF1bWdhcnRlKTsNCgkJdmFyIGpvaW50c09rYXkgPSB0
cnVlOw0KCQlmb3IgKGogPSAwOyBqIDwgdGhpcy5tX2pvaW50cy5sZW5ndGg7ICsraikgew0KCQkJ
dmFyIGpvaW50T2theSA9IHRoaXMubV9qb2ludHNbal0uU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRz
KEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpOw0KCQkJam9pbnRz
T2theSA9IGpvaW50c09rYXkgJiYgam9pbnRPa2F5Ow0KCQl9DQoJCWlmIChjb250YWN0c09rYXkg
JiYgam9pbnRzT2theSkgew0KCQkJYnJlYWs7DQoJCX0NCgl9DQoJdGhpcy5SZXBvcnQoY29udGFj
dFNvbHZlci5tX2NvbnN0cmFpbnRzKTsNCn07DQovKioNCiAqIEBwYXJhbSB7QXJyYXkuPCFCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50Pn0gY29uc3RyYWludHMNCiAq
Lw0KQm94MkQuRHluYW1pY3MuYjJJc2xhbmQucHJvdG90eXBlLlJlcG9ydCA9IGZ1bmN0aW9uKGNv
bnN0cmFpbnRzKSB7DQoJaWYgKHRoaXMubV9saXN0ZW5lciA9PSBudWxsKSB7DQoJCXJldHVybjsN
Cgl9DQoJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2kpIHsN
CgkJdmFyIGMgPSB0aGlzLm1fY29udGFjdHNbaV07DQoJCXZhciBjYyA9IGNvbnN0cmFpbnRzW2ld
Ow0KCQl2YXIgaW1wdWxzZSA9IG5ldyBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RJbXB1bHNlKCk7
DQoJCWZvciAodmFyIGogPSAwOyBqIDwgY2MucG9pbnRDb3VudDsgKytqKSB7DQoJCQlpbXB1bHNl
Lm5vcm1hbEltcHVsc2VzW2pdID0gY2MucG9pbnRzW2pdLm5vcm1hbEltcHVsc2U7DQoJCQlpbXB1
bHNlLnRhbmdlbnRJbXB1bHNlc1tqXSA9IGNjLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZTsNCgkJ
fQ0KCQl0aGlzLm1fbGlzdGVuZXIuUG9zdFNvbHZlKGMsIGltcHVsc2UpOw0KCX0NCn07DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyQm9keX0gYm9keQ0KICovDQpCb3gyRC5EeW5h
bWljcy5iMklzbGFuZC5wcm90b3R5cGUuQWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHsNCgl0aGlz
Lm1fYm9kaWVzLnB1c2goYm9keSk7DQoJaWYgKGJvZHkuR2V0VHlwZSgpICE9IEJveDJELkR5bmFt
aWNzLmIyQm9keURlZi5iMl9zdGF0aWNCb2R5KSB7DQoJCXRoaXMubV9ub25TdGF0aWNCb2RpZXMu
cHVzaChib2R5KTsNCgkJaWYgKGJvZHkuR2V0VHlwZSgpID09IEJveDJELkR5bmFtaWNzLmIyQm9k
eURlZi5iMl9keW5hbWljQm9keSkgew0KCQkJdGhpcy5tX2R5bmFtaWNCb2RpZXMucHVzaChib2R5
KTsNCgkJfQ0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3Rz
LmIyQ29udGFjdH0gY29udGFjdA0KICovDQpCb3gyRC5EeW5hbWljcy5iMklzbGFuZC5wcm90b3R5
cGUuQWRkQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHsNCgl0aGlzLm1fY29udGFjdHMucHVz
aChjb250YWN0KTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkpvaW50cy5i
MkpvaW50fSBqb2ludA0KICovDQpCb3gyRC5EeW5hbWljcy5iMklzbGFuZC5wcm90b3R5cGUuQWRk
Sm9pbnQgPSBmdW5jdGlvbihqb2ludCkgew0KCXRoaXMubV9qb2ludHMucHVzaChqb2ludCk7DQp9
Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gZHQNCiAqIEBwYXJhbSB7bnVtYmVyfSBkdFJhdGlv
DQogKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb25JdGVyYXRpb25zDQogKiBAcGFyYW0ge251bWJl
cn0gdmVsb2NpdHlJdGVyYXRpb25zDQogKiBAcGFyYW0ge2Jvb2xlYW59IHdhcm1TdGFydGluZw0K
ICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLmIyVGltZVN0ZXAgPSBmdW5jdGlv
bihkdCwgZHRSYXRpbywgcG9zaXRpb25JdGVyYXRpb25zLCB2ZWxvY2l0eUl0ZXJhdGlvbnMsIHdh
cm1TdGFydGluZykgew0KCS8qKg0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHtudW1iZXJ9DQoJICov
DQoJdGhpcy5kdCA9IGR0Ow0KCXZhciBpbnZEVCA9IDA7DQoJaWYgKGR0ID4gMCkgew0KCQlpbnZE
VCA9IDEgLyBkdDsNCgl9DQoJLyoqDQoJICogQGNvbnN0DQoJICogQHR5cGUge251bWJlcn0NCgkg
Ki8NCgl0aGlzLmludl9kdCA9IGludkRUOw0KCS8qKg0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHtu
dW1iZXJ9DQoJICovDQoJdGhpcy5kdFJhdGlvID0gZHRSYXRpbzsNCgkvKioNCgkgKiBAY29uc3QN
CgkgKiBAdHlwZSB7bnVtYmVyfQ0KCSAqLw0KCXRoaXMucG9zaXRpb25JdGVyYXRpb25zID0gcG9z
aXRpb25JdGVyYXRpb25zOw0KCS8qKg0KCSAqIEBjb25zdA0KCSAqIEB0eXBlIHtudW1iZXJ9DQoJ
ICovDQoJdGhpcy52ZWxvY2l0eUl0ZXJhdGlvbnMgPSB2ZWxvY2l0eUl0ZXJhdGlvbnM7DQoJLyoq
DQoJICogQGNvbnN0DQoJICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy53YXJtU3RhcnRp
bmcgPSB3YXJtU3RhcnRpbmc7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzJ9IGdyYXZpdHkNCiAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9TbGVlcA0KICogQGNvbnN0
cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQgPSBmdW5jdGlvbihncmF2aXR5LCBk
b1NsZWVwKSB7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNz
LmIyQ29udGFjdE1hbmFnZXJ9DQoJICovDQoJdGhpcy5tX2NvbnRhY3RNYW5hZ2VyID0gbmV3IEJv
eDJELkR5bmFtaWNzLmIyQ29udGFjdE1hbmFnZXIodGhpcyk7DQoJLyoqDQoJICogQHByaXZhdGUN
CgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlcn0NCgkg
Ki8NCgl0aGlzLm1fY29udGFjdFNvbHZlciA9IG5ldyBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5i
MkNvbnRhY3RTb2x2ZXIoKTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtib29sZWFu
fQ0KCSAqLw0KCXRoaXMubV9pc0xvY2tlZCA9IGZhbHNlOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJ
ICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy5tX25ld0ZpeHR1cmUgPSBmYWxzZTsNCgkv
KioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtCb3gyRC5EeW5hbWljcy5iMkRlc3RydWN0aW9u
TGlzdGVuZXJ9DQoJICovDQoJdGhpcy5tX2Rlc3RydWN0aW9uTGlzdGVuZXIgPSBudWxsOw0KCS8q
Kg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0fQ0K
CSAqLw0KCXRoaXMuYm9keUxpc3QgPSBuZXcgQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdCgpOw0K
CS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5Db250YWN0cy5i
MkNvbnRhY3RMaXN0fQ0KCSAqLw0KCSB0aGlzLmNvbnRhY3RMaXN0ID0gbmV3IEJveDJELkR5bmFt
aWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QoKTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0
eXBlIHtCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludH0NCgkgKi8NCgl0aGlzLm1fam9pbnRM
aXN0ID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1p
Y3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyTGlzdH0NCgkgKi8NCgl0aGlzLmNvbnRyb2xsZXJM
aXN0ID0gbmV3IEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckxpc3QoKTsN
CgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtudW1iZXJ9DQoJICovDQoJdGhpcy5tX2pv
aW50Q291bnQgPSAwOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge2Jvb2xlYW59DQoJ
ICovDQoJdGhpcy5tX3dhcm1TdGFydGluZyA9IHRydWU7DQoJLyoqDQoJICogQHByaXZhdGUNCgkg
KiBAdHlwZSB7Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLm1fY29udGludW91c1BoeXNpY3MgPSB0cnVl
Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy5t
X2FsbG93U2xlZXAgPSBkb1NsZWVwOw0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUgeyFC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9DQoJICovDQoJdGhpcy5tX2dyYXZpdHkgPSBncmF2aXR5
Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLm1f
aW52X2R0MCA9IDAuMDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHlu
YW1pY3MuYjJCb2R5fQ0KCSAqLw0KCXRoaXMubV9ncm91bmRCb2R5ID0gdGhpcy5DcmVhdGVCb2R5
KG5ldyBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYoKSk7DQp9Ow0KLyoqDQogKiBAY29uc3QNCiAq
IEB0eXBlIHtudW1iZXJ9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQuTUFYX1RPSSA9IDEu
MCAtIDEwMC4wICogTnVtYmVyLk1JTl9WQUxVRTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHlu
YW1pY3MuYjJEZXN0cnVjdGlvbkxpc3RlbmVyfSBsaXN0ZW5lcg0KICovDQpCb3gyRC5EeW5hbWlj
cy5iMldvcmxkLnByb3RvdHlwZS5TZXREZXN0cnVjdGlvbkxpc3RlbmVyID0gZnVuY3Rpb24obGlz
dGVuZXIpIHsNCgl0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lciA9IGxpc3RlbmVyOw0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJDb250YWN0RmlsdGVyfSBmaWx0ZXINCiAq
Lw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5cGUuU2V0Q29udGFjdEZpbHRlciA9IGZ1
bmN0aW9uKGZpbHRlcikgew0KCXRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RGaWx0ZXIg
PSBmaWx0ZXI7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RM
aXN0ZW5lcn0gbGlzdGVuZXINCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5cGUu
U2V0Q29udGFjdExpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHsNCgl0aGlzLm1fY29udGFj
dE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIgPSBsaXN0ZW5lcjsNCn07DQovKioNCiAqIEBwYXJh
bSB7IUJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlQnJvYWRQaGFzZX0gYnJvYWRQaGFzZQ0K
ICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5TZXRCcm9hZFBoYXNlID0gZnVu
Y3Rpb24oYnJvYWRQaGFzZSkgew0KCXZhciBvbGRCcm9hZFBoYXNlID0gdGhpcy5tX2NvbnRhY3RN
YW5hZ2VyLm1fYnJvYWRQaGFzZTsNCgl0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNl
ID0gYnJvYWRQaGFzZTsNCglmb3IgKHZhciBub2RlID0gdGhpcy5ib2R5TGlzdC5HZXRGaXJzdE5v
ZGUoQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5hbGxCb2RpZXMpOyBub2RlOyBub2Rl
ID0gbm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCWZvciAodmFyIGZpeHR1cmVOb2RlID0gbm9kZS5i
b2R5LkdldEZpeHR1cmVMaXN0KCkuR2V0Rmlyc3ROb2RlKCk7IGZpeHR1cmVOb2RlOyBmaXh0dXJl
Tm9kZSA9IGZpeHR1cmVOb2RlLkdldE5leHROb2RlKCkpIHsNCgkJCXZhciBmID0gZml4dHVyZU5v
ZGUuZml4dHVyZTsNCgkJCWYubV9wcm94eSA9IGJyb2FkUGhhc2UuQ3JlYXRlUHJveHkob2xkQnJv
YWRQaGFzZS5HZXRGYXRBQUJCKGYubV9wcm94eSksIGYpOw0KCQl9DQoJfQ0KfTsNCi8qKg0KICog
QHJldHVybiB7bnVtYmVyfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5H
ZXRQcm94eUNvdW50ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9jb250YWN0TWFuYWdl
ci5tX2Jyb2FkUGhhc2UuR2V0UHJveHlDb3VudCgpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuRHluYW1pY3MuYjJCb2R5RGVmfSBkZWYNCiAqIEByZXR1cm4geyFCb3gyRC5EeW5hbWljcy5i
MkJvZHl9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkNyZWF0ZUJvZHkg
PSBmdW5jdGlvbihkZWYpIHsNCjsNCgl2YXIgYiA9IG5ldyBCb3gyRC5EeW5hbWljcy5iMkJvZHko
ZGVmLCB0aGlzKTsNCgl0aGlzLmJvZHlMaXN0LkFkZEJvZHkoYik7DQoJcmV0dXJuIGI7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkJvZHl9IGINCiAqLw0KQm94MkQuRHlu
YW1pY3MuYjJXb3JsZC5wcm90b3R5cGUuRGVzdHJveUJvZHkgPSBmdW5jdGlvbihiKSB7DQo7DQoJ
dmFyIGpuID0gYi5tX2pvaW50TGlzdDsNCgl3aGlsZSAoam4pIHsNCgkJdmFyIGpuMCA9IGpuOw0K
CQlqbiA9IGpuLm5leHQ7DQoJCWlmICh0aGlzLm1fZGVzdHJ1Y3Rpb25MaXN0ZW5lcikgew0KCQkJ
dGhpcy5tX2Rlc3RydWN0aW9uTGlzdGVuZXIuU2F5R29vZGJ5ZUpvaW50KGpuMC5qb2ludCk7DQoJ
CX0NCgkJdGhpcy5EZXN0cm95Sm9pbnQoam4wLmpvaW50KTsNCgl9DQoJZm9yICh2YXIgbm9kZSA9
IGIuR2V0Q29udHJvbGxlckxpc3QoKS5HZXRGaXJzdE5vZGUoKTsgbm9kZTsgbm9kZSA9IG5vZGUu
R2V0TmV4dE5vZGUoKSkgew0KCQlub2RlLmNvbnRyb2xsZXIuUmVtb3ZlQm9keShiKTsNCgl9DQoJ
Zm9yICh2YXIgY29udGFjdE5vZGUgPSBiLmNvbnRhY3RMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5E
eW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LlRZUEVTLmFsbENvbnRhY3RzKTsgY29udGFj
dE5vZGU7IGNvbnRhY3ROb2RlID0gY29udGFjdE5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQl0aGlz
Lm1fY29udGFjdE1hbmFnZXIuRGVzdHJveShjb250YWN0Tm9kZS5jb250YWN0KTsNCgl9DQoJZm9y
ICh2YXIgZml4dHVyZU5vZGUgPSBiLkdldEZpeHR1cmVMaXN0KCkuR2V0Rmlyc3ROb2RlKCk7IGZp
eHR1cmVOb2RlOyBmaXh0dXJlTm9kZSA9IGZpeHR1cmVOb2RlLkdldE5leHROb2RlKCkpIHsNCgkJ
aWYgKHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyKSB7DQoJCQl0aGlzLm1fZGVzdHJ1Y3Rpb25M
aXN0ZW5lci5TYXlHb29kYnllRml4dHVyZShmaXh0dXJlTm9kZS5maXh0dXJlKTsNCgkJfQ0KCQli
LkRlc3Ryb3lGaXh0dXJlKGZpeHR1cmVOb2RlLmZpeHR1cmUpOw0KCX0NCgliLkRlc3Ryb3koKTsN
Cgl0aGlzLmJvZHlMaXN0LlJlbW92ZUJvZHkoYik7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZn0gZGVmDQogKiBAcmV0dXJuIHshQm94MkQuRHlu
YW1pY3MuSm9pbnRzLmIySm9pbnR9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90
eXBlLkNyZWF0ZUpvaW50ID0gZnVuY3Rpb24oZGVmKSB7DQoJdmFyIGogPSBCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJKb2ludC5DcmVhdGUoZGVmKTsNCglqLm1fcHJldiA9IG51bGw7DQoJai5tX25l
eHQgPSB0aGlzLm1fam9pbnRMaXN0Ow0KCWlmICh0aGlzLm1fam9pbnRMaXN0KSB7DQoJCXRoaXMu
bV9qb2ludExpc3QubV9wcmV2ID0gajsNCgl9DQoJdGhpcy5tX2pvaW50TGlzdCA9IGo7DQoJdGhp
cy5tX2pvaW50Q291bnQrKzsNCglqLm1fZWRnZUEuam9pbnQgPSBqOw0KCWoubV9lZGdlQS5vdGhl
ciA9IGoubV9ib2R5QjsNCglqLm1fZWRnZUEucHJldiA9IG51bGw7DQoJai5tX2VkZ2VBLm5leHQg
PSBqLm1fYm9keUEubV9qb2ludExpc3Q7DQoJaWYgKGoubV9ib2R5QS5tX2pvaW50TGlzdCkgew0K
CQlqLm1fYm9keUEubV9qb2ludExpc3QucHJldiA9IGoubV9lZGdlQTsNCgl9DQoJai5tX2JvZHlB
Lm1fam9pbnRMaXN0ID0gai5tX2VkZ2VBOw0KCWoubV9lZGdlQi5qb2ludCA9IGo7DQoJai5tX2Vk
Z2VCLm90aGVyID0gai5tX2JvZHlBOw0KCWoubV9lZGdlQi5wcmV2ID0gbnVsbDsNCglqLm1fZWRn
ZUIubmV4dCA9IGoubV9ib2R5Qi5tX2pvaW50TGlzdDsNCglpZiAoai5tX2JvZHlCLm1fam9pbnRM
aXN0KSB7DQoJCWoubV9ib2R5Qi5tX2pvaW50TGlzdC5wcmV2ID0gai5tX2VkZ2VCOw0KCX0NCglq
Lm1fYm9keUIubV9qb2ludExpc3QgPSBqLm1fZWRnZUI7DQoJdmFyIGJvZHlBID0gZGVmLmJvZHlB
Ow0KCXZhciBib2R5QiA9IGRlZi5ib2R5QjsNCglpZiAoIWRlZi5jb2xsaWRlQ29ubmVjdGVkKSB7
DQoJCWZvciAodmFyIGNvbnRhY3ROb2RlID0gYm9keUIuY29udGFjdExpc3QuR2V0Rmlyc3ROb2Rl
KEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMuYWxsQ29udGFjdHMp
OyBjb250YWN0Tm9kZTsgY29udGFjdE5vZGUgPSBjb250YWN0Tm9kZS5HZXROZXh0Tm9kZSgpKSB7
DQoJCQlpZiAoY29udGFjdE5vZGUuY29udGFjdC5HZXRPdGhlcihib2R5QikgPT0gYm9keUEpIHsN
CgkJCQljb250YWN0Tm9kZS5jb250YWN0LkZsYWdGb3JGaWx0ZXJpbmcoKTsNCgkJCX0NCgkJfQ0K
CX0NCglyZXR1cm4gajsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50fSBqDQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkRlc3Ry
b3lKb2ludCA9IGZ1bmN0aW9uKGopIHsNCgl2YXIgY29sbGlkZUNvbm5lY3RlZCA9IGoubV9jb2xs
aWRlQ29ubmVjdGVkOw0KCWlmIChqLm1fcHJldikgew0KCQlqLm1fcHJldi5tX25leHQgPSBqLm1f
bmV4dDsNCgl9DQoJaWYgKGoubV9uZXh0KSB7DQoJCWoubV9uZXh0Lm1fcHJldiA9IGoubV9wcmV2
Ow0KCX0NCglpZiAoaiA9PSB0aGlzLm1fam9pbnRMaXN0KSB7DQoJCXRoaXMubV9qb2ludExpc3Qg
PSBqLm1fbmV4dDsNCgl9DQoJdmFyIGJvZHlBID0gai5tX2JvZHlBOw0KCXZhciBib2R5QiA9IGou
bV9ib2R5QjsNCglib2R5QS5TZXRBd2FrZSh0cnVlKTsNCglib2R5Qi5TZXRBd2FrZSh0cnVlKTsN
CglpZiAoai5tX2VkZ2VBLnByZXYpIHsNCgkJai5tX2VkZ2VBLnByZXYubmV4dCA9IGoubV9lZGdl
QS5uZXh0Ow0KCX0NCglpZiAoai5tX2VkZ2VBLm5leHQpIHsNCgkJai5tX2VkZ2VBLm5leHQucHJl
diA9IGoubV9lZGdlQS5wcmV2Ow0KCX0NCglpZiAoai5tX2VkZ2VBID09IGJvZHlBLm1fam9pbnRM
aXN0KSB7DQoJCWJvZHlBLm1fam9pbnRMaXN0ID0gai5tX2VkZ2VBLm5leHQ7DQoJfQ0KCWoubV9l
ZGdlQS5wcmV2ID0gbnVsbDsNCglqLm1fZWRnZUEubmV4dCA9IG51bGw7DQoJaWYgKGoubV9lZGdl
Qi5wcmV2KSB7DQoJCWoubV9lZGdlQi5wcmV2Lm5leHQgPSBqLm1fZWRnZUIubmV4dDsNCgl9DQoJ
aWYgKGoubV9lZGdlQi5uZXh0KSB7DQoJCWoubV9lZGdlQi5uZXh0LnByZXYgPSBqLm1fZWRnZUIu
cHJldjsNCgl9DQoJaWYgKGoubV9lZGdlQiA9PSBib2R5Qi5tX2pvaW50TGlzdCkgew0KCQlib2R5
Qi5tX2pvaW50TGlzdCA9IGoubV9lZGdlQi5uZXh0Ow0KCX0NCglqLm1fZWRnZUIucHJldiA9IG51
bGw7DQoJai5tX2VkZ2VCLm5leHQgPSBudWxsOw0KCXRoaXMubV9qb2ludENvdW50LS07DQoJaWYg
KCFjb2xsaWRlQ29ubmVjdGVkKSB7DQoJCWZvciAodmFyIGNvbnRhY3ROb2RlID0gYm9keUIuY29u
dGFjdExpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExp
c3QuVFlQRVMuYWxsQ29udGFjdHMpOyBjb250YWN0Tm9kZTsgY29udGFjdE5vZGUgPSBjb250YWN0
Tm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCQlpZiAoY29udGFjdE5vZGUuY29udGFjdC5HZXRPdGhl
cihib2R5QikgPT0gYm9keUEpIHsNCgkJCQljb250YWN0Tm9kZS5jb250YWN0LkZsYWdGb3JGaWx0
ZXJpbmcoKTsNCgkJCX0NCgkJfQ0KCX0NCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5EeW5h
bWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0fQ0KICovDQpCb3gyRC5EeW5hbWljcy5i
MldvcmxkLnByb3RvdHlwZS5HZXRDb250cm9sbGVyTGlzdCA9IGZ1bmN0aW9uKCkgew0KCXJldHVy
biB0aGlzLmNvbnRyb2xsZXJMaXN0Ow0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1p
Y3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyfSBjDQogKiBAcmV0dXJuIHshQm94MkQuRHluYW1p
Y3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyfQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxk
LnByb3RvdHlwZS5BZGRDb250cm9sbGVyID0gZnVuY3Rpb24oYykgew0KCWlmIChjLm1fd29ybGQg
IT09IG51bGwgJiYgYy5tX3dvcmxkICE9IHRoaXMpIHsNCgkJdGhyb3cgbmV3IEVycm9yKCJDb250
cm9sbGVyIGNhbiBvbmx5IGJlIGEgbWVtYmVyIG9mIG9uZSB3b3JsZCIpOw0KCX0NCgl0aGlzLmNv
bnRyb2xsZXJMaXN0LkFkZENvbnRyb2xsZXIoYyk7DQoJYy5tX3dvcmxkID0gdGhpczsNCglyZXR1
cm4gYzsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIy
Q29udHJvbGxlcn0gYw0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5SZW1v
dmVDb250cm9sbGVyID0gZnVuY3Rpb24oYykgew0KCXRoaXMuY29udHJvbGxlckxpc3QuUmVtb3Zl
Q29udHJvbGxlcihjKTsNCgljLm1fd29ybGQgPSBudWxsOw0KCWMuQ2xlYXIoKTsNCn07DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcn0gY29u
dHJvbGxlcg0KICogQHJldHVybiB7IUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJv
bGxlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5cGUuQ3JlYXRlQ29udHJv
bGxlciA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHsNCglyZXR1cm4gdGhpcy5BZGRDb250cm9sbGVy
KGNvbnRyb2xsZXIpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udHJv
bGxlcnMuYjJDb250cm9sbGVyfSBjb250cm9sbGVyDQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29y
bGQucHJvdG90eXBlLkRlc3Ryb3lDb250cm9sbGVyID0gZnVuY3Rpb24oY29udHJvbGxlcikgew0K
CXRoaXMuUmVtb3ZlQ29udHJvbGxlcihjb250cm9sbGVyKTsNCn07DQovKioNCiAqIEBwYXJhbSB7
Ym9vbGVhbn0gZmxhZw0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5TZXRX
YXJtU3RhcnRpbmcgPSBmdW5jdGlvbihmbGFnKSB7DQoJdGhpcy5tX3dhcm1TdGFydGluZyA9IGZs
YWc7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWcNCiAqLw0KQm94MkQuRHluYW1p
Y3MuYjJXb3JsZC5wcm90b3R5cGUuU2V0Q29udGludW91c1BoeXNpY3MgPSBmdW5jdGlvbihmbGFn
KSB7DQoJdGhpcy5tX2NvbnRpbnVvdXNQaHlzaWNzID0gZmxhZzsNCn07DQovKioNCiAqIEByZXR1
cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5cGUuR2V0Qm9k
eUNvdW50ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuYm9keUxpc3QuR2V0Qm9keUNvdW50
KCk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkR5bmFtaWNzLmIy
V29ybGQucHJvdG90eXBlLkdldEpvaW50Q291bnQgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhp
cy5tX2pvaW50Q291bnQ7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkdldENvbnRhY3RDb3VudCA9IGZ1bmN0aW9uKCkg
ew0KCXJldHVybiB0aGlzLmNvbnRhY3RMaXN0LkdldENvbnRhY3RDb3VudCgpOw0KfTsNCi8qKg0K
ICogQHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBncmF2aXR5DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLlNldEdyYXZpdHkgPSBmdW5jdGlvbihncmF2aXR5
KSB7DQoJdGhpcy5tX2dyYXZpdHkgPSBncmF2aXR5Ow0KfTsNCi8qKg0KICogQHJldHVybiB7IUJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90
b3R5cGUuR2V0R3Jhdml0eSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fZ3Jhdml0eTsN
Cn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5EeW5hbWljcy5iMkJvZHl9DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkdldEdyb3VuZEJvZHkgPSBmdW5jdGlvbigpIHsN
CglyZXR1cm4gdGhpcy5tX2dyb3VuZEJvZHk7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0g
ZHQNCiAqIEBwYXJhbSB7bnVtYmVyfSB2ZWxvY2l0eUl0ZXJhdGlvbnMNCiAqIEBwYXJhbSB7bnVt
YmVyfSBwb3NpdGlvbkl0ZXJhdGlvbnMNCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90
b3R5cGUuU3RlcCA9IGZ1bmN0aW9uKGR0LCB2ZWxvY2l0eUl0ZXJhdGlvbnMsIHBvc2l0aW9uSXRl
cmF0aW9ucykgew0KCWlmICh0aGlzLm1fbmV3Rml4dHVyZSkgew0KCQl0aGlzLm1fY29udGFjdE1h
bmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7DQoJCXRoaXMubV9uZXdGaXh0dXJlID0gZmFsc2U7DQoJ
fQ0KCXRoaXMubV9pc0xvY2tlZCA9IHRydWU7DQoJdmFyIHN0ZXAgPSBuZXcgQm94MkQuRHluYW1p
Y3MuYjJUaW1lU3RlcChkdCwgdGhpcy5tX2ludl9kdDAgKiBkdCAvKiBkdFJhdGlvICovLCB2ZWxv
Y2l0eUl0ZXJhdGlvbnMsIHBvc2l0aW9uSXRlcmF0aW9ucywgdGhpcy5tX3dhcm1TdGFydGluZyk7
DQoJdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLkNvbGxpZGUoKTsNCglpZiAoc3RlcC5kdCA+IDAuMCkg
ew0KCQl0aGlzLlNvbHZlKHN0ZXApOw0KCQlpZiAodGhpcy5tX2NvbnRpbnVvdXNQaHlzaWNzKSB7
DQoJCQl0aGlzLlNvbHZlVE9JKHN0ZXApOw0KCQl9DQoJCXRoaXMubV9pbnZfZHQwID0gc3RlcC5p
bnZfZHQ7DQoJfQ0KCXRoaXMubV9pc0xvY2tlZCA9IGZhbHNlOw0KfTsNCkJveDJELkR5bmFtaWNz
LmIyV29ybGQucHJvdG90eXBlLkNsZWFyRm9yY2VzID0gZnVuY3Rpb24oKSB7DQoJZm9yICh2YXIg
bm9kZSA9IHRoaXMuYm9keUxpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5bmFtaWNzLmIyQm9keUxp
c3QuVFlQRVMuZHluYW1pY0JvZGllcyk7IG5vZGU7IG5vZGUgPSBub2RlLkdldE5leHROb2RlKCkp
IHsNCgkJbm9kZS5ib2R5Lm1fZm9yY2UuU2V0WmVybygpOw0KCQlub2RlLmJvZHkubV90b3JxdWUg
PSAwLjA7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHtmdW5jdGlvbighQm94MkQuRHluYW1pY3Mu
YjJGaXh0dXJlKTpib29sZWFufSBjYWxsYmFjaw0KICogQHBhcmFtIHshQm94MkQuQ29sbGlzaW9u
LmIyQUFCQn0gYWFiYg0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5RdWVy
eUFBQkIgPSBmdW5jdGlvbihjYWxsYmFjaywgYWFiYikgew0KCXRoaXMubV9jb250YWN0TWFuYWdl
ci5tX2Jyb2FkUGhhc2UuUXVlcnkoY2FsbGJhY2ssIGFhYmIpOw0KfTsNCi8qKg0KICogQHBhcmFt
IHtmdW5jdGlvbighQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlKTogYm9vbGVhbn0gY2FsbGJhY2sN
CiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gcA0KICovDQpCb3gyRC5EeW5h
bWljcy5iMldvcmxkLnByb3RvdHlwZS5RdWVyeVBvaW50ID0gZnVuY3Rpb24oY2FsbGJhY2ssIHAp
IHsNCgkvKiogQHR5cGUge2Z1bmN0aW9uKCFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUpOiBib29s
ZWFufSAqLw0KCXZhciBXb3JsZFF1ZXJ5V3JhcHBlciA9IGZ1bmN0aW9uKGZpeHR1cmUpIHsNCgkJ
aWYgKGZpeHR1cmUuVGVzdFBvaW50KHApKSB7DQoJCQlyZXR1cm4gY2FsbGJhY2soZml4dHVyZSk7
DQoJCX0gZWxzZSB7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCX07DQoJdmFyIGFhYmIgPSBCb3gy
RC5Db2xsaXNpb24uYjJBQUJCLkdldCgpOw0KCWFhYmIubG93ZXJCb3VuZF8uU2V0KHAueCAtIEJv
eDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIHAueSAtIEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX2xpbmVhclNsb3ApOw0KCWFhYmIudXBwZXJCb3VuZF8uU2V0KHAueCArIEJv
eDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIHAueSArIEJveDJELkNvbW1vbi5i
MlNldHRpbmdzLmIyX2xpbmVhclNsb3ApOw0KCXRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2Fk
UGhhc2UuUXVlcnkoV29ybGRRdWVyeVdyYXBwZXIsIGFhYmIpOw0KCUJveDJELkNvbGxpc2lvbi5i
MkFBQkIuRnJlZShhYWJiKTsNCn07DQovKioNCiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUJveDJELkR5
bmFtaWNzLmIyRml4dHVyZSwgIUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMiwgIUJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMiwgbnVtYmVyKTogbnVtYmVyfSBjYWxsYmFjaw0KICogQHBhcmFtIHshQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwb2ludDENCiAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMn0gcG9pbnQyDQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBl
LlJheUNhc3QgPSBmdW5jdGlvbihjYWxsYmFjaywgcG9pbnQxLCBwb2ludDIpIHsNCgl2YXIgYnJv
YWRQaGFzZSA9IHRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7DQoJdmFyIG91dHB1
dCA9IG5ldyBCb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0T3V0cHV0KCk7DQoJLyoqDQoJICogQHBh
cmFtIHshQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdElucHV0fSBpbnB1dA0KCSAqIEBwYXJhbSB7
IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZQ0KCSAqLw0KCXZhciBSYXlDYXN0V3Jh
cHBlciA9IGZ1bmN0aW9uKGlucHV0LCBmaXh0dXJlKSB7DQoJCQl2YXIgaGl0ID0gZml4dHVyZS5S
YXlDYXN0KG91dHB1dCwgaW5wdXQpOw0KCQkJaWYgKGhpdCkgew0KCQkJCXZhciBmbGlwRnJhYyA9
IDEgLSBvdXRwdXQuZnJhY3Rpb247DQoJCQkJdmFyIHBvaW50ID0gQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyLkdldChmbGlwRnJhYyAqIHBvaW50MS54ICsgb3V0cHV0LmZyYWN0aW9uICogcG9pbnQy
LngsIGZsaXBGcmFjICogcG9pbnQxLnkgKyBvdXRwdXQuZnJhY3Rpb24gKiBwb2ludDIueSk7DQoJ
CQkJdmFyIHJldFZhbCA9IGNhbGxiYWNrKGZpeHR1cmUsIHBvaW50LCBvdXRwdXQubm9ybWFsLCBv
dXRwdXQuZnJhY3Rpb24pOw0KCQkJCUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5GcmVlKHBvaW50
KTsNCgkJCQlyZXR1cm4gcmV0VmFsOw0KCQkJfSBlbHNlIHsNCgkJCQlyZXR1cm4gaW5wdXQubWF4
RnJhY3Rpb247DQoJCQl9DQoJCX07DQoJdmFyIGlucHV0ID0gbmV3IEJveDJELkNvbGxpc2lvbi5i
MlJheUNhc3RJbnB1dChwb2ludDEsIHBvaW50MiwgMSAvKiBtYXhGcmFjdGlvbiAqLyApOw0KCWJy
b2FkUGhhc2UuUmF5Q2FzdChSYXlDYXN0V3JhcHBlciwgaW5wdXQpOw0KfTsNCi8qKg0KICogQHBh
cmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwb2ludDENCiAqIEBwYXJhbSB7IUJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMn0gcG9pbnQyDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5i
MkZpeHR1cmV9DQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLlJheUNhc3RP
bmUgPSBmdW5jdGlvbihwb2ludDEsIHBvaW50Mikgew0KCXZhciByZXN1bHQgPSBudWxsOw0KCS8q
Kg0KCSAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZQ0KCSAqIEBw
YXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gcG9pbnQNCgkgKiBAcGFyYW0geyFCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzJ9IG5vcm1hbA0KCSAqIEBwYXJhbSB7bnVtYmVyfSBmcmFjdGlv
bg0KCSAqIEByZXR1cm4ge251bWJlcn0NCgkgKi8NCgl2YXIgUmF5Q2FzdE9uZVdyYXBwZXIgPSBm
dW5jdGlvbihmaXh0dXJlLCBwb2ludCwgbm9ybWFsLCBmcmFjdGlvbikgew0KCQlyZXN1bHQgPSBm
aXh0dXJlOw0KCQlyZXR1cm4gZnJhY3Rpb247DQoJfTsNCgl0aGlzLlJheUNhc3QoUmF5Q2FzdE9u
ZVdyYXBwZXIsIHBvaW50MSwgcG9pbnQyKTsNCglyZXR1cm4gcmVzdWx0Ow0KfTsNCi8qKg0KICog
QHBhcmFtIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfSBwb2ludDENCiAqIEBwYXJhbSB7IUJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gcG9pbnQyDQogKiBAcmV0dXJuIHtBcnJheS48Qm94MkQu
RHluYW1pY3MuYjJGaXh0dXJlPn0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5
cGUuUmF5Q2FzdEFsbCA9IGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyKSB7DQoJdmFyIHJlc3VsdCA9
IFtdOw0KCS8qKg0KCSAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVy
ZQ0KCSAqIEBwYXJhbSB7IUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMn0gcG9pbnQNCgkgKiBAcGFy
YW0geyFCb3gyRC5Db21tb24uTWF0aC5iMlZlYzJ9IG5vcm1hbA0KCSAqIEBwYXJhbSB7bnVtYmVy
fSBmcmFjdGlvbg0KCSAqIEByZXR1cm4ge251bWJlcn0NCgkgKi8NCgl2YXIgUmF5Q2FzdEFsbFdy
YXBwZXIgPSBmdW5jdGlvbihmaXh0dXJlLCBwb2ludCwgbm9ybWFsLCBmcmFjdGlvbikgew0KCQly
ZXN1bHQucHVzaChmaXh0dXJlKTsNCgkJcmV0dXJuIDE7DQoJfTsNCgl0aGlzLlJheUNhc3QoUmF5
Q2FzdEFsbFdyYXBwZXIsIHBvaW50MSwgcG9pbnQyKTsNCglyZXR1cm4gcmVzdWx0Ow0KfTsNCi8q
Kg0KICogQHJldHVybiB7IUJveDJELkR5bmFtaWNzLmIyQm9keUxpc3R9DQogKi8NCkJveDJELkR5
bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkdldEJvZHlMaXN0ID0gZnVuY3Rpb24oKSB7DQoJcmV0
dXJuIHRoaXMuYm9keUxpc3Q7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJKb2ludH0NCiAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5wcm90b3R5cGUuR2V0
Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7DQp9Ow0K
LyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3R9DQogKi8N
CkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLkdldENvbnRhY3RMaXN0ID0gZnVuY3Rp
b24oKSB7DQoJcmV0dXJuIHRoaXMuY29udGFjdExpc3Q7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHti
b29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5Jc0xvY2tlZCA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1faXNMb2NrZWQ7DQp9Ow0KdmFyIGIyc29sdmVh
cnJheSA9IFtdOw0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwfSBz
dGVwDQogKi8NCkJveDJELkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLlNvbHZlID0gZnVuY3Rp
b24oc3RlcCkgew0KCWZvciAodmFyIGNvbnRyb2xsZXJOb2RlID0gdGhpcy5jb250cm9sbGVyTGlz
dC5HZXRGaXJzdE5vZGUoKTsgY29udHJvbGxlck5vZGU7IGNvbnRyb2xsZXJOb2RlID0gY29udHJv
bGxlck5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQljb250cm9sbGVyTm9kZS5jb250cm9sbGVyLlN0
ZXAoc3RlcCk7DQoJfQ0KCXZhciBtX2lzbGFuZCA9IG5ldyBCb3gyRC5EeW5hbWljcy5iMklzbGFu
ZCh0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIsIHRoaXMubV9jb250YWN0
U29sdmVyKTsNCglmb3IgKHZhciBib2R5Tm9kZSA9IHRoaXMuYm9keUxpc3QuR2V0Rmlyc3ROb2Rl
KEJveDJELkR5bmFtaWNzLmIyQm9keUxpc3QuVFlQRVMuYWxsQm9kaWVzKTsgYm9keU5vZGU7IGJv
ZHlOb2RlID0gYm9keU5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQlib2R5Tm9kZS5ib2R5Lm1faXNs
YW5kRmxhZyA9IGZhbHNlOw0KCX0NCglmb3IgKHZhciBjb250YWN0Tm9kZSA9IHRoaXMuY29udGFj
dExpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3Qu
VFlQRVMuYWxsQ29udGFjdHMpOyBjb250YWN0Tm9kZTsgY29udGFjdE5vZGUgPSBjb250YWN0Tm9k
ZS5HZXROZXh0Tm9kZSgpKSB7DQoJCWNvbnRhY3ROb2RlLmNvbnRhY3QubV9pc2xhbmRGbGFnID0g
ZmFsc2U7DQoJfQ0KCWZvciAodmFyIGogPSB0aGlzLm1fam9pbnRMaXN0OyBqOyBqID0gai5tX25l
eHQpIHsNCgkJai5tX2lzbGFuZEZsYWcgPSBmYWxzZTsNCgl9DQoJZm9yICh2YXIgYm9keU5vZGUg
PSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0LlRZ
UEVTLm5vblN0YXRpY0FjdGl2ZUF3YWtlQm9kaWVzKTsgYm9keU5vZGU7IGJvZHlOb2RlID0gYm9k
eU5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQl2YXIgc2VlZCA9IGJvZHlOb2RlLmJvZHk7DQoJCWlm
IChzZWVkLm1faXNsYW5kRmxhZykgew0KCQkJY29udGludWU7DQoJCX0NCgkJbV9pc2xhbmQuQ2xl
YXIoKTsNCgkJYjJzb2x2ZWFycmF5Lmxlbmd0aCA9IDA7DQoJCXZhciBzdGFjayA9IGIyc29sdmVh
cnJheTsNCgkJc3RhY2sucHVzaChzZWVkKTsNCgkJc2VlZC5tX2lzbGFuZEZsYWcgPSB0cnVlOw0K
CQl3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkgew0KCQkJdmFyIGIgPSBzdGFjay5wb3AoKTsNCgkJ
CW1faXNsYW5kLkFkZEJvZHkoYik7DQoJCQlpZiAoIWIuSXNBd2FrZSgpKSB7DQoJCQkJYi5TZXRB
d2FrZSh0cnVlKTsNCgkJCX0NCgkJCWlmIChiLkdldFR5cGUoKSA9PSBCb3gyRC5EeW5hbWljcy5i
MkJvZHlEZWYuYjJfc3RhdGljQm9keSkgew0KCQkJCWNvbnRpbnVlOw0KCQkJfQ0KCQkJZm9yICh2
YXIgY29udGFjdE5vZGUgPSBiLmNvbnRhY3RMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LlRZUEVTLm5vblNlbnNvckVuYWJsZWRUb3VjaGluZ0Nv
bnRhY3RzKTsgY29udGFjdE5vZGU7IGNvbnRhY3ROb2RlID0gY29udGFjdE5vZGUuR2V0TmV4dE5v
ZGUoKSkgew0KCQkJCXZhciBjb250YWN0ID0gY29udGFjdE5vZGUuY29udGFjdDsNCgkJCQlpZiAo
Y29udGFjdC5tX2lzbGFuZEZsYWcpIHsNCgkJCQkJY29udGludWU7DQoJCQkJfQ0KCQkJCW1faXNs
YW5kLkFkZENvbnRhY3QoY29udGFjdCk7DQoJCQkJY29udGFjdC5tX2lzbGFuZEZsYWcgPSB0cnVl
Ow0KCQkJCXZhciBvdGhlciA9IGNvbnRhY3QuR2V0T3RoZXIoYik7DQoJCQkJaWYgKG90aGVyLm1f
aXNsYW5kRmxhZykgew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJCQkJc3RhY2sucHVzaChvdGhl
cik7DQoJCQkJb3RoZXIubV9pc2xhbmRGbGFnID0gdHJ1ZTsNCgkJCX0NCgkJCWZvciAodmFyIGpu
ID0gYi5tX2pvaW50TGlzdDsgam47IGpuID0gam4ubmV4dCkgew0KCQkJCWlmIChqbi5qb2ludC5t
X2lzbGFuZEZsYWcgfHwgIWpuLm90aGVyLklzQWN0aXZlKCkpIHsNCgkJCQkJY29udGludWU7DQoJ
CQkJfQ0KCQkJCW1faXNsYW5kLkFkZEpvaW50KGpuLmpvaW50KTsNCgkJCQlqbi5qb2ludC5tX2lz
bGFuZEZsYWcgPSB0cnVlOw0KCQkJCWlmIChqbi5vdGhlci5tX2lzbGFuZEZsYWcpIHsNCgkJCQkJ
Y29udGludWU7DQoJCQkJfQ0KCQkJCXN0YWNrLnB1c2goam4ub3RoZXIpOw0KCQkJCWpuLm90aGVy
Lm1faXNsYW5kRmxhZyA9IHRydWU7DQoJCQl9DQoJCX0NCgkJbV9pc2xhbmQuU29sdmUoc3RlcCwg
dGhpcy5tX2dyYXZpdHksIHRoaXMubV9hbGxvd1NsZWVwKTsNCgl9DQoJZm9yICh2YXIgYm9keU5v
ZGUgPSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0
LlRZUEVTLm5vblN0YXRpY0FjdGl2ZUF3YWtlQm9kaWVzKTsgYm9keU5vZGU7IGJvZHlOb2RlID0g
Ym9keU5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQlib2R5Tm9kZS5ib2R5LlN5bmNocm9uaXplRml4
dHVyZXMoKTsNCgl9DQoJdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLkZpbmROZXdDb250YWN0cygpOw0K
fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJUaW1lU3RlcH0gc3RlcA0KICov
DQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN0
ZXApIHsNCgl2YXIgbV9pc2xhbmQgPSBuZXcgQm94MkQuRHluYW1pY3MuYjJJc2xhbmQodGhpcy5t
X2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyLCB0aGlzLm1fY29udGFjdFNvbHZlcik7
DQoJZm9yICh2YXIgYm9keU5vZGUgPSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5E
eW5hbWljcy5iMkJvZHlMaXN0LlRZUEVTLmFsbEJvZGllcyk7IGJvZHlOb2RlOyBib2R5Tm9kZSA9
IGJvZHlOb2RlLkdldE5leHROb2RlKCkpIHsNCgkJdmFyIGIgPSBib2R5Tm9kZS5ib2R5Ow0KCQli
Lm1faXNsYW5kRmxhZyA9IGZhbHNlOw0KCQliLm1fc3dlZXAudDAgPSAwLjA7DQoJfQ0KCWZvciAo
dmFyIGNvbnRhY3ROb2RlID0gdGhpcy5jb250YWN0TGlzdC5HZXRGaXJzdE5vZGUoQm94MkQuRHlu
YW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7IGNvbnRhY3RO
b2RlOyBjb250YWN0Tm9kZSA9IGNvbnRhY3ROb2RlLkdldE5leHROb2RlKCkpIHsNCgkJY29udGFj
dE5vZGUuY29udGFjdC5tX2lzbGFuZEZsYWcgPSBmYWxzZTsNCgkJY29udGFjdE5vZGUuY29udGFj
dC5tX3RvaSA9IG51bGw7DQoJfQ0KCWZvciAodmFyIGogPSB0aGlzLm1fam9pbnRMaXN0OyBqOyBq
ID0gai5tX25leHQpIHsNCgkJai5tX2lzbGFuZEZsYWcgPSBmYWxzZTsNCgl9DQoJd2hpbGUgKHRy
dWUpIHsNCgkJdmFyIHRvaTIgPSB0aGlzLl9Tb2x2ZVRPSTIoc3RlcCk7DQoJCXZhciBtaW5Db250
YWN0ID0gdG9pMi5taW5Db250YWN0Ow0KCQl2YXIgbWluVE9JID0gdG9pMi5taW5UT0k7DQoJCWlm
IChtaW5Db250YWN0ID09PSBudWxsIHx8IEJveDJELkR5bmFtaWNzLmIyV29ybGQuTUFYX1RPSSA8
IG1pblRPSSkgew0KCQkJYnJlYWs7DQoJCX0NCgkJdmFyIGZpeHR1cmVBQm9keSA9IG1pbkNvbnRh
Y3QubV9maXh0dXJlQS5HZXRCb2R5KCk7DQoJCXZhciBmaXh0dXJlQkJvZHkgPSAgbWluQ29udGFj
dC5tX2ZpeHR1cmVCLkdldEJvZHkoKTsNCgkJQm94MkQuRHluYW1pY3MuYjJXb3JsZC5zX2JhY2t1
cEEuU2V0KGZpeHR1cmVBQm9keS5tX3N3ZWVwKTsNCgkJQm94MkQuRHluYW1pY3MuYjJXb3JsZC5z
X2JhY2t1cEIuU2V0KGZpeHR1cmVCQm9keS5tX3N3ZWVwKTsNCgkJZml4dHVyZUFCb2R5LkFkdmFu
Y2UobWluVE9JKTsNCgkJZml4dHVyZUJCb2R5LkFkdmFuY2UobWluVE9JKTsNCgkJbWluQ29udGFj
dC5VcGRhdGUodGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyKTsNCgkJbWlu
Q29udGFjdC5tX3RvaSA9IG51bGw7DQoJCWlmIChtaW5Db250YWN0LnNlbnNvciB8fCAhbWluQ29u
dGFjdC5lbmFibGVkKSB7DQoJCQlmaXh0dXJlQUJvZHkubV9zd2VlcC5TZXQoQm94MkQuRHluYW1p
Y3MuYjJXb3JsZC5zX2JhY2t1cEEpOw0KCQkJZml4dHVyZUJCb2R5Lm1fc3dlZXAuU2V0KEJveDJE
LkR5bmFtaWNzLmIyV29ybGQuc19iYWNrdXBCKTsNCgkJCWZpeHR1cmVBQm9keS5TeW5jaHJvbml6
ZVRyYW5zZm9ybSgpOw0KCQkJZml4dHVyZUJCb2R5LlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJ
CQljb250aW51ZTsNCgkJfQ0KCQlpZiAoIW1pbkNvbnRhY3QudG91Y2hpbmcpIHsNCgkJCWNvbnRp
bnVlOw0KCQl9DQoJCXZhciBzZWVkID0gZml4dHVyZUFCb2R5Ow0KCQlpZiAoc2VlZC5HZXRUeXBl
KCkgIT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5KSB7DQoJCQlzZWVk
ID0gZml4dHVyZUJCb2R5Ow0KCQl9DQoJCW1faXNsYW5kLkNsZWFyKCk7DQoJCWIyc29sdmVhcnJh
eS5sZW5ndGggPSAwOw0KCQl2YXIgcXVldWUgPSBiMnNvbHZlYXJyYXk7DQoJCXF1ZXVlLnB1c2go
c2VlZCk7DQoJCXNlZWQubV9pc2xhbmRGbGFnID0gdHJ1ZTsNCgkJd2hpbGUgKHF1ZXVlLmxlbmd0
aCA+IDApIHsNCgkJCXZhciBiID0gcXVldWUucG9wKCk7DQoJCQltX2lzbGFuZC5BZGRCb2R5KGIp
Ow0KCQkJaWYgKCFiLklzQXdha2UoKSkgew0KCQkJCWIuU2V0QXdha2UodHJ1ZSk7DQoJCQl9DQoJ
CQlpZiAoYi5HZXRUeXBlKCkgIT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNC
b2R5KSB7DQoJCQkJY29udGludWU7DQoJCQl9DQoJCQlmb3IgKHZhciBjb250YWN0Tm9kZSA9IGIu
Y29udGFjdExpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFj
dExpc3QuVFlQRVMubm9uU2Vuc29yRW5hYmxlZFRvdWNoaW5nQ29udGFjdHMpOyBjb250YWN0Tm9k
ZTsgY29udGFjdE5vZGUgPSBjb250YWN0Tm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCQkJaWYgKG1f
aXNsYW5kLm1fY29udGFjdENvdW50ID09IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRP
SUNvbnRhY3RzUGVySXNsYW5kKSB7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCQl2YXIgY29udGFj
dCA9IGNvbnRhY3ROb2RlLmNvbnRhY3Q7DQoJCQkJaWYgKGNvbnRhY3QubV9pc2xhbmRGbGFnKSB7
DQoJCQkJCWNvbnRpbnVlOw0KCQkJCX0NCgkJCQltX2lzbGFuZC5BZGRDb250YWN0KGNvbnRhY3Qp
Ow0KCQkJCWNvbnRhY3QubV9pc2xhbmRGbGFnID0gdHJ1ZTsNCgkJCQl2YXIgb3RoZXIgPSBjb250
YWN0LkdldE90aGVyKGIpOw0KCQkJCWlmIChvdGhlci5tX2lzbGFuZEZsYWcpIHsNCgkJCQkJY29u
dGludWU7DQoJCQkJfQ0KCQkJCWlmIChvdGhlci5HZXRUeXBlKCkgIT0gQm94MkQuRHluYW1pY3Mu
YjJCb2R5RGVmLmIyX3N0YXRpY0JvZHkpIHsNCgkJCQkJb3RoZXIuQWR2YW5jZShtaW5UT0kpOw0K
CQkJCQlvdGhlci5TZXRBd2FrZSh0cnVlKTsNCgkJCQkJcXVldWUucHVzaChvdGhlcik7DQoJCQkJ
fQ0KCQkJCW90aGVyLm1faXNsYW5kRmxhZyA9IHRydWU7DQoJCQl9DQoJCQlmb3IgKHZhciBqRWRn
ZSA9IGIubV9qb2ludExpc3Q7IGpFZGdlOyBqRWRnZSA9IGpFZGdlLm5leHQpIHsNCgkJCQlpZiAo
bV9pc2xhbmQubV9qb2ludENvdW50ID09IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heFRP
SUpvaW50c1BlcklzbGFuZCkgew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJCQkJaWYgKGpFZGdl
LmpvaW50Lm1faXNsYW5kRmxhZyB8fCAhakVkZ2Uub3RoZXIuSXNBY3RpdmUoKSkgew0KCQkJCQlj
b250aW51ZTsNCgkJCQl9DQoJCQkJbV9pc2xhbmQuQWRkSm9pbnQoakVkZ2Uuam9pbnQpOw0KCQkJ
CWpFZGdlLmpvaW50Lm1faXNsYW5kRmxhZyA9IHRydWU7DQoJCQkJaWYgKGpFZGdlLm90aGVyLm1f
aXNsYW5kRmxhZykgew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJCQkJaWYgKGpFZGdlLm90aGVy
LkdldFR5cGUoKSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfc3RhdGljQm9keSkgew0K
CQkJCQlqRWRnZS5vdGhlci5BZHZhbmNlKG1pblRPSSk7DQoJCQkJCWpFZGdlLm90aGVyLlNldEF3
YWtlKHRydWUpOw0KCQkJCQlxdWV1ZS5wdXNoKGpFZGdlLm90aGVyKTsNCgkJCQl9DQoJCQkJakVk
Z2Uub3RoZXIubV9pc2xhbmRGbGFnID0gdHJ1ZTsNCgkJCX0NCgkJfQ0KCQltX2lzbGFuZC5Tb2x2
ZVRPSShuZXcgQm94MkQuRHluYW1pY3MuYjJUaW1lU3RlcCgoMS4wIC0gbWluVE9JKSAqIHN0ZXAu
ZHQgLyogZHQgKi8sIDAgLyogZHRSYXRpbyAqLywgc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnMsIHN0
ZXAucG9zaXRpb25JdGVyYXRpb25zLCBmYWxzZSAvKiB3YXJtU3RhcnRpbmcgKi8pKTsNCgkJZm9y
ICh2YXIgaSA9IDA7IGkgPCBtX2lzbGFuZC5tX2JvZGllcy5sZW5ndGg7IGkrKykgew0KCQkJbV9p
c2xhbmQubV9ib2RpZXNbaV0ubV9pc2xhbmRGbGFnID0gZmFsc2U7DQoJCQlpZiAoIW1faXNsYW5k
Lm1fYm9kaWVzW2ldLklzQXdha2UoKSB8fCBtX2lzbGFuZC5tX2JvZGllc1tpXS5HZXRUeXBlKCkg
IT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5KSB7DQoJCQkJY29udGlu
dWU7DQoJCQl9DQoJCQltX2lzbGFuZC5tX2JvZGllc1tpXS5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7
DQoJCQlmb3IgKHZhciBjb250YWN0Tm9kZSA9IG1faXNsYW5kLm1fYm9kaWVzW2ldLmNvbnRhY3RM
aXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LlRZ
UEVTLmFsbENvbnRhY3RzKTsgY29udGFjdE5vZGU7IGNvbnRhY3ROb2RlID0gY29udGFjdE5vZGUu
R2V0TmV4dE5vZGUoKSkgew0KCQkJCWNvbnRhY3ROb2RlLmNvbnRhY3QubV90b2kgPSBudWxsOw0K
CQkJfQ0KCQl9DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgbV9pc2xhbmQubV9jb250YWN0Q291bnQ7
IGkrKykgew0KCQkJbV9pc2xhbmQubV9jb250YWN0c1tpXS5tX2lzbGFuZEZsYWcgPSBmYWxzZTsN
CgkJCW1faXNsYW5kLm1fY29udGFjdHNbaV0ubV90b2kgPSBudWxsOw0KCQl9DQoJCWZvciAodmFy
IGkgPSAwOyBpIDwgbV9pc2xhbmQubV9qb2ludENvdW50OyBpKyspIHsNCgkJCW1faXNsYW5kLm1f
am9pbnRzW2ldLm1faXNsYW5kRmxhZyA9IGZhbHNlOw0KCQl9DQoJCXRoaXMubV9jb250YWN0TWFu
YWdlci5GaW5kTmV3Q29udGFjdHMoKTsNCgl9DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5E
eW5hbWljcy5iMlRpbWVTdGVwfSBzdGVwDQogKiBAcmV0dXJuIHt7bWluQ29udGFjdDogQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0LCBtaW5UT0k6IG51bWJlcn19DQogKi8NCkJveDJE
LkR5bmFtaWNzLmIyV29ybGQucHJvdG90eXBlLl9Tb2x2ZVRPSTIgPSBmdW5jdGlvbihzdGVwKSB7
DQoJdmFyIG1pbkNvbnRhY3QgPSBudWxsOw0KCXZhciBtaW5UT0kgPSAxLjA7DQoJdmFyIGNvbnRh
Y3RzID0gMDsNCglmb3IgKHZhciBjb250YWN0Tm9kZSA9IHRoaXMuY29udGFjdExpc3QuR2V0Rmly
c3ROb2RlKEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMubm9uU2Vu
c29yRW5hYmxlZENvbnRpbnVvdXNDb250YWN0cyk7IGNvbnRhY3ROb2RlOyBjb250YWN0Tm9kZSA9
IGNvbnRhY3ROb2RlLkdldE5leHROb2RlKCkpIHsNCgkJdmFyIGMgPSBjb250YWN0Tm9kZS5jb250
YWN0Ow0KCQlpZiAodGhpcy5fU29sdmVUT0kyU2tpcENvbnRhY3Qoc3RlcCwgYykpIHsNCgkJCWNv
bnRpbnVlOw0KCQl9DQoJCXZhciB0b2kgPSAxLjA7DQoJCWlmIChjLm1fdG9pICE9IG51bGwpIHsN
CgkJCXRvaSA9IGMubV90b2k7DQoJCX0gZWxzZSBpZiAoYy50b3VjaGluZykgew0KCQkJdG9pID0g
MTsNCgkJCWMubV90b2kgPSB0b2k7DQoJCX0gZWxzZSB7DQoJCQl2YXIgZml4dHVyZUFCb2R5ID0g
Yy5tX2ZpeHR1cmVBLkdldEJvZHkoKTsNCgkJCXZhciBmaXh0dXJlQkJvZHkgPSBjLm1fZml4dHVy
ZUIuR2V0Qm9keSgpOw0KCQkJdmFyIHQwID0gZml4dHVyZUFCb2R5Lm1fc3dlZXAudDA7DQoJCQlp
ZiAoZml4dHVyZUFCb2R5Lm1fc3dlZXAudDAgPCBmaXh0dXJlQkJvZHkubV9zd2VlcC50MCkgew0K
CQkJCXQwID0gZml4dHVyZUJCb2R5Lm1fc3dlZXAudDA7DQoJCQkJZml4dHVyZUFCb2R5Lm1fc3dl
ZXAuQWR2YW5jZSh0MCk7DQoJCQl9IGVsc2UgaWYgKGZpeHR1cmVCQm9keS5tX3N3ZWVwLnQwIDwg
Zml4dHVyZUFCb2R5Lm1fc3dlZXAudDApIHsNCgkJCQl0MCA9IGZpeHR1cmVBQm9keS5tX3N3ZWVw
LnQwOw0KCQkJCWZpeHR1cmVCQm9keS5tX3N3ZWVwLkFkdmFuY2UodDApOw0KCQkJfQ0KCQkJdG9p
ID0gYy5Db21wdXRlVE9JKGZpeHR1cmVBQm9keS5tX3N3ZWVwLCBmaXh0dXJlQkJvZHkubV9zd2Vl
cCk7DQo7DQoJCQlpZiAodG9pID4gMC4wICYmIHRvaSA8IDEuMCkgew0KCQkJCXRvaSA9ICgxLjAg
LSB0b2kpICogdDAgKyB0b2k7DQoJCQl9DQoJCQljLm1fdG9pID0gdG9pOw0KCQl9DQoJCWlmIChO
dW1iZXIuTUlOX1ZBTFVFIDwgdG9pICYmIHRvaSA8IG1pblRPSSkgew0KCQkJbWluQ29udGFjdCA9
IGM7DQoJCQltaW5UT0kgPSB0b2k7DQoJCX0NCgl9DQoJcmV0dXJuIHsNCgkJbWluQ29udGFjdDog
bWluQ29udGFjdCwNCgkJbWluVE9JOiBtaW5UT0kNCgl9Ow0KfTsNCi8qKg0KICogQHBhcmFtIHsh
Qm94MkQuRHluYW1pY3MuYjJUaW1lU3RlcH0gc3RlcA0KICogQHBhcmFtIHshQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0fSBjDQogKiBAcmV0dXJuIHtib29sZWFufQ0KICovDQpCb3gy
RC5EeW5hbWljcy5iMldvcmxkLnByb3RvdHlwZS5fU29sdmVUT0kyU2tpcENvbnRhY3QgPSBmdW5j
dGlvbihzdGVwLCBjKSB7DQoJdmFyIGZpeHR1cmVBQm9keSA9IGMubV9maXh0dXJlQS5HZXRCb2R5
KCk7DQoJdmFyIGZpeHR1cmVCQm9keSA9IGMubV9maXh0dXJlQi5HZXRCb2R5KCk7DQoJaWYgKChm
aXh0dXJlQUJvZHkuR2V0VHlwZSgpICE9IEJveDJELkR5bmFtaWNzLmIyQm9keURlZi5iMl9keW5h
bWljQm9keSB8fCAhZml4dHVyZUFCb2R5LklzQXdha2UoKSkgJiYgKGZpeHR1cmVCQm9keS5HZXRU
eXBlKCkgIT0gQm94MkQuRHluYW1pY3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5IHx8ICFmaXh0
dXJlQkJvZHkuSXNBd2FrZSgpKSkgew0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoJcmV0dXJuIGZhbHNl
Ow0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJl
QQ0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJlQg0KICogQGNv
bnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCA9IGZ1bmN0
aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikgew0KCS8qKg0KCSAqIEBjb25zdA0KCSAqIEBwcml2YXRl
DQoJICogQHR5cGUge3N0cmluZ30NCgkgKi8NCgl0aGlzLklEID0gIkNvbnRhY3QiICsgQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Lk5FWFRfSUQrKzsNCgkvKioNCgkgKiBAcHJpdmF0
ZQ0KCSAqIEB0eXBlIHshQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGR9DQoJICovDQoJdGhpcy5t
X21hbmlmb2xkID0gbmV3IEJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkKCk7DQoJLyoqDQoJICog
QHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkfQ0KCSAqLw0K
CXRoaXMubV9vbGRNYW5pZm9sZCA9IG5ldyBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZCgpOw0K
CS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy50b3Vj
aGluZyA9IGZhbHNlOw0KCXZhciBib2R5QSA9IGZpeHR1cmVBLkdldEJvZHkoKTsNCgl2YXIgYm9k
eUIgPSBmaXh0dXJlQi5HZXRCb2R5KCk7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7
Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLmNvbnRpbnVvdXMgPSAoYm9keUEuR2V0VHlwZSgpICE9IEJv
eDJELkR5bmFtaWNzLmIyQm9keURlZi5iMl9keW5hbWljQm9keSkgfHwNCgkJCQkJICBib2R5QS5J
c0J1bGxldCgpIHx8DQoJCQkJCSAgKGJvZHlCLkdldFR5cGUoKSAhPSBCb3gyRC5EeW5hbWljcy5i
MkJvZHlEZWYuYjJfZHluYW1pY0JvZHkpIHx8DQoJCQkJCSAgYm9keUIuSXNCdWxsZXQoKTsNCgkv
KioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtib29sZWFufQ0KCSAqLw0KCXRoaXMuc2Vuc29y
ID0gZml4dHVyZUEuSXNTZW5zb3IoKSB8fCBmaXh0dXJlQi5Jc1NlbnNvcigpOw0KCS8qKg0KCSAq
IEBwcml2YXRlDQoJICogQHR5cGUge2Jvb2xlYW59DQoJICovDQoJdGhpcy5maWx0ZXJpbmcgPSBm
YWxzZTsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuYjJG
aXh0dXJlfQ0KCSAqLw0KCXRoaXMubV9maXh0dXJlQSA9IGZpeHR1cmVBOw0KCS8qKg0KCSAqIEBw
cml2YXRlDQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9DQoJICovDQoJdGhp
cy5tX2ZpeHR1cmVCID0gZml4dHVyZUI7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7
Ym9vbGVhbn0NCgkgKi8NCgl0aGlzLmVuYWJsZWQgPSB0cnVlOw0KCS8qKg0KCSAqIEBwcml2YXRl
DQoJICogQHR5cGUgeyFCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0fQ0KCSAq
Lw0KCXRoaXMuYm9keUFMaXN0ID0gYm9keUEuR2V0Q29udGFjdExpc3QoKTsNCgkvKioNCgkgKiBA
cHJpdmF0ZQ0KCSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlz
dH0NCgkgKi8NCgl0aGlzLmJvZHlCTGlzdCA9IGJvZHlCLkdldENvbnRhY3RMaXN0KCk7DQoJLyoq
DQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29u
dGFjdExpc3R9DQoJICovDQoJdGhpcy53b3JsZExpc3QgPSBib2R5Qi5HZXRXb3JsZCgpLkdldENv
bnRhY3RMaXN0KCk7DQoJdGhpcy5BZGRUb0xpc3RzKCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFC
b3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVBDQogKiBAcGFyYW0geyFCb3gyRC5EeW5h
bWljcy5iMkZpeHR1cmV9IGZpeHR1cmVCDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
Q29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHsN
Cgl0aGlzLm1fbWFuaWZvbGQuUmVzZXQoKTsNCgl0aGlzLm1fb2xkTWFuaWZvbGQuUmVzZXQoKTsN
Cgl0aGlzLnRvdWNoaW5nID0gZmFsc2U7DQoJdmFyIGJvZHlBID0gZml4dHVyZUEuR2V0Qm9keSgp
Ow0KCXZhciBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTsNCgl0aGlzLmNvbnRpbnVvdXMgPSAo
Ym9keUEuR2V0VHlwZSgpICE9IEJveDJELkR5bmFtaWNzLmIyQm9keURlZi5iMl9keW5hbWljQm9k
eSkgfHwNCgkJCQkJICBib2R5QS5Jc0J1bGxldCgpIHx8DQoJCQkJCSAgKGJvZHlCLkdldFR5cGUo
KSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfZHluYW1pY0JvZHkpIHx8DQoJCQkJCSAg
Ym9keUIuSXNCdWxsZXQoKTsNCgl0aGlzLnNlbnNvciA9IGZpeHR1cmVBLklzU2Vuc29yKCkgfHwg
Zml4dHVyZUIuSXNTZW5zb3IoKTsNCgl0aGlzLmZpbHRlcmluZyA9IGZhbHNlOw0KCXRoaXMubV9m
aXh0dXJlQSA9IGZpeHR1cmVBOw0KCXRoaXMubV9maXh0dXJlQiA9IGZpeHR1cmVCOw0KCXRoaXMu
ZW5hYmxlZCA9IHRydWU7DQoJdGhpcy5ib2R5QUxpc3QgPSBib2R5QS5HZXRDb250YWN0TGlzdCgp
Ow0KCXRoaXMuYm9keUJMaXN0ID0gYm9keUIuR2V0Q29udGFjdExpc3QoKTsNCgl0aGlzLndvcmxk
TGlzdCA9IGJvZHlCLkdldFdvcmxkKCkuR2V0Q29udGFjdExpc3QoKTsNCgl0aGlzLkFkZFRvTGlz
dHMoKTsNCn07DQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3QucHJvdG90eXBlLkFk
ZFRvTGlzdHMgPSBmdW5jdGlvbiAoKSB7DQoJdGhpcy5ib2R5QUxpc3QuQWRkQ29udGFjdCh0aGlz
KTsNCgl0aGlzLmJvZHlCTGlzdC5BZGRDb250YWN0KHRoaXMpOw0KCXRoaXMud29ybGRMaXN0LkFk
ZENvbnRhY3QodGhpcyk7DQoJdGhpcy5VcGRhdGVMaXN0cygpOw0KfTsNCkJveDJELkR5bmFtaWNz
LkNvbnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuVXBkYXRlTGlzdHMgPSBmdW5jdGlvbiAoKSB7
DQoJdmFyIG5vblNlbnNvckVuYWJsZWRUb3VjaGluZyA9IGZhbHNlOw0KCXZhciBub25TZW5zb3JF
bmFibGVkQ29udGludW91cyA9IGZhbHNlOw0KCWlmICghdGhpcy5Jc1NlbnNvcigpICYmIHRoaXMu
SXNFbmFibGVkKCkpIHsNCgkJaWYgKHRoaXMuSXNUb3VjaGluZygpKSB7DQoJCQlub25TZW5zb3JF
bmFibGVkVG91Y2hpbmcgPSB0cnVlOw0KCQl9DQoJCWlmICh0aGlzLklzQ29udGludW91cygpKSB7
DQoJCQlub25TZW5zb3JFbmFibGVkQ29udGludW91cyA9IHRydWU7DQoJCX0NCgl9DQoJdGhpcy5i
b2R5QUxpc3QuVXBkYXRlQ29udGFjdCh0aGlzLCBub25TZW5zb3JFbmFibGVkVG91Y2hpbmcsIG5v
blNlbnNvckVuYWJsZWRDb250aW51b3VzKTsNCgl0aGlzLmJvZHlCTGlzdC5VcGRhdGVDb250YWN0
KHRoaXMsIG5vblNlbnNvckVuYWJsZWRUb3VjaGluZywgbm9uU2Vuc29yRW5hYmxlZENvbnRpbnVv
dXMpOw0KCXRoaXMud29ybGRMaXN0LlVwZGF0ZUNvbnRhY3QodGhpcywgbm9uU2Vuc29yRW5hYmxl
ZFRvdWNoaW5nLCBub25TZW5zb3JFbmFibGVkQ29udGludW91cyk7DQp9Ow0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0LnByb3RvdHlwZS5SZW1vdmVGcm9tTGlzdHMgPSBmdW5jdGlv
biAoKSB7DQoJdGhpcy5ib2R5QUxpc3QuUmVtb3ZlQ29udGFjdCh0aGlzKTsNCgl0aGlzLmJvZHlC
TGlzdC5SZW1vdmVDb250YWN0KHRoaXMpOw0KCXRoaXMud29ybGRMaXN0LlJlbW92ZUNvbnRhY3Qo
dGhpcyk7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGR9
DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuR2V0TWFu
aWZvbGQgPSBmdW5jdGlvbiAoKSB7DQogIHJldHVybiB0aGlzLm1fbWFuaWZvbGQ7DQp9Ow0KLyoq
DQogKiBAcGFyYW0geyFCb3gyRC5Db2xsaXNpb24uYjJXb3JsZE1hbmlmb2xkfSB3b3JsZE1hbmlm
b2xkDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuR2V0
V29ybGRNYW5pZm9sZCA9IGZ1bmN0aW9uICh3b3JsZE1hbmlmb2xkKSB7DQoJdmFyIGJvZHlBID0g
dGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTsNCgl2YXIgYm9keUIgPSB0aGlzLm1fZml4dHVyZUIu
R2V0Qm9keSgpOw0KCXZhciBzaGFwZUEgPSB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKTsNCgl2
YXIgc2hhcGVCID0gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCk7DQoJd29ybGRNYW5pZm9sZC5J
bml0aWFsaXplKHRoaXMubV9tYW5pZm9sZCwgYm9keUEuR2V0VHJhbnNmb3JtKCksIHNoYXBlQS5t
X3JhZGl1cywgYm9keUIuR2V0VHJhbnNmb3JtKCksIHNoYXBlQi5tX3JhZGl1cyk7DQp9Ow0KLyoq
DQogKiBAcmV0dXJuIHtib29sZWFufQ0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNv
bnRhY3QucHJvdG90eXBlLklzVG91Y2hpbmcgPSBmdW5jdGlvbiAoKSB7DQogIHJldHVybiB0aGlz
LnRvdWNoaW5nOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHlu
YW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnByb3RvdHlwZS5Jc0NvbnRpbnVvdXMgPSBmdW5jdGlv
biAoKSB7DQogIHJldHVybiB0aGlzLmNvbnRpbnVvdXM7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge2Jv
b2xlYW59IHNlbnNvcg0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3QucHJv
dG90eXBlLlNldFNlbnNvciA9IGZ1bmN0aW9uIChzZW5zb3IpIHsNCiAgIHRoaXMuc2Vuc29yID0g
c2Vuc29yOw0KICAgdGhpcy5VcGRhdGVMaXN0cygpOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9v
bGVhbn0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnByb3RvdHlwZS5J
c1NlbnNvciA9IGZ1bmN0aW9uICgpIHsNCiAgcmV0dXJuIHRoaXMuc2Vuc29yOw0KfTsNCi8qKg0K
ICogQHBhcmFtIHtib29sZWFufSBmbGFnDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
Q29udGFjdC5wcm90b3R5cGUuU2V0RW5hYmxlZCA9IGZ1bmN0aW9uIChmbGFnKSB7DQogICB0aGlz
LmVuYWJsZWQgPSBmbGFnOw0KICAgdGhpcy5VcGRhdGVMaXN0cygpOw0KfTsNCi8qKg0KICogQHJl
dHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnBy
b3RvdHlwZS5Jc0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7DQogICByZXR1cm4gdGhpcy5lbmFibGVk
Ow0KfTsNCi8qKg0KICogQHJldHVybiB7Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
fQ0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3QucHJvdG90eXBlLkdldE5l
eHQgPSBmdW5jdGlvbiAoKSB7DQogIHJldHVybiB0aGlzLm1fbmV4dDsNCn07DQovKioNCiAqIEBy
ZXR1cm4geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9DQogKi8NCkJveDJELkR5bmFtaWNzLkNv
bnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuR2V0Rml4dHVyZUEgPSBmdW5jdGlvbiAoKSB7DQog
IHJldHVybiB0aGlzLm1fZml4dHVyZUE7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHshQm94MkQuRHlu
YW1pY3MuYjJGaXh0dXJlfQ0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Qu
cHJvdG90eXBlLkdldEZpeHR1cmVCID0gZnVuY3Rpb24gKCkgew0KICByZXR1cm4gdGhpcy5tX2Zp
eHR1cmVCOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJCb2R5fSBib2R5
DQogKiBAcmV0dXJuIHshQm94MkQuRHluYW1pY3MuYjJCb2R5fQ0KICovDQpCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3QucHJvdG90eXBlLkdldE90aGVyID0gZnVuY3Rpb24gKGJvZHkp
IHsNCgl2YXIgYm9keUEgPSB0aGlzLm1fZml4dHVyZUEuR2V0Qm9keSgpOw0KCWlmIChib2R5QSAh
PSBib2R5KSB7DQoJCXJldHVybiBib2R5QTsNCgl9IGVsc2Ugew0KCQlyZXR1cm4gdGhpcy5tX2Zp
eHR1cmVCLkdldEJvZHkoKTsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250
YWN0LnByb3RvdHlwZS5GbGFnRm9yRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkgew0KICAgdGhpcy5m
aWx0ZXJpbmcgPSB0cnVlOw0KfTsNCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5w
cm90b3R5cGUuQ2xlYXJGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7DQogICB0aGlzLmZpbHRlcmlu
ZyA9IGZhbHNlOw0KfTsNCi8qKg0KICogQHJldHVybiB7Ym9vbGVhbn0NCiAqLw0KQm94MkQuRHlu
YW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnByb3RvdHlwZS5Jc0ZpbHRlcmluZyA9IGZ1bmN0aW9u
ICgpIHsNCiAgIHJldHVybiB0aGlzLmZpbHRlcmluZzsNCn07DQpCb3gyRC5EeW5hbWljcy5Db250
YWN0cy5iMkNvbnRhY3QucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikgew0K
ICB2YXIgdE1hbmlmb2xkID0gdGhpcy5tX29sZE1hbmlmb2xkOw0KICB0aGlzLm1fb2xkTWFuaWZv
bGQgPSB0aGlzLm1fbWFuaWZvbGQ7DQogIHRoaXMubV9tYW5pZm9sZCA9IHRNYW5pZm9sZDsNCiAg
dGhpcy5lbmFibGVkID0gdHJ1ZTsNCiAgdmFyIHRvdWNoaW5nID0gZmFsc2U7DQogIHZhciB3YXNU
b3VjaGluZyA9IHRoaXMuSXNUb3VjaGluZygpOw0KICB2YXIgYm9keUEgPSB0aGlzLm1fZml4dHVy
ZUEuR2V0Qm9keSgpOw0KICB2YXIgYm9keUIgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpOw0K
ICB2YXIgYWFiYk92ZXJsYXAgPSB0aGlzLm1fZml4dHVyZUEubV9hYWJiLlRlc3RPdmVybGFwKHRo
aXMubV9maXh0dXJlQi5tX2FhYmIpOw0KICBpZiAodGhpcy5zZW5zb3IpIHsNCgkgaWYgKGFhYmJP
dmVybGFwKSB7DQoJCXRvdWNoaW5nID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlLlRl
c3RPdmVybGFwKHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpLCBib2R5QS5HZXRUcmFuc2Zvcm0o
KSwgdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCksIGJvZHlCLkdldFRyYW5zZm9ybSgpKTsNCgkg
fQ0KCSB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDsNCiAgfSBlbHNlIHsNCgkgaWYg
KGJvZHlBLkdldFR5cGUoKSAhPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWYuYjJfZHluYW1pY0Jv
ZHkgfHwgYm9keUEuSXNCdWxsZXQoKSB8fCBib2R5Qi5HZXRUeXBlKCkgIT0gQm94MkQuRHluYW1p
Y3MuYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5IHx8IGJvZHlCLklzQnVsbGV0KCkpIHsNCgkJdGhp
cy5jb250aW51b3VzID0gdHJ1ZTsNCgkgfSBlbHNlIHsNCgkJdGhpcy5jb250aW51b3VzID0gZmFs
c2U7DQoJIH0NCgkgaWYgKGFhYmJPdmVybGFwKSB7DQoJCXRoaXMuRXZhbHVhdGUoKTsNCgkJdG91
Y2hpbmcgPSB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID4gMDsNCgkJZm9yICh2YXIgaSA9
IDA7IGkgPCB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50OyBpKyspIHsNCgkJICAgdmFyIG1w
MiA9IHRoaXMubV9tYW5pZm9sZC5tX3BvaW50c1tpXTsNCgkJICAgbXAyLm1fbm9ybWFsSW1wdWxz
ZSA9IDAuMDsNCgkJICAgbXAyLm1fdGFuZ2VudEltcHVsc2UgPSAwLjA7DQoJCSAgIGZvciAodmFy
IGogPSAwOyBqIDwgdGhpcy5tX29sZE1hbmlmb2xkLm1fcG9pbnRDb3VudDsgaisrKSB7DQoJCQkg
IHZhciBtcDEgPSB0aGlzLm1fb2xkTWFuaWZvbGQubV9wb2ludHNbal07DQoJCQkgIGlmIChtcDEu
bV9pZC5HZXRLZXkoKSA9PSBtcDIubV9pZC5HZXRLZXkoKSkgew0KCQkJCSBtcDIubV9ub3JtYWxJ
bXB1bHNlID0gbXAxLm1fbm9ybWFsSW1wdWxzZTsNCgkJCQkgbXAyLm1fdGFuZ2VudEltcHVsc2Ug
PSBtcDEubV90YW5nZW50SW1wdWxzZTsNCgkJCQkgYnJlYWs7DQoJCQkgIH0NCgkJICAgfQ0KCQl9
DQoJIH0gZWxzZSB7DQoJCXRoaXMubV9tYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwOw0KCSB9DQoJ
IGlmICh0b3VjaGluZyAhPSB3YXNUb3VjaGluZykgew0KCQlib2R5QS5TZXRBd2FrZSh0cnVlKTsN
CgkJYm9keUIuU2V0QXdha2UodHJ1ZSk7DQoJIH0NCiAgfQ0KICB0aGlzLnRvdWNoaW5nID0gdG91
Y2hpbmc7DQogIGlmICh0b3VjaGluZyAhPSB3YXNUb3VjaGluZykgew0KCSB0aGlzLlVwZGF0ZUxp
c3RzKCk7DQogIH0NCiAgaWYgKCF3YXNUb3VjaGluZyAmJiB0b3VjaGluZykgew0KCSBsaXN0ZW5l
ci5CZWdpbkNvbnRhY3QodGhpcyk7DQogIH0NCiAgaWYgKHdhc1RvdWNoaW5nICYmICF0b3VjaGlu
Zykgew0KCSBsaXN0ZW5lci5FbmRDb250YWN0KHRoaXMpOw0KICB9DQogIGlmICghdGhpcy5zZW5z
b3IpIHsNCgkgbGlzdGVuZXIuUHJlU29sdmUodGhpcywgdGhpcy5tX29sZE1hbmlmb2xkKTsNCiAg
fQ0KfTsNCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuRXZhbHVh
dGUgPSBmdW5jdGlvbiAoKSB7fTsNCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5w
cm90b3R5cGUuQ29tcHV0ZVRPSSA9IGZ1bmN0aW9uIChzd2VlcEEsIHN3ZWVwQikgew0KICBCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Quc19pbnB1dC5wcm94eUEuU2V0KHRoaXMubV9m
aXh0dXJlQS5HZXRTaGFwZSgpKTsNCiAgQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
LnNfaW5wdXQucHJveHlCLlNldCh0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSk7DQogIEJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5zX2lucHV0LnN3ZWVwQSA9IHN3ZWVwQTsNCiAg
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnNfaW5wdXQuc3dlZXBCID0gc3dlZXBC
Ow0KICBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Quc19pbnB1dC50b2xlcmFuY2Ug
PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wOw0KICByZXR1cm4gQm94MkQu
Q29sbGlzaW9uLmIyVGltZU9mSW1wYWN0LlRpbWVPZkltcGFjdChCb3gyRC5EeW5hbWljcy5Db250
YWN0cy5iMkNvbnRhY3Quc19pbnB1dCk7DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJD
b250YWN0LnNfaW5wdXQgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyVE9JSW5wdXQoKTsNCi8qKg0K
ICogQHR5cGUge251bWJlcn0NCiAqIEBwcml2YXRlDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRh
Y3RzLmIyQ29udGFjdC5ORVhUX0lEID0gMDsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1p
Y3MuYjJGaXh0dXJlfSBmaXh0dXJlQQ0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0
dXJlfSBmaXh0dXJlQg0KICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7Qm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0fQ0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNp
cmNsZUNvbnRhY3QgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHsNCglCb3gyRC5EeW5h
bWljcy5Db250YWN0cy5iMkNvbnRhY3QuY2FsbCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpOw0K
fTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNpcmNsZUNvbnRhY3QsIEJv
eDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCk7DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNz
LmIyRml4dHVyZX0gZml4dHVyZUINCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDaXJj
bGVDb250YWN0LnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikg
ew0KCUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5wcm90b3R5cGUuUmVzZXQuY2Fs
bCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpOw0KfTsNCkJveDJELkR5bmFtaWNzLkNvbnRhY3Rz
LmIyQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHsNCglCb3gy
RC5Db2xsaXNpb24uYjJDb2xsaXNpb24uQ29sbGlkZUNpcmNsZXModGhpcy5tX21hbmlmb2xkLCB0
aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSwgdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKS5tX3hm
LCB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSwgdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKS5t
X3hmKTsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5Db250
YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50ID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5sb2NhbFBsYW5l
Tm9ybWFsID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxvY2Fs
UG9pbnQgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubm9ybWFs
ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm5vcm1hbE1hc3Mg
PSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMigpOw0KCXRoaXMuSyA9IG5ldyBCb3gyRC5D
b21tb24uTWF0aC5iMk1hdDIyKCk7DQoJdGhpcy5wb2ludHMgPSBbXTsNCglmb3IgKHZhciBpID0g
MDsgaSA8IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzOyBpKysp
IHsNCgkJdGhpcy5wb2ludHNbaV0gPSBuZXcgQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250
YWN0Q29uc3RyYWludFBvaW50KCk7DQoJfQ0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8N
CkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdENvbnN0cmFpbnRQb2ludCA9IGZ1bmN0
aW9uKCkgew0KCSAgdGhpcy5sb2NhbFBvaW50ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgwLCAwKTsNCgkgIHRoaXMuckEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDAp
Ow0KCSAgdGhpcy5yQiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQp9Ow0K
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWludFBvaW50LnByb3RvdHlw
ZS5SZXNldCA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubG9jYWxQb2ludC5TZXQoMCwgMCk7DQoJdGhp
cy5yQS5TZXQoMCwgMCk7DQoJdGhpcy5yQi5TZXQoMCwgMCk7DQp9Ow0KLyoqDQogKiBAY29uc3Ry
dWN0b3INCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0RmFjdG9yeSA9IGZ1
bmN0aW9uKCkgew0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICovDQoJdGhpcy5tX3JlZ2lzdGVycyA9
IHt9Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge09iamVjdC48T2JqZWN0LjxBcnJh
eS48IUJveDJELkR5bmFtaWNzLmIyQ29udGFjdD4+Pn0NCgkgKi8NCgl0aGlzLm1fZnJlZUNvbnRh
Y3RzID0ge307DQoJdGhpcy5BZGRUeXBlKEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ2lyY2xl
Q29udGFjdCwgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlLk5BTUUsIEJveDJE
LkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZS5OQU1FKTsNCgl0aGlzLkFkZFR5cGUoQm94
MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb2x5QW5kQ2lyY2xlQ29udGFjdCwgQm94MkQuQ29sbGlz
aW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5OQU1FLCBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIy
Q2lyY2xlU2hhcGUuTkFNRSk7DQoJdGhpcy5BZGRUeXBlKEJveDJELkR5bmFtaWNzLkNvbnRhY3Rz
LmIyUG9seWdvbkNvbnRhY3QsIEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUu
TkFNRSwgQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlBvbHlnb25TaGFwZS5OQU1FKTsNCgl0aGlz
LkFkZFR5cGUoQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCwg
Qm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VTaGFwZS5OQU1FLCBCb3gyRC5Db2xsaXNpb24u
U2hhcGVzLmIyQ2lyY2xlU2hhcGUuTkFNRSk7DQoJdGhpcy5BZGRUeXBlKEJveDJELkR5bmFtaWNz
LkNvbnRhY3RzLmIyUG9seUFuZEVkZ2VDb250YWN0LCBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIy
UG9seWdvblNoYXBlLk5BTUUsIEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGUuTkFN
RSk7DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0RmFjdG9yeS5wcm90b3R5
cGUuQWRkVHlwZSA9IGZ1bmN0aW9uKGN0b3IsIHR5cGUxLCB0eXBlMikgew0KCXRoaXMubV9mcmVl
Q29udGFjdHNbdHlwZTFdID0gdGhpcy5tX2ZyZWVDb250YWN0c1t0eXBlMV0gfHwge307DQoJdGhp
cy5tX2ZyZWVDb250YWN0c1t0eXBlMV1bdHlwZTJdID0gdGhpcy5tX2ZyZWVDb250YWN0c1t0eXBl
MV1bdHlwZTJdIHx8IFtdOw0KCXRoaXMubV9yZWdpc3RlcnNbdHlwZTFdID0gdGhpcy5tX3JlZ2lz
dGVyc1t0eXBlMV0gfHwge307DQoJdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdID0gbmV3
IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFJlZ2lzdGVyKCk7DQoJdGhpcy5tX3Jl
Z2lzdGVyc1t0eXBlMV1bdHlwZTJdLmN0b3IgPSBjdG9yOw0KCXRoaXMubV9yZWdpc3RlcnNbdHlw
ZTFdW3R5cGUyXS5wcmltYXJ5ID0gdHJ1ZTsNCglpZiAodHlwZTEgIT0gdHlwZTIpIHsNCgkJdGhp
cy5tX3JlZ2lzdGVyc1t0eXBlMl0gPSB0aGlzLm1fcmVnaXN0ZXJzW3R5cGUyXSB8fCB7fTsNCgkJ
dGhpcy5tX3JlZ2lzdGVyc1t0eXBlMl1bdHlwZTFdID0gbmV3IEJveDJELkR5bmFtaWNzLkNvbnRh
Y3RzLmIyQ29udGFjdFJlZ2lzdGVyKCk7DQoJCXRoaXMubV9yZWdpc3RlcnNbdHlwZTJdW3R5cGUx
XS5jdG9yID0gY3RvcjsNCgkJdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMl1bdHlwZTFdLnByaW1hcnkg
PSBmYWxzZTsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0RmFjdG9y
eS5wcm90b3R5cGUuQ3JlYXRlID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7DQoJdmFy
IHR5cGUxID0gZml4dHVyZUEuR2V0U2hhcGUoKS5HZXRUeXBlTmFtZSgpOw0KCXZhciB0eXBlMiA9
IGZpeHR1cmVCLkdldFNoYXBlKCkuR2V0VHlwZU5hbWUoKTsNCgl2YXIgcmVnID0gdGhpcy5tX3Jl
Z2lzdGVyc1t0eXBlMV1bdHlwZTJdOw0KCXZhciBjdG9yID0gcmVnLmN0b3I7DQoJaWYgKGN0b3Ig
IT0gbnVsbCkgew0KCQlpZiAocmVnLnByaW1hcnkpIHsNCgkJCWlmICh0aGlzLm1fZnJlZUNvbnRh
Y3RzW3R5cGUxXVt0eXBlMl0ubGVuZ3RoID4gMCkgew0KCQkJCXZhciBjID0gdGhpcy5tX2ZyZWVD
b250YWN0c1t0eXBlMV1bdHlwZTJdLnBvcCgpOw0KCQkJCWMuUmVzZXQoZml4dHVyZUEsIGZpeHR1
cmVCKTsNCgkJCQlyZXR1cm4gYzsNCgkJCX0NCgkJCXJldHVybiBuZXcgY3RvcihmaXh0dXJlQSwg
Zml4dHVyZUIpOw0KCQl9IGVsc2Ugew0KCQkJaWYgKHRoaXMubV9mcmVlQ29udGFjdHNbdHlwZTJd
W3R5cGUxXS5sZW5ndGggPiAwKSB7DQoJCQkJdmFyIGMgPSB0aGlzLm1fZnJlZUNvbnRhY3RzW3R5
cGUyXVt0eXBlMV0ucG9wKCk7DQoJCQkJYy5SZXNldChmaXh0dXJlQiwgZml4dHVyZUEpOw0KCQkJ
CXJldHVybiBjOw0KCQkJfQ0KCQkJcmV0dXJuIG5ldyBjdG9yKGZpeHR1cmVCLCBmaXh0dXJlQSk7
DQoJCX0NCgl9IGVsc2Ugew0KCQlyZXR1cm4gbnVsbDsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3Mu
Q29udGFjdHMuYjJDb250YWN0RmFjdG9yeS5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uKGNv
bnRhY3QpIHsNCgl2YXIgdHlwZTEgPSBjb250YWN0Lm1fZml4dHVyZUEuR2V0U2hhcGUoKS5HZXRU
eXBlTmFtZSgpOw0KCXZhciB0eXBlMiA9IGNvbnRhY3QubV9maXh0dXJlQi5HZXRTaGFwZSgpLkdl
dFR5cGVOYW1lKCk7DQoJdGhpcy5tX2ZyZWVDb250YWN0c1t0eXBlMV1bdHlwZTJdLnB1c2goY29u
dGFjdCk7DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqLw0KQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJDb250YWN0TGlzdCA9IGZ1bmN0aW9uKCkgew0KCS8qKg0KCSAqIEBwcml2YXRlDQoJ
ICogQHR5cGUge0FycmF5LjxCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0Tm9k
ZT59DQoJICovDQoJdGhpcy5jb250YWN0Rmlyc3ROb2RlcyA9IFtdOw0KCWZvcih2YXIgaSA9IDA7
IGkgPD0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5hbGxDb250
YWN0czsgaSsrKSB7DQoJCXRoaXMuY29udGFjdEZpcnN0Tm9kZXNbaV0gPSBudWxsOw0KCX0NCgkv
KioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtBcnJheS48Qm94MkQuRHluYW1pY3MuQ29udGFj
dHMuYjJDb250YWN0TGlzdE5vZGU+fQ0KCSAqLw0KCXRoaXMuY29udGFjdExhc3ROb2RlcyA9IFtd
Ow0KCWZvcih2YXIgaSA9IDA7IGkgPD0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
TGlzdC5UWVBFUy5hbGxDb250YWN0czsgaSsrKSB7DQoJCXRoaXMuY29udGFjdExhc3ROb2Rlc1tp
XSA9IG51bGw7DQoJfQ0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5cGUge09iamVjdC48QXJy
YXkuPEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3ROb2RlPj59DQoJICovDQoJ
dGhpcy5jb250YWN0Tm9kZUxvb2t1cCA9IHt9Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5
cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLmNvbnRhY3RDb3VudCA9IDA7DQp9Ow0KLyoqDQogKiBA
cGFyYW0ge251bWJlcn0gdHlwZQ0KICogQHJldHVybiB7Qm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJDb250YWN0TGlzdE5vZGV9DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFj
dExpc3QucHJvdG90eXBlLkdldEZpcnN0Tm9kZSA9IGZ1bmN0aW9uKHR5cGUpIHsNCglyZXR1cm4g
dGhpcy5jb250YWN0Rmlyc3ROb2Rlc1t0eXBlXTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdH0gY29udGFjdA0KICovDQpCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LnByb3RvdHlwZS5BZGRDb250YWN0ID0gZnVuY3Rpb24o
Y29udGFjdCkgew0KCXZhciBjb250YWN0SUQgPSBjb250YWN0LklEOw0KCWlmICh0aGlzLmNvbnRh
Y3ROb2RlTG9va3VwW2NvbnRhY3RJRF0gPT0gbnVsbCkgew0KCQl0aGlzLmNvbnRhY3ROb2RlTG9v
a3VwW2NvbnRhY3RJRF0gPSBbXTsNCgkJZm9yKHZhciBpID0gMDsgaSA8PSBCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RMaXN0LlRZUEVTLmFsbENvbnRhY3RzOyBpKyspIHsNCgkJCXRo
aXMuY29udGFjdE5vZGVMb29rdXBbY29udGFjdElEXVtpXSA9IG51bGw7DQoJCX0NCgkJdGhpcy5D
cmVhdGVOb2RlKGNvbnRhY3QsIGNvbnRhY3RJRCwgQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJD
b250YWN0TGlzdC5UWVBFUy5hbGxDb250YWN0cyk7DQoJCXRoaXMuY29udGFjdENvdW50Kys7DQoJ
fQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
fSBjb250YWN0DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QucHJv
dG90eXBlLlVwZGF0ZUNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0LCBub25TZW5zb3JFbmFibGVk
VG91Y2hpbmcsIG5vblNlbnNvckVuYWJsZWRDb250aW51b3VzKSB7DQoJaWYgKG5vblNlbnNvckVu
YWJsZWRUb3VjaGluZykgew0KCQl0aGlzLkNyZWF0ZU5vZGUoY29udGFjdCwgY29udGFjdC5JRCwg
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5ub25TZW5zb3JFbmFi
bGVkVG91Y2hpbmdDb250YWN0cyk7DQoJfSBlbHNlIHsNCgkJdGhpcy5SZW1vdmVOb2RlKGNvbnRh
Y3QuSUQsIEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMubm9uU2Vu
c29yRW5hYmxlZFRvdWNoaW5nQ29udGFjdHMpOw0KCX0NCglpZiAobm9uU2Vuc29yRW5hYmxlZENv
bnRpbnVvdXMpIHsNCgkJdGhpcy5DcmVhdGVOb2RlKGNvbnRhY3QsIGNvbnRhY3QuSUQsIEJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMubm9uU2Vuc29yRW5hYmxlZENv
bnRpbnVvdXNDb250YWN0cyk7DQoJfSBlbHNlIHsNCgkJdGhpcy5SZW1vdmVOb2RlKGNvbnRhY3Qu
SUQsIEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QuVFlQRVMubm9uU2Vuc29y
RW5hYmxlZENvbnRpbnVvdXNDb250YWN0cyk7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0fSBjb250YWN0DQogKi8NCkJveDJELkR5bmFt
aWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QucHJvdG90eXBlLlJlbW92ZUNvbnRhY3QgPSBmdW5j
dGlvbihjb250YWN0KSB7DQoJdmFyIGNvbnRhY3RJRCA9IGNvbnRhY3QuSUQ7DQoJaWYgKHRoaXMu
Y29udGFjdE5vZGVMb29rdXBbY29udGFjdElEXSAhPSBudWxsKSB7DQoJCWZvcih2YXIgaSA9IDA7
IGkgPD0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUy5hbGxDb250
YWN0czsgaSsrKSB7DQoJCQl0aGlzLlJlbW92ZU5vZGUoY29udGFjdElELCBpKTsNCgkJfQ0KCQlk
ZWxldGUgdGhpcy5jb250YWN0Tm9kZUxvb2t1cFtjb250YWN0SURdOw0KCQl0aGlzLmNvbnRhY3RD
b3VudC0tOw0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0SUQNCiAqIEBw
YXJhbSB7bnVtYmVyfSB0eXBlDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFj
dExpc3QucHJvdG90eXBlLlJlbW92ZU5vZGUgPSBmdW5jdGlvbihjb250YWN0SUQsIHR5cGUpIHsN
Cgl2YXIgbm9kZUxpc3QgPSB0aGlzLmNvbnRhY3ROb2RlTG9va3VwW2NvbnRhY3RJRF07DQoJaWYg
KG5vZGVMaXN0ID09IG51bGwpIHsNCgkJcmV0dXJuOw0KCX0NCgl2YXIgbm9kZSA9IG5vZGVMaXN0
W3R5cGVdOw0KCWlmIChub2RlID09IG51bGwpIHsNCgkJcmV0dXJuOw0KCX0NCglub2RlTGlzdFt0
eXBlXSA9IG51bGw7DQoJdmFyIHByZXZOb2RlID0gbm9kZS5HZXRQcmV2aW91c05vZGUoKTsNCgl2
YXIgbmV4dE5vZGUgPSBub2RlLkdldE5leHROb2RlKCk7DQoJaWYgKHByZXZOb2RlID09IG51bGwp
IHsNCgkJdGhpcy5jb250YWN0Rmlyc3ROb2Rlc1t0eXBlXSA9IG5leHROb2RlOw0KCX0gZWxzZSB7
DQoJCXByZXZOb2RlLlNldE5leHROb2RlKG5leHROb2RlKTsNCgl9DQoJaWYgKG5leHROb2RlID09
IG51bGwpIHsNCgkJdGhpcy5jb250YWN0TGFzdE5vZGVzW3R5cGVdID0gcHJldk5vZGU7DQoJfSBl
bHNlIHsNCgkJbmV4dE5vZGUuU2V0UHJldmlvdXNOb2RlKHByZXZOb2RlKTsNCgl9DQoJQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGUuRnJlZU5vZGUobm9kZSk7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3R9IGNvbnRh
Y3QNCiAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0SUQNCiAqIEBwYXJhbSB7bnVtYmVyfSB0eXBl
DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3QucHJvdG90eXBlLkNy
ZWF0ZU5vZGUgPSBmdW5jdGlvbihjb250YWN0LCBjb250YWN0SUQsIHR5cGUpIHsNCgl2YXIgbm9k
ZUxpc3QgPSB0aGlzLmNvbnRhY3ROb2RlTG9va3VwW2NvbnRhY3RJRF07DQoJaWYgKG5vZGVMaXN0
W3R5cGVdID09IG51bGwpIHsNCgkJbm9kZUxpc3RbdHlwZV0gPSBCb3gyRC5EeW5hbWljcy5Db250
YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZS5HZXROb2RlKGNvbnRhY3QpOw0KCQl2YXIgcHJldk5vZGUg
PSB0aGlzLmNvbnRhY3RMYXN0Tm9kZXNbdHlwZV07DQoJCWlmIChwcmV2Tm9kZSAhPSBudWxsKSB7
DQoJCQlwcmV2Tm9kZS5TZXROZXh0Tm9kZShub2RlTGlzdFt0eXBlXSk7DQoJCQlub2RlTGlzdFt0
eXBlXS5TZXRQcmV2aW91c05vZGUocHJldk5vZGUpOw0KCQl9IGVsc2Ugew0KCQkJdGhpcy5jb250
YWN0Rmlyc3ROb2Rlc1t0eXBlXSA9IG5vZGVMaXN0W3R5cGVdOw0KCQl9DQoJCXRoaXMuY29udGFj
dExhc3ROb2Rlc1t0eXBlXSA9IG5vZGVMaXN0W3R5cGVdOw0KCX0NCn07DQovKioNCiAqIEByZXR1
cm4ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5w
cm90b3R5cGUuR2V0Q29udGFjdENvdW50ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuY29u
dGFjdENvdW50Ow0KfTsNCi8qKg0KICogQGVudW0ge251bWJlcn0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0TGlzdC5UWVBFUyA9IHsNCglub25TZW5zb3JFbmFibGVkVG91
Y2hpbmdDb250YWN0czogMCwNCglub25TZW5zb3JFbmFibGVkQ29udGludW91c0NvbnRhY3RzOiAx
LA0KCWFsbENvbnRhY3RzOiAyIC8vIEFzc3VtZWQgdG8gYmUgbGFzdCBieSBhYm92ZSBjb2RlDQp9
Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3R9IGNv
bnRhY3QNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNv
bnRhY3RMaXN0Tm9kZSA9IGZ1bmN0aW9uKGNvbnRhY3QpIHsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0K
CSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0fQ0KCSAqLw0KCXRo
aXMuY29udGFjdCA9IGNvbnRhY3Q7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94
MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGV9DQoJICovDQoJdGhpcy5uZXh0
ID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtCb3gyRC5EeW5hbWljcy5D
b250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZX0NCgkgKi8NCgl0aGlzLnByZXZpb3VzID0gbnVsbDsN
Cn07DQovKioNCiAqIEBwcml2YXRlDQogKiBAdHlwZSB7QXJyYXkuPCFCb3gyRC5EeW5hbWljcy5D
b250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZT4NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJDb250YWN0TGlzdE5vZGUuZnJlZU5vZGVzID0gW107DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdH0gY29udGFjdA0KICogQHJldHVybiB7IUJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3ROb2RlfQ0KICovDQpCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZS5HZXROb2RlID0gZnVuY3Rpb24oY29udGFjdCkg
ew0KCWlmIChCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZS5mcmVlTm9k
ZXMubGVuZ3RoID4gMCkgew0KCQl2YXIgbm9kZSA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
Q29udGFjdExpc3ROb2RlLmZyZWVOb2Rlcy5wb3AoKTsNCgkJbm9kZS5uZXh0ID0gbnVsbDsNCgkJ
bm9kZS5wcmV2aW91cyA9IG51bGw7DQoJCW5vZGUuY29udGFjdCA9IGNvbnRhY3Q7DQoJCXJldHVy
biBub2RlOw0KCX0gZWxzZSB7DQoJCXJldHVybiBuZXcgQm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJDb250YWN0TGlzdE5vZGUoY29udGFjdCk7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94
MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGV9IG5vZGUNCiAqLw0KQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGUuRnJlZU5vZGUgPSBmdW5jdGlvbihu
b2RlKSB7DQoJQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGUuZnJlZU5v
ZGVzLnB1c2gobm9kZSk7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge0JveDJELkR5bmFtaWNzLkNvbnRh
Y3RzLmIyQ29udGFjdExpc3ROb2RlfSBub2RlDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3Rz
LmIyQ29udGFjdExpc3ROb2RlLnByb3RvdHlwZS5TZXROZXh0Tm9kZSA9IGZ1bmN0aW9uKG5vZGUp
IHsNCgl0aGlzLm5leHQgPSBub2RlOw0KfTsNCi8qKg0KICogQHBhcmFtIHtCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZX0gbm9kZQ0KICovDQpCb3gyRC5EeW5hbWljcy5D
b250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZS5wcm90b3R5cGUuU2V0UHJldmlvdXNOb2RlID0gZnVu
Y3Rpb24obm9kZSkgew0KCXRoaXMucHJldmlvdXMgPSBub2RlOw0KfTsNCi8qKg0KICogQHJldHVy
biB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdH0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGUucHJvdG90eXBlLkdldENvbnRhY3QgPSBmdW5j
dGlvbigpIHsNCglyZXR1cm4gdGhpcy5jb250YWN0Ow0KfTsNCi8qKg0KICogQHJldHVybiB7Qm94
MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGV9DQogKi8NCkJveDJELkR5bmFt
aWNzLkNvbnRhY3RzLmIyQ29udGFjdExpc3ROb2RlLnByb3RvdHlwZS5HZXROZXh0Tm9kZSA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm5leHQ7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RMaXN0Tm9kZX0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJDb250YWN0TGlzdE5vZGUucHJvdG90eXBlLkdldFByZXZpb3VzTm9kZSA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLnByZXZpb3VzOw0KfTsNCi8qKg0KICogQGNvbnN0
cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFJlZ2lzdGVyID0g
ZnVuY3Rpb24gKCkgew0KCXRoaXMucG9vbCA9IG51bGw7DQoJdGhpcy5wb29sQ291bnQgPSAwOw0K
fTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
UG9zaXRpb25Tb2x2ZXJNYW5pZm9sZCA9IGZ1bmN0aW9uKCkgew0KCXRoaXMubV9ub3JtYWwgPSBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9zZXBhcmF0aW9ucyA9
IFtdOw0KCXRoaXMubV9wb2ludHMgPSBbXTsNCglmb3IgKHZhciBpID0gMDsgaSA8IEJveDJELkNv
bW1vbi5iMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzOyBpKyspIHsNCgkJdGhpcy5tX3Bv
aW50c1tpXSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJfQ0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWlu
dH0gY2MNCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb3NpdGlvblNvbHZlck1hbmlm
b2xkLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oY2MpIHsNCjsNCglzd2l0Y2ggKGNj
LnR5cGUpIHsNCgkJY2FzZSBCb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZC5lX2NpcmNsZXM6DQoJ
CQl0aGlzLl9Jbml0aWFsaXplQ2lyY2xlcyhjYyk7DQoJCQlicmVhazsNCgkJY2FzZSBCb3gyRC5D
b2xsaXNpb24uYjJNYW5pZm9sZC5lX2ZhY2VBOg0KCQkJdGhpcy5fSW5pdGlhbGl6ZUZhY2VBKGNj
KTsNCgkJCWJyZWFrOw0KCQljYXNlIEJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkLmVfZmFjZUI6
DQoJCQl0aGlzLl9Jbml0aWFsaXplRmFjZUIoY2MpOw0KCQkJYnJlYWs7DQoJfQ0KfTsNCi8qKg0K
ICogQHByaXZhdGUNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFj
dENvbnN0cmFpbnR9IGNjDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9zaXRpb25T
b2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUuX0luaXRpYWxpemVDaXJjbGVzID0gZnVuY3Rpb24oY2Mp
IHsNCgl2YXIgdE1hdCA9IGNjLmJvZHlBLm1feGYuUjsNCgl2YXIgdFZlYyA9IGNjLmxvY2FsUG9p
bnQ7DQoJdmFyIHBvaW50QVggPSBjYy5ib2R5QS5tX3hmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wx
LnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7DQoJdmFyIHBvaW50QVkgPSBjYy5i
b2R5QS5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIu
eSAqIHRWZWMueSk7DQoJdE1hdCA9IGNjLmJvZHlCLm1feGYuUjsNCgl0VmVjID0gY2MucG9pbnRz
WzBdLmxvY2FsUG9pbnQ7DQoJdmFyIHBvaW50QlggPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLngg
KyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7DQoJdmFyIHBv
aW50QlkgPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLngg
KyB0TWF0LmNvbDIueSAqIHRWZWMueSk7DQoJdmFyIGRYID0gcG9pbnRCWCAtIHBvaW50QVg7DQoJ
dmFyIGRZID0gcG9pbnRCWSAtIHBvaW50QVk7DQoJdmFyIGQyID0gZFggKiBkWCArIGRZICogZFk7
DQoJaWYgKGQyID4gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuTUlOX1ZBTFVFX1NRVUFSRUQpIHsN
CgkJdmFyIGQgPSBNYXRoLnNxcnQoZDIpOw0KCQl0aGlzLm1fbm9ybWFsLnggPSBkWCAvIGQ7DQoJ
CXRoaXMubV9ub3JtYWwueSA9IGRZIC8gZDsNCgl9IGVsc2Ugew0KCQl0aGlzLm1fbm9ybWFsLngg
PSAxLjA7DQoJCXRoaXMubV9ub3JtYWwueSA9IDAuMDsNCgl9DQoJdGhpcy5tX3BvaW50c1swXS54
ID0gMC41ICogKHBvaW50QVggKyBwb2ludEJYKTsNCgl0aGlzLm1fcG9pbnRzWzBdLnkgPSAwLjUg
KiAocG9pbnRBWSArIHBvaW50QlkpOw0KCXRoaXMubV9zZXBhcmF0aW9uc1swXSA9IGRYICogdGhp
cy5tX25vcm1hbC54ICsgZFkgKiB0aGlzLm1fbm9ybWFsLnkgLSBjYy5yYWRpdXM7DQp9Ow0KLyoq
DQogKiBAcHJpdmF0ZQ0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250
YWN0Q29uc3RyYWludH0gY2MNCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb3NpdGlv
blNvbHZlck1hbmlmb2xkLnByb3RvdHlwZS5fSW5pdGlhbGl6ZUZhY2VBID0gZnVuY3Rpb24oY2Mp
IHsNCgl0aGlzLm1fbm9ybWFsLnggPSBjYy5ib2R5QS5tX3hmLlIuY29sMS54ICogY2MubG9jYWxQ
bGFuZU5vcm1hbC54ICsgY2MuYm9keUEubV94Zi5SLmNvbDIueCAqIGNjLmxvY2FsUGxhbmVOb3Jt
YWwueTsNCgl0aGlzLm1fbm9ybWFsLnkgPSBjYy5ib2R5QS5tX3hmLlIuY29sMS55ICogY2MubG9j
YWxQbGFuZU5vcm1hbC54ICsgY2MuYm9keUEubV94Zi5SLmNvbDIueSAqIGNjLmxvY2FsUGxhbmVO
b3JtYWwueTsNCgl2YXIgcGxhbmVQb2ludFggPSBjYy5ib2R5QS5tX3hmLnBvc2l0aW9uLnggKyAo
Y2MuYm9keUEubV94Zi5SLmNvbDEueCAqIGNjLmxvY2FsUG9pbnQueCArIGNjLmJvZHlBLm1feGYu
Ui5jb2wyLnggKiBjYy5sb2NhbFBvaW50LnkpOw0KCXZhciBwbGFuZVBvaW50WSA9IGNjLmJvZHlB
Lm1feGYucG9zaXRpb24ueSArIChjYy5ib2R5QS5tX3hmLlIuY29sMS55ICogY2MubG9jYWxQb2lu
dC54ICsgY2MuYm9keUEubV94Zi5SLmNvbDIueSAqIGNjLmxvY2FsUG9pbnQueSk7DQoJZm9yICh2
YXIgaSA9IDA7IGkgPCBjYy5wb2ludENvdW50OyBpKyspIHsNCgkJdmFyIGNsaXBQb2ludFggPSBj
Yy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnggKyAoY2MuYm9keUIubV94Zi5SLmNvbDEueCAqIGNjLnBv
aW50c1tpXS5sb2NhbFBvaW50LnggKyBjYy5ib2R5Qi5tX3hmLlIuY29sMi54ICogY2MucG9pbnRz
W2ldLmxvY2FsUG9pbnQueSk7DQoJCXZhciBjbGlwUG9pbnRZID0gY2MuYm9keUIubV94Zi5wb3Np
dGlvbi55ICsgKGNjLmJvZHlCLm1feGYuUi5jb2wxLnkgKiBjYy5wb2ludHNbaV0ubG9jYWxQb2lu
dC54ICsgY2MuYm9keUIubV94Zi5SLmNvbDIueSAqIGNjLnBvaW50c1tpXS5sb2NhbFBvaW50Lnkp
Ow0KCQl0aGlzLm1fc2VwYXJhdGlvbnNbaV0gPSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAq
IHRoaXMubV9ub3JtYWwueCArIChjbGlwUG9pbnRZIC0gcGxhbmVQb2ludFkpICogdGhpcy5tX25v
cm1hbC55IC0gY2MucmFkaXVzOw0KCQl0aGlzLm1fcG9pbnRzW2ldLnggPSBjbGlwUG9pbnRYOw0K
CQl0aGlzLm1fcG9pbnRzW2ldLnkgPSBjbGlwUG9pbnRZOw0KCX0NCn07DQovKioNCiAqIEBwcml2
YXRlDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJh
aW50fSBjYw0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvc2l0aW9uU29sdmVyTWFu
aWZvbGQucHJvdG90eXBlLl9Jbml0aWFsaXplRmFjZUIgPSBmdW5jdGlvbihjYykgew0KCXRoaXMu
bV9ub3JtYWwueCA9IGNjLmJvZHlCLm1feGYuUi5jb2wxLnggKiBjYy5sb2NhbFBsYW5lTm9ybWFs
LnggKyBjYy5ib2R5Qi5tX3hmLlIuY29sMi54ICogY2MubG9jYWxQbGFuZU5vcm1hbC55Ow0KCXRo
aXMubV9ub3JtYWwueSA9IGNjLmJvZHlCLm1feGYuUi5jb2wxLnkgKiBjYy5sb2NhbFBsYW5lTm9y
bWFsLnggKyBjYy5ib2R5Qi5tX3hmLlIuY29sMi55ICogY2MubG9jYWxQbGFuZU5vcm1hbC55Ow0K
CXZhciBwbGFuZVBvaW50WCA9IGNjLmJvZHlCLm1feGYucG9zaXRpb24ueCArIChjYy5ib2R5Qi5t
X3hmLlIuY29sMS54ICogY2MubG9jYWxQb2ludC54ICsgY2MuYm9keUIubV94Zi5SLmNvbDIueCAq
IGNjLmxvY2FsUG9pbnQueSk7DQoJdmFyIHBsYW5lUG9pbnRZID0gY2MuYm9keUIubV94Zi5wb3Np
dGlvbi55ICsgKGNjLmJvZHlCLm1feGYuUi5jb2wxLnkgKiBjYy5sb2NhbFBvaW50LnggKyBjYy5i
b2R5Qi5tX3hmLlIuY29sMi55ICogY2MubG9jYWxQb2ludC55KTsNCglmb3IgKHZhciBpID0gMDsg
aSA8IGNjLnBvaW50Q291bnQ7IGkrKykgew0KCQl2YXIgY2xpcFBvaW50WCA9IGNjLmJvZHlBLm1f
eGYucG9zaXRpb24ueCArIChjYy5ib2R5QS5tX3hmLlIuY29sMS54ICogY2MucG9pbnRzW2ldLmxv
Y2FsUG9pbnQueCArIGNjLmJvZHlBLm1feGYuUi5jb2wyLnggKiBjYy5wb2ludHNbaV0ubG9jYWxQ
b2ludC55KTsNCgkJdmFyIGNsaXBQb2ludFkgPSBjYy5ib2R5QS5tX3hmLnBvc2l0aW9uLnkgKyAo
Y2MuYm9keUEubV94Zi5SLmNvbDEueSAqIGNjLnBvaW50c1tpXS5sb2NhbFBvaW50LnggKyBjYy5i
b2R5QS5tX3hmLlIuY29sMi55ICogY2MucG9pbnRzW2ldLmxvY2FsUG9pbnQueSk7DQoJCXRoaXMu
bV9zZXBhcmF0aW9uc1tpXSA9IChjbGlwUG9pbnRYIC0gcGxhbmVQb2ludFgpICogdGhpcy5tX25v
cm1hbC54ICsgKGNsaXBQb2ludFkgLSBwbGFuZVBvaW50WSkgKiB0aGlzLm1fbm9ybWFsLnkgLSBj
Yy5yYWRpdXM7DQoJCXRoaXMubV9wb2ludHNbaV0uU2V0KGNsaXBQb2ludFgsIGNsaXBQb2ludFkp
Ow0KCX0NCgl0aGlzLm1fbm9ybWFsLnggKj0gLTE7DQoJdGhpcy5tX25vcm1hbC55ICo9IC0xOw0K
fTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
Q29udGFjdFNvbHZlciA9IGZ1bmN0aW9uKCkgew0KCS8qKg0KCSAqIEBwcml2YXRlDQoJICogQHR5
cGUge0FycmF5LjwhQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWludD59
DQoJICovDQoJdGhpcy5tX2NvbnN0cmFpbnRzID0gW107DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFC
b3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwfSBzdGVwDQogKiBAcGFyYW0ge0FycmF5LjwhQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Pn0gY29udGFjdHMNCiAqIEBwYXJhbSB7bnVtYmVy
fSBjb250YWN0Q291bnQNCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29s
dmVyLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oc3RlcCwgY29udGFjdHMsIGNvbnRh
Y3RDb3VudCkgew0KCXRoaXMubV9jb25zdHJhaW50Q291bnQgPSBjb250YWN0Q291bnQ7DQoJd2hp
bGUgKHRoaXMubV9jb25zdHJhaW50cy5sZW5ndGggPCB0aGlzLm1fY29uc3RyYWludENvdW50KSB7
DQoJCXRoaXMubV9jb25zdHJhaW50c1t0aGlzLm1fY29uc3RyYWludHMubGVuZ3RoXSA9IG5ldyBC
b3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50KCk7DQoJfQ0KCWZvciAo
dmFyIGkgPSAwOyBpIDwgY29udGFjdENvdW50OyBpKyspIHsNCgkJdmFyIGNvbnRhY3QgPSBjb250
YWN0c1tpXTsNCgkJdmFyIGZpeHR1cmVBID0gY29udGFjdC5tX2ZpeHR1cmVBOw0KCQl2YXIgZml4
dHVyZUIgPSBjb250YWN0Lm1fZml4dHVyZUI7DQoJCXZhciBzaGFwZUEgPSBmaXh0dXJlQS5tX3No
YXBlOw0KCQl2YXIgc2hhcGVCID0gZml4dHVyZUIubV9zaGFwZTsNCgkJdmFyIHJhZGl1c0EgPSBz
aGFwZUEubV9yYWRpdXM7DQoJCXZhciByYWRpdXNCID0gc2hhcGVCLm1fcmFkaXVzOw0KCQl2YXIg
Ym9keUEgPSBmaXh0dXJlQS5HZXRCb2R5KCk7DQoJCXZhciBib2R5QiA9IGZpeHR1cmVCLkdldEJv
ZHkoKTsNCgkJdmFyIG1hbmlmb2xkID0gY29udGFjdC5HZXRNYW5pZm9sZCgpOw0KCQl2YXIgZnJp
Y3Rpb24gPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMk1peEZyaWN0aW9uKGZpeHR1cmVBLkdl
dEZyaWN0aW9uKCksIGZpeHR1cmVCLkdldEZyaWN0aW9uKCkpOw0KCQl2YXIgcmVzdGl0dXRpb24g
PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMk1peFJlc3RpdHV0aW9uKGZpeHR1cmVBLkdldFJl
c3RpdHV0aW9uKCksIGZpeHR1cmVCLkdldFJlc3RpdHV0aW9uKCkpOw0KCQl2YXIgdkFYID0gYm9k
eUEubV9saW5lYXJWZWxvY2l0eS54Ow0KCQl2YXIgdkFZID0gYm9keUEubV9saW5lYXJWZWxvY2l0
eS55Ow0KCQl2YXIgdkJYID0gYm9keUIubV9saW5lYXJWZWxvY2l0eS54Ow0KCQl2YXIgdkJZID0g
Ym9keUIubV9saW5lYXJWZWxvY2l0eS55Ow0KCQl2YXIgd0EgPSBib2R5QS5tX2FuZ3VsYXJWZWxv
Y2l0eTsNCgkJdmFyIHdCID0gYm9keUIubV9hbmd1bGFyVmVsb2NpdHk7DQo7DQoJCUJveDJELkR5
bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQuSW5pdGlhbGl6
ZShtYW5pZm9sZCwgYm9keUEubV94ZiwgcmFkaXVzQSwgYm9keUIubV94ZiwgcmFkaXVzQik7DQoJ
CXZhciBub3JtYWxYID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnNf
d29ybGRNYW5pZm9sZC5tX25vcm1hbC54Ow0KCQl2YXIgbm9ybWFsWSA9IEJveDJELkR5bmFtaWNz
LkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9ub3JtYWwueTsNCgkJ
dmFyIGNjID0gdGhpcy5tX2NvbnN0cmFpbnRzW2ldOw0KCQljYy5ib2R5QSA9IGJvZHlBOw0KCQlj
Yy5ib2R5QiA9IGJvZHlCOw0KCQljYy5tYW5pZm9sZCA9IG1hbmlmb2xkOw0KCQljYy5ub3JtYWwu
eCA9IG5vcm1hbFg7DQoJCWNjLm5vcm1hbC55ID0gbm9ybWFsWTsNCgkJY2MucG9pbnRDb3VudCA9
IG1hbmlmb2xkLm1fcG9pbnRDb3VudDsNCgkJY2MuZnJpY3Rpb24gPSBmcmljdGlvbjsNCgkJY2Mu
cmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjsNCgkJY2MubG9jYWxQbGFuZU5vcm1hbC54ID0gbWFu
aWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLng7DQoJCWNjLmxvY2FsUGxhbmVOb3JtYWwueSA9IG1h
bmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC55Ow0KCQljYy5sb2NhbFBvaW50LnggPSBtYW5pZm9s
ZC5tX2xvY2FsUG9pbnQueDsNCgkJY2MubG9jYWxQb2ludC55ID0gbWFuaWZvbGQubV9sb2NhbFBv
aW50Lnk7DQoJCWNjLnJhZGl1cyA9IHJhZGl1c0EgKyByYWRpdXNCOw0KCQljYy50eXBlID0gbWFu
aWZvbGQubV90eXBlOw0KCQlmb3IgKHZhciBrID0gMDsgayA8IGNjLnBvaW50Q291bnQ7ICsraykg
ew0KCQkJdmFyIGNwID0gbWFuaWZvbGQubV9wb2ludHNba107DQoJCQl2YXIgY2NwID0gY2MucG9p
bnRzW2tdOw0KCQkJY2NwLm5vcm1hbEltcHVsc2UgPSBjcC5tX25vcm1hbEltcHVsc2U7DQoJCQlj
Y3AudGFuZ2VudEltcHVsc2UgPSBjcC5tX3RhbmdlbnRJbXB1bHNlOw0KCQkJY2NwLmxvY2FsUG9p
bnQuU2V0VihjcC5tX2xvY2FsUG9pbnQpOw0KCQkJdmFyIHJBWCA9IGNjcC5yQS54ID0gQm94MkQu
RHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnNfd29ybGRNYW5pZm9sZC5tX3BvaW50
c1trXS54IC0gYm9keUEubV9zd2VlcC5jLng7DQoJCQl2YXIgckFZID0gY2NwLnJBLnkgPSBCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fcG9p
bnRzW2tdLnkgLSBib2R5QS5tX3N3ZWVwLmMueTsNCgkJCXZhciByQlggPSBjY3AuckIueCA9IEJv
eDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9w
b2ludHNba10ueCAtIGJvZHlCLm1fc3dlZXAuYy54Ow0KCQkJdmFyIHJCWSA9IGNjcC5yQi55ID0g
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnNfd29ybGRNYW5pZm9sZC5t
X3BvaW50c1trXS55IC0gYm9keUIubV9zd2VlcC5jLnk7DQoJCQl2YXIgcm5BID0gckFYICogbm9y
bWFsWSAtIHJBWSAqIG5vcm1hbFg7DQoJCQl2YXIgcm5CID0gckJYICogbm9ybWFsWSAtIHJCWSAq
IG5vcm1hbFg7DQoJCQlybkEgKj0gcm5BOw0KCQkJcm5CICo9IHJuQjsNCgkJCXZhciBrTm9ybWFs
ID0gYm9keUEubV9pbnZNYXNzICsgYm9keUIubV9pbnZNYXNzICsgYm9keUEubV9pbnZJICogcm5B
ICsgYm9keUIubV9pbnZJICogcm5COw0KCQkJY2NwLm5vcm1hbE1hc3MgPSAxLjAgLyBrTm9ybWFs
Ow0KCQkJdmFyIGtFcXVhbGl6ZWQgPSBib2R5QS5tX21hc3MgKiBib2R5QS5tX2ludk1hc3MgKyBi
b2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludk1hc3M7DQoJCQlrRXF1YWxpemVkICs9IGJvZHlBLm1f
bWFzcyAqIGJvZHlBLm1faW52SSAqIHJuQSArIGJvZHlCLm1fbWFzcyAqIGJvZHlCLm1faW52SSAq
IHJuQjsNCgkJCWNjcC5lcXVhbGl6ZWRNYXNzID0gMS4wIC8ga0VxdWFsaXplZDsNCgkJCXZhciB0
YW5nZW50WCA9IG5vcm1hbFk7DQoJCQl2YXIgdGFuZ2VudFkgPSAoLW5vcm1hbFgpOw0KCQkJdmFy
IHJ0QSA9IHJBWCAqIHRhbmdlbnRZIC0gckFZICogdGFuZ2VudFg7DQoJCQl2YXIgcnRCID0gckJY
ICogdGFuZ2VudFkgLSByQlkgKiB0YW5nZW50WDsNCgkJCXJ0QSAqPSBydEE7DQoJCQlydEIgKj0g
cnRCOw0KCQkJdmFyIGtUYW5nZW50ID0gYm9keUEubV9pbnZNYXNzICsgYm9keUIubV9pbnZNYXNz
ICsgYm9keUEubV9pbnZJICogcnRBICsgYm9keUIubV9pbnZJICogcnRCOw0KCQkJY2NwLnRhbmdl
bnRNYXNzID0gMS4wIC8ga1RhbmdlbnQ7DQoJCQljY3AudmVsb2NpdHlCaWFzID0gMC4wOw0KCQkJ
dmFyIHRYID0gdkJYICsgKCgtd0IgKiByQlkpKSAtIHZBWCAtICgoLXdBICogckFZKSk7DQoJCQl2
YXIgdFkgPSB2QlkgKyAod0IgKiByQlgpIC0gdkFZIC0gKHdBICogckFYKTsNCgkJCXZhciB2UmVs
ID0gY2Mubm9ybWFsLnggKiB0WCArIGNjLm5vcm1hbC55ICogdFk7DQoJCQlpZiAodlJlbCA8ICgt
Qm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfdmVsb2NpdHlUaHJlc2hvbGQpKSB7DQoJCQkJY2Nw
LnZlbG9jaXR5QmlhcyArPSAoLWNjLnJlc3RpdHV0aW9uICogdlJlbCk7DQoJCQl9DQoJCX0NCgkJ
aWYgKGNjLnBvaW50Q291bnQgPT0gMikgew0KCQkJdmFyIGNjcDEgPSBjYy5wb2ludHNbMF07DQoJ
CQl2YXIgY2NwMiA9IGNjLnBvaW50c1sxXTsNCgkJCXZhciBpbnZNYXNzQSA9IGJvZHlBLm1faW52
TWFzczsNCgkJCXZhciBpbnZJQSA9IGJvZHlBLm1faW52STsNCgkJCXZhciBpbnZNYXNzQiA9IGJv
ZHlCLm1faW52TWFzczsNCgkJCXZhciBpbnZJQiA9IGJvZHlCLm1faW52STsNCgkJCXZhciBybjFB
ID0gY2NwMS5yQS54ICogbm9ybWFsWSAtIGNjcDEuckEueSAqIG5vcm1hbFg7DQoJCQl2YXIgcm4x
QiA9IGNjcDEuckIueCAqIG5vcm1hbFkgLSBjY3AxLnJCLnkgKiBub3JtYWxYOw0KCQkJdmFyIHJu
MkEgPSBjY3AyLnJBLnggKiBub3JtYWxZIC0gY2NwMi5yQS55ICogbm9ybWFsWDsNCgkJCXZhciBy
bjJCID0gY2NwMi5yQi54ICogbm9ybWFsWSAtIGNjcDIuckIueSAqIG5vcm1hbFg7DQoJCQl2YXIg
azExID0gaW52TWFzc0EgKyBpbnZNYXNzQiArIGludklBICogcm4xQSAqIHJuMUEgKyBpbnZJQiAq
IHJuMUIgKiBybjFCOw0KCQkJdmFyIGsyMiA9IGludk1hc3NBICsgaW52TWFzc0IgKyBpbnZJQSAq
IHJuMkEgKiBybjJBICsgaW52SUIgKiBybjJCICogcm4yQjsNCgkJCXZhciBrMTIgPSBpbnZNYXNz
QSArIGludk1hc3NCICsgaW52SUEgKiBybjFBICogcm4yQSArIGludklCICogcm4xQiAqIHJuMkI7
DQoJCQl2YXIga19tYXhDb25kaXRpb25OdW1iZXIgPSAxMDAuMDsNCgkJCWlmIChrMTEgKiBrMTEg
PCBrX21heENvbmRpdGlvbk51bWJlciAqIChrMTEgKiBrMjIgLSBrMTIgKiBrMTIpKSB7DQoJCQkJ
Y2MuSy5jb2wxLlNldChrMTEsIGsxMik7DQoJCQkJY2MuSy5jb2wyLlNldChrMTIsIGsyMik7DQoJ
CQkJY2MuSy5HZXRJbnZlcnNlKGNjLm5vcm1hbE1hc3MpOw0KCQkJfSBlbHNlIHsNCgkJCQljYy5w
b2ludENvdW50ID0gMTsNCgkJCX0NCgkJfQ0KCX0NCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJE
LkR5bmFtaWNzLmIyVGltZVN0ZXB9IHN0ZXANCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0
aW9uKHN0ZXApIHsNCglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb25zdHJhaW50Q291bnQ7
ICsraSkgew0KCQl2YXIgYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTsNCgkJdmFyIGJvZHlBID0g
Yy5ib2R5QTsNCgkJdmFyIGJvZHlCID0gYy5ib2R5QjsNCgkJdmFyIGludk1hc3NBID0gYm9keUEu
bV9pbnZNYXNzOw0KCQl2YXIgaW52SUEgPSBib2R5QS5tX2ludkk7DQoJCXZhciBpbnZNYXNzQiA9
IGJvZHlCLm1faW52TWFzczsNCgkJdmFyIGludklCID0gYm9keUIubV9pbnZJOw0KCQl2YXIgbm9y
bWFsWCA9IGMubm9ybWFsLng7DQoJCXZhciBub3JtYWxZID0gYy5ub3JtYWwueTsNCgkJdmFyIHRh
bmdlbnRYID0gbm9ybWFsWTsNCgkJdmFyIHRhbmdlbnRZID0gKC1ub3JtYWxYKTsNCgkJdmFyIHRY
ID0gMDsNCgkJdmFyIGogPSAwOw0KCQl2YXIgdENvdW50ID0gMDsNCgkJaWYgKHN0ZXAud2FybVN0
YXJ0aW5nKSB7DQoJCQl0Q291bnQgPSBjLnBvaW50Q291bnQ7DQoJCQlmb3IgKGogPSAwOyBqIDwg
dENvdW50OyArK2opIHsNCgkJCQl2YXIgY2NwID0gYy5wb2ludHNbal07DQoJCQkJY2NwLm5vcm1h
bEltcHVsc2UgKj0gc3RlcC5kdFJhdGlvOw0KCQkJCWNjcC50YW5nZW50SW1wdWxzZSAqPSBzdGVw
LmR0UmF0aW87DQoJCQkJdmFyIFBYID0gY2NwLm5vcm1hbEltcHVsc2UgKiBub3JtYWxYICsgY2Nw
LnRhbmdlbnRJbXB1bHNlICogdGFuZ2VudFg7DQoJCQkJdmFyIFBZID0gY2NwLm5vcm1hbEltcHVs
c2UgKiBub3JtYWxZICsgY2NwLnRhbmdlbnRJbXB1bHNlICogdGFuZ2VudFk7DQoJCQkJYm9keUEu
bV9hbmd1bGFyVmVsb2NpdHkgLT0gaW52SUEgKiAoY2NwLnJBLnggKiBQWSAtIGNjcC5yQS55ICog
UFgpOw0KCQkJCWJvZHlBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBpbnZNYXNzQSAqIFBYOw0KCQkJ
CWJvZHlBLm1fbGluZWFyVmVsb2NpdHkueSAtPSBpbnZNYXNzQSAqIFBZOw0KCQkJCWJvZHlCLm1f
YW5ndWxhclZlbG9jaXR5ICs9IGludklCICogKGNjcC5yQi54ICogUFkgLSBjY3AuckIueSAqIFBY
KTsNCgkJCQlib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnggKz0gaW52TWFzc0IgKiBQWDsNCgkJCQli
b2R5Qi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gaW52TWFzc0IgKiBQWTsNCgkJCX0NCgkJfSBlbHNl
IHsNCgkJCXRDb3VudCA9IGMucG9pbnRDb3VudDsNCgkJCWZvciAoaiA9IDA7IGogPCB0Q291bnQ7
ICsraikgew0KCQkJCXZhciBjY3AyID0gYy5wb2ludHNbal07DQoJCQkJY2NwMi5ub3JtYWxJbXB1
bHNlID0gMC4wOw0KCQkJCWNjcDIudGFuZ2VudEltcHVsc2UgPSAwLjA7DQoJCQl9DQoJCX0NCgl9
DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5T
b2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbigpIHsNCglmb3IgKHZhciBpID0gMDsg
aSA8IHRoaXMubV9jb25zdHJhaW50Q291bnQ7IGkrKykgew0KCQl0aGlzLlNvbHZlVmVsb2NpdHlD
b25zdHJhaW50c19Db25zdHJhaW50KHRoaXMubV9jb25zdHJhaW50c1tpXSk7DQoJfQ0KfTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWlu
dH0gYw0KICovDQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIucHJvdG90
eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19Db25zdHJhaW50ID0gZnVuY3Rpb24oYykgew0K
CXZhciBub3JtYWxYID0gYy5ub3JtYWwueDsNCgl2YXIgbm9ybWFsWSA9IGMubm9ybWFsLnk7DQoJ
Zm9yICh2YXIgaiA9IDA7IGogPCBjLnBvaW50Q291bnQ7IGorKykgew0KCQlCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJh
aW50c19Db25zdHJhaW50UG9pbnQoYywgYy5wb2ludHNbal0pOw0KCX0NCglpZiAoYy5wb2ludENv
dW50ID09IDEpIHsNCgkJdmFyIGNjcCA9IGMucG9pbnRzWzBdOw0KCQl2YXIgZHZYID0gYy5ib2R5
Qi5tX2xpbmVhclZlbG9jaXR5LnggLSAoYy5ib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eSAqIGNjcC5y
Qi55KSAtIGMuYm9keUEubV9saW5lYXJWZWxvY2l0eS54ICsgKGMuYm9keUEubV9hbmd1bGFyVmVs
b2NpdHkgKiBjY3AuckEueSk7DQoJCXZhciBkdlkgPSBjLmJvZHlCLm1fbGluZWFyVmVsb2NpdHku
eSArIChjLmJvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICogY2NwLnJCLngpIC0gYy5ib2R5QS5tX2xp
bmVhclZlbG9jaXR5LnkgLSAoYy5ib2R5QS5tX2FuZ3VsYXJWZWxvY2l0eSAqIGNjcC5yQS54KTsN
CgkJdmFyIHZuID0gZHZYICogbm9ybWFsWCArIGR2WSAqIG5vcm1hbFk7DQoJCXZhciBuZXdJbXB1
bHNlID0gY2NwLm5vcm1hbEltcHVsc2UgLSAoY2NwLm5vcm1hbE1hc3MgKiAodm4gLSBjY3AudmVs
b2NpdHlCaWFzKSk7DQoJCW5ld0ltcHVsc2UgPSBuZXdJbXB1bHNlID4gMCA/IG5ld0ltcHVsc2Ug
OiAwLjA7DQoJCXZhciBpbXB1bHNlTGFtYmRhID0gbmV3SW1wdWxzZSAtIGNjcC5ub3JtYWxJbXB1
bHNlOw0KCQl2YXIgUFggPSBpbXB1bHNlTGFtYmRhICogbm9ybWFsWDsNCgkJdmFyIFBZID0gaW1w
dWxzZUxhbWJkYSAqIG5vcm1hbFk7DQoJCWMuYm9keUEubV9saW5lYXJWZWxvY2l0eS54IC09IGMu
Ym9keUEubV9pbnZNYXNzICogUFg7DQoJCWMuYm9keUEubV9saW5lYXJWZWxvY2l0eS55IC09IGMu
Ym9keUEubV9pbnZNYXNzICogUFk7DQoJCWMuYm9keUEubV9hbmd1bGFyVmVsb2NpdHkgLT0gYy5i
b2R5QS5tX2ludkkgKiAoY2NwLnJBLnggKiBQWSAtIGNjcC5yQS55ICogUFgpOw0KCQljLmJvZHlC
Lm1fbGluZWFyVmVsb2NpdHkueCArPSBjLmJvZHlCLm1faW52TWFzcyAqIFBYOw0KCQljLmJvZHlC
Lm1fbGluZWFyVmVsb2NpdHkueSArPSBjLmJvZHlCLm1faW52TWFzcyAqIFBZOw0KCQljLmJvZHlC
Lm1fYW5ndWxhclZlbG9jaXR5ICs9IGMuYm9keUIubV9pbnZJICogKGNjcC5yQi54ICogUFkgLSBj
Y3AuckIueSAqIFBYKTsNCgkJY2NwLm5vcm1hbEltcHVsc2UgPSBuZXdJbXB1bHNlOw0KCX0gZWxz
ZSB7DQoJCXZhciBjcDEgPSBjLnBvaW50c1swXTsNCgkJdmFyIGNwMiA9IGMucG9pbnRzWzFdOw0K
CQl2YXIgYVggPSBjcDEubm9ybWFsSW1wdWxzZTsNCgkJdmFyIGFZID0gY3AyLm5vcm1hbEltcHVs
c2U7DQoJCXZhciBkdjFYID0gYy5ib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnggLSBjLmJvZHlCLm1f
YW5ndWxhclZlbG9jaXR5ICogY3AxLnJCLnkgLSBjLmJvZHlBLm1fbGluZWFyVmVsb2NpdHkueCAr
IGMuYm9keUEubV9hbmd1bGFyVmVsb2NpdHkgKiBjcDEuckEueTsNCgkJdmFyIGR2MVkgPSBjLmJv
ZHlCLm1fbGluZWFyVmVsb2NpdHkueSArIGMuYm9keUIubV9hbmd1bGFyVmVsb2NpdHkgKiBjcDEu
ckIueCAtIGMuYm9keUEubV9saW5lYXJWZWxvY2l0eS55IC0gYy5ib2R5QS5tX2FuZ3VsYXJWZWxv
Y2l0eSAqIGNwMS5yQS54Ow0KCQl2YXIgZHYyWCA9IGMuYm9keUIubV9saW5lYXJWZWxvY2l0eS54
IC0gYy5ib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eSAqIGNwMi5yQi55IC0gYy5ib2R5QS5tX2xpbmVh
clZlbG9jaXR5LnggKyBjLmJvZHlBLm1fYW5ndWxhclZlbG9jaXR5ICogY3AyLnJBLnk7DQoJCXZh
ciBkdjJZID0gYy5ib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnkgKyBjLmJvZHlCLm1fYW5ndWxhclZl
bG9jaXR5ICogY3AyLnJCLnggLSBjLmJvZHlBLm1fbGluZWFyVmVsb2NpdHkueSAtIGMuYm9keUEu
bV9hbmd1bGFyVmVsb2NpdHkgKiBjcDIuckEueDsNCgkJdmFyIGJYID0gKGR2MVggKiBub3JtYWxY
ICsgZHYxWSAqIG5vcm1hbFkpIC0gY3AxLnZlbG9jaXR5QmlhczsNCgkJdmFyIGJZID0gKGR2Mlgg
KiBub3JtYWxYICsgZHYyWSAqIG5vcm1hbFkpIC0gY3AyLnZlbG9jaXR5QmlhczsNCgkJYlggLT0g
Yy5LLmNvbDEueCAqIGFYICsgYy5LLmNvbDIueCAqIGFZOw0KCQliWSAtPSBjLksuY29sMS55ICog
YVggKyBjLksuY29sMi55ICogYVk7DQoJCWZvciAoOzspIHsNCgkJCXZhciBmaXJzdFggPSAoLShj
Lm5vcm1hbE1hc3MuY29sMS54ICogYlggKyBjLm5vcm1hbE1hc3MuY29sMi54ICogYlkpKTsNCgkJ
CWlmIChmaXJzdFggPj0gMCkgew0KCQkJCXZhciBmaXJzdFkgPSAoLShjLm5vcm1hbE1hc3MuY29s
MS55ICogYlggKyBjLm5vcm1hbE1hc3MuY29sMi55ICogYlkpKTsNCgkJCQlpZihmaXJzdFkgPj0g
MCkgew0KCQkJCQl2YXIgZFggPSBmaXJzdFggLSBhWDsNCgkJCQkJdmFyIGRZID0gZmlyc3RZIC0g
YVk7DQoJCQkJCXRoaXMuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX0NvbnN0cmFpbnRQb2ludFVw
ZGF0ZShjLCBjcDEsIGNwMiwgZmlyc3RYIC0gYVgsIGZpcnN0WSAtIGFZKTsNCgkJCQkJY3AxLm5v
cm1hbEltcHVsc2UgPSBmaXJzdFg7DQoJCQkJCWNwMi5ub3JtYWxJbXB1bHNlID0gZmlyc3RZOw0K
CQkJCQlicmVhazsNCgkJCQl9DQoJCQl9DQoJCQl2YXIgc2Vjb25kWCA9ICgtY3AxLm5vcm1hbE1h
c3MgKiBiWCk7DQoJCQlpZiAoc2Vjb25kWCA+PSAwKSB7DQoJCQkJaWYgKChjLksuY29sMS55ICog
c2Vjb25kWCArIGJZKSA+PSAwKSB7DQoJCQkJCXZhciBkWCA9IHNlY29uZFggLSBhWDsNCgkJCQkJ
dmFyIGRZID0gLWFZOw0KCQkJCQl0aGlzLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19Db25zdHJh
aW50UG9pbnRVcGRhdGUoYywgY3AxLCBjcDIsIHNlY29uZFggLSBhWCwgLWFZKTsNCgkJCQkJY3Ax
Lm5vcm1hbEltcHVsc2UgPSBzZWNvbmRYOw0KCQkJCQljcDIubm9ybWFsSW1wdWxzZSA9IDA7DQoJ
CQkJCWJyZWFrOw0KCQkJCX0NCgkJCX0NCgkJCXZhciBzZWNvbmRZID0gKC1jcDIubm9ybWFsTWFz
cyAqIGJZKTsNCgkJCWlmIChzZWNvbmRZID49IDApIHsNCgkJCQlpZiAoKGMuSy5jb2wyLnggKiBz
ZWNvbmRZICsgYlgpID49IDApIHsNCgkJCQkJdGhpcy5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNf
Q29uc3RyYWludFBvaW50VXBkYXRlKGMsIGNwMSwgY3AyLCAtYVgsIHNlY29uZFkgLSBhWSk7DQoJ
CQkJCWNwMS5ub3JtYWxJbXB1bHNlID0gMDsNCgkJCQkJY3AyLm5vcm1hbEltcHVsc2UgPSBzZWNv
bmRZOw0KCQkJCQlicmVhazsNCgkJCQl9DQoJCQl9DQoJCQlpZiAoYlggPj0gMCAmJiBiWSA+PSAw
KSB7DQoJCQkJdGhpcy5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfQ29uc3RyYWludFBvaW50VXBk
YXRlKGMsIGNwMSwgY3AyLCAtYVgsIC1hWSk7DQoJCQkJY3AxLm5vcm1hbEltcHVsc2UgPSAwOw0K
CQkJCWNwMi5ub3JtYWxJbXB1bHNlID0gMDsNCgkJCQlicmVhazsNCgkJCX0NCgkJCWJyZWFrOw0K
CQl9DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJD
b250YWN0Q29uc3RyYWludH0gYw0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJDb250YWN0Q29uc3RyYWludFBvaW50fSBjY3ANCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFj
dHMuYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfQ29u
c3RyYWludFBvaW50ID0gZnVuY3Rpb24oYywgY2NwKSB7DQoJdmFyIHRhbmdlbnRYID0gYy5ub3Jt
YWwueTsNCgl2YXIgdGFuZ2VudFkgPSAtYy5ub3JtYWwueDsNCgl2YXIgZHZYID0gYy5ib2R5Qi5t
X2xpbmVhclZlbG9jaXR5LnggLSBjLmJvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICogY2NwLnJCLnkg
LSBjLmJvZHlBLm1fbGluZWFyVmVsb2NpdHkueCArIGMuYm9keUEubV9hbmd1bGFyVmVsb2NpdHkg
KiBjY3AuckEueTsNCgl2YXIgZHZZID0gYy5ib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnkgKyBjLmJv
ZHlCLm1fYW5ndWxhclZlbG9jaXR5ICogY2NwLnJCLnggLSBjLmJvZHlBLm1fbGluZWFyVmVsb2Np
dHkueSAtIGMuYm9keUEubV9hbmd1bGFyVmVsb2NpdHkgKiBjY3AuckEueDsNCgl2YXIgdnQgPSBk
dlggKiB0YW5nZW50WCArIGR2WSAqIHRhbmdlbnRZOw0KCXZhciBtYXhGcmljdGlvbiA9IGMuZnJp
Y3Rpb24gKiBjY3Aubm9ybWFsSW1wdWxzZTsNCgl2YXIgbmV3SW1wdWxzZSA9IEJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5DbGFtcChjY3AudGFuZ2VudEltcHVsc2UgLSBjY3AudGFuZ2VudE1hc3Mg
KiB2dCwgLW1heEZyaWN0aW9uLCBtYXhGcmljdGlvbik7DQoJdmFyIGltcHVsc2VMYW1iZGEgPSBu
ZXdJbXB1bHNlIC0gY2NwLnRhbmdlbnRJbXB1bHNlOw0KCXZhciBQWCA9IGltcHVsc2VMYW1iZGEg
KiB0YW5nZW50WDsNCgl2YXIgUFkgPSBpbXB1bHNlTGFtYmRhICogdGFuZ2VudFk7DQoJYy5ib2R5
QS5tX2xpbmVhclZlbG9jaXR5LnggLT0gYy5ib2R5QS5tX2ludk1hc3MgKiBQWDsNCgljLmJvZHlB
Lm1fbGluZWFyVmVsb2NpdHkueSAtPSBjLmJvZHlBLm1faW52TWFzcyAqIFBZOw0KCWMuYm9keUEu
bV9hbmd1bGFyVmVsb2NpdHkgLT0gYy5ib2R5QS5tX2ludkkgKiAoY2NwLnJBLnggKiBQWSAtIGNj
cC5yQS55ICogUFgpOw0KCWMuYm9keUIubV9saW5lYXJWZWxvY2l0eS54ICs9IGMuYm9keUIubV9p
bnZNYXNzICogUFg7DQoJYy5ib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYy5ib2R5Qi5tX2lu
dk1hc3MgKiBQWTsNCgljLmJvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGMuYm9keUIubV9pbnZJ
ICogKGNjcC5yQi54ICogUFkgLSBjY3AuckIueSAqIFBYKTsNCgljY3AudGFuZ2VudEltcHVsc2Ug
PSBuZXdJbXB1bHNlOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udGFj
dHMuYjJDb250YWN0Q29uc3RyYWludH0gYw0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJDb250YWN0Q29uc3RyYWludFBvaW50fSBjcDENCiAqIEBwYXJhbSB7IUJveDJELkR5
bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdENvbnN0cmFpbnRQb2ludH0gY3AyDQogKiBAcGFyYW0g
e251bWJlcn0gZFgNCiAqIEBwYXJhbSB7bnVtYmVyfSBkWQ0KICovDQpCb3gyRC5EeW5hbWljcy5D
b250YWN0cy5iMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50
c19Db25zdHJhaW50UG9pbnRVcGRhdGUgPSBmdW5jdGlvbihjLCBjcDEsIGNwMiwgZFgsIGRZKSB7
DQoJdmFyIFAxWCA9IGRYICogYy5ub3JtYWwueDsNCgl2YXIgUDFZID0gZFggKiBjLm5vcm1hbC55
Ow0KCXZhciBQMlggPSBkWSAqIGMubm9ybWFsLng7DQoJdmFyIFAyWSA9IGRZICogYy5ub3JtYWwu
eTsNCgljLmJvZHlBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBjLmJvZHlBLm1faW52TWFzcyAqIChQ
MVggKyBQMlgpOw0KCWMuYm9keUEubV9saW5lYXJWZWxvY2l0eS55IC09IGMuYm9keUEubV9pbnZN
YXNzICogKFAxWSArIFAyWSk7DQoJYy5ib2R5QS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSBjLmJvZHlB
Lm1faW52SSAqIChjcDEuckEueCAqIFAxWSAtIGNwMS5yQS55ICogUDFYICsgY3AyLnJBLnggKiBQ
MlkgLSBjcDIuckEueSAqIFAyWCk7DQoJYy5ib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYy5i
b2R5Qi5tX2ludk1hc3MgKiAoUDFYICsgUDJYKTsNCgljLmJvZHlCLm1fbGluZWFyVmVsb2NpdHku
eSArPSBjLmJvZHlCLm1faW52TWFzcyAqIChQMVkgKyBQMlkpOw0KCWMuYm9keUIubV9hbmd1bGFy
VmVsb2NpdHkgKz0gYy5ib2R5Qi5tX2ludkkgKiAoY3AxLnJCLnggKiBQMVkgLSBjcDEuckIueSAq
IFAxWCArIGNwMi5yQi54ICogUDJZIC0gY3AyLnJCLnkgKiBQMlgpOw0KCWNwMS5ub3JtYWxJbXB1
bHNlID0gMDsNCgljcDIubm9ybWFsSW1wdWxzZSA9IDA7DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWlu
dHMgPSBmdW5jdGlvbigpIHsNCglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb25zdHJhaW50
Q291bnQ7ICsraSkgew0KCQl2YXIgYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTsNCgkJdmFyIG0g
PSBjLm1hbmlmb2xkOw0KCQlmb3IgKHZhciBqID0gMDsgaiA8IGMucG9pbnRDb3VudDsgKytqKSB7
DQoJCQl2YXIgcG9pbnQxID0gbS5tX3BvaW50c1tqXTsNCgkJCXZhciBwb2ludDIgPSBjLnBvaW50
c1tqXTsNCgkJCXBvaW50MS5tX25vcm1hbEltcHVsc2UgPSBwb2ludDIubm9ybWFsSW1wdWxzZTsN
CgkJCXBvaW50MS5tX3RhbmdlbnRJbXB1bHNlID0gcG9pbnQyLnRhbmdlbnRJbXB1bHNlOw0KCQl9
DQoJfQ0KfTsNCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5wcm90b3R5
cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7DQoJaWYg
KGJhdW1nYXJ0ZSA9PT0gdW5kZWZpbmVkKSBiYXVtZ2FydGUgPSAwOw0KCXZhciBtaW5TZXBhcmF0
aW9uID0gMC4wOw0KCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvbnN0cmFpbnRDb3VudDsg
aSsrKSB7DQoJCXZhciBjID0gdGhpcy5tX2NvbnN0cmFpbnRzW2ldOw0KCQl2YXIgYm9keUEgPSBj
LmJvZHlBOw0KCQl2YXIgYm9keUIgPSBjLmJvZHlCOw0KCQl2YXIgaW52TWFzc0EgPSBib2R5QS5t
X21hc3MgKiBib2R5QS5tX2ludk1hc3M7DQoJCXZhciBpbnZJQSA9IGJvZHlBLm1fbWFzcyAqIGJv
ZHlBLm1faW52STsNCgkJdmFyIGludk1hc3NCID0gYm9keUIubV9tYXNzICogYm9keUIubV9pbnZN
YXNzOw0KCQl2YXIgaW52SUIgPSBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludkk7DQoJCUJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3BzbS5Jbml0aWFsaXplKGMpOw0K
CQl2YXIgbm9ybWFsID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnNf
cHNtLm1fbm9ybWFsOw0KCQlmb3IgKHZhciBqID0gMDsgaiA8IGMucG9pbnRDb3VudDsgaisrKSB7
DQoJCQl2YXIgY2NwID0gYy5wb2ludHNbal07DQoJCQl2YXIgcG9pbnQgPSBCb3gyRC5EeW5hbWlj
cy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIuc19wc20ubV9wb2ludHNbal07DQoJCQl2YXIgc2Vw
YXJhdGlvbiA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3BzbS5t
X3NlcGFyYXRpb25zW2pdOw0KCQkJdmFyIHJBWCA9IHBvaW50LnggLSBib2R5QS5tX3N3ZWVwLmMu
eDsNCgkJCXZhciByQVkgPSBwb2ludC55IC0gYm9keUEubV9zd2VlcC5jLnk7DQoJCQl2YXIgckJY
ID0gcG9pbnQueCAtIGJvZHlCLm1fc3dlZXAuYy54Ow0KCQkJdmFyIHJCWSA9IHBvaW50LnkgLSBi
b2R5Qi5tX3N3ZWVwLmMueTsNCgkJCW1pblNlcGFyYXRpb24gPSBtaW5TZXBhcmF0aW9uIDwgc2Vw
YXJhdGlvbiA/IG1pblNlcGFyYXRpb24gOiBzZXBhcmF0aW9uOw0KCQkJdmFyIEMgPSBCb3gyRC5D
b21tb24uTWF0aC5iMk1hdGguQ2xhbXAoYmF1bWdhcnRlICogKHNlcGFyYXRpb24gKyBCb3gyRC5D
b21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSwgKC1Cb3gyRC5Db21tb24uYjJTZXR0aW5n
cy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgMC4wKTsNCgkJCXZhciBpbXB1bHNlID0gKC1jY3Au
ZXF1YWxpemVkTWFzcyAqIEMpOw0KCQkJdmFyIFBYID0gaW1wdWxzZSAqIG5vcm1hbC54Ow0KCQkJ
dmFyIFBZID0gaW1wdWxzZSAqIG5vcm1hbC55Ow0KCQkJYm9keUEubV9zd2VlcC5jLnggLT0gaW52
TWFzc0EgKiBQWDsNCgkJCWJvZHlBLm1fc3dlZXAuYy55IC09IGludk1hc3NBICogUFk7DQoJCQli
b2R5QS5tX3N3ZWVwLmEgLT0gaW52SUEgKiAockFYICogUFkgLSByQVkgKiBQWCk7DQoJCQlib2R5
QS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpOw0KCQkJYm9keUIubV9zd2VlcC5jLnggKz0gaW52TWFz
c0IgKiBQWDsNCgkJCWJvZHlCLm1fc3dlZXAuYy55ICs9IGludk1hc3NCICogUFk7DQoJCQlib2R5
Qi5tX3N3ZWVwLmEgKz0gaW52SUIgKiAockJYICogUFkgLSByQlkgKiBQWCk7DQoJCQlib2R5Qi5T
eW5jaHJvbml6ZVRyYW5zZm9ybSgpOw0KCQl9DQoJfQ0KCXJldHVybiBtaW5TZXBhcmF0aW9uID4g
KC0xLjUgKiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKTsNCn07DQpCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLlNvbHZlUG9zaXRp
b25Db25zdHJhaW50c19ORVcgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHsNCglpZiAoYmF1bWdhcnRl
ID09PSB1bmRlZmluZWQpIGJhdW1nYXJ0ZSA9IDA7DQoJdmFyIG1pblNlcGFyYXRpb24gPSAwLjA7
DQoJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29uc3RyYWludENvdW50OyBpKyspIHsNCgkJ
dmFyIGMgPSB0aGlzLm1fY29uc3RyYWludHNbaV07DQoJCXZhciBib2R5QSA9IGMuYm9keUE7DQoJ
CXZhciBib2R5QiA9IGMuYm9keUI7DQoJCXZhciBpbnZNYXNzQSA9IGJvZHlBLm1fbWFzcyAqIGJv
ZHlBLm1faW52TWFzczsNCgkJdmFyIGludklBID0gYm9keUEubV9tYXNzICogYm9keUEubV9pbnZJ
Ow0KCQl2YXIgaW52TWFzc0IgPSBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludk1hc3M7DQoJCXZh
ciBpbnZJQiA9IGJvZHlCLm1fbWFzcyAqIGJvZHlCLm1faW52STsNCgkJQm94MkQuRHluYW1pY3Mu
Q29udGFjdHMuYjJDb250YWN0U29sdmVyLnNfcHNtLkluaXRpYWxpemUoYyk7DQoJCXZhciBub3Jt
YWwgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIuc19wc20ubV9ub3Jt
YWw7DQoJCWZvciAodmFyIGogPSAwOyBqIDwgYy5wb2ludENvdW50OyBqKyspIHsNCgkJCXZhciBj
Y3AgPSBjLnBvaW50c1tqXTsNCgkJCXZhciBwb2ludCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3Rz
LmIyQ29udGFjdFNvbHZlci5zX3BzbS5tX3BvaW50c1tqXTsNCgkJCXZhciBzZXBhcmF0aW9uID0g
Qm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0U29sdmVyLnNfcHNtLm1fc2VwYXJhdGlv
bnNbal07DQoJCQl2YXIgckFYID0gcG9pbnQueCAtIGJvZHlBLm1fc3dlZXAuYy54Ow0KCQkJdmFy
IHJBWSA9IHBvaW50LnkgLSBib2R5QS5tX3N3ZWVwLmMueTsNCgkJCXZhciByQlggPSBwb2ludC54
IC0gYm9keUIubV9zd2VlcC5jLng7DQoJCQl2YXIgckJZID0gcG9pbnQueSAtIGJvZHlCLm1fc3dl
ZXAuYy55Ow0KCQkJaWYgKHNlcGFyYXRpb24gPCBtaW5TZXBhcmF0aW9uKSB7DQoJCQkJbWluU2Vw
YXJhdGlvbiA9IHNlcGFyYXRpb247DQoJCQl9DQoJCQl2YXIgQyA9IDA7DQoJCQlpZiAoYmF1bWdh
cnRlICE9IDApIHsNCgkJCQlCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAoYmF1bWdhcnRl
ICogKHNlcGFyYXRpb24gKyBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSwg
KC1Cb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgMC4wKTsN
CgkJCX0NCgkJCXZhciBpbXB1bHNlID0gKC1jY3AuZXF1YWxpemVkTWFzcyAqIEMpOw0KCQkJdmFy
IFBYID0gaW1wdWxzZSAqIG5vcm1hbC54Ow0KCQkJdmFyIFBZID0gaW1wdWxzZSAqIG5vcm1hbC55
Ow0KCQkJYm9keUEubV9zd2VlcC5jLnggLT0gaW52TWFzc0EgKiBQWDsNCgkJCWJvZHlBLm1fc3dl
ZXAuYy55IC09IGludk1hc3NBICogUFk7DQoJCQlib2R5QS5tX3N3ZWVwLmEgLT0gaW52SUEgKiAo
ckFYICogUFkgLSByQVkgKiBQWCk7DQoJCQlib2R5QS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpOw0K
CQkJYm9keUIubV9zd2VlcC5jLnggKz0gaW52TWFzc0IgKiBQWDsNCgkJCWJvZHlCLm1fc3dlZXAu
Yy55ICs9IGludk1hc3NCICogUFk7DQoJCQlib2R5Qi5tX3N3ZWVwLmEgKz0gaW52SUIgKiAockJY
ICogUFkgLSByQlkgKiBQWCk7DQoJCQlib2R5Qi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpOw0KCQl9
DQoJfQ0KCXJldHVybiBtaW5TZXBhcmF0aW9uID4gKC0xLjUgKiBCb3gyRC5Db21tb24uYjJTZXR0
aW5ncy5iMl9saW5lYXJTbG9wKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNz
LmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVy
ZX0gZml4dHVyZUINCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVuZHMge0JveDJELkR5bmFtaWNz
LkNvbnRhY3RzLmIyQ29udGFjdH0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJFZGdl
QW5kQ2lyY2xlQ29udGFjdCA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikgew0KCUJveDJE
LkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJl
Qik7DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyRWRnZUFuZENpcmNs
ZUNvbnRhY3QsIEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCk7DQovKioNCiAqIEBw
YXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJhbSB7IUJv
eDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUINCiAqLw0KQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihm
aXh0dXJlQSwgZml4dHVyZUIpIHsNCglCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Qu
cHJvdG90eXBlLlJlc2V0LmNhbGwodGhpcywgZml4dHVyZUEsIGZpeHR1cmVCKTsNCn07DQpCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMkVkZ2VBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5FdmFs
dWF0ZSA9IGZ1bmN0aW9uKCkgew0KCXZhciBiQSA9IHRoaXMubV9maXh0dXJlQS5HZXRCb2R5KCk7
DQoJdmFyIGJCID0gdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKTsNCgl0aGlzLmIyQ29sbGlkZUVk
Z2VBbmRDaXJjbGUodGhpcy5tX21hbmlmb2xkLCB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSwg
dGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKS5tX3hmLCB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUo
KSwgdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKS5tX3hmKTsNCn07DQpCb3gyRC5EeW5hbWljcy5D
b250YWN0cy5iMkVkZ2VBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5iMkNvbGxpZGVFZGdlQW5k
Q2lyY2xlID0gZnVuY3Rpb24obWFuaWZvbGQsIGVkZ2UsIHhmMSwgY2lyY2xlLCB4ZjIpIHt9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVBDQogKiBA
cGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1cmV9IGZpeHR1cmVCDQogKiBAY29uc3RydWN0
b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3R9DQogKi8N
CkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seUFuZENpcmNsZUNvbnRhY3QgPSBmdW5jdGlv
bihmaXh0dXJlQSwgZml4dHVyZUIpIHsNCjsNCjsNCglCb3gyRC5EeW5hbWljcy5Db250YWN0cy5i
MkNvbnRhY3QuY2FsbCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpOw0KfTsNCmMyaW5oZXJpdChC
b3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlBbmRDaXJjbGVDb250YWN0LCBCb3gyRC5EeW5h
bWljcy5Db250YWN0cy5iMkNvbnRhY3QpOw0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWlj
cy5iMkZpeHR1cmV9IGZpeHR1cmVBDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5iMkZpeHR1
cmV9IGZpeHR1cmVCDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seUFuZENpcmNs
ZUNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7
DQo7DQo7DQoJQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0LnByb3RvdHlwZS5SZXNl
dC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29u
dGFjdHMuYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlv
bigpIHsNCglCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uQ29sbGlkZVBvbHlnb25BbmRDaXJj
bGUodGhpcy5tX21hbmlmb2xkLCB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSwgdGhpcy5tX2Zp
eHR1cmVBLkdldEJvZHkoKS5tX3hmLCB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSwgdGhpcy5t
X2ZpeHR1cmVCLkdldEJvZHkoKS5tX3hmKTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5
bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIy
Rml4dHVyZX0gZml4dHVyZUINCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVuZHMge0JveDJELkR5
bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdH0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMu
YjJQb2x5QW5kRWRnZUNvbnRhY3QgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHsNCjsN
CjsNCglCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3QuY2FsbCh0aGlzLCBmaXh0dXJl
QSwgZml4dHVyZUIpOw0KfTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBv
bHlBbmRFZGdlQ29udGFjdCwgQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0KTsNCi8q
Kg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJlQQ0KICogQHBh
cmFtIHshQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlfSBmaXh0dXJlQg0KICovDQpCb3gyRC5EeW5h
bWljcy5Db250YWN0cy5iMlBvbHlBbmRFZGdlQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5j
dGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHsNCjsNCjsNCglCb3gyRC5EeW5hbWljcy5Db250YWN0
cy5iMkNvbnRhY3QucHJvdG90eXBlLlJlc2V0LmNhbGwodGhpcywgZml4dHVyZUEsIGZpeHR1cmVC
KTsNCn07DQpCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlBbmRFZGdlQ29udGFjdC5wcm90
b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHsNCgl0aGlzLmIyQ29sbGlkZVBvbHlBbmRFZGdl
KHRoaXMubV9tYW5pZm9sZCwgdGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCksIHRoaXMubV9maXh0
dXJlQS5HZXRCb2R5KCkubV94ZiwgdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCksIHRoaXMubV9m
aXh0dXJlQi5HZXRCb2R5KCkubV94Zik7DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQ
b2x5QW5kRWRnZUNvbnRhY3QucHJvdG90eXBlLmIyQ29sbGlkZVBvbHlBbmRFZGdlID0gZnVuY3Rp
b24gKG1hbmlmb2xkLCBwb2x5Z29uLCB4ZjEsIGVkZ2UsIHhmMikge307DQovKioNCiAqIEBwYXJh
bSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJhbSB7IUJveDJE
LkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUINCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVu
ZHMge0JveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdH0NCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJQb2x5Z29uQ29udGFjdCA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJl
Qikgew0KCUJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdC5jYWxsKHRoaXMsIGZpeHR1
cmVBLCBmaXh0dXJlQik7DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIy
UG9seWdvbkNvbnRhY3QsIEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCk7DQovKioN
CiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUENCiAqIEBwYXJh
bSB7IUJveDJELkR5bmFtaWNzLmIyRml4dHVyZX0gZml4dHVyZUINCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udGFjdHMuYjJQb2x5Z29uQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihm
aXh0dXJlQSwgZml4dHVyZUIpIHsNCglCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Qu
cHJvdG90eXBlLlJlc2V0LmNhbGwodGhpcywgZml4dHVyZUEsIGZpeHR1cmVCKTsNCn07DQpCb3gy
RC5EeW5hbWljcy5Db250YWN0cy5iMlBvbHlnb25Db250YWN0LnByb3RvdHlwZS5FdmFsdWF0ZSA9
IGZ1bmN0aW9uKCkgew0KCUJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5Db2xsaWRlUG9seWdv
bnModGhpcy5tX21hbmlmb2xkLCB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSwgdGhpcy5tX2Zp
eHR1cmVBLkdldEJvZHkoKS5tX3hmLCB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSwgdGhpcy5t
X2ZpeHR1cmVCLkdldEJvZHkoKS5tX3hmKTsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICov
DQpCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHsN
CgkvKioNCgkgKiBAY29uc3QNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtzdHJpbmd9DQoJICov
DQoJdGhpcy5JRCA9ICJDb250cm9sbGVyIiArIEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIy
Q29udHJvbGxlci5ORVhUX0lEKys7DQoJLyoqDQoJICogQHR5cGUge0JveDJELkR5bmFtaWNzLmIy
V29ybGR9DQoJICovDQoJdGhpcy5tX3dvcmxkID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0K
CSAqIEB0eXBlIHshQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdH0NCgkgKi8NCgl0aGlzLmJvZHlM
aXN0ID0gbmV3IEJveDJELkR5bmFtaWNzLmIyQm9keUxpc3QoKTsNCn07DQpCb3gyRC5EeW5hbWlj
cy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVw
KSB7fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuYjJCb2R5fSBib2R5DQogKi8N
CkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlci5wcm90b3R5cGUuQWRkQm9k
eSA9IGZ1bmN0aW9uKGJvZHkpIHsNCgl0aGlzLmJvZHlMaXN0LkFkZEJvZHkoYm9keSk7DQoJYm9k
eS5BZGRDb250cm9sbGVyKHRoaXMpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1p
Y3MuYjJCb2R5fSBib2R5DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJv
bGxlci5wcm90b3R5cGUuUmVtb3ZlQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHsNCgl0aGlzLmJvZHlM
aXN0LlJlbW92ZUJvZHkoYm9keSk7DQoJYm9keS5SZW1vdmVDb250cm9sbGVyKHRoaXMpOw0KfTsN
CkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlci5wcm90b3R5cGUuQ2xlYXIg
PSBmdW5jdGlvbigpIHsNCglmb3IgKHZhciBub2RlID0gdGhpcy5ib2R5TGlzdC5HZXRGaXJzdE5v
ZGUoQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5hbGxCb2RpZXMpOyBub2RlOyBub2Rl
ID0gbm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCXRoaXMuUmVtb3ZlQm9keShub2RlLmJvZHkpOw0K
CX0NCn07DQovKioNCiAqIEByZXR1cm4geyFCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0fQ0KICov
DQpCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXIucHJvdG90eXBlLkdldEJv
ZHlMaXN0ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuYm9keUxpc3Q7DQp9Ow0KLyoqDQog
KiBAdHlwZSB7bnVtYmVyfQ0KICogQHByaXZhdGUNCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udHJv
bGxlcnMuYjJDb250cm9sbGVyLk5FWFRfSUQgPSAwOw0KLyoqDQogKiBAY29uc3RydWN0b3INCiAq
IEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJ9DQogKi8N
CkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQnVveWFuY3lDb250cm9sbGVyID0gZnVuY3Rp
b24oKSB7DQoJQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyLmNhbGwodGhp
cyk7DQoJdGhpcy5ub3JtYWwgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIC0xKTsN
Cgl0aGlzLm9mZnNldCA9IDA7DQoJdGhpcy5kZW5zaXR5ID0gMDsNCgl0aGlzLnZlbG9jaXR5ID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxpbmVhckRyYWcgPSAy
Ow0KCXRoaXMuYW5ndWxhckRyYWcgPSAxOw0KCXRoaXMudXNlRGVuc2l0eSA9IGZhbHNlOw0KCXRo
aXMudXNlV29ybGRHcmF2aXR5ID0gdHJ1ZTsNCgl0aGlzLmdyYXZpdHkgPSBudWxsOw0KfTsNCmMy
aW5oZXJpdChCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkJ1b3lhbmN5Q29udHJvbGxlciwg
Qm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyKTsNCkJveDJELkR5bmFtaWNz
LkNvbnRyb2xsZXJzLmIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS5TdGVwID0gZnVuY3Rp
b24oc3RlcCkgew0KCWlmICh0aGlzLnVzZVdvcmxkR3Jhdml0eSkgew0KCQl0aGlzLmdyYXZpdHkg
PSB0aGlzLm1fd29ybGQuR2V0R3Jhdml0eSgpLkNvcHkoKTsNCgl9DQoJZm9yICh2YXIgYm9keU5v
ZGUgPSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWljcy5iMkJvZHlMaXN0
LlRZUEVTLmF3YWtlQm9kaWVzKTsgYm9keU5vZGU7IGJvZHlOb2RlID0gYm9keU5vZGUuR2V0TmV4
dE5vZGUoKSkgew0KCQl2YXIgYm9keSA9IGJvZHlOb2RlLmJvZHk7DQoJCXZhciBhcmVhYyA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJCXZhciBtYXNzYyA9IEJveDJELkNv
bW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJCXZhciBhcmVhID0gMC4wOw0KCQl2YXIgbWFz
cyA9IDAuMDsNCgkJZm9yICh2YXIgZml4dHVyZU5vZGUgPSBib2R5LkdldEZpeHR1cmVMaXN0KCku
R2V0Rmlyc3ROb2RlKCk7IGZpeHR1cmVOb2RlOyBmaXh0dXJlTm9kZSA9IGZpeHR1cmVOb2RlLkdl
dE5leHROb2RlKCkpIHsNCgkJCXZhciBzYyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQo
MCwgMCk7DQoJCQl2YXIgc2FyZWEgPSBmaXh0dXJlTm9kZS5maXh0dXJlLkdldFNoYXBlKCkuQ29t
cHV0ZVN1Ym1lcmdlZEFyZWEodGhpcy5ub3JtYWwsIHRoaXMub2Zmc2V0LCBib2R5LkdldFRyYW5z
Zm9ybSgpLCBzYyk7DQoJCQlhcmVhICs9IHNhcmVhOw0KCQkJYXJlYWMueCArPSBzYXJlYSAqIHNj
Lng7DQoJCQlhcmVhYy55ICs9IHNhcmVhICogc2MueTsNCgkJCXZhciBzaGFwZURlbnNpdHkgPSAw
Ow0KCQkJaWYgKHRoaXMudXNlRGVuc2l0eSkgew0KCQkJCXNoYXBlRGVuc2l0eSA9IDE7DQoJCQl9
IGVsc2Ugew0KCQkJCXNoYXBlRGVuc2l0eSA9IDE7DQoJCQl9DQoJCQltYXNzICs9IHNhcmVhICog
c2hhcGVEZW5zaXR5Ow0KCQkJbWFzc2MueCArPSBzYXJlYSAqIHNjLnggKiBzaGFwZURlbnNpdHk7
DQoJCQltYXNzYy55ICs9IHNhcmVhICogc2MueSAqIHNoYXBlRGVuc2l0eTsNCgkJfQ0KCQlpZiAo
YXJlYSA8IE51bWJlci5NSU5fVkFMVUUpIHsNCgkJCWNvbnRpbnVlOw0KCQl9DQoJCWFyZWFjLngg
Lz0gYXJlYTsNCgkJYXJlYWMueSAvPSBhcmVhOw0KCQltYXNzYy54IC89IG1hc3M7DQoJCW1hc3Nj
LnkgLz0gbWFzczsNCgkJdmFyIGJ1b3lhbmN5Rm9yY2UgPSB0aGlzLmdyYXZpdHkuR2V0TmVnYXRp
dmUoKTsNCgkJYnVveWFuY3lGb3JjZS5NdWx0aXBseSh0aGlzLmRlbnNpdHkgKiBhcmVhKTsNCgkJ
Ym9keS5BcHBseUZvcmNlKGJ1b3lhbmN5Rm9yY2UsIG1hc3NjKTsNCgkJdmFyIGRyYWdGb3JjZSA9
IGJvZHkuR2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludChhcmVhYyk7DQoJCWRyYWdGb3Jj
ZS5TdWJ0cmFjdCh0aGlzLnZlbG9jaXR5KTsNCgkJZHJhZ0ZvcmNlLk11bHRpcGx5KCgtdGhpcy5s
aW5lYXJEcmFnICogYXJlYSkpOw0KCQlib2R5LkFwcGx5Rm9yY2UoZHJhZ0ZvcmNlLCBhcmVhYyk7
DQoJCWJvZHkuQXBwbHlUb3JxdWUoKC1ib2R5LkdldEluZXJ0aWEoKSAvIGJvZHkuR2V0TWFzcygp
ICogYXJlYSAqIGJvZHkuR2V0QW5ndWxhclZlbG9jaXR5KCkgKiB0aGlzLmFuZ3VsYXJEcmFnKSk7
DQoJCUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5GcmVlKGFyZWFjKTsNCgkJQm94MkQuQ29tbW9u
Lk1hdGguYjJWZWMyLkZyZWUobWFzc2MpOw0KCX0NCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0K
ICogQGV4dGVuZHMge0JveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcn0NCiAq
Lw0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb25zdGFudEFjY2VsQ29udHJvbGxlciA9
IGZ1bmN0aW9uKCkgew0KCUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlci5j
YWxsKHRoaXMpOw0KCXRoaXMuQSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7
DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29uc3RhbnRBY2Nl
bENvbnRyb2xsZXIsIEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcik7DQpC
b3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnN0YW50QWNjZWxDb250cm9sbGVyLnByb3Rv
dHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkgew0KCXZhciBzbWFsbEEgPSBCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzIuR2V0KHRoaXMuQS54ICogc3RlcC5kdCwgdGhpcy5BLnkgKiBzdGVwLmR0KTsN
Cglmb3IgKHZhciBib2R5Tm9kZSA9IHRoaXMuYm9keUxpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5
bmFtaWNzLmIyQm9keUxpc3QuVFlQRVMuYXdha2VCb2RpZXMpOyBib2R5Tm9kZTsgYm9keU5vZGUg
PSBib2R5Tm9kZS5HZXROZXh0Tm9kZSgpKSB7DQoJCXZhciBib2R5ID0gYm9keU5vZGUuYm9keTsN
CgkJdmFyIG9sZFZlbG9jaXR5ID0gYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpOw0KCQlib2R5LlNl
dExpbmVhclZlbG9jaXR5KEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQob2xkVmVsb2NpdHku
eCArIHNtYWxsQS54LCBvbGRWZWxvY2l0eS55ICsgc21hbGxBLnkpKTsNCgl9DQoJQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyLkZyZWUoc21hbGxBKTsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0K
ICogQGV4dGVuZHMge0JveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcn0NCiAq
Lw0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb25zdGFudEZvcmNlQ29udHJvbGxlciA9
IGZ1bmN0aW9uKCkgew0KCUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlci5j
YWxsKHRoaXMpOw0KCXRoaXMuRiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7
DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29uc3RhbnRGb3Jj
ZUNvbnRyb2xsZXIsIEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcik7DQpC
b3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyLnByb3Rv
dHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkgew0KCWZvciAodmFyIGJvZHlOb2RlID0gdGhpcy5i
b2R5TGlzdC5HZXRGaXJzdE5vZGUoQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5hd2Fr
ZUJvZGllcyk7IGJvZHlOb2RlOyBib2R5Tm9kZSA9IGJvZHlOb2RlLkdldE5leHROb2RlKCkpIHsN
CgkJdmFyIGJvZHkgPSBib2R5Tm9kZS5ib2R5Ow0KCQlib2R5LkFwcGx5Rm9yY2UodGhpcy5GLCBi
b2R5LkdldFdvcmxkQ2VudGVyKCkpOw0KCX0NCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICov
DQpCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0ID0gZnVuY3Rpb24o
KSB7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7Qm94MkQuRHluYW1pY3MuQ29udHJv
bGxlcnMuYjJDb250cm9sbGVyTGlzdE5vZGV9DQoJICovDQoJdGhpcy5jb250cm9sbGVyRmlyc3RO
b2RlID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtCb3gyRC5EeW5hbWlj
cy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0Tm9kZX0NCgkgKi8NCgl0aGlzLmNvbnRyb2xs
ZXJMYXN0Tm9kZSA9IG51bGw7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBAdHlwZSB7T2JqZWN0
LjxCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0Tm9kZT59DQoJICov
DQoJdGhpcy5jb250cm9sbGVyTm9kZUxvb2t1cCA9IHt9Ow0KCS8qKg0KCSAqIEBwcml2YXRlDQoJ
ICogQHR5cGUge251bWJlcn0NCgkgKi8NCgl0aGlzLmNvbnRyb2xsZXJDb3VudCA9IDA7DQp9Ow0K
LyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJM
aXN0Tm9kZX0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyTGlz
dC5wcm90b3R5cGUuR2V0Rmlyc3ROb2RlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuY29u
dHJvbGxlckZpcnN0Tm9kZTsNCn07DQovKioNCiAqIEBwYXJhbSB7IUJveDJELkR5bmFtaWNzLkNv
bnRyb2xsZXJzLmIyQ29udHJvbGxlcn0gY29udHJvbGxlcg0KICovDQpCb3gyRC5EeW5hbWljcy5D
b250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0LnByb3RvdHlwZS5BZGRDb250cm9sbGVyID0gZnVu
Y3Rpb24oY29udHJvbGxlcikgew0KCXZhciBjb250cm9sbGVySUQgPSBjb250cm9sbGVyLklEOw0K
CWlmICh0aGlzLmNvbnRyb2xsZXJOb2RlTG9va3VwW2NvbnRyb2xsZXJJRF0gPT0gbnVsbCkgew0K
CQl2YXIgbm9kZSA9IG5ldyBCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJM
aXN0Tm9kZShjb250cm9sbGVyKTsNCgkJdmFyIHByZXZOb2RlID0gdGhpcy5jb250cm9sbGVyTGFz
dE5vZGU7DQoJCWlmIChwcmV2Tm9kZSAhPSBudWxsKSB7DQoJCQlwcmV2Tm9kZS5TZXROZXh0Tm9k
ZShub2RlKTsNCgkJfSBlbHNlIHsNCgkJCXRoaXMuY29udHJvbGxlckZpcnN0Tm9kZSA9IG5vZGU7
DQoJCX0NCgkJbm9kZS5TZXRQcmV2aW91c05vZGUocHJldk5vZGUpOw0KCQl0aGlzLmNvbnRyb2xs
ZXJMYXN0Tm9kZSA9IG5vZGU7DQoJCXRoaXMuY29udHJvbGxlck5vZGVMb29rdXBbY29udHJvbGxl
cklEXSA9IG5vZGU7DQoJCXRoaXMuY29udHJvbGxlckNvdW50Kys7DQoJfQ0KfTsNCi8qKg0KICog
QHBhcmFtIHshQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyfSBjb250cm9s
bGVyDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckxpc3QucHJv
dG90eXBlLlJlbW92ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbihjb250cm9sbGVyKSB7DQoJdmFyIGNv
bnRyb2xsZXJJRCA9IGNvbnRyb2xsZXIuSUQ7DQoJdmFyIG5vZGUgPSB0aGlzLmNvbnRyb2xsZXJO
b2RlTG9va3VwW2NvbnRyb2xsZXJJRF07DQoJaWYgKG5vZGUgPT0gbnVsbCkgew0KCQlyZXR1cm47
DQoJfQ0KCXZhciBwcmV2Tm9kZSA9IG5vZGUuR2V0UHJldmlvdXNOb2RlKCk7DQoJdmFyIG5leHRO
b2RlID0gbm9kZS5HZXROZXh0Tm9kZSgpOw0KCWlmIChwcmV2Tm9kZSA9PSBudWxsKSB7DQoJCXRo
aXMuY29udHJvbGxlckZpcnN0Tm9kZSA9IG5leHROb2RlOw0KCX0gZWxzZSB7DQoJCXByZXZOb2Rl
LlNldE5leHROb2RlKG5leHROb2RlKTsNCgl9DQoJaWYgKG5leHROb2RlID09IG51bGwpIHsNCgkJ
dGhpcy5jb250cm9sbGVyTGFzdE5vZGUgPSBwcmV2Tm9kZTsNCgl9IGVsc2Ugew0KCQluZXh0Tm9k
ZS5TZXRQcmV2aW91c05vZGUocHJldk5vZGUpOw0KCX0NCglkZWxldGUgdGhpcy5jb250cm9sbGVy
Tm9kZUxvb2t1cFtjb250cm9sbGVySURdOw0KCXRoaXMuY29udHJvbGxlckNvdW50LS07DQp9Ow0K
LyoqDQogKiBAcmV0dXJuIHtudW1iZXJ9DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJz
LmIyQ29udHJvbGxlckxpc3QucHJvdG90eXBlLkdldENvbnRyb2xsZXJDb3VudCA9IGZ1bmN0aW9u
KCkgew0KCXJldHVybiB0aGlzLmNvbnRyb2xsZXJDb3VudDsNCn07DQovKioNCiAqIEBwYXJhbSB7
IUJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcn0gY29udHJvbGxlcg0KICog
QGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxl
ckxpc3ROb2RlID0gZnVuY3Rpb24oY29udHJvbGxlcikgew0KCS8qKg0KCSAqIEBjb25zdA0KCSAq
IEB0eXBlIHshQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyfQ0KCSAqLw0K
CXRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7DQoJLyoqDQoJICogQHByaXZhdGUNCgkgKiBA
dHlwZSB7Qm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyTGlzdE5vZGV9DQoJ
ICovDQoJdGhpcy5uZXh0ID0gbnVsbDsNCgkvKioNCgkgKiBAcHJpdmF0ZQ0KCSAqIEB0eXBlIHtC
b3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0Tm9kZX0NCgkgKi8NCgl0
aGlzLnByZXZpb3VzID0gbnVsbDsNCn07DQovKioNCiAqIEBwYXJhbSB7Qm94MkQuRHluYW1pY3Mu
Q29udHJvbGxlcnMuYjJDb250cm9sbGVyTGlzdE5vZGV9IG5vZGUNCiAqLw0KQm94MkQuRHluYW1p
Y3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyTGlzdE5vZGUucHJvdG90eXBlLlNldE5leHROb2Rl
ID0gZnVuY3Rpb24obm9kZSkgew0KCXRoaXMubmV4dCA9IG5vZGU7DQp9Ow0KLyoqDQogKiBAcGFy
YW0ge0JveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckxpc3ROb2RlfSBub2Rl
DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckxpc3ROb2RlLnBy
b3RvdHlwZS5TZXRQcmV2aW91c05vZGUgPSBmdW5jdGlvbihub2RlKSB7DQoJdGhpcy5wcmV2aW91
cyA9IG5vZGU7DQp9Ow0KLyoqDQogKiBAcmV0dXJuIHtCb3gyRC5EeW5hbWljcy5Db250cm9sbGVy
cy5iMkNvbnRyb2xsZXJMaXN0Tm9kZX0NCiAqLw0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMu
YjJDb250cm9sbGVyTGlzdE5vZGUucHJvdG90eXBlLkdldE5leHROb2RlID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIHRoaXMubmV4dDsNCn07DQovKioNCiAqIEByZXR1cm4ge0JveDJELkR5bmFtaWNz
LkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckxpc3ROb2RlfQ0KICovDQpCb3gyRC5EeW5hbWljcy5D
b250cm9sbGVycy5iMkNvbnRyb2xsZXJMaXN0Tm9kZS5wcm90b3R5cGUuR2V0UHJldmlvdXNOb2Rl
ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMucHJldmlvdXM7DQp9Ow0KLyoqDQogKiBAY29u
c3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRy
b2xsZXJ9DQogKi8NCkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyR3Jhdml0eUNvbnRyb2xs
ZXIgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnRyb2xs
ZXIuY2FsbCh0aGlzKTsNCgl0aGlzLkcgPSAxOw0KCXRoaXMuaW52U3FyID0gdHJ1ZTsNCn07DQpj
MmluaGVyaXQoQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJHcmF2aXR5Q29udHJvbGxlciwg
Qm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyKTsNCkJveDJELkR5bmFtaWNz
LkNvbnRyb2xsZXJzLmIyR3Jhdml0eUNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlv
bihzdGVwKSB7DQoJdmFyIGkgPSBudWxsOw0KCXZhciBib2R5MSA9IG51bGw7DQoJdmFyIHAxID0g
bnVsbDsNCgl2YXIgbWFzczEgPSAwOw0KCXZhciBqID0gbnVsbDsNCgl2YXIgYm9keTIgPSBudWxs
Ow0KCXZhciBwMiA9IG51bGw7DQoJdmFyIGR4ID0gMDsNCgl2YXIgZHkgPSAwOw0KCXZhciByMiA9
IDA7DQoJdmFyIGYgPSBudWxsOw0KCWlmICh0aGlzLmludlNxcikgew0KCQlmb3IgKHZhciBib2R5
MU5vZGUgPSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5hbWljcy5iMkJvZHlM
aXN0LlRZUEVTLmFsbEJvZGllcyk7IGJvZHkxTm9kZTsgYm9keTFOb2RlID0gYm9keTFOb2RlLkdl
dE5leHROb2RlKCkpIHsNCgkJCXZhciBib2R5MSA9IGJvZHkxTm9kZS5ib2R5Ow0KCQkJdmFyIHAx
ID0gYm9keTEuR2V0V29ybGRDZW50ZXIoKTsNCgkJCXZhciBtYXNzMSA9IGJvZHkxLkdldE1hc3Mo
KTsNCgkJCWZvciAodmFyIGJvZHkyTm9kZSA9IHRoaXMuYm9keUxpc3QuR2V0Rmlyc3ROb2RlKEJv
eDJELkR5bmFtaWNzLmIyQm9keUxpc3QuVFlQRVMuYWxsQm9kaWVzKTsgYm9keTJOb2RlOyBib2R5
Mk5vZGUgPSBib2R5Mk5vZGUuR2V0TmV4dE5vZGUoKSkgew0KCQkJCXZhciBib2R5MiA9IGJvZHky
Tm9kZS5ib2R5Ow0KCQkJCWlmICggIWJvZHkxLklzQXdha2UoKSAmJiAhYm9keTIuSXNBd2FrZSgp
ICkgew0KCQkJCQljb250aW51ZTsNCgkJCQl9DQoJCQkJdmFyIHAyID0gYm9keTIuR2V0V29ybGRD
ZW50ZXIoKTsNCgkJCQl2YXIgZHggPSBwMi54IC0gcDEueDsNCgkJCQl2YXIgZHkgPSBwMi55IC0g
cDEueTsNCgkJCQl2YXIgcjIgPSBkeCAqIGR4ICsgZHkgKiBkeTsNCgkJCQlpZiAocjIgPCBOdW1i
ZXIuTUlOX1ZBTFVFKSB7DQoJCQkJCWNvbnRpbnVlOw0KCQkJCX0NCgkJCQl2YXIgZiA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoZHgsIGR5KTsNCgkJCQlmLk11bHRpcGx5KHRoaXMuRyAv
IHIyIC8gTWF0aC5zcXJ0KHIyKSAqIG1hc3MxICogYm9keTIuR2V0TWFzcygpKTsNCgkJCQlpZiAo
Ym9keTEuSXNBd2FrZSgpKSB7DQoJCQkJCWJvZHkxLkFwcGx5Rm9yY2UoZiwgcDEpOw0KCQkJCX0N
CgkJCQlmLk11bHRpcGx5KC0xKTsNCgkJCQlpZiAoYm9keTIuSXNBd2FrZSgpKSB7DQoJCQkJCWJv
ZHkyLkFwcGx5Rm9yY2UoZiwgcDIpOw0KCQkJCX0NCgkJCQlCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuRnJlZShmKTsNCgkJCX0NCgkJfQ0KCX0gZWxzZSB7DQoJCWZvciAodmFyIGJvZHkxTm9kZSA9
IHRoaXMuYm9keUxpc3QuR2V0Rmlyc3ROb2RlKEJveDJELkR5bmFtaWNzLmIyQm9keUxpc3QuVFlQ
RVMuYWxsQm9kaWVzKTsgYm9keTFOb2RlOyBib2R5MU5vZGUgPSBib2R5MU5vZGUuR2V0TmV4dE5v
ZGUoKSkgew0KCQkJdmFyIGJvZHkxID0gYm9keU5vZGUuYm9keTsNCgkJCXZhciBwMSA9IGJvZHkx
LkdldFdvcmxkQ2VudGVyKCk7DQoJCQl2YXIgbWFzczEgPSBib2R5MS5HZXRNYXNzKCk7DQoJCQlm
b3IgKHZhciBib2R5Mk5vZGUgPSB0aGlzLmJvZHlMaXN0LkdldEZpcnN0Tm9kZShCb3gyRC5EeW5h
bWljcy5iMkJvZHlMaXN0LlRZUEVTLmFsbEJvZGllcyk7IGJvZHkyTm9kZTsgYm9keTJOb2RlID0g
Ym9keTJOb2RlLkdldE5leHROb2RlKCkpIHsNCgkJCQl2YXIgYm9keTIgPSBib2R5Tm9kZS5ib2R5
Ow0KCQkJCWlmICggIWJvZHkxLklzQXdha2UoKSAmJiAhYm9keTIuSXNBd2FrZSgpICkgew0KCQkJ
CQljb250aW51ZTsNCgkJCQl9DQoJCQkJdmFyIHAyID0gYm9keTIuR2V0V29ybGRDZW50ZXIoKTsN
CgkJCQl2YXIgZHggPSBwMi54IC0gcDEueDsNCgkJCQl2YXIgZHkgPSBwMi55IC0gcDEueTsNCgkJ
CQl2YXIgcjIgPSBkeCAqIGR4ICsgZHkgKiBkeTsNCgkJCQlpZiAocjIgPCBOdW1iZXIuTUlOX1ZB
TFVFKSB7DQoJCQkJCWNvbnRpbnVlOw0KCQkJCX0NCgkJCQl2YXIgZiA9IEJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMi5HZXQoZHgsIGR5KTsNCgkJCQlmLk11bHRpcGx5KHRoaXMuRyAvIHIyICogbWFz
czEgKiBib2R5Mi5HZXRNYXNzKCkpOw0KCQkJCWlmIChib2R5MS5Jc0F3YWtlKCkpIHsNCgkJCQkJ
Ym9keTEuQXBwbHlGb3JjZShmLCBwMSk7DQoJCQkJfQ0KCQkJCWYuTXVsdGlwbHkoLTEpOw0KCQkJ
CWlmIChib2R5Mi5Jc0F3YWtlKCkpIHsNCgkJCQkJYm9keTIuQXBwbHlGb3JjZShmLCBwMik7DQoJ
CQkJfQ0KCQkJCUJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5GcmVlKGYpOw0KCQkJfQ0KCQl9DQoJ
fQ0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7Qm94MkQuRHluYW1pY3Mu
Q29udHJvbGxlcnMuYjJDb250cm9sbGVyfQ0KICovDQpCb3gyRC5EeW5hbWljcy5Db250cm9sbGVy
cy5iMlRlbnNvckRhbXBpbmdDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7DQoJQm94MkQuRHluYW1p
Y3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyLmNhbGwodGhpcyk7DQoJdGhpcy5UID0gbmV3IEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0MjIoKTsNCgl0aGlzLm1heFRpbWVzdGVwID0gMDsNCn07DQpj
MmluaGVyaXQoQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJUZW5zb3JEYW1waW5nQ29udHJv
bGxlciwgQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyKTsNCi8qKg0KICog
QHBhcmFtIHtudW1iZXJ9IHhEYW1waW5nDQogKiBAcGFyYW0ge251bWJlcn0geURhbXBpbmcNCiAq
Lw0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlci5w
cm90b3R5cGUuU2V0QXhpc0FsaWduZWQgPSBmdW5jdGlvbih4RGFtcGluZywgeURhbXBpbmcpIHsN
Cgl0aGlzLlQuY29sMS54ID0gKC14RGFtcGluZyk7DQoJdGhpcy5ULmNvbDEueSA9IDA7DQoJdGhp
cy5ULmNvbDIueCA9IDA7DQoJdGhpcy5ULmNvbDIueSA9ICgteURhbXBpbmcpOw0KCWlmICh4RGFt
cGluZyA+IDAgfHwgeURhbXBpbmcgPiAwKSB7DQoJCXRoaXMubWF4VGltZXN0ZXAgPSAxIC8gTWF0
aC5tYXgoeERhbXBpbmcsIHlEYW1waW5nKTsNCgl9IGVsc2Ugew0KCQl0aGlzLm1heFRpbWVzdGVw
ID0gMDsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJUZW5zb3JEYW1waW5n
Q29udHJvbGxlci5wcm90b3R5cGUuU3RlcCA9IGZ1bmN0aW9uKHN0ZXApIHsNCgl2YXIgdGltZXN0
ZXAgPSBzdGVwLmR0Ow0KCWlmICh0aW1lc3RlcCA8PSBOdW1iZXIuTUlOX1ZBTFVFKSByZXR1cm47
DQoJaWYgKHRpbWVzdGVwID4gdGhpcy5tYXhUaW1lc3RlcCAmJiB0aGlzLm1heFRpbWVzdGVwID4g
MCkgdGltZXN0ZXAgPSB0aGlzLm1heFRpbWVzdGVwOw0KCWZvciAodmFyIGJvZHlOb2RlID0gdGhp
cy5ib2R5TGlzdC5HZXRGaXJzdE5vZGUoQm94MkQuRHluYW1pY3MuYjJCb2R5TGlzdC5UWVBFUy5h
d2FrZUJvZGllcyk7IGJvZHlOb2RlOyBib2R5Tm9kZSA9IGJvZHlOb2RlLkdldE5leHROb2RlKCkp
IHsNCgkJdmFyIGJvZHkgPSBib2R5Tm9kZS5ib2R5Ow0KCQl2YXIgZGFtcGluZyA9IGJvZHkuR2V0
V29ybGRWZWN0b3IoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bE1WKHRoaXMuVCwgYm9keS5H
ZXRMb2NhbFZlY3Rvcihib2R5LkdldExpbmVhclZlbG9jaXR5KCkpKSk7DQoJCWJvZHkuU2V0TGlu
ZWFyVmVsb2NpdHkoQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChib2R5LkdldExpbmVhclZl
bG9jaXR5KCkueCArIGRhbXBpbmcueCAqIHRpbWVzdGVwLCBib2R5LkdldExpbmVhclZlbG9jaXR5
KCkueSArIGRhbXBpbmcueSAqIHRpbWVzdGVwKSk7DQoJfQ0KfTsNCi8qKg0KICogQHBhcmFtIHsh
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWZ9IGRlZg0KICogQGNvbnN0cnVjdG9yDQog
Ki8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50ID0gZnVuY3Rpb24oZGVmKSB7DQoJdGhp
cy5tX2VkZ2VBID0gbmV3IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RWRnZSgpOw0KCXRo
aXMubV9lZGdlQiA9IG5ldyBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludEVkZ2UoKTsNCgl0
aGlzLm1fbG9jYWxDZW50ZXJBID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsN
Cgl0aGlzLm1fbG9jYWxDZW50ZXJCID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAw
KTsNCjsNCgl0aGlzLm1fdHlwZSA9IGRlZi50eXBlOw0KCXRoaXMubV9wcmV2ID0gbnVsbDsNCgl0
aGlzLm1fbmV4dCA9IG51bGw7DQoJdGhpcy5tX2JvZHlBID0gZGVmLmJvZHlBOw0KCXRoaXMubV9i
b2R5QiA9IGRlZi5ib2R5QjsNCgl0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCA9IGRlZi5jb2xsaWRl
Q29ubmVjdGVkOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LnByb3RvdHlwZS5H
ZXRUeXBlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV90eXBlOw0KfTsNCkJveDJELkR5
bmFtaWNzLkpvaW50cy5iMkpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIG51bGw7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQucHJvdG90
eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gbnVsbDsNCn07DQpCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0
aW9uKGludl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCgly
ZXR1cm4gbnVsbDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5wcm90b3R5cGUu
R2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHsNCglpZiAoaW52X2R0ID09PSB1
bmRlZmluZWQpIGludl9kdCA9IDA7DQoJcmV0dXJuIDAuMDsNCn07DQpCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJKb2ludC5wcm90b3R5cGUuR2V0Qm9keUEgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4g
dGhpcy5tX2JvZHlBOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LnByb3RvdHlw
ZS5HZXRCb2R5QiA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYm9keUI7DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQucHJvdG90eXBlLkdldE5leHQgPSBmdW5jdGlvbigp
IHsNCglyZXR1cm4gdGhpcy5tX25leHQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9p
bnQucHJvdG90eXBlLklzQWN0aXZlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9ib2R5
QS5Jc0FjdGl2ZSgpICYmIHRoaXMubV9ib2R5Qi5Jc0FjdGl2ZSgpOw0KfTsNCkJveDJELkR5bmFt
aWNzLkpvaW50cy5iMkpvaW50LkNyZWF0ZSA9IGZ1bmN0aW9uKGRlZikgew0KCXJldHVybiBkZWYu
Q3JlYXRlKCk7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQucHJvdG90eXBlLklu
aXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge307DQpCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVu
Y3Rpb24oc3RlcCkge307DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5wcm90b3R5cGUu
RmluYWxpemVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oKSB7fTsNCkJveDJELkR5bmFt
aWNzLkpvaW50cy5iMkpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBm
dW5jdGlvbihiYXVtZ2FydGUpIHsNCglyZXR1cm4gZmFsc2U7DQp9Ow0KQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnQuZV91bmtub3duSm9pbnQgPSAwOw0KQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIySm9pbnQuZV9yZXZvbHV0ZUpvaW50ID0gMTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpv
aW50LmVfcHJpc21hdGljSm9pbnQgPSAyOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9kaXN0YW5jZUpvaW50ID0gMzsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfcHVs
bGV5Sm9pbnQgPSA0Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9tb3VzZUpvaW50
ID0gNTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfZ2VhckpvaW50ID0gNjsNCkJv
eDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfbGluZUpvaW50ID0gNzsNCkJveDJELkR5bmFt
aWNzLkpvaW50cy5iMkpvaW50LmVfd2VsZEpvaW50ID0gODsNCkJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50LmVfZnJpY3Rpb25Kb2ludCA9IDk7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJK
b2ludC5lX2luYWN0aXZlTGltaXQgPSAwOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9hdExvd2VyTGltaXQgPSAxOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9hdFVw
cGVyTGltaXQgPSAyOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9lcXVhbExpbWl0
cyA9IDM7DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJKb2ludERlZiA9IGZ1bmN0aW9uICgpIHsNCgl0aGlzLnR5cGUgPSBCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJKb2ludC5lX3Vua25vd25Kb2ludDsNCgl0aGlzLmJvZHlBID0gbnVsbDsNCgl0aGlz
LmJvZHlCID0gbnVsbDsNCgl0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSBmYWxzZTsNCn07DQovKioN
CiAqIEBjb25zdHJ1Y3Rvcg0KICovDQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludEVkZ2Ug
PSBmdW5jdGlvbiAoKSB7fTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIyRGlzdGFuY2VKb2ludERlZn0gZGVmDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludH0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIyRGlzdGFuY2VKb2ludCA9IGZ1bmN0aW9uKGRlZikgew0KCUJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50LmNhbGwodGhpcywgZGVmKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IxID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IyID0gQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fdSA9IEJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKGRlZi5s
b2NhbEFuY2hvckEpOw0KCXRoaXMubV9sb2NhbEFuY2hvcjIuU2V0VihkZWYubG9jYWxBbmNob3JC
KTsNCgl0aGlzLm1fbGVuZ3RoID0gZGVmLmxlbmd0aDsNCgl0aGlzLm1fZnJlcXVlbmN5SHogPSBk
ZWYuZnJlcXVlbmN5SHo7DQoJdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGRlZi5kYW1waW5nUmF0aW87
DQoJdGhpcy5tX2ltcHVsc2UgPSAwLjA7DQoJdGhpcy5tX2dhbW1hID0gMC4wOw0KCXRoaXMubV9i
aWFzID0gMC4wOw0KfTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5j
ZUpvaW50LCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludCk7DQpCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEp
Ow0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkdl
dEFuY2hvckIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9p
bnQodGhpcy5tX2xvY2FsQW5jaG9yMik7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gaW52
X2R0DQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnQucHJvdG90eXBl
LkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHsNCglyZXR1cm4gQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyLkdldChpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Lngs
IGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UueSk7DQp9Ow0KLyoqDQogKiBAcGFy
YW0ge251bWJlcn0gaW52X2R0DQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNl
Sm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7DQoJ
cmV0dXJuIDAuMDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50LnBy
b3RvdHlwZS5HZXRMZW5ndGggPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2xlbmd0aDsN
Cn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGgNCiAqLw0KQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuU2V0TGVuZ3RoID0gZnVuY3Rpb24obGVu
Z3RoKSB7DQoJdGhpcy5tX2xlbmd0aCA9IGxlbmd0aDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRGcmVxdWVuY3kgPSBmdW5jdGlvbigpIHsN
CglyZXR1cm4gdGhpcy5tX2ZyZXF1ZW5jeUh6Ow0KfTsNCi8qKg0KICogQHBhcmFtIHtudW1iZXJ9
IGh6DQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnQucHJvdG90eXBl
LlNldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKGh6KSB7DQoJdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gaHo7
DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0
RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9kYW1waW5nUmF0aW87
DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJlcn0gcmF0aW8NCiAqLw0KQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuU2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rp
b24ocmF0aW8pIHsNCgl0aGlzLm1fZGFtcGluZ1JhdGlvID0gcmF0aW87DQp9Ow0KQm94MkQuRHlu
YW1pY3MuSm9pbnRzLmIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3Ry
YWludHMgPSBmdW5jdGlvbihzdGVwKSB7DQoJdmFyIHRNYXQ7DQoJdmFyIHRYID0gMDsNCgl2YXIg
YkEgPSB0aGlzLm1fYm9keUE7DQoJdmFyIGJCID0gdGhpcy5tX2JvZHlCOw0KCXRNYXQgPSBiQS5t
X3hmLlI7DQoJdmFyIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9j
YWxDZW50ZXIueDsNCgl2YXIgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2Vl
cC5sb2NhbENlbnRlci55Ow0KCXRYID0gKHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLngg
KiByMVkpOw0KCXIxWSA9ICh0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsN
CglyMVggPSB0WDsNCgl0TWF0ID0gYkIubV94Zi5SOw0KCXZhciByMlggPSB0aGlzLm1fbG9jYWxB
bmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7DQoJdmFyIHIyWSA9IHRoaXMubV9s
b2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNv
bDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZKTsNCglyMlkgPSAodE1hdC5jb2wxLnkgKiBy
MlggKyB0TWF0LmNvbDIueSAqIHIyWSk7DQoJcjJYID0gdFg7DQoJdGhpcy5tX3UueCA9IGJCLm1f
c3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7DQoJdGhpcy5tX3UueSA9IGJC
Lm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSByMVk7DQoJdmFyIGxlbmd0aCA9
IE1hdGguc3FydCh0aGlzLm1fdS54ICogdGhpcy5tX3UueCArIHRoaXMubV91LnkgKiB0aGlzLm1f
dS55KTsNCglpZiAobGVuZ3RoID4gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xv
cCkgew0KCQl0aGlzLm1fdS5NdWx0aXBseSgxLjAgLyBsZW5ndGgpOw0KCX0gZWxzZSB7DQoJCXRo
aXMubV91LlNldFplcm8oKTsNCgl9DQoJdmFyIGNyMXUgPSAocjFYICogdGhpcy5tX3UueSAtIHIx
WSAqIHRoaXMubV91LngpOw0KCXZhciBjcjJ1ID0gKHIyWCAqIHRoaXMubV91LnkgLSByMlkgKiB0
aGlzLm1fdS54KTsNCgl2YXIgaW52TWFzcyA9IGJBLm1faW52TWFzcyArIGJBLm1faW52SSAqIGNy
MXUgKiBjcjF1ICsgYkIubV9pbnZNYXNzICsgYkIubV9pbnZJICogY3IydSAqIGNyMnU7DQoJdGhp
cy5tX21hc3MgPSBpbnZNYXNzICE9IDAuMCA/IDEuMCAvIGludk1hc3MgOiAwLjA7DQoJaWYgKHRo
aXMubV9mcmVxdWVuY3lIeiA+IDAuMCkgew0KCQl2YXIgQyA9IGxlbmd0aCAtIHRoaXMubV9sZW5n
dGg7DQoJCXZhciBvbWVnYSA9IDIuMCAqIE1hdGguUEkgKiB0aGlzLm1fZnJlcXVlbmN5SHo7DQoJ
CXZhciBkID0gMi4wICogdGhpcy5tX21hc3MgKiB0aGlzLm1fZGFtcGluZ1JhdGlvICogb21lZ2E7
DQoJCXZhciBrID0gdGhpcy5tX21hc3MgKiBvbWVnYSAqIG9tZWdhOw0KCQl0aGlzLm1fZ2FtbWEg
PSBzdGVwLmR0ICogKGQgKyBzdGVwLmR0ICogayk7DQoJCXRoaXMubV9nYW1tYSA9IHRoaXMubV9n
YW1tYSAhPSAwLjAgPyAxIC8gdGhpcy5tX2dhbW1hIDogMC4wOw0KCQl0aGlzLm1fYmlhcyA9IEMg
KiBzdGVwLmR0ICogayAqIHRoaXMubV9nYW1tYTsNCgkJdGhpcy5tX21hc3MgPSBpbnZNYXNzICsg
dGhpcy5tX2dhbW1hOw0KCQl0aGlzLm1fbWFzcyA9IHRoaXMubV9tYXNzICE9IDAuMCA/IDEuMCAv
IHRoaXMubV9tYXNzIDogMC4wOw0KCX0NCglpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHsNCgkJdGhp
cy5tX2ltcHVsc2UgKj0gc3RlcC5kdFJhdGlvOw0KCQl2YXIgUFggPSB0aGlzLm1faW1wdWxzZSAq
IHRoaXMubV91Lng7DQoJCXZhciBQWSA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UueTsNCgkJ
YkEubV9saW5lYXJWZWxvY2l0eS54IC09IGJBLm1faW52TWFzcyAqIFBYOw0KCQliQS5tX2xpbmVh
clZlbG9jaXR5LnkgLT0gYkEubV9pbnZNYXNzICogUFk7DQoJCWJBLm1fYW5ndWxhclZlbG9jaXR5
IC09IGJBLm1faW52SSAqIChyMVggKiBQWSAtIHIxWSAqIFBYKTsNCgkJYkIubV9saW5lYXJWZWxv
Y2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFBYOw0KCQliQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0g
YkIubV9pbnZNYXNzICogUFk7DQoJCWJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAq
IChyMlggKiBQWSAtIHIyWSAqIFBYKTsNCgl9IGVsc2Ugew0KCQl0aGlzLm1faW1wdWxzZSA9IDAu
MDsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRGlzdGFuY2VKb2ludC5wcm90b3R5
cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkgew0KCXZhciByMVgg
PSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRl
ci54Ow0KCXZhciByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fYm9keUEubV9z
d2VlcC5sb2NhbENlbnRlci55Ow0KCXZhciB0WCA9ICh0aGlzLm1fYm9keUEubV94Zi5SLmNvbDEu
eCAqIHIxWCArIHRoaXMubV9ib2R5QS5tX3hmLlIuY29sMi54ICogcjFZKTsNCglyMVkgPSAodGhp
cy5tX2JvZHlBLm1feGYuUi5jb2wxLnkgKiByMVggKyB0aGlzLm1fYm9keUEubV94Zi5SLmNvbDIu
eSAqIHIxWSk7DQoJcjFYID0gdFg7DQoJdmFyIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAt
IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7DQoJdmFyIHIyWSA9IHRoaXMubV9s
b2NhbEFuY2hvcjIueSAtIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdFgg
PSAodGhpcy5tX2JvZHlCLm1feGYuUi5jb2wxLnggKiByMlggKyB0aGlzLm1fYm9keUIubV94Zi5S
LmNvbDIueCAqIHIyWSk7DQoJcjJZID0gKHRoaXMubV9ib2R5Qi5tX3hmLlIuY29sMS55ICogcjJY
ICsgdGhpcy5tX2JvZHlCLm1feGYuUi5jb2wyLnkgKiByMlkpOw0KCXIyWCA9IHRYOw0KCXZhciB2
MVggPSB0aGlzLm1fYm9keUEubV9saW5lYXJWZWxvY2l0eS54IC0gdGhpcy5tX2JvZHlBLm1fYW5n
dWxhclZlbG9jaXR5ICogcjFZOw0KCXZhciB2MVkgPSB0aGlzLm1fYm9keUEubV9saW5lYXJWZWxv
Y2l0eS55ICsgdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5ICogcjFYOw0KCXZhciB2Mlgg
PSB0aGlzLm1fYm9keUIubV9saW5lYXJWZWxvY2l0eS54IC0gdGhpcy5tX2JvZHlCLm1fYW5ndWxh
clZlbG9jaXR5ICogcjJZOw0KCXZhciB2MlkgPSB0aGlzLm1fYm9keUIubV9saW5lYXJWZWxvY2l0
eS55ICsgdGhpcy5tX2JvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJYOw0KCXZhciBDZG90ID0g
KHRoaXMubV91LnggKiAodjJYIC0gdjFYKSArIHRoaXMubV91LnkgKiAodjJZIC0gdjFZKSk7DQoJ
dmFyIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiAoQ2RvdCArIHRoaXMubV9iaWFzICsgdGhpcy5t
X2dhbW1hICogdGhpcy5tX2ltcHVsc2UpOw0KCXRoaXMubV9pbXB1bHNlICs9IGltcHVsc2U7DQoJ
dmFyIFBYID0gaW1wdWxzZSAqIHRoaXMubV91Lng7DQoJdmFyIFBZID0gaW1wdWxzZSAqIHRoaXMu
bV91Lnk7DQoJdGhpcy5tX2JvZHlBLm1fbGluZWFyVmVsb2NpdHkueCAtPSB0aGlzLm1fYm9keUEu
bV9pbnZNYXNzICogUFg7DQoJdGhpcy5tX2JvZHlBLm1fbGluZWFyVmVsb2NpdHkueSAtPSB0aGlz
Lm1fYm9keUEubV9pbnZNYXNzICogUFk7DQoJdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5
IC09IHRoaXMubV9ib2R5QS5tX2ludkkgKiAocjFYICogUFkgLSByMVkgKiBQWCk7DQoJdGhpcy5t
X2JvZHlCLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1fYm9keUIubV9pbnZNYXNzICogUFg7
DQoJdGhpcy5tX2JvZHlCLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1fYm9keUIubV9pbnZN
YXNzICogUFk7DQoJdGhpcy5tX2JvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMubV9ib2R5
Qi5tX2ludkkgKiAocjJYICogUFkgLSByMlkgKiBQWCk7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251
bWJlcn0gYmF1bWdhcnRlDQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9p
bnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0
ZSkgew0KCWlmICh0aGlzLm1fZnJlcXVlbmN5SHogPiAwLjApIHsNCgkJcmV0dXJuIHRydWU7DQoJ
fQ0KCXZhciByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fYm9keUEubV9zd2Vl
cC5sb2NhbENlbnRlci54Ow0KCXZhciByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlz
Lm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXZhciB0WCA9ICh0aGlzLm1fYm9keUEu
bV94Zi5SLmNvbDEueCAqIHIxWCArIHRoaXMubV9ib2R5QS5tX3hmLlIuY29sMi54ICogcjFZKTsN
CglyMVkgPSAodGhpcy5tX2JvZHlBLm1feGYuUi5jb2wxLnkgKiByMVggKyB0aGlzLm1fYm9keUEu
bV94Zi5SLmNvbDIueSAqIHIxWSk7DQoJcjFYID0gdFg7DQoJdmFyIHIyWCA9IHRoaXMubV9sb2Nh
bEFuY2hvcjIueCAtIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7DQoJdmFyIHIy
WSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2Vu
dGVyLnk7DQoJdFggPSAodGhpcy5tX2JvZHlCLm1feGYuUi5jb2wxLnggKiByMlggKyB0aGlzLm1f
Ym9keUIubV94Zi5SLmNvbDIueCAqIHIyWSk7DQoJcjJZID0gKHRoaXMubV9ib2R5Qi5tX3hmLlIu
Y29sMS55ICogcjJYICsgdGhpcy5tX2JvZHlCLm1feGYuUi5jb2wyLnkgKiByMlkpOw0KCXIyWCA9
IHRYOw0KCXZhciBkWCA9IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmMueCArIHIyWCAtIHRoaXMubV9i
b2R5QS5tX3N3ZWVwLmMueCAtIHIxWDsNCgl2YXIgZFkgPSB0aGlzLm1fYm9keUIubV9zd2VlcC5j
LnkgKyByMlkgLSB0aGlzLm1fYm9keUEubV9zd2VlcC5jLnkgLSByMVk7DQoJdmFyIGxlbmd0aCA9
IE1hdGguc3FydChkWCAqIGRYICsgZFkgKiBkWSk7DQoJZFggLz0gbGVuZ3RoOw0KCWRZIC89IGxl
bmd0aDsNCgl2YXIgQyA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5DbGFtcChsZW5ndGggLSB0
aGlzLm1fbGVuZ3RoLCAtQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVj
dGlvbiwgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbik7DQoJ
dmFyIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiBDOw0KCXRoaXMubV91LlNldChkWCwgZFkpOw0K
CXZhciBQWCA9IGltcHVsc2UgKiB0aGlzLm1fdS54Ow0KCXZhciBQWSA9IGltcHVsc2UgKiB0aGlz
Lm1fdS55Ow0KCXRoaXMubV9ib2R5QS5tX3N3ZWVwLmMueCAtPSB0aGlzLm1fYm9keUEubV9pbnZN
YXNzICogUFg7DQoJdGhpcy5tX2JvZHlBLm1fc3dlZXAuYy55IC09IHRoaXMubV9ib2R5QS5tX2lu
dk1hc3MgKiBQWTsNCgl0aGlzLm1fYm9keUEubV9zd2VlcC5hIC09IHRoaXMubV9ib2R5QS5tX2lu
dkkgKiAocjFYICogUFkgLSByMVkgKiBQWCk7DQoJdGhpcy5tX2JvZHlCLm1fc3dlZXAuYy54ICs9
IHRoaXMubV9ib2R5Qi5tX2ludk1hc3MgKiBQWDsNCgl0aGlzLm1fYm9keUIubV9zd2VlcC5jLnkg
Kz0gdGhpcy5tX2JvZHlCLm1faW52TWFzcyAqIFBZOw0KCXRoaXMubV9ib2R5Qi5tX3N3ZWVwLmEg
Kz0gdGhpcy5tX2JvZHlCLm1faW52SSAqIChyMlggKiBQWSAtIHIyWSAqIFBYKTsNCgl0aGlzLm1f
Ym9keUEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCgl0aGlzLm1fYm9keUIuU3luY2hyb25pemVU
cmFuc2Zvcm0oKTsNCglyZXR1cm4gTWF0aC5hYnMoQykgPCBCb3gyRC5Db21tb24uYjJTZXR0aW5n
cy5iMl9saW5lYXJTbG9wOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWZ9DQogKi8NCkJveDJELkR5bmFtaWNzLkpv
aW50cy5iMkRpc3RhbmNlSm9pbnREZWYgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJKb2ludERlZi5jYWxsKHRoaXMpOw0KCXRoaXMubG9jYWxBbmNob3JBID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxvY2FsQW5jaG9yQiA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy50eXBlID0gQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIySm9pbnQuZV9kaXN0YW5jZUpvaW50Ow0KCXRoaXMubGVuZ3RoID0gMS4wOw0K
CXRoaXMuZnJlcXVlbmN5SHogPSAwLjA7DQoJdGhpcy5kYW1waW5nUmF0aW8gPSAwLjA7DQp9Ow0K
YzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnREZWYsIEJveDJE
LkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmKTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRp
c3RhbmNlSm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFu
Y2hvckEsIGFuY2hvckIpIHsNCgl0aGlzLmJvZHlBID0gYkE7DQoJdGhpcy5ib2R5QiA9IGJCOw0K
CXRoaXMubG9jYWxBbmNob3JBLlNldFYodGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvckEp
KTsNCgl0aGlzLmxvY2FsQW5jaG9yQi5TZXRWKHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNo
b3JCKSk7DQoJdmFyIGRYID0gYW5jaG9yQi54IC0gYW5jaG9yQS54Ow0KCXZhciBkWSA9IGFuY2hv
ckIueSAtIGFuY2hvckEueTsNCgl0aGlzLmxlbmd0aCA9IE1hdGguc3FydChkWCAqIGRYICsgZFkg
KiBkWSk7DQoJdGhpcy5mcmVxdWVuY3lIeiA9IDAuMDsNCgl0aGlzLmRhbXBpbmdSYXRpbyA9IDAu
MDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50RGVmLnByb3RvdHlw
ZS5DcmVhdGUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gbmV3IEJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkRpc3RhbmNlSm9pbnQodGhpcyk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5h
bWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50RGVmfSBkZWYNCiAqIEBjb25zdHJ1Y3Rvcg0KICog
QGV4dGVuZHMge0JveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50fQ0KICovDQpCb3gyRC5EeW5h
bWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50ID0gZnVuY3Rpb24oZGVmKSB7DQoJQm94MkQuRHlu
YW1pY3MuSm9pbnRzLmIySm9pbnQuY2FsbCh0aGlzLCBkZWYpOw0KCXRoaXMubV9sb2NhbEFuY2hv
ckEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9sb2NhbEFu
Y2hvckIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9saW5l
YXJNYXNzID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIoKTsNCgl0aGlzLm1fbGluZWFy
SW1wdWxzZSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5tX2xv
Y2FsQW5jaG9yQS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpOw0KCXRoaXMubV9sb2NhbEFuY2hvckIu
U2V0VihkZWYubG9jYWxBbmNob3JCKTsNCgl0aGlzLm1fbGluZWFyTWFzcy5TZXRaZXJvKCk7DQoJ
dGhpcy5tX2FuZ3VsYXJNYXNzID0gMC4wOw0KCXRoaXMubV9saW5lYXJJbXB1bHNlLlNldFplcm8o
KTsNCgl0aGlzLm1fYW5ndWxhckltcHVsc2UgPSAwLjA7DQoJdGhpcy5tX21heEZvcmNlID0gZGVm
Lm1heEZvcmNlOw0KCXRoaXMubV9tYXhUb3JxdWUgPSBkZWYubWF4VG9ycXVlOw0KfTsNCmMyaW5o
ZXJpdChCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50LCBCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJKb2ludCk7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50
LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9ib2R5
QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEpOw0KfTsNCkJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigp
IHsNCglyZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9y
Qik7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUu
R2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVu
ZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1f
bGluZWFySW1wdWxzZS54LCBpbnZfZHQgKiB0aGlzLm1fbGluZWFySW1wdWxzZS55KTsNCn07DQpC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlv
blRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkg
aW52X2R0ID0gMDsNCglyZXR1cm4gaW52X2R0ICogdGhpcy5tX2FuZ3VsYXJJbXB1bHNlOw0KfTsN
CkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLlNldE1heEZv
cmNlID0gZnVuY3Rpb24oZm9yY2UpIHsNCglpZiAoZm9yY2UgPT09IHVuZGVmaW5lZCkgZm9yY2Ug
PSAwOw0KCXRoaXMubV9tYXhGb3JjZSA9IGZvcmNlOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldE1heEZvcmNlID0gZnVuY3Rpb24oKSB7DQoJ
cmV0dXJuIHRoaXMubV9tYXhGb3JjZTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmlj
dGlvbkpvaW50LnByb3RvdHlwZS5TZXRNYXhUb3JxdWUgPSBmdW5jdGlvbih0b3JxdWUpIHsNCglp
ZiAodG9ycXVlID09PSB1bmRlZmluZWQpIHRvcnF1ZSA9IDA7DQoJdGhpcy5tX21heFRvcnF1ZSA9
IHRvcnF1ZTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50LnByb3Rv
dHlwZS5HZXRNYXhUb3JxdWUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX21heFRvcnF1
ZTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5J
bml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHsNCgl2YXIgdE1hdDsNCgl2
YXIgdFggPSAwOw0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9k
eUI7DQoJdE1hdCA9IGJBLm1feGYuUjsNCgl2YXIgckFYID0gdGhpcy5tX2xvY2FsQW5jaG9yQS54
IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCXZhciByQVkgPSB0aGlzLm1fbG9jYWxBbmNo
b3JBLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiBy
QVggKyB0TWF0LmNvbDIueCAqIHJBWSk7DQoJckFZID0gKHRNYXQuY29sMS55ICogckFYICsgdE1h
dC5jb2wyLnkgKiByQVkpOw0KCXJBWCA9IHRYOw0KCXRNYXQgPSBiQi5tX3hmLlI7DQoJdmFyIHJC
WCA9IHRoaXMubV9sb2NhbEFuY2hvckIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2
YXIgckJZID0gdGhpcy5tX2xvY2FsQW5jaG9yQi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55
Ow0KCXRYID0gKHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiByQlkpOw0KCXJCWSA9
ICh0TWF0LmNvbDEueSAqIHJCWCArIHRNYXQuY29sMi55ICogckJZKTsNCglyQlggPSB0WDsNCgl2
YXIgbUEgPSBiQS5tX2ludk1hc3M7DQoJdmFyIG1CID0gYkIubV9pbnZNYXNzOw0KCXZhciBpQSA9
IGJBLm1faW52STsNCgl2YXIgaUIgPSBiQi5tX2ludkk7DQoJdmFyIEsgPSBuZXcgQm94MkQuQ29t
bW9uLk1hdGguYjJNYXQyMigpOw0KCUsuY29sMS54ID0gbUEgKyBtQjsNCglLLmNvbDIueCA9IDAu
MDsNCglLLmNvbDEueSA9IDAuMDsNCglLLmNvbDIueSA9IG1BICsgbUI7DQoJSy5jb2wxLnggKz0g
aUEgKiByQVkgKiByQVk7DQoJSy5jb2wyLnggKz0gKC1pQSAqIHJBWCAqIHJBWSk7DQoJSy5jb2wx
LnkgKz0gKC1pQSAqIHJBWCAqIHJBWSk7DQoJSy5jb2wyLnkgKz0gaUEgKiByQVggKiByQVg7DQoJ
Sy5jb2wxLnggKz0gaUIgKiByQlkgKiByQlk7DQoJSy5jb2wyLnggKz0gKC1pQiAqIHJCWCAqIHJC
WSk7DQoJSy5jb2wxLnkgKz0gKC1pQiAqIHJCWCAqIHJCWSk7DQoJSy5jb2wyLnkgKz0gaUIgKiBy
QlggKiByQlg7DQoJSy5HZXRJbnZlcnNlKHRoaXMubV9saW5lYXJNYXNzKTsNCgl0aGlzLm1fYW5n
dWxhck1hc3MgPSBpQSArIGlCOw0KCWlmICh0aGlzLm1fYW5ndWxhck1hc3MgPiAwLjApIHsNCgkJ
dGhpcy5tX2FuZ3VsYXJNYXNzID0gMS4wIC8gdGhpcy5tX2FuZ3VsYXJNYXNzOw0KCX0NCglpZiAo
c3RlcC53YXJtU3RhcnRpbmcpIHsNCgkJdGhpcy5tX2xpbmVhckltcHVsc2UueCAqPSBzdGVwLmR0
UmF0aW87DQoJCXRoaXMubV9saW5lYXJJbXB1bHNlLnkgKj0gc3RlcC5kdFJhdGlvOw0KCQl0aGlz
Lm1fYW5ndWxhckltcHVsc2UgKj0gc3RlcC5kdFJhdGlvOw0KCQl2YXIgUCA9IHRoaXMubV9saW5l
YXJJbXB1bHNlOw0KCQliQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gbUEgKiBQLng7DQoJCWJBLm1f
bGluZWFyVmVsb2NpdHkueSAtPSBtQSAqIFAueTsNCgkJYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0g
aUEgKiAockFYICogUC55IC0gckFZICogUC54ICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTsNCgkJ
YkIubV9saW5lYXJWZWxvY2l0eS54ICs9IG1CICogUC54Ow0KCQliQi5tX2xpbmVhclZlbG9jaXR5
LnkgKz0gbUIgKiBQLnk7DQoJCWJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGlCICogKHJCWCAqIFAu
eSAtIHJCWSAqIFAueCArIHRoaXMubV9hbmd1bGFySW1wdWxzZSk7DQoJfSBlbHNlIHsNCgkJdGhp
cy5tX2xpbmVhckltcHVsc2UuU2V0WmVybygpOw0KCQl0aGlzLm1fYW5ndWxhckltcHVsc2UgPSAw
LjA7DQoJfQ0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkZyaWN0aW9uSm9pbnQucHJvdG90
eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHsNCgl2YXIgdE1h
dDsNCgl2YXIgdFggPSAwOw0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlz
Lm1fYm9keUI7DQoJdmFyIHZBID0gYkEubV9saW5lYXJWZWxvY2l0eTsNCgl2YXIgd0EgPSBiQS5t
X2FuZ3VsYXJWZWxvY2l0eTsNCgl2YXIgdkIgPSBiQi5tX2xpbmVhclZlbG9jaXR5Ow0KCXZhciB3
QiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5Ow0KCXZhciBtQSA9IGJBLm1faW52TWFzczsNCgl2YXIg
bUIgPSBiQi5tX2ludk1hc3M7DQoJdmFyIGlBID0gYkEubV9pbnZJOw0KCXZhciBpQiA9IGJCLm1f
aW52STsNCgl0TWF0ID0gYkEubV94Zi5SOw0KCXZhciByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JB
LnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7DQoJdmFyIHJBWSA9IHRoaXMubV9sb2NhbEFu
Y2hvckEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNvbDEueCAq
IHJBWCArIHRNYXQuY29sMi54ICogckFZKTsNCglyQVkgPSAodE1hdC5jb2wxLnkgKiByQVggKyB0
TWF0LmNvbDIueSAqIHJBWSk7DQoJckFYID0gdFg7DQoJdE1hdCA9IGJCLm1feGYuUjsNCgl2YXIg
ckJYID0gdGhpcy5tX2xvY2FsQW5jaG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54Ow0K
CXZhciByQlkgPSB0aGlzLm1fbG9jYWxBbmNob3JCLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVy
Lnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByQlggKyB0TWF0LmNvbDIueCAqIHJCWSk7DQoJckJZ
ID0gKHRNYXQuY29sMS55ICogckJYICsgdE1hdC5jb2wyLnkgKiByQlkpOw0KCXJCWCA9IHRYOw0K
CXZhciBtYXhJbXB1bHNlID0gMDsNCgl2YXIgQ2RvdCA9IHdCIC0gd0E7DQoJdmFyIGltcHVsc2Ug
PSAoLXRoaXMubV9hbmd1bGFyTWFzcyAqIENkb3QpOw0KCXZhciBvbGRJbXB1bHNlID0gdGhpcy5t
X2FuZ3VsYXJJbXB1bHNlOw0KCW1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heFRvcnF1
ZTsNCgl0aGlzLm1fYW5ndWxhckltcHVsc2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xh
bXAodGhpcy5tX2FuZ3VsYXJJbXB1bHNlICsgaW1wdWxzZSwgKC1tYXhJbXB1bHNlKSwgbWF4SW1w
dWxzZSk7DQoJaW1wdWxzZSA9IHRoaXMubV9hbmd1bGFySW1wdWxzZSAtIG9sZEltcHVsc2U7DQoJ
d0EgLT0gaUEgKiBpbXB1bHNlOw0KCXdCICs9IGlCICogaW1wdWxzZTsNCgl2YXIgQ2RvdFggPSB2
Qi54IC0gd0IgKiByQlkgLSB2QS54ICsgd0EgKiByQVk7DQoJdmFyIENkb3RZID0gdkIueSArIHdC
ICogckJYIC0gdkEueSAtIHdBICogckFYOw0KCXZhciBpbXB1bHNlViA9IEJveDJELkNvbW1vbi5N
YXRoLmIyTWF0aC5NdWxNVih0aGlzLm1fbGluZWFyTWFzcywgQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkdldCgoLUNkb3RYKSwgKC1DZG90WSkpKTsNCgl2YXIgb2xkSW1wdWxzZVYgPSB0aGlzLm1f
bGluZWFySW1wdWxzZS5Db3B5KCk7DQoJdGhpcy5tX2xpbmVhckltcHVsc2UuQWRkKGltcHVsc2VW
KTsNCgltYXhJbXB1bHNlID0gc3RlcC5kdCAqIHRoaXMubV9tYXhGb3JjZTsNCglpZiAodGhpcy5t
X2xpbmVhckltcHVsc2UuTGVuZ3RoU3F1YXJlZCgpID4gbWF4SW1wdWxzZSAqIG1heEltcHVsc2Up
IHsNCgkJdGhpcy5tX2xpbmVhckltcHVsc2UuTm9ybWFsaXplKCk7DQoJCXRoaXMubV9saW5lYXJJ
bXB1bHNlLk11bHRpcGx5KG1heEltcHVsc2UpOw0KCX0NCglpbXB1bHNlViA9IEJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV9saW5lYXJJbXB1bHNlLCBvbGRJbXB1bHNl
Vik7DQoJdkEueCAtPSBtQSAqIGltcHVsc2VWLng7DQoJdkEueSAtPSBtQSAqIGltcHVsc2VWLnk7
DQoJd0EgLT0gaUEgKiAockFYICogaW1wdWxzZVYueSAtIHJBWSAqIGltcHVsc2VWLngpOw0KCXZC
LnggKz0gbUIgKiBpbXB1bHNlVi54Ow0KCXZCLnkgKz0gbUIgKiBpbXB1bHNlVi55Ow0KCXdCICs9
IGlCICogKHJCWCAqIGltcHVsc2VWLnkgLSByQlkgKiBpbXB1bHNlVi54KTsNCgliQS5tX2FuZ3Vs
YXJWZWxvY2l0eSA9IHdBOw0KCWJCLm1fYW5ndWxhclZlbG9jaXR5ID0gd0I7DQp9Ow0KQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNv
bnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7DQoJcmV0dXJuIHRydWU7DQp9Ow0KLyoq
DQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJK
b2ludERlZn0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludERlZiA9
IGZ1bmN0aW9uKCkgew0KCUJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmLmNhbGwodGhp
cyk7DQoJdGhpcy5sb2NhbEFuY2hvckEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAs
IDApOw0KCXRoaXMubG9jYWxBbmNob3JCID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgw
LCAwKTsNCgl0aGlzLnR5cGUgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2ZyaWN0
aW9uSm9pbnQ7DQoJdGhpcy5tYXhGb3JjZSA9IDAuMDsNCgl0aGlzLm1heFRvcnF1ZSA9IDAuMDsN
Cn07DQpjMmluaGVyaXQoQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludERlZiwg
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWYpOw0KQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIyRnJpY3Rpb25Kb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uIChiQSwg
YkIsIGFuY2hvcikgew0KCXRoaXMuYm9keUEgPSBiQTsNCgl0aGlzLmJvZHlCID0gYkI7DQoJdGhp
cy5sb2NhbEFuY2hvckEuU2V0Vih0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7DQoJ
dGhpcy5sb2NhbEFuY2hvckIuU2V0Vih0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7
DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludERlZi5wcm90b3R5cGUu
Q3JlYXRlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIG5ldyBCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJGcmljdGlvbkpvaW50KHRoaXMpOw0KfTsNCi8qKg0KICogQHBhcmFtIHshQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIyR2VhckpvaW50RGVmfSBkZWYNCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVu
ZHMge0JveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50fQ0KICovDQpCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJHZWFySm9pbnQgPSBmdW5jdGlvbihkZWYpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJKb2ludC5jYWxsKHRoaXMsIGRlZik7DQoJdGhpcy5tX2dyb3VuZEFuY2hvcjEgPSBCb3gy
RC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9ncm91bmRBbmNob3IyID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3Ix
ID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNo
b3IyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fSiA9IG5l
dyBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKYWNvYmlhbigpOw0KCXZhciB0eXBlMSA9IGRlZi5q
b2ludDEubV90eXBlOw0KCXZhciB0eXBlMiA9IGRlZi5qb2ludDIubV90eXBlOw0KCXRoaXMubV9y
ZXZvbHV0ZTEgPSBudWxsOw0KCXRoaXMubV9wcmlzbWF0aWMxID0gbnVsbDsNCgl0aGlzLm1fcmV2
b2x1dGUyID0gbnVsbDsNCgl0aGlzLm1fcHJpc21hdGljMiA9IG51bGw7DQoJdmFyIGNvb3JkaW5h
dGUxID0gMDsNCgl2YXIgY29vcmRpbmF0ZTIgPSAwOw0KCXRoaXMubV9ncm91bmQxID0gZGVmLmpv
aW50MS5HZXRCb2R5QSgpOw0KCXRoaXMubV9ib2R5QSA9IGRlZi5qb2ludDEuR2V0Qm9keUIoKTsN
CglpZiAodHlwZTEgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9yZXZvbHV0ZUpv
aW50KSB7DQoJCXRoaXMubV9yZXZvbHV0ZTEgPSBkZWYuam9pbnQxOw0KCQl0aGlzLm1fZ3JvdW5k
QW5jaG9yMS5TZXRWKHRoaXMubV9yZXZvbHV0ZTEubV9sb2NhbEFuY2hvcjEpOw0KCQl0aGlzLm1f
bG9jYWxBbmNob3IxLlNldFYodGhpcy5tX3Jldm9sdXRlMS5tX2xvY2FsQW5jaG9yMik7DQoJCWNv
b3JkaW5hdGUxID0gdGhpcy5tX3Jldm9sdXRlMS5HZXRKb2ludEFuZ2xlKCk7DQoJfSBlbHNlIHsN
CgkJdGhpcy5tX3ByaXNtYXRpYzEgPSBkZWYuam9pbnQxOw0KCQl0aGlzLm1fZ3JvdW5kQW5jaG9y
MS5TZXRWKHRoaXMubV9wcmlzbWF0aWMxLm1fbG9jYWxBbmNob3IxKTsNCgkJdGhpcy5tX2xvY2Fs
QW5jaG9yMS5TZXRWKHRoaXMubV9wcmlzbWF0aWMxLm1fbG9jYWxBbmNob3IyKTsNCgkJY29vcmRp
bmF0ZTEgPSB0aGlzLm1fcHJpc21hdGljMS5HZXRKb2ludFRyYW5zbGF0aW9uKCk7DQoJfQ0KCXRo
aXMubV9ncm91bmQyID0gZGVmLmpvaW50Mi5HZXRCb2R5QSgpOw0KCXRoaXMubV9ib2R5QiA9IGRl
Zi5qb2ludDIuR2V0Qm9keUIoKTsNCglpZiAodHlwZTIgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIySm9pbnQuZV9yZXZvbHV0ZUpvaW50KSB7DQoJCXRoaXMubV9yZXZvbHV0ZTIgPSBkZWYuam9p
bnQyOw0KCQl0aGlzLm1fZ3JvdW5kQW5jaG9yMi5TZXRWKHRoaXMubV9yZXZvbHV0ZTIubV9sb2Nh
bEFuY2hvcjEpOw0KCQl0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYodGhpcy5tX3Jldm9sdXRlMi5t
X2xvY2FsQW5jaG9yMik7DQoJCWNvb3JkaW5hdGUyID0gdGhpcy5tX3Jldm9sdXRlMi5HZXRKb2lu
dEFuZ2xlKCk7DQoJfSBlbHNlIHsNCgkJdGhpcy5tX3ByaXNtYXRpYzIgPSBkZWYuam9pbnQyOw0K
CQl0aGlzLm1fZ3JvdW5kQW5jaG9yMi5TZXRWKHRoaXMubV9wcmlzbWF0aWMyLm1fbG9jYWxBbmNo
b3IxKTsNCgkJdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKHRoaXMubV9wcmlzbWF0aWMyLm1fbG9j
YWxBbmNob3IyKTsNCgkJY29vcmRpbmF0ZTIgPSB0aGlzLm1fcHJpc21hdGljMi5HZXRKb2ludFRy
YW5zbGF0aW9uKCk7DQoJfQ0KCXRoaXMubV9yYXRpbyA9IGRlZi5yYXRpbzsNCgl0aGlzLm1fY29u
c3RhbnQgPSBjb29yZGluYXRlMSArIHRoaXMubV9yYXRpbyAqIGNvb3JkaW5hdGUyOw0KCXRoaXMu
bV9pbXB1bHNlID0gMC4wOw0KfTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJH
ZWFySm9pbnQsIEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50KTsNCkJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkdlYXJKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkgew0K
CXJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTsN
Cn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnQucHJvdG90eXBlLkdldEFuY2hv
ckIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhp
cy5tX2xvY2FsQW5jaG9yMik7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50
LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7DQoJaWYgKGlu
dl9kdCA9PT0gdW5kZWZpbmVkKSBpbnZfZHQgPSAwOw0KCXJldHVybiBCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIuR2V0KGludl9kdCAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0oubGluZWFyQi54
LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueSk7DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1
ZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0
ID0gMDsNCgl2YXIgdE1hdCA9IHRoaXMubV9ib2R5Qi5tX3hmLlI7DQoJdmFyIHJYID0gdGhpcy5t
X2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2
YXIgclkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2Nh
bENlbnRlci55Ow0KCXZhciB0WCA9IHRNYXQuY29sMS54ICogclggKyB0TWF0LmNvbDIueCAqIHJZ
Ow0KCXJZID0gdE1hdC5jb2wxLnkgKiByWCArIHRNYXQuY29sMi55ICogclk7DQoJclggPSB0WDsN
Cgl2YXIgUFggPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueDsNCgl2YXIgUFkg
PSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTsNCglyZXR1cm4gaW52X2R0ICog
KHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckIgLSByWCAqIFBZICsgclkgKiBQWCk7
DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRSYXRp
byA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fcmF0aW87DQp9Ow0KQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIyR2VhckpvaW50LnByb3RvdHlwZS5TZXRSYXRpbyA9IGZ1bmN0aW9uKHJhdGlv
KSB7DQoJaWYgKHJhdGlvID09PSB1bmRlZmluZWQpIHJhdGlvID0gMDsNCgl0aGlzLm1fcmF0aW8g
PSByYXRpbzsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnQucHJvdG90eXBl
LkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkgew0KCXZhciBnMSA9IHRo
aXMubV9ncm91bmQxOw0KCXZhciBnMiA9IHRoaXMubV9ncm91bmQyOw0KCXZhciBiQSA9IHRoaXMu
bV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7DQoJdmFyIHVnWCA9IDA7DQoJdmFyIHVn
WSA9IDA7DQoJdmFyIHJYID0gMDsNCgl2YXIgclkgPSAwOw0KCXZhciB0TWF0Ow0KCXZhciB0VmVj
Ow0KCXZhciBjcnVnID0gMDsNCgl2YXIgdFggPSAwOw0KCXZhciBLID0gMC4wOw0KCXRoaXMubV9K
LlNldFplcm8oKTsNCglpZiAodGhpcy5tX3Jldm9sdXRlMSkgew0KCQl0aGlzLm1fSi5hbmd1bGFy
QSA9ICgtMS4wKTsNCgkJSyArPSBiQS5tX2ludkk7DQoJfSBlbHNlIHsNCgkJdE1hdCA9IGcxLm1f
eGYuUjsNCgkJdFZlYyA9IHRoaXMubV9wcmlzbWF0aWMxLm1fbG9jYWxYQXhpczE7DQoJCXVnWCA9
IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7DQoJCXVnWSA9IHRN
YXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7DQoJCXRNYXQgPSBiQS5t
X3hmLlI7DQoJCXJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENl
bnRlci54Ow0KCQlyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxD
ZW50ZXIueTsNCgkJdFggPSB0TWF0LmNvbDEueCAqIHJYICsgdE1hdC5jb2wyLnggKiByWTsNCgkJ
clkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTsNCgkJclggPSB0WDsNCgkJ
Y3J1ZyA9IHJYICogdWdZIC0gclkgKiB1Z1g7DQoJCXRoaXMubV9KLmxpbmVhckEuU2V0KCgtdWdY
KSwgKC11Z1kpKTsNCgkJdGhpcy5tX0ouYW5ndWxhckEgPSAoLWNydWcpOw0KCQlLICs9IGJBLm1f
aW52TWFzcyArIGJBLm1faW52SSAqIGNydWcgKiBjcnVnOw0KCX0NCglpZiAodGhpcy5tX3Jldm9s
dXRlMikgew0KCQl0aGlzLm1fSi5hbmd1bGFyQiA9ICgtdGhpcy5tX3JhdGlvKTsNCgkJSyArPSB0
aGlzLm1fcmF0aW8gKiB0aGlzLm1fcmF0aW8gKiBiQi5tX2ludkk7DQoJfSBlbHNlIHsNCgkJdE1h
dCA9IGcyLm1feGYuUjsNCgkJdFZlYyA9IHRoaXMubV9wcmlzbWF0aWMyLm1fbG9jYWxYQXhpczE7
DQoJCXVnWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7DQoJ
CXVnWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7DQoJCXRN
YXQgPSBiQi5tX3hmLlI7DQoJCXJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2Vl
cC5sb2NhbENlbnRlci54Ow0KCQlyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dl
ZXAubG9jYWxDZW50ZXIueTsNCgkJdFggPSB0TWF0LmNvbDEueCAqIHJYICsgdE1hdC5jb2wyLngg
KiByWTsNCgkJclkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTsNCgkJclgg
PSB0WDsNCgkJY3J1ZyA9IHJYICogdWdZIC0gclkgKiB1Z1g7DQoJCXRoaXMubV9KLmxpbmVhckIu
U2V0KCgtdGhpcy5tX3JhdGlvICogdWdYKSwgKC10aGlzLm1fcmF0aW8gKiB1Z1kpKTsNCgkJdGhp
cy5tX0ouYW5ndWxhckIgPSAoLXRoaXMubV9yYXRpbyAqIGNydWcpOw0KCQlLICs9IHRoaXMubV9y
YXRpbyAqIHRoaXMubV9yYXRpbyAqIChiQi5tX2ludk1hc3MgKyBiQi5tX2ludkkgKiBjcnVnICog
Y3J1Zyk7DQoJfQ0KCXRoaXMubV9tYXNzID0gSyA+IDAuMCA/IDEuMCAvIEsgOiAwLjA7DQoJaWYg
KHN0ZXAud2FybVN0YXJ0aW5nKSB7DQoJCWJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2lu
dk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueDsNCgkJYkEubV9saW5l
YXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0ou
bGluZWFyQS55Ow0KCQliQS5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQS5tX2ludkkgKiB0aGlzLm1f
aW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJBOw0KCQliQi5tX2xpbmVhclZlbG9jaXR5LnggKz0g
YkIubV9pbnZNYXNzICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7DQoJCWJC
Lm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRo
aXMubV9KLmxpbmVhckIueTsNCgkJYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICog
dGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQjsNCgl9IGVsc2Ugew0KCQl0aGlzLm1f
aW1wdWxzZSA9IDAuMDsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50
LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7DQoJ
dmFyIGJBID0gdGhpcy5tX2JvZHlBOw0KCXZhciBiQiA9IHRoaXMubV9ib2R5QjsNCgl2YXIgQ2Rv
dCA9IHRoaXMubV9KLkNvbXB1dGUoYkEubV9saW5lYXJWZWxvY2l0eSwgYkEubV9hbmd1bGFyVmVs
b2NpdHksIGJCLm1fbGluZWFyVmVsb2NpdHksIGJCLm1fYW5ndWxhclZlbG9jaXR5KTsNCgl2YXIg
aW1wdWxzZSA9ICgtdGhpcy5tX21hc3MgKiBDZG90KTsNCgl0aGlzLm1faW1wdWxzZSArPSBpbXB1
bHNlOw0KCWJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlICog
dGhpcy5tX0oubGluZWFyQS54Ow0KCWJBLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQS5tX2ludk1h
c3MgKiBpbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS55Ow0KCWJBLm1fYW5ndWxhclZlbG9jaXR5
ICs9IGJBLm1faW52SSAqIGltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQTsNCgliQi5tX2xpbmVh
clZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIu
eDsNCgliQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRo
aXMubV9KLmxpbmVhckIueTsNCgliQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiBp
bXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckI7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
R2VhckpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihi
YXVtZ2FydGUpIHsNCglpZiAoYmF1bWdhcnRlID09PSB1bmRlZmluZWQpIGJhdW1nYXJ0ZSA9IDA7
DQoJdmFyIGxpbmVhckVycm9yID0gMC4wOw0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIg
YkIgPSB0aGlzLm1fYm9keUI7DQoJdmFyIGNvb3JkaW5hdGUxID0gMDsNCgl2YXIgY29vcmRpbmF0
ZTIgPSAwOw0KCWlmICh0aGlzLm1fcmV2b2x1dGUxKSB7DQoJCWNvb3JkaW5hdGUxID0gdGhpcy5t
X3Jldm9sdXRlMS5HZXRKb2ludEFuZ2xlKCk7DQoJfSBlbHNlIHsNCgkJY29vcmRpbmF0ZTEgPSB0
aGlzLm1fcHJpc21hdGljMS5HZXRKb2ludFRyYW5zbGF0aW9uKCk7DQoJfQ0KCWlmICh0aGlzLm1f
cmV2b2x1dGUyKSB7DQoJCWNvb3JkaW5hdGUyID0gdGhpcy5tX3Jldm9sdXRlMi5HZXRKb2ludEFu
Z2xlKCk7DQoJfSBlbHNlIHsNCgkJY29vcmRpbmF0ZTIgPSB0aGlzLm1fcHJpc21hdGljMi5HZXRK
b2ludFRyYW5zbGF0aW9uKCk7DQoJfQ0KCXZhciBDID0gdGhpcy5tX2NvbnN0YW50IC0gKGNvb3Jk
aW5hdGUxICsgdGhpcy5tX3JhdGlvICogY29vcmRpbmF0ZTIpOw0KCXZhciBpbXB1bHNlID0gKC10
aGlzLm1fbWFzcyAqIEMpOw0KCWJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIGltcHVs
c2UgKiB0aGlzLm1fSi5saW5lYXJBLng7DQoJYkEubV9zd2VlcC5jLnkgKz0gYkEubV9pbnZNYXNz
ICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueTsNCgliQS5tX3N3ZWVwLmEgKz0gYkEubV9p
bnZJICogaW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJBOw0KCWJCLm1fc3dlZXAuYy54ICs9IGJC
Lm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7DQoJYkIubV9zd2VlcC5j
LnkgKz0gYkIubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTsNCgliQi5t
X3N3ZWVwLmEgKz0gYkIubV9pbnZJICogaW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJCOw0KCWJB
LlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCgly
ZXR1cm4gbGluZWFyRXJyb3IgPCBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9w
Ow0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7Qm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnREZWZ9DQogKi8NCiBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9p
bnREZWYgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZi5j
YWxsKHRoaXMpOw0KCXRoaXMudHlwZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVf
Z2VhckpvaW50Ow0KCXRoaXMuam9pbnQxID0gbnVsbDsNCgl0aGlzLmpvaW50MiA9IG51bGw7DQoJ
dGhpcy5yYXRpbyA9IDEuMDsNCn07DQpjMmluaGVyaXQoQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
R2VhckpvaW50RGVmLCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZik7DQpCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5j
dGlvbihqb2ludDEsIGpvaW50MiwgcmF0aW8pIHsNCgl0aGlzLmpvaW50MSA9IGpvaW50MTsNCgl0
aGlzLmJvZHlBID0gam9pbnQxLkdldEJvZHlBKCk7DQoJdGhpcy5qb2ludDIgPSBqb2ludDI7DQoJ
dGhpcy5ib2R5QiA9IGpvaW50Mi5HZXRCb2R5QSgpOw0KCXRoaXMucmF0aW8gPSByYXRpbzsNCn07
DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnREZWYucHJvdG90eXBlLkNyZWF0ZSA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiBuZXcgQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2Vhckpv
aW50KHRoaXMpOw0KfTsNCi8qKg0KICogQGNvbnN0cnVjdG9yDQogKi8NCkJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkphY29iaWFuID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5saW5lYXJBID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxpbmVhckIgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkph
Y29iaWFuLnByb3RvdHlwZS5TZXRaZXJvID0gZnVuY3Rpb24oKSB7DQoJdGhpcy5saW5lYXJBLlNl
dFplcm8oKTsNCgl0aGlzLmFuZ3VsYXJBID0gMC4wOw0KCXRoaXMubGluZWFyQi5TZXRaZXJvKCk7
DQoJdGhpcy5hbmd1bGFyQiA9IDAuMDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKYWNv
Ymlhbi5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oeDEsIGExLCB4MiwgYTIpIHsNCglpZiAoYTEg
PT09IHVuZGVmaW5lZCkgYTEgPSAwOw0KCWlmIChhMiA9PT0gdW5kZWZpbmVkKSBhMiA9IDA7DQoJ
dGhpcy5saW5lYXJBLlNldFYoeDEpOw0KCXRoaXMuYW5ndWxhckEgPSBhMTsNCgl0aGlzLmxpbmVh
ckIuU2V0Vih4Mik7DQoJdGhpcy5hbmd1bGFyQiA9IGEyOw0KfTsNCkJveDJELkR5bmFtaWNzLkpv
aW50cy5iMkphY29iaWFuLnByb3RvdHlwZS5Db21wdXRlID0gZnVuY3Rpb24oeDEsIGExLCB4Miwg
YTIpIHsNCglpZiAoYTEgPT09IHVuZGVmaW5lZCkgYTEgPSAwOw0KCWlmIChhMiA9PT0gdW5kZWZp
bmVkKSBhMiA9IDA7DQoJcmV0dXJuICh0aGlzLmxpbmVhckEueCAqIHgxLnggKyB0aGlzLmxpbmVh
ckEueSAqIHgxLnkpICsgdGhpcy5hbmd1bGFyQSAqIGExICsgKHRoaXMubGluZWFyQi54ICogeDIu
eCArIHRoaXMubGluZWFyQi55ICogeDIueSkgKyB0aGlzLmFuZ3VsYXJCICogYTI7DQp9Ow0KLyoq
DQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnREZWZ9IGRlZg0K
ICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9p
bnR9DQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludCA9IGZ1bmN0aW9uKGRl
Zikgew0KCUJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmNhbGwodGhpcywgZGVmKTsNCgl0
aGlzLm1fbG9jYWxBbmNob3IxID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsN
Cgl0aGlzLm1fbG9jYWxBbmNob3IyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAw
KTsNCgl0aGlzLm1fbG9jYWxYQXhpczEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAs
IDApOw0KCXRoaXMubV9sb2NhbFlBeGlzMSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQo
MCwgMCk7DQoJdGhpcy5tX2F4aXMgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDAp
Ow0KCXRoaXMubV9wZXJwID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0
aGlzLm1fSyA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyKCk7DQoJdGhpcy5tX2ltcHVs
c2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXZhciB0TWF0Ow0KCXZh
ciB0WCA9IDA7DQoJdmFyIHRZID0gMDsNCgl0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYoZGVmLmxv
Y2FsQW5jaG9yQSk7DQoJdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKGRlZi5sb2NhbEFuY2hvckIp
Ow0KCXRoaXMubV9sb2NhbFhBeGlzMS5TZXRWKGRlZi5sb2NhbEF4aXNBKTsNCgl0aGlzLm1fbG9j
YWxZQXhpczEueCA9ICgtdGhpcy5tX2xvY2FsWEF4aXMxLnkpOw0KCXRoaXMubV9sb2NhbFlBeGlz
MS55ID0gdGhpcy5tX2xvY2FsWEF4aXMxLng7DQoJdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpOw0K
CXRoaXMubV9tb3Rvck1hc3MgPSAwLjA7DQoJdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDsNCgl0
aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiA9IGRlZi5sb3dlclRyYW5zbGF0aW9uOw0KCXRoaXMubV91
cHBlclRyYW5zbGF0aW9uID0gZGVmLnVwcGVyVHJhbnNsYXRpb247DQoJdGhpcy5tX21heE1vdG9y
Rm9yY2UgPSBkZWYubWF4TW90b3JGb3JjZTsNCgl0aGlzLm1fbW90b3JTcGVlZCA9IGRlZi5tb3Rv
clNwZWVkOw0KCXRoaXMubV9lbmFibGVMaW1pdCA9IGRlZi5lbmFibGVMaW1pdDsNCgl0aGlzLm1f
ZW5hYmxlTW90b3IgPSBkZWYuZW5hYmxlTW90b3I7DQoJdGhpcy5tX2xpbWl0U3RhdGUgPSBCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7DQoJdGhpcy5tX2F4aXMu
U2V0WmVybygpOw0KCXRoaXMubV9wZXJwLlNldFplcm8oKTsNCn07DQpjMmluaGVyaXQoQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIyTGluZUpvaW50LCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2lu
dCk7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldEFuY2hv
ckEgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhp
cy5tX2xvY2FsQW5jaG9yMSk7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpvaW50
LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9ib2R5
Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpOw0KfTsNCkJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9u
KGludl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1
cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2Uu
eCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNl
LnkpICogdGhpcy5tX2F4aXMueCksIGludl9kdCAqICh0aGlzLm1faW1wdWxzZS54ICogdGhpcy5t
X3BlcnAueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlz
Lm1fYXhpcy55KSk7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpvaW50LnByb3Rv
dHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCWlmIChpbnZfZHQg
PT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVs
c2UueTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQucHJvdG90eXBlLkdl
dEpvaW50VHJhbnNsYXRpb24gPSBmdW5jdGlvbigpIHsNCgl2YXIgYkEgPSB0aGlzLm1fYm9keUE7
DQoJdmFyIGJCID0gdGhpcy5tX2JvZHlCOw0KCXZhciB0TWF0Ow0KCXZhciBwMSA9IGJBLkdldFdv
cmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7DQoJdmFyIHAyID0gYkIuR2V0V29ybGRQb2lu
dCh0aGlzLm1fbG9jYWxBbmNob3IyKTsNCgl2YXIgZFggPSBwMi54IC0gcDEueDsNCgl2YXIgZFkg
PSBwMi55IC0gcDEueTsNCgl2YXIgYXhpcyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2Nh
bFhBeGlzMSk7DQoJdmFyIHRyYW5zbGF0aW9uID0gYXhpcy54ICogZFggKyBheGlzLnkgKiBkWTsN
CglyZXR1cm4gdHJhbnNsYXRpb247DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpv
aW50LnByb3RvdHlwZS5HZXRKb2ludFNwZWVkID0gZnVuY3Rpb24oKSB7DQoJdmFyIGJBID0gdGhp
cy5tX2JvZHlBOw0KCXZhciBiQiA9IHRoaXMubV9ib2R5QjsNCgl2YXIgdE1hdDsNCgl0TWF0ID0g
YkEubV94Zi5SOw0KCXZhciByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVw
LmxvY2FsQ2VudGVyLng7DQoJdmFyIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1f
c3dlZXAubG9jYWxDZW50ZXIueTsNCgl2YXIgdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0
LmNvbDIueCAqIHIxWSk7DQoJcjFZID0gKHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkg
KiByMVkpOw0KCXIxWCA9IHRYOw0KCXRNYXQgPSBiQi5tX3hmLlI7DQoJdmFyIHIyWCA9IHRoaXMu
bV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2YXIgcjJZID0g
dGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXRYID0g
KHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlkpOw0KCXIyWSA9ICh0TWF0LmNv
bDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZKTsNCglyMlggPSB0WDsNCgl2YXIgcDFYID0g
YkEubV9zd2VlcC5jLnggKyByMVg7DQoJdmFyIHAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZOw0K
CXZhciBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDsNCgl2YXIgcDJZID0gYkIubV9zd2VlcC5j
LnkgKyByMlk7DQoJdmFyIGRYID0gcDJYIC0gcDFYOw0KCXZhciBkWSA9IHAyWSAtIHAxWTsNCgl2
YXIgYXhpcyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzMSk7DQoJdmFyIHYx
ID0gYkEubV9saW5lYXJWZWxvY2l0eTsNCgl2YXIgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5Ow0K
CXZhciB3MSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5Ow0KCXZhciB3MiA9IGJCLm1fYW5ndWxhclZl
bG9jaXR5Ow0KCXZhciBzcGVlZCA9IChkWCAqICgoLXcxICogYXhpcy55KSkgKyBkWSAqICh3MSAq
IGF4aXMueCkpICsgKGF4aXMueCAqICgoKHYyLnggKyAoKC13MiAqIHIyWSkpKSAtIHYxLngpIC0g
KCgtdzEgKiByMVkpKSkgKyBheGlzLnkgKiAoKCh2Mi55ICsgKHcyICogcjJYKSkgLSB2MS55KSAt
ICh3MSAqIHIxWCkpKTsNCglyZXR1cm4gc3BlZWQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIyTGluZUpvaW50LnByb3RvdHlwZS5Jc0xpbWl0RW5hYmxlZCA9IGZ1bmN0aW9uKCkgew0KCXJl
dHVybiB0aGlzLm1fZW5hYmxlTGltaXQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGlu
ZUpvaW50LnByb3RvdHlwZS5FbmFibGVMaW1pdCA9IGZ1bmN0aW9uKGZsYWcpIHsNCgl0aGlzLm1f
Ym9keUEuU2V0QXdha2UodHJ1ZSk7DQoJdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpOw0KCXRo
aXMubV9lbmFibGVMaW1pdCA9IGZsYWc7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGlu
ZUpvaW50LnByb3RvdHlwZS5HZXRMb3dlckxpbWl0ID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRo
aXMubV9sb3dlclRyYW5zbGF0aW9uOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVK
b2ludC5wcm90b3R5cGUuR2V0VXBwZXJMaW1pdCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlz
Lm1fdXBwZXJUcmFuc2xhdGlvbjsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9p
bnQucHJvdG90eXBlLlNldExpbWl0cyA9IGZ1bmN0aW9uKGxvd2VyLCB1cHBlcikgew0KCWlmIChs
b3dlciA9PT0gdW5kZWZpbmVkKSBsb3dlciA9IDA7DQoJaWYgKHVwcGVyID09PSB1bmRlZmluZWQp
IHVwcGVyID0gMDsNCgl0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7DQoJdGhpcy5tX2JvZHlC
LlNldEF3YWtlKHRydWUpOw0KCXRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gbG93ZXI7DQoJdGhp
cy5tX3VwcGVyVHJhbnNsYXRpb24gPSB1cHBlcjsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJMaW5lSm9pbnQucHJvdG90eXBlLklzTW90b3JFbmFibGVkID0gZnVuY3Rpb24oKSB7DQoJcmV0
dXJuIHRoaXMubV9lbmFibGVNb3RvcjsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5l
Sm9pbnQucHJvdG90eXBlLkVuYWJsZU1vdG9yID0gZnVuY3Rpb24oZmxhZykgew0KCXRoaXMubV9i
b2R5QS5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7DQoJdGhp
cy5tX2VuYWJsZU1vdG9yID0gZmxhZzsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5l
Sm9pbnQucHJvdG90eXBlLlNldE1vdG9yU3BlZWQgPSBmdW5jdGlvbihzcGVlZCkgew0KCWlmIChz
cGVlZCA9PT0gdW5kZWZpbmVkKSBzcGVlZCA9IDA7DQoJdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRy
dWUpOw0KCXRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fbW90b3JTcGVlZCA9
IHNwZWVkOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludC5wcm90b3R5cGUu
R2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fbW90b3JTcGVlZDsN
Cn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQucHJvdG90eXBlLlNldE1heE1v
dG9yRm9yY2UgPSBmdW5jdGlvbihmb3JjZSkgew0KCWlmIChmb3JjZSA9PT0gdW5kZWZpbmVkKSBm
b3JjZSA9IDA7DQoJdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpOw0KCXRoaXMubV9ib2R5Qi5T
ZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fbWF4TW90b3JGb3JjZSA9IGZvcmNlOw0KfTsNCkJveDJE
LkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0TWF4TW90b3JGb3JjZSA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fbWF4TW90b3JGb3JjZTsNCn07DQpCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldE1vdG9yRm9yY2UgPSBmdW5j
dGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX21vdG9ySW1wdWxzZTsNCn07DQpCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJMaW5lSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0g
ZnVuY3Rpb24oc3RlcCkgew0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlz
Lm1fYm9keUI7DQoJdmFyIHRNYXQ7DQoJdmFyIHRYID0gMDsNCgl0aGlzLm1fbG9jYWxDZW50ZXJB
LlNldFYoYkEuR2V0TG9jYWxDZW50ZXIoKSk7DQoJdGhpcy5tX2xvY2FsQ2VudGVyQi5TZXRWKGJC
LkdldExvY2FsQ2VudGVyKCkpOw0KCXZhciB4ZjEgPSBiQS5HZXRUcmFuc2Zvcm0oKTsNCgl2YXIg
eGYyID0gYkIuR2V0VHJhbnNmb3JtKCk7DQoJdE1hdCA9IGJBLm1feGYuUjsNCgl2YXIgcjFYID0g
dGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS54Ow0KCXZhciByMVkg
PSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fbG9jYWxDZW50ZXJBLnk7DQoJdFggPSAo
dE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWSk7DQoJcjFZID0gKHRNYXQuY29s
MS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVkpOw0KCXIxWCA9IHRYOw0KCXRNYXQgPSBiQi5t
X3hmLlI7DQoJdmFyIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIHRoaXMubV9sb2NhbENl
bnRlckIueDsNCgl2YXIgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gdGhpcy5tX2xvY2Fs
Q2VudGVyQi55Ow0KCXRYID0gKHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlkp
Ow0KCXIyWSA9ICh0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZKTsNCglyMlgg
PSB0WDsNCgl2YXIgZFggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0g
cjFYOw0KCXZhciBkWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSBy
MVk7DQoJdGhpcy5tX2ludk1hc3NBID0gYkEubV9pbnZNYXNzOw0KCXRoaXMubV9pbnZNYXNzQiA9
IGJCLm1faW52TWFzczsNCgl0aGlzLm1faW52SUEgPSBiQS5tX2ludkk7DQoJdGhpcy5tX2ludklC
ID0gYkIubV9pbnZJOw0KCXRoaXMubV9heGlzLlNldFYoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
Lk11bE1WKHhmMS5SLCB0aGlzLm1fbG9jYWxYQXhpczEpKTsNCgl0aGlzLm1fYTEgPSAoZFggKyBy
MVgpICogdGhpcy5tX2F4aXMueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fYXhpcy54Ow0KCXRoaXMu
bV9hMiA9IHIyWCAqIHRoaXMubV9heGlzLnkgLSByMlkgKiB0aGlzLm1fYXhpcy54Ow0KCXRoaXMu
bV9tb3Rvck1hc3MgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1f
aW52SUEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyB0aGlzLm1faW52SUIgKiB0aGlzLm1fYTIg
KiB0aGlzLm1fYTI7DQoJdGhpcy5tX21vdG9yTWFzcyA9IHRoaXMubV9tb3Rvck1hc3MgPiBOdW1i
ZXIuTUlOX1ZBTFVFID8gMS4wIC8gdGhpcy5tX21vdG9yTWFzcyA6IDAuMDsNCgl0aGlzLm1fcGVy
cC5TZXRWKEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5NdWxNVih4ZjEuUiwgdGhpcy5tX2xvY2Fs
WUF4aXMxKSk7DQoJdGhpcy5tX3MxID0gKGRYICsgcjFYKSAqIHRoaXMubV9wZXJwLnkgLSAoZFkg
KyByMVkpICogdGhpcy5tX3BlcnAueDsNCgl0aGlzLm1fczIgPSByMlggKiB0aGlzLm1fcGVycC55
IC0gcjJZICogdGhpcy5tX3BlcnAueDsNCgl2YXIgbTEgPSB0aGlzLm1faW52TWFzc0E7DQoJdmFy
IG0yID0gdGhpcy5tX2ludk1hc3NCOw0KCXZhciBpMSA9IHRoaXMubV9pbnZJQTsNCgl2YXIgaTIg
PSB0aGlzLm1faW52SUI7DQoJdGhpcy5tX0suY29sMS54ID0gbTEgKyBtMiArIGkxICogdGhpcy5t
X3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7DQoJdGhpcy5tX0su
Y29sMS55ID0gaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9zMiAqIHRo
aXMubV9hMjsNCgl0aGlzLm1fSy5jb2wyLnggPSB0aGlzLm1fSy5jb2wxLnk7DQoJdGhpcy5tX0su
Y29sMi55ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaTIgKiB0aGlz
Lm1fYTIgKiB0aGlzLm1fYTI7DQoJaWYgKHRoaXMubV9lbmFibGVMaW1pdCkgew0KCQl2YXIgam9p
bnRUcmFuc2l0aW9uID0gdGhpcy5tX2F4aXMueCAqIGRYICsgdGhpcy5tX2F4aXMueSAqIGRZOw0K
CQlpZiAoTWF0aC5hYnModGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFu
c2xhdGlvbikgPCAyLjAgKiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7
DQoJCQl0aGlzLm1fbGltaXRTdGF0ZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVf
ZXF1YWxMaW1pdHM7DQoJCX0gZWxzZSBpZiAoam9pbnRUcmFuc2l0aW9uIDw9IHRoaXMubV9sb3dl
clRyYW5zbGF0aW9uKSB7DQoJCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT0gQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIySm9pbnQuZV9hdExvd2VyTGltaXQpIHsNCgkJCQl0aGlzLm1fbGltaXRTdGF0
ZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfYXRMb3dlckxpbWl0Ow0KCQkJCXRo
aXMubV9pbXB1bHNlLnkgPSAwLjA7DQoJCQl9DQoJCX0gZWxzZSBpZiAoam9pbnRUcmFuc2l0aW9u
ID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7DQoJCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUg
IT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHsNCgkJCQl0
aGlzLm1fbGltaXRTdGF0ZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfYXRVcHBl
ckxpbWl0Ow0KCQkJCXRoaXMubV9pbXB1bHNlLnkgPSAwLjA7DQoJCQl9DQoJCX0gZWxzZSB7DQoJ
CQl0aGlzLm1fbGltaXRTdGF0ZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfaW5h
Y3RpdmVMaW1pdDsNCgkJCXRoaXMubV9pbXB1bHNlLnkgPSAwLjA7DQoJCX0NCgl9IGVsc2Ugew0K
CQl0aGlzLm1fbGltaXRTdGF0ZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfaW5h
Y3RpdmVMaW1pdDsNCgl9DQoJaWYgKHRoaXMubV9lbmFibGVNb3RvciA9PSBmYWxzZSkgew0KCQl0
aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wOw0KCX0NCglpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHsN
CgkJdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87DQoJCXRoaXMubV9pbXB1bHNlLnkg
Kj0gc3RlcC5kdFJhdGlvOw0KCQl0aGlzLm1fbW90b3JJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbzsN
CgkJdmFyIFBYID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21v
dG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnkpICogdGhpcy5tX2F4aXMueDsNCgkJdmFyIFBZ
ID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnkgKyAodGhpcy5tX21vdG9ySW1wdWxz
ZSArIHRoaXMubV9pbXB1bHNlLnkpICogdGhpcy5tX2F4aXMueTsNCgkJdmFyIEwxID0gdGhpcy5t
X2ltcHVsc2UueCAqIHRoaXMubV9zMSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2lt
cHVsc2UueSkgKiB0aGlzLm1fYTE7DQoJCXZhciBMMiA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlz
Lm1fczIgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnkpICogdGhpcy5t
X2EyOw0KCQliQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7DQoJ
CWJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTsNCgkJYkEubV9h
bmd1bGFyVmVsb2NpdHkgLT0gdGhpcy5tX2ludklBICogTDE7DQoJCWJCLm1fbGluZWFyVmVsb2Np
dHkueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDsNCgkJYkIubV9saW5lYXJWZWxvY2l0eS55ICs9
IHRoaXMubV9pbnZNYXNzQiAqIFBZOw0KCQliQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSB0aGlzLm1f
aW52SUIgKiBMMjsNCgl9IGVsc2Ugew0KCQl0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7DQoJCXRo
aXMubV9tb3RvckltcHVsc2UgPSAwLjA7DQoJfQ0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5i
MkxpbmVKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24o
c3RlcCkgew0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7
DQoJdmFyIHYxID0gYkEubV9saW5lYXJWZWxvY2l0eTsNCgl2YXIgdzEgPSBiQS5tX2FuZ3VsYXJW
ZWxvY2l0eTsNCgl2YXIgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5Ow0KCXZhciB3MiA9IGJCLm1f
YW5ndWxhclZlbG9jaXR5Ow0KCXZhciBQWCA9IDA7DQoJdmFyIFBZID0gMDsNCgl2YXIgTDEgPSAw
Ow0KCXZhciBMMiA9IDA7DQoJaWYgKHRoaXMubV9lbmFibGVNb3RvciAmJiB0aGlzLm1fbGltaXRT
dGF0ZSAhPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2VxdWFsTGltaXRzKSB7DQoJ
CXZhciBDZG90ID0gdGhpcy5tX2F4aXMueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fYXhpcy55
ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9hMiAqIHcyIC0gdGhpcy5tX2ExICogdzE7DQoJCXZh
ciBpbXB1bHNlID0gdGhpcy5tX21vdG9yTWFzcyAqICh0aGlzLm1fbW90b3JTcGVlZCAtIENkb3Qp
Ow0KCQl2YXIgb2xkSW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2U7DQoJCXZhciBtYXhJbXB1
bHNlID0gc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvckZvcmNlOw0KCQl0aGlzLm1fbW90b3JJbXB1
bHNlID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNsYW1wKHRoaXMubV9tb3RvckltcHVsc2Ug
KyBpbXB1bHNlLCAoLW1heEltcHVsc2UpLCBtYXhJbXB1bHNlKTsNCgkJaW1wdWxzZSA9IHRoaXMu
bV9tb3RvckltcHVsc2UgLSBvbGRJbXB1bHNlOw0KCQlQWCA9IGltcHVsc2UgKiB0aGlzLm1fYXhp
cy54Ow0KCQlQWSA9IGltcHVsc2UgKiB0aGlzLm1fYXhpcy55Ow0KCQlMMSA9IGltcHVsc2UgKiB0
aGlzLm1fYTE7DQoJCUwyID0gaW1wdWxzZSAqIHRoaXMubV9hMjsNCgkJdjEueCAtPSB0aGlzLm1f
aW52TWFzc0EgKiBQWDsNCgkJdjEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTsNCgkJdzEgLT0g
dGhpcy5tX2ludklBICogTDE7DQoJCXYyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7DQoJCXYy
LnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7DQoJCXcyICs9IHRoaXMubV9pbnZJQiAqIEwyOw0K
CX0NCgl2YXIgQ2RvdDEgPSB0aGlzLm1fcGVycC54ICogKHYyLnggLSB2MS54KSArIHRoaXMubV9w
ZXJwLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5tX3MyICogdzIgLSB0aGlzLm1fczEgKiB3MTsN
CglpZiAodGhpcy5tX2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5
bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfaW5hY3RpdmVMaW1pdCkgew0KCQl2YXIgQ2RvdDIgPSB0
aGlzLm1fYXhpcy54ICogKHYyLnggLSB2MS54KSArIHRoaXMubV9heGlzLnkgKiAodjIueSAtIHYx
LnkpICsgdGhpcy5tX2EyICogdzIgLSB0aGlzLm1fYTEgKiB3MTsNCgkJdmFyIGYxID0gdGhpcy5t
X2ltcHVsc2UuQ29weSgpOw0KCQl2YXIgZGYgPSB0aGlzLm1fSy5Tb2x2ZShCb3gyRC5Db21tb24u
TWF0aC5iMlZlYzIuR2V0KDAsIDApLCAoLUNkb3QxKSwgKC1DZG90MikpOw0KCQl0aGlzLm1faW1w
dWxzZS5BZGQoZGYpOw0KCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnQuZV9hdExvd2VyTGltaXQpIHsNCgkJCXRoaXMubV9pbXB1bHNlLnkgPSBN
YXRoLm1heCh0aGlzLm1faW1wdWxzZS55LCAwLjApOw0KCQl9IGVsc2UgaWYgKHRoaXMubV9saW1p
dFN0YXRlID09IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7
DQoJCQl0aGlzLm1faW1wdWxzZS55ID0gTWF0aC5taW4odGhpcy5tX2ltcHVsc2UueSwgMC4wKTsN
CgkJfQ0KCQl2YXIgYiA9ICgtQ2RvdDEpIC0gKHRoaXMubV9pbXB1bHNlLnkgLSBmMS55KSAqIHRo
aXMubV9LLmNvbDIueDsNCgkJdmFyIGYyciA9IDA7DQoJCWlmICh0aGlzLm1fSy5jb2wxLnggIT0g
MC4wKSB7DQoJCQlmMnIgPSBiIC8gdGhpcy5tX0suY29sMS54ICsgZjEueDsNCgkJfSBlbHNlIHsN
CgkJCWYyciA9IGYxLng7DQoJCX0NCgkJdGhpcy5tX2ltcHVsc2UueCA9IGYycjsNCgkJZGYueCA9
IHRoaXMubV9pbXB1bHNlLnggLSBmMS54Ow0KCQlkZi55ID0gdGhpcy5tX2ltcHVsc2UueSAtIGYx
Lnk7DQoJCVBYID0gZGYueCAqIHRoaXMubV9wZXJwLnggKyBkZi55ICogdGhpcy5tX2F4aXMueDsN
CgkJUFkgPSBkZi54ICogdGhpcy5tX3BlcnAueSArIGRmLnkgKiB0aGlzLm1fYXhpcy55Ow0KCQlM
MSA9IGRmLnggKiB0aGlzLm1fczEgKyBkZi55ICogdGhpcy5tX2ExOw0KCQlMMiA9IGRmLnggKiB0
aGlzLm1fczIgKyBkZi55ICogdGhpcy5tX2EyOw0KCQl2MS54IC09IHRoaXMubV9pbnZNYXNzQSAq
IFBYOw0KCQl2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZOw0KCQl3MSAtPSB0aGlzLm1faW52
SUEgKiBMMTsNCgkJdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDsNCgkJdjIueSArPSB0aGlz
Lm1faW52TWFzc0IgKiBQWTsNCgkJdzIgKz0gdGhpcy5tX2ludklCICogTDI7DQoJfSBlbHNlIHsN
CgkJdmFyIGRmMiA9IDA7DQoJCWlmICh0aGlzLm1fSy5jb2wxLnggIT0gMC4wKSB7DQoJCQlkZjIg
PSAoKC1DZG90MSkpIC8gdGhpcy5tX0suY29sMS54Ow0KCQl9IGVsc2Ugew0KCQkJZGYyID0gMC4w
Ow0KCQl9DQoJCXRoaXMubV9pbXB1bHNlLnggKz0gZGYyOw0KCQlQWCA9IGRmMiAqIHRoaXMubV9w
ZXJwLng7DQoJCVBZID0gZGYyICogdGhpcy5tX3BlcnAueTsNCgkJTDEgPSBkZjIgKiB0aGlzLm1f
czE7DQoJCUwyID0gZGYyICogdGhpcy5tX3MyOw0KCQl2MS54IC09IHRoaXMubV9pbnZNYXNzQSAq
IFBYOw0KCQl2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZOw0KCQl3MSAtPSB0aGlzLm1faW52
SUEgKiBMMTsNCgkJdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDsNCgkJdjIueSArPSB0aGlz
Lm1faW52TWFzc0IgKiBQWTsNCgkJdzIgKz0gdGhpcy5tX2ludklCICogTDI7DQoJfQ0KCWJBLm1f
bGluZWFyVmVsb2NpdHkuU2V0Vih2MSk7DQoJYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3MTsNCgli
Qi5tX2xpbmVhclZlbG9jaXR5LlNldFYodjIpOw0KCWJCLm1fYW5ndWxhclZlbG9jaXR5ID0gdzI7
DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpvaW50LnByb3RvdHlwZS5Tb2x2ZVBv
c2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHsNCglpZiAoYmF1bWdhcnRl
ID09PSB1bmRlZmluZWQpIGJhdW1nYXJ0ZSA9IDA7DQoJdmFyIGxpbWl0QyA9IDA7DQoJdmFyIG9s
ZExpbWl0SW1wdWxzZSA9IDA7DQoJdmFyIGJBID0gdGhpcy5tX2JvZHlBOw0KCXZhciBiQiA9IHRo
aXMubV9ib2R5QjsNCgl2YXIgYzEgPSBiQS5tX3N3ZWVwLmM7DQoJdmFyIGExID0gYkEubV9zd2Vl
cC5hOw0KCXZhciBjMiA9IGJCLm1fc3dlZXAuYzsNCgl2YXIgYTIgPSBiQi5tX3N3ZWVwLmE7DQoJ
dmFyIHRNYXQ7DQoJdmFyIHRYID0gMDsNCgl2YXIgbTEgPSAwOw0KCXZhciBtMiA9IDA7DQoJdmFy
IGkxID0gMDsNCgl2YXIgaTIgPSAwOw0KCXZhciBsaW5lYXJFcnJvciA9IDAuMDsNCgl2YXIgYW5n
dWxhckVycm9yID0gMC4wOw0KCXZhciBhY3RpdmUgPSBmYWxzZTsNCgl2YXIgQzIgPSAwLjA7DQoJ
dmFyIFIxID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5Gcm9tQW5nbGUoYTEpOw0KCXZhciBS
MiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIuRnJvbUFuZ2xlKGEyKTsNCgl0TWF0ID0gUjE7
DQoJdmFyIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIHRoaXMubV9sb2NhbENlbnRlckEu
eDsNCgl2YXIgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gdGhpcy5tX2xvY2FsQ2VudGVy
QS55Ow0KCXRYID0gKHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVkpOw0KCXIx
WSA9ICh0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsNCglyMVggPSB0WDsN
Cgl0TWF0ID0gUjI7DQoJdmFyIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIHRoaXMubV9s
b2NhbENlbnRlckIueDsNCgl2YXIgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gdGhpcy5t
X2xvY2FsQ2VudGVyQi55Ow0KCXRYID0gKHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLngg
KiByMlkpOw0KCXIyWSA9ICh0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZKTsN
CglyMlggPSB0WDsNCgl2YXIgZFggPSBjMi54ICsgcjJYIC0gYzEueCAtIHIxWDsNCgl2YXIgZFkg
PSBjMi55ICsgcjJZIC0gYzEueSAtIHIxWTsNCglpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7DQoJ
CXRoaXMubV9heGlzID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bE1WKFIxLCB0aGlzLm1f
bG9jYWxYQXhpczEpOw0KCQl0aGlzLm1fYTEgPSAoZFggKyByMVgpICogdGhpcy5tX2F4aXMueSAt
IChkWSArIHIxWSkgKiB0aGlzLm1fYXhpcy54Ow0KCQl0aGlzLm1fYTIgPSByMlggKiB0aGlzLm1f
YXhpcy55IC0gcjJZICogdGhpcy5tX2F4aXMueDsNCgkJdmFyIHRyYW5zbGF0aW9uID0gdGhpcy5t
X2F4aXMueCAqIGRYICsgdGhpcy5tX2F4aXMueSAqIGRZOw0KCQlpZiAoTWF0aC5hYnModGhpcy5t
X3VwcGVyVHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgPCAyLjAgKiBCb3gy
RC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7DQoJCQlDMiA9IEJveDJELkNvbW1v
bi5NYXRoLmIyTWF0aC5DbGFtcCh0cmFuc2xhdGlvbiwgKC1Cb3gyRC5Db21tb24uYjJTZXR0aW5n
cy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4
TGluZWFyQ29ycmVjdGlvbik7DQoJCQlsaW5lYXJFcnJvciA9IE1hdGguYWJzKHRyYW5zbGF0aW9u
KTsNCgkJCWFjdGl2ZSA9IHRydWU7DQoJCX0gZWxzZSBpZiAodHJhbnNsYXRpb24gPD0gdGhpcy5t
X2xvd2VyVHJhbnNsYXRpb24pIHsNCgkJCUMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNs
YW1wKHRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gKyBCb3gyRC5Db21tb24u
YjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAoLUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21h
eExpbmVhckNvcnJlY3Rpb24pLCAwLjApOw0KCQkJbGluZWFyRXJyb3IgPSB0aGlzLm1fbG93ZXJU
cmFuc2xhdGlvbiAtIHRyYW5zbGF0aW9uOw0KCQkJYWN0aXZlID0gdHJ1ZTsNCgkJfSBlbHNlIGlm
ICh0cmFuc2xhdGlvbiA+PSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbikgew0KCQkJQzIgPSBCb3gy
RC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAodHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFu
c2xhdGlvbiArIEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIDAuMCwgQm94
MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbik7DQoJCQlsaW5lYXJF
cnJvciA9IHRyYW5zbGF0aW9uIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb247DQoJCQlhY3RpdmUg
PSB0cnVlOw0KCQl9DQoJfQ0KCXRoaXMubV9wZXJwID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRo
Lk11bE1WKFIxLCB0aGlzLm1fbG9jYWxZQXhpczEpOw0KCXRoaXMubV9zMSA9IChkWCArIHIxWCkg
KiB0aGlzLm1fcGVycC55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9wZXJwLng7DQoJdGhpcy5tX3My
ID0gcjJYICogdGhpcy5tX3BlcnAueSAtIHIyWSAqIHRoaXMubV9wZXJwLng7DQoJdmFyIGltcHVs
c2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXZhciBDMSA9IHRoaXMu
bV9wZXJwLnggKiBkWCArIHRoaXMubV9wZXJwLnkgKiBkWTsNCglsaW5lYXJFcnJvciA9IE1hdGgu
bWF4KGxpbmVhckVycm9yLCBNYXRoLmFicyhDMSkpOw0KCWFuZ3VsYXJFcnJvciA9IDAuMDsNCglp
ZiAoYWN0aXZlKSB7DQoJCW0xID0gdGhpcy5tX2ludk1hc3NBOw0KCQltMiA9IHRoaXMubV9pbnZN
YXNzQjsNCgkJaTEgPSB0aGlzLm1faW52SUE7DQoJCWkyID0gdGhpcy5tX2ludklCOw0KCQl0aGlz
Lm1fSy5jb2wxLnggPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fczEgKyBpMiAq
IHRoaXMubV9zMiAqIHRoaXMubV9zMjsNCgkJdGhpcy5tX0suY29sMS55ID0gaTEgKiB0aGlzLm1f
czEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9hMjsNCgkJdGhpcy5tX0su
Y29sMi54ID0gdGhpcy5tX0suY29sMS55Ow0KCQl0aGlzLm1fSy5jb2wyLnkgPSBtMSArIG0yICsg
aTEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjsN
CgkJdGhpcy5tX0suU29sdmUoaW1wdWxzZSwgKC1DMSksICgtQzIpKTsNCgl9IGVsc2Ugew0KCQlt
MSA9IHRoaXMubV9pbnZNYXNzQTsNCgkJbTIgPSB0aGlzLm1faW52TWFzc0I7DQoJCWkxID0gdGhp
cy5tX2ludklBOw0KCQlpMiA9IHRoaXMubV9pbnZJQjsNCgkJdmFyIGsxMSA9IG0xICsgbTIgKyBp
MSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX3MyOw0K
CQl2YXIgaW1wdWxzZTEgPSAwOw0KCQlpZiAoazExICE9IDAuMCkgew0KCQkJaW1wdWxzZTEgPSAo
KC1DMSkpIC8gazExOw0KCQl9IGVsc2Ugew0KCQkJaW1wdWxzZTEgPSAwLjA7DQoJCX0NCgkJaW1w
dWxzZS54ID0gaW1wdWxzZTE7DQoJCWltcHVsc2UueSA9IDAuMDsNCgl9DQoJdmFyIFBYID0gaW1w
dWxzZS54ICogdGhpcy5tX3BlcnAueCArIGltcHVsc2UueSAqIHRoaXMubV9heGlzLng7DQoJdmFy
IFBZID0gaW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArIGltcHVsc2UueSAqIHRoaXMubV9heGlz
Lnk7DQoJdmFyIEwxID0gaW1wdWxzZS54ICogdGhpcy5tX3MxICsgaW1wdWxzZS55ICogdGhpcy5t
X2ExOw0KCXZhciBMMiA9IGltcHVsc2UueCAqIHRoaXMubV9zMiArIGltcHVsc2UueSAqIHRoaXMu
bV9hMjsNCgljMS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYOw0KCWMxLnkgLT0gdGhpcy5tX2lu
dk1hc3NBICogUFk7DQoJYTEgLT0gdGhpcy5tX2ludklBICogTDE7DQoJYzIueCArPSB0aGlzLm1f
aW52TWFzc0IgKiBQWDsNCgljMi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZOw0KCWEyICs9IHRo
aXMubV9pbnZJQiAqIEwyOw0KCWJBLm1fc3dlZXAuYSA9IGExOw0KCWJCLm1fc3dlZXAuYSA9IGEy
Ow0KCWJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJYkIuU3luY2hyb25pemVUcmFuc2Zvcm0o
KTsNCglyZXR1cm4gbGluZWFyRXJyb3IgPD0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGlu
ZWFyU2xvcCAmJiBhbmd1bGFyRXJyb3IgPD0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfYW5n
dWxhclNsb3A7DQp9Ow0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJKb2ludERlZn0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
TGluZUpvaW50RGVmID0gZnVuY3Rpb24oKSB7DQoJQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9p
bnREZWYuY2FsbCh0aGlzKTsNCgl0aGlzLmxvY2FsQW5jaG9yQSA9IEJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5sb2NhbEFuY2hvckIgPSBCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubG9jYWxBeGlzQSA9IEJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy50eXBlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
Sm9pbnQuZV9saW5lSm9pbnQ7DQoJdGhpcy5sb2NhbEF4aXNBLlNldCgxLjAsIDAuMCk7DQoJdGhp
cy5lbmFibGVMaW1pdCA9IGZhbHNlOw0KCXRoaXMubG93ZXJUcmFuc2xhdGlvbiA9IDAuMDsNCgl0
aGlzLnVwcGVyVHJhbnNsYXRpb24gPSAwLjA7DQoJdGhpcy5lbmFibGVNb3RvciA9IGZhbHNlOw0K
CXRoaXMubWF4TW90b3JGb3JjZSA9IDAuMDsNCgl0aGlzLm1vdG9yU3BlZWQgPSAwLjA7DQp9Ow0K
YzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkxpbmVKb2ludERlZiwgQm94MkQuRHlu
YW1pY3MuSm9pbnRzLmIySm9pbnREZWYpOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpv
aW50RGVmLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oYkEsIGJCLCBhbmNob3IsIGF4
aXMpIHsNCgl0aGlzLmJvZHlBID0gYkE7DQoJdGhpcy5ib2R5QiA9IGJCOw0KCXRoaXMubG9jYWxB
bmNob3JBID0gdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvcik7DQoJdGhpcy5sb2NhbEFu
Y2hvckIgPSB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKTsNCgl0aGlzLmxvY2FsQXhp
c0EgPSB0aGlzLmJvZHlBLkdldExvY2FsVmVjdG9yKGF4aXMpOw0KfTsNCkJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkxpbmVKb2ludERlZi5wcm90b3R5cGUuQ3JlYXRlID0gZnVuY3Rpb24oKSB7DQoJ
cmV0dXJuIG5ldyBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQodGhpcyk7DQp9Ow0K
LyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludERl
Zn0gZGVmDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJKb2ludH0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnQg
PSBmdW5jdGlvbihkZWYpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5jYWxsKHRo
aXMsIGRlZik7DQoJdGhpcy5tX2xvY2FsQW5jaG9yMSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVj
Mi5HZXQoMCwgMCk7DQoJdGhpcy5tX2xvY2FsQW5jaG9yMiA9IEJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5tX2xvY2FsWEF4aXMxID0gQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxZQXhpczEgPSBCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9heGlzID0gQm94MkQuQ29tbW9uLk1hdGguYjJW
ZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fcGVycCA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5H
ZXQoMCwgMCk7DQoJdGhpcy5tX0sgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJNYXQzMygpOw0K
CXRoaXMubV9pbXB1bHNlID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMygwLCAwLCAwKTsN
Cgl0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYoZGVmLmxvY2FsQW5jaG9yQSk7DQoJdGhpcy5tX2xv
Y2FsQW5jaG9yMi5TZXRWKGRlZi5sb2NhbEFuY2hvckIpOw0KCXRoaXMubV9sb2NhbFhBeGlzMS5T
ZXRWKGRlZi5sb2NhbEF4aXNBKTsNCgl0aGlzLm1fbG9jYWxZQXhpczEueCA9ICgtdGhpcy5tX2xv
Y2FsWEF4aXMxLnkpOw0KCXRoaXMubV9sb2NhbFlBeGlzMS55ID0gdGhpcy5tX2xvY2FsWEF4aXMx
Lng7DQoJdGhpcy5tX3JlZkFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlOw0KCXRoaXMubV9pbXB1
bHNlLlNldFplcm8oKTsNCgl0aGlzLm1fbW90b3JNYXNzID0gMC4wOw0KCXRoaXMubV9tb3Rvcklt
cHVsc2UgPSAwLjA7DQoJdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBkZWYubG93ZXJUcmFuc2xh
dGlvbjsNCgl0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IGRlZi51cHBlclRyYW5zbGF0aW9uOw0K
CXRoaXMubV9tYXhNb3RvckZvcmNlID0gZGVmLm1heE1vdG9yRm9yY2U7DQoJdGhpcy5tX21vdG9y
U3BlZWQgPSBkZWYubW90b3JTcGVlZDsNCgl0aGlzLm1fZW5hYmxlTGltaXQgPSBkZWYuZW5hYmxl
TGltaXQ7DQoJdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1vdG9yOw0KCXRoaXMubV9s
aW1pdFN0YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0
Ow0KCXRoaXMubV9heGlzLlNldFplcm8oKTsNCgl0aGlzLm1fcGVycC5TZXRaZXJvKCk7DQp9Ow0K
YzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50LCBCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJKb2ludCk7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0
aWNKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlz
Lm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTsNCn07DQpCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9j
YWxBbmNob3IyKTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludC5w
cm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCWlmIChpbnZf
ZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyLkdldChpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAo
dGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2F4aXMueCks
IGludl9kdCAqICh0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArICh0aGlzLm1fbW90
b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueikgKiB0aGlzLm1fYXhpcy55KSk7DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9u
VG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7DQoJaWYgKGludl9kdCA9PT0gdW5kZWZpbmVkKSBp
bnZfZHQgPSAwOw0KCXJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55Ow0KfTsNCkJveDJE
LkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRKb2ludFRyYW5z
bGF0aW9uID0gZnVuY3Rpb24oKSB7DQoJdmFyIGJBID0gdGhpcy5tX2JvZHlBOw0KCXZhciBiQiA9
IHRoaXMubV9ib2R5QjsNCgl2YXIgdE1hdDsNCgl2YXIgcDEgPSBiQS5HZXRXb3JsZFBvaW50KHRo
aXMubV9sb2NhbEFuY2hvcjEpOw0KCXZhciBwMiA9IGJCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xv
Y2FsQW5jaG9yMik7DQoJdmFyIGRYID0gcDIueCAtIHAxLng7DQoJdmFyIGRZID0gcDIueSAtIHAx
Lnk7DQoJdmFyIGF4aXMgPSBiQS5HZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpczEpOw0K
CXZhciB0cmFuc2xhdGlvbiA9IGF4aXMueCAqIGRYICsgYXhpcy55ICogZFk7DQoJcmV0dXJuIHRy
YW5zbGF0aW9uOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50LnBy
b3RvdHlwZS5HZXRKb2ludFNwZWVkID0gZnVuY3Rpb24oKSB7DQoJdmFyIGJBID0gdGhpcy5tX2Jv
ZHlBOw0KCXZhciBiQiA9IHRoaXMubV9ib2R5QjsNCgl2YXIgdE1hdDsNCgl0TWF0ID0gYkEubV94
Zi5SOw0KCXZhciByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2Fs
Q2VudGVyLng7DQoJdmFyIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAu
bG9jYWxDZW50ZXIueTsNCgl2YXIgdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIu
eCAqIHIxWSk7DQoJcjFZID0gKHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVkp
Ow0KCXIxWCA9IHRYOw0KCXRNYXQgPSBiQi5tX3hmLlI7DQoJdmFyIHIyWCA9IHRoaXMubV9sb2Nh
bEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2YXIgcjJZID0gdGhpcy5t
X2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXRYID0gKHRNYXQu
Y29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlkpOw0KCXIyWSA9ICh0TWF0LmNvbDEueSAq
IHIyWCArIHRNYXQuY29sMi55ICogcjJZKTsNCglyMlggPSB0WDsNCgl2YXIgcDFYID0gYkEubV9z
d2VlcC5jLnggKyByMVg7DQoJdmFyIHAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZOw0KCXZhciBw
MlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDsNCgl2YXIgcDJZID0gYkIubV9zd2VlcC5jLnkgKyBy
Mlk7DQoJdmFyIGRYID0gcDJYIC0gcDFYOw0KCXZhciBkWSA9IHAyWSAtIHAxWTsNCgl2YXIgYXhp
cyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzMSk7DQoJdmFyIHYxID0gYkEu
bV9saW5lYXJWZWxvY2l0eTsNCgl2YXIgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5Ow0KCXZhciB3
MSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5Ow0KCXZhciB3MiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5
Ow0KCXZhciBzcGVlZCA9IChkWCAqICgoLXcxICogYXhpcy55KSkgKyBkWSAqICh3MSAqIGF4aXMu
eCkpICsgKGF4aXMueCAqICgoKHYyLnggKyAoKC13MiAqIHIyWSkpKSAtIHYxLngpIC0gKCgtdzEg
KiByMVkpKSkgKyBheGlzLnkgKiAoKCh2Mi55ICsgKHcyICogcjJYKSkgLSB2MS55KSAtICh3MSAq
IHIxWCkpKTsNCglyZXR1cm4gc3BlZWQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJp
c21hdGljSm9pbnQucHJvdG90eXBlLklzTGltaXRFbmFibGVkID0gZnVuY3Rpb24oKSB7DQoJcmV0
dXJuIHRoaXMubV9lbmFibGVMaW1pdDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlz
bWF0aWNKb2ludC5wcm90b3R5cGUuRW5hYmxlTGltaXQgPSBmdW5jdGlvbihmbGFnKSB7DQoJdGhp
cy5tX2JvZHlBLlNldEF3YWtlKHRydWUpOw0KCXRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTsN
Cgl0aGlzLm1fZW5hYmxlTGltaXQgPSBmbGFnOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5i
MlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRMb3dlckxpbWl0ID0gZnVuY3Rpb24oKSB7DQoJ
cmV0dXJuIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50
cy5iMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7
DQoJcmV0dXJuIHRoaXMubV91cHBlclRyYW5zbGF0aW9uOw0KfTsNCkJveDJELkR5bmFtaWNzLkpv
aW50cy5iMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5TZXRMaW1pdHMgPSBmdW5jdGlvbihsb3dl
ciwgdXBwZXIpIHsNCglpZiAobG93ZXIgPT09IHVuZGVmaW5lZCkgbG93ZXIgPSAwOw0KCWlmICh1
cHBlciA9PT0gdW5kZWZpbmVkKSB1cHBlciA9IDA7DQoJdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRy
dWUpOw0KCXRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fbG93ZXJUcmFuc2xh
dGlvbiA9IGxvd2VyOw0KCXRoaXMubV91cHBlclRyYW5zbGF0aW9uID0gdXBwZXI7DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLklzTW90b3JFbmFi
bGVkID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9lbmFibGVNb3RvcjsNCn07DQpCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuRW5hYmxlTW90b3Ig
PSBmdW5jdGlvbihmbGFnKSB7DQoJdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpOw0KCXRoaXMu
bV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fZW5hYmxlTW90b3IgPSBmbGFnOw0KfTsN
CkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5TZXRNb3Rv
clNwZWVkID0gZnVuY3Rpb24oc3BlZWQpIHsNCglpZiAoc3BlZWQgPT09IHVuZGVmaW5lZCkgc3Bl
ZWQgPSAwOw0KCXRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTsNCgl0aGlzLm1fYm9keUIuU2V0
QXdha2UodHJ1ZSk7DQoJdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDsNCn07DQpCb3gyRC5EeW5h
bWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0TW90b3JTcGVlZCA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fbW90b3JTcGVlZDsNCn07DQpCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuU2V0TWF4TW90b3JGb3JjZSA9IGZ1
bmN0aW9uKGZvcmNlKSB7DQoJaWYgKGZvcmNlID09PSB1bmRlZmluZWQpIGZvcmNlID0gMDsNCgl0
aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7DQoJdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUp
Ow0KCXRoaXMubV9tYXhNb3RvckZvcmNlID0gZm9yY2U7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9p
bnRzLmIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldE1vdG9yRm9yY2UgPSBmdW5jdGlvbigp
IHsNCglyZXR1cm4gdGhpcy5tX21vdG9ySW1wdWxzZTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBm
dW5jdGlvbihzdGVwKSB7DQoJdmFyIGJBID0gdGhpcy5tX2JvZHlBOw0KCXZhciBiQiA9IHRoaXMu
bV9ib2R5QjsNCgl2YXIgdE1hdDsNCgl2YXIgdFggPSAwOw0KCXRoaXMubV9sb2NhbENlbnRlckEu
U2V0VihiQS5HZXRMb2NhbENlbnRlcigpKTsNCgl0aGlzLm1fbG9jYWxDZW50ZXJCLlNldFYoYkIu
R2V0TG9jYWxDZW50ZXIoKSk7DQoJdmFyIHhmMSA9IGJBLkdldFRyYW5zZm9ybSgpOw0KCXZhciB4
ZjIgPSBiQi5HZXRUcmFuc2Zvcm0oKTsNCgl0TWF0ID0gYkEubV94Zi5SOw0KCXZhciByMVggPSB0
aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJBLng7DQoJdmFyIHIxWSA9
IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIHRoaXMubV9sb2NhbENlbnRlckEueTsNCgl0WCA9ICh0
TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZKTsNCglyMVkgPSAodE1hdC5jb2wx
LnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWSk7DQoJcjFYID0gdFg7DQoJdE1hdCA9IGJCLm1f
eGYuUjsNCgl2YXIgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhpcy5tX2xvY2FsQ2Vu
dGVyQi54Ow0KCXZhciByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSB0aGlzLm1fbG9jYWxD
ZW50ZXJCLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWSk7
DQoJcjJZID0gKHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlkpOw0KCXIyWCA9
IHRYOw0KCXZhciBkWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSBy
MVg7DQoJdmFyIGRZID0gYkIubV9zd2VlcC5jLnkgKyByMlkgLSBiQS5tX3N3ZWVwLmMueSAtIHIx
WTsNCgl0aGlzLm1faW52TWFzc0EgPSBiQS5tX2ludk1hc3M7DQoJdGhpcy5tX2ludk1hc3NCID0g
YkIubV9pbnZNYXNzOw0KCXRoaXMubV9pbnZJQSA9IGJBLm1faW52STsNCgl0aGlzLm1faW52SUIg
PSBiQi5tX2ludkk7DQoJdGhpcy5tX2F4aXMuU2V0VihCb3gyRC5Db21tb24uTWF0aC5iMk1hdGgu
TXVsTVYoeGYxLlIsIHRoaXMubV9sb2NhbFhBeGlzMSkpOw0KCXRoaXMubV9hMSA9IChkWCArIHIx
WCkgKiB0aGlzLm1fYXhpcy55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9heGlzLng7DQoJdGhpcy5t
X2EyID0gcjJYICogdGhpcy5tX2F4aXMueSAtIHIyWSAqIHRoaXMubV9heGlzLng7DQoJdGhpcy5t
X21vdG9yTWFzcyA9IHRoaXMubV9pbnZNYXNzQSArIHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9p
bnZJQSAqIHRoaXMubV9hMSAqIHRoaXMubV9hMSArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9hMiAq
IHRoaXMubV9hMjsNCglpZiAodGhpcy5tX21vdG9yTWFzcyA+IE51bWJlci5NSU5fVkFMVUUpIHRo
aXMubV9tb3Rvck1hc3MgPSAxLjAgLyB0aGlzLm1fbW90b3JNYXNzOw0KCXRoaXMubV9wZXJwLlNl
dFYoQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLk11bE1WKHhmMS5SLCB0aGlzLm1fbG9jYWxZQXhp
czEpKTsNCgl0aGlzLm1fczEgPSAoZFggKyByMVgpICogdGhpcy5tX3BlcnAueSAtIChkWSArIHIx
WSkgKiB0aGlzLm1fcGVycC54Ow0KCXRoaXMubV9zMiA9IHIyWCAqIHRoaXMubV9wZXJwLnkgLSBy
MlkgKiB0aGlzLm1fcGVycC54Ow0KCXZhciBtMSA9IHRoaXMubV9pbnZNYXNzQTsNCgl2YXIgbTIg
PSB0aGlzLm1faW52TWFzc0I7DQoJdmFyIGkxID0gdGhpcy5tX2ludklBOw0KCXZhciBpMiA9IHRo
aXMubV9pbnZJQjsNCgl0aGlzLm1fSy5jb2wxLnggPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEg
KiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9zMjsNCgl0aGlzLm1fSy5jb2wx
LnkgPSBpMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyOw0KCXRoaXMubV9LLmNvbDEueiA9
IGkxICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7
DQoJdGhpcy5tX0suY29sMi54ID0gdGhpcy5tX0suY29sMS55Ow0KCXRoaXMubV9LLmNvbDIueSA9
IGkxICsgaTI7DQoJdGhpcy5tX0suY29sMi56ID0gaTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMu
bV9hMjsNCgl0aGlzLm1fSy5jb2wzLnggPSB0aGlzLm1fSy5jb2wxLno7DQoJdGhpcy5tX0suY29s
My55ID0gdGhpcy5tX0suY29sMi56Ow0KCXRoaXMubV9LLmNvbDMueiA9IG0xICsgbTIgKyBpMSAq
IHRoaXMubV9hMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyICogdGhpcy5tX2EyOw0KCWlm
ICh0aGlzLm1fZW5hYmxlTGltaXQpIHsNCgkJdmFyIGpvaW50VHJhbnNpdGlvbiA9IHRoaXMubV9h
eGlzLnggKiBkWCArIHRoaXMubV9heGlzLnkgKiBkWTsNCgkJaWYgKE1hdGguYWJzKHRoaXMubV91
cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMi4wICogQm94MkQu
Q29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCkgew0KCQkJdGhpcy5tX2xpbWl0U3RhdGUg
PSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2VxdWFsTGltaXRzOw0KCQl9IGVsc2Ug
aWYgKGpvaW50VHJhbnNpdGlvbiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgew0KCQkJaWYg
KHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfYXRM
b3dlckxpbWl0KSB7DQoJCQkJdGhpcy5tX2xpbWl0U3RhdGUgPSBCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJKb2ludC5lX2F0TG93ZXJMaW1pdDsNCgkJCQl0aGlzLm1faW1wdWxzZS56ID0gMC4wOw0K
CQkJfQ0KCQl9IGVsc2UgaWYgKGpvaW50VHJhbnNpdGlvbiA+PSB0aGlzLm1fdXBwZXJUcmFuc2xh
dGlvbikgew0KCQkJaWYgKHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7DQoJCQkJdGhpcy5tX2xpbWl0U3RhdGUgPSBCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2F0VXBwZXJMaW1pdDsNCgkJCQl0aGlzLm1faW1w
dWxzZS56ID0gMC4wOw0KCQkJfQ0KCQl9IGVsc2Ugew0KCQkJdGhpcy5tX2xpbWl0U3RhdGUgPSBC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7DQoJCQl0aGlzLm1f
aW1wdWxzZS56ID0gMC4wOw0KCQl9DQoJfSBlbHNlIHsNCgkJdGhpcy5tX2xpbWl0U3RhdGUgPSBC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7DQoJfQ0KCWlmICh0
aGlzLm1fZW5hYmxlTW90b3IgPT0gZmFsc2UpIHsNCgkJdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAu
MDsNCgl9DQoJaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7DQoJCXRoaXMubV9pbXB1bHNlLnggKj0g
c3RlcC5kdFJhdGlvOw0KCQl0aGlzLm1faW1wdWxzZS55ICo9IHN0ZXAuZHRSYXRpbzsNCgkJdGhp
cy5tX21vdG9ySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87DQoJCXZhciBQWCA9IHRoaXMubV9pbXB1
bHNlLnggKiB0aGlzLm1fcGVycC54ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1w
dWxzZS56KSAqIHRoaXMubV9heGlzLng7DQoJCXZhciBQWSA9IHRoaXMubV9pbXB1bHNlLnggKiB0
aGlzLm1fcGVycC55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAq
IHRoaXMubV9heGlzLnk7DQoJCXZhciBMMSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczEg
KyB0aGlzLm1faW1wdWxzZS55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxz
ZS56KSAqIHRoaXMubV9hMTsNCgkJdmFyIEwyID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9z
MiArIHRoaXMubV9pbXB1bHNlLnkgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1
bHNlLnopICogdGhpcy5tX2EyOw0KCQliQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gdGhpcy5tX2lu
dk1hc3NBICogUFg7DQoJCWJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSB0aGlzLm1faW52TWFzc0Eg
KiBQWTsNCgkJYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gdGhpcy5tX2ludklBICogTDE7DQoJCWJC
Lm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDsNCgkJYkIubV9saW5l
YXJWZWxvY2l0eS55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZOw0KCQliQi5tX2FuZ3VsYXJWZWxv
Y2l0eSArPSB0aGlzLm1faW52SUIgKiBMMjsNCgl9IGVsc2Ugew0KCQl0aGlzLm1faW1wdWxzZS5T
ZXRaZXJvKCk7DQoJCXRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7DQoJfQ0KfTsNCkJveDJELkR5
bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29u
c3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7DQoJdmFyIGJBID0gdGhpcy5tX2JvZHlBOw0KCXZh
ciBiQiA9IHRoaXMubV9ib2R5QjsNCgl2YXIgdjEgPSBiQS5tX2xpbmVhclZlbG9jaXR5Ow0KCXZh
ciB3MSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5Ow0KCXZhciB2MiA9IGJCLm1fbGluZWFyVmVsb2Np
dHk7DQoJdmFyIHcyID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7DQoJdmFyIFBYID0gMDsNCgl2YXIg
UFkgPSAwOw0KCXZhciBMMSA9IDA7DQoJdmFyIEwyID0gMDsNCglpZiAodGhpcy5tX2VuYWJsZU1v
dG9yICYmIHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50
LmVfZXF1YWxMaW1pdHMpIHsNCgkJdmFyIENkb3QgPSB0aGlzLm1fYXhpcy54ICogKHYyLnggLSB2
MS54KSArIHRoaXMubV9heGlzLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5tX2EyICogdzIgLSB0
aGlzLm1fYTEgKiB3MTsNCgkJdmFyIGltcHVsc2UgPSB0aGlzLm1fbW90b3JNYXNzICogKHRoaXMu
bV9tb3RvclNwZWVkIC0gQ2RvdCk7DQoJCXZhciBvbGRJbXB1bHNlID0gdGhpcy5tX21vdG9ySW1w
dWxzZTsNCgkJdmFyIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heE1vdG9yRm9yY2U7
DQoJCXRoaXMubV9tb3RvckltcHVsc2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAo
dGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsICgtbWF4SW1wdWxzZSksIG1heEltcHVsc2Up
Ow0KCQlpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7DQoJCVBYID0g
aW1wdWxzZSAqIHRoaXMubV9heGlzLng7DQoJCVBZID0gaW1wdWxzZSAqIHRoaXMubV9heGlzLnk7
DQoJCUwxID0gaW1wdWxzZSAqIHRoaXMubV9hMTsNCgkJTDIgPSBpbXB1bHNlICogdGhpcy5tX2Ey
Ow0KCQl2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYOw0KCQl2MS55IC09IHRoaXMubV9pbnZN
YXNzQSAqIFBZOw0KCQl3MSAtPSB0aGlzLm1faW52SUEgKiBMMTsNCgkJdjIueCArPSB0aGlzLm1f
aW52TWFzc0IgKiBQWDsNCgkJdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTsNCgkJdzIgKz0g
dGhpcy5tX2ludklCICogTDI7DQoJfQ0KCXZhciBDZG90MVggPSB0aGlzLm1fcGVycC54ICogKHYy
LnggLSB2MS54KSArIHRoaXMubV9wZXJwLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5tX3MyICog
dzIgLSB0aGlzLm1fczEgKiB3MTsNCgl2YXIgQ2RvdDFZID0gdzIgLSB3MTsNCglpZiAodGhpcy5t
X2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50LmVfaW5hY3RpdmVMaW1pdCkgew0KCQl2YXIgQ2RvdDIgPSB0aGlzLm1fYXhpcy54
ICogKHYyLnggLSB2MS54KSArIHRoaXMubV9heGlzLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5t
X2EyICogdzIgLSB0aGlzLm1fYTEgKiB3MTsNCgkJdmFyIGYxID0gdGhpcy5tX2ltcHVsc2UuQ29w
eSgpOw0KCQl2YXIgZGYgPSB0aGlzLm1fSy5Tb2x2ZTMzKG5ldyBCb3gyRC5Db21tb24uTWF0aC5i
MlZlYzMoMCwgMCwgMCksICgtQ2RvdDFYKSwgKC1DZG90MVkpLCAoLUNkb3QyKSk7DQoJCXRoaXMu
bV9pbXB1bHNlLkFkZChkZik7DQoJCWlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PSBCb3gyRC5EeW5h
bWljcy5Kb2ludHMuYjJKb2ludC5lX2F0TG93ZXJMaW1pdCkgew0KCQkJdGhpcy5tX2ltcHVsc2Uu
eiA9IE1hdGgubWF4KHRoaXMubV9pbXB1bHNlLnosIDAuMCk7DQoJCX0gZWxzZSBpZiAodGhpcy5t
X2xpbWl0U3RhdGUgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9hdFVwcGVyTGlt
aXQpIHsNCgkJCXRoaXMubV9pbXB1bHNlLnogPSBNYXRoLm1pbih0aGlzLm1faW1wdWxzZS56LCAw
LjApOw0KCQl9DQoJCXZhciBiWCA9ICgtQ2RvdDFYKSAtICh0aGlzLm1faW1wdWxzZS56IC0gZjEu
eikgKiB0aGlzLm1fSy5jb2wzLng7DQoJCXZhciBiWSA9ICgtQ2RvdDFZKSAtICh0aGlzLm1faW1w
dWxzZS56IC0gZjEueikgKiB0aGlzLm1fSy5jb2wzLnk7DQoJCXZhciBmMnIgPSB0aGlzLm1fSy5T
b2x2ZTIyKEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCksIGJYLCBiWSk7DQoJCWYy
ci54ICs9IGYxLng7DQoJCWYyci55ICs9IGYxLnk7DQoJCXRoaXMubV9pbXB1bHNlLnggPSBmMnIu
eDsNCgkJdGhpcy5tX2ltcHVsc2UueSA9IGYyci55Ow0KCQlkZi54ID0gdGhpcy5tX2ltcHVsc2Uu
eCAtIGYxLng7DQoJCWRmLnkgPSB0aGlzLm1faW1wdWxzZS55IC0gZjEueTsNCgkJZGYueiA9IHRo
aXMubV9pbXB1bHNlLnogLSBmMS56Ow0KCQlQWCA9IGRmLnggKiB0aGlzLm1fcGVycC54ICsgZGYu
eiAqIHRoaXMubV9heGlzLng7DQoJCVBZID0gZGYueCAqIHRoaXMubV9wZXJwLnkgKyBkZi56ICog
dGhpcy5tX2F4aXMueTsNCgkJTDEgPSBkZi54ICogdGhpcy5tX3MxICsgZGYueSArIGRmLnogKiB0
aGlzLm1fYTE7DQoJCUwyID0gZGYueCAqIHRoaXMubV9zMiArIGRmLnkgKyBkZi56ICogdGhpcy5t
X2EyOw0KCQl2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYOw0KCQl2MS55IC09IHRoaXMubV9p
bnZNYXNzQSAqIFBZOw0KCQl3MSAtPSB0aGlzLm1faW52SUEgKiBMMTsNCgkJdjIueCArPSB0aGlz
Lm1faW52TWFzc0IgKiBQWDsNCgkJdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTsNCgkJdzIg
Kz0gdGhpcy5tX2ludklCICogTDI7DQoJfSBlbHNlIHsNCgkJdmFyIGRmMiA9IHRoaXMubV9LLlNv
bHZlMjIoQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKSwgKC1DZG90MVgpLCAoLUNk
b3QxWSkpOw0KCQl0aGlzLm1faW1wdWxzZS54ICs9IGRmMi54Ow0KCQl0aGlzLm1faW1wdWxzZS55
ICs9IGRmMi55Ow0KCQlQWCA9IGRmMi54ICogdGhpcy5tX3BlcnAueDsNCgkJUFkgPSBkZjIueCAq
IHRoaXMubV9wZXJwLnk7DQoJCUwxID0gZGYyLnggKiB0aGlzLm1fczEgKyBkZjIueTsNCgkJTDIg
PSBkZjIueCAqIHRoaXMubV9zMiArIGRmMi55Ow0KCQl2MS54IC09IHRoaXMubV9pbnZNYXNzQSAq
IFBYOw0KCQl2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZOw0KCQl3MSAtPSB0aGlzLm1faW52
SUEgKiBMMTsNCgkJdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDsNCgkJdjIueSArPSB0aGlz
Lm1faW52TWFzc0IgKiBQWTsNCgkJdzIgKz0gdGhpcy5tX2ludklCICogTDI7DQoJfQ0KCWJBLm1f
bGluZWFyVmVsb2NpdHkuU2V0Vih2MSk7DQoJYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3MTsNCgli
Qi5tX2xpbmVhclZlbG9jaXR5LlNldFYodjIpOw0KCWJCLm1fYW5ndWxhclZlbG9jaXR5ID0gdzI7
DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLlNv
bHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkgew0KCWlmIChiYXVt
Z2FydGUgPT09IHVuZGVmaW5lZCkgYmF1bWdhcnRlID0gMDsNCgl2YXIgbGltaXRDID0gMDsNCgl2
YXIgb2xkTGltaXRJbXB1bHNlID0gMDsNCgl2YXIgYkEgPSB0aGlzLm1fYm9keUE7DQoJdmFyIGJC
ID0gdGhpcy5tX2JvZHlCOw0KCXZhciBjMSA9IGJBLm1fc3dlZXAuYzsNCgl2YXIgYTEgPSBiQS5t
X3N3ZWVwLmE7DQoJdmFyIGMyID0gYkIubV9zd2VlcC5jOw0KCXZhciBhMiA9IGJCLm1fc3dlZXAu
YTsNCgl2YXIgdE1hdDsNCgl2YXIgdFggPSAwOw0KCXZhciBtMSA9IDA7DQoJdmFyIG0yID0gMDsN
Cgl2YXIgaTEgPSAwOw0KCXZhciBpMiA9IDA7DQoJdmFyIGxpbmVhckVycm9yID0gMC4wOw0KCXZh
ciBhbmd1bGFyRXJyb3IgPSAwLjA7DQoJdmFyIGFjdGl2ZSA9IGZhbHNlOw0KCXZhciBDMiA9IDAu
MDsNCgl2YXIgUjEgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyLkZyb21BbmdsZShhMSk7DQoJ
dmFyIFIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMi5Gcm9tQW5nbGUoYTIpOw0KCXRNYXQg
PSBSMTsNCgl2YXIgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2xvY2FsQ2Vu
dGVyQS54Ow0KCXZhciByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fbG9jYWxD
ZW50ZXJBLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWSk7
DQoJcjFZID0gKHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVkpOw0KCXIxWCA9
IHRYOw0KCXRNYXQgPSBSMjsNCgl2YXIgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhp
cy5tX2xvY2FsQ2VudGVyQi54Ow0KCXZhciByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSB0
aGlzLm1fbG9jYWxDZW50ZXJCLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNv
bDIueCAqIHIyWSk7DQoJcjJZID0gKHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiBy
MlkpOw0KCXIyWCA9IHRYOw0KCXZhciBkWCA9IGMyLnggKyByMlggLSBjMS54IC0gcjFYOw0KCXZh
ciBkWSA9IGMyLnkgKyByMlkgLSBjMS55IC0gcjFZOw0KCWlmICh0aGlzLm1fZW5hYmxlTGltaXQp
IHsNCgkJdGhpcy5tX2F4aXMgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguTXVsTVYoUjEsIHRo
aXMubV9sb2NhbFhBeGlzMSk7DQoJCXRoaXMubV9hMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fYXhp
cy55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9heGlzLng7DQoJCXRoaXMubV9hMiA9IHIyWCAqIHRo
aXMubV9heGlzLnkgLSByMlkgKiB0aGlzLm1fYXhpcy54Ow0KCQl2YXIgdHJhbnNsYXRpb24gPSB0
aGlzLm1fYXhpcy54ICogZFggKyB0aGlzLm1fYXhpcy55ICogZFk7DQoJCWlmIChNYXRoLmFicyh0
aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSA8IDIuMCAq
IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHsNCgkJCUMyID0gQm94MkQu
Q29tbW9uLk1hdGguYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uLCAoLUJveDJELkNvbW1vbi5iMlNl
dHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pLCBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5i
Ml9tYXhMaW5lYXJDb3JyZWN0aW9uKTsNCgkJCWxpbmVhckVycm9yID0gTWF0aC5hYnModHJhbnNs
YXRpb24pOw0KCQkJYWN0aXZlID0gdHJ1ZTsNCgkJfSBlbHNlIGlmICh0cmFuc2xhdGlvbiA8PSB0
aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikgew0KCQkJQzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1h
dGguQ2xhbXAodHJhbnNsYXRpb24gLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiArIEJveDJELkNv
bW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsICgtQm94MkQuQ29tbW9uLmIyU2V0dGluZ3Mu
YjJfbWF4TGluZWFyQ29ycmVjdGlvbiksIDAuMCk7DQoJCQlsaW5lYXJFcnJvciA9IHRoaXMubV9s
b3dlclRyYW5zbGF0aW9uIC0gdHJhbnNsYXRpb247DQoJCQlhY3RpdmUgPSB0cnVlOw0KCQl9IGVs
c2UgaWYgKHRyYW5zbGF0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7DQoJCQlDMiA9
IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aC5DbGFtcCh0cmFuc2xhdGlvbiAtIHRoaXMubV91cHBl
clRyYW5zbGF0aW9uICsgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgMC4w
LCBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKTsNCgkJCWxp
bmVhckVycm9yID0gdHJhbnNsYXRpb24gLSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbjsNCgkJCWFj
dGl2ZSA9IHRydWU7DQoJCX0NCgl9DQoJdGhpcy5tX3BlcnAgPSBCb3gyRC5Db21tb24uTWF0aC5i
Mk1hdGguTXVsTVYoUjEsIHRoaXMubV9sb2NhbFlBeGlzMSk7DQoJdGhpcy5tX3MxID0gKGRYICsg
cjFYKSAqIHRoaXMubV9wZXJwLnkgLSAoZFkgKyByMVkpICogdGhpcy5tX3BlcnAueDsNCgl0aGlz
Lm1fczIgPSByMlggKiB0aGlzLm1fcGVycC55IC0gcjJZICogdGhpcy5tX3BlcnAueDsNCgl2YXIg
aW1wdWxzZSA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMoMCwgMCwgMCk7DQoJdmFyIEMx
WCA9IHRoaXMubV9wZXJwLnggKiBkWCArIHRoaXMubV9wZXJwLnkgKiBkWTsNCgl2YXIgQzFZID0g
YTIgLSBhMSAtIHRoaXMubV9yZWZBbmdsZTsNCglsaW5lYXJFcnJvciA9IE1hdGgubWF4KGxpbmVh
ckVycm9yLCBNYXRoLmFicyhDMVgpKTsNCglhbmd1bGFyRXJyb3IgPSBNYXRoLmFicyhDMVkpOw0K
CWlmIChhY3RpdmUpIHsNCgkJbTEgPSB0aGlzLm1faW52TWFzc0E7DQoJCW0yID0gdGhpcy5tX2lu
dk1hc3NCOw0KCQlpMSA9IHRoaXMubV9pbnZJQTsNCgkJaTIgPSB0aGlzLm1faW52SUI7DQoJCXRo
aXMubV9LLmNvbDEueCA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGky
ICogdGhpcy5tX3MyICogdGhpcy5tX3MyOw0KCQl0aGlzLm1fSy5jb2wxLnkgPSBpMSAqIHRoaXMu
bV9zMSArIGkyICogdGhpcy5tX3MyOw0KCQl0aGlzLm1fSy5jb2wxLnogPSBpMSAqIHRoaXMubV9z
MSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX2EyOw0KCQl0aGlzLm1fSy5j
b2wyLnggPSB0aGlzLm1fSy5jb2wxLnk7DQoJCXRoaXMubV9LLmNvbDIueSA9IGkxICsgaTI7DQoJ
CXRoaXMubV9LLmNvbDIueiA9IGkxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fYTI7DQoJCXRo
aXMubV9LLmNvbDMueCA9IHRoaXMubV9LLmNvbDEuejsNCgkJdGhpcy5tX0suY29sMy55ID0gdGhp
cy5tX0suY29sMi56Ow0KCQl0aGlzLm1fSy5jb2wzLnogPSBtMSArIG0yICsgaTEgKiB0aGlzLm1f
YTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjsNCgkJdGhpcy5tX0su
U29sdmUzMyhpbXB1bHNlLCAoLUMxWCksICgtQzFZKSwgKC1DMikpOw0KCX0gZWxzZSB7DQoJCW0x
ID0gdGhpcy5tX2ludk1hc3NBOw0KCQltMiA9IHRoaXMubV9pbnZNYXNzQjsNCgkJaTEgPSB0aGlz
Lm1faW52SUE7DQoJCWkyID0gdGhpcy5tX2ludklCOw0KCQl2YXIgazExID0gbTEgKyBtMiArIGkx
ICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7DQoJ
CXZhciBrMTIgPSBpMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyOw0KCQl2YXIgazIyID0g
aTEgKyBpMjsNCgkJdGhpcy5tX0suY29sMS5TZXQoazExLCBrMTIsIDAuMCk7DQoJCXRoaXMubV9L
LmNvbDIuU2V0KGsxMiwgazIyLCAwLjApOw0KCQl2YXIgaW1wdWxzZTEgPSB0aGlzLm1fSy5Tb2x2
ZTIyKEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCksICgtQzFYKSwgKC1DMVkpKTsN
CgkJaW1wdWxzZS54ID0gaW1wdWxzZTEueDsNCgkJaW1wdWxzZS55ID0gaW1wdWxzZTEueTsNCgkJ
aW1wdWxzZS56ID0gMC4wOw0KCX0NCgl2YXIgUFggPSBpbXB1bHNlLnggKiB0aGlzLm1fcGVycC54
ICsgaW1wdWxzZS56ICogdGhpcy5tX2F4aXMueDsNCgl2YXIgUFkgPSBpbXB1bHNlLnggKiB0aGlz
Lm1fcGVycC55ICsgaW1wdWxzZS56ICogdGhpcy5tX2F4aXMueTsNCgl2YXIgTDEgPSBpbXB1bHNl
LnggKiB0aGlzLm1fczEgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiB0aGlzLm1fYTE7DQoJdmFy
IEwyID0gaW1wdWxzZS54ICogdGhpcy5tX3MyICsgaW1wdWxzZS55ICsgaW1wdWxzZS56ICogdGhp
cy5tX2EyOw0KCWMxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7DQoJYzEueSAtPSB0aGlzLm1f
aW52TWFzc0EgKiBQWTsNCglhMSAtPSB0aGlzLm1faW52SUEgKiBMMTsNCgljMi54ICs9IHRoaXMu
bV9pbnZNYXNzQiAqIFBYOw0KCWMyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7DQoJYTIgKz0g
dGhpcy5tX2ludklCICogTDI7DQoJYkEubV9zd2VlcC5hID0gYTE7DQoJYkIubV9zd2VlcC5hID0g
YTI7DQoJYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCgliQi5TeW5jaHJvbml6ZVRyYW5zZm9y
bSgpOw0KCXJldHVybiBsaW5lYXJFcnJvciA8PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9s
aW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9h
bmd1bGFyU2xvcDsNCn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVuZHMge0JveDJE
LkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmfQ0KICovDQpCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJQcmlzbWF0aWNKb2ludERlZiA9IGZ1bmN0aW9uKCkgew0KCUJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50RGVmLmNhbGwodGhpcyk7DQoJdGhpcy5sb2NhbEFuY2hvckEgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubG9jYWxBbmNob3JCID0gQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxvY2FsQXhpc0EgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMudHlwZSA9IEJveDJELkR5bmFtaWNzLkpv
aW50cy5iMkpvaW50LmVfcHJpc21hdGljSm9pbnQ7DQoJdGhpcy5sb2NhbEF4aXNBLlNldCgxLjAs
IDAuMCk7DQoJdGhpcy5yZWZlcmVuY2VBbmdsZSA9IDAuMDsNCgl0aGlzLmVuYWJsZUxpbWl0ID0g
ZmFsc2U7DQoJdGhpcy5sb3dlclRyYW5zbGF0aW9uID0gMC4wOw0KCXRoaXMudXBwZXJUcmFuc2xh
dGlvbiA9IDAuMDsNCgl0aGlzLmVuYWJsZU1vdG9yID0gZmFsc2U7DQoJdGhpcy5tYXhNb3RvckZv
cmNlID0gMC4wOw0KCXRoaXMubW90b3JTcGVlZCA9IDAuMDsNCn07DQpjMmluaGVyaXQoQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnREZWYsIEJveDJELkR5bmFtaWNzLkpvaW50
cy5iMkpvaW50RGVmKTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlByaXNtYXRpY0pvaW50RGVm
LnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oYkEsIGJCLCBhbmNob3IsIGF4aXMpIHsN
Cgl0aGlzLmJvZHlBID0gYkE7DQoJdGhpcy5ib2R5QiA9IGJCOw0KCXRoaXMubG9jYWxBbmNob3JB
ID0gdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvcik7DQoJdGhpcy5sb2NhbEFuY2hvckIg
PSB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKTsNCgl0aGlzLmxvY2FsQXhpc0EgPSB0
aGlzLmJvZHlBLkdldExvY2FsVmVjdG9yKGF4aXMpOw0KCXRoaXMucmVmZXJlbmNlQW5nbGUgPSB0
aGlzLmJvZHlCLkdldEFuZ2xlKCkgLSB0aGlzLmJvZHlBLkdldEFuZ2xlKCk7DQp9Ow0KQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLkNyZWF0ZSA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiBuZXcgQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGlj
Sm9pbnQodGhpcyk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJQdWxsZXlKb2ludERlZn0gZGVmDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludH0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
UHVsbGV5Sm9pbnQgPSBmdW5jdGlvbihkZWYpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJK
b2ludC5jYWxsKHRoaXMsIGRlZik7DQoJdGhpcy5tX2dyb3VuZEFuY2hvcjEgPSBCb3gyRC5Db21t
b24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV9ncm91bmRBbmNob3IyID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IxID0gQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IyID0g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fdTEgPSBCb3gyRC5D
b21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMubV91MiA9IEJveDJELkNvbW1vbi5N
YXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5tX2dyb3VuZCA9IHRoaXMubV9ib2R5QS5tX3dv
cmxkLm1fZ3JvdW5kQm9keTsNCgl0aGlzLm1fZ3JvdW5kQW5jaG9yMS54ID0gZGVmLmdyb3VuZEFu
Y2hvckEueCAtIHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54Ow0KCXRoaXMubV9ncm91bmRB
bmNob3IxLnkgPSBkZWYuZ3JvdW5kQW5jaG9yQS55IC0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0
aW9uLnk7DQoJdGhpcy5tX2dyb3VuZEFuY2hvcjIueCA9IGRlZi5ncm91bmRBbmNob3JCLnggLSB0
aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueDsNCgl0aGlzLm1fZ3JvdW5kQW5jaG9yMi55ID0g
ZGVmLmdyb3VuZEFuY2hvckIueSAtIHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55Ow0KCXRo
aXMubV9sb2NhbEFuY2hvcjEuU2V0VihkZWYubG9jYWxBbmNob3JBKTsNCgl0aGlzLm1fbG9jYWxB
bmNob3IyLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7DQoJdGhpcy5tX3JhdGlvID0gZGVmLnJhdGlv
Ow0KCXRoaXMubV9jb25zdGFudCA9IGRlZi5sZW5ndGhBICsgdGhpcy5tX3JhdGlvICogZGVmLmxl
bmd0aEI7DQoJdGhpcy5tX21heExlbmd0aDEgPSBNYXRoLm1pbihkZWYubWF4TGVuZ3RoQSwgdGhp
cy5tX2NvbnN0YW50IC0gdGhpcy5tX3JhdGlvICogQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVs
bGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoKTsNCgl0aGlzLm1fbWF4TGVuZ3RoMiA9IE1hdGgu
bWluKGRlZi5tYXhMZW5ndGhCLCAodGhpcy5tX2NvbnN0YW50IC0gQm94MkQuRHluYW1pY3MuSm9p
bnRzLmIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoKSAvIHRoaXMubV9yYXRpbyk7DQoJ
dGhpcy5tX2ltcHVsc2UgPSAwLjA7DQoJdGhpcy5tX2xpbWl0SW1wdWxzZTEgPSAwLjA7DQoJdGhp
cy5tX2xpbWl0SW1wdWxzZTIgPSAwLjA7DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFtaWNzLkpv
aW50cy5iMlB1bGxleUpvaW50LCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludCk7DQpCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9j
YWxBbmNob3IxKTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludC5wcm90
b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYm9keUIuR2V0
V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGlu
dl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRo
aXMubV91Mi54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Mi55KTsNCn07DQpC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25U
b3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHsNCglpZiAoaW52X2R0ID09PSB1bmRlZmluZWQpIGlu
dl9kdCA9IDA7DQoJcmV0dXJuIDAuMDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxs
ZXlKb2ludC5wcm90b3R5cGUuR2V0R3JvdW5kQW5jaG9yQSA9IGZ1bmN0aW9uKCkgew0KCXZhciBh
ID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLkNvcHkoKTsNCglhLkFkZCh0aGlzLm1fZ3Jv
dW5kQW5jaG9yMSk7DQoJcmV0dXJuIGE7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVs
bGV5Sm9pbnQucHJvdG90eXBlLkdldEdyb3VuZEFuY2hvckIgPSBmdW5jdGlvbigpIHsNCgl2YXIg
YSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi5Db3B5KCk7DQoJYS5BZGQodGhpcy5tX2dy
b3VuZEFuY2hvcjIpOw0KCXJldHVybiBhOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlB1
bGxleUpvaW50LnByb3RvdHlwZS5HZXRMZW5ndGgxID0gZnVuY3Rpb24oKSB7DQoJdmFyIHAgPSB0
aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTsNCgl2YXIgc1gg
PSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IxLng7
DQoJdmFyIHNZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlzLm1fZ3JvdW5k
QW5jaG9yMS55Ow0KCXZhciBkWCA9IHAueCAtIHNYOw0KCXZhciBkWSA9IHAueSAtIHNZOw0KCXJl
dHVybiBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpOw0KfTsNCkJveDJELkR5bmFtaWNzLkpv
aW50cy5iMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRMZW5ndGgyID0gZnVuY3Rpb24oKSB7DQoJ
dmFyIHAgPSB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTsN
Cgl2YXIgc1ggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRB
bmNob3IyLng7DQoJdmFyIHNZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlz
Lm1fZ3JvdW5kQW5jaG9yMi55Ow0KCXZhciBkWCA9IHAueCAtIHNYOw0KCXZhciBkWSA9IHAueSAt
IHNZOw0KCXJldHVybiBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpOw0KfTsNCkJveDJELkR5
bmFtaWNzLkpvaW50cy5iMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRSYXRpbyA9IGZ1bmN0aW9u
KCkgew0KCXJldHVybiB0aGlzLm1fcmF0aW87DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
UHVsbGV5Sm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24o
c3RlcCkgew0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7
DQoJdmFyIHRNYXQ7DQoJdE1hdCA9IGJBLm1feGYuUjsNCgl2YXIgcjFYID0gdGhpcy5tX2xvY2Fs
QW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCXZhciByMVkgPSB0aGlzLm1f
bG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdmFyIHRYID0gKHRN
YXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVkpOw0KCXIxWSA9ICh0TWF0LmNvbDEu
eSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsNCglyMVggPSB0WDsNCgl0TWF0ID0gYkIubV94
Zi5SOw0KCXZhciByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2Fs
Q2VudGVyLng7DQoJdmFyIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAu
bG9jYWxDZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICog
cjJZKTsNCglyMlkgPSAodE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWSk7DQoJ
cjJYID0gdFg7DQoJdmFyIHAxWCA9IGJBLm1fc3dlZXAuYy54ICsgcjFYOw0KCXZhciBwMVkgPSBi
QS5tX3N3ZWVwLmMueSArIHIxWTsNCgl2YXIgcDJYID0gYkIubV9zd2VlcC5jLnggKyByMlg7DQoJ
dmFyIHAyWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZOw0KCXZhciBzMVggPSB0aGlzLm1fZ3JvdW5k
Lm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IxLng7DQoJdmFyIHMxWSA9IHRo
aXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueTsNCgl2
YXIgczJYID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnggKyB0aGlzLm1fZ3JvdW5kQW5j
aG9yMi54Ow0KCXZhciBzMlkgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMu
bV9ncm91bmRBbmNob3IyLnk7DQoJdGhpcy5tX3UxLlNldChwMVggLSBzMVgsIHAxWSAtIHMxWSk7
DQoJdGhpcy5tX3UyLlNldChwMlggLSBzMlgsIHAyWSAtIHMyWSk7DQoJdmFyIGxlbmd0aDEgPSB0
aGlzLm1fdTEuTGVuZ3RoKCk7DQoJdmFyIGxlbmd0aDIgPSB0aGlzLm1fdTIuTGVuZ3RoKCk7DQoJ
aWYgKGxlbmd0aDEgPiBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7DQoJ
CXRoaXMubV91MS5NdWx0aXBseSgxLjAgLyBsZW5ndGgxKTsNCgl9IGVsc2Ugew0KCQl0aGlzLm1f
dTEuU2V0WmVybygpOw0KCX0NCglpZiAobGVuZ3RoMiA+IEJveDJELkNvbW1vbi5iMlNldHRpbmdz
LmIyX2xpbmVhclNsb3ApIHsNCgkJdGhpcy5tX3UyLk11bHRpcGx5KDEuMCAvIGxlbmd0aDIpOw0K
CX0gZWxzZSB7DQoJCXRoaXMubV91Mi5TZXRaZXJvKCk7DQoJfQ0KCXZhciBDID0gdGhpcy5tX2Nv
bnN0YW50IC0gbGVuZ3RoMSAtIHRoaXMubV9yYXRpbyAqIGxlbmd0aDI7DQoJaWYgKEMgPiAwLjAp
IHsNCgkJdGhpcy5tX3N0YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9pbmFj
dGl2ZUxpbWl0Ow0KCQl0aGlzLm1faW1wdWxzZSA9IDAuMDsNCgl9IGVsc2Ugew0KCQl0aGlzLm1f
c3RhdGUgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2F0VXBwZXJMaW1pdDsNCgl9
DQoJaWYgKGxlbmd0aDEgPCB0aGlzLm1fbWF4TGVuZ3RoMSkgew0KCQl0aGlzLm1fbGltaXRTdGF0
ZTEgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7DQoJCXRo
aXMubV9saW1pdEltcHVsc2UxID0gMC4wOw0KCX0gZWxzZSB7DQoJCXRoaXMubV9saW1pdFN0YXRl
MSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfYXRVcHBlckxpbWl0Ow0KCX0NCglp
ZiAobGVuZ3RoMiA8IHRoaXMubV9tYXhMZW5ndGgyKSB7DQoJCXRoaXMubV9saW1pdFN0YXRlMiA9
IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfaW5hY3RpdmVMaW1pdDsNCgkJdGhpcy5t
X2xpbWl0SW1wdWxzZTIgPSAwLjA7DQoJfSBlbHNlIHsNCgkJdGhpcy5tX2xpbWl0U3RhdGUyID0g
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9hdFVwcGVyTGltaXQ7DQoJfQ0KCXZhciBj
cjF1MSA9IHIxWCAqIHRoaXMubV91MS55IC0gcjFZICogdGhpcy5tX3UxLng7DQoJdmFyIGNyMnUy
ID0gcjJYICogdGhpcy5tX3UyLnkgLSByMlkgKiB0aGlzLm1fdTIueDsNCgl0aGlzLm1fbGltaXRN
YXNzMSA9IGJBLm1faW52TWFzcyArIGJBLm1faW52SSAqIGNyMXUxICogY3IxdTE7DQoJdGhpcy5t
X2xpbWl0TWFzczIgPSBiQi5tX2ludk1hc3MgKyBiQi5tX2ludkkgKiBjcjJ1MiAqIGNyMnUyOw0K
CXRoaXMubV9wdWxsZXlNYXNzID0gdGhpcy5tX2xpbWl0TWFzczEgKyB0aGlzLm1fcmF0aW8gKiB0
aGlzLm1fcmF0aW8gKiB0aGlzLm1fbGltaXRNYXNzMjsNCgl0aGlzLm1fbGltaXRNYXNzMSA9IDEu
MCAvIHRoaXMubV9saW1pdE1hc3MxOw0KCXRoaXMubV9saW1pdE1hc3MyID0gMS4wIC8gdGhpcy5t
X2xpbWl0TWFzczI7DQoJdGhpcy5tX3B1bGxleU1hc3MgPSAxLjAgLyB0aGlzLm1fcHVsbGV5TWFz
czsNCglpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHsNCgkJdGhpcy5tX2ltcHVsc2UgKj0gc3RlcC5k
dFJhdGlvOw0KCQl0aGlzLm1fbGltaXRJbXB1bHNlMSAqPSBzdGVwLmR0UmF0aW87DQoJCXRoaXMu
bV9saW1pdEltcHVsc2UyICo9IHN0ZXAuZHRSYXRpbzsNCgkJdmFyIFAxWCA9ICgoLXRoaXMubV9p
bXB1bHNlKSAtIHRoaXMubV9saW1pdEltcHVsc2UxKSAqIHRoaXMubV91MS54Ow0KCQl2YXIgUDFZ
ID0gKCgtdGhpcy5tX2ltcHVsc2UpIC0gdGhpcy5tX2xpbWl0SW1wdWxzZTEpICogdGhpcy5tX3Ux
Lnk7DQoJCXZhciBQMlggPSAoKC10aGlzLm1fcmF0aW8gKiB0aGlzLm1faW1wdWxzZSkgLSB0aGlz
Lm1fbGltaXRJbXB1bHNlMikgKiB0aGlzLm1fdTIueDsNCgkJdmFyIFAyWSA9ICgoLXRoaXMubV9y
YXRpbyAqIHRoaXMubV9pbXB1bHNlKSAtIHRoaXMubV9saW1pdEltcHVsc2UyKSAqIHRoaXMubV91
Mi55Ow0KCQliQS5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkEubV9pbnZNYXNzICogUDFYOw0KCQli
QS5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkEubV9pbnZNYXNzICogUDFZOw0KCQliQS5tX2FuZ3Vs
YXJWZWxvY2l0eSArPSBiQS5tX2ludkkgKiAocjFYICogUDFZIC0gcjFZICogUDFYKTsNCgkJYkIu
bV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFAyWDsNCgkJYkIubV9saW5lYXJW
ZWxvY2l0eS55ICs9IGJCLm1faW52TWFzcyAqIFAyWTsNCgkJYkIubV9hbmd1bGFyVmVsb2NpdHkg
Kz0gYkIubV9pbnZJICogKHIyWCAqIFAyWSAtIHIyWSAqIFAyWCk7DQoJfSBlbHNlIHsNCgkJdGhp
cy5tX2ltcHVsc2UgPSAwLjA7DQoJCXRoaXMubV9saW1pdEltcHVsc2UxID0gMC4wOw0KCQl0aGlz
Lm1fbGltaXRJbXB1bHNlMiA9IDAuMDsNCgl9DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
UHVsbGV5Sm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9u
KHN0ZXApIHsNCgl2YXIgYkEgPSB0aGlzLm1fYm9keUE7DQoJdmFyIGJCID0gdGhpcy5tX2JvZHlC
Ow0KCXZhciB0TWF0Ow0KCXRNYXQgPSBiQS5tX3hmLlI7DQoJdmFyIHIxWCA9IHRoaXMubV9sb2Nh
bEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2YXIgcjFZID0gdGhpcy5t
X2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXZhciB0WCA9ICh0
TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZKTsNCglyMVkgPSAodE1hdC5jb2wx
LnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWSk7DQoJcjFYID0gdFg7DQoJdE1hdCA9IGJCLm1f
eGYuUjsNCgl2YXIgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2Nh
bENlbnRlci54Ow0KCXZhciByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVw
LmxvY2FsQ2VudGVyLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAq
IHIyWSk7DQoJcjJZID0gKHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlkpOw0K
CXIyWCA9IHRYOw0KCXZhciB2MVggPSAwOw0KCXZhciB2MVkgPSAwOw0KCXZhciB2MlggPSAwOw0K
CXZhciB2MlkgPSAwOw0KCXZhciBQMVggPSAwOw0KCXZhciBQMVkgPSAwOw0KCXZhciBQMlggPSAw
Ow0KCXZhciBQMlkgPSAwOw0KCXZhciBDZG90ID0gMDsNCgl2YXIgaW1wdWxzZSA9IDA7DQoJdmFy
IG9sZEltcHVsc2UgPSAwOw0KCWlmICh0aGlzLm1fc3RhdGUgPT0gQm94MkQuRHluYW1pY3MuSm9p
bnRzLmIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHsNCgkJdjFYID0gYkEubV9saW5lYXJWZWxvY2l0
eS54ICsgKCgtYkEubV9hbmd1bGFyVmVsb2NpdHkgKiByMVkpKTsNCgkJdjFZID0gYkEubV9saW5l
YXJWZWxvY2l0eS55ICsgKGJBLm1fYW5ndWxhclZlbG9jaXR5ICogcjFYKTsNCgkJdjJYID0gYkIu
bV9saW5lYXJWZWxvY2l0eS54ICsgKCgtYkIubV9hbmd1bGFyVmVsb2NpdHkgKiByMlkpKTsNCgkJ
djJZID0gYkIubV9saW5lYXJWZWxvY2l0eS55ICsgKGJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJY
KTsNCgkJQ2RvdCA9ICgtKHRoaXMubV91MS54ICogdjFYICsgdGhpcy5tX3UxLnkgKiB2MVkpKSAt
IHRoaXMubV9yYXRpbyAqICh0aGlzLm1fdTIueCAqIHYyWCArIHRoaXMubV91Mi55ICogdjJZKTsN
CgkJaW1wdWxzZSA9IHRoaXMubV9wdWxsZXlNYXNzICogKCgtQ2RvdCkpOw0KCQlvbGRJbXB1bHNl
ID0gdGhpcy5tX2ltcHVsc2U7DQoJCXRoaXMubV9pbXB1bHNlID0gTWF0aC5tYXgoMC4wLCB0aGlz
Lm1faW1wdWxzZSArIGltcHVsc2UpOw0KCQlpbXB1bHNlID0gdGhpcy5tX2ltcHVsc2UgLSBvbGRJ
bXB1bHNlOw0KCQlQMVggPSAoLWltcHVsc2UgKiB0aGlzLm1fdTEueCk7DQoJCVAxWSA9ICgtaW1w
dWxzZSAqIHRoaXMubV91MS55KTsNCgkJUDJYID0gKC10aGlzLm1fcmF0aW8gKiBpbXB1bHNlICog
dGhpcy5tX3UyLngpOw0KCQlQMlkgPSAoLXRoaXMubV9yYXRpbyAqIGltcHVsc2UgKiB0aGlzLm1f
dTIueSk7DQoJCWJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiBQMVg7DQoJ
CWJBLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQS5tX2ludk1hc3MgKiBQMVk7DQoJCWJBLm1fYW5n
dWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIChyMVggKiBQMVkgLSByMVkgKiBQMVgpOw0KCQli
Qi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogUDJYOw0KCQliQi5tX2xpbmVh
clZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogUDJZOw0KCQliQi5tX2FuZ3VsYXJWZWxvY2l0
eSArPSBiQi5tX2ludkkgKiAocjJYICogUDJZIC0gcjJZICogUDJYKTsNCgl9DQoJaWYgKHRoaXMu
bV9saW1pdFN0YXRlMSA9PSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2F0VXBwZXJM
aW1pdCkgew0KCQl2MVggPSBiQS5tX2xpbmVhclZlbG9jaXR5LnggKyAoKC1iQS5tX2FuZ3VsYXJW
ZWxvY2l0eSAqIHIxWSkpOw0KCQl2MVkgPSBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYkEubV9h
bmd1bGFyVmVsb2NpdHkgKiByMVgpOw0KCQlDZG90ID0gKC0odGhpcy5tX3UxLnggKiB2MVggKyB0
aGlzLm1fdTEueSAqIHYxWSkpOw0KCQlpbXB1bHNlID0gKC10aGlzLm1fbGltaXRNYXNzMSAqIENk
b3QpOw0KCQlvbGRJbXB1bHNlID0gdGhpcy5tX2xpbWl0SW1wdWxzZTE7DQoJCXRoaXMubV9saW1p
dEltcHVsc2UxID0gTWF0aC5tYXgoMC4wLCB0aGlzLm1fbGltaXRJbXB1bHNlMSArIGltcHVsc2Up
Ow0KCQlpbXB1bHNlID0gdGhpcy5tX2xpbWl0SW1wdWxzZTEgLSBvbGRJbXB1bHNlOw0KCQlQMVgg
PSAoLWltcHVsc2UgKiB0aGlzLm1fdTEueCk7DQoJCVAxWSA9ICgtaW1wdWxzZSAqIHRoaXMubV91
MS55KTsNCgkJYkEubV9saW5lYXJWZWxvY2l0eS54ICs9IGJBLm1faW52TWFzcyAqIFAxWDsNCgkJ
YkEubV9saW5lYXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIFAxWTsNCgkJYkEubV9hbmd1
bGFyVmVsb2NpdHkgKz0gYkEubV9pbnZJICogKHIxWCAqIFAxWSAtIHIxWSAqIFAxWCk7DQoJfQ0K
CWlmICh0aGlzLm1fbGltaXRTdGF0ZTIgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9hdFVwcGVyTGltaXQpIHsNCgkJdjJYID0gYkIubV9saW5lYXJWZWxvY2l0eS54ICsgKCgtYkIu
bV9hbmd1bGFyVmVsb2NpdHkgKiByMlkpKTsNCgkJdjJZID0gYkIubV9saW5lYXJWZWxvY2l0eS55
ICsgKGJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJYKTsNCgkJQ2RvdCA9ICgtKHRoaXMubV91Mi54
ICogdjJYICsgdGhpcy5tX3UyLnkgKiB2MlkpKTsNCgkJaW1wdWxzZSA9ICgtdGhpcy5tX2xpbWl0
TWFzczIgKiBDZG90KTsNCgkJb2xkSW1wdWxzZSA9IHRoaXMubV9saW1pdEltcHVsc2UyOw0KCQl0
aGlzLm1fbGltaXRJbXB1bHNlMiA9IE1hdGgubWF4KDAuMCwgdGhpcy5tX2xpbWl0SW1wdWxzZTIg
KyBpbXB1bHNlKTsNCgkJaW1wdWxzZSA9IHRoaXMubV9saW1pdEltcHVsc2UyIC0gb2xkSW1wdWxz
ZTsNCgkJUDJYID0gKC1pbXB1bHNlICogdGhpcy5tX3UyLngpOw0KCQlQMlkgPSAoLWltcHVsc2Ug
KiB0aGlzLm1fdTIueSk7DQoJCWJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3Mg
KiBQMlg7DQoJCWJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiBQMlk7DQoJ
CWJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAqIChyMlggKiBQMlkgLSByMlkgKiBQ
MlgpOw0KCX0NCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludC5wcm90b3R5
cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7DQoJaWYg
KGJhdW1nYXJ0ZSA9PT0gdW5kZWZpbmVkKSBiYXVtZ2FydGUgPSAwOw0KCXZhciBiQSA9IHRoaXMu
bV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7DQoJdmFyIHRNYXQ7DQoJdmFyIHMxWCA9
IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueDsN
Cgl2YXIgczFZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlzLm1fZ3JvdW5k
QW5jaG9yMS55Ow0KCXZhciBzMlggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRo
aXMubV9ncm91bmRBbmNob3IyLng7DQoJdmFyIHMyWSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3Np
dGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjIueTsNCgl2YXIgcjFYID0gMDsNCgl2YXIgcjFZ
ID0gMDsNCgl2YXIgcjJYID0gMDsNCgl2YXIgcjJZID0gMDsNCgl2YXIgcDFYID0gMDsNCgl2YXIg
cDFZID0gMDsNCgl2YXIgcDJYID0gMDsNCgl2YXIgcDJZID0gMDsNCgl2YXIgbGVuZ3RoMSA9IDA7
DQoJdmFyIGxlbmd0aDIgPSAwOw0KCXZhciBDID0gMDsNCgl2YXIgaW1wdWxzZSA9IDA7DQoJdmFy
IG9sZEltcHVsc2UgPSAwOw0KCXZhciBvbGRMaW1pdFBvc2l0aW9uSW1wdWxzZSA9IDA7DQoJdmFy
IHRYID0gMDsNCgl2YXIgbGluZWFyRXJyb3IgPSAwLjA7DQoJaWYgKHRoaXMubV9zdGF0ZSA9PSBC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkgew0KCQl0TWF0ID0g
YkEubV94Zi5SOw0KCQlyMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxv
Y2FsQ2VudGVyLng7DQoJCXIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAu
bG9jYWxDZW50ZXIueTsNCgkJdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAq
IHIxWSk7DQoJCXIxWSA9ICh0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsN
CgkJcjFYID0gdFg7DQoJCXRNYXQgPSBiQi5tX3hmLlI7DQoJCXIyWCA9IHRoaXMubV9sb2NhbEFu
Y2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgkJcjJZID0gdGhpcy5tX2xvY2Fs
QW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCQl0WCA9ICh0TWF0LmNvbDEu
eCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZKTsNCgkJcjJZID0gKHRNYXQuY29sMS55ICogcjJY
ICsgdE1hdC5jb2wyLnkgKiByMlkpOw0KCQlyMlggPSB0WDsNCgkJcDFYID0gYkEubV9zd2VlcC5j
LnggKyByMVg7DQoJCXAxWSA9IGJBLm1fc3dlZXAuYy55ICsgcjFZOw0KCQlwMlggPSBiQi5tX3N3
ZWVwLmMueCArIHIyWDsNCgkJcDJZID0gYkIubV9zd2VlcC5jLnkgKyByMlk7DQoJCXRoaXMubV91
MS5TZXQocDFYIC0gczFYLCBwMVkgLSBzMVkpOw0KCQl0aGlzLm1fdTIuU2V0KHAyWCAtIHMyWCwg
cDJZIC0gczJZKTsNCgkJbGVuZ3RoMSA9IHRoaXMubV91MS5MZW5ndGgoKTsNCgkJbGVuZ3RoMiA9
IHRoaXMubV91Mi5MZW5ndGgoKTsNCgkJaWYgKGxlbmd0aDEgPiBCb3gyRC5Db21tb24uYjJTZXR0
aW5ncy5iMl9saW5lYXJTbG9wKSB7DQoJCQl0aGlzLm1fdTEuTXVsdGlwbHkoMS4wIC8gbGVuZ3Ro
MSk7DQoJCX0gZWxzZSB7DQoJCQl0aGlzLm1fdTEuU2V0WmVybygpOw0KCQl9DQoJCWlmIChsZW5n
dGgyID4gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCkgew0KCQkJdGhpcy5t
X3UyLk11bHRpcGx5KDEuMCAvIGxlbmd0aDIpOw0KCQl9IGVsc2Ugew0KCQkJdGhpcy5tX3UyLlNl
dFplcm8oKTsNCgkJfQ0KCQlDID0gdGhpcy5tX2NvbnN0YW50IC0gbGVuZ3RoMSAtIHRoaXMubV9y
YXRpbyAqIGxlbmd0aDI7DQoJCWxpbmVhckVycm9yID0gTWF0aC5tYXgobGluZWFyRXJyb3IsICgt
QykpOw0KCQlDID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoLkNsYW1wKEMgKyBCb3gyRC5Db21t
b24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAoLUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIy
X21heExpbmVhckNvcnJlY3Rpb24pLCAwLjApOw0KCQlpbXB1bHNlID0gKC10aGlzLm1fcHVsbGV5
TWFzcyAqIEMpOw0KCQlwMVggPSAoLWltcHVsc2UgKiB0aGlzLm1fdTEueCk7DQoJCXAxWSA9ICgt
aW1wdWxzZSAqIHRoaXMubV91MS55KTsNCgkJcDJYID0gKC10aGlzLm1fcmF0aW8gKiBpbXB1bHNl
ICogdGhpcy5tX3UyLngpOw0KCQlwMlkgPSAoLXRoaXMubV9yYXRpbyAqIGltcHVsc2UgKiB0aGlz
Lm1fdTIueSk7DQoJCWJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIHAxWDsNCgkJYkEu
bV9zd2VlcC5jLnkgKz0gYkEubV9pbnZNYXNzICogcDFZOw0KCQliQS5tX3N3ZWVwLmEgKz0gYkEu
bV9pbnZJICogKHIxWCAqIHAxWSAtIHIxWSAqIHAxWCk7DQoJCWJCLm1fc3dlZXAuYy54ICs9IGJC
Lm1faW52TWFzcyAqIHAyWDsNCgkJYkIubV9zd2VlcC5jLnkgKz0gYkIubV9pbnZNYXNzICogcDJZ
Ow0KCQliQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogKHIyWCAqIHAyWSAtIHIyWSAqIHAyWCk7
DQoJCWJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJCWJCLlN5bmNocm9uaXplVHJhbnNmb3Jt
KCk7DQoJfQ0KCWlmICh0aGlzLm1fbGltaXRTdGF0ZTEgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHsNCgkJdE1hdCA9IGJBLm1feGYuUjsNCgkJcjFYID0g
dGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCQlyMVkg
PSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJCXRY
ID0gKHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVkpOw0KCQlyMVkgPSAodE1h
dC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWSk7DQoJCXIxWCA9IHRYOw0KCQlwMVgg
PSBiQS5tX3N3ZWVwLmMueCArIHIxWDsNCgkJcDFZID0gYkEubV9zd2VlcC5jLnkgKyByMVk7DQoJ
CXRoaXMubV91MS5TZXQocDFYIC0gczFYLCBwMVkgLSBzMVkpOw0KCQlsZW5ndGgxID0gdGhpcy5t
X3UxLkxlbmd0aCgpOw0KCQlpZiAobGVuZ3RoMSA+IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIy
X2xpbmVhclNsb3ApIHsNCgkJCXRoaXMubV91MS54ICo9IDEuMCAvIGxlbmd0aDE7DQoJCQl0aGlz
Lm1fdTEueSAqPSAxLjAgLyBsZW5ndGgxOw0KCQl9IGVsc2Ugew0KCQkJdGhpcy5tX3UxLlNldFpl
cm8oKTsNCgkJfQ0KCQlDID0gdGhpcy5tX21heExlbmd0aDEgLSBsZW5ndGgxOw0KCQlsaW5lYXJF
cnJvciA9IE1hdGgubWF4KGxpbmVhckVycm9yLCAoLUMpKTsNCgkJQyA9IEJveDJELkNvbW1vbi5N
YXRoLmIyTWF0aC5DbGFtcChDICsgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xv
cCwgKC1Cb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgMC4w
KTsNCgkJaW1wdWxzZSA9ICgtdGhpcy5tX2xpbWl0TWFzczEgKiBDKTsNCgkJcDFYID0gKC1pbXB1
bHNlICogdGhpcy5tX3UxLngpOw0KCQlwMVkgPSAoLWltcHVsc2UgKiB0aGlzLm1fdTEueSk7DQoJ
CWJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIHAxWDsNCgkJYkEubV9zd2VlcC5jLnkg
Kz0gYkEubV9pbnZNYXNzICogcDFZOw0KCQliQS5tX3N3ZWVwLmEgKz0gYkEubV9pbnZJICogKHIx
WCAqIHAxWSAtIHIxWSAqIHAxWCk7DQoJCWJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJfQ0K
CWlmICh0aGlzLm1fbGltaXRTdGF0ZTIgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9hdFVwcGVyTGltaXQpIHsNCgkJdE1hdCA9IGJCLm1feGYuUjsNCgkJcjJYID0gdGhpcy5tX2xv
Y2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCQlyMlkgPSB0aGlzLm1f
bG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJCXRYID0gKHRNYXQu
Y29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlkpOw0KCQlyMlkgPSAodE1hdC5jb2wxLnkg
KiByMlggKyB0TWF0LmNvbDIueSAqIHIyWSk7DQoJCXIyWCA9IHRYOw0KCQlwMlggPSBiQi5tX3N3
ZWVwLmMueCArIHIyWDsNCgkJcDJZID0gYkIubV9zd2VlcC5jLnkgKyByMlk7DQoJCXRoaXMubV91
Mi5TZXQocDJYIC0gczJYLCBwMlkgLSBzMlkpOw0KCQlsZW5ndGgyID0gdGhpcy5tX3UyLkxlbmd0
aCgpOw0KCQlpZiAobGVuZ3RoMiA+IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNs
b3ApIHsNCgkJCXRoaXMubV91Mi54ICo9IDEuMCAvIGxlbmd0aDI7DQoJCQl0aGlzLm1fdTIueSAq
PSAxLjAgLyBsZW5ndGgyOw0KCQl9DQoJCWVsc2Ugew0KCQkJdGhpcy5tX3UyLlNldFplcm8oKTsN
CgkJfQ0KCQlDID0gdGhpcy5tX21heExlbmd0aDIgLSBsZW5ndGgyOw0KCQlsaW5lYXJFcnJvciA9
IE1hdGgubWF4KGxpbmVhckVycm9yLCAoLUMpKTsNCgkJQyA9IEJveDJELkNvbW1vbi5NYXRoLmIy
TWF0aC5DbGFtcChDICsgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgKC1C
b3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKSwgMC4wKTsNCgkJ
aW1wdWxzZSA9ICgtdGhpcy5tX2xpbWl0TWFzczIgKiBDKTsNCgkJcDJYID0gKC1pbXB1bHNlICog
dGhpcy5tX3UyLngpOw0KCQlwMlkgPSAoLWltcHVsc2UgKiB0aGlzLm1fdTIueSk7DQoJCWJCLm1f
c3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAqIHAyWDsNCgkJYkIubV9zd2VlcC5jLnkgKz0gYkIu
bV9pbnZNYXNzICogcDJZOw0KCQliQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogKHIyWCAqIHAy
WSAtIHIyWSAqIHAyWCk7DQoJCWJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJfQ0KCXJldHVy
biBsaW5lYXJFcnJvciA8IEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7DQp9
Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3Ro
ID0gMS4wOw0KLyoqDQogKiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJKb2ludERlZn0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5
Sm9pbnREZWYgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERl
Zi5jYWxsKHRoaXMpOw0KCXRoaXMuZ3JvdW5kQW5jaG9yQSA9IEJveDJELkNvbW1vbi5NYXRoLmIy
VmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5ncm91bmRBbmNob3JCID0gQm94MkQuQ29tbW9uLk1hdGgu
YjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLmxvY2FsQW5jaG9yQSA9IEJveDJELkNvbW1vbi5NYXRo
LmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5sb2NhbEFuY2hvckIgPSBCb3gyRC5Db21tb24uTWF0
aC5iMlZlYzIuR2V0KDAsIDApOw0KCXRoaXMudHlwZSA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5i
MkpvaW50LmVfcHVsbGV5Sm9pbnQ7DQoJdGhpcy5ncm91bmRBbmNob3JBLlNldCgoLTEuMCksIDEu
MCk7DQoJdGhpcy5ncm91bmRBbmNob3JCLlNldCgxLjAsIDEuMCk7DQoJdGhpcy5sb2NhbEFuY2hv
ckEuU2V0KCgtMS4wKSwgMC4wKTsNCgl0aGlzLmxvY2FsQW5jaG9yQi5TZXQoMS4wLCAwLjApOw0K
CXRoaXMubGVuZ3RoQSA9IDAuMDsNCgl0aGlzLm1heExlbmd0aEEgPSAwLjA7DQoJdGhpcy5sZW5n
dGhCID0gMC4wOw0KCXRoaXMubWF4TGVuZ3RoQiA9IDAuMDsNCgl0aGlzLnJhdGlvID0gMS4wOw0K
CXRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IHRydWU7DQp9Ow0KYzJpbmhlcml0KEJveDJELkR5bmFt
aWNzLkpvaW50cy5iMlB1bGxleUpvaW50RGVmLCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2lu
dERlZik7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUu
SW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgZ2FBLCBnYUIsIGFuY2hvckEsIGFuY2hvckIs
IHIpIHsNCglpZiAociA9PT0gdW5kZWZpbmVkKSByID0gMDsNCgl0aGlzLmJvZHlBID0gYkE7DQoJ
dGhpcy5ib2R5QiA9IGJCOw0KCXRoaXMuZ3JvdW5kQW5jaG9yQS5TZXRWKGdhQSk7DQoJdGhpcy5n
cm91bmRBbmNob3JCLlNldFYoZ2FCKTsNCgl0aGlzLmxvY2FsQW5jaG9yQSA9IHRoaXMuYm9keUEu
R2V0TG9jYWxQb2ludChhbmNob3JBKTsNCgl0aGlzLmxvY2FsQW5jaG9yQiA9IHRoaXMuYm9keUIu
R2V0TG9jYWxQb2ludChhbmNob3JCKTsNCgl2YXIgZDFYID0gYW5jaG9yQS54IC0gZ2FBLng7DQoJ
dmFyIGQxWSA9IGFuY2hvckEueSAtIGdhQS55Ow0KCXRoaXMubGVuZ3RoQSA9IE1hdGguc3FydChk
MVggKiBkMVggKyBkMVkgKiBkMVkpOw0KCXZhciBkMlggPSBhbmNob3JCLnggLSBnYUIueDsNCgl2
YXIgZDJZID0gYW5jaG9yQi55IC0gZ2FCLnk7DQoJdGhpcy5sZW5ndGhCID0gTWF0aC5zcXJ0KGQy
WCAqIGQyWCArIGQyWSAqIGQyWSk7DQoJdGhpcy5yYXRpbyA9IHI7DQoJdmFyIEMgPSB0aGlzLmxl
bmd0aEEgKyB0aGlzLnJhdGlvICogdGhpcy5sZW5ndGhCOw0KCXRoaXMubWF4TGVuZ3RoQSA9IEMg
LSB0aGlzLnJhdGlvICogQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnQuYjJfbWlu
UHVsbGV5TGVuZ3RoOw0KCXRoaXMubWF4TGVuZ3RoQiA9IChDIC0gQm94MkQuRHluYW1pY3MuSm9p
bnRzLmIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoKSAvIHRoaXMucmF0aW87DQp9Ow0K
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLkNyZWF0ZSA9
IGZ1bmN0aW9uKCkgew0KCXJldHVybiBuZXcgQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5
Sm9pbnQodGhpcyk7DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJSZXZvbHV0ZUpvaW50RGVmfSBkZWYNCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVuZHMge0Jv
eDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50fQ0KICovDQpCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJSZXZvbHV0ZUpvaW50ID0gZnVuY3Rpb24oZGVmKSB7DQoJQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIySm9pbnQuY2FsbCh0aGlzLCBkZWYpOw0KCXRoaXMuSyA9IG5ldyBCb3gyRC5Db21tb24uTWF0
aC5iMk1hdDIyKCk7DQoJdGhpcy5LMSA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyKCk7
DQoJdGhpcy5LMiA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyKCk7DQoJdGhpcy5LMyA9
IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyKCk7DQoJdGhpcy5pbXB1bHNlMyA9IG5ldyBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzMoMCwgMCwgMCk7DQoJdGhpcy5pbXB1bHNlMiA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQoJdGhpcy5yZWR1Y2VkID0gQm94MkQuQ29t
bW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IxID0gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IyID0gQm94
MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAwKTsNCgl0aGlzLm1faW1wdWxzZSA9IG5ldyBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzMoMCwgMCwgMCk7DQoJdGhpcy5tX21hc3MgPSBuZXcgQm94
MkQuQ29tbW9uLk1hdGguYjJNYXQzMygpOw0KCXRoaXMubV9sb2NhbEFuY2hvcjEuU2V0VihkZWYu
bG9jYWxBbmNob3JBKTsNCgl0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYoZGVmLmxvY2FsQW5jaG9y
Qik7DQoJdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlOw0KCXRoaXMu
bV9pbXB1bHNlLlNldFplcm8oKTsNCgl0aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wOw0KCXRoaXMu
bV9sb3dlckFuZ2xlID0gZGVmLmxvd2VyQW5nbGU7DQoJdGhpcy5tX3VwcGVyQW5nbGUgPSBkZWYu
dXBwZXJBbmdsZTsNCgl0aGlzLm1fbWF4TW90b3JUb3JxdWUgPSBkZWYubWF4TW90b3JUb3JxdWU7
DQoJdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDsNCgl0aGlzLm1fZW5hYmxlTGlt
aXQgPSBkZWYuZW5hYmxlTGltaXQ7DQoJdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1v
dG9yOw0KCXRoaXMubV9saW1pdFN0YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9pbmFjdGl2ZUxpbWl0Ow0KfTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJS
ZXZvbHV0ZUpvaW50LCBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludCk7DQpCb3gyRC5EeW5h
bWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rp
b24oKSB7DQoJcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFu
Y2hvcjEpOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQucHJvdG90
eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdv
cmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRz
LmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGlu
dl9kdCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4g
Qm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldChpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS54LCBp
bnZfZHQgKiB0aGlzLm1faW1wdWxzZS55KTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJS
ZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9k
dCkgew0KCWlmIChpbnZfZHQgPT09IHVuZGVmaW5lZCkgaW52X2R0ID0gMDsNCglyZXR1cm4gaW52
X2R0ICogdGhpcy5tX2ltcHVsc2UuejsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZv
bHV0ZUpvaW50LnByb3RvdHlwZS5HZXRKb2ludEFuZ2xlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJu
IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmEgLSB0aGlzLm1fYm9keUEubV9zd2VlcC5hIC0gdGhpcy5t
X3JlZmVyZW5jZUFuZ2xlOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9p
bnQucHJvdG90eXBlLkdldEpvaW50U3BlZWQgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5t
X2JvZHlCLm1fYW5ndWxhclZlbG9jaXR5IC0gdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5
Ow0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLklz
TGltaXRFbmFibGVkID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMubV9lbmFibGVMaW1pdDsN
Cn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5FbmFi
bGVMaW1pdCA9IGZ1bmN0aW9uKGZsYWcpIHsNCgl0aGlzLm1fZW5hYmxlTGltaXQgPSBmbGFnOw0K
fTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldExv
d2VyTGltaXQgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2xvd2VyQW5nbGU7DQp9Ow0K
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0VXBwZXJM
aW1pdCA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fdXBwZXJBbmdsZTsNCn07DQpCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5TZXRMaW1pdHMgPSBm
dW5jdGlvbihsb3dlciwgdXBwZXIpIHsNCglpZiAobG93ZXIgPT09IHVuZGVmaW5lZCkgbG93ZXIg
PSAwOw0KCWlmICh1cHBlciA9PT0gdW5kZWZpbmVkKSB1cHBlciA9IDA7DQoJdGhpcy5tX2xvd2Vy
QW5nbGUgPSBsb3dlcjsNCgl0aGlzLm1fdXBwZXJBbmdsZSA9IHVwcGVyOw0KfTsNCkJveDJELkR5
bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLklzTW90b3JFbmFibGVkID0g
ZnVuY3Rpb24oKSB7DQoJdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpOw0KCXRoaXMubV9ib2R5
Qi5TZXRBd2FrZSh0cnVlKTsNCglyZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yOw0KfTsNCkJveDJE
LkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkVuYWJsZU1vdG9yID0g
ZnVuY3Rpb24oZmxhZykgew0KCXRoaXMubV9lbmFibGVNb3RvciA9IGZsYWc7DQp9Ow0KQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU2V0TW90b3JTcGVlZCA9
IGZ1bmN0aW9uKHNwZWVkKSB7DQoJaWYgKHNwZWVkID09PSB1bmRlZmluZWQpIHNwZWVkID0gMDsN
Cgl0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7DQoJdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRy
dWUpOw0KCXRoaXMubV9tb3RvclNwZWVkID0gc3BlZWQ7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9p
bnRzLmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkg
ew0KCXJldHVybiB0aGlzLm1fbW90b3JTcGVlZDsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5TZXRNYXhNb3RvclRvcnF1ZSA9IGZ1bmN0aW9uKHRv
cnF1ZSkgew0KCWlmICh0b3JxdWUgPT09IHVuZGVmaW5lZCkgdG9ycXVlID0gMDsNCgl0aGlzLm1f
bWF4TW90b3JUb3JxdWUgPSB0b3JxdWU7DQp9Ow0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2
b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0TW90b3JUb3JxdWUgPSBmdW5jdGlvbigpIHsNCglyZXR1
cm4gdGhpcy5tX21heE1vdG9yVG9ycXVlOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJl
dm9sdXRlSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24o
c3RlcCkgew0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7
DQoJdmFyIHRNYXQ7DQoJdmFyIHRYID0gMDsNCgl0TWF0ID0gYkEubV94Zi5SOw0KCXZhciByMVgg
PSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7DQoJdmFy
IHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTsN
Cgl0WCA9ICh0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZKTsNCglyMVkgPSAo
dE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWSk7DQoJcjFYID0gdFg7DQoJdE1h
dCA9IGJCLm1feGYuUjsNCgl2YXIgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9z
d2VlcC5sb2NhbENlbnRlci54Ow0KCXZhciByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBi
Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdFggPSAodE1hdC5jb2wxLnggKiByMlggKyB0TWF0
LmNvbDIueCAqIHIyWSk7DQoJcjJZID0gKHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkg
KiByMlkpOw0KCXIyWCA9IHRYOw0KCXZhciBtMSA9IGJBLm1faW52TWFzczsNCgl2YXIgbTIgPSBi
Qi5tX2ludk1hc3M7DQoJdmFyIGkxID0gYkEubV9pbnZJOw0KCXZhciBpMiA9IGJCLm1faW52STsN
Cgl0aGlzLm1fbWFzcy5jb2wxLnggPSBtMSArIG0yICsgcjFZICogcjFZICogaTEgKyByMlkgKiBy
MlkgKiBpMjsNCgl0aGlzLm1fbWFzcy5jb2wyLnggPSAoLXIxWSAqIHIxWCAqIGkxKSAtIHIyWSAq
IHIyWCAqIGkyOw0KCXRoaXMubV9tYXNzLmNvbDMueCA9ICgtcjFZICogaTEpIC0gcjJZICogaTI7
DQoJdGhpcy5tX21hc3MuY29sMS55ID0gdGhpcy5tX21hc3MuY29sMi54Ow0KCXRoaXMubV9tYXNz
LmNvbDIueSA9IG0xICsgbTIgKyByMVggKiByMVggKiBpMSArIHIyWCAqIHIyWCAqIGkyOw0KCXRo
aXMubV9tYXNzLmNvbDMueSA9IHIxWCAqIGkxICsgcjJYICogaTI7DQoJdGhpcy5tX21hc3MuY29s
MS56ID0gdGhpcy5tX21hc3MuY29sMy54Ow0KCXRoaXMubV9tYXNzLmNvbDIueiA9IHRoaXMubV9t
YXNzLmNvbDMueTsNCgl0aGlzLm1fbWFzcy5jb2wzLnogPSBpMSArIGkyOw0KCXRoaXMubV9tb3Rv
ck1hc3MgPSAxLjAgLyAoaTEgKyBpMik7DQoJaWYgKCF0aGlzLm1fZW5hYmxlTW90b3IpIHsNCgkJ
dGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDsNCgl9DQoJaWYgKHRoaXMubV9lbmFibGVMaW1pdCkg
ew0KCQl2YXIgam9pbnRBbmdsZSA9IGJCLm1fc3dlZXAuYSAtIGJBLm1fc3dlZXAuYSAtIHRoaXMu
bV9yZWZlcmVuY2VBbmdsZTsNCgkJaWYgKE1hdGguYWJzKHRoaXMubV91cHBlckFuZ2xlIC0gdGhp
cy5tX2xvd2VyQW5nbGUpIDwgMi4wICogQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfYW5ndWxh
clNsb3ApIHsNCgkJCXRoaXMubV9saW1pdFN0YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIy
Sm9pbnQuZV9lcXVhbExpbWl0czsNCgkJfSBlbHNlIGlmIChqb2ludEFuZ2xlIDw9IHRoaXMubV9s
b3dlckFuZ2xlKSB7DQoJCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT0gQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnQuZV9hdExvd2VyTGltaXQpIHsNCgkJCQl0aGlzLm1faW1wdWxzZS56ID0g
MC4wOw0KCQkJfQ0KCQkJdGhpcy5tX2xpbWl0U3RhdGUgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJKb2ludC5lX2F0TG93ZXJMaW1pdDsNCgkJfSBlbHNlIGlmIChqb2ludEFuZ2xlID49IHRoaXMu
bV91cHBlckFuZ2xlKSB7DQoJCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT0gQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHsNCgkJCQl0aGlzLm1faW1wdWxzZS56
ID0gMC4wOw0KCQkJfQ0KCQkJdGhpcy5tX2xpbWl0U3RhdGUgPSBCb3gyRC5EeW5hbWljcy5Kb2lu
dHMuYjJKb2ludC5lX2F0VXBwZXJMaW1pdDsNCgkJfSBlbHNlIHsNCgkJCXRoaXMubV9saW1pdFN0
YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0Ow0KCQkJ
dGhpcy5tX2ltcHVsc2UueiA9IDAuMDsNCgkJfQ0KCX0gZWxzZSB7DQoJCXRoaXMubV9saW1pdFN0
YXRlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0Ow0KCX0N
CglpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHsNCgkJdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0
UmF0aW87DQoJCXRoaXMubV9pbXB1bHNlLnkgKj0gc3RlcC5kdFJhdGlvOw0KCQl0aGlzLm1fbW90
b3JJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbzsNCgkJdmFyIFBYID0gdGhpcy5tX2ltcHVsc2UueDsN
CgkJdmFyIFBZID0gdGhpcy5tX2ltcHVsc2UueTsNCgkJYkEubV9saW5lYXJWZWxvY2l0eS54IC09
IG0xICogUFg7DQoJCWJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSBtMSAqIFBZOw0KCQliQS5tX2Fu
Z3VsYXJWZWxvY2l0eSAtPSBpMSAqICgocjFYICogUFkgLSByMVkgKiBQWCkgKyB0aGlzLm1fbW90
b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2Uueik7DQoJCWJCLm1fbGluZWFyVmVsb2NpdHkueCAr
PSBtMiAqIFBYOw0KCQliQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gbTIgKiBQWTsNCgkJYkIubV9h
bmd1bGFyVmVsb2NpdHkgKz0gaTIgKiAoKHIyWCAqIFBZIC0gcjJZICogUFgpICsgdGhpcy5tX21v
dG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopOw0KCX0gZWxzZSB7DQoJCXRoaXMubV9pbXB1
bHNlLlNldFplcm8oKTsNCgkJdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDsNCgl9DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0
eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkgew0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsN
Cgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7DQoJdmFyIHRNYXQ7DQoJdmFyIHRYID0gMDsNCgl2YXIg
bmV3SW1wdWxzZSA9IDA7DQoJdmFyIHIxWCA9IDA7DQoJdmFyIHIxWSA9IDA7DQoJdmFyIHIyWCA9
IDA7DQoJdmFyIHIyWSA9IDA7DQoJdmFyIHYxID0gYkEubV9saW5lYXJWZWxvY2l0eTsNCgl2YXIg
dzEgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTsNCgl2YXIgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5
Ow0KCXZhciB3MiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5Ow0KCXZhciBtMSA9IGJBLm1faW52TWFz
czsNCgl2YXIgbTIgPSBiQi5tX2ludk1hc3M7DQoJdmFyIGkxID0gYkEubV9pbnZJOw0KCXZhciBp
MiA9IGJCLm1faW52STsNCglpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmIHRoaXMubV9saW1pdFN0
YXRlICE9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmVfZXF1YWxMaW1pdHMpIHsNCgkJ
dmFyIENkb3QgPSB3MiAtIHcxIC0gdGhpcy5tX21vdG9yU3BlZWQ7DQoJCXZhciBpbXB1bHNlID0g
dGhpcy5tX21vdG9yTWFzcyAqICgoLUNkb3QpKTsNCgkJdmFyIG9sZEltcHVsc2UgPSB0aGlzLm1f
bW90b3JJbXB1bHNlOw0KCQl2YXIgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4TW90
b3JUb3JxdWU7DQoJCXRoaXMubV9tb3RvckltcHVsc2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1h
dGguQ2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsICgtbWF4SW1wdWxzZSksIG1h
eEltcHVsc2UpOw0KCQlpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7
DQoJCXcxIC09IGkxICogaW1wdWxzZTsNCgkJdzIgKz0gaTIgKiBpbXB1bHNlOw0KCX0NCglpZiAo
dGhpcy5tX2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9IEJveDJELkR5bmFtaWNz
LkpvaW50cy5iMkpvaW50LmVfaW5hY3RpdmVMaW1pdCkgew0KCQl0TWF0ID0gYkEubV94Zi5SOw0K
CQlyMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7
DQoJCXIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIu
eTsNCgkJdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWSk7DQoJCXIx
WSA9ICh0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsNCgkJcjFYID0gdFg7
DQoJCXRNYXQgPSBiQi5tX3hmLlI7DQoJCXIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJC
Lm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgkJcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0g
YkIubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCQl0WCA9ICh0TWF0LmNvbDEueCAqIHIyWCArIHRN
YXQuY29sMi54ICogcjJZKTsNCgkJcjJZID0gKHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wy
LnkgKiByMlkpOw0KCQlyMlggPSB0WDsNCgkJdmFyIENkb3QxWCA9IHYyLnggKyAoKC13MiAqIHIy
WSkpIC0gdjEueCAtICgoLXcxICogcjFZKSk7DQoJCXZhciBDZG90MVkgPSB2Mi55ICsgKHcyICog
cjJYKSAtIHYxLnkgLSAodzEgKiByMVgpOw0KCQl2YXIgQ2RvdDIgPSB3MiAtIHcxOw0KCQl0aGlz
Lm1fbWFzcy5Tb2x2ZTMzKHRoaXMuaW1wdWxzZTMsICgtQ2RvdDFYKSwgKC1DZG90MVkpLCAoLUNk
b3QyKSk7DQoJCWlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PSBCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJKb2ludC5lX2VxdWFsTGltaXRzKSB7DQoJCQl0aGlzLm1faW1wdWxzZS5BZGQodGhpcy5pbXB1
bHNlMyk7DQoJCX0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gQm94MkQuRHluYW1pY3Mu
Sm9pbnRzLmIySm9pbnQuZV9hdExvd2VyTGltaXQpIHsNCgkJCW5ld0ltcHVsc2UgPSB0aGlzLm1f
aW1wdWxzZS56ICsgdGhpcy5pbXB1bHNlMy56Ow0KCQkJaWYgKG5ld0ltcHVsc2UgPCAwLjApIHsN
CgkJCQl0aGlzLm1fbWFzcy5Tb2x2ZTIyKHRoaXMucmVkdWNlZCwgKC1DZG90MVgpLCAoLUNkb3Qx
WSkpOw0KCQkJCXRoaXMuaW1wdWxzZTMueCA9IHRoaXMucmVkdWNlZC54Ow0KCQkJCXRoaXMuaW1w
dWxzZTMueSA9IHRoaXMucmVkdWNlZC55Ow0KCQkJCXRoaXMuaW1wdWxzZTMueiA9ICgtdGhpcy5t
X2ltcHVsc2Uueik7DQoJCQkJdGhpcy5tX2ltcHVsc2UueCArPSB0aGlzLnJlZHVjZWQueDsNCgkJ
CQl0aGlzLm1faW1wdWxzZS55ICs9IHRoaXMucmVkdWNlZC55Ow0KCQkJCXRoaXMubV9pbXB1bHNl
LnogPSAwLjA7DQoJCQl9DQoJCX0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gQm94MkQu
RHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHsNCgkJCW5ld0ltcHVsc2Ug
PSB0aGlzLm1faW1wdWxzZS56ICsgdGhpcy5pbXB1bHNlMy56Ow0KCQkJaWYgKG5ld0ltcHVsc2Ug
PiAwLjApIHsNCgkJCQl0aGlzLm1fbWFzcy5Tb2x2ZTIyKHRoaXMucmVkdWNlZCwgKC1DZG90MVgp
LCAoLUNkb3QxWSkpOw0KCQkJCXRoaXMuaW1wdWxzZTMueCA9IHRoaXMucmVkdWNlZC54Ow0KCQkJ
CXRoaXMuaW1wdWxzZTMueSA9IHRoaXMucmVkdWNlZC55Ow0KCQkJCXRoaXMuaW1wdWxzZTMueiA9
ICgtdGhpcy5tX2ltcHVsc2Uueik7DQoJCQkJdGhpcy5tX2ltcHVsc2UueCArPSB0aGlzLnJlZHVj
ZWQueDsNCgkJCQl0aGlzLm1faW1wdWxzZS55ICs9IHRoaXMucmVkdWNlZC55Ow0KCQkJCXRoaXMu
bV9pbXB1bHNlLnogPSAwLjA7DQoJCQl9DQoJCX0NCgkJdjEueCAtPSBtMSAqIHRoaXMuaW1wdWxz
ZTMueDsNCgkJdjEueSAtPSBtMSAqIHRoaXMuaW1wdWxzZTMueTsNCgkJdzEgLT0gaTEgKiAocjFY
ICogdGhpcy5pbXB1bHNlMy55IC0gcjFZICogdGhpcy5pbXB1bHNlMy54ICsgdGhpcy5pbXB1bHNl
My56KTsNCgkJdjIueCArPSBtMiAqIHRoaXMuaW1wdWxzZTMueDsNCgkJdjIueSArPSBtMiAqIHRo
aXMuaW1wdWxzZTMueTsNCgkJdzIgKz0gaTIgKiAocjJYICogdGhpcy5pbXB1bHNlMy55IC0gcjJZ
ICogdGhpcy5pbXB1bHNlMy54ICsgdGhpcy5pbXB1bHNlMy56KTsNCgl9IGVsc2Ugew0KCQl0TWF0
ID0gYkEubV94Zi5SOw0KCQlyMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVw
LmxvY2FsQ2VudGVyLng7DQoJCXIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dl
ZXAubG9jYWxDZW50ZXIueTsNCgkJdFggPSAodE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIu
eCAqIHIxWSk7DQoJCXIxWSA9ICh0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZ
KTsNCgkJcjFYID0gdFg7DQoJCXRNYXQgPSBiQi5tX3hmLlI7DQoJCXIyWCA9IHRoaXMubV9sb2Nh
bEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgkJcjJZID0gdGhpcy5tX2xv
Y2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCQl0WCA9ICh0TWF0LmNv
bDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZKTsNCgkJcjJZID0gKHRNYXQuY29sMS55ICog
cjJYICsgdE1hdC5jb2wyLnkgKiByMlkpOw0KCQlyMlggPSB0WDsNCgkJdmFyIENkb3RYID0gdjIu
eCArICgoLXcyICogcjJZKSkgLSB2MS54IC0gKCgtdzEgKiByMVkpKTsNCgkJdmFyIENkb3RZID0g
djIueSArICh3MiAqIHIyWCkgLSB2MS55IC0gKHcxICogcjFYKTsNCgkJdGhpcy5tX21hc3MuU29s
dmUyMih0aGlzLmltcHVsc2UyLCAoLUNkb3RYKSwgKC1DZG90WSkpOw0KCQl0aGlzLm1faW1wdWxz
ZS54ICs9IHRoaXMuaW1wdWxzZTIueDsNCgkJdGhpcy5tX2ltcHVsc2UueSArPSB0aGlzLmltcHVs
c2UyLnk7DQoJCXYxLnggLT0gbTEgKiB0aGlzLmltcHVsc2UyLng7DQoJCXYxLnkgLT0gbTEgKiB0
aGlzLmltcHVsc2UyLnk7DQoJCXcxIC09IGkxICogKHIxWCAqIHRoaXMuaW1wdWxzZTIueSAtIHIx
WSAqIHRoaXMuaW1wdWxzZTIueCk7DQoJCXYyLnggKz0gbTIgKiB0aGlzLmltcHVsc2UyLng7DQoJ
CXYyLnkgKz0gbTIgKiB0aGlzLmltcHVsc2UyLnk7DQoJCXcyICs9IGkyICogKHIyWCAqIHRoaXMu
aW1wdWxzZTIueSAtIHIyWSAqIHRoaXMuaW1wdWxzZTIueCk7DQoJfQ0KCWJBLm1fbGluZWFyVmVs
b2NpdHkuU2V0Vih2MSk7DQoJYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3MTsNCgliQi5tX2xpbmVh
clZlbG9jaXR5LlNldFYodjIpOw0KCWJCLm1fYW5ndWxhclZlbG9jaXR5ID0gdzI7DQp9Ow0KQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlv
bkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7DQoJaWYgKGJhdW1nYXJ0ZSA9PT0g
dW5kZWZpbmVkKSBiYXVtZ2FydGUgPSAwOw0KCXZhciBvbGRMaW1pdEltcHVsc2UgPSAwOw0KCXZh
ciBDID0gMDsNCgl2YXIgdE1hdDsNCgl2YXIgYkEgPSB0aGlzLm1fYm9keUE7DQoJdmFyIGJCID0g
dGhpcy5tX2JvZHlCOw0KCXZhciBhbmd1bGFyRXJyb3IgPSAwLjA7DQoJdmFyIHBvc2l0aW9uRXJy
b3IgPSAwLjA7DQoJdmFyIHRYID0gMDsNCgl2YXIgaW1wdWxzZVggPSAwOw0KCXZhciBpbXB1bHNl
WSA9IDA7DQoJaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPSBC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX2luYWN0aXZlTGltaXQpIHsNCgkJdmFyIGFu
Z2xlID0gYkIubV9zd2VlcC5hIC0gYkEubV9zd2VlcC5hIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xl
Ow0KCQl2YXIgbGltaXRJbXB1bHNlID0gMC4wOw0KCQlpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0g
Qm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV9lcXVhbExpbWl0cykgew0KCQkJQyA9IEJv
eDJELkNvbW1vbi5NYXRoLmIyTWF0aC5DbGFtcChhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlLCAo
LUJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX21heEFuZ3VsYXJDb3JyZWN0aW9uKSwgQm94MkQu
Q29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24pOw0KCQkJbGltaXRJbXB1
bHNlID0gKC10aGlzLm1fbW90b3JNYXNzICogQyk7DQoJCQlhbmd1bGFyRXJyb3IgPSBNYXRoLmFi
cyhDKTsNCgkJfSBlbHNlIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PSBCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJKb2ludC5lX2F0TG93ZXJMaW1pdCkgew0KCQkJQyA9IGFuZ2xlIC0gdGhpcy5tX2xv
d2VyQW5nbGU7DQoJCQlhbmd1bGFyRXJyb3IgPSAoLUMpOw0KCQkJQyA9IEJveDJELkNvbW1vbi5N
YXRoLmIyTWF0aC5DbGFtcChDICsgQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfYW5ndWxhclNs
b3AsICgtQm94MkQuQ29tbW9uLmIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24pLCAw
LjApOw0KCQkJbGltaXRJbXB1bHNlID0gKC10aGlzLm1fbW90b3JNYXNzICogQyk7DQoJCX0gZWxz
ZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQu
ZV9hdFVwcGVyTGltaXQpIHsNCgkJCUMgPSBhbmdsZSAtIHRoaXMubV91cHBlckFuZ2xlOw0KCQkJ
YW5ndWxhckVycm9yID0gQzsNCgkJCUMgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGguQ2xhbXAo
QyAtIEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2FuZ3VsYXJTbG9wLCAwLjAsIEJveDJELkNv
bW1vbi5iMlNldHRpbmdzLmIyX21heEFuZ3VsYXJDb3JyZWN0aW9uKTsNCgkJCWxpbWl0SW1wdWxz
ZSA9ICgtdGhpcy5tX21vdG9yTWFzcyAqIEMpOw0KCQl9DQoJCWJBLm1fc3dlZXAuYSAtPSBiQS5t
X2ludkkgKiBsaW1pdEltcHVsc2U7DQoJCWJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiBsaW1p
dEltcHVsc2U7DQoJCWJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7DQoJCWJCLlN5bmNocm9uaXpl
VHJhbnNmb3JtKCk7DQoJfQ0KCXRNYXQgPSBiQS5tX3hmLlI7DQoJdmFyIHIxWCA9IHRoaXMubV9s
b2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2YXIgcjFZID0gdGhp
cy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXRYID0gKHRN
YXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVkpOw0KCXIxWSA9ICh0TWF0LmNvbDEu
eSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZKTsNCglyMVggPSB0WDsNCgl0TWF0ID0gYkIubV94
Zi5SOw0KCXZhciByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2Fs
Q2VudGVyLng7DQoJdmFyIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAu
bG9jYWxDZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICog
cjJZKTsNCglyMlkgPSAodE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWSk7DQoJ
cjJYID0gdFg7DQoJdmFyIENYID0gYkIubV9zd2VlcC5jLnggKyByMlggLSBiQS5tX3N3ZWVwLmMu
eCAtIHIxWDsNCgl2YXIgQ1kgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55
IC0gcjFZOw0KCXZhciBDTGVuZ3RoU3F1YXJlZCA9IENYICogQ1ggKyBDWSAqIENZOw0KCXZhciBD
TGVuZ3RoID0gTWF0aC5zcXJ0KENMZW5ndGhTcXVhcmVkKTsNCglwb3NpdGlvbkVycm9yID0gQ0xl
bmd0aDsNCgl2YXIgaW52TWFzczEgPSBiQS5tX2ludk1hc3M7DQoJdmFyIGludk1hc3MyID0gYkIu
bV9pbnZNYXNzOw0KCXZhciBpbnZJMSA9IGJBLm1faW52STsNCgl2YXIgaW52STIgPSBiQi5tX2lu
dkk7DQoJdmFyIGtfYWxsb3dlZFN0cmV0Y2ggPSAxMC4wICogQm94MkQuQ29tbW9uLmIyU2V0dGlu
Z3MuYjJfbGluZWFyU2xvcDsNCglpZiAoQ0xlbmd0aFNxdWFyZWQgPiBrX2FsbG93ZWRTdHJldGNo
ICoga19hbGxvd2VkU3RyZXRjaCkgew0KCQl2YXIgdVggPSBDWCAvIENMZW5ndGg7DQoJCXZhciB1
WSA9IENZIC8gQ0xlbmd0aDsNCgkJdmFyIGsgPSBpbnZNYXNzMSArIGludk1hc3MyOw0KCQl2YXIg
bSA9IDEuMCAvIGs7DQoJCWltcHVsc2VYID0gbSAqICgoLUNYKSk7DQoJCWltcHVsc2VZID0gbSAq
ICgoLUNZKSk7DQoJCXZhciBrX2JldGEgPSAwLjU7DQoJCWJBLm1fc3dlZXAuYy54IC09IGtfYmV0
YSAqIGludk1hc3MxICogaW1wdWxzZVg7DQoJCWJBLm1fc3dlZXAuYy55IC09IGtfYmV0YSAqIGlu
dk1hc3MxICogaW1wdWxzZVk7DQoJCWJCLm1fc3dlZXAuYy54ICs9IGtfYmV0YSAqIGludk1hc3My
ICogaW1wdWxzZVg7DQoJCWJCLm1fc3dlZXAuYy55ICs9IGtfYmV0YSAqIGludk1hc3MyICogaW1w
dWxzZVk7DQoJCUNYID0gYkIubV9zd2VlcC5jLnggKyByMlggLSBiQS5tX3N3ZWVwLmMueCAtIHIx
WDsNCgkJQ1kgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZOw0K
CX0NCgl0aGlzLksxLmNvbDEueCA9IGludk1hc3MxICsgaW52TWFzczI7DQoJdGhpcy5LMS5jb2wy
LnggPSAwLjA7DQoJdGhpcy5LMS5jb2wxLnkgPSAwLjA7DQoJdGhpcy5LMS5jb2wyLnkgPSBpbnZN
YXNzMSArIGludk1hc3MyOw0KCXRoaXMuSzIuY29sMS54ID0gaW52STEgKiByMVkgKiByMVk7DQoJ
dGhpcy5LMi5jb2wyLnggPSAoLWludkkxICogcjFYICogcjFZKTsNCgl0aGlzLksyLmNvbDEueSA9
ICgtaW52STEgKiByMVggKiByMVkpOw0KCXRoaXMuSzIuY29sMi55ID0gaW52STEgKiByMVggKiBy
MVg7DQoJdGhpcy5LMy5jb2wxLnggPSBpbnZJMiAqIHIyWSAqIHIyWTsNCgl0aGlzLkszLmNvbDIu
eCA9ICgtaW52STIgKiByMlggKiByMlkpOw0KCXRoaXMuSzMuY29sMS55ID0gKC1pbnZJMiAqIHIy
WCAqIHIyWSk7DQoJdGhpcy5LMy5jb2wyLnkgPSBpbnZJMiAqIHIyWCAqIHIyWDsNCgl0aGlzLksu
U2V0TSh0aGlzLksxKTsNCgl0aGlzLksuQWRkTSh0aGlzLksyKTsNCgl0aGlzLksuQWRkTSh0aGlz
LkszKTsNCgl0aGlzLksuU29sdmUoQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2lu
dC50SW1wdWxzZSwgKC1DWCksICgtQ1kpKTsNCglpbXB1bHNlWCA9IEJveDJELkR5bmFtaWNzLkpv
aW50cy5iMlJldm9sdXRlSm9pbnQudEltcHVsc2UueDsNCglpbXB1bHNlWSA9IEJveDJELkR5bmFt
aWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQudEltcHVsc2UueTsNCgliQS5tX3N3ZWVwLmMueCAt
PSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlWDsNCgliQS5tX3N3ZWVwLmMueSAtPSBiQS5tX2ludk1h
c3MgKiBpbXB1bHNlWTsNCgliQS5tX3N3ZWVwLmEgLT0gYkEubV9pbnZJICogKHIxWCAqIGltcHVs
c2VZIC0gcjFZICogaW1wdWxzZVgpOw0KCWJCLm1fc3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAq
IGltcHVsc2VYOw0KCWJCLm1fc3dlZXAuYy55ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2VZOw0K
CWJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiAocjJYICogaW1wdWxzZVkgLSByMlkgKiBpbXB1
bHNlWCk7DQoJYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCgliQi5TeW5jaHJvbml6ZVRyYW5z
Zm9ybSgpOw0KCXJldHVybiBwb3NpdGlvbkVycm9yIDw9IEJveDJELkNvbW1vbi5iMlNldHRpbmdz
LmIyX2xpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IEJveDJELkNvbW1vbi5iMlNldHRpbmdz
LmIyX2FuZ3VsYXJTbG9wOw0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9p
bnQudEltcHVsc2UgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KLyoqDQog
KiBAY29uc3RydWN0b3INCiAqIEBleHRlbmRzIHtCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2lu
dERlZn0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludERlZiA9IGZ1
bmN0aW9uKCkgew0KCUJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmLmNhbGwodGhpcyk7
DQoJdGhpcy5sb2NhbEFuY2hvckEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDAp
Ow0KCXRoaXMubG9jYWxBbmNob3JCID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAw
KTsNCgl0aGlzLnR5cGUgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludC5lX3Jldm9sdXRl
Sm9pbnQ7DQoJdGhpcy5sb2NhbEFuY2hvckEuU2V0WmVybygpOw0KCXRoaXMubG9jYWxBbmNob3JC
LlNldFplcm8oKTsNCgl0aGlzLnJlZmVyZW5jZUFuZ2xlID0gMC4wOw0KCXRoaXMubG93ZXJBbmds
ZSA9IDAuMDsNCgl0aGlzLnVwcGVyQW5nbGUgPSAwLjA7DQoJdGhpcy5tYXhNb3RvclRvcnF1ZSA9
IDAuMDsNCgl0aGlzLm1vdG9yU3BlZWQgPSAwLjA7DQoJdGhpcy5lbmFibGVMaW1pdCA9IGZhbHNl
Ow0KCXRoaXMuZW5hYmxlTW90b3IgPSBmYWxzZTsNCn07DQpjMmluaGVyaXQoQm94MkQuRHluYW1p
Y3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludERlZiwgQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9p
bnREZWYpOw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5
cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yKSB7DQoJdGhpcy5ib2R5QSA9
IGJBOw0KCXRoaXMuYm9keUIgPSBiQjsNCgl0aGlzLmxvY2FsQW5jaG9yQSA9IHRoaXMuYm9keUEu
R2V0TG9jYWxQb2ludChhbmNob3IpOw0KCXRoaXMubG9jYWxBbmNob3JCID0gdGhpcy5ib2R5Qi5H
ZXRMb2NhbFBvaW50KGFuY2hvcik7DQoJdGhpcy5yZWZlcmVuY2VBbmdsZSA9IHRoaXMuYm9keUIu
R2V0QW5nbGUoKSAtIHRoaXMuYm9keUEuR2V0QW5nbGUoKTsNCn07DQpCb3gyRC5EeW5hbWljcy5K
b2ludHMuYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5DcmVhdGUgPSBmdW5jdGlvbigpIHsN
CglyZXR1cm4gbmV3IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnQodGhpcyk7
DQp9Ow0KLyoqDQogKiBAcGFyYW0geyFCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnRE
ZWZ9IGRlZg0KICogQGNvbnN0cnVjdG9yDQogKiBAZXh0ZW5kcyB7Qm94MkQuRHluYW1pY3MuSm9p
bnRzLmIySm9pbnR9DQogKi8NCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMldlbGRKb2ludCA9IGZ1
bmN0aW9uKGRlZikgew0KCUJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50LmNhbGwodGhpcywg
ZGVmKTsNCgl0aGlzLm1fbG9jYWxBbmNob3JBID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgwLCAwKTsNCgl0aGlzLm1fbG9jYWxBbmNob3JCID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
LkdldCgwLCAwKTsNCgl0aGlzLm1faW1wdWxzZSA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzMoMCwgMCwgMCk7DQoJdGhpcy5tX21hc3MgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGguYjJNYXQz
MygpOw0KCXRoaXMubV9sb2NhbEFuY2hvckEuU2V0VihkZWYubG9jYWxBbmNob3JBKTsNCgl0aGlz
Lm1fbG9jYWxBbmNob3JCLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7DQoJdGhpcy5tX3JlZmVyZW5j
ZUFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlOw0KfTsNCmMyaW5oZXJpdChCb3gyRC5EeW5hbWlj
cy5Kb2ludHMuYjJXZWxkSm9pbnQsIEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50KTsNCkJv
eDJELkR5bmFtaWNzLkpvaW50cy5iMldlbGRKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1
bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9j
YWxBbmNob3JBKTsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnQucHJvdG90
eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdv
cmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7DQp9Ow0KLyoqDQogKiBAcGFyYW0ge251bWJl
cn0gaW52X2R0DQogKiBAcmV0dXJuIHshQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyfQ0KICovDQpC
b3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9y
Y2UgPSBmdW5jdGlvbihpbnZfZHQpIHsNCglyZXR1cm4gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
LkdldChpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55
KTsNCn07DQovKioNCiAqIEBwYXJhbSB7bnVtYmVyfSBpbnZfZHQNCiAqIEByZXR1cm4ge251bWJl
cn0NCiAqLw0KQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50LnByb3RvdHlwZS5HZXRS
ZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkgew0KCXJldHVybiBpbnZfZHQgKiB0aGlz
Lm1faW1wdWxzZS56Ow0KfTsNCkJveDJELkR5bmFtaWNzLkpvaW50cy5iMldlbGRKb2ludC5wcm90
b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7DQoJdmFyIHRN
YXQ7DQoJdmFyIHRYID0gMDsNCgl2YXIgYkEgPSB0aGlzLm1fYm9keUE7DQoJdmFyIGJCID0gdGhp
cy5tX2JvZHlCOw0KCXRNYXQgPSBiQS5tX3hmLlI7DQoJdmFyIHJBWCA9IHRoaXMubV9sb2NhbEFu
Y2hvckEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDsNCgl2YXIgckFZID0gdGhpcy5tX2xv
Y2FsQW5jaG9yQS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55Ow0KCXRYID0gKHRNYXQuY29s
MS54ICogckFYICsgdE1hdC5jb2wyLnggKiByQVkpOw0KCXJBWSA9ICh0TWF0LmNvbDEueSAqIHJB
WCArIHRNYXQuY29sMi55ICogckFZKTsNCglyQVggPSB0WDsNCgl0TWF0ID0gYkIubV94Zi5SOw0K
CXZhciByQlggPSB0aGlzLm1fbG9jYWxBbmNob3JCLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVy
Lng7DQoJdmFyIHJCWSA9IHRoaXMubV9sb2NhbEFuY2hvckIueSAtIGJCLm1fc3dlZXAubG9jYWxD
ZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNvbDEueCAqIHJCWCArIHRNYXQuY29sMi54ICogckJZKTsN
CglyQlkgPSAodE1hdC5jb2wxLnkgKiByQlggKyB0TWF0LmNvbDIueSAqIHJCWSk7DQoJckJYID0g
dFg7DQoJdmFyIG1BID0gYkEubV9pbnZNYXNzOw0KCXZhciBtQiA9IGJCLm1faW52TWFzczsNCgl2
YXIgaUEgPSBiQS5tX2ludkk7DQoJdmFyIGlCID0gYkIubV9pbnZJOw0KCXRoaXMubV9tYXNzLmNv
bDEueCA9IG1BICsgbUIgKyByQVkgKiByQVkgKiBpQSArIHJCWSAqIHJCWSAqIGlCOw0KCXRoaXMu
bV9tYXNzLmNvbDIueCA9ICgtckFZICogckFYICogaUEpIC0gckJZICogckJYICogaUI7DQoJdGhp
cy5tX21hc3MuY29sMy54ID0gKC1yQVkgKiBpQSkgLSByQlkgKiBpQjsNCgl0aGlzLm1fbWFzcy5j
b2wxLnkgPSB0aGlzLm1fbWFzcy5jb2wyLng7DQoJdGhpcy5tX21hc3MuY29sMi55ID0gbUEgKyBt
QiArIHJBWCAqIHJBWCAqIGlBICsgckJYICogckJYICogaUI7DQoJdGhpcy5tX21hc3MuY29sMy55
ID0gckFYICogaUEgKyByQlggKiBpQjsNCgl0aGlzLm1fbWFzcy5jb2wxLnogPSB0aGlzLm1fbWFz
cy5jb2wzLng7DQoJdGhpcy5tX21hc3MuY29sMi56ID0gdGhpcy5tX21hc3MuY29sMy55Ow0KCXRo
aXMubV9tYXNzLmNvbDMueiA9IGlBICsgaUI7DQoJaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7DQoJ
CXRoaXMubV9pbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvOw0KCQl0aGlzLm1faW1wdWxzZS55ICo9
IHN0ZXAuZHRSYXRpbzsNCgkJdGhpcy5tX2ltcHVsc2UueiAqPSBzdGVwLmR0UmF0aW87DQoJCWJB
Lm1fbGluZWFyVmVsb2NpdHkueCAtPSBtQSAqIHRoaXMubV9pbXB1bHNlLng7DQoJCWJBLm1fbGlu
ZWFyVmVsb2NpdHkueSAtPSBtQSAqIHRoaXMubV9pbXB1bHNlLnk7DQoJCWJBLm1fYW5ndWxhclZl
bG9jaXR5IC09IGlBICogKHJBWCAqIHRoaXMubV9pbXB1bHNlLnkgLSByQVkgKiB0aGlzLm1faW1w
dWxzZS54ICsgdGhpcy5tX2ltcHVsc2Uueik7DQoJCWJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBt
QiAqIHRoaXMubV9pbXB1bHNlLng7DQoJCWJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBtQiAqIHRo
aXMubV9pbXB1bHNlLnk7DQoJCWJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGlCICogKHJCWCAqIHRo
aXMubV9pbXB1bHNlLnkgLSByQlkgKiB0aGlzLm1faW1wdWxzZS54ICsgdGhpcy5tX2ltcHVsc2Uu
eik7DQoJfSBlbHNlIHsNCgkJdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpOw0KCX0NCn07DQpCb3gy
RC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25z
dHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHsNCgl2YXIgdE1hdDsNCgl2YXIgdFggPSAwOw0KCXZh
ciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIgPSB0aGlzLm1fYm9keUI7DQoJdmFyIHZBID0g
YkEubV9saW5lYXJWZWxvY2l0eTsNCgl2YXIgd0EgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTsNCgl2
YXIgdkIgPSBiQi5tX2xpbmVhclZlbG9jaXR5Ow0KCXZhciB3QiA9IGJCLm1fYW5ndWxhclZlbG9j
aXR5Ow0KCXZhciBtQSA9IGJBLm1faW52TWFzczsNCgl2YXIgbUIgPSBiQi5tX2ludk1hc3M7DQoJ
dmFyIGlBID0gYkEubV9pbnZJOw0KCXZhciBpQiA9IGJCLm1faW52STsNCgl0TWF0ID0gYkEubV94
Zi5SOw0KCXZhciByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JBLnggLSBiQS5tX3N3ZWVwLmxvY2Fs
Q2VudGVyLng7DQoJdmFyIHJBWSA9IHRoaXMubV9sb2NhbEFuY2hvckEueSAtIGJBLm1fc3dlZXAu
bG9jYWxDZW50ZXIueTsNCgl0WCA9ICh0TWF0LmNvbDEueCAqIHJBWCArIHRNYXQuY29sMi54ICog
ckFZKTsNCglyQVkgPSAodE1hdC5jb2wxLnkgKiByQVggKyB0TWF0LmNvbDIueSAqIHJBWSk7DQoJ
ckFYID0gdFg7DQoJdE1hdCA9IGJCLm1feGYuUjsNCgl2YXIgckJYID0gdGhpcy5tX2xvY2FsQW5j
aG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCXZhciByQlkgPSB0aGlzLm1fbG9j
YWxBbmNob3JCLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdFggPSAodE1hdC5jb2wx
LnggKiByQlggKyB0TWF0LmNvbDIueCAqIHJCWSk7DQoJckJZID0gKHRNYXQuY29sMS55ICogckJY
ICsgdE1hdC5jb2wyLnkgKiByQlkpOw0KCXJCWCA9IHRYOw0KCXZhciBDZG90MVggPSB2Qi54IC0g
d0IgKiByQlkgLSB2QS54ICsgd0EgKiByQVk7DQoJdmFyIENkb3QxWSA9IHZCLnkgKyB3QiAqIHJC
WCAtIHZBLnkgLSB3QSAqIHJBWDsNCgl2YXIgQ2RvdDIgPSB3QiAtIHdBOw0KCXZhciBpbXB1bHNl
ID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMygwLCAwLCAwKTsNCgl0aGlzLm1fbWFzcy5T
b2x2ZTMzKGltcHVsc2UsICgtQ2RvdDFYKSwgKC1DZG90MVkpLCAoLUNkb3QyKSk7DQoJdGhpcy5t
X2ltcHVsc2UuQWRkKGltcHVsc2UpOw0KCXZBLnggLT0gbUEgKiBpbXB1bHNlLng7DQoJdkEueSAt
PSBtQSAqIGltcHVsc2UueTsNCgl3QSAtPSBpQSAqIChyQVggKiBpbXB1bHNlLnkgLSByQVkgKiBp
bXB1bHNlLnggKyBpbXB1bHNlLnopOw0KCXZCLnggKz0gbUIgKiBpbXB1bHNlLng7DQoJdkIueSAr
PSBtQiAqIGltcHVsc2UueTsNCgl3QiArPSBpQiAqIChyQlggKiBpbXB1bHNlLnkgLSByQlkgKiBp
bXB1bHNlLnggKyBpbXB1bHNlLnopOw0KCWJBLm1fYW5ndWxhclZlbG9jaXR5ID0gd0E7DQoJYkIu
bV9hbmd1bGFyVmVsb2NpdHkgPSB3QjsNCn07DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxk
Sm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1n
YXJ0ZSkgew0KCWlmIChiYXVtZ2FydGUgPT09IHVuZGVmaW5lZCkgYmF1bWdhcnRlID0gMDsNCgl2
YXIgdE1hdDsNCgl2YXIgdFggPSAwOw0KCXZhciBiQSA9IHRoaXMubV9ib2R5QTsNCgl2YXIgYkIg
PSB0aGlzLm1fYm9keUI7DQoJdE1hdCA9IGJBLm1feGYuUjsNCgl2YXIgckFYID0gdGhpcy5tX2xv
Y2FsQW5jaG9yQS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54Ow0KCXZhciByQVkgPSB0aGlz
Lm1fbG9jYWxBbmNob3JBLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7DQoJdFggPSAodE1h
dC5jb2wxLnggKiByQVggKyB0TWF0LmNvbDIueCAqIHJBWSk7DQoJckFZID0gKHRNYXQuY29sMS55
ICogckFYICsgdE1hdC5jb2wyLnkgKiByQVkpOw0KCXJBWCA9IHRYOw0KCXRNYXQgPSBiQi5tX3hm
LlI7DQoJdmFyIHJCWCA9IHRoaXMubV9sb2NhbEFuY2hvckIueCAtIGJCLm1fc3dlZXAubG9jYWxD
ZW50ZXIueDsNCgl2YXIgckJZID0gdGhpcy5tX2xvY2FsQW5jaG9yQi55IC0gYkIubV9zd2VlcC5s
b2NhbENlbnRlci55Ow0KCXRYID0gKHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiBy
QlkpOw0KCXJCWSA9ICh0TWF0LmNvbDEueSAqIHJCWCArIHRNYXQuY29sMi55ICogckJZKTsNCgly
QlggPSB0WDsNCgl2YXIgbUEgPSBiQS5tX2ludk1hc3M7DQoJdmFyIG1CID0gYkIubV9pbnZNYXNz
Ow0KCXZhciBpQSA9IGJBLm1faW52STsNCgl2YXIgaUIgPSBiQi5tX2ludkk7DQoJdmFyIEMxWCA9
IGJCLm1fc3dlZXAuYy54ICsgckJYIC0gYkEubV9zd2VlcC5jLnggLSByQVg7DQoJdmFyIEMxWSA9
IGJCLm1fc3dlZXAuYy55ICsgckJZIC0gYkEubV9zd2VlcC5jLnkgLSByQVk7DQoJdmFyIEMyID0g
YkIubV9zd2VlcC5hIC0gYkEubV9zd2VlcC5hIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlOw0KCXZh
ciBrX2FsbG93ZWRTdHJldGNoID0gMTAuMCAqIEJveDJELkNvbW1vbi5iMlNldHRpbmdzLmIyX2xp
bmVhclNsb3A7DQoJdmFyIHBvc2l0aW9uRXJyb3IgPSBNYXRoLnNxcnQoQzFYICogQzFYICsgQzFZ
ICogQzFZKTsNCgl2YXIgYW5ndWxhckVycm9yID0gTWF0aC5hYnMoQzIpOw0KCWlmIChwb3NpdGlv
bkVycm9yID4ga19hbGxvd2VkU3RyZXRjaCkgew0KCQlpQSAqPSAxLjA7DQoJCWlCICo9IDEuMDsN
Cgl9DQoJdGhpcy5tX21hc3MuY29sMS54ID0gbUEgKyBtQiArIHJBWSAqIHJBWSAqIGlBICsgckJZ
ICogckJZICogaUI7DQoJdGhpcy5tX21hc3MuY29sMi54ID0gKC1yQVkgKiByQVggKiBpQSkgLSBy
QlkgKiByQlggKiBpQjsNCgl0aGlzLm1fbWFzcy5jb2wzLnggPSAoLXJBWSAqIGlBKSAtIHJCWSAq
IGlCOw0KCXRoaXMubV9tYXNzLmNvbDEueSA9IHRoaXMubV9tYXNzLmNvbDIueDsNCgl0aGlzLm1f
bWFzcy5jb2wyLnkgPSBtQSArIG1CICsgckFYICogckFYICogaUEgKyByQlggKiByQlggKiBpQjsN
Cgl0aGlzLm1fbWFzcy5jb2wzLnkgPSByQVggKiBpQSArIHJCWCAqIGlCOw0KCXRoaXMubV9tYXNz
LmNvbDEueiA9IHRoaXMubV9tYXNzLmNvbDMueDsNCgl0aGlzLm1fbWFzcy5jb2wyLnogPSB0aGlz
Lm1fbWFzcy5jb2wzLnk7DQoJdGhpcy5tX21hc3MuY29sMy56ID0gaUEgKyBpQjsNCgl2YXIgaW1w
dWxzZSA9IG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzMoMCwgMCwgMCk7DQoJdGhpcy5tX21h
c3MuU29sdmUzMyhpbXB1bHNlLCAoLUMxWCksICgtQzFZKSwgKC1DMikpOw0KCWJBLm1fc3dlZXAu
Yy54IC09IG1BICogaW1wdWxzZS54Ow0KCWJBLm1fc3dlZXAuYy55IC09IG1BICogaW1wdWxzZS55
Ow0KCWJBLm1fc3dlZXAuYSAtPSBpQSAqIChyQVggKiBpbXB1bHNlLnkgLSByQVkgKiBpbXB1bHNl
LnggKyBpbXB1bHNlLnopOw0KCWJCLm1fc3dlZXAuYy54ICs9IG1CICogaW1wdWxzZS54Ow0KCWJC
Lm1fc3dlZXAuYy55ICs9IG1CICogaW1wdWxzZS55Ow0KCWJCLm1fc3dlZXAuYSArPSBpQiAqIChy
QlggKiBpbXB1bHNlLnkgLSByQlkgKiBpbXB1bHNlLnggKyBpbXB1bHNlLnopOw0KCWJBLlN5bmNo
cm9uaXplVHJhbnNmb3JtKCk7DQoJYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTsNCglyZXR1cm4g
cG9zaXRpb25FcnJvciA8PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wICYm
IGFuZ3VsYXJFcnJvciA8PSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcDsN
Cn07DQovKioNCiAqIEBjb25zdHJ1Y3Rvcg0KICogQGV4dGVuZHMge0JveDJELkR5bmFtaWNzLkpv
aW50cy5iMkpvaW50RGVmfQ0KICovDQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnRE
ZWYgPSBmdW5jdGlvbigpIHsNCglCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZi5jYWxs
KHRoaXMpOw0KCXRoaXMubG9jYWxBbmNob3JBID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdl
dCgwLCAwKTsNCgl0aGlzLmxvY2FsQW5jaG9yQiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5H
ZXQoMCwgMCk7DQoJdGhpcy50eXBlID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQuZV93
ZWxkSm9pbnQ7DQoJdGhpcy5yZWZlcmVuY2VBbmdsZSA9IDAuMDsNCn07DQpjMmluaGVyaXQoQm94
MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50RGVmLCBCb3gyRC5EeW5hbWljcy5Kb2ludHMu
YjJKb2ludERlZik7DQpCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnREZWYucHJvdG90
eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFuY2hvcikgew0KCXRoaXMuYm9keUEg
PSBiQTsNCgl0aGlzLmJvZHlCID0gYkI7DQoJdGhpcy5sb2NhbEFuY2hvckEuU2V0Vih0aGlzLmJv
ZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7DQoJdGhpcy5sb2NhbEFuY2hvckIuU2V0Vih0aGlz
LmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7DQoJdGhpcy5yZWZlcmVuY2VBbmdsZSA9IHRo
aXMuYm9keUIuR2V0QW5nbGUoKSAtIHRoaXMuYm9keUEuR2V0QW5nbGUoKTsNCn07DQpCb3gyRC5E
eW5hbWljcy5Kb2ludHMuYjJXZWxkSm9pbnREZWYucHJvdG90eXBlLkNyZWF0ZSA9IGZ1bmN0aW9u
KCkgew0KCXJldHVybiBuZXcgQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50KHRoaXMp
Ow0KfTsNCkJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5zX2luY2lkZW50RWRnZSA9IEJveDJE
LkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5NYWtlQ2xpcFBvaW50VmVjdG9yKCk7DQpCb3gyRC5Db2xs
aXNpb24uYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMSA9IEJveDJELkNvbGxpc2lvbi5iMkNvbGxp
c2lvbi5NYWtlQ2xpcFBvaW50VmVjdG9yKCk7DQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24u
c19jbGlwUG9pbnRzMiA9IEJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbi5NYWtlQ2xpcFBvaW50
VmVjdG9yKCk7DQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc19sb2NhbFRhbmdlbnQgPSBC
b3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KQm94MkQuQ29sbGlzaW9uLmIyQ29s
bGlzaW9uLnNfbG9jYWxOb3JtYWwgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDAp
Ow0KQm94MkQuQ29sbGlzaW9uLmIyQ29sbGlzaW9uLnNfcGxhbmVQb2ludCA9IEJveDJELkNvbW1v
bi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc19u
b3JtYWwgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KQm94MkQuQ29sbGlz
aW9uLmIyQ29sbGlzaW9uLnNfdGFuZ2VudCA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMi5HZXQo
MCwgMCk7DQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24uc190YW5nZW50MiA9IEJveDJELkNv
bW1vbi5NYXRoLmIyVmVjMi5HZXQoMCwgMCk7DQpCb3gyRC5Db2xsaXNpb24uYjJDb2xsaXNpb24u
c192MTEgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDApOw0KQm94MkQuQ29sbGlz
aW9uLmIyQ29sbGlzaW9uLnNfdjEyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyLkdldCgwLCAw
KTsNCkJveDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5iMl90b2lDYWxscyA9IDA7DQpCb3gy
RC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3QuYjJfdG9pSXRlcnMgPSAwOw0KQm94MkQuQ29sbGlz
aW9uLmIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzID0gMDsNCkJveDJELkNvbGxpc2lvbi5i
MlRpbWVPZkltcGFjdC5iMl90b2lSb290SXRlcnMgPSAwOw0KQm94MkQuQ29sbGlzaW9uLmIyVGlt
ZU9mSW1wYWN0LmIyX3RvaU1heFJvb3RJdGVycyA9IDA7DQpCb3gyRC5Db2xsaXNpb24uYjJUaW1l
T2ZJbXBhY3Quc19jYWNoZSA9IG5ldyBCb3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4Q2FjaGUoKTsN
CkJveDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlSW5wdXQgPSBuZXcgQm94
MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VJbnB1dCgpOw0KQm94MkQuQ29sbGlzaW9uLmIyVGltZU9m
SW1wYWN0LnNfeGZBID0gbmV3IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtKCk7DQpCb3gy
RC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3Quc194ZkIgPSBuZXcgQm94MkQuQ29tbW9uLk1hdGgu
YjJUcmFuc2Zvcm0oKTsNCkJveDJELkNvbGxpc2lvbi5iMlRpbWVPZkltcGFjdC5zX2ZjbiA9IG5l
dyBCb3gyRC5Db2xsaXNpb24uYjJTZXBhcmF0aW9uRnVuY3Rpb24oKTsNCkJveDJELkNvbGxpc2lv
bi5iMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlT3V0cHV0ID0gbmV3IEJveDJELkNvbGxpc2lvbi5i
MkRpc3RhbmNlT3V0cHV0KCk7DQovKiogQHR5cGUgeyFCb3gyRC5Db21tb24uTWF0aC5iMlRyYW5z
Zm9ybX0gKi8NCkJveDJELkR5bmFtaWNzLmIyQm9keS5zX3hmMSA9IG5ldyBCb3gyRC5Db21tb24u
TWF0aC5iMlRyYW5zZm9ybSgpOw0KQm94MkQuRHluYW1pY3MuYjJDb250YWN0TGlzdGVuZXIuYjJf
ZGVmYXVsdExpc3RlbmVyID0gbmV3IEJveDJELkR5bmFtaWNzLmIyQ29udGFjdExpc3RlbmVyKCk7
DQpCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RNYW5hZ2VyLnNfZXZhbENQID0gbmV3IEJveDJELkNv
bGxpc2lvbi5iMkNvbnRhY3RQb2ludCgpOw0KLyoqIEB0eXBlIHshQm94MkQuQ29tbW9uLk1hdGgu
YjJUcmFuc2Zvcm19ICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnNfeGYgPSBuZXcgQm94MkQu
Q29tbW9uLk1hdGguYjJUcmFuc2Zvcm0oKTsNCi8qKiBAdHlwZSB7IUJveDJELkNvbW1vbi5NYXRo
LmIyU3dlZXB9ICovDQpCb3gyRC5EeW5hbWljcy5iMldvcmxkLnNfYmFja3VwQSA9IG5ldyBCb3gy
RC5Db21tb24uTWF0aC5iMlN3ZWVwKCk7DQovKiogQHR5cGUgeyFCb3gyRC5Db21tb24uTWF0aC5i
MlN3ZWVwfSAqLw0KQm94MkQuRHluYW1pY3MuYjJXb3JsZC5zX2JhY2t1cEIgPSBuZXcgQm94MkQu
Q29tbW9uLk1hdGguYjJTd2VlcCgpOw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0
LnNfaW5wdXQgPSBuZXcgQm94MkQuQ29sbGlzaW9uLmIyVE9JSW5wdXQoKTsNCkJveDJELkR5bmFt
aWNzLkNvbnRhY3RzLmIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQgPSBuZXcgQm94MkQu
Q29sbGlzaW9uLmIyV29ybGRNYW5pZm9sZCgpOw0KQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJD
b250YWN0U29sdmVyLnNfcHNtID0gbmV3IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9zaXRp
b25Tb2x2ZXJNYW5pZm9sZCgpOw0KLyoNCiogQ29udmV4IFNlcGFyYXRvciBmb3IgQm94MkQgRmxh
c2gNCioNCiogVGhpcyBjbGFzcyBoYXMgYmVlbiB3cml0dGVuIGJ5IEFudG9hbiBBbmdlbG92Lg0K
KiBJdCBpcyBkZXNpZ25lZCB0byB3b3JrIHdpdGggRXJpbiBDYXR0bydzIEJveDJEIHBoeXNpY3Mg
bGlicmFyeS4NCioNCiogRXZlcnlib2R5IGNhbiB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1
cnBvc2UsIHVuZGVyIHR3byByZXN0cmljdGlvbnM6DQoqIDEuIFlvdSBjYW5ub3QgY2xhaW0gdGhh
dCB5b3Ugd3JvdGUgdGhpcyBzb2Z0d2FyZS4NCiogMi4gWW91IGNhbiBub3QgcmVtb3ZlIG9yIGFs
dGVyIHRoaXMgbm90aWNlLg0KKg0KKi8NCmNyLmIyU2VwYXJhdG9yID0gZnVuY3Rpb24oKSB7fTsN
CmNyLmIyU2VwYXJhdG9yLmRldCA9IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpDQp7
DQoJcmV0dXJuIHgxKnkyICsgeDIqeTMgKyB4Myp5MSAtIHkxKngyIC0geTIqeDMgLSB5Myp4MTsN
Cn07DQpjci5iMlNlcGFyYXRvci5oaXRSYXkgPSBmdW5jdGlvbih4MSwgeTEsIHgyLCB5MiwgeDMs
IHkzLCB4NCwgeTQpDQp7DQoJdmFyIHQxID0geDMteDEsIHQyID0geTMteTEsIHQzID0geDIteDEs
IHQ0ID0geTIteTEsIHQ1ID0geDQteDMsIHQ2ID0geTQteTMsIHQ3ID0gdDQqdDUgLSB0Myp0NjsN
Cgl2YXIgYSA9ICh0NSp0MiAtIHQ2KnQxKSAvIHQ3Ow0KCXZhciBweCA9IHgxICsgYSp0MywgcHkg
PSB5MSArIGEqdDQ7DQoJdmFyIGIxID0gY3IuYjJTZXBhcmF0b3IuaXNPblNlZ21lbnQoeDIsIHky
LCB4MSwgeTEsIHB4LCBweSk7DQoJdmFyIGIyID0gY3IuYjJTZXBhcmF0b3IuaXNPblNlZ21lbnQo
cHgsIHB5LCB4MywgeTMsIHg0LCB5NCk7DQoJaWYgKGIxICYmIGIyKQ0KCQlyZXR1cm4gQm94MkQu
Q29tbW9uLk1hdGguYjJWZWMyLkdldChweCwgcHkpOw0KCWVsc2UNCgkJcmV0dXJuIG51bGw7DQp9
Ow0KY3IuYjJTZXBhcmF0b3IuaXNPblNlZ21lbnQgPSBmdW5jdGlvbihweCwgcHksIHgxLCB5MSwg
eDIsIHkyKQ0Kew0KCXZhciBiMSA9ICh4MSswLjEgPj0gcHggJiYgcHggPj0geDItMC4xKSB8fCAo
eDEtMC4xIDw9IHB4ICYmIHB4IDw9IHgyKzAuMSk7DQoJdmFyIGIyID0gKHkxKzAuMSA+PSBweSAm
JiBweSA+PSB5Mi0wLjEpIHx8ICh5MS0wLjEgPD0gcHkgJiYgcHkgPD0geTIrMC4xKTsNCglyZXR1
cm4gKGIxICYmIGIyKSAmJiBjci5iMlNlcGFyYXRvci5pc09uTGluZShweCwgcHksIHgxLCB5MSwg
eDIsIHkyKTsNCn07DQpjci5iMlNlcGFyYXRvci5pc09uTGluZSA9IGZ1bmN0aW9uKHB4LCBweSwg
eDEsIHkxLCB4MiwgeTIpDQp7DQoJaWYgKE1hdGguYWJzKHgyLXgxKSA+IDAuMSkNCgl7DQoJCXZh
ciBhID0gKHkyLXkxKSAvICh4Mi14MSk7DQoJCXZhciBwb3NzaWJsZVkgPSBhICogKHB4LXgxKSt5
MTsNCgkJdmFyIGRpZmYgPSBNYXRoLmFicyhwb3NzaWJsZVktcHkpOw0KCQlyZXR1cm4gZGlmZiA8
IDAuMTsNCgl9DQoJcmV0dXJuIE1hdGguYWJzKHB4LXgxKSA8IDAuMTsNCn07DQpjci5iMlNlcGFy
YXRvci5wb2ludHNNYXRjaCA9IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyKQ0Kew0KCXJldHVybiBN
YXRoLmFicyh4Mi14MSkgPCAwLjEgJiYgTWF0aC5hYnMoeTIteTEpIDwgMC4xOw0KfTsNCmNyLmIy
U2VwYXJhdG9yLlNlcGFyYXRlID0gZnVuY3Rpb24odmVydGljZXNWZWMgLyphcnJheSBvZiBiMlZl
YzIqLywgb2JqYXJlYSkNCnsNCgl2YXIgYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMy
Ow0KCXZhciBjYWxjZWQgPSBjci5iMlNlcGFyYXRvci5jYWxjU2hhcGVzKHZlcnRpY2VzVmVjKTsN
Cgl2YXIgcmV0ID0gW107DQoJdmFyIHBvbHksIGEsIGIsIGM7DQoJdmFyIGksIGxlbiwgaiwgbGVu
ajsNCgl2YXIgYXJlYXN1bTsNCglmb3IgKGkgPSAwLCBsZW4gPSBjYWxjZWQubGVuZ3RoOyBpIDwg
bGVuOyBpKyspDQoJew0KCQlhID0gY2FsY2VkW2ldOw0KCQlwb2x5ID0gW107DQoJCXBvbHkubGVu
Z3RoID0gYS5sZW5ndGg7DQoJCWFyZWFzdW0gPSAwOw0KCQlmb3IgKGogPSAwLCBsZW5qID0gYS5s
ZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCXsNCgkJCWIgPSBhW2pdOw0KCQkJYyA9IGFbKGogKyAx
KSAlIGxlbmpdOw0KCQkJYXJlYXN1bSArPSAoYi54ICogYy55IC0gYi55ICogYy54KTsNCgkJCXBv
bHlbal0gPSBiMlZlYzIuR2V0KGIueCwgYi55KTsNCgkJfQ0KCQlhcmVhc3VtID0gTWF0aC5hYnMo
YXJlYXN1bSAvIDIpOw0KCQlpZiAoYXJlYXN1bSA+PSBvYmphcmVhICogMC4wMDEpDQoJCQlyZXQu
cHVzaChwb2x5KTsNCgl9DQo7DQoJcmV0dXJuIHJldDsNCn07DQpjci5iMlNlcGFyYXRvci5jYWxj
U2hhcGVzID0gZnVuY3Rpb24odmVydGljZXNWZWMgLyphcnJheSBvZiBiMlZlYzIqLykNCnsNCgl2
YXIgdmVjID0gW107CQkJCQkJCQkJCS8vIGFycmF5IG9mIGIyVmVjMg0KCXZhciBpID0gMCwgbiA9
IDAsIGogPSAwOwkJCQkJCQkvLyBpbnRzDQoJdmFyIGQgPSAwLCB0ID0gMCwgZHggPSAwLCBkeSA9
IDAsIG1pbkxlbiA9IDA7CQkvLyBudW1iZXJzDQoJdmFyIGkxID0gMCwgaTIgPSAwLCBpMyA9IDA7
CQkJCQkJCS8vIGludHMNCgl2YXIgcDEsIHAyLCBwMywgdjEsIHYyLCB2LCBoaXRWOwkJCQkJLy8g
YjJWZWMycw0KCXZhciBqMSA9IDAsIGoyID0gMCwgayA9IDAsIGggPSAwOwkJCQkJLy8gaW50cw0K
CXZhciB2ZWMxID0gW10sIHZlYzIgPSBbXTsJCQkJCQkJLy8gYXJyYXkgb2YgYjJWZWMyDQoJdmFy
IGlzQ29udmV4ID0gZmFsc2U7CQkJCQkJCQkvLyBib29sZWFuDQoJdmFyIGZpZ3NWZWMgPSBbXSwg
cXVldWUgPSBbXTsJCQkJCQkvLyBBcnJheXMNCglxdWV1ZS5wdXNoKHZlcnRpY2VzVmVjKTsNCgl3
aGlsZSAocXVldWUubGVuZ3RoKQ0KCXsNCgkJdmVjID0gcXVldWVbMF07DQoJCW4gPSB2ZWMubGVu
Z3RoOw0KCQlpc0NvbnZleCA9IHRydWU7DQoJCWZvciAoaSA9IDA7IGkgPCBuOyBpKyspDQoJCXsN
CgkJCWkxID0gaTsNCgkJCWkyID0gKGkgPCBuLTEpID8gaSsxIDogaSsxLW47DQoJCQlpMyA9IChp
IDwgbi0yKSA/IGkrMiA6IGkrMi1uOw0KCQkJcDEgPSB2ZWNbaTFdOw0KCQkJcDIgPSB2ZWNbaTJd
Ow0KCQkJcDMgPSB2ZWNbaTNdOw0KCQkJZCA9IGNyLmIyU2VwYXJhdG9yLmRldChwMS54LCBwMS55
LCBwMi54LCBwMi55LCBwMy54LCBwMy55KTsNCgkJCWlmIChkIDwgMCkNCgkJCXsNCgkJCQlpc0Nv
bnZleCA9IGZhbHNlOw0KCQkJCW1pbkxlbiA9IDFlOTsNCgkJCQlmb3IgKGogPSAwOyBqIDwgbjsg
aisrKQ0KCQkJCXsNCgkJCQkJaWYgKChqICE9PSBpMSkgJiYgKGogIT09IGkyKSkNCgkJCQkJew0K
CQkJCQkJajEgPSBqOw0KCQkJCQkJajIgPSAoajxuIC0gMSkgPyBqKzEgOiAwOw0KCQkJCQkJdjEg
PSB2ZWNbajFdOw0KCQkJCQkJdjIgPSB2ZWNbajJdOw0KCQkJCQkJdiA9IGNyLmIyU2VwYXJhdG9y
LmhpdFJheShwMS54LCBwMS55LCBwMi54LCBwMi55LCB2MS54LCB2MS55LCB2Mi54LCB2Mi55KTsN
CgkJCQkJCWlmICh2KQ0KCQkJCQkJew0KCQkJCQkJCWR4ID0gcDIueCAtIHYueDsNCgkJCQkJCQlk
eSA9IHAyLnkgLSB2Lnk7DQoJCQkJCQkJdCA9IGR4KmR4ICsgZHkqZHk7DQoJCQkJCQkJaWYgKHQg
PCBtaW5MZW4pDQoJCQkJCQkJew0KCQkJCQkJCQloID0gajE7DQoJCQkJCQkJCWsgPSBqMjsNCgkJ
CQkJCQkJaGl0ViA9IHY7DQoJCQkJCQkJCW1pbkxlbiA9IHQ7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0K
CQkJCQl9DQoJCQkJfQ0KCQkJCWlmIChtaW5MZW4gPT09IDFlOSkNCgkJCQkJcmV0dXJuIFtdOw0K
CQkJCXZlYzEgPSBbXTsNCgkJCQl2ZWMyID0gW107DQoJCQkJajEgPSBoOw0KCQkJCWoyID0gazsN
CgkJCQl2MSA9IHZlY1tqMV07DQoJCQkJdjIgPSB2ZWNbajJdOw0KCQkJCWlmICghY3IuYjJTZXBh
cmF0b3IucG9pbnRzTWF0Y2goaGl0Vi54LCBoaXRWLnksIHYyLngsIHYyLnkpKQ0KCQkJCQl2ZWMx
LnB1c2goaGl0Vik7DQoJCQkJaWYgKCFjci5iMlNlcGFyYXRvci5wb2ludHNNYXRjaChoaXRWLngs
IGhpdFYueSwgdjEueCwgdjEueSkpDQoJCQkJCXZlYzIucHVzaChoaXRWKTsNCgkJCQloID0gLTE7
DQoJCQkJayA9IGkxOw0KCQkJCXdoaWxlICh0cnVlKQ0KCQkJCXsNCgkJCQkJaWYgKGsgIT09IGoy
KQ0KCQkJCQkJdmVjMS5wdXNoKHZlY1trXSk7DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJaWYg
KGggPCAwIHx8IGggPj0gbikNCgkJCQkJCQlyZXR1cm4gW107DQoJCQkJCQlpZiAoIWNyLmIyU2Vw
YXJhdG9yLmlzT25TZWdtZW50KHYyLngsIHYyLnksIHZlY1toXS54LCB2ZWNbaF0ueSwgcDEueCwg
cDEueSkpDQoJCQkJCQkJdmVjMS5wdXNoKHZlY1trXSk7DQoJCQkJCQlicmVhazsNCgkJCQkJfQ0K
CQkJCQloID0gazsNCgkJCQkJaWYgKGstMSA8IDApDQoJCQkJCQlrID0gbi0xOw0KCQkJCQllbHNl
DQoJCQkJCQlrLS07DQoJCQkJfQ0KCQkJCXZlYzEucmV2ZXJzZSgpOw0KCQkJCWggPSAtMTsNCgkJ
CQlrID0gaTI7DQoJCQkJd2hpbGUgKHRydWUpDQoJCQkJew0KCQkJCQlpZiAoayAhPT0gajEpDQoJ
CQkJCQl2ZWMyLnB1c2godmVjW2tdKTsNCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlpZiAoaCA8
IDAgfHwgaCA+PSBuKQ0KCQkJCQkJCXJldHVybiBbXTsNCgkJCQkJCWlmIChrID09PSBqMSAmJiAh
Y3IuYjJTZXBhcmF0b3IuaXNPblNlZ21lbnQodjEueCwgdjEueSwgdmVjW2hdLngsIHZlY1toXS55
LCBwMi54LCBwMi55KSkNCgkJCQkJCQl2ZWMyLnB1c2godmVjW2tdKTsNCgkJCQkJCWJyZWFrOw0K
CQkJCQl9DQoJCQkJCWggPSBrOw0KCQkJCQlpZiAoaysxID4gbi0xKQ0KCQkJCQkJayA9IDA7DQoJ
CQkJCWVsc2UNCgkJCQkJCWsrKzsNCgkJCQl9DQoJCQkJcXVldWUucHVzaCh2ZWMxLCB2ZWMyKTsN
CgkJCQlxdWV1ZS5zaGlmdCgpOw0KCQkJCWJyZWFrOw0KCQkJfQ0KCQl9DQoJCWlmIChpc0NvbnZl
eCkNCgkJCWZpZ3NWZWMucHVzaChxdWV1ZS5zaGlmdCgpKTsNCgl9DQoJcmV0dXJuIGZpZ3NWZWM7
DQp9Ow0KOw0KOw0KY3IuYmVoYXZpb3JzLlBoeXNpY3MgPSBmdW5jdGlvbihydW50aW1lKQ0Kew0K
CWZvciAodmFyIGkgPSAwOyBpIDwgNDAwMDsgaSsrKQ0KCQlCb3gyRC5Db21tb24uTWF0aC5iMlZl
YzIuX2ZyZWVDYWNoZS5wdXNoKG5ldyBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIoMCwgMCkpOw0K
CXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQoJdGhpcy53b3JsZCA9IG5ldyBCb3gyRC5EeW5hbWlj
cy5iMldvcmxkKA0KCQkJCQkJCQlCb3gyRC5Db21tb24uTWF0aC5iMlZlYzIuR2V0KDAsIDEwKSwJ
Ly8gZ3Jhdml0eQ0KCQkJCQkJCQl0cnVlKTsJCQkJCQkJCQkvLyBhbGxvdyBzbGVlcA0KCXRoaXMu
d29ybGRHID0gMTA7DQoJdGhpcy5sYXN0VXBkYXRlVGljayA9IC0xOw0KCXZhciBsaXN0ZW5lciA9
IG5ldyBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RMaXN0ZW5lcjsNCglsaXN0ZW5lci5iZWhhdmlv
ciA9IHRoaXM7DQoJbGlzdGVuZXIuQmVnaW5Db250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkNCgl7
DQoJCXZhciBiZWhBID0gY29udGFjdC5tX2ZpeHR1cmVBLkdldEJvZHkoKS5jMnVzZXJkYXRhOw0K
CQl2YXIgYmVoQiA9IGNvbnRhY3QubV9maXh0dXJlQi5HZXRCb2R5KCkuYzJ1c2VyZGF0YTsNCgkJ
dGhpcy5iZWhhdmlvci5ydW50aW1lLnJlZ2lzdGVyQ29sbGlzaW9uKGJlaEEuaW5zdCwgYmVoQi5p
bnN0KTsNCgl9Ow0KCXRoaXMud29ybGQuU2V0Q29udGFjdExpc3RlbmVyKGxpc3RlbmVyKTsNCgl2
YXIgZmlsdGVyID0gbmV3IEJveDJELkR5bmFtaWNzLmIyQ29udGFjdEZpbHRlcjsNCglmaWx0ZXIu
YmVoYXZpb3IgPSB0aGlzOw0KCWZpbHRlci5TaG91bGRDb2xsaWRlID0gZnVuY3Rpb24gKGZpeHR1
cmVBLCBmaXh0dXJlQikNCgl7DQoJCWlmICh0aGlzLmJlaGF2aW9yLmFsbENvbGxpc2lvbnNFbmFi
bGVkKQ0KCQkJcmV0dXJuIHRydWU7DQoJCXZhciB0eXBlQSA9IGZpeHR1cmVBLkdldEJvZHkoKS5j
MnVzZXJkYXRhLmluc3QudHlwZTsNCgkJdmFyIHR5cGVCID0gZml4dHVyZUIuR2V0Qm9keSgpLmMy
dXNlcmRhdGEuaW5zdC50eXBlOw0KCQl2YXIgcyA9IHR5cGVBLmV4dHJhWyJQaHlzaWNzX0Rpc2Fi
bGVkQ29sbGlzaW9ucyJdOw0KCQlpZiAocyAmJiBzLmNvbnRhaW5zKHR5cGVCKSkNCgkJCXJldHVy
biBmYWxzZTsNCgkJcyA9IHR5cGVCLmV4dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9ucyJd
Ow0KCQlpZiAocyAmJiBzLmNvbnRhaW5zKHR5cGVBKSkNCgkJCXJldHVybiBmYWxzZTsNCgkJcmV0
dXJuIHRydWU7DQoJfTsNCgl0aGlzLndvcmxkLlNldENvbnRhY3RGaWx0ZXIoZmlsdGVyKTsNCgl0
aGlzLnN0ZXBwaW5nTW9kZSA9IDA7CQkvLyBmaXhlZA0KCXRoaXMudmVsb2NpdHlJdGVyYXRpb25z
ID0gODsNCgl0aGlzLnBvc2l0aW9uSXRlcmF0aW9ucyA9IDM7DQoJdGhpcy5hbGxDb2xsaXNpb25z
RW5hYmxlZCA9IHRydWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIGIyVmVjMiA9IEJveDJE
LkNvbW1vbi5NYXRoLmIyVmVjMiwNCgkJYjJCb2R5RGVmID0gQm94MkQuRHluYW1pY3MuYjJCb2R5
RGVmLA0KCQliMkJvZHkgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHksDQoJCWIyRml4dHVyZURlZiA9
IEJveDJELkR5bmFtaWNzLmIyRml4dHVyZURlZiwNCgkJYjJGaXh0dXJlID0gQm94MkQuRHluYW1p
Y3MuYjJGaXh0dXJlLA0KCQliMldvcmxkID0gQm94MkQuRHluYW1pY3MuYjJXb3JsZCwNCgkJYjJQ
b2x5Z29uU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyUG9seWdvblNoYXBlLA0KCQli
MkNpcmNsZVNoYXBlID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkNpcmNsZVNoYXBlLA0KCQli
MkRpc3RhbmNlSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50
RGVmLA0KCQliMlJldm9sdXRlSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZv
bHV0ZUpvaW50RGVmLA0KCQliMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNm
b3JtLA0KCQliMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjsNCgl2YXIgVElMRV9G
TElQUEVEX0hPUklaT05UQUwgPSAtMHg4MDAwMDAwMAkJLy8gbm90ZTogcHJldGVuZCBpcyBhIHNp
Z25lZCBpbnQsIHNvIG5lZ2F0ZQ0KCXZhciBUSUxFX0ZMSVBQRURfVkVSVElDQUwgPSAweDQwMDAw
MDAwDQoJdmFyIFRJTEVfRkxJUFBFRF9ESUFHT05BTCA9IDB4MjAwMDAwMDANCgl2YXIgVElMRV9G
TEFHU19NQVNLID0gMHhFMDAwMDAwMA0KCXZhciB3b3JsZFNjYWxlID0gMC4wMjsNCgl2YXIgYmVo
YXZpb3JQcm90byA9IGNyLmJlaGF2aW9ycy5QaHlzaWNzLnByb3RvdHlwZTsNCgliZWhhdmlvclBy
b3RvLlR5cGUgPSBmdW5jdGlvbihiZWhhdmlvciwgb2JqdHlwZSkNCgl7DQoJCXRoaXMuYmVoYXZp
b3IgPSBiZWhhdmlvcjsNCgkJdGhpcy5vYmp0eXBlID0gb2JqdHlwZTsNCgkJdGhpcy5ydW50aW1l
ID0gYmVoYXZpb3IucnVudGltZTsNCgl9Ow0KCXZhciBiZWh0eXBlUHJvdG8gPSBiZWhhdmlvclBy
b3RvLlR5cGUucHJvdG90eXBlOw0KCWJlaHR5cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkN
Cgl7DQoJfTsNCgliZWhhdmlvclByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSwgaW5zdCkN
Cgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMuYmVoYXZpb3IgPSB0eXBlLmJlaGF2aW9y
Ow0KCQl0aGlzLmluc3QgPSBpbnN0OwkJCQkvLyBhc3NvY2lhdGVkIG9iamVjdCBpbnN0YW5jZSB0
byBtb2RpZnkNCgkJdGhpcy5ydW50aW1lID0gdHlwZS5ydW50aW1lOw0KCQl0aGlzLndvcmxkID0g
dGhpcy5iZWhhdmlvci53b3JsZDsNCgl9Ow0KCXZhciBiZWhpbnN0UHJvdG8gPSBiZWhhdmlvclBy
b3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgliZWhpbnN0UHJvdG8ub25DcmVhdGUgPSBmdW5jdGlv
bigpDQoJew0KCQl0aGlzLmltbW92YWJsZSA9ICh0aGlzLnByb3BlcnRpZXNbMF0gIT09IDApOw0K
CQl0aGlzLmNvbGxpc2lvbm1hc2sgPSB0aGlzLnByb3BlcnRpZXNbMV07DQoJCXRoaXMucHJldmVu
dFJvdGF0aW9uID0gKHRoaXMucHJvcGVydGllc1syXSAhPT0gMCk7DQoJCXRoaXMuZGVuc2l0eSA9
IHRoaXMucHJvcGVydGllc1szXTsNCgkJdGhpcy5mcmljdGlvbiA9IHRoaXMucHJvcGVydGllc1s0
XTsNCgkJdGhpcy5yZXN0aXR1dGlvbiA9IHRoaXMucHJvcGVydGllc1s1XTsNCgkJdGhpcy5saW5l
YXJEYW1waW5nID0gdGhpcy5wcm9wZXJ0aWVzWzZdOw0KCQl0aGlzLmFuZ3VsYXJEYW1waW5nID0g
dGhpcy5wcm9wZXJ0aWVzWzddOw0KCQl0aGlzLmJ1bGxldCA9ICh0aGlzLnByb3BlcnRpZXNbOF0g
IT09IDApOw0KCQl0aGlzLmVuYWJsZWQgPSAodGhpcy5wcm9wZXJ0aWVzWzldICE9PSAwKTsNCgkJ
dGhpcy5ib2R5ID0gbnVsbDsNCgkJdGhpcy5pbnN0LnVwZGF0ZV9iYm94KCk7DQoJCXRoaXMubGFz
dEtub3duWCA9IHRoaXMuaW5zdC54Ow0KCQl0aGlzLmxhc3RLbm93blkgPSB0aGlzLmluc3QueTsN
CgkJdGhpcy5sYXN0S25vd25BbmdsZSA9IHRoaXMuaW5zdC5hbmdsZTsNCgkJdGhpcy5sYXN0V2lk
dGggPSAwOw0KCQl0aGlzLmxhc3RIZWlnaHQgPSAwOw0KCQl0aGlzLmxhc3RUaWNrT3ZlcnJpZGUg
PSBmYWxzZTsNCgkJdGhpcy5yZWNyZWF0ZUJvZHkgPSBmYWxzZTsNCgkJdGhpcy5sYXN0QW5pbWF0
aW9uID0gbnVsbDsJCQkvLyBmb3Igc3ByaXRlcyBvbmx5IC0gd2lsbCBiZSB1bmRlZmluZWQgZm9y
IG90aGVyIG9iamVjdHMNCgkJdGhpcy5sYXN0QW5pbWF0aW9uRnJhbWUgPSAtMTsJCS8vIGZvciBz
cHJpdGVzIG9ubHkgLSB3aWxsIGJlIHVuZGVmaW5lZCBmb3Igb3RoZXIgb2JqZWN0cw0KCQlpZiAo
dGhpcy5teUpvaW50cykNCgkJew0KCQkJdGhpcy5teUpvaW50cy5sZW5ndGggPSAwOw0KCQkJdGhp
cy5teUNyZWF0ZWRKb2ludHMubGVuZ3RoID0gMDsNCgkJCXRoaXMuam9pbmluZ01lLmNsZWFyKCk7
DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGlzLm15Sm9pbnRzID0gW107CQkJCQkJLy8gQ3JlYXRl
ZCBCb3gyRCBqb2ludHMNCgkJCXRoaXMubXlDcmVhdGVkSm9pbnRzID0gW107CQkJCS8vIExpc3Qg
b2YgYWN0aW9ucyBjYWxsZWQgdG8gY3JlYXRlIGpvaW50cw0KCQkJdGhpcy5qb2luaW5nTWUgPSBu
ZXcgY3IuT2JqZWN0U2V0KCk7CS8vIEluc3RhbmNlcyB3aXRoIGpvaW50cyB0byBtZQ0KCQl9DQoJ
CXZhciBzZWxmID0gdGhpczsNCgkJaWYgKCF0aGlzLnJlY3ljbGVkKQ0KCQl7DQoJCQl0aGlzLm15
RGVzdHJveUNhbGxiYWNrID0gKGZ1bmN0aW9uKGluc3QpIHsNCgkJCQkJCQkJCQkJCQlzZWxmLm9u
SW5zdGFuY2VEZXN0cm95ZWQoaW5zdCk7DQoJCQkJCQkJCQkJCQl9KTsNCgkJfQ0KCQl0aGlzLnJ1
bnRpbWUuYWRkRGVzdHJveUNhbGxiYWNrKHRoaXMubXlEZXN0cm95Q2FsbGJhY2spOw0KCX07DQoJ
YmVoaW5zdFByb3RvLnBvc3RDcmVhdGUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdGhpcy5pbnN0LnVw
ZGF0ZV9iYm94KCk7DQoJCXRoaXMuY3JlYXRlQm9keSgpOw0KCQl0aGlzLmxhc3RBbmltYXRpb24g
PSB0aGlzLmluc3QuY3VyX2FuaW1hdGlvbjsNCgkJdGhpcy5sYXN0QW5pbWF0aW9uRnJhbWUgPSB0
aGlzLmluc3QuY3VyX2ZyYW1lOw0KCX07DQoJYmVoaW5zdFByb3RvLm9uRGVzdHJveSA9IGZ1bmN0
aW9uKCkNCgl7DQoJCXRoaXMuZGVzdHJveU15Sm9pbnRzKCk7DQoJCXRoaXMubXlDcmVhdGVkSm9p
bnRzLmxlbmd0aCA9IDA7DQoJCXRoaXMuam9pbmluZ01lLmNsZWFyKCk7DQoJCWlmICh0aGlzLmJv
ZHkpDQoJCXsNCgkJCXRoaXMud29ybGQuRGVzdHJveUJvZHkodGhpcy5ib2R5KTsNCgkJCXRoaXMu
Ym9keSA9IG51bGw7DQoJCX0NCgkJdGhpcy5ydW50aW1lLnJlbW92ZURlc3Ryb3lDYWxsYmFjayh0
aGlzLm15RGVzdHJveUNhbGxiYWNrKTsNCgl9Ow0KCWJlaGluc3RQcm90by5zYXZlVG9KU09OID0g
ZnVuY3Rpb24gKCkNCgl7DQoJCXZhciBvID0gew0KCQkJImUiOiB0aGlzLmVuYWJsZWQsDQoJCQki
aW0iOiB0aGlzLmltbW92YWJsZSwNCgkJCSJwciI6IHRoaXMucHJldmVudFJvdGF0aW9uLA0KCQkJ
ImQiOiB0aGlzLmRlbnNpdHksDQoJCQkiZnIiOiB0aGlzLmZyaWN0aW9uLA0KCQkJInJlIjogdGhp
cy5yZXN0aXR1dGlvbiwNCgkJCSJsZCI6IHRoaXMubGluZWFyRGFtcGluZywNCgkJCSJhZCI6IHRo
aXMuYW5ndWxhckRhbXBpbmcsDQoJCQkiYiI6IHRoaXMuYnVsbGV0LA0KCQkJIm1jaiI6IHRoaXMu
bXlDcmVhdGVkSm9pbnRzDQoJCX07DQoJCWlmICh0aGlzLmVuYWJsZWQpDQoJCXsNCgkJCXZhciB0
ZW1wID0gYjJWZWMyLkdldCgwLCAwKTsNCgkJCXRlbXAuU2V0Vih0aGlzLmJvZHkuR2V0TGluZWFy
VmVsb2NpdHkoKSk7DQoJCQlvWyJ2eCJdID0gdGVtcC54Ow0KCQkJb1sidnkiXSA9IHRlbXAueTsN
CgkJCW9bIm9tIl0gPSB0aGlzLmJvZHkuR2V0QW5ndWxhclZlbG9jaXR5KCk7DQoJCX0NCgkJcmV0
dXJuIG87DQoJfTsNCgliZWhpbnN0UHJvdG8ubG9hZEZyb21KU09OID0gZnVuY3Rpb24gKG8pDQoJ
ew0KCQl0aGlzLmRlc3Ryb3lNeUpvaW50cygpOw0KCQl0aGlzLm15Q3JlYXRlZEpvaW50cy5sZW5n
dGggPSAwOw0KCQl0aGlzLmpvaW5pbmdNZS5jbGVhcigpOw0KCQlpZiAodGhpcy5ib2R5KQ0KCQl7
DQoJCQl0aGlzLndvcmxkLkRlc3Ryb3lCb2R5KHRoaXMuYm9keSk7DQoJCQl0aGlzLmJvZHkgPSBu
dWxsOw0KCQl9DQoJCXRoaXMuZW5hYmxlZCA9IG9bImUiXTsNCgkJdGhpcy5pbW1vdmFibGUgPSBv
WyJpbSJdOw0KCQl0aGlzLnByZXZlbnRSb3RhdGlvbiA9IG9bInByIl07DQoJCXRoaXMuZGVuc2l0
eSA9IG9bImQiXTsNCgkJdGhpcy5mcmljdGlvbiA9IG9bImZyIl07DQoJCXRoaXMucmVzdGl0dXRp
b24gPSBvWyJyZSJdOw0KCQl0aGlzLmxpbmVhckRhbXBpbmcgPSBvWyJsZCJdOw0KCQl0aGlzLmFu
Z3VsYXJEYW1waW5nID0gb1siYWQiXTsNCgkJdGhpcy5idWxsZXQgPSBvWyJiIl07DQoJCXRoaXMu
bGFzdEtub3duWCA9IHRoaXMuaW5zdC54Ow0KCQl0aGlzLmxhc3RLbm93blkgPSB0aGlzLmluc3Qu
eTsNCgkJdGhpcy5sYXN0S25vd25BbmdsZSA9IHRoaXMuaW5zdC5hbmdsZTsNCgkJdGhpcy5sYXN0
V2lkdGggPSB0aGlzLmluc3Qud2lkdGg7DQoJCXRoaXMubGFzdEhlaWdodCA9IHRoaXMuaW5zdC5o
ZWlnaHQ7DQoJCWlmICh0aGlzLmVuYWJsZWQpDQoJCXsNCgkJCXRoaXMuY3JlYXRlQm9keSgpOw0K
CQkJdGhpcy5ib2R5LlNldExpbmVhclZlbG9jaXR5KGIyVmVjMi5HZXQob1sidngiXSwgb1sidnki
XSkpOw0KCQkJdGhpcy5ib2R5LlNldEFuZ3VsYXJWZWxvY2l0eShvWyJvbSJdKTsNCgkJCWlmIChv
WyJ2eCJdICE9PSAwIHx8IG9bInZ5Il0gIT09IDAgfHwgb1sib20iXSAhPT0gMCkNCgkJCQl0aGlz
LmJvZHkuU2V0QXdha2UodHJ1ZSk7DQoJCQl0aGlzLm15Q3JlYXRlZEpvaW50cyA9IG9bIm1jaiJd
Ow0KCQl9DQoJfTsNCgliZWhpbnN0UHJvdG8uYWZ0ZXJMb2FkID0gZnVuY3Rpb24gKCkNCgl7DQoJ
CWlmICh0aGlzLmVuYWJsZWQpDQoJCQl0aGlzLnJlY3JlYXRlTXlKb2ludHMoKTsNCgkJdGhpcy5i
ZWhhdmlvci5sYXN0VXBkYXRlVGljayA9IHRoaXMucnVudGltZS50aWNrY291bnQgLSAxOw0KCX07
DQoJYmVoaW5zdFByb3RvLm9uSW5zdGFuY2VEZXN0cm95ZWQgPSBmdW5jdGlvbiAoaW5zdCkNCgl7
DQoJCXZhciBpLCBsZW4sIGosIGluc3R1aWQgPSBpbnN0LnVpZDsNCgkJZm9yIChpID0gMCwgaiA9
IDAsIGxlbiA9IHRoaXMubXlDcmVhdGVkSm9pbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQl7
DQoJCQl0aGlzLm15Q3JlYXRlZEpvaW50c1tqXSA9IHRoaXMubXlDcmVhdGVkSm9pbnRzW2ldOw0K
CQkJaWYgKGogPCB0aGlzLm15Sm9pbnRzLmxlbmd0aCkNCgkJCQl0aGlzLm15Sm9pbnRzW2pdID0g
dGhpcy5teUpvaW50c1tpXTsNCgkJCWlmICh0aGlzLm15Q3JlYXRlZEpvaW50c1tpXS5wYXJhbXNb
MV0gPT0gaW5zdHVpZCkJCS8vIGF0dGFjaGVkIGluc3RhbmNlIGlzIGFsd2F5cyAybmQgcGFyYW0N
CgkJCQl0aGlzLndvcmxkLkRlc3Ryb3lKb2ludCh0aGlzLm15Sm9pbnRzW2ldKTsNCgkJCWVsc2UN
CgkJCQlqKys7DQoJCX0NCgkJdGhpcy5teUNyZWF0ZWRKb2ludHMubGVuZ3RoID0gajsNCgkJaWYg
KGogPCB0aGlzLm15Sm9pbnRzLmxlbmd0aCkNCgkJCXRoaXMubXlKb2ludHMubGVuZ3RoID0gajsN
CgkJdGhpcy5qb2luaW5nTWUucmVtb3ZlKGluc3QpOw0KCX07DQoJYmVoaW5zdFByb3RvLmRlc3Ry
b3lNeUpvaW50cyA9IGZ1bmN0aW9uKCkNCgl7DQoJCXZhciBpLCBsZW47DQoJCWZvciAoaSA9IDAs
IGxlbiA9IHRoaXMubXlKb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspDQoJCQl0aGlzLndvcmxk
LkRlc3Ryb3lKb2ludCh0aGlzLm15Sm9pbnRzW2ldKTsNCgkJdGhpcy5teUpvaW50cy5sZW5ndGgg
PSAwOw0KCX07DQoJYmVoaW5zdFByb3RvLnJlY3JlYXRlTXlKb2ludHMgPSBmdW5jdGlvbigpDQoJ
ew0KCQl2YXIgaSwgbGVuLCBqOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLm15Q3JlYXRlZEpv
aW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaiA9IHRoaXMubXlDcmVhdGVkSm9p
bnRzW2ldOw0KCQkJc3dpdGNoIChqLnR5cGUpIHsNCgkJCWNhc2UgMDoJCQkvLyBkaXN0YW5jZSBq
b2ludA0KCQkJCXRoaXMuZG9DcmVhdGVEaXN0YW5jZUpvaW50KGoucGFyYW1zWzBdLCBqLnBhcmFt
c1sxXSwgai5wYXJhbXNbMl0sIGoucGFyYW1zWzNdLCBqLnBhcmFtc1s0XSk7DQoJCQkJYnJlYWs7
DQoJCQljYXNlIDE6CQkJLy8gcmV2b2x1dGUgam9pbnQNCgkJCQl0aGlzLmRvQ3JlYXRlUmV2b2x1
dGVKb2ludChqLnBhcmFtc1swXSwgai5wYXJhbXNbMV0pOw0KCQkJCWJyZWFrOw0KCQkJY2FzZSAy
OgkJCS8vIGxpbWl0ZWQgcmV2b2x1dGUgam9pbnQNCgkJCQl0aGlzLmRvQ3JlYXRlTGltaXRlZFJl
dm9sdXRlSm9pbnQoai5wYXJhbXNbMF0sIGoucGFyYW1zWzFdLCBqLnBhcmFtc1syXSwgai5wYXJh
bXNbM10pOw0KCQkJCWJyZWFrOw0KCQkJZGVmYXVsdDoNCjsNCgkJCX0NCgkJfQ0KCX07DQoJYmVo
aW5zdFByb3RvLmRlc3Ryb3lCb2R5ID0gZnVuY3Rpb24oKQ0KCXsNCgkJaWYgKCF0aGlzLmJvZHkp
DQoJCQlyZXR1cm47DQoJCXRoaXMuZGVzdHJveU15Sm9pbnRzKCk7DQoJCXRoaXMud29ybGQuRGVz
dHJveUJvZHkodGhpcy5ib2R5KTsNCgkJdGhpcy5ib2R5ID0gbnVsbDsNCgkJdGhpcy5pbnN0LmV4
dHJhLmJveDJkYm9keSA9IG51bGw7DQoJfTsNCgl2YXIgY29sbHJlY3RzID0gW107DQoJYmVoaW5z
dFByb3RvLmNyZWF0ZUJvZHkgPSBmdW5jdGlvbigpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxlZCkN
CgkJCXJldHVybjsNCgkJdmFyIGluc3QgPSB0aGlzLmluc3Q7DQoJCXZhciBoYWRPbGRCb2R5ID0g
ZmFsc2U7DQoJCXZhciBvbGRWZWxvY2l0eSA9IG51bGw7DQoJCXZhciBvbGRPbWVnYSA9IG51bGw7
DQoJCXZhciBpLCBsZW4sIGosIGxlbmosIGssIGxlbmssIHZlYywgYXJyLCBiLCBjLCByYywgcHRz
X2NhY2hlLCBwdHNfY291bnQsIGNvbnZleHBvbHlzLCBjcCwgb2ZmeCwgb2ZmeSwgb2xkQW5nbGU7
DQoJCWlmICh0aGlzLmJvZHkpDQoJCXsNCgkJCWhhZE9sZEJvZHkgPSB0cnVlOw0KCQkJb2xkVmVs
b2NpdHkgPSBiMlZlYzIuR2V0KDAsIDApOw0KCQkJb2xkVmVsb2NpdHkuU2V0Vih0aGlzLmJvZHku
R2V0TGluZWFyVmVsb2NpdHkoKSk7DQoJCQlvbGRPbWVnYSA9IHRoaXMuYm9keS5HZXRBbmd1bGFy
VmVsb2NpdHkoKTsNCgkJCWFyciA9IHRoaXMuam9pbmluZ01lLnZhbHVlc1JlZigpOw0KCQkJZm9y
IChpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCWIgPSBh
cnJbaV0uZXh0cmEuYm94MmRib2R5LmMydXNlcmRhdGE7DQoJCQkJYi5kZXN0cm95TXlKb2ludHMo
KTsNCgkJCX0NCgkJCXRoaXMuZGVzdHJveUJvZHkoKTsNCgkJfQ0KCQl2YXIgZml4RGVmID0gbmV3
IGIyRml4dHVyZURlZjsNCgkJZml4RGVmLmRlbnNpdHkgPSB0aGlzLmRlbnNpdHk7DQoJCWZpeERl
Zi5mcmljdGlvbiA9IHRoaXMuZnJpY3Rpb247DQoJCWZpeERlZi5yZXN0aXR1dGlvbiA9IHRoaXMu
cmVzdGl0dXRpb247DQoJCXZhciBib2R5RGVmID0gbmV3IGIyQm9keURlZjsNCgkJaWYgKHRoaXMu
aW1tb3ZhYmxlKQ0KCQkJYm9keURlZi50eXBlID0gMDsgLy9iMkJvZHlEZWYuYjJfc3RhdGljQm9k
eQ0KCQllbHNlDQoJCQlib2R5RGVmLnR5cGUgPSAyOyAvL2IyQm9keURlZi5iMl9keW5hbWljQm9k
eQ0KCQlpbnN0LnVwZGF0ZV9iYm94KCk7DQoJCWJvZHlEZWYucG9zaXRpb24ueCA9IGluc3QuYnF1
YWQubWlkWCgpICogd29ybGRTY2FsZTsNCgkJYm9keURlZi5wb3NpdGlvbi55ID0gaW5zdC5icXVh
ZC5taWRZKCkgKiB3b3JsZFNjYWxlOw0KCQlib2R5RGVmLmFuZ2xlID0gaW5zdC5hbmdsZTsNCgkJ
Ym9keURlZi5maXhlZFJvdGF0aW9uID0gdGhpcy5wcmV2ZW50Um90YXRpb247DQoJCWJvZHlEZWYu
bGluZWFyRGFtcGluZyA9IHRoaXMubGluZWFyRGFtcGluZzsNCgkJYm9keURlZi5hbmd1bGFyRGFt
cGluZyA9IHRoaXMuYW5ndWxhckRhbXBpbmc7DQoJCWJvZHlEZWYuYnVsbGV0ID0gdGhpcy5idWxs
ZXQ7DQoJCXZhciBoYXNQb2x5ID0gdGhpcy5pbnN0LmNvbGxpc2lvbl9wb2x5ICYmICF0aGlzLmlu
c3QuY29sbGlzaW9uX3BvbHkuaXNfZW1wdHkoKTsNCgkJdGhpcy5ib2R5ID0gdGhpcy53b3JsZC5D
cmVhdGVCb2R5KGJvZHlEZWYpOw0KCQl0aGlzLmJvZHkuYzJ1c2VyZGF0YSA9IHRoaXM7DQoJCXZh
ciB1c2Vjb2xsaXNpb25tYXNrID0gdGhpcy5jb2xsaXNpb25tYXNrOw0KCQlpZiAoIWhhc1BvbHkg
JiYgIXRoaXMuaW5zdC50aWxlbWFwX2V4aXN0cyAmJiB0aGlzLmNvbGxpc2lvbm1hc2sgPT09IDAp
DQoJCQl1c2Vjb2xsaXNpb25tYXNrID0gMTsNCgkJdmFyIGluc3R3ID0gTWF0aC5tYXgoTWF0aC5h
YnMoaW5zdC53aWR0aCksIDEpOw0KCQl2YXIgaW5zdGggPSBNYXRoLm1heChNYXRoLmFicyhpbnN0
LmhlaWdodCksIDEpOw0KCQl2YXIgaXNtaXJyb3JlZCA9IGluc3Qud2lkdGggPCAwOw0KCQl2YXIg
aXNmbGlwcGVkID0gaW5zdC5oZWlnaHQgPCAwOw0KCQlpZiAodXNlY29sbGlzaW9ubWFzayA9PT0g
MCkNCgkJew0KCQkJaWYgKGluc3QudGlsZW1hcF9leGlzdHMpDQoJCQl7DQoJCQkJb2ZmeCA9IGlu
c3QuYnF1YWQubWlkWCgpIC0gaW5zdC54Ow0KCQkJCW9mZnkgPSBpbnN0LmJxdWFkLm1pZFkoKSAt
IGluc3QueTsNCgkJCQlpbnN0LmdldEFsbENvbGxpc2lvblJlY3RzKGNvbGxyZWN0cyk7DQoJCQkJ
YXJyID0gW107DQoJCQkJZm9yIChpID0gMCwgbGVuID0gY29sbHJlY3RzLmxlbmd0aDsgaSA8IGxl
bjsgKytpKQ0KCQkJCXsNCgkJCQkJYyA9IGNvbGxyZWN0c1tpXTsNCgkJCQkJcmMgPSBjLnJjOw0K
CQkJCQlpZiAoYy5wb2x5KQ0KCQkJCQl7DQoJCQkJCQlpZiAoIWMucG9seS5jb252ZXhwb2x5cykN
CgkJCQkJCXsNCgkJCQkJCQlwdHNfY2FjaGUgPSBjLnBvbHkucHRzX2NhY2hlOw0KCQkJCQkJCXB0
c19jb3VudCA9IGMucG9seS5wdHNfY291bnQ7DQoJCQkJCQkJZm9yIChqID0gMDsgaiA8IHB0c19j
b3VudDsgKytqKQ0KCQkJCQkJCXsNCgkJCQkJCQkJYXJyLnB1c2goYjJWZWMyLkdldChwdHNfY2Fj
aGVbaioyXSwgcHRzX2NhY2hlW2oqMisxXSkpOw0KCQkJCQkJCX0NCgkJCQkJCQl2YXIgZmxhZ3Mg
PSAoYy5pZCAmIFRJTEVfRkxBR1NfTUFTSyk7DQoJCQkJCQkJaWYgKGZsYWdzID09PSBUSUxFX0ZM
SVBQRURfSE9SSVpPTlRBTCB8fCBmbGFncyA9PT0gVElMRV9GTElQUEVEX1ZFUlRJQ0FMIHx8IGZs
YWdzID09PSBUSUxFX0ZMSVBQRURfRElBR09OQUwgfHwNCgkJCQkJCQkJKChmbGFncyAmIFRJTEVf
RkxJUFBFRF9IT1JJWk9OVEFMKSAmJiAoZmxhZ3MgJiBUSUxFX0ZMSVBQRURfVkVSVElDQUwpICYm
IChmbGFncyAmIFRJTEVfRkxJUFBFRF9ESUFHT05BTCkpKQ0KCQkJCQkJCXsNCgkJCQkJCQkJYXJy
LnJldmVyc2UoKTsNCgkJCQkJCQl9DQoJCQkJCQkJYy5wb2x5LmNvbnZleHBvbHlzID0gY3IuYjJT
ZXBhcmF0b3IuU2VwYXJhdGUoYXJyLCAocmMucmlnaHQgLSByYy5sZWZ0KSAqIChyYy5ib3R0b20g
LSByYy50b3ApKTsNCgkJCQkJCQlmb3IgKGogPSAwLCBsZW5qID0gYXJyLmxlbmd0aDsgaiA8IGxl
bmo7ICsraikNCgkJCQkJCQkJYjJWZWMyLkZyZWUoYXJyW2pdKTsNCgkJCQkJCQlhcnIubGVuZ3Ro
ID0gMDsNCgkJCQkJCX0NCgkJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBjLnBvbHkuY29udmV4cG9s
eXMubGVuZ3RoOyBqIDwgbGVuajsgKytqKQ0KCQkJCQkJew0KCQkJCQkJCWNwID0gYy5wb2x5LmNv
bnZleHBvbHlzW2pdOw0KOw0KCQkJCQkJCWZvciAoayA9IDAsIGxlbmsgPSBjcC5sZW5ndGg7IGsg
PCBsZW5rOyArK2spDQoJCQkJCQkJew0KCQkJCQkJCQlhcnIucHVzaChiMlZlYzIuR2V0KChyYy5s
ZWZ0ICsgY3Bba10ueCAtIG9mZngpICogd29ybGRTY2FsZSwgKHJjLnRvcCArIGNwW2tdLnkgLSBv
ZmZ5KSAqIHdvcmxkU2NhbGUpKTsNCgkJCQkJCQl9DQoJCQkJCQkJZml4RGVmLnNoYXBlID0gbmV3
IGIyUG9seWdvblNoYXBlOw0KCQkJCQkJCWZpeERlZi5zaGFwZS5TZXRBc0FycmF5KGFyciwgYXJy
Lmxlbmd0aCk7CQkvLyBjb3BpZXMgY29udGVudCBvZiBhcnINCgkJCQkJCQl0aGlzLmJvZHkuQ3Jl
YXRlRml4dHVyZShmaXhEZWYpOw0KCQkJCQkJCWZvciAoayA9IDAsIGxlbmsgPSBhcnIubGVuZ3Ro
OyBrIDwgbGVuazsgKytrKQ0KCQkJCQkJCQliMlZlYzIuRnJlZShhcnJba10pOw0KCQkJCQkJCWFy
ci5sZW5ndGggPSAwOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJ
YXJyLnB1c2goYjJWZWMyLkdldCgocmMubGVmdCAtIG9mZngpICogd29ybGRTY2FsZSwgKHJjLnRv
cCAtIG9mZnkpICogd29ybGRTY2FsZSkpOw0KCQkJCQkJYXJyLnB1c2goYjJWZWMyLkdldCgocmMu
cmlnaHQgLSBvZmZ4KSAqIHdvcmxkU2NhbGUsIChyYy50b3AgLSBvZmZ5KSAqIHdvcmxkU2NhbGUp
KTsNCgkJCQkJCWFyci5wdXNoKGIyVmVjMi5HZXQoKHJjLnJpZ2h0IC0gb2ZmeCkgKiB3b3JsZFNj
YWxlLCAocmMuYm90dG9tIC0gb2ZmeSkgKiB3b3JsZFNjYWxlKSk7DQoJCQkJCQlhcnIucHVzaChi
MlZlYzIuR2V0KChyYy5sZWZ0IC0gb2ZmeCkgKiB3b3JsZFNjYWxlLCAocmMuYm90dG9tIC0gb2Zm
eSkgKiB3b3JsZFNjYWxlKSk7DQoJCQkJCQlmaXhEZWYuc2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hh
cGU7DQoJCQkJCQlmaXhEZWYuc2hhcGUuU2V0QXNBcnJheShhcnIsIGFyci5sZW5ndGgpOwkJLy8g
Y29waWVzIGNvbnRlbnQgb2YgYXJyDQoJCQkJCQl0aGlzLmJvZHkuQ3JlYXRlRml4dHVyZShmaXhE
ZWYpOw0KCQkJCQl9DQoJCQkJCWZvciAoaiA9IDAsIGxlbmogPSBhcnIubGVuZ3RoOyBqIDwgbGVu
ajsgKytqKQ0KCQkJCQkJYjJWZWMyLkZyZWUoYXJyW2pdKTsNCgkJCQkJYXJyLmxlbmd0aCA9IDA7
DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCW9sZEFuZ2xlID0gaW5zdC5hbmdsZTsN
CgkJCQlpbnN0LmFuZ2xlID0gMDsNCgkJCQlpbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQlp
bnN0LnVwZGF0ZV9iYm94KCk7DQoJCQkJb2ZmeCA9IGluc3QuYnF1YWQubWlkWCgpIC0gaW5zdC54
Ow0KCQkJCW9mZnkgPSBpbnN0LmJxdWFkLm1pZFkoKSAtIGluc3QueTsNCgkJCQlpbnN0LmFuZ2xl
ID0gb2xkQW5nbGU7DQoJCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQkJaW5zdC5jb2xs
aXNpb25fcG9seS5jYWNoZV9wb2x5KGlzbWlycm9yZWQgPyAtaW5zdHcgOiBpbnN0dywgaXNmbGlw
cGVkID8gLWluc3RoIDogaW5zdGgsIDApOw0KCQkJCXB0c19jYWNoZSA9IGluc3QuY29sbGlzaW9u
X3BvbHkucHRzX2NhY2hlOw0KCQkJCXB0c19jb3VudCA9IGluc3QuY29sbGlzaW9uX3BvbHkucHRz
X2NvdW50Ow0KCQkJCWFyciA9IFtdOw0KCQkJCWFyci5sZW5ndGggPSBwdHNfY291bnQ7DQoJCQkJ
Zm9yIChpID0gMDsgaSA8IHB0c19jb3VudDsgaSsrKQ0KCQkJCXsNCgkJCQkJYXJyW2ldID0gYjJW
ZWMyLkdldChwdHNfY2FjaGVbaSoyXSAtIG9mZngsIHB0c19jYWNoZVtpKjIrMV0gLSBvZmZ5KTsN
CgkJCQl9DQoJCQkJaWYgKGlzbWlycm9yZWQgIT09IGlzZmxpcHBlZCkNCgkJCQkJYXJyLnJldmVy
c2UoKTsJCS8vIHdyb25nIGNsb2Nrd2lzZSBvcmRlciB3aGVuIGZsaXBwZWQNCgkJCQljb252ZXhw
b2x5cyA9IGNyLmIyU2VwYXJhdG9yLlNlcGFyYXRlKGFyciwgaW5zdHcgKiBpbnN0aCk7DQoJCQkJ
Zm9yIChpID0gMDsgaSA8IHB0c19jb3VudDsgaSsrKQ0KCQkJCQliMlZlYzIuRnJlZShhcnJbaV0p
Ow0KCQkJCWlmIChjb252ZXhwb2x5cy5sZW5ndGgpDQoJCQkJew0KCQkJCQlmb3IgKGkgPSAwLCBs
ZW4gPSBjb252ZXhwb2x5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQkJew0KCQkJCQkJYXJy
ID0gY29udmV4cG9seXNbaV07DQo7DQoJCQkJCQlmb3IgKGogPSAwLCBsZW5qID0gYXJyLmxlbmd0
aDsgaiA8IGxlbmo7IGorKykNCgkJCQkJCXsNCgkJCQkJCQl2ZWMgPSBhcnJbal07DQoJCQkJCQkJ
dmVjLnggKj0gd29ybGRTY2FsZTsNCgkJCQkJCQl2ZWMueSAqPSB3b3JsZFNjYWxlOw0KCQkJCQkJ
fQ0KCQkJCQkJZml4RGVmLnNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlOw0KCQkJCQkJZml4RGVm
LnNoYXBlLlNldEFzQXJyYXkoYXJyLCBhcnIubGVuZ3RoKTsJCS8vIGNvcGllcyBjb250ZW50IG9m
IGFycg0KCQkJCQkJdGhpcy5ib2R5LkNyZWF0ZUZpeHR1cmUoZml4RGVmKTsNCgkJCQkJCWZvciAo
aiA9IDAsIGxlbmogPSBhcnIubGVuZ3RoOyBqIDwgbGVuajsgaisrKQ0KCQkJCQkJCWIyVmVjMi5G
cmVlKGFycltqXSk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJZml4RGVm
LnNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlOw0KCQkJCQlmaXhEZWYuc2hhcGUuU2V0QXNCb3go
aW5zdHcgKiB3b3JsZFNjYWxlICogMC41LCBpbnN0aCAqIHdvcmxkU2NhbGUgKiAwLjUpOw0KCQkJ
CQl0aGlzLmJvZHkuQ3JlYXRlRml4dHVyZShmaXhEZWYpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQll
bHNlIGlmICh1c2Vjb2xsaXNpb25tYXNrID09PSAxKQ0KCQl7DQoJCQlmaXhEZWYuc2hhcGUgPSBu
ZXcgYjJQb2x5Z29uU2hhcGU7DQoJCQlmaXhEZWYuc2hhcGUuU2V0QXNCb3goaW5zdHcgKiB3b3Js
ZFNjYWxlICogMC41LCBpbnN0aCAqIHdvcmxkU2NhbGUgKiAwLjUpOw0KCQkJdGhpcy5ib2R5LkNy
ZWF0ZUZpeHR1cmUoZml4RGVmKTsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCWZpeERlZi5zaGFwZSA9
IG5ldyBiMkNpcmNsZVNoYXBlKE1hdGgubWluKGluc3R3LCBpbnN0aCkgKiB3b3JsZFNjYWxlICog
MC41KTsNCgkJCXRoaXMuYm9keS5DcmVhdGVGaXh0dXJlKGZpeERlZik7DQoJCX0NCgkJaW5zdC5l
eHRyYS5ib3gyZGJvZHkgPSB0aGlzLmJvZHk7DQoJCXRoaXMubGFzdFdpZHRoID0gaW5zdC53aWR0
aDsNCgkJdGhpcy5sYXN0SGVpZ2h0ID0gaW5zdC5oZWlnaHQ7DQoJCWlmIChoYWRPbGRCb2R5KQ0K
CQl7DQoJCQl0aGlzLmJvZHkuU2V0TGluZWFyVmVsb2NpdHkob2xkVmVsb2NpdHkpOw0KCQkJdGhp
cy5ib2R5LlNldEFuZ3VsYXJWZWxvY2l0eShvbGRPbWVnYSk7DQoJCQliMlZlYzIuRnJlZShvbGRW
ZWxvY2l0eSk7DQoJCQl0aGlzLnJlY3JlYXRlTXlKb2ludHMoKTsNCgkJCWFyciA9IHRoaXMuam9p
bmluZ01lLnZhbHVlc1JlZigpOw0KCQkJZm9yIChpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8
IGxlbjsgaSsrKQ0KCQkJew0KCQkJCWIgPSBhcnJbaV0uZXh0cmEuYm94MmRib2R5LmMydXNlcmRh
dGE7DQoJCQkJYi5yZWNyZWF0ZU15Sm9pbnRzKCk7DQoJCQl9DQoJCX0NCgkJY29sbHJlY3RzLmxl
bmd0aCA9IDA7DQoJfTsNCgkvKg0KCWJlaGluc3RQcm90by5kcmF3ID0gZnVuY3Rpb24gKGN0eCkN
Cgl7DQoJCWlmICghdGhpcy5teWNvbnZleHBvbHlzKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLmluc3Qu
dXBkYXRlX2Jib3goKTsNCgkJdmFyIG1pZHggPSB0aGlzLmluc3QuYnF1YWQubWlkWCgpOw0KCQl2
YXIgbWlkeSA9IHRoaXMuaW5zdC5icXVhZC5taWRZKCk7DQoJCXZhciBpLCBsZW4sIGosIGxlbmo7
DQoJCXZhciBzaW5hID0gMDsNCgkJdmFyIGNvc2EgPSAxOw0KCQlpZiAodGhpcy5pbnN0LmFuZ2xl
ICE9PSAwKQ0KCQl7DQoJCQlzaW5hID0gTWF0aC5zaW4odGhpcy5pbnN0LmFuZ2xlKTsNCgkJCWNv
c2EgPSBNYXRoLmNvcyh0aGlzLmluc3QuYW5nbGUpOw0KCQl9DQoJCXZhciBzdHJva2VTdHlsZXMg
PSBbIiNmMDAiLCAiIzBmMCIsICIjMDBmIiwgIiNmZjAiLCAiIzBmZiIsICIjZjBmIl07DQoJCWN0
eC5saW5lV2lkdGggPSAyOw0KCQl2YXIgaSwgbGVuLCBqLCBsZW5qLCBheCwgYXksIGJ4LCBieSwg
cG9seSwgdmEsIHZiOw0KCQlmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLm15Y29udmV4cG9seXMubGVu
Z3RoOyBpIDwgbGVuOyBpKyspDQoJCXsNCgkJCXBvbHkgPSB0aGlzLm15Y29udmV4cG9seXNbaV07
DQoJCQljdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZXNbaV07DQoJCQlmb3IgKGogPSAwLCBs
ZW5qID0gcG9seS5sZW5ndGg7IGogPCBsZW5qOyBqKyspDQoJCQl7DQoJCQkJdmEgPSBwb2x5W2pd
Ow0KCQkJCXZiID0gcG9seVsoaiArIDEpICUgbGVual07DQoJCQkJYXggPSB2YS54IC8gd29ybGRT
Y2FsZTsNCgkJCQlheSA9IHZhLnkgLyB3b3JsZFNjYWxlOw0KCQkJCWJ4ID0gdmIueCAvIHdvcmxk
U2NhbGU7DQoJCQkJYnkgPSB2Yi55IC8gd29ybGRTY2FsZTsNCgkJCQljdHguYmVnaW5QYXRoKCk7
DQoJCQkJY3R4Lm1vdmVUbygoKGF4ICogY29zYSkgLSAoYXkgKiBzaW5hKSkgKyBtaWR4LCAoKGF5
ICogY29zYSkgKyAoYXggKiBzaW5hKSkgKyBtaWR5KTsNCgkJCQljdHgubGluZVRvKCgoYnggKiBj
b3NhKSAtIChieSAqIHNpbmEpKSArIG1pZHgsICgoYnkgKiBjb3NhKSArIChieCAqIHNpbmEpKSAr
IG1pZHkpOw0KCQkJCWN0eC5zdHJva2UoKTsNCgkJCQljdHguY2xvc2VQYXRoKCk7DQoJCQl9DQoJ
CX0NCgl9Ow0KCSovDQoJYmVoaW5zdFByb3RvLnRpY2sgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYg
KCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJCXZhciBpbnN0ID0gdGhpcy5pbnN0Ow0KCQl2
YXIgZHQ7DQoJCWlmICh0aGlzLmJlaGF2aW9yLnN0ZXBwaW5nTW9kZSA9PT0gMCkJCS8vIGZpeGVk
DQoJCQlkdCA9IHRoaXMucnVudGltZS50aW1lc2NhbGUgLyA2MDsNCgkJZWxzZQ0KCQl7DQoJCQlk
dCA9IHRoaXMucnVudGltZS5nZXREdCh0aGlzLmluc3QpOw0KCQkJaWYgKGR0ID4gMSAvIDMwKQ0K
CQkJCWR0ID0gMSAvIDMwOw0KCQl9DQoJCWlmICh0aGlzLnJ1bnRpbWUudGlja2NvdW50ID4gdGhp
cy5iZWhhdmlvci5sYXN0VXBkYXRlVGljayAmJiB0aGlzLnJ1bnRpbWUudGltZXNjYWxlID4gMCkN
CgkJew0KCQkJdGhpcy53b3JsZC5TdGVwKGR0LCB0aGlzLmJlaGF2aW9yLnZlbG9jaXR5SXRlcmF0
aW9ucywgdGhpcy5iZWhhdmlvci5wb3NpdGlvbkl0ZXJhdGlvbnMpOwkJLy8gc3RpbGwgYXBwbHkg
dGltZXNjYWxlDQoJCQl0aGlzLndvcmxkLkNsZWFyRm9yY2VzKCk7DQoJCQl0aGlzLmJlaGF2aW9y
Lmxhc3RVcGRhdGVUaWNrID0gdGhpcy5ydW50aW1lLnRpY2tjb3VudDsNCgkJfQ0KCQlpZiAodGhp
cy5yZWNyZWF0ZUJvZHkgfHwgaW5zdC53aWR0aCAhPT0gdGhpcy5sYXN0V2lkdGggfHwgaW5zdC5o
ZWlnaHQgIT09IHRoaXMubGFzdEhlaWdodA0KCQkJfHwgaW5zdC5jdXJfYW5pbWF0aW9uICE9PSB0
aGlzLmxhc3RBbmltYXRpb24gfHwgaW5zdC5jdXJfZnJhbWUgIT09IHRoaXMubGFzdEFuaW1hdGlv
bkZyYW1lDQoJCQl8fCAoaW5zdC50aWxlbWFwX2V4aXN0cyAmJiBpbnN0LnBoeXNpY3NfY2hhbmdl
ZCkpDQoJCXsNCgkJCXRoaXMuY3JlYXRlQm9keSgpOw0KCQkJdGhpcy5yZWNyZWF0ZUJvZHkgPSBm
YWxzZTsNCgkJCXRoaXMubGFzdEFuaW1hdGlvbiA9IGluc3QuY3VyX2FuaW1hdGlvbjsNCgkJCXRo
aXMubGFzdEFuaW1hdGlvbkZyYW1lID0gaW5zdC5jdXJfZnJhbWU7DQoJCQlpZiAoaW5zdC50aWxl
bWFwX2V4aXN0cyAmJiBpbnN0LnBoeXNpY3NfY2hhbmdlZCkNCgkJCQlpbnN0LnBoeXNpY3NfY2hh
bmdlZCA9IGZhbHNlOw0KCQl9DQoJCXZhciBwb3NfY2hhbmdlZCA9IChpbnN0LnggIT09IHRoaXMu
bGFzdEtub3duWCB8fCBpbnN0LnkgIT09IHRoaXMubGFzdEtub3duWSk7DQoJCXZhciBhbmdsZV9j
aGFuZ2VkID0gKGluc3QuYW5nbGUgIT09IHRoaXMubGFzdEtub3duQW5nbGUpOw0KCQlpZiAocG9z
X2NoYW5nZWQpDQoJCXsNCgkJCWluc3QudXBkYXRlX2Jib3goKTsNCgkJCXZhciBuZXdtaWR4ID0g
aW5zdC5icXVhZC5taWRYKCk7DQoJCQl2YXIgbmV3bWlkeSA9IGluc3QuYnF1YWQubWlkWSgpOw0K
CQkJdmFyIGRpZmZ4ID0gbmV3bWlkeCAtIHRoaXMubGFzdEtub3duWDsNCgkJCXZhciBkaWZmeSA9
IG5ld21pZHkgLSB0aGlzLmxhc3RLbm93blk7DQoJCQl0aGlzLmJvZHkuU2V0UG9zaXRpb24oYjJW
ZWMyLkdldChuZXdtaWR4ICogd29ybGRTY2FsZSwgbmV3bWlkeSAqIHdvcmxkU2NhbGUpKTsNCgkJ
CXRoaXMuYm9keS5TZXRMaW5lYXJWZWxvY2l0eShiMlZlYzIuR2V0KGRpZmZ4LCBkaWZmeSkpOw0K
CQkJdGhpcy5sYXN0VGlja092ZXJyaWRlID0gdHJ1ZTsNCgkJCXRoaXMuYm9keS5TZXRBd2FrZSh0
cnVlKTsNCgkJfQ0KCQllbHNlIGlmICh0aGlzLmxhc3RUaWNrT3ZlcnJpZGUpDQoJCXsNCgkJCXRo
aXMubGFzdFRpY2tPdmVycmlkZSA9IGZhbHNlOw0KCQkJdGhpcy5ib2R5LlNldExpbmVhclZlbG9j
aXR5KGIyVmVjMi5HZXQoMCwgMCkpOw0KCQkJdGhpcy5ib2R5LlNldFBvc2l0aW9uKGIyVmVjMi5H
ZXQoaW5zdC5icXVhZC5taWRYKCkgKiB3b3JsZFNjYWxlLCBpbnN0LmJxdWFkLm1pZFkoKSAqIHdv
cmxkU2NhbGUpKTsNCgkJfQ0KCQlpZiAoYW5nbGVfY2hhbmdlZCkNCgkJew0KCQkJdGhpcy5ib2R5
LlNldEFuZ2xlKGluc3QuYW5nbGUpOw0KCQkJdGhpcy5ib2R5LlNldEF3YWtlKHRydWUpOw0KCQl9
DQoJCXZhciBwb3MgPSB0aGlzLmJvZHkuR2V0UG9zaXRpb24oKTsNCgkJdmFyIG5ld3ggPSBwb3Mu
eCAvIHdvcmxkU2NhbGU7DQoJCXZhciBuZXd5ID0gcG9zLnkgLyB3b3JsZFNjYWxlOw0KCQl2YXIg
bmV3YW5nbGUgPSB0aGlzLmJvZHkuR2V0QW5nbGUoKTsNCgkJaWYgKG5ld3ggIT09IGluc3QueCB8
fCBuZXd5ICE9PSBpbnN0LnkgfHwgbmV3YW5nbGUgIT09IGluc3QuYW5nbGUpDQoJCXsNCgkJCWlu
c3QueCA9IG5ld3g7DQoJCQlpbnN0LnkgPSBuZXd5Ow0KCQkJaW5zdC5hbmdsZSA9IG5ld2FuZ2xl
Ow0KCQkJaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQlpbnN0LnVwZGF0ZV9iYm94KCk7DQoJ
CQl2YXIgZHggPSBpbnN0LmJxdWFkLm1pZFgoKSAtIGluc3QueDsNCgkJCXZhciBkeSA9IGluc3Qu
YnF1YWQubWlkWSgpIC0gaW5zdC55Ow0KCQkJaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKQ0KCQkJ
ew0KCQkJCWluc3QueCAtPSBkeDsNCgkJCQlpbnN0LnkgLT0gZHk7DQoJCQkJaW5zdC5zZXRfYmJv
eF9jaGFuZ2VkKCk7DQoJCQl9DQoJCX0NCgkJdGhpcy5sYXN0S25vd25YID0gaW5zdC54Ow0KCQl0
aGlzLmxhc3RLbm93blkgPSBpbnN0Lnk7DQoJCXRoaXMubGFzdEtub3duQW5nbGUgPSBpbnN0LmFu
Z2xlOw0KCX07DQoJYmVoaW5zdFByb3RvLmdldEluc3RJbWdQb2ludFggPSBmdW5jdGlvbihpbWdw
dCkNCgl7DQoJCWlmIChpbWdwdCA9PT0gLTEgfHwgIXRoaXMuaW5zdC5nZXRJbWFnZVBvaW50KQ0K
CQkJcmV0dXJuIHRoaXMuaW5zdC54Ow0KCQlpZiAoaW1ncHQgPT09IDAgJiYgdGhpcy5ib2R5KQ0K
CQkJcmV0dXJuICh0aGlzLmJvZHkuR2V0UG9zaXRpb24oKS54ICsgdGhpcy5ib2R5LkdldExvY2Fs
Q2VudGVyKCkueCkgLyB3b3JsZFNjYWxlOw0KCQlyZXR1cm4gdGhpcy5pbnN0LmdldEltYWdlUG9p
bnQoaW1ncHQsIHRydWUpOw0KCX07DQoJYmVoaW5zdFByb3RvLmdldEluc3RJbWdQb2ludFkgPSBm
dW5jdGlvbihpbWdwdCkNCgl7DQoJCWlmIChpbWdwdCA9PT0gLTEgfHwgIXRoaXMuaW5zdC5nZXRJ
bWFnZVBvaW50KQ0KCQkJcmV0dXJuIHRoaXMuaW5zdC55Ow0KCQlpZiAoaW1ncHQgPT09IDAgJiYg
dGhpcy5ib2R5KQ0KCQkJcmV0dXJuICh0aGlzLmJvZHkuR2V0UG9zaXRpb24oKS55ICsgdGhpcy5i
b2R5LkdldExvY2FsQ2VudGVyKCkueSkgLyB3b3JsZFNjYWxlOw0KCQlyZXR1cm4gdGhpcy5pbnN0
LmdldEltYWdlUG9pbnQoaW1ncHQsIGZhbHNlKTsNCgl9Ow0KCWZ1bmN0aW9uIENuZHMoKSB7fTsN
CglDbmRzLnByb3RvdHlwZS5Jc1NsZWVwaW5nID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhp
cy5lbmFibGVkKQ0KCQkJcmV0dXJuIGZhbHNlOw0KCQlyZXR1cm4gIXRoaXMuYm9keS5Jc0F3YWtl
KCk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Db21wYXJlVmVsb2NpdHkgPSBmdW5jdGlvbiAod2hp
Y2hfLCBjbXBfLCB4XykNCgl7DQoJCWlmICghdGhpcy5lbmFibGVkKQ0KCQkJcmV0dXJuIGZhbHNl
Ow0KCQl2YXIgdmVsb2NpdHlfdmVjID0gdGhpcy5ib2R5LkdldExpbmVhclZlbG9jaXR5KCk7DQoJ
CXZhciB2LCB2eCwgdnk7DQoJCWlmICh3aGljaF8gPT09IDApCQkvLyBYIHZlbG9jaXR5DQoJCQl2
ID0gdmVsb2NpdHlfdmVjLnggLyB3b3JsZFNjYWxlOw0KCQllbHNlIGlmICh3aGljaF8gPT09IDEp
CS8vIFkgdmVsb2NpdHkNCgkJCXYgPSB2ZWxvY2l0eV92ZWMueSAvIHdvcmxkU2NhbGU7DQoJCWVs
c2UJCQkJCS8vIE92ZXJhbGwgdmVsb2NpdHkNCgkJew0KCQkJdnggPSB2ZWxvY2l0eV92ZWMueCAv
IHdvcmxkU2NhbGU7DQoJCQl2eSA9IHZlbG9jaXR5X3ZlYy55IC8gd29ybGRTY2FsZTsNCgkJCXYg
PSBjci5kaXN0YW5jZVRvKDAsIDAsIHZ4LCB2eSk7DQoJCX0NCgkJcmV0dXJuIGNyLmRvX2NtcCh2
LCBjbXBfLCB4Xyk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Db21wYXJlQW5ndWxhclZlbG9jaXR5
ID0gZnVuY3Rpb24gKGNtcF8sIHhfKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1
cm4gZmFsc2U7DQoJCXZhciBhdiA9IGNyLnRvX2RlZ3JlZXModGhpcy5ib2R5LkdldEFuZ3VsYXJW
ZWxvY2l0eSgpKTsNCgkJcmV0dXJuIGNyLmRvX2NtcChhdiwgY21wXywgeF8pOw0KCX07DQoJQ25k
cy5wcm90b3R5cGUuQ29tcGFyZU1hc3MgPSBmdW5jdGlvbiAoY21wXywgeF8pDQoJew0KCQlpZiAo
IXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybiBmYWxzZTsNCgkJdmFyIG1hc3MgPSB0aGlzLmJvZHku
R2V0TWFzcygpIC8gd29ybGRTY2FsZTsNCgkJcmV0dXJuIGNyLmRvX2NtcChtYXNzLCBjbXBfLCB4
Xyk7DQoJfTsNCglDbmRzLnByb3RvdHlwZS5Jc0VuYWJsZWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJ
cmV0dXJuIHRoaXMuZW5hYmxlZDsNCgl9Ow0KCWJlaGF2aW9yUHJvdG8uY25kcyA9IG5ldyBDbmRz
KCk7DQoJZnVuY3Rpb24gQWN0cygpIHt9Ow0KCUFjdHMucHJvdG90eXBlLkFwcGx5Rm9yY2UgPSBm
dW5jdGlvbiAoZngsIGZ5LCBpbWdwdCkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVkKQ0KCQkJcmV0
dXJuOw0KCQl2YXIgeCA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WChpbWdwdCk7DQoJCXZhciB5ID0g
dGhpcy5nZXRJbnN0SW1nUG9pbnRZKGltZ3B0KTsNCgkJdGhpcy5ib2R5LkFwcGx5Rm9yY2UoYjJW
ZWMyLkdldChmeCwgZnkpLCBiMlZlYzIuR2V0KHggKiB3b3JsZFNjYWxlLCB5ICogd29ybGRTY2Fs
ZSkpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuQXBwbHlGb3JjZVRvd2FyZCA9IGZ1bmN0aW9uIChm
LCBweCwgcHksIGltZ3B0KQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJ
CXZhciB4ID0gdGhpcy5nZXRJbnN0SW1nUG9pbnRYKGltZ3B0KTsNCgkJdmFyIHkgPSB0aGlzLmdl
dEluc3RJbWdQb2ludFkoaW1ncHQpOw0KCQl2YXIgYSA9IGNyLmFuZ2xlVG8oeCwgeSwgcHgsIHB5
KTsNCgkJdGhpcy5ib2R5LkFwcGx5Rm9yY2UoYjJWZWMyLkdldChNYXRoLmNvcyhhKSAqIGYsIE1h
dGguc2luKGEpICogZiksIGIyVmVjMi5HZXQoeCAqIHdvcmxkU2NhbGUsIHkgKiB3b3JsZFNjYWxl
KSk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5BcHBseUZvcmNlQXRBbmdsZSA9IGZ1bmN0aW9uIChm
LCBhLCBpbWdwdCkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVkKQ0KCQkJcmV0dXJuOw0KCQlhID0g
Y3IudG9fcmFkaWFucyhhKTsNCgkJdmFyIHggPSB0aGlzLmdldEluc3RJbWdQb2ludFgoaW1ncHQp
Ow0KCQl2YXIgeSA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WShpbWdwdCk7DQoJCXRoaXMuYm9keS5B
cHBseUZvcmNlKGIyVmVjMi5HZXQoTWF0aC5jb3MoYSkgKiBmLCBNYXRoLnNpbihhKSAqIGYpLCBi
MlZlYzIuR2V0KHggKiB3b3JsZFNjYWxlLCB5ICogd29ybGRTY2FsZSkpOw0KCX07DQoJQWN0cy5w
cm90b3R5cGUuQXBwbHlJbXB1bHNlID0gZnVuY3Rpb24gKGZ4LCBmeSwgaW1ncHQpDQoJew0KCQlp
ZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJdmFyIHggPSB0aGlzLmdldEluc3RJbWdQ
b2ludFgoaW1ncHQpOw0KCQl2YXIgeSA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WShpbWdwdCk7DQoJ
CXRoaXMuYm9keS5BcHBseUltcHVsc2UoYjJWZWMyLkdldChmeCwgZnkpLCBiMlZlYzIuR2V0KHgg
KiB3b3JsZFNjYWxlLCB5ICogd29ybGRTY2FsZSkpOw0KCQl0aGlzLmxhc3RUaWNrT3ZlcnJpZGUg
PSBmYWxzZTsNCgkJdGhpcy5sYXN0S25vd25YID0gdGhpcy5pbnN0Lng7DQoJCXRoaXMubGFzdEtu
b3duWSA9IHRoaXMuaW5zdC55Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuQXBwbHlJbXB1bHNlVG93
YXJkID0gZnVuY3Rpb24gKGYsIHB4LCBweSwgaW1ncHQpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxl
ZCkNCgkJCXJldHVybjsNCgkJdmFyIHggPSB0aGlzLmdldEluc3RJbWdQb2ludFgoaW1ncHQpOw0K
CQl2YXIgeSA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WShpbWdwdCk7DQoJCXZhciBhID0gY3IuYW5n
bGVUbyh4LCB5LCBweCwgcHkpOw0KCQl0aGlzLmJvZHkuQXBwbHlJbXB1bHNlKGIyVmVjMi5HZXQo
TWF0aC5jb3MoYSkgKiBmLCBNYXRoLnNpbihhKSAqIGYpLCBiMlZlYzIuR2V0KHggKiB3b3JsZFNj
YWxlLCB5ICogd29ybGRTY2FsZSkpOw0KCQl0aGlzLmxhc3RUaWNrT3ZlcnJpZGUgPSBmYWxzZTsN
CgkJdGhpcy5sYXN0S25vd25YID0gdGhpcy5pbnN0Lng7DQoJCXRoaXMubGFzdEtub3duWSA9IHRo
aXMuaW5zdC55Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuQXBwbHlJbXB1bHNlQXRBbmdsZSA9IGZ1
bmN0aW9uIChmLCBhLCBpbWdwdCkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVkKQ0KCQkJcmV0dXJu
Ow0KCQlhID0gY3IudG9fcmFkaWFucyhhKTsNCgkJdmFyIHggPSB0aGlzLmdldEluc3RJbWdQb2lu
dFgoaW1ncHQpOw0KCQl2YXIgeSA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WShpbWdwdCk7DQoJCXRo
aXMuYm9keS5BcHBseUltcHVsc2UoYjJWZWMyLkdldChNYXRoLmNvcyhhKSAqIGYsIE1hdGguc2lu
KGEpICogZiksIGIyVmVjMi5HZXQoeCAqIHdvcmxkU2NhbGUsIHkgKiB3b3JsZFNjYWxlKSk7DQoJ
CXRoaXMubGFzdFRpY2tPdmVycmlkZSA9IGZhbHNlOw0KCQl0aGlzLmxhc3RLbm93blggPSB0aGlz
Lmluc3QueDsNCgkJdGhpcy5sYXN0S25vd25ZID0gdGhpcy5pbnN0Lnk7DQoJfTsNCglBY3RzLnBy
b3RvdHlwZS5BcHBseVRvcnF1ZSA9IGZ1bmN0aW9uIChtKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJs
ZWQpDQoJCQlyZXR1cm47DQoJCXRoaXMuYm9keS5BcHBseVRvcnF1ZShjci50b19yYWRpYW5zKG0p
KTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkFwcGx5VG9ycXVlVG9BbmdsZSA9IGZ1bmN0aW9uICht
LCBhKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJCW0gPSBjci50b19y
YWRpYW5zKG0pOw0KCQlhID0gY3IudG9fcmFkaWFucyhhKTsNCgkJaWYgKGNyLmFuZ2xlQ2xvY2t3
aXNlKHRoaXMuaW5zdC5hbmdsZSwgYSkpDQoJCQl0aGlzLmJvZHkuQXBwbHlUb3JxdWUoLW0pOw0K
CQllbHNlDQoJCQl0aGlzLmJvZHkuQXBwbHlUb3JxdWUobSk7DQoJfTsNCglBY3RzLnByb3RvdHlw
ZS5BcHBseVRvcnF1ZVRvUG9zaXRpb24gPSBmdW5jdGlvbiAobSwgeCwgeSkNCgl7DQoJCWlmICgh
dGhpcy5lbmFibGVkKQ0KCQkJcmV0dXJuOw0KCQltID0gY3IudG9fcmFkaWFucyhtKTsNCgkJdmFy
IGEgPSBjci5hbmdsZVRvKHRoaXMuaW5zdC54LCB0aGlzLmluc3QueSwgeCwgeSk7DQoJCWlmIChj
ci5hbmdsZUNsb2Nrd2lzZSh0aGlzLmluc3QuYW5nbGUsIGEpKQ0KCQkJdGhpcy5ib2R5LkFwcGx5
VG9ycXVlKC1tKTsNCgkJZWxzZQ0KCQkJdGhpcy5ib2R5LkFwcGx5VG9ycXVlKG0pOw0KCX07DQoJ
QWN0cy5wcm90b3R5cGUuU2V0QW5ndWxhclZlbG9jaXR5ID0gZnVuY3Rpb24gKHYpDQoJew0KCQlp
ZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJdGhpcy5ib2R5LlNldEFuZ3VsYXJWZWxv
Y2l0eShjci50b19yYWRpYW5zKHYpKTsNCgkJdGhpcy5ib2R5LlNldEF3YWtlKHRydWUpOw0KCX07
DQoJQWN0cy5wcm90b3R5cGUuQ3JlYXRlRGlzdGFuY2VKb2ludCA9IGZ1bmN0aW9uIChpbWdwdCwg
b2JqLCBvYmppbWdwdCwgZGFtcGluZywgZnJlcSkNCgl7DQoJCWlmICghb2JqIHx8ICF0aGlzLmVu
YWJsZWQpDQoJCQlyZXR1cm47DQoJCXZhciBvdGhlcmluc3QgPSBvYmouZ2V0Rmlyc3RQaWNrZWQo
dGhpcy5pbnN0KTsNCgkJaWYgKCFvdGhlcmluc3QgfHwgb3RoZXJpbnN0ID09IHRoaXMuaW5zdCkN
CgkJCXJldHVybjsNCgkJaWYgKCFvdGhlcmluc3QuZXh0cmEuYm94MmRib2R5KQ0KCQkJcmV0dXJu
OwkJLy8gbm8gcGh5c2ljcyBiZWhhdmlvciBvbiBvdGhlciBvYmplY3QNCgkJdGhpcy5teUNyZWF0
ZWRKb2ludHMucHVzaCh7dHlwZTogMCwgcGFyYW1zOiBbaW1ncHQsIG90aGVyaW5zdC51aWQsIG9i
amltZ3B0LCBkYW1waW5nLCBmcmVxXX0pOw0KCQl0aGlzLmRvQ3JlYXRlRGlzdGFuY2VKb2ludChp
bWdwdCwgb3RoZXJpbnN0LnVpZCwgb2JqaW1ncHQsIGRhbXBpbmcsIGZyZXEpOw0KCX07DQoJYmVo
aW5zdFByb3RvLmRvQ3JlYXRlRGlzdGFuY2VKb2ludCA9IGZ1bmN0aW9uIChpbWdwdCwgb3RoZXJp
bnN0dWlkLCBvYmppbWdwdCwgZGFtcGluZywgZnJlcSkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVk
KQ0KCQkJcmV0dXJuOw0KCQl2YXIgb3RoZXJpbnN0ID0gdGhpcy5ydW50aW1lLmdldE9iamVjdEJ5
VUlEKG90aGVyaW5zdHVpZCk7DQoJCWlmICghb3RoZXJpbnN0IHx8IG90aGVyaW5zdCA9PSB0aGlz
Lmluc3QgfHwgIW90aGVyaW5zdC5leHRyYS5ib3gyZGJvZHkpDQoJCQlyZXR1cm47DQoJCW90aGVy
aW5zdC5leHRyYS5ib3gyZGJvZHkuYzJ1c2VyZGF0YS5qb2luaW5nTWUuYWRkKHRoaXMuaW5zdCk7
DQoJCXZhciBteXggPSB0aGlzLmdldEluc3RJbWdQb2ludFgoaW1ncHQpOw0KCQl2YXIgbXl5ID0g
dGhpcy5nZXRJbnN0SW1nUG9pbnRZKGltZ3B0KTsNCgkJdmFyIHRoZWlyeCwgdGhlaXJ5Ow0KCQlp
ZiAob3RoZXJpbnN0LmdldEltYWdlUG9pbnQpDQoJCXsNCgkJCXRoZWlyeCA9IG90aGVyaW5zdC5n
ZXRJbWFnZVBvaW50KG9iamltZ3B0LCB0cnVlKTsNCgkJCXRoZWlyeSA9IG90aGVyaW5zdC5nZXRJ
bWFnZVBvaW50KG9iamltZ3B0LCBmYWxzZSk7DQoJCX0NCgkJZWxzZQ0KCQl7DQoJCQl0aGVpcngg
PSBvdGhlcmluc3QueDsNCgkJCXRoZWlyeSA9IG90aGVyaW5zdC55Ow0KCQl9DQoJCXZhciBkeCA9
IG15eCAtIHRoZWlyeDsNCgkJdmFyIGR5ID0gbXl5IC0gdGhlaXJ5Ow0KCQl2YXIgam9pbnREZWYg
PSBuZXcgYjJEaXN0YW5jZUpvaW50RGVmKCk7DQoJCWpvaW50RGVmLkluaXRpYWxpemUodGhpcy5i
b2R5LCBvdGhlcmluc3QuZXh0cmEuYm94MmRib2R5LCBiMlZlYzIuR2V0KG15eCAqIHdvcmxkU2Nh
bGUsIG15eSAqIHdvcmxkU2NhbGUpLCBiMlZlYzIuR2V0KHRoZWlyeCAqIHdvcmxkU2NhbGUsIHRo
ZWlyeSAqIHdvcmxkU2NhbGUpKTsNCgkJam9pbnREZWYubGVuZ3RoID0gTWF0aC5zcXJ0KGR4KmR4
ICsgZHkqZHkpICogd29ybGRTY2FsZTsNCgkJam9pbnREZWYuZGFtcGluZ1JhdGlvID0gZGFtcGlu
ZzsNCgkJam9pbnREZWYuZnJlcXVlbmN5SHogPSBmcmVxOw0KCQl0aGlzLm15Sm9pbnRzLnB1c2go
dGhpcy53b3JsZC5DcmVhdGVKb2ludChqb2ludERlZikpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUu
Q3JlYXRlUmV2b2x1dGVKb2ludCA9IGZ1bmN0aW9uIChpbWdwdCwgb2JqKQ0KCXsNCgkJaWYgKCFv
YmogfHwgIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJdmFyIG90aGVyaW5zdCA9IG9iai5n
ZXRGaXJzdFBpY2tlZCh0aGlzLmluc3QpOw0KCQlpZiAoIW90aGVyaW5zdCB8fCBvdGhlcmluc3Qg
PT0gdGhpcy5pbnN0KQ0KCQkJcmV0dXJuOw0KCQlpZiAoIW90aGVyaW5zdC5leHRyYS5ib3gyZGJv
ZHkpDQoJCQlyZXR1cm47CQkvLyBubyBwaHlzaWNzIGJlaGF2aW9yIG9uIG90aGVyIG9iamVjdA0K
CQl0aGlzLm15Q3JlYXRlZEpvaW50cy5wdXNoKHt0eXBlOiAxLCBwYXJhbXM6IFtpbWdwdCwgb3Ro
ZXJpbnN0LnVpZF19KTsNCgkJdGhpcy5kb0NyZWF0ZVJldm9sdXRlSm9pbnQoaW1ncHQsIG90aGVy
aW5zdC51aWQpOw0KCX07DQoJYmVoaW5zdFByb3RvLmRvQ3JlYXRlUmV2b2x1dGVKb2ludCA9IGZ1
bmN0aW9uIChpbWdwdCwgb3RoZXJpbnN0dWlkKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJ
CQlyZXR1cm47DQoJCXZhciBvdGhlcmluc3QgPSB0aGlzLnJ1bnRpbWUuZ2V0T2JqZWN0QnlVSUQo
b3RoZXJpbnN0dWlkKTsNCgkJaWYgKCFvdGhlcmluc3QgfHwgb3RoZXJpbnN0ID09IHRoaXMuaW5z
dCB8fCAhb3RoZXJpbnN0LmV4dHJhLmJveDJkYm9keSkNCgkJCXJldHVybjsNCgkJb3RoZXJpbnN0
LmV4dHJhLmJveDJkYm9keS5jMnVzZXJkYXRhLmpvaW5pbmdNZS5hZGQodGhpcy5pbnN0KTsNCgkJ
dmFyIG15eCA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WChpbWdwdCk7DQoJCXZhciBteXkgPSB0aGlz
LmdldEluc3RJbWdQb2ludFkoaW1ncHQpOw0KCQl2YXIgam9pbnREZWYgPSBuZXcgYjJSZXZvbHV0
ZUpvaW50RGVmKCk7DQoJCWpvaW50RGVmLkluaXRpYWxpemUodGhpcy5ib2R5LCBvdGhlcmluc3Qu
ZXh0cmEuYm94MmRib2R5LCBiMlZlYzIuR2V0KG15eCAqIHdvcmxkU2NhbGUsIG15eSAqIHdvcmxk
U2NhbGUpKTsNCgkJdGhpcy5teUpvaW50cy5wdXNoKHRoaXMud29ybGQuQ3JlYXRlSm9pbnQoam9p
bnREZWYpKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLkNyZWF0ZUxpbWl0ZWRSZXZvbHV0ZUpvaW50
ID0gZnVuY3Rpb24gKGltZ3B0LCBvYmosIGxvd2VyLCB1cHBlcikNCgl7DQoJCWlmICghb2JqIHx8
ICF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJCXZhciBvdGhlcmluc3QgPSBvYmouZ2V0Rmly
c3RQaWNrZWQodGhpcy5pbnN0KTsNCgkJaWYgKCFvdGhlcmluc3QgfHwgb3RoZXJpbnN0ID09IHRo
aXMuaW5zdCkNCgkJCXJldHVybjsNCgkJaWYgKCFvdGhlcmluc3QuZXh0cmEuYm94MmRib2R5KQ0K
CQkJcmV0dXJuOwkJLy8gbm8gcGh5c2ljcyBiZWhhdmlvciBvbiBvdGhlciBvYmplY3QNCgkJdGhp
cy5teUNyZWF0ZWRKb2ludHMucHVzaCh7dHlwZTogMiwgcGFyYW1zOiBbaW1ncHQsIG90aGVyaW5z
dC51aWQsIGxvd2VyLCB1cHBlcl19KTsNCgkJdGhpcy5kb0NyZWF0ZUxpbWl0ZWRSZXZvbHV0ZUpv
aW50KGltZ3B0LCBvdGhlcmluc3QudWlkLCBsb3dlciwgdXBwZXIpOw0KCX07DQoJYmVoaW5zdFBy
b3RvLmRvQ3JlYXRlTGltaXRlZFJldm9sdXRlSm9pbnQgPSBmdW5jdGlvbiAoaW1ncHQsIG90aGVy
aW5zdHVpZCwgbG93ZXIsIHVwcGVyKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1
cm47DQoJCXZhciBvdGhlcmluc3QgPSB0aGlzLnJ1bnRpbWUuZ2V0T2JqZWN0QnlVSUQob3RoZXJp
bnN0dWlkKTsNCgkJaWYgKCFvdGhlcmluc3QgfHwgb3RoZXJpbnN0ID09IHRoaXMuaW5zdCB8fCAh
b3RoZXJpbnN0LmV4dHJhLmJveDJkYm9keSkNCgkJCXJldHVybjsNCgkJb3RoZXJpbnN0LmV4dHJh
LmJveDJkYm9keS5jMnVzZXJkYXRhLmpvaW5pbmdNZS5hZGQodGhpcy5pbnN0KTsNCgkJdmFyIG15
eCA9IHRoaXMuZ2V0SW5zdEltZ1BvaW50WChpbWdwdCk7DQoJCXZhciBteXkgPSB0aGlzLmdldElu
c3RJbWdQb2ludFkoaW1ncHQpOw0KCQl2YXIgam9pbnREZWYgPSBuZXcgYjJSZXZvbHV0ZUpvaW50
RGVmKCk7DQoJCWpvaW50RGVmLkluaXRpYWxpemUodGhpcy5ib2R5LCBvdGhlcmluc3QuZXh0cmEu
Ym94MmRib2R5LCBiMlZlYzIuR2V0KG15eCAqIHdvcmxkU2NhbGUsIG15eSAqIHdvcmxkU2NhbGUp
KTsNCgkJam9pbnREZWYuZW5hYmxlTGltaXQgPSB0cnVlOw0KCQlqb2ludERlZi5sb3dlckFuZ2xl
ID0gY3IudG9fcmFkaWFucyhsb3dlcik7DQoJCWpvaW50RGVmLnVwcGVyQW5nbGUgPSBjci50b19y
YWRpYW5zKHVwcGVyKTsNCgkJdGhpcy5teUpvaW50cy5wdXNoKHRoaXMud29ybGQuQ3JlYXRlSm9p
bnQoam9pbnREZWYpKTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFdvcmxkR3Jhdml0eSA9IGZ1
bmN0aW9uIChnKQ0KCXsNCgkJaWYgKGcgPT09IHRoaXMuYmVoYXZpb3Iud29ybGRHKQ0KCQkJcmV0
dXJuOw0KCQl0aGlzLndvcmxkLlNldEdyYXZpdHkoYjJWZWMyLkdldCgwLCBnKSk7DQoJCXRoaXMu
YmVoYXZpb3Iud29ybGRHID0gZzsNCgkJdmFyIGksIGxlbiwgYXJyID0gdGhpcy5iZWhhdmlvci5t
eV9pbnN0YW5jZXMudmFsdWVzUmVmKCk7DQoJCWZvciAoaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7
IGkgPCBsZW47IGkrKykNCgkJew0KCQkJaWYgKGFycltpXS5leHRyYS5ib3gyZGJvZHkpDQoJCQkJ
YXJyW2ldLmV4dHJhLmJveDJkYm9keS5TZXRBd2FrZSh0cnVlKTsNCgkJfQ0KCX07DQoJQWN0cy5w
cm90b3R5cGUuU2V0U3RlcHBpbmdNb2RlID0gZnVuY3Rpb24gKG1vZGUpDQoJew0KCQl0aGlzLmJl
aGF2aW9yLnN0ZXBwaW5nTW9kZSA9IG1vZGU7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRJdGVy
YXRpb25zID0gZnVuY3Rpb24gKHZlbCwgcG9zKQ0KCXsNCgkJaWYgKHZlbCA8IDEpIHZlbCA9IDE7
DQoJCWlmIChwb3MgPCAxKSBwb3MgPSAxOw0KCQl0aGlzLmJlaGF2aW9yLnZlbG9jaXR5SXRlcmF0
aW9ucyA9IHZlbDsNCgkJdGhpcy5iZWhhdmlvci5wb3NpdGlvbkl0ZXJhdGlvbnMgPSBwb3M7DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5TZXRWZWxvY2l0eSA9IGZ1bmN0aW9uICh2eCwgdnkpDQoJew0K
CQlpZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJdGhpcy5ib2R5LlNldExpbmVhclZl
bG9jaXR5KGIyVmVjMi5HZXQodnggKiB3b3JsZFNjYWxlLCB2eSAqIHdvcmxkU2NhbGUpKTsNCgkJ
dGhpcy5ib2R5LlNldEF3YWtlKHRydWUpOw0KCQl0aGlzLmxhc3RUaWNrT3ZlcnJpZGUgPSBmYWxz
ZTsNCgkJdGhpcy5sYXN0S25vd25YID0gdGhpcy5pbnN0Lng7DQoJCXRoaXMubGFzdEtub3duWSA9
IHRoaXMuaW5zdC55Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0RGVuc2l0eSA9IGZ1bmN0aW9u
IChkKQ0KCXsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJCWlmICh0aGlzLmRl
bnNpdHkgPT09IGQpDQoJCQlyZXR1cm47DQoJCXRoaXMuZGVuc2l0eSA9IGQ7DQoJCXRoaXMucmVj
cmVhdGVCb2R5ID0gdHJ1ZTsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldEZyaWN0aW9uID0gZnVu
Y3Rpb24gKGYpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJaWYgKHRo
aXMuZnJpY3Rpb24gPT09IGYpDQoJCQlyZXR1cm47DQoJCXRoaXMuZnJpY3Rpb24gPSBmOw0KCQl0
aGlzLnJlY3JlYXRlQm9keSA9IHRydWU7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRFbGFzdGlj
aXR5ID0gZnVuY3Rpb24gKGUpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsN
CgkJaWYgKHRoaXMucmVzdGl0dXRpb24gPT09IGUpDQoJCQlyZXR1cm47DQoJCXRoaXMucmVzdGl0
dXRpb24gPSBlOw0KCQl0aGlzLnJlY3JlYXRlQm9keSA9IHRydWU7DQoJfTsNCglBY3RzLnByb3Rv
dHlwZS5TZXRMaW5lYXJEYW1waW5nID0gZnVuY3Rpb24gKGxkKQ0KCXsNCgkJaWYgKCF0aGlzLmVu
YWJsZWQpDQoJCQlyZXR1cm47DQoJCWlmICh0aGlzLmxpbmVhckRhbXBpbmcgPT09IGxkKQ0KCQkJ
cmV0dXJuOw0KCQl0aGlzLmxpbmVhckRhbXBpbmcgPSBsZDsNCgkJdGhpcy5ib2R5LlNldExpbmVh
ckRhbXBpbmcobGQpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0QW5ndWxhckRhbXBpbmcgPSBm
dW5jdGlvbiAoYWQpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsNCgkJaWYg
KHRoaXMuYW5ndWxhckRhbXBpbmcgPT09IGFkKQ0KCQkJcmV0dXJuOw0KCQl0aGlzLmFuZ3VsYXJE
YW1waW5nID0gYWQ7DQoJCXRoaXMuYm9keS5TZXRBbmd1bGFyRGFtcGluZyhhZCk7DQoJfTsNCglB
Y3RzLnByb3RvdHlwZS5TZXRJbW1vdmFibGUgPSBmdW5jdGlvbiAoaSkNCgl7DQoJCWlmICghdGhp
cy5lbmFibGVkKQ0KCQkJcmV0dXJuOw0KCQlpZiAodGhpcy5pbW1vdmFibGUgPT09IChpICE9PSAw
KSkNCgkJCXJldHVybjsNCgkJdGhpcy5pbW1vdmFibGUgPSAoaSAhPT0gMCk7DQoJCXRoaXMuYm9k
eS5TZXRUeXBlKHRoaXMuaW1tb3ZhYmxlID8gMCAvKmIyQm9keURlZi5iMl9zdGF0aWNCb2R5Ki8g
OiAyIC8qYjJCb2R5RGVmLmIyX2R5bmFtaWNCb2R5Ki8pOw0KCQl0aGlzLmJvZHkuU2V0QXdha2Uo
dHJ1ZSk7DQoJfTsNCglmdW5jdGlvbiBTZXRDb2xsaXNpb25zRW5hYmxlZCh0eXBlQSwgdHlwZUIs
IHN0YXRlKQ0KCXsNCgkJdmFyIHM7DQoJCWlmIChzdGF0ZSkNCgkJew0KCQkJcyA9IHR5cGVBLmV4
dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9ucyJdOw0KCQkJaWYgKHMpDQoJCQkJcy5yZW1v
dmUodHlwZUIpOw0KCQkJcyA9IHR5cGVCLmV4dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9u
cyJdOw0KCQkJaWYgKHMpDQoJCQkJcy5yZW1vdmUodHlwZUEpOw0KCQl9DQoJCWVsc2UNCgkJew0K
CQkJaWYgKCF0eXBlQS5leHRyYVsiUGh5c2ljc19EaXNhYmxlZENvbGxpc2lvbnMiXSkNCgkJCQl0
eXBlQS5leHRyYVsiUGh5c2ljc19EaXNhYmxlZENvbGxpc2lvbnMiXSA9IG5ldyBjci5PYmplY3RT
ZXQoKTsNCgkJCXR5cGVBLmV4dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9ucyJdLmFkZCh0
eXBlQik7DQoJCQlpZiAoIXR5cGVCLmV4dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9ucyJd
KQ0KCQkJCXR5cGVCLmV4dHJhWyJQaHlzaWNzX0Rpc2FibGVkQ29sbGlzaW9ucyJdID0gbmV3IGNy
Lk9iamVjdFNldCgpOw0KCQkJdHlwZUIuZXh0cmFbIlBoeXNpY3NfRGlzYWJsZWRDb2xsaXNpb25z
Il0uYWRkKHR5cGVBKTsNCgkJfQ0KCX07DQoJQWN0cy5wcm90b3R5cGUuRW5hYmxlQ29sbGlzaW9u
cyA9IGZ1bmN0aW9uIChvYmosIHN0YXRlKQ0KCXsNCgkJaWYgKCFvYmogfHwgIXRoaXMuZW5hYmxl
ZCkNCgkJCXJldHVybjsNCgkJdmFyIGksIGxlbjsNCgkJaWYgKG9iai5pc19mYW1pbHkpDQoJCXsN
CgkJCWZvciAoaSA9IDAsIGxlbiA9IG9iai5tZW1iZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0K
CQkJew0KCQkJCVNldENvbGxpc2lvbnNFbmFibGVkKHRoaXMuaW5zdC50eXBlLCBvYmoubWVtYmVy
c1tpXSwgc3RhdGUgIT09IDApOw0KCQkJfQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJU2V0Q29sbGlz
aW9uc0VuYWJsZWQodGhpcy5pbnN0LnR5cGUsIG9iaiwgc3RhdGUgIT09IDApOw0KCQl9DQoJCXRo
aXMuYmVoYXZpb3IuYWxsQ29sbGlzaW9uc0VuYWJsZWQgPSBmYWxzZTsNCgl9Ow0KCUFjdHMucHJv
dG90eXBlLlNldFByZXZlbnRSb3RhdGUgPSBmdW5jdGlvbiAoaSkNCgl7DQoJCWlmICghdGhpcy5l
bmFibGVkKQ0KCQkJcmV0dXJuOw0KCQlpZiAodGhpcy5wcmV2ZW50Um90YXRpb24gPT09IChpICE9
PSAwKSkNCgkJCXJldHVybjsNCgkJdGhpcy5wcmV2ZW50Um90YXRpb24gPSAoaSAhPT0gMCk7DQoJ
CXRoaXMuYm9keS5TZXRGaXhlZFJvdGF0aW9uKHRoaXMucHJldmVudFJvdGF0aW9uKTsNCgkJdGhp
cy5ib2R5Lm1fdG9ycXVlID0gMDsNCgkJdGhpcy5ib2R5LlNldEFuZ3VsYXJWZWxvY2l0eSgwKTsN
CgkJdGhpcy5ib2R5LlNldEF3YWtlKHRydWUpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0QnVs
bGV0ID0gZnVuY3Rpb24gKGkpDQoJew0KCQlpZiAoIXRoaXMuZW5hYmxlZCkNCgkJCXJldHVybjsN
CgkJaWYgKHRoaXMuYnVsbGV0ID09PSAoaSAhPT0gMCkpDQoJCQlyZXR1cm47DQoJCXRoaXMuYnVs
bGV0ID0gKGkgIT09IDApOw0KCQl0aGlzLmJvZHkuU2V0QnVsbGV0KHRoaXMuYnVsbGV0KTsNCgkJ
dGhpcy5ib2R5LlNldEF3YWtlKHRydWUpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuUmVtb3ZlSm9p
bnRzID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhpcy5lbmFibGVkKQ0KCQkJcmV0dXJuOw0K
CQl0aGlzLmRlc3Ryb3lNeUpvaW50cygpOw0KCQl0aGlzLm15Q3JlYXRlZEpvaW50cy5sZW5ndGgg
PSAwOw0KCQl0aGlzLmpvaW5pbmdNZS5jbGVhcigpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0
RW5hYmxlZCA9IGZ1bmN0aW9uIChlKQ0KCXsNCgkJaWYgKHRoaXMuZW5hYmxlZCAmJiBlID09PSAw
KQ0KCQl7DQoJCQl0aGlzLmRlc3Ryb3lCb2R5KCk7DQoJCQl0aGlzLmVuYWJsZWQgPSBmYWxzZTsN
CgkJfQ0KCQllbHNlIGlmICghdGhpcy5lbmFibGVkICYmIGUgPT09IDEpDQoJCXsNCgkJCXRoaXMu
ZW5hYmxlZCA9IHRydWU7DQoJCQl0aGlzLmNyZWF0ZUJvZHkoKTsNCgkJfQ0KCX07DQoJYmVoYXZp
b3JQcm90by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5w
cm90b3R5cGUuVmVsb2NpdHlYID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQo
dGhpcy5lbmFibGVkID8gdGhpcy5ib2R5LkdldExpbmVhclZlbG9jaXR5KCkueCAvIHdvcmxkU2Nh
bGUgOiAwKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlZlbG9jaXR5WSA9IGZ1bmN0aW9uIChyZXQp
DQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZW5hYmxlZCA/IHRoaXMuYm9keS5HZXRMaW5lYXJW
ZWxvY2l0eSgpLnkgLyB3b3JsZFNjYWxlIDogMCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5Bbmd1
bGFyVmVsb2NpdHkgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmVu
YWJsZWQgPyBjci50b19kZWdyZWVzKHRoaXMuYm9keS5HZXRBbmd1bGFyVmVsb2NpdHkoKSkgOiAw
KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLk1hc3MgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0
LnNldF9mbG9hdCh0aGlzLmVuYWJsZWQgPyB0aGlzLmJvZHkuR2V0TWFzcygpIC8gd29ybGRTY2Fs
ZSA6IDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuQ2VudGVyT2ZNYXNzWCA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZW5hYmxlZCA/ICh0aGlzLmJvZHkuR2V0UG9z
aXRpb24oKS54ICsgdGhpcy5ib2R5LkdldExvY2FsQ2VudGVyKCkueCkgLyB3b3JsZFNjYWxlIDog
MCk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5DZW50ZXJPZk1hc3NZID0gZnVuY3Rpb24gKHJldCkN
Cgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5lbmFibGVkID8gKHRoaXMuYm9keS5HZXRQb3NpdGlv
bigpLnkgKyB0aGlzLmJvZHkuR2V0TG9jYWxDZW50ZXIoKS55KSAvIHdvcmxkU2NhbGUgOiAwKTsN
Cgl9Ow0KCUV4cHMucHJvdG90eXBlLkRlbnNpdHkgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0
LnNldF9mbG9hdCh0aGlzLmVuYWJsZWQgPyB0aGlzLmRlbnNpdHkgOiAwKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLkZyaWN0aW9uID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQo
dGhpcy5lbmFibGVkID8gdGhpcy5mcmljdGlvbiA6IDApOw0KCX07DQoJRXhwcy5wcm90b3R5cGUu
RWxhc3RpY2l0eSA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuZW5h
YmxlZCA/IHRoaXMucmVzdGl0dXRpb24gOiAwKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkxpbmVh
ckRhbXBpbmcgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmVuYWJs
ZWQgPyB0aGlzLmxpbmVhckRhbXBpbmcgOiAwKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFuZ3Vs
YXJEYW1waW5nID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5lbmFi
bGVkID8gdGhpcy5hbmd1bGFyRGFtcGluZyA6IDApOw0KCX07DQoJYmVoYXZpb3JQcm90by5leHBz
ID0gbmV3IEV4cHMoKTsNCn0oKSk7DQo7DQo7DQpjci5iZWhhdmlvcnMuUGluID0gZnVuY3Rpb24o
cnVudGltZSkNCnsNCgl0aGlzLnJ1bnRpbWUgPSBydW50aW1lOw0KfTsNCihmdW5jdGlvbiAoKQ0K
ew0KCXZhciBiZWhhdmlvclByb3RvID0gY3IuYmVoYXZpb3JzLlBpbi5wcm90b3R5cGU7DQoJYmVo
YXZpb3JQcm90by5UeXBlID0gZnVuY3Rpb24oYmVoYXZpb3IsIG9ianR5cGUpDQoJew0KCQl0aGlz
LmJlaGF2aW9yID0gYmVoYXZpb3I7DQoJCXRoaXMub2JqdHlwZSA9IG9ianR5cGU7DQoJCXRoaXMu
cnVudGltZSA9IGJlaGF2aW9yLnJ1bnRpbWU7DQoJfTsNCgl2YXIgYmVodHlwZVByb3RvID0gYmVo
YXZpb3JQcm90by5UeXBlLnByb3RvdHlwZTsNCgliZWh0eXBlUHJvdG8ub25DcmVhdGUgPSBmdW5j
dGlvbigpDQoJew0KCX07DQoJYmVoYXZpb3JQcm90by5JbnN0YW5jZSA9IGZ1bmN0aW9uKHR5cGUs
IGluc3QpDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBlOw0KCQl0aGlzLmJlaGF2aW9yID0gdHlwZS5i
ZWhhdmlvcjsNCgkJdGhpcy5pbnN0ID0gaW5zdDsJCQkJLy8gYXNzb2NpYXRlZCBvYmplY3QgaW5z
dGFuY2UgdG8gbW9kaWZ5DQoJCXRoaXMucnVudGltZSA9IHR5cGUucnVudGltZTsNCgl9Ow0KCXZh
ciBiZWhpbnN0UHJvdG8gPSBiZWhhdmlvclByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgliZWhp
bnN0UHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0KCQl0aGlzLnBpbk9iamVjdCA9IG51
bGw7DQoJCXRoaXMucGluT2JqZWN0VWlkID0gLTE7CQkvLyBmb3IgbG9hZGluZw0KCQl0aGlzLnBp
bkFuZ2xlID0gMDsNCgkJdGhpcy5waW5EaXN0ID0gMDsNCgkJdGhpcy5teVN0YXJ0QW5nbGUgPSAw
Ow0KCQl0aGlzLnRoZWlyU3RhcnRBbmdsZSA9IDA7DQoJCXRoaXMubGFzdEtub3duQW5nbGUgPSAw
Ow0KCQl0aGlzLm1vZGUgPSAwOwkJCQkvLyAwID0gcG9zaXRpb24gJiBhbmdsZTsgMSA9IHBvc2l0
aW9uOyAyID0gYW5nbGU7IDMgPSByb3BlOyA0ID0gYmFyDQoJCXZhciBzZWxmID0gdGhpczsNCgkJ
aWYgKCF0aGlzLnJlY3ljbGVkKQ0KCQl7DQoJCQl0aGlzLm15RGVzdHJveUNhbGxiYWNrID0gKGZ1
bmN0aW9uKGluc3QpIHsNCgkJCQkJCQkJCQkJCQlzZWxmLm9uSW5zdGFuY2VEZXN0cm95ZWQoaW5z
dCk7DQoJCQkJCQkJCQkJCQl9KTsNCgkJfQ0KCQl0aGlzLnJ1bnRpbWUuYWRkRGVzdHJveUNhbGxi
YWNrKHRoaXMubXlEZXN0cm95Q2FsbGJhY2spOw0KCX07DQoJYmVoaW5zdFByb3RvLnNhdmVUb0pT
T04gPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHsNCgkJCSJ1aWQiOiB0aGlzLnBpbk9iamVj
dCA/IHRoaXMucGluT2JqZWN0LnVpZCA6IC0xLA0KCQkJInBhIjogdGhpcy5waW5BbmdsZSwNCgkJ
CSJwZCI6IHRoaXMucGluRGlzdCwNCgkJCSJtc2EiOiB0aGlzLm15U3RhcnRBbmdsZSwNCgkJCSJ0
c2EiOiB0aGlzLnRoZWlyU3RhcnRBbmdsZSwNCgkJCSJsa2EiOiB0aGlzLmxhc3RLbm93bkFuZ2xl
LA0KCQkJIm0iOiB0aGlzLm1vZGUNCgkJfTsNCgl9Ow0KCWJlaGluc3RQcm90by5sb2FkRnJvbUpT
T04gPSBmdW5jdGlvbiAobykNCgl7DQoJCXRoaXMucGluT2JqZWN0VWlkID0gb1sidWlkIl07CQkv
LyB3YWl0IHVudGlsIGFmdGVyTG9hZCB0byBsb29rIHVwDQoJCXRoaXMucGluQW5nbGUgPSBvWyJw
YSJdOw0KCQl0aGlzLnBpbkRpc3QgPSBvWyJwZCJdOw0KCQl0aGlzLm15U3RhcnRBbmdsZSA9IG9b
Im1zYSJdOw0KCQl0aGlzLnRoZWlyU3RhcnRBbmdsZSA9IG9bInRzYSJdOw0KCQl0aGlzLmxhc3RL
bm93bkFuZ2xlID0gb1sibGthIl07DQoJCXRoaXMubW9kZSA9IG9bIm0iXTsNCgl9Ow0KCWJlaGlu
c3RQcm90by5hZnRlckxvYWQgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJaWYgKHRoaXMucGluT2JqZWN0
VWlkID09PSAtMSkNCgkJCXRoaXMucGluT2JqZWN0ID0gbnVsbDsNCgkJZWxzZQ0KCQl7DQoJCQl0
aGlzLnBpbk9iamVjdCA9IHRoaXMucnVudGltZS5nZXRPYmplY3RCeVVJRCh0aGlzLnBpbk9iamVj
dFVpZCk7DQo7DQoJCX0NCgkJdGhpcy5waW5PYmplY3RVaWQgPSAtMTsNCgl9Ow0KCWJlaGluc3RQ
cm90by5vbkluc3RhbmNlRGVzdHJveWVkID0gZnVuY3Rpb24gKGluc3QpDQoJew0KCQlpZiAodGhp
cy5waW5PYmplY3QgPT0gaW5zdCkNCgkJCXRoaXMucGluT2JqZWN0ID0gbnVsbDsNCgl9Ow0KCWJl
aGluc3RQcm90by5vbkRlc3Ryb3kgPSBmdW5jdGlvbigpDQoJew0KCQl0aGlzLnBpbk9iamVjdCA9
IG51bGw7DQoJCXRoaXMucnVudGltZS5yZW1vdmVEZXN0cm95Q2FsbGJhY2sodGhpcy5teURlc3Ry
b3lDYWxsYmFjayk7DQoJfTsNCgliZWhpbnN0UHJvdG8udGljayA9IGZ1bmN0aW9uICgpDQoJew0K
CX07DQoJYmVoaW5zdFByb3RvLnRpY2syID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICghdGhpcy5w
aW5PYmplY3QpDQoJCQlyZXR1cm47DQoJCWlmICh0aGlzLmxhc3RLbm93bkFuZ2xlICE9PSB0aGlz
Lmluc3QuYW5nbGUpDQoJCQl0aGlzLm15U3RhcnRBbmdsZSA9IGNyLmNsYW1wX2FuZ2xlKHRoaXMu
bXlTdGFydEFuZ2xlICsgKHRoaXMuaW5zdC5hbmdsZSAtIHRoaXMubGFzdEtub3duQW5nbGUpKTsN
CgkJdmFyIG5ld3ggPSB0aGlzLmluc3QueDsNCgkJdmFyIG5ld3kgPSB0aGlzLmluc3QueTsNCgkJ
aWYgKHRoaXMubW9kZSA9PT0gMyB8fCB0aGlzLm1vZGUgPT09IDQpCQkvLyByb3BlIG1vZGUgb3Ig
YmFyIG1vZGUNCgkJew0KCQkJdmFyIGRpc3QgPSBjci5kaXN0YW5jZVRvKHRoaXMuaW5zdC54LCB0
aGlzLmluc3QueSwgdGhpcy5waW5PYmplY3QueCwgdGhpcy5waW5PYmplY3QueSk7DQoJCQlpZiAo
KGRpc3QgPiB0aGlzLnBpbkRpc3QpIHx8ICh0aGlzLm1vZGUgPT09IDQgJiYgZGlzdCA8IHRoaXMu
cGluRGlzdCkpDQoJCQl7DQoJCQkJdmFyIGEgPSBjci5hbmdsZVRvKHRoaXMucGluT2JqZWN0Lngs
IHRoaXMucGluT2JqZWN0LnksIHRoaXMuaW5zdC54LCB0aGlzLmluc3QueSk7DQoJCQkJbmV3eCA9
IHRoaXMucGluT2JqZWN0LnggKyBNYXRoLmNvcyhhKSAqIHRoaXMucGluRGlzdDsNCgkJCQluZXd5
ID0gdGhpcy5waW5PYmplY3QueSArIE1hdGguc2luKGEpICogdGhpcy5waW5EaXN0Ow0KCQkJfQ0K
CQl9DQoJCWVsc2UNCgkJew0KCQkJbmV3eCA9IHRoaXMucGluT2JqZWN0LnggKyBNYXRoLmNvcyh0
aGlzLnBpbk9iamVjdC5hbmdsZSArIHRoaXMucGluQW5nbGUpICogdGhpcy5waW5EaXN0Ow0KCQkJ
bmV3eSA9IHRoaXMucGluT2JqZWN0LnkgKyBNYXRoLnNpbih0aGlzLnBpbk9iamVjdC5hbmdsZSAr
IHRoaXMucGluQW5nbGUpICogdGhpcy5waW5EaXN0Ow0KCQl9DQoJCXZhciBuZXdhbmdsZSA9IGNy
LmNsYW1wX2FuZ2xlKHRoaXMubXlTdGFydEFuZ2xlICsgKHRoaXMucGluT2JqZWN0LmFuZ2xlIC0g
dGhpcy50aGVpclN0YXJ0QW5nbGUpKTsNCgkJdGhpcy5sYXN0S25vd25BbmdsZSA9IG5ld2FuZ2xl
Ow0KCQlpZiAoKHRoaXMubW9kZSA9PT0gMCB8fCB0aGlzLm1vZGUgPT09IDEgfHwgdGhpcy5tb2Rl
ID09PSAzIHx8IHRoaXMubW9kZSA9PT0gNCkNCgkJCSYmICh0aGlzLmluc3QueCAhPT0gbmV3eCB8
fCB0aGlzLmluc3QueSAhPT0gbmV3eSkpDQoJCXsNCgkJCXRoaXMuaW5zdC54ID0gbmV3eDsNCgkJ
CXRoaXMuaW5zdC55ID0gbmV3eTsNCgkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJ
CX0NCgkJaWYgKCh0aGlzLm1vZGUgPT09IDAgfHwgdGhpcy5tb2RlID09PSAyKSAmJiAodGhpcy5p
bnN0LmFuZ2xlICE9PSBuZXdhbmdsZSkpDQoJCXsNCgkJCXRoaXMuaW5zdC5hbmdsZSA9IG5ld2Fu
Z2xlOw0KCQkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJfQ0KCX07DQoJZnVuY3Rp
b24gQ25kcygpIHt9Ow0KCUNuZHMucHJvdG90eXBlLklzUGlubmVkID0gZnVuY3Rpb24gKCkNCgl7
DQoJCXJldHVybiAhIXRoaXMucGluT2JqZWN0Ow0KCX07DQoJYmVoYXZpb3JQcm90by5jbmRzID0g
bmV3IENuZHMoKTsNCglmdW5jdGlvbiBBY3RzKCkge307DQoJQWN0cy5wcm90b3R5cGUuUGluID0g
ZnVuY3Rpb24gKG9iaiwgbW9kZV8pDQoJew0KCQlpZiAoIW9iaikNCgkJCXJldHVybjsNCgkJdmFy
IG90aGVyaW5zdCA9IG9iai5nZXRGaXJzdFBpY2tlZCh0aGlzLmluc3QpOw0KCQlpZiAoIW90aGVy
aW5zdCkNCgkJCXJldHVybjsNCgkJdGhpcy5waW5PYmplY3QgPSBvdGhlcmluc3Q7DQoJCXRoaXMu
cGluQW5nbGUgPSBjci5hbmdsZVRvKG90aGVyaW5zdC54LCBvdGhlcmluc3QueSwgdGhpcy5pbnN0
LngsIHRoaXMuaW5zdC55KSAtIG90aGVyaW5zdC5hbmdsZTsNCgkJdGhpcy5waW5EaXN0ID0gY3Iu
ZGlzdGFuY2VUbyhvdGhlcmluc3QueCwgb3RoZXJpbnN0LnksIHRoaXMuaW5zdC54LCB0aGlzLmlu
c3QueSk7DQoJCXRoaXMubXlTdGFydEFuZ2xlID0gdGhpcy5pbnN0LmFuZ2xlOw0KCQl0aGlzLmxh
c3RLbm93bkFuZ2xlID0gdGhpcy5pbnN0LmFuZ2xlOw0KCQl0aGlzLnRoZWlyU3RhcnRBbmdsZSA9
IG90aGVyaW5zdC5hbmdsZTsNCgkJdGhpcy5tb2RlID0gbW9kZV87DQoJfTsNCglBY3RzLnByb3Rv
dHlwZS5VbnBpbiA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLnBpbk9iamVjdCA9IG51bGw7DQoJ
fTsNCgliZWhhdmlvclByb3RvLmFjdHMgPSBuZXcgQWN0cygpOw0KCWZ1bmN0aW9uIEV4cHMoKSB7
fTsNCglFeHBzLnByb3RvdHlwZS5QaW5uZWRVSUQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0
LnNldF9pbnQodGhpcy5waW5PYmplY3QgPyB0aGlzLnBpbk9iamVjdC51aWQgOiAtMSk7DQoJfTsN
CgliZWhhdmlvclByb3RvLmV4cHMgPSBuZXcgRXhwcygpOw0KfSgpKTsNCjsNCjsNCmNyLmJlaGF2
aW9ycy5QbGF0Zm9ybSA9IGZ1bmN0aW9uKHJ1bnRpbWUpDQp7DQoJdGhpcy5ydW50aW1lID0gcnVu
dGltZTsNCn07DQooZnVuY3Rpb24gKCkNCnsNCgl2YXIgYmVoYXZpb3JQcm90byA9IGNyLmJlaGF2
aW9ycy5QbGF0Zm9ybS5wcm90b3R5cGU7DQoJYmVoYXZpb3JQcm90by5UeXBlID0gZnVuY3Rpb24o
YmVoYXZpb3IsIG9ianR5cGUpDQoJew0KCQl0aGlzLmJlaGF2aW9yID0gYmVoYXZpb3I7DQoJCXRo
aXMub2JqdHlwZSA9IG9ianR5cGU7DQoJCXRoaXMucnVudGltZSA9IGJlaGF2aW9yLnJ1bnRpbWU7
DQoJfTsNCgl2YXIgYmVodHlwZVByb3RvID0gYmVoYXZpb3JQcm90by5UeXBlLnByb3RvdHlwZTsN
CgliZWh0eXBlUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0KCX07DQoJdmFyIEFOSU1N
T0RFX1NUT1BQRUQgPSAwOw0KCXZhciBBTklNTU9ERV9NT1ZJTkcgPSAxOw0KCXZhciBBTklNTU9E
RV9KVU1QSU5HID0gMjsNCgl2YXIgQU5JTU1PREVfRkFMTElORyA9IDM7DQoJYmVoYXZpb3JQcm90
by5JbnN0YW5jZSA9IGZ1bmN0aW9uKHR5cGUsIGluc3QpDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBl
Ow0KCQl0aGlzLmJlaGF2aW9yID0gdHlwZS5iZWhhdmlvcjsNCgkJdGhpcy5pbnN0ID0gaW5zdDsJ
CQkJLy8gYXNzb2NpYXRlZCBvYmplY3QgaW5zdGFuY2UgdG8gbW9kaWZ5DQoJCXRoaXMucnVudGlt
ZSA9IHR5cGUucnVudGltZTsNCgkJdGhpcy5sZWZ0a2V5ID0gZmFsc2U7DQoJCXRoaXMucmlnaHRr
ZXkgPSBmYWxzZTsNCgkJdGhpcy5qdW1wa2V5ID0gZmFsc2U7DQoJCXRoaXMuanVtcGVkID0gZmFs
c2U7CQkJLy8gcHJldmVudCBidW5ueWhvcHBpbmcNCgkJdGhpcy5kb3VibGVKdW1wZWQgPSBmYWxz
ZTsNCgkJdGhpcy5jYW5Eb3VibGVKdW1wID0gZmFsc2U7DQoJCXRoaXMuaWdub3JlSW5wdXQgPSBm
YWxzZTsNCgkJdGhpcy5zaW1sZWZ0ID0gZmFsc2U7DQoJCXRoaXMuc2ltcmlnaHQgPSBmYWxzZTsN
CgkJdGhpcy5zaW1qdW1wID0gZmFsc2U7DQoJCXRoaXMubGFzdEZsb29yT2JqZWN0ID0gbnVsbDsN
CgkJdGhpcy5sb2FkRmxvb3JPYmplY3QgPSAtMTsNCgkJdGhpcy5sYXN0Rmxvb3JYID0gMDsNCgkJ
dGhpcy5sYXN0Rmxvb3JZID0gMDsNCgkJdGhpcy5mbG9vcklzSnVtcHRocnUgPSBmYWxzZTsNCgkJ
dGhpcy5hbmltTW9kZSA9IEFOSU1NT0RFX1NUT1BQRUQ7DQoJCXRoaXMuZmFsbHRocm91Z2ggPSAw
OwkJCS8vIGZhbGwgdGhyb3VnaCBqdW1wLXRocnUuICA+MCB0byBkaXNhYmxlLCBsYXN0cyBhIGZl
dyB0aWNrcw0KCQl0aGlzLmZpcnN0VGljayA9IHRydWU7DQoJCXRoaXMuZHggPSAwOw0KCQl0aGlz
LmR5ID0gMDsNCgl9Ow0KCXZhciBiZWhpbnN0UHJvdG8gPSBiZWhhdmlvclByb3RvLkluc3RhbmNl
LnByb3RvdHlwZTsNCgliZWhpbnN0UHJvdG8udXBkYXRlR3Jhdml0eSA9IGZ1bmN0aW9uKCkNCgl7
DQoJCXRoaXMuZG93bnggPSBNYXRoLmNvcyh0aGlzLmdhKTsNCgkJdGhpcy5kb3dueSA9IE1hdGgu
c2luKHRoaXMuZ2EpOw0KCQl0aGlzLnJpZ2h0eCA9IE1hdGguY29zKHRoaXMuZ2EgLSBNYXRoLlBJ
IC8gMik7DQoJCXRoaXMucmlnaHR5ID0gTWF0aC5zaW4odGhpcy5nYSAtIE1hdGguUEkgLyAyKTsN
CgkJdGhpcy5kb3dueCA9IGNyLnJvdW5kNmRwKHRoaXMuZG93bngpOw0KCQl0aGlzLmRvd255ID0g
Y3Iucm91bmQ2ZHAodGhpcy5kb3dueSk7DQoJCXRoaXMucmlnaHR4ID0gY3Iucm91bmQ2ZHAodGhp
cy5yaWdodHgpOw0KCQl0aGlzLnJpZ2h0eSA9IGNyLnJvdW5kNmRwKHRoaXMucmlnaHR5KTsNCgkJ
dGhpcy5nMSA9IHRoaXMuZzsNCgkJaWYgKHRoaXMuZyA8IDApDQoJCXsNCgkJCXRoaXMuZG93bngg
Kj0gLTE7DQoJCQl0aGlzLmRvd255ICo9IC0xOw0KCQkJdGhpcy5nID0gTWF0aC5hYnModGhpcy5n
KTsNCgkJfQ0KCX07DQoJYmVoaW5zdFByb3RvLm9uQ3JlYXRlID0gZnVuY3Rpb24oKQ0KCXsNCgkJ
dGhpcy5tYXhzcGVlZCA9IHRoaXMucHJvcGVydGllc1swXTsNCgkJdGhpcy5hY2MgPSB0aGlzLnBy
b3BlcnRpZXNbMV07DQoJCXRoaXMuZGVjID0gdGhpcy5wcm9wZXJ0aWVzWzJdOw0KCQl0aGlzLmp1
bXBTdHJlbmd0aCA9IHRoaXMucHJvcGVydGllc1szXTsNCgkJdGhpcy5nID0gdGhpcy5wcm9wZXJ0
aWVzWzRdOw0KCQl0aGlzLmcxID0gdGhpcy5nOw0KCQl0aGlzLm1heEZhbGwgPSB0aGlzLnByb3Bl
cnRpZXNbNV07DQoJCXRoaXMuZW5hYmxlRG91YmxlSnVtcCA9ICh0aGlzLnByb3BlcnRpZXNbNl0g
IT09IDApOwkvLyAwPWRpc2FibGVkLCAxPWVuYWJsZWQNCgkJdGhpcy5qdW1wU3VzdGFpbiA9ICh0
aGlzLnByb3BlcnRpZXNbN10gLyAxMDAwKTsJCS8vIGNvbnZlcnQgbXMgdG8gcw0KCQl0aGlzLmRl
ZmF1bHRDb250cm9scyA9ICh0aGlzLnByb3BlcnRpZXNbOF0gPT09IDEpOwkvLyAwPW5vLCAxPXll
cw0KCQl0aGlzLmVuYWJsZWQgPSAodGhpcy5wcm9wZXJ0aWVzWzldICE9PSAwKTsNCgkJdGhpcy53
YXNPbkZsb29yID0gZmFsc2U7DQoJCXRoaXMud2FzT3Zlckp1bXB0aHJ1ID0gdGhpcy5ydW50aW1l
LnRlc3RPdmVybGFwSnVtcFRocnUodGhpcy5pbnN0KTsNCgkJdGhpcy5sb2FkT3Zlckp1bXB0aHJ1
ID0gLTE7DQoJCXRoaXMuc3VzdGFpblRpbWUgPSAwOwkJCQkvLyB0aW1lIG9mIGp1bXAgc3VzdGFp
biByZW1haW5pbmcNCgkJdGhpcy5nYSA9IGNyLnRvX3JhZGlhbnMoOTApOw0KCQl0aGlzLnVwZGF0
ZUdyYXZpdHkoKTsNCgkJdmFyIHNlbGYgPSB0aGlzOw0KCQlpZiAodGhpcy5kZWZhdWx0Q29udHJv
bHMgJiYgIXRoaXMucnVudGltZS5pc0RvbUZyZWUpDQoJCXsNCgkJCWpRdWVyeShkb2N1bWVudCku
a2V5ZG93bihmdW5jdGlvbihpbmZvKSB7DQoJCQkJCQlzZWxmLm9uS2V5RG93bihpbmZvKTsNCgkJ
CQkJfSk7DQoJCQlqUXVlcnkoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uKGluZm8pIHsNCgkJCQkJ
CXNlbGYub25LZXlVcChpbmZvKTsNCgkJCQkJfSk7DQoJCX0NCgkJaWYgKCF0aGlzLnJlY3ljbGVk
KQ0KCQl7DQoJCQl0aGlzLm15RGVzdHJveUNhbGxiYWNrID0gZnVuY3Rpb24oaW5zdCkgew0KCQkJ
CQkJCQkJCXNlbGYub25JbnN0YW5jZURlc3Ryb3llZChpbnN0KTsNCgkJCQkJCQkJCX07DQoJCX0N
CgkJdGhpcy5ydW50aW1lLmFkZERlc3Ryb3lDYWxsYmFjayh0aGlzLm15RGVzdHJveUNhbGxiYWNr
KTsNCgkJdGhpcy5pbnN0LmV4dHJhWyJpc1BsYXRmb3JtQmVoYXZpb3IiXSA9IHRydWU7DQoJfTsN
CgliZWhpbnN0UHJvdG8uc2F2ZVRvSlNPTiA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gew0K
CQkJImlpIjogdGhpcy5pZ25vcmVJbnB1dCwNCgkJCSJsZngiOiB0aGlzLmxhc3RGbG9vclgsDQoJ
CQkibGZ5IjogdGhpcy5sYXN0Rmxvb3JZLA0KCQkJImxmbyI6ICh0aGlzLmxhc3RGbG9vck9iamVj
dCA/IHRoaXMubGFzdEZsb29yT2JqZWN0LnVpZCA6IC0xKSwNCgkJCSJhbSI6IHRoaXMuYW5pbU1v
ZGUsDQoJCQkiZW4iOiB0aGlzLmVuYWJsZWQsDQoJCQkiZmFsbCI6IHRoaXMuZmFsbHRocm91Z2gs
DQoJCQkiZnQiOiB0aGlzLmZpcnN0VGljaywNCgkJCSJkeCI6IHRoaXMuZHgsDQoJCQkiZHkiOiB0
aGlzLmR5LA0KCQkJIm1zIjogdGhpcy5tYXhzcGVlZCwNCgkJCSJhY2MiOiB0aGlzLmFjYywNCgkJ
CSJkZWMiOiB0aGlzLmRlYywNCgkJCSJqcyI6IHRoaXMuanVtcFN0cmVuZ3RoLA0KCQkJImciOiB0
aGlzLmcsDQoJCQkiZzEiOiB0aGlzLmcxLA0KCQkJIm1mIjogdGhpcy5tYXhGYWxsLA0KCQkJIndv
ZiI6IHRoaXMud2FzT25GbG9vciwNCgkJCSJ3b2oiOiAodGhpcy53YXNPdmVySnVtcHRocnUgPyB0
aGlzLndhc092ZXJKdW1wdGhydS51aWQgOiAtMSksDQoJCQkiZ2EiOiB0aGlzLmdhLA0KCQkJImVk
aiI6IHRoaXMuZW5hYmxlRG91YmxlSnVtcCwNCgkJCSJjZGoiOiB0aGlzLmNhbkRvdWJsZUp1bXAs
DQoJCQkiZGoiOiB0aGlzLmRvdWJsZUp1bXBlZCwNCgkJCSJzdXMiOiB0aGlzLmp1bXBTdXN0YWlu
DQoJCX07DQoJfTsNCgliZWhpbnN0UHJvdG8ubG9hZEZyb21KU09OID0gZnVuY3Rpb24gKG8pDQoJ
ew0KCQl0aGlzLmlnbm9yZUlucHV0ID0gb1siaWkiXTsNCgkJdGhpcy5sYXN0Rmxvb3JYID0gb1si
bGZ4Il07DQoJCXRoaXMubGFzdEZsb29yWSA9IG9bImxmeSJdOw0KCQl0aGlzLmxvYWRGbG9vck9i
amVjdCA9IG9bImxmbyJdOw0KCQl0aGlzLmFuaW1Nb2RlID0gb1siYW0iXTsNCgkJdGhpcy5lbmFi
bGVkID0gb1siZW4iXTsNCgkJdGhpcy5mYWxsdGhyb3VnaCA9IG9bImZhbGwiXTsNCgkJdGhpcy5m
aXJzdFRpY2sgPSBvWyJmdCJdOw0KCQl0aGlzLmR4ID0gb1siZHgiXTsNCgkJdGhpcy5keSA9IG9b
ImR5Il07DQoJCXRoaXMubWF4c3BlZWQgPSBvWyJtcyJdOw0KCQl0aGlzLmFjYyA9IG9bImFjYyJd
Ow0KCQl0aGlzLmRlYyA9IG9bImRlYyJdOw0KCQl0aGlzLmp1bXBTdHJlbmd0aCA9IG9bImpzIl07
DQoJCXRoaXMuZyA9IG9bImciXTsNCgkJdGhpcy5nMSA9IG9bImcxIl07DQoJCXRoaXMubWF4RmFs
bCA9IG9bIm1mIl07DQoJCXRoaXMud2FzT25GbG9vciA9IG9bIndvZiJdOw0KCQl0aGlzLmxvYWRP
dmVySnVtcHRocnUgPSBvWyJ3b2oiXTsNCgkJdGhpcy5nYSA9IG9bImdhIl07DQoJCXRoaXMuZW5h
YmxlRG91YmxlSnVtcCA9IG9bImVkaiJdOw0KCQl0aGlzLmNhbkRvdWJsZUp1bXAgPSBvWyJjZGoi
XTsNCgkJdGhpcy5kb3VibGVKdW1wZWQgPSBvWyJkaiJdOw0KCQl0aGlzLmp1bXBTdXN0YWluID0g
b1sic3VzIl07DQoJCXRoaXMubGVmdGtleSA9IGZhbHNlOw0KCQl0aGlzLnJpZ2h0a2V5ID0gZmFs
c2U7DQoJCXRoaXMuanVtcGtleSA9IGZhbHNlOw0KCQl0aGlzLmp1bXBlZCA9IGZhbHNlOw0KCQl0
aGlzLnNpbWxlZnQgPSBmYWxzZTsNCgkJdGhpcy5zaW1yaWdodCA9IGZhbHNlOw0KCQl0aGlzLnNp
bWp1bXAgPSBmYWxzZTsNCgkJdGhpcy5zdXN0YWluVGltZSA9IDA7DQoJCXRoaXMudXBkYXRlR3Jh
dml0eSgpOw0KCX07DQoJYmVoaW5zdFByb3RvLmFmdGVyTG9hZCA9IGZ1bmN0aW9uICgpDQoJew0K
CQlpZiAodGhpcy5sb2FkRmxvb3JPYmplY3QgPT09IC0xKQ0KCQkJdGhpcy5sYXN0Rmxvb3JPYmpl
Y3QgPSBudWxsOw0KCQllbHNlDQoJCQl0aGlzLmxhc3RGbG9vck9iamVjdCA9IHRoaXMucnVudGlt
ZS5nZXRPYmplY3RCeVVJRCh0aGlzLmxvYWRGbG9vck9iamVjdCk7DQoJCWlmICh0aGlzLmxvYWRP
dmVySnVtcHRocnUgPT09IC0xKQ0KCQkJdGhpcy53YXNPdmVySnVtcHRocnUgPSBudWxsOw0KCQll
bHNlDQoJCQl0aGlzLndhc092ZXJKdW1wdGhydSA9IHRoaXMucnVudGltZS5nZXRPYmplY3RCeVVJ
RCh0aGlzLmxvYWRPdmVySnVtcHRocnUpOw0KCX07DQoJYmVoaW5zdFByb3RvLm9uSW5zdGFuY2VE
ZXN0cm95ZWQgPSBmdW5jdGlvbiAoaW5zdCkNCgl7DQoJCWlmICh0aGlzLmxhc3RGbG9vck9iamVj
dCA9PSBpbnN0KQ0KCQkJdGhpcy5sYXN0Rmxvb3JPYmplY3QgPSBudWxsOw0KCX07DQoJYmVoaW5z
dFByb3RvLm9uRGVzdHJveSA9IGZ1bmN0aW9uICgpDQoJew0KCQl0aGlzLmxhc3RGbG9vck9iamVj
dCA9IG51bGw7DQoJCXRoaXMucnVudGltZS5yZW1vdmVEZXN0cm95Q2FsbGJhY2sodGhpcy5teURl
c3Ryb3lDYWxsYmFjayk7DQoJfTsNCgliZWhpbnN0UHJvdG8ub25LZXlEb3duID0gZnVuY3Rpb24g
KGluZm8pDQoJew0KCQlzd2l0Y2ggKGluZm8ud2hpY2gpIHsNCgkJY2FzZSAzODoJLy8gdXANCgkJ
CWluZm8ucHJldmVudERlZmF1bHQoKTsNCgkJCXRoaXMuanVtcGtleSA9IHRydWU7DQoJCQlicmVh
azsNCgkJY2FzZSAzNzoJLy8gbGVmdA0KCQkJaW5mby5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJdGhp
cy5sZWZ0a2V5ID0gdHJ1ZTsNCgkJCWJyZWFrOw0KCQljYXNlIDM5OgkvLyByaWdodA0KCQkJaW5m
by5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJdGhpcy5yaWdodGtleSA9IHRydWU7DQoJCQlicmVhazsN
CgkJfQ0KCX07DQoJYmVoaW5zdFByb3RvLm9uS2V5VXAgPSBmdW5jdGlvbiAoaW5mbykNCgl7DQoJ
CXN3aXRjaCAoaW5mby53aGljaCkgew0KCQljYXNlIDM4OgkvLyB1cA0KCQkJaW5mby5wcmV2ZW50
RGVmYXVsdCgpOw0KCQkJdGhpcy5qdW1wa2V5ID0gZmFsc2U7DQoJCQl0aGlzLmp1bXBlZCA9IGZh
bHNlOw0KCQkJYnJlYWs7DQoJCWNhc2UgMzc6CS8vIGxlZnQNCgkJCWluZm8ucHJldmVudERlZmF1
bHQoKTsNCgkJCXRoaXMubGVmdGtleSA9IGZhbHNlOw0KCQkJYnJlYWs7DQoJCWNhc2UgMzk6CS8v
IHJpZ2h0DQoJCQlpbmZvLnByZXZlbnREZWZhdWx0KCk7DQoJCQl0aGlzLnJpZ2h0a2V5ID0gZmFs
c2U7DQoJCQlicmVhazsNCgkJfQ0KCX07DQoJYmVoaW5zdFByb3RvLm9uV2luZG93Qmx1ciA9IGZ1
bmN0aW9uICgpDQoJew0KCQl0aGlzLmxlZnRrZXkgPSBmYWxzZTsNCgkJdGhpcy5yaWdodGtleSA9
IGZhbHNlOw0KCQl0aGlzLmp1bXBrZXkgPSBmYWxzZTsNCgl9Ow0KCWJlaGluc3RQcm90by5nZXRH
RGlyID0gZnVuY3Rpb24gKCkNCgl7DQoJCWlmICh0aGlzLmcgPCAwKQ0KCQkJcmV0dXJuIC0xOw0K
CQllbHNlDQoJCQlyZXR1cm4gMTsNCgl9Ow0KCWJlaGluc3RQcm90by5pc09uRmxvb3IgPSBmdW5j
dGlvbiAoKQ0KCXsNCgkJdmFyIHJldCA9IG51bGw7DQoJCXZhciByZXQyID0gbnVsbDsNCgkJdmFy
IGksIGxlbiwgajsNCgkJdmFyIG9sZHggPSB0aGlzLmluc3QueDsNCgkJdmFyIG9sZHkgPSB0aGlz
Lmluc3QueTsNCgkJdGhpcy5pbnN0LnggKz0gdGhpcy5kb3dueDsNCgkJdGhpcy5pbnN0LnkgKz0g
dGhpcy5kb3dueTsNCgkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJaWYgKHRoaXMu
bGFzdEZsb29yT2JqZWN0ICYmIHRoaXMucnVudGltZS50ZXN0T3ZlcmxhcCh0aGlzLmluc3QsIHRo
aXMubGFzdEZsb29yT2JqZWN0KSAmJg0KCQkJKCF0aGlzLnJ1bnRpbWUudHlwZUhhc0JlaGF2aW9y
KHRoaXMubGFzdEZsb29yT2JqZWN0LnR5cGUsIGNyLmJlaGF2aW9ycy5zb2xpZCkgfHwgdGhpcy5s
YXN0Rmxvb3JPYmplY3QuZXh0cmFbInNvbGlkRW5hYmxlZCJdKSkNCgkJew0KCQkJdGhpcy5pbnN0
LnggPSBvbGR4Ow0KCQkJdGhpcy5pbnN0LnkgPSBvbGR5Ow0KCQkJdGhpcy5pbnN0LnNldF9iYm94
X2NoYW5nZWQoKTsNCgkJCXJldHVybiB0aGlzLmxhc3RGbG9vck9iamVjdDsNCgkJfQ0KCQllbHNl
DQoJCXsNCgkJCXJldCA9IHRoaXMucnVudGltZS50ZXN0T3ZlcmxhcFNvbGlkKHRoaXMuaW5zdCk7
DQoJCQlpZiAoIXJldCAmJiB0aGlzLmZhbGx0aHJvdWdoID09PSAwKQ0KCQkJCXJldDIgPSB0aGlz
LnJ1bnRpbWUudGVzdE92ZXJsYXBKdW1wVGhydSh0aGlzLmluc3QsIHRydWUpOw0KCQkJdGhpcy5p
bnN0LnggPSBvbGR4Ow0KCQkJdGhpcy5pbnN0LnkgPSBvbGR5Ow0KCQkJdGhpcy5pbnN0LnNldF9i
Ym94X2NoYW5nZWQoKTsNCgkJCWlmIChyZXQpCQkvLyB3YXMgb3ZlcmxhcHBpbmcgc29saWQNCgkJ
CXsNCgkJCQlpZiAodGhpcy5ydW50aW1lLnRlc3RPdmVybGFwKHRoaXMuaW5zdCwgcmV0KSkNCgkJ
CQkJcmV0dXJuIG51bGw7DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJdGhpcy5mbG9vcklzSnVtcHRo
cnUgPSBmYWxzZTsNCgkJCQkJcmV0dXJuIHJldDsNCgkJCQl9DQoJCQl9DQoJCQlpZiAocmV0MiAm
JiByZXQyLmxlbmd0aCkNCgkJCXsNCgkJCQlmb3IgKGkgPSAwLCBqID0gMCwgbGVuID0gcmV0Mi5s
ZW5ndGg7IGkgPCBsZW47IGkrKykNCgkJCQl7DQoJCQkJCXJldDJbal0gPSByZXQyW2ldOw0KCQkJ
CQlpZiAoIXRoaXMucnVudGltZS50ZXN0T3ZlcmxhcCh0aGlzLmluc3QsIHJldDJbaV0pKQ0KCQkJ
CQkJaisrOw0KCQkJCX0NCgkJCQlpZiAoaiA+PSAxKQ0KCQkJCXsNCgkJCQkJdGhpcy5mbG9vcklz
SnVtcHRocnUgPSB0cnVlOw0KCQkJCQlyZXR1cm4gcmV0MlswXTsNCgkJCQl9DQoJCQl9DQoJCQly
ZXR1cm4gbnVsbDsNCgkJfQ0KCX07DQoJYmVoaW5zdFByb3RvLnRpY2sgPSBmdW5jdGlvbiAoKQ0K
CXsNCgl9Ow0KCWJlaGluc3RQcm90by5wb3N0dGljayA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIg
ZHQgPSB0aGlzLnJ1bnRpbWUuZ2V0RHQodGhpcy5pbnN0KTsNCgkJdmFyIG14LCBteSwgb2JzdGFj
bGUsIG1hZywgYWxsb3ZlciwgaSwgbGVuLCBqLCBvbGR4LCBvbGR5Ow0KCQlpZiAoIXRoaXMuanVt
cGtleSAmJiAhdGhpcy5zaW1qdW1wKQ0KCQkJdGhpcy5qdW1wZWQgPSBmYWxzZTsNCgkJdmFyIGxl
ZnQgPSB0aGlzLmxlZnRrZXkgfHwgdGhpcy5zaW1sZWZ0Ow0KCQl2YXIgcmlnaHQgPSB0aGlzLnJp
Z2h0a2V5IHx8IHRoaXMuc2ltcmlnaHQ7DQoJCXZhciBqdW1wa2V5ID0gKHRoaXMuanVtcGtleSB8
fCB0aGlzLnNpbWp1bXApOw0KCQl2YXIganVtcCA9IGp1bXBrZXkgJiYgIXRoaXMuanVtcGVkOw0K
CQl0aGlzLnNpbWxlZnQgPSBmYWxzZTsNCgkJdGhpcy5zaW1yaWdodCA9IGZhbHNlOw0KCQl0aGlz
LnNpbWp1bXAgPSBmYWxzZTsNCgkJaWYgKCF0aGlzLmVuYWJsZWQpDQoJCQlyZXR1cm47DQoJCWlm
ICh0aGlzLmlnbm9yZUlucHV0KQ0KCQl7DQoJCQlsZWZ0ID0gZmFsc2U7DQoJCQlyaWdodCA9IGZh
bHNlOw0KCQkJanVtcGtleSA9IGZhbHNlOw0KCQkJanVtcCA9IGZhbHNlOw0KCQl9DQoJCWlmICgh
anVtcGtleSkNCgkJCXRoaXMuc3VzdGFpblRpbWUgPSAwOw0KCQl2YXIgbGFzdEZsb29yID0gdGhp
cy5sYXN0Rmxvb3JPYmplY3Q7DQoJCXZhciBmbG9vcl9tb3ZlZCA9IGZhbHNlOw0KCQlpZiAodGhp
cy5maXJzdFRpY2spDQoJCXsNCgkJCWlmICh0aGlzLnJ1bnRpbWUudGVzdE92ZXJsYXBTb2xpZCh0
aGlzLmluc3QpIHx8IHRoaXMucnVudGltZS50ZXN0T3ZlcmxhcEp1bXBUaHJ1KHRoaXMuaW5zdCkp
DQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZCh0aGlzLmluc3QsIC10aGlzLmRv
d254LCAtdGhpcy5kb3dueSwgNCwgdHJ1ZSk7DQoJCQl9DQoJCQl0aGlzLmZpcnN0VGljayA9IGZh
bHNlOw0KCQl9DQoJCWlmIChsYXN0Rmxvb3IgJiYgdGhpcy5keSA9PT0gMCAmJiAobGFzdEZsb29y
LnkgIT09IHRoaXMubGFzdEZsb29yWSB8fCBsYXN0Rmxvb3IueCAhPT0gdGhpcy5sYXN0Rmxvb3JY
KSkNCgkJew0KCQkJbXggPSAobGFzdEZsb29yLnggLSB0aGlzLmxhc3RGbG9vclgpOw0KCQkJbXkg
PSAobGFzdEZsb29yLnkgLSB0aGlzLmxhc3RGbG9vclkpOw0KCQkJdGhpcy5pbnN0LnggKz0gbXg7
DQoJCQl0aGlzLmluc3QueSArPSBteTsNCgkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7
DQoJCQl0aGlzLmxhc3RGbG9vclggPSBsYXN0Rmxvb3IueDsNCgkJCXRoaXMubGFzdEZsb29yWSA9
IGxhc3RGbG9vci55Ow0KCQkJZmxvb3JfbW92ZWQgPSB0cnVlOw0KCQkJaWYgKHRoaXMucnVudGlt
ZS50ZXN0T3ZlcmxhcFNvbGlkKHRoaXMuaW5zdCkpDQoJCQl7DQoJCQkJdGhpcy5ydW50aW1lLnB1
c2hPdXRTb2xpZCh0aGlzLmluc3QsIC1teCwgLW15LCBNYXRoLnNxcnQobXggKiBteCArIG15ICog
bXkpICogMi41KTsNCgkJCX0NCgkJfQ0KCQl2YXIgZmxvb3JfID0gdGhpcy5pc09uRmxvb3IoKTsN
CgkJdmFyIGNvbGxvYmogPSB0aGlzLnJ1bnRpbWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3Qp
Ow0KCQlpZiAoY29sbG9iaikNCgkJew0KCQkJdmFyIGluc3RXaWR0aCA9IE1hdGguYWJzKHRoaXMu
aW5zdC53aWR0aCk7DQoJCQl2YXIgaW5zdEhlaWdodCA9IE1hdGguYWJzKHRoaXMuaW5zdC5oZWln
aHQpOw0KCQkJaWYgKHRoaXMuaW5zdC5leHRyYVsiaW5wdXRQcmVkaWN0ZWQiXSkNCgkJCXsNCgkJ
CQl0aGlzLnJ1bnRpbWUucHVzaE91dFNvbGlkKHRoaXMuaW5zdCwgLXRoaXMuZG93bngsIC10aGlz
LmRvd255LCAxMCwgZmFsc2UpOw0KCQkJfQ0KCQkJZWxzZSBpZiAodGhpcy5ydW50aW1lLnB1c2hP
dXRTb2xpZEF4aXModGhpcy5pbnN0LCAtdGhpcy5kb3dueCwgLXRoaXMuZG93bnksIGluc3RIZWln
aHQgLyA4KSkNCgkJCXsNCgkJCQl0aGlzLnJ1bnRpbWUucmVnaXN0ZXJDb2xsaXNpb24odGhpcy5p
bnN0LCBjb2xsb2JqKTsNCgkJCX0NCgkJCWVsc2UgaWYgKHRoaXMucnVudGltZS5wdXNoT3V0U29s
aWRBeGlzKHRoaXMuaW5zdCwgdGhpcy5yaWdodHgsIHRoaXMucmlnaHR5LCBpbnN0V2lkdGggLyAy
KSkNCgkJCXsNCgkJCQl0aGlzLnJ1bnRpbWUucmVnaXN0ZXJDb2xsaXNpb24odGhpcy5pbnN0LCBj
b2xsb2JqKTsNCgkJCX0NCgkJCWVsc2UgaWYgKHRoaXMucnVudGltZS5wdXNoT3V0U29saWRBeGlz
KHRoaXMuaW5zdCwgdGhpcy5kb3dueCwgdGhpcy5kb3dueSwgaW5zdEhlaWdodCAvIDIpKQ0KCQkJ
ew0KCQkJCXRoaXMucnVudGltZS5yZWdpc3RlckNvbGxpc2lvbih0aGlzLmluc3QsIGNvbGxvYmop
Ow0KCQkJfQ0KCQkJZWxzZSBpZiAodGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZE5lYXJlc3QodGhp
cy5pbnN0LCBNYXRoLm1heChpbnN0V2lkdGgsIGluc3RIZWlnaHQpIC8gMikpDQoJCQl7DQoJCQkJ
dGhpcy5ydW50aW1lLnJlZ2lzdGVyQ29sbGlzaW9uKHRoaXMuaW5zdCwgY29sbG9iaik7DQoJCQl9
DQoJCQllbHNlDQoJCQkJcmV0dXJuOw0KCQl9DQoJCWlmIChmbG9vcl8pDQoJCXsNCgkJCXRoaXMu
ZG91YmxlSnVtcGVkID0gZmFsc2U7CQkvLyByZXNldCBkb3VibGUganVtcCBmbGFncyBmb3IgbmV4
dCBqdW1wDQoJCQl0aGlzLmNhbkRvdWJsZUp1bXAgPSBmYWxzZTsNCgkJCWlmICh0aGlzLmR5ID4g
MCkNCgkJCXsNCgkJCQlpZiAoIXRoaXMud2FzT25GbG9vcikNCgkJCQl7DQoJCQkJCXRoaXMucnVu
dGltZS5wdXNoSW5GcmFjdGlvbmFsKHRoaXMuaW5zdCwgLXRoaXMuZG93bngsIC10aGlzLmRvd255
LCBmbG9vcl8sIDE2KTsNCgkJCQkJdGhpcy53YXNPbkZsb29yID0gdHJ1ZTsNCgkJCQl9DQoJCQkJ
dGhpcy5keSA9IDA7DQoJCQl9DQoJCQlpZiAobGFzdEZsb29yICE9IGZsb29yXykNCgkJCXsNCgkJ
CQl0aGlzLmxhc3RGbG9vck9iamVjdCA9IGZsb29yXzsNCgkJCQl0aGlzLmxhc3RGbG9vclggPSBm
bG9vcl8ueDsNCgkJCQl0aGlzLmxhc3RGbG9vclkgPSBmbG9vcl8ueTsNCgkJCQl0aGlzLnJ1bnRp
bWUucmVnaXN0ZXJDb2xsaXNpb24odGhpcy5pbnN0LCBmbG9vcl8pOw0KCQkJfQ0KCQkJZWxzZSBp
ZiAoZmxvb3JfbW92ZWQpDQoJCQl7DQoJCQkJY29sbG9iaiA9IHRoaXMucnVudGltZS50ZXN0T3Zl
cmxhcFNvbGlkKHRoaXMuaW5zdCk7DQoJCQkJaWYgKGNvbGxvYmopDQoJCQkJew0KCQkJCQl0aGlz
LnJ1bnRpbWUucmVnaXN0ZXJDb2xsaXNpb24odGhpcy5pbnN0LCBjb2xsb2JqKTsNCgkJCQkJaWYg
KG14ICE9PSAwKQ0KCQkJCQl7DQoJCQkJCQlpZiAobXggPiAwKQ0KCQkJCQkJCXRoaXMucnVudGlt
ZS5wdXNoT3V0U29saWQodGhpcy5pbnN0LCAtdGhpcy5yaWdodHgsIC10aGlzLnJpZ2h0eSk7DQoJ
CQkJCQllbHNlDQoJCQkJCQkJdGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZCh0aGlzLmluc3QsIHRo
aXMucmlnaHR4LCB0aGlzLnJpZ2h0eSk7DQoJCQkJCX0NCgkJCQkJdGhpcy5ydW50aW1lLnB1c2hP
dXRTb2xpZCh0aGlzLmluc3QsIC10aGlzLmRvd254LCAtdGhpcy5kb3dueSk7DQoJCQkJfQ0KCQkJ
fQ0KCQl9DQoJCWVsc2UNCgkJew0KCQkJaWYgKCFqdW1wa2V5KQ0KCQkJCXRoaXMuY2FuRG91Ymxl
SnVtcCA9IHRydWU7DQoJCX0NCgkJaWYgKChmbG9vcl8gJiYganVtcCkgfHwgKCFmbG9vcl8gJiYg
dGhpcy5lbmFibGVEb3VibGVKdW1wICYmIGp1bXBrZXkgJiYgdGhpcy5jYW5Eb3VibGVKdW1wICYm
ICF0aGlzLmRvdWJsZUp1bXBlZCkpDQoJCXsNCgkJCW9sZHggPSB0aGlzLmluc3QueDsNCgkJCW9s
ZHkgPSB0aGlzLmluc3QueTsNCgkJCXRoaXMuaW5zdC54IC09IHRoaXMuZG93bng7DQoJCQl0aGlz
Lmluc3QueSAtPSB0aGlzLmRvd255Ow0KCQkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsN
CgkJCWlmICghdGhpcy5ydW50aW1lLnRlc3RPdmVybGFwU29saWQodGhpcy5pbnN0KSkNCgkJCXsN
CgkJCQl0aGlzLnN1c3RhaW5UaW1lID0gdGhpcy5qdW1wU3VzdGFpbjsNCgkJCQl0aGlzLnJ1bnRp
bWUudHJpZ2dlcihjci5iZWhhdmlvcnMuUGxhdGZvcm0ucHJvdG90eXBlLmNuZHMuT25KdW1wLCB0
aGlzLmluc3QpOw0KCQkJCXRoaXMuYW5pbU1vZGUgPSBBTklNTU9ERV9KVU1QSU5HOw0KCQkJCXRo
aXMuZHkgPSAtdGhpcy5qdW1wU3RyZW5ndGg7DQoJCQkJanVtcCA9IHRydWU7CQkvLyBzZXQgaW4g
Y2FzZSBpcyBkb3VibGUganVtcA0KCQkJCWlmIChmbG9vcl8pDQoJCQkJCXRoaXMuanVtcGVkID0g
dHJ1ZTsNCgkJCQllbHNlDQoJCQkJCXRoaXMuZG91YmxlSnVtcGVkID0gdHJ1ZTsNCgkJCX0NCgkJ
CWVsc2UNCgkJCQlqdW1wID0gZmFsc2U7DQoJCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCQl0aGlz
Lmluc3QueSA9IG9sZHk7DQoJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQl9DQoJ
CWlmICghZmxvb3JfKQ0KCQl7DQoJCQlpZiAoanVtcGtleSAmJiB0aGlzLnN1c3RhaW5UaW1lID4g
MCkNCgkJCXsNCgkJCQl0aGlzLmR5ID0gLXRoaXMuanVtcFN0cmVuZ3RoOw0KCQkJCXRoaXMuc3Vz
dGFpblRpbWUgLT0gZHQ7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJdGhpcy5sYXN0Rmxvb3JP
YmplY3QgPSBudWxsOw0KCQkJCXRoaXMuZHkgKz0gdGhpcy5nICogZHQ7DQoJCQkJaWYgKHRoaXMu
ZHkgPiB0aGlzLm1heEZhbGwpDQoJCQkJCXRoaXMuZHkgPSB0aGlzLm1heEZhbGw7DQoJCQl9DQoJ
CQlpZiAoanVtcCkNCgkJCQl0aGlzLmp1bXBlZCA9IHRydWU7DQoJCX0NCgkJdGhpcy53YXNPbkZs
b29yID0gISFmbG9vcl87DQoJCWlmIChsZWZ0ID09IHJpZ2h0KQkvLyBib3RoIHVwIG9yIGJvdGgg
ZG93bg0KCQl7DQoJCQlpZiAodGhpcy5keCA8IDApDQoJCQl7DQoJCQkJdGhpcy5keCArPSB0aGlz
LmRlYyAqIGR0Ow0KCQkJCWlmICh0aGlzLmR4ID4gMCkNCgkJCQkJdGhpcy5keCA9IDA7DQoJCQl9
DQoJCQllbHNlIGlmICh0aGlzLmR4ID4gMCkNCgkJCXsNCgkJCQl0aGlzLmR4IC09IHRoaXMuZGVj
ICogZHQ7DQoJCQkJaWYgKHRoaXMuZHggPCAwKQ0KCQkJCQl0aGlzLmR4ID0gMDsNCgkJCX0NCgkJ
fQ0KCQlpZiAobGVmdCAmJiAhcmlnaHQpDQoJCXsNCgkJCWlmICh0aGlzLmR4ID4gMCkNCgkJCQl0
aGlzLmR4IC09ICh0aGlzLmFjYyArIHRoaXMuZGVjKSAqIGR0Ow0KCQkJZWxzZQ0KCQkJCXRoaXMu
ZHggLT0gdGhpcy5hY2MgKiBkdDsNCgkJfQ0KCQlpZiAocmlnaHQgJiYgIWxlZnQpDQoJCXsNCgkJ
CWlmICh0aGlzLmR4IDwgMCkNCgkJCQl0aGlzLmR4ICs9ICh0aGlzLmFjYyArIHRoaXMuZGVjKSAq
IGR0Ow0KCQkJZWxzZQ0KCQkJCXRoaXMuZHggKz0gdGhpcy5hY2MgKiBkdDsNCgkJfQ0KCQlpZiAo
dGhpcy5keCA+IHRoaXMubWF4c3BlZWQpDQoJCQl0aGlzLmR4ID0gdGhpcy5tYXhzcGVlZDsNCgkJ
ZWxzZSBpZiAodGhpcy5keCA8IC10aGlzLm1heHNwZWVkKQ0KCQkJdGhpcy5keCA9IC10aGlzLm1h
eHNwZWVkOw0KCQl2YXIgbGFuZGVkID0gZmFsc2U7DQoJCWlmICh0aGlzLmR4ICE9PSAwKQ0KCQl7
DQoJCQlvbGR4ID0gdGhpcy5pbnN0Lng7DQoJCQlvbGR5ID0gdGhpcy5pbnN0Lnk7DQoJCQlteCA9
IHRoaXMuZHggKiBkdCAqIHRoaXMucmlnaHR4Ow0KCQkJbXkgPSB0aGlzLmR4ICogZHQgKiB0aGlz
LnJpZ2h0eTsNCgkJCXRoaXMuaW5zdC54ICs9IHRoaXMucmlnaHR4ICogKHRoaXMuZHggPiAxID8g
MSA6IC0xKSAtIHRoaXMuZG93bng7DQoJCQl0aGlzLmluc3QueSArPSB0aGlzLnJpZ2h0eSAqICh0
aGlzLmR4ID4gMSA/IDEgOiAtMSkgLSB0aGlzLmRvd255Ow0KCQkJdGhpcy5pbnN0LnNldF9iYm94
X2NoYW5nZWQoKTsNCgkJCXZhciBpc19qdW1wdGhydSA9IGZhbHNlOw0KCQkJdmFyIHNsb3BlX3Rv
b19zdGVlcCA9IHRoaXMucnVudGltZS50ZXN0T3ZlcmxhcFNvbGlkKHRoaXMuaW5zdCk7DQoJCQkv
Kg0KCQkJaWYgKCFzbG9wZV90b29fc3RlZXAgJiYgZmxvb3JfKQ0KCQkJew0KCQkJCXNsb3BlX3Rv
b19zdGVlcCA9IHRoaXMucnVudGltZS50ZXN0T3ZlcmxhcEp1bXBUaHJ1KHRoaXMuaW5zdCk7DQoJ
CQkJaXNfanVtcHRocnUgPSB0cnVlOw0KCQkJCWlmIChzbG9wZV90b29fc3RlZXApDQoJCQkJew0K
CQkJCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCQkJCXRoaXMuaW5zdC55ID0gb2xkeTsNCgkJCQkJ
dGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQkJaWYgKHRoaXMucnVudGltZS50ZXN0
T3ZlcmxhcCh0aGlzLmluc3QsIHNsb3BlX3Rvb19zdGVlcCkpDQoJCQkJCXsNCgkJCQkJCXNsb3Bl
X3Rvb19zdGVlcCA9IG51bGw7DQoJCQkJCQlpc19qdW1wdGhydSA9IGZhbHNlOw0KCQkJCQl9DQoJ
CQkJfQ0KCQkJfQ0KCQkJKi8NCgkJCXRoaXMuaW5zdC54ID0gb2xkeCArIG14Ow0KCQkJdGhpcy5p
bnN0LnkgPSBvbGR5ICsgbXk7DQoJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJ
b2JzdGFjbGUgPSB0aGlzLnJ1bnRpbWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3QpOw0KCQkJ
aWYgKCFvYnN0YWNsZSAmJiBmbG9vcl8pDQoJCQl7DQoJCQkJb2JzdGFjbGUgPSB0aGlzLnJ1bnRp
bWUudGVzdE92ZXJsYXBKdW1wVGhydSh0aGlzLmluc3QpOw0KCQkJCWlmIChvYnN0YWNsZSkNCgkJ
CQl7DQoJCQkJCXRoaXMuaW5zdC54ID0gb2xkeDsNCgkJCQkJdGhpcy5pbnN0LnkgPSBvbGR5Ow0K
CQkJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCQlpZiAodGhpcy5ydW50aW1l
LnRlc3RPdmVybGFwKHRoaXMuaW5zdCwgb2JzdGFjbGUpKQ0KCQkJCQl7DQoJCQkJCQlvYnN0YWNs
ZSA9IG51bGw7DQoJCQkJCQlpc19qdW1wdGhydSA9IGZhbHNlOw0KCQkJCQl9DQoJCQkJCWVsc2UN
CgkJCQkJCWlzX2p1bXB0aHJ1ID0gdHJ1ZTsNCgkJCQkJdGhpcy5pbnN0LnggPSBvbGR4ICsgbXg7
DQoJCQkJCXRoaXMuaW5zdC55ID0gb2xkeSArIG15Ow0KCQkJCQl0aGlzLmluc3Quc2V0X2Jib3hf
Y2hhbmdlZCgpOw0KCQkJCX0NCgkJCX0NCgkJCWlmIChvYnN0YWNsZSkNCgkJCXsNCgkJCQl2YXIg
cHVzaF9kaXN0ID0gTWF0aC5hYnModGhpcy5keCAqIGR0KSArIDI7DQoJCQkJaWYgKHNsb3BlX3Rv
b19zdGVlcCB8fCAhdGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZCh0aGlzLmluc3QsIC10aGlzLmRv
d254LCAtdGhpcy5kb3dueSwgcHVzaF9kaXN0LCBpc19qdW1wdGhydSwgb2JzdGFjbGUpKQ0KCQkJ
CXsNCgkJCQkJdGhpcy5ydW50aW1lLnJlZ2lzdGVyQ29sbGlzaW9uKHRoaXMuaW5zdCwgb2JzdGFj
bGUpOw0KCQkJCQlwdXNoX2Rpc3QgPSBNYXRoLm1heChNYXRoLmFicyh0aGlzLmR4ICogZHQgKiAy
LjUpLCAzMCk7DQoJCQkJCWlmICghdGhpcy5ydW50aW1lLnB1c2hPdXRTb2xpZCh0aGlzLmluc3Qs
IHRoaXMucmlnaHR4ICogKHRoaXMuZHggPCAwID8gMSA6IC0xKSwgdGhpcy5yaWdodHkgKiAodGhp
cy5keCA8IDAgPyAxIDogLTEpLCBwdXNoX2Rpc3QsIGZhbHNlKSkNCgkJCQkJew0KCQkJCQkJdGhp
cy5pbnN0LnggPSBvbGR4Ow0KCQkJCQkJdGhpcy5pbnN0LnkgPSBvbGR5Ow0KCQkJCQkJdGhpcy5p
bnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmIChmbG9vcl8gJiYg
IWlzX2p1bXB0aHJ1ICYmICF0aGlzLmZsb29ySXNKdW1wdGhydSkNCgkJCQkJew0KCQkJCQkJb2xk
eCA9IHRoaXMuaW5zdC54Ow0KCQkJCQkJb2xkeSA9IHRoaXMuaW5zdC55Ow0KCQkJCQkJdGhpcy5p
bnN0LnggKz0gdGhpcy5kb3dueDsNCgkJCQkJCXRoaXMuaW5zdC55ICs9IHRoaXMuZG93bnk7DQoJ
CQkJCQlpZiAodGhpcy5ydW50aW1lLnRlc3RPdmVybGFwU29saWQodGhpcy5pbnN0KSkNCgkJCQkJ
CXsNCgkJCQkJCQlpZiAoIXRoaXMucnVudGltZS5wdXNoT3V0U29saWQodGhpcy5pbnN0LCAtdGhp
cy5kb3dueCwgLXRoaXMuZG93bnksIDMsIGZhbHNlKSkNCgkJCQkJCQl7DQoJCQkJCQkJCXRoaXMu
aW5zdC54ID0gb2xkeDsNCgkJCQkJCQkJdGhpcy5pbnN0LnkgPSBvbGR5Ow0KCQkJCQkJCQl0aGlz
Lmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCWVsc2UN
CgkJCQkJCXsNCgkJCQkJCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCQkJCQkJdGhpcy5pbnN0Lnkg
PSBvbGR5Ow0KCQkJCQkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQkJCQl9DQoJ
CQkJCX0NCgkJCQkJaWYgKCFpc19qdW1wdGhydSkNCgkJCQkJCXRoaXMuZHggPSAwOwkvLyBzdG9w
DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKCFzbG9wZV90b29fc3RlZXAgJiYgIWp1bXAgJiYgKE1hdGgu
YWJzKHRoaXMuZHkpIDwgTWF0aC5hYnModGhpcy5qdW1wU3RyZW5ndGggLyA0KSkpDQoJCQkJew0K
CQkJCQl0aGlzLmR5ID0gMDsNCgkJCQkJaWYgKCFmbG9vcl8pDQoJCQkJCQlsYW5kZWQgPSB0cnVl
Ow0KCQkJCX0NCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQl2YXIgbmV3Zmxvb3IgPSB0aGlzLmlz
T25GbG9vcigpOw0KCQkJCWlmIChmbG9vcl8gJiYgIW5ld2Zsb29yKQ0KCQkJCXsNCgkJCQkJbWFn
ID0gTWF0aC5jZWlsKE1hdGguYWJzKHRoaXMuZHggKiBkdCkpICsgMjsNCgkJCQkJb2xkeCA9IHRo
aXMuaW5zdC54Ow0KCQkJCQlvbGR5ID0gdGhpcy5pbnN0Lnk7DQoJCQkJCXRoaXMuaW5zdC54ICs9
IHRoaXMuZG93bnggKiBtYWc7DQoJCQkJCXRoaXMuaW5zdC55ICs9IHRoaXMuZG93bnkgKiBtYWc7
DQoJCQkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCQkJCWlmICh0aGlzLnJ1bnRp
bWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3QpIHx8IHRoaXMucnVudGltZS50ZXN0T3Zlcmxh
cEp1bXBUaHJ1KHRoaXMuaW5zdCkpDQoJCQkJCQl0aGlzLnJ1bnRpbWUucHVzaE91dFNvbGlkKHRo
aXMuaW5zdCwgLXRoaXMuZG93bngsIC10aGlzLmRvd255LCBtYWcgKyAyLCB0cnVlKTsNCgkJCQkJ
ZWxzZQ0KCQkJCQl7DQoJCQkJCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCQkJCQl0aGlzLmluc3Qu
eSA9IG9sZHk7DQoJCQkJCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJCQl9DQoJ
CQkJfQ0KCQkJCWVsc2UgaWYgKG5ld2Zsb29yKQ0KCQkJCXsNCgkJCQkJaWYgKCFmbG9vcl8gJiYg
dGhpcy5mbG9vcklzSnVtcHRocnUpDQoJCQkJCXsNCgkJCQkJCXRoaXMubGFzdEZsb29yT2JqZWN0
ID0gbmV3Zmxvb3I7DQoJCQkJCQl0aGlzLmxhc3RGbG9vclggPSBuZXdmbG9vci54Ow0KCQkJCQkJ
dGhpcy5sYXN0Rmxvb3JZID0gbmV3Zmxvb3IueTsNCgkJCQkJCXRoaXMuZHkgPSAwOw0KCQkJCQkJ
bGFuZGVkID0gdHJ1ZTsNCgkJCQkJfQ0KCQkJCQlpZiAodGhpcy5keSA9PT0gMCkNCgkJCQkJew0K
CQkJCQkJdGhpcy5ydW50aW1lLnB1c2hJbkZyYWN0aW9uYWwodGhpcy5pbnN0LCAtdGhpcy5kb3du
eCwgLXRoaXMuZG93bnksIG5ld2Zsb29yLCAxNik7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0N
CgkJaWYgKHRoaXMuZHkgIT09IDApDQoJCXsNCgkJCW9sZHggPSB0aGlzLmluc3QueDsNCgkJCW9s
ZHkgPSB0aGlzLmluc3QueTsNCgkJCXRoaXMuaW5zdC54ICs9IHRoaXMuZHkgKiBkdCAqIHRoaXMu
ZG93bng7DQoJCQl0aGlzLmluc3QueSArPSB0aGlzLmR5ICogZHQgKiB0aGlzLmRvd255Ow0KCQkJ
dmFyIG5ld3ggPSB0aGlzLmluc3QueDsNCgkJCXZhciBuZXd5ID0gdGhpcy5pbnN0Lnk7DQoJCQl0
aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQkJY29sbG9iaiA9IHRoaXMucnVudGltZS50
ZXN0T3ZlcmxhcFNvbGlkKHRoaXMuaW5zdCk7DQoJCQl2YXIgZmVsbF9vbl9qdW1wdGhydSA9IGZh
bHNlOw0KCQkJaWYgKCFjb2xsb2JqICYmICh0aGlzLmR5ID4gMCkgJiYgIWZsb29yXykNCgkJCXsN
CgkJCQlhbGxvdmVyID0gdGhpcy5mYWxsdGhyb3VnaCA+IDAgPyBudWxsIDogdGhpcy5ydW50aW1l
LnRlc3RPdmVybGFwSnVtcFRocnUodGhpcy5pbnN0LCB0cnVlKTsNCgkJCQlpZiAoYWxsb3ZlciAm
JiBhbGxvdmVyLmxlbmd0aCkNCgkJCQl7DQoJCQkJCWlmICh0aGlzLndhc092ZXJKdW1wdGhydSkN
CgkJCQkJew0KCQkJCQkJdGhpcy5pbnN0LnggPSBvbGR4Ow0KCQkJCQkJdGhpcy5pbnN0LnkgPSBv
bGR5Ow0KCQkJCQkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQkJCWZvciAoaSA9
IDAsIGogPSAwLCBsZW4gPSBhbGxvdmVyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJCQkJew0K
CQkJCQkJCWFsbG92ZXJbal0gPSBhbGxvdmVyW2ldOw0KCQkJCQkJCWlmICghdGhpcy5ydW50aW1l
LnRlc3RPdmVybGFwKHRoaXMuaW5zdCwgYWxsb3ZlcltpXSkpDQoJCQkJCQkJCWorKzsNCgkJCQkJ
CX0NCgkJCQkJCWFsbG92ZXIubGVuZ3RoID0gajsNCgkJCQkJCXRoaXMuaW5zdC54ID0gbmV3eDsN
CgkJCQkJCXRoaXMuaW5zdC55ID0gbmV3eTsNCgkJCQkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFu
Z2VkKCk7DQoJCQkJCX0NCgkJCQkJaWYgKGFsbG92ZXIubGVuZ3RoID49IDEpDQoJCQkJCQljb2xs
b2JqID0gYWxsb3ZlclswXTsNCgkJCQl9DQoJCQkJZmVsbF9vbl9qdW1wdGhydSA9ICEhY29sbG9i
ajsNCgkJCX0NCgkJCWlmIChjb2xsb2JqKQ0KCQkJew0KCQkJCXRoaXMucnVudGltZS5yZWdpc3Rl
ckNvbGxpc2lvbih0aGlzLmluc3QsIGNvbGxvYmopOw0KCQkJCXRoaXMuc3VzdGFpblRpbWUgPSAw
Ow0KCQkJCXZhciBwdXNoX2Rpc3QgPSAoZmVsbF9vbl9qdW1wdGhydSA/IE1hdGguYWJzKHRoaXMu
ZHkgKiBkdCAqIDIuNSArIDEwKSA6IE1hdGgubWF4KE1hdGguYWJzKHRoaXMuZHkgKiBkdCAqIDIu
NSArIDEwKSwgMzApKTsNCgkJCQlpZiAoIXRoaXMucnVudGltZS5wdXNoT3V0U29saWQodGhpcy5p
bnN0LCB0aGlzLmRvd254ICogKHRoaXMuZHkgPCAwID8gMSA6IC0xKSwgdGhpcy5kb3dueSAqICh0
aGlzLmR5IDwgMCA/IDEgOiAtMSksIHB1c2hfZGlzdCwgZmVsbF9vbl9qdW1wdGhydSwgY29sbG9i
aikpDQoJCQkJew0KCQkJCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCQkJCXRoaXMuaW5zdC55ID0g
b2xkeTsNCgkJCQkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJCQkJdGhpcy53YXNP
bkZsb29yID0gdHJ1ZTsJCS8vIHByZXZlbnQgYWRqdXN0bWVudCBmb3IgdW5leHBlY3RlZCBmbG9v
ciBsYW5kaW5ncw0KCQkJCQlpZiAoIWZlbGxfb25fanVtcHRocnUpDQoJCQkJCQl0aGlzLmR5ID0g
MDsJLy8gc3RvcA0KCQkJCX0NCgkJCQllbHNlDQoJCQkJew0KCQkJCQl0aGlzLmxhc3RGbG9vck9i
amVjdCA9IGNvbGxvYmo7DQoJCQkJCXRoaXMubGFzdEZsb29yWCA9IGNvbGxvYmoueDsNCgkJCQkJ
dGhpcy5sYXN0Rmxvb3JZID0gY29sbG9iai55Ow0KCQkJCQl0aGlzLmZsb29ySXNKdW1wdGhydSA9
IGZlbGxfb25fanVtcHRocnU7DQoJCQkJCWlmIChmZWxsX29uX2p1bXB0aHJ1KQ0KCQkJCQkJbGFu
ZGVkID0gdHJ1ZTsNCgkJCQkJdGhpcy5keSA9IDA7CS8vIHN0b3ANCgkJCQl9DQoJCQl9DQoJCX0N
CgkJaWYgKHRoaXMuYW5pbU1vZGUgIT09IEFOSU1NT0RFX0ZBTExJTkcgJiYgdGhpcy5keSA+IDAg
JiYgIWZsb29yXykNCgkJew0KCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3IuYmVoYXZpb3JzLlBs
YXRmb3JtLnByb3RvdHlwZS5jbmRzLk9uRmFsbCwgdGhpcy5pbnN0KTsNCgkJCXRoaXMuYW5pbU1v
ZGUgPSBBTklNTU9ERV9GQUxMSU5HOw0KCQl9DQoJCWlmICgoZmxvb3JfIHx8IGxhbmRlZCkgJiYg
dGhpcy5keSA+PSAwKQ0KCQl7DQoJCQlpZiAodGhpcy5hbmltTW9kZSA9PT0gQU5JTU1PREVfRkFM
TElORyB8fCBsYW5kZWQgfHwgKGp1bXAgJiYgdGhpcy5keSA9PT0gMCkpDQoJCQl7DQoJCQkJdGhp
cy5ydW50aW1lLnRyaWdnZXIoY3IuYmVoYXZpb3JzLlBsYXRmb3JtLnByb3RvdHlwZS5jbmRzLk9u
TGFuZCwgdGhpcy5pbnN0KTsNCgkJCQlpZiAodGhpcy5keCA9PT0gMCAmJiB0aGlzLmR5ID09PSAw
KQ0KCQkJCQl0aGlzLmFuaW1Nb2RlID0gQU5JTU1PREVfU1RPUFBFRDsNCgkJCQllbHNlDQoJCQkJ
CXRoaXMuYW5pbU1vZGUgPSBBTklNTU9ERV9NT1ZJTkc7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJ
CQkJaWYgKHRoaXMuYW5pbU1vZGUgIT09IEFOSU1NT0RFX1NUT1BQRUQgJiYgdGhpcy5keCA9PT0g
MCAmJiB0aGlzLmR5ID09PSAwKQ0KCQkJCXsNCgkJCQkJdGhpcy5ydW50aW1lLnRyaWdnZXIoY3Iu
YmVoYXZpb3JzLlBsYXRmb3JtLnByb3RvdHlwZS5jbmRzLk9uU3RvcCwgdGhpcy5pbnN0KTsNCgkJ
CQkJdGhpcy5hbmltTW9kZSA9IEFOSU1NT0RFX1NUT1BQRUQ7DQoJCQkJfQ0KCQkJCWlmICh0aGlz
LmFuaW1Nb2RlICE9PSBBTklNTU9ERV9NT1ZJTkcgJiYgKHRoaXMuZHggIT09IDAgfHwgdGhpcy5k
eSAhPT0gMCkgJiYgIWp1bXApDQoJCQkJew0KCQkJCQl0aGlzLnJ1bnRpbWUudHJpZ2dlcihjci5i
ZWhhdmlvcnMuUGxhdGZvcm0ucHJvdG90eXBlLmNuZHMuT25Nb3ZlLCB0aGlzLmluc3QpOw0KCQkJ
CQl0aGlzLmFuaW1Nb2RlID0gQU5JTU1PREVfTU9WSU5HOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlp
ZiAodGhpcy5mYWxsdGhyb3VnaCA+IDApDQoJCQl0aGlzLmZhbGx0aHJvdWdoLS07DQoJCXRoaXMu
d2FzT3Zlckp1bXB0aHJ1ID0gdGhpcy5ydW50aW1lLnRlc3RPdmVybGFwSnVtcFRocnUodGhpcy5p
bnN0KTsNCgl9Ow0KCWZ1bmN0aW9uIENuZHMoKSB7fTsNCglDbmRzLnByb3RvdHlwZS5Jc01vdmlu
ZyA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5keCAhPT0gMCB8fCB0aGlzLmR5ICE9
PSAwOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuQ29tcGFyZVNwZWVkID0gZnVuY3Rpb24gKGNtcCwg
cykNCgl7DQoJCXZhciBzcGVlZCA9IE1hdGguc3FydCh0aGlzLmR4ICogdGhpcy5keCArIHRoaXMu
ZHkgKiB0aGlzLmR5KTsNCgkJcmV0dXJuIGNyLmRvX2NtcChzcGVlZCwgY21wLCBzKTsNCgl9Ow0K
CUNuZHMucHJvdG90eXBlLklzT25GbG9vciA9IGZ1bmN0aW9uICgpDQoJew0KCQlpZiAodGhpcy5k
eSAhPT0gMCkNCgkJCXJldHVybiBmYWxzZTsNCgkJdmFyIHJldCA9IG51bGw7DQoJCXZhciByZXQy
ID0gbnVsbDsNCgkJdmFyIGksIGxlbiwgajsNCgkJdmFyIG9sZHggPSB0aGlzLmluc3QueDsNCgkJ
dmFyIG9sZHkgPSB0aGlzLmluc3QueTsNCgkJdGhpcy5pbnN0LnggKz0gdGhpcy5kb3dueDsNCgkJ
dGhpcy5pbnN0LnkgKz0gdGhpcy5kb3dueTsNCgkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5nZWQo
KTsNCgkJcmV0ID0gdGhpcy5ydW50aW1lLnRlc3RPdmVybGFwU29saWQodGhpcy5pbnN0KTsNCgkJ
aWYgKCFyZXQgJiYgdGhpcy5mYWxsdGhyb3VnaCA9PT0gMCkNCgkJCXJldDIgPSB0aGlzLnJ1bnRp
bWUudGVzdE92ZXJsYXBKdW1wVGhydSh0aGlzLmluc3QsIHRydWUpOw0KCQl0aGlzLmluc3QueCA9
IG9sZHg7DQoJCXRoaXMuaW5zdC55ID0gb2xkeTsNCgkJdGhpcy5pbnN0LnNldF9iYm94X2NoYW5n
ZWQoKTsNCgkJaWYgKHJldCkJCS8vIHdhcyBvdmVybGFwcGluZyBzb2xpZA0KCQl7DQoJCQlyZXR1
cm4gIXRoaXMucnVudGltZS50ZXN0T3ZlcmxhcCh0aGlzLmluc3QsIHJldCk7DQoJCX0NCgkJaWYg
KHJldDIgJiYgcmV0Mi5sZW5ndGgpDQoJCXsNCgkJCWZvciAoaSA9IDAsIGogPSAwLCBsZW4gPSBy
ZXQyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQ0KCQkJew0KCQkJCXJldDJbal0gPSByZXQyW2ldOw0K
CQkJCWlmICghdGhpcy5ydW50aW1lLnRlc3RPdmVybGFwKHRoaXMuaW5zdCwgcmV0MltpXSkpDQoJ
CQkJCWorKzsNCgkJCX0NCgkJCWlmIChqID49IDEpDQoJCQkJcmV0dXJuIHRydWU7DQoJCX0NCgkJ
cmV0dXJuIGZhbHNlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuSXNCeVdhbGwgPSBmdW5jdGlvbiAo
c2lkZSkNCgl7DQoJCXZhciByZXQgPSBmYWxzZTsNCgkJdmFyIG9sZHggPSB0aGlzLmluc3QueDsN
CgkJdmFyIG9sZHkgPSB0aGlzLmluc3QueTsNCgkJaWYgKHNpZGUgPT09IDApCQkvLyBsZWZ0DQoJ
CXsNCgkJCXRoaXMuaW5zdC54IC09IHRoaXMucmlnaHR4ICogMjsNCgkJCXRoaXMuaW5zdC55IC09
IHRoaXMucmlnaHR5ICogMjsNCgkJfQ0KCQllbHNlDQoJCXsNCgkJCXRoaXMuaW5zdC54ICs9IHRo
aXMucmlnaHR4ICogMjsNCgkJCXRoaXMuaW5zdC55ICs9IHRoaXMucmlnaHR5ICogMjsNCgkJfQ0K
CQl0aGlzLmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQlpZiAoIXRoaXMucnVudGltZS50ZXN0
T3ZlcmxhcFNvbGlkKHRoaXMuaW5zdCkpDQoJCXsNCgkJCXRoaXMuaW5zdC54ID0gb2xkeDsNCgkJ
CXRoaXMuaW5zdC55ID0gb2xkeTsNCgkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJ
CQlyZXR1cm4gZmFsc2U7DQoJCX0NCgkJdGhpcy5pbnN0LnggLT0gdGhpcy5kb3dueCAqIDM7DQoJ
CXRoaXMuaW5zdC55IC09IHRoaXMuZG93bnkgKiAzOw0KCQl0aGlzLmluc3Quc2V0X2Jib3hfY2hh
bmdlZCgpOw0KCQlyZXQgPSB0aGlzLnJ1bnRpbWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3Qp
Ow0KCQl0aGlzLmluc3QueCA9IG9sZHg7DQoJCXRoaXMuaW5zdC55ID0gb2xkeTsNCgkJdGhpcy5p
bnN0LnNldF9iYm94X2NoYW5nZWQoKTsNCgkJcmV0dXJuIHJldDsNCgl9Ow0KCUNuZHMucHJvdG90
eXBlLklzSnVtcGluZyA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5keSA8IDA7DQoJ
fTsNCglDbmRzLnByb3RvdHlwZS5Jc0ZhbGxpbmcgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJu
IHRoaXMuZHkgPiAwOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25KdW1wID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25GYWxsID0gZnVuY3Rp
b24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25TdG9wID0g
ZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5cGUuT25N
b3ZlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5wcm90b3R5
cGUuT25MYW5kID0gZnVuY3Rpb24gKCkNCgl7DQoJCXJldHVybiB0cnVlOw0KCX07DQoJQ25kcy5w
cm90b3R5cGUuSXNEb3VibGVKdW1wRW5hYmxlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4g
dGhpcy5lbmFibGVEb3VibGVKdW1wOw0KCX07DQoJYmVoYXZpb3JQcm90by5jbmRzID0gbmV3IENu
ZHMoKTsNCglmdW5jdGlvbiBBY3RzKCkge307DQoJQWN0cy5wcm90b3R5cGUuU2V0SWdub3JlSW5w
dXQgPSBmdW5jdGlvbiAoaWdub3JpbmcpDQoJew0KCQl0aGlzLmlnbm9yZUlucHV0ID0gaWdub3Jp
bmc7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRNYXhTcGVlZCA9IGZ1bmN0aW9uIChtYXhzcGVl
ZCkNCgl7DQoJCXRoaXMubWF4c3BlZWQgPSBtYXhzcGVlZDsNCgkJaWYgKHRoaXMubWF4c3BlZWQg
PCAwKQ0KCQkJdGhpcy5tYXhzcGVlZCA9IDA7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRBY2Nl
bGVyYXRpb24gPSBmdW5jdGlvbiAoYWNjKQ0KCXsNCgkJdGhpcy5hY2MgPSBhY2M7DQoJCWlmICh0
aGlzLmFjYyA8IDApDQoJCQl0aGlzLmFjYyA9IDA7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRE
ZWNlbGVyYXRpb24gPSBmdW5jdGlvbiAoZGVjKQ0KCXsNCgkJdGhpcy5kZWMgPSBkZWM7DQoJCWlm
ICh0aGlzLmRlYyA8IDApDQoJCQl0aGlzLmRlYyA9IDA7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5T
ZXRKdW1wU3RyZW5ndGggPSBmdW5jdGlvbiAoanMpDQoJew0KCQl0aGlzLmp1bXBTdHJlbmd0aCA9
IGpzOw0KCQlpZiAodGhpcy5qdW1wU3RyZW5ndGggPCAwKQ0KCQkJdGhpcy5qdW1wU3RyZW5ndGgg
PSAwOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0R3Jhdml0eSA9IGZ1bmN0aW9uIChncmF2KQ0K
CXsNCgkJaWYgKHRoaXMuZzEgPT09IGdyYXYpDQoJCQlyZXR1cm47CQkvLyBubyBjaGFuZ2UNCgkJ
dGhpcy5nID0gZ3JhdjsNCgkJdGhpcy51cGRhdGVHcmF2aXR5KCk7DQoJCWlmICh0aGlzLnJ1bnRp
bWUudGVzdE92ZXJsYXBTb2xpZCh0aGlzLmluc3QpKQ0KCQl7DQoJCQl0aGlzLnJ1bnRpbWUucHVz
aE91dFNvbGlkKHRoaXMuaW5zdCwgdGhpcy5kb3dueCwgdGhpcy5kb3dueSwgMTApOw0KCQkJdGhp
cy5pbnN0LnggKz0gdGhpcy5kb3dueCAqIDI7DQoJCQl0aGlzLmluc3QueSArPSB0aGlzLmRvd255
ICogMjsNCgkJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCX0NCgkJdGhpcy5sYXN0
Rmxvb3JPYmplY3QgPSBudWxsOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0TWF4RmFsbFNwZWVk
ID0gZnVuY3Rpb24gKG1mcykNCgl7DQoJCXRoaXMubWF4RmFsbCA9IG1mczsNCgkJaWYgKHRoaXMu
bWF4RmFsbCA8IDApDQoJCQl0aGlzLm1heEZhbGwgPSAwOw0KCX07DQoJQWN0cy5wcm90b3R5cGUu
U2ltdWxhdGVDb250cm9sID0gZnVuY3Rpb24gKGN0cmwpDQoJew0KCQlzd2l0Y2ggKGN0cmwpIHsN
CgkJY2FzZSAwOgkJdGhpcy5zaW1sZWZ0ID0gdHJ1ZTsJYnJlYWs7DQoJCWNhc2UgMToJCXRoaXMu
c2ltcmlnaHQgPSB0cnVlOwlicmVhazsNCgkJY2FzZSAyOgkJdGhpcy5zaW1qdW1wID0gdHJ1ZTsJ
YnJlYWs7DQoJCX0NCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldFZlY3RvclggPSBmdW5jdGlvbiAo
dngpDQoJew0KCQl0aGlzLmR4ID0gdng7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRWZWN0b3JZ
ID0gZnVuY3Rpb24gKHZ5KQ0KCXsNCgkJdGhpcy5keSA9IHZ5Ow0KCX07DQoJQWN0cy5wcm90b3R5
cGUuU2V0R3Jhdml0eUFuZ2xlID0gZnVuY3Rpb24gKGEpDQoJew0KCQlhID0gY3IudG9fcmFkaWFu
cyhhKTsNCgkJYSA9IGNyLmNsYW1wX2FuZ2xlKGEpOw0KCQlpZiAodGhpcy5nYSA9PT0gYSkNCgkJ
CXJldHVybjsJCS8vIG5vIGNoYW5nZQ0KCQl0aGlzLmdhID0gYTsNCgkJdGhpcy51cGRhdGVHcmF2
aXR5KCk7DQoJCXRoaXMubGFzdEZsb29yT2JqZWN0ID0gbnVsbDsNCgl9Ow0KCUFjdHMucHJvdG90
eXBlLlNldEVuYWJsZWQgPSBmdW5jdGlvbiAoZW4pDQoJew0KCQlpZiAodGhpcy5lbmFibGVkICE9
PSAoZW4gPT09IDEpKQ0KCQl7DQoJCQl0aGlzLmVuYWJsZWQgPSAoZW4gPT09IDEpOw0KCQkJaWYg
KCF0aGlzLmVuYWJsZWQpDQoJCQkJdGhpcy5sYXN0Rmxvb3JPYmplY3QgPSBudWxsOw0KCQl9DQoJ
fTsNCglBY3RzLnByb3RvdHlwZS5GYWxsVGhyb3VnaCA9IGZ1bmN0aW9uICgpDQoJew0KCQl2YXIg
b2xkeCA9IHRoaXMuaW5zdC54Ow0KCQl2YXIgb2xkeSA9IHRoaXMuaW5zdC55Ow0KCQl0aGlzLmlu
c3QueCArPSB0aGlzLmRvd254Ow0KCQl0aGlzLmluc3QueSArPSB0aGlzLmRvd255Ow0KCQl0aGlz
Lmluc3Quc2V0X2Jib3hfY2hhbmdlZCgpOw0KCQl2YXIgb3ZlcmxhcHMgPSB0aGlzLnJ1bnRpbWUu
dGVzdE92ZXJsYXBKdW1wVGhydSh0aGlzLmluc3QsIGZhbHNlKTsNCgkJdGhpcy5pbnN0LnggPSBv
bGR4Ow0KCQl0aGlzLmluc3QueSA9IG9sZHk7DQoJCXRoaXMuaW5zdC5zZXRfYmJveF9jaGFuZ2Vk
KCk7DQoJCWlmICghb3ZlcmxhcHMpDQoJCQlyZXR1cm47DQoJCXRoaXMuZmFsbHRocm91Z2ggPSAz
OwkJCS8vIGRpc2FibGUganVtcHRocnVzIGZvciAzIHRpY2tzICgxIGRvZXNuJ3QgZG8gaXQsIDIg
ZG9lcywgMyB0byBiZSBvbiBzYWZlIHNpZGUpDQoJCXRoaXMubGFzdEZsb29yT2JqZWN0ID0gbnVs
bDsNCgl9Ow0KCUFjdHMucHJvdG90eXBlLlNldERvdWJsZUp1bXBFbmFibGVkID0gZnVuY3Rpb24g
KGUpDQoJew0KCQl0aGlzLmVuYWJsZURvdWJsZUp1bXAgPSAoZSAhPT0gMCk7DQoJfTsNCglBY3Rz
LnByb3RvdHlwZS5TZXRKdW1wU3VzdGFpbiA9IGZ1bmN0aW9uIChzKQ0KCXsNCgkJdGhpcy5qdW1w
U3VzdGFpbiA9IHMgLyAxMDAwOwkJLy8gY29udmVydCB0byBtcw0KCX07DQoJYmVoYXZpb3JQcm90
by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5wcm90b3R5
cGUuU3BlZWQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChNYXRoLnNxcnQo
dGhpcy5keCAqIHRoaXMuZHggKyB0aGlzLmR5ICogdGhpcy5keSkpOw0KCX07DQoJRXhwcy5wcm90
b3R5cGUuTWF4U3BlZWQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlz
Lm1heHNwZWVkKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkFjY2VsZXJhdGlvbiA9IGZ1bmN0aW9u
IChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuYWNjKTsNCgl9Ow0KCUV4cHMucHJvdG90
eXBlLkRlY2VsZXJhdGlvbiA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRo
aXMuZGVjKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkp1bXBTdHJlbmd0aCA9IGZ1bmN0aW9uIChy
ZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRoaXMuanVtcFN0cmVuZ3RoKTsNCgl9Ow0KCUV4cHMu
cHJvdG90eXBlLkdyYXZpdHkgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0
aGlzLmcpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuR3Jhdml0eUFuZ2xlID0gZnVuY3Rpb24gKHJl
dCkNCgl7DQoJCXJldC5zZXRfZmxvYXQoY3IudG9fZGVncmVlcyh0aGlzLmdhKSk7DQoJfTsNCglF
eHBzLnByb3RvdHlwZS5NYXhGYWxsU3BlZWQgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNl
dF9mbG9hdCh0aGlzLm1heEZhbGwpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuTW92aW5nQW5nbGUg
PSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChjci50b19kZWdyZWVzKE1hdGgu
YXRhbjIodGhpcy5keSwgdGhpcy5keCkpKTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLlZlY3Rvclgg
PSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLmR4KTsNCgl9Ow0KCUV4
cHMucHJvdG90eXBlLlZlY3RvclkgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9h
dCh0aGlzLmR5KTsNCgl9Ow0KCUV4cHMucHJvdG90eXBlLkp1bXBTdXN0YWluID0gZnVuY3Rpb24g
KHJldCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5qdW1wU3VzdGFpbiAqIDEwMDApOwkJLy8g
Y29udmVydCBiYWNrIHRvIG1zDQoJfTsNCgliZWhhdmlvclByb3RvLmV4cHMgPSBuZXcgRXhwcygp
Ow0KfSgpKTsNCjsNCjsNCmNyLmJlaGF2aW9ycy5Sb3RhdGUgPSBmdW5jdGlvbihydW50aW1lKQ0K
ew0KCXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIGJl
aGF2aW9yUHJvdG8gPSBjci5iZWhhdmlvcnMuUm90YXRlLnByb3RvdHlwZTsNCgliZWhhdmlvclBy
b3RvLlR5cGUgPSBmdW5jdGlvbihiZWhhdmlvciwgb2JqdHlwZSkNCgl7DQoJCXRoaXMuYmVoYXZp
b3IgPSBiZWhhdmlvcjsNCgkJdGhpcy5vYmp0eXBlID0gb2JqdHlwZTsNCgkJdGhpcy5ydW50aW1l
ID0gYmVoYXZpb3IucnVudGltZTsNCgl9Ow0KCXZhciBiZWh0eXBlUHJvdG8gPSBiZWhhdmlvclBy
b3RvLlR5cGUucHJvdG90eXBlOw0KCWJlaHR5cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkN
Cgl7DQoJfTsNCgliZWhhdmlvclByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSwgaW5zdCkN
Cgl7DQoJCXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMuYmVoYXZpb3IgPSB0eXBlLmJlaGF2aW9y
Ow0KCQl0aGlzLmluc3QgPSBpbnN0OwkJCQkvLyBhc3NvY2lhdGVkIG9iamVjdCBpbnN0YW5jZSB0
byBtb2RpZnkNCgkJdGhpcy5ydW50aW1lID0gdHlwZS5ydW50aW1lOw0KCX07DQoJdmFyIGJlaGlu
c3RQcm90byA9IGJlaGF2aW9yUHJvdG8uSW5zdGFuY2UucHJvdG90eXBlOw0KCWJlaGluc3RQcm90
by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJCXRoaXMuc3BlZWQgPSBjci50b19yYWRpYW5z
KHRoaXMucHJvcGVydGllc1swXSk7DQoJCXRoaXMuYWNjID0gY3IudG9fcmFkaWFucyh0aGlzLnBy
b3BlcnRpZXNbMV0pOw0KCX07DQoJYmVoaW5zdFByb3RvLnNhdmVUb0pTT04gPSBmdW5jdGlvbiAo
KQ0KCXsNCgkJcmV0dXJuIHsNCgkJCSJzcGVlZCI6IHRoaXMuc3BlZWQsDQoJCQkiYWNjIjogdGhp
cy5hY2MNCgkJfTsNCgl9Ow0KCWJlaGluc3RQcm90by5sb2FkRnJvbUpTT04gPSBmdW5jdGlvbiAo
bykNCgl7DQoJCXRoaXMuc3BlZWQgPSBvWyJzcGVlZCJdOw0KCQl0aGlzLmFjYyA9IG9bImFjYyJd
Ow0KCX07DQoJYmVoaW5zdFByb3RvLnRpY2sgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJdmFyIGR0ID0g
dGhpcy5ydW50aW1lLmdldER0KHRoaXMuaW5zdCk7DQoJCWlmIChkdCA9PT0gMCkNCgkJCXJldHVy
bjsNCgkJaWYgKHRoaXMuYWNjICE9PSAwKQ0KCQkJdGhpcy5zcGVlZCArPSB0aGlzLmFjYyAqIGR0
Ow0KCQlpZiAodGhpcy5zcGVlZCAhPT0gMCkNCgkJew0KCQkJdGhpcy5pbnN0LmFuZ2xlID0gY3Iu
Y2xhbXBfYW5nbGUodGhpcy5pbnN0LmFuZ2xlICsgdGhpcy5zcGVlZCAqIGR0KTsNCgkJCXRoaXMu
aW5zdC5zZXRfYmJveF9jaGFuZ2VkKCk7DQoJCX0NCgl9Ow0KCWZ1bmN0aW9uIENuZHMoKSB7fTsN
CgliZWhhdmlvclByb3RvLmNuZHMgPSBuZXcgQ25kcygpOw0KCWZ1bmN0aW9uIEFjdHMoKSB7fTsN
CglBY3RzLnByb3RvdHlwZS5TZXRTcGVlZCA9IGZ1bmN0aW9uIChzKQ0KCXsNCgkJdGhpcy5zcGVl
ZCA9IGNyLnRvX3JhZGlhbnMocyk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRBY2NlbGVyYXRp
b24gPSBmdW5jdGlvbiAoYSkNCgl7DQoJCXRoaXMuYWNjID0gY3IudG9fcmFkaWFucyhhKTsNCgl9
Ow0KCWJlaGF2aW9yUHJvdG8uYWN0cyA9IG5ldyBBY3RzKCk7DQoJZnVuY3Rpb24gRXhwcygpIHt9
Ow0KCUV4cHMucHJvdG90eXBlLlNwZWVkID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCXJldC5zZXRf
ZmxvYXQoY3IudG9fZGVncmVlcyh0aGlzLnNwZWVkKSk7DQoJfTsNCglFeHBzLnByb3RvdHlwZS5B
Y2NlbGVyYXRpb24gPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdChjci50b19k
ZWdyZWVzKHRoaXMuYWNjKSk7DQoJfTsNCgliZWhhdmlvclByb3RvLmV4cHMgPSBuZXcgRXhwcygp
Ow0KfSgpKTsNCjsNCjsNCmNyLmJlaGF2aW9ycy5TaW4gPSBmdW5jdGlvbihydW50aW1lKQ0Kew0K
CXRoaXMucnVudGltZSA9IHJ1bnRpbWU7DQp9Ow0KKGZ1bmN0aW9uICgpDQp7DQoJdmFyIGJlaGF2
aW9yUHJvdG8gPSBjci5iZWhhdmlvcnMuU2luLnByb3RvdHlwZTsNCgliZWhhdmlvclByb3RvLlR5
cGUgPSBmdW5jdGlvbihiZWhhdmlvciwgb2JqdHlwZSkNCgl7DQoJCXRoaXMuYmVoYXZpb3IgPSBi
ZWhhdmlvcjsNCgkJdGhpcy5vYmp0eXBlID0gb2JqdHlwZTsNCgkJdGhpcy5ydW50aW1lID0gYmVo
YXZpb3IucnVudGltZTsNCgl9Ow0KCXZhciBiZWh0eXBlUHJvdG8gPSBiZWhhdmlvclByb3RvLlR5
cGUucHJvdG90eXBlOw0KCWJlaHR5cGVQcm90by5vbkNyZWF0ZSA9IGZ1bmN0aW9uKCkNCgl7DQoJ
fTsNCgliZWhhdmlvclByb3RvLkluc3RhbmNlID0gZnVuY3Rpb24odHlwZSwgaW5zdCkNCgl7DQoJ
CXRoaXMudHlwZSA9IHR5cGU7DQoJCXRoaXMuYmVoYXZpb3IgPSB0eXBlLmJlaGF2aW9yOw0KCQl0
aGlzLmluc3QgPSBpbnN0OwkJCQkvLyBhc3NvY2lhdGVkIG9iamVjdCBpbnN0YW5jZSB0byBtb2Rp
ZnkNCgkJdGhpcy5ydW50aW1lID0gdHlwZS5ydW50aW1lOw0KCQl0aGlzLmkgPSAwOwkJLy8gcGVy
aW9kIG9mZnNldCAocmFkaWFucykNCgl9Ow0KCXZhciBiZWhpbnN0UHJvdG8gPSBiZWhhdmlvclBy
b3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgl2YXIgXzJwaSA9IDIgKiBNYXRoLlBJOw0KCXZhciBf
cGlfMiA9IE1hdGguUEkgLyAyOw0KCXZhciBfM3BpXzIgPSAoMyAqIE1hdGguUEkpIC8gMjsNCgli
ZWhpbnN0UHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0KCQl0aGlzLmFjdGl2ZSA9ICh0
aGlzLnByb3BlcnRpZXNbMF0gPT09IDEpOw0KCQl0aGlzLm1vdmVtZW50ID0gdGhpcy5wcm9wZXJ0
aWVzWzFdOyAvLyAwPUhvcml6b250YWx8MT1WZXJ0aWNhbHwyPVNpemV8Mz1XaWR0aHw0PUhlaWdo
dHw1PUFuZ2xlfDY9T3BhY2l0eXw3PVZhbHVlIG9ubHkNCgkJdGhpcy53YXZlID0gdGhpcy5wcm9w
ZXJ0aWVzWzJdOwkJLy8gMD1TaW5lfDE9VHJpYW5nbGV8Mj1TYXd0b290aHwzPVJldmVyc2Ugc2F3
dG9vdGh8ND1TcXVhcmUNCgkJdGhpcy5wZXJpb2QgPSB0aGlzLnByb3BlcnRpZXNbM107DQoJCXRo
aXMucGVyaW9kICs9IE1hdGgucmFuZG9tKCkgKiB0aGlzLnByb3BlcnRpZXNbNF07CQkJCQkJCQkv
LyBwZXJpb2QgcmFuZG9tDQoJCWlmICh0aGlzLnBlcmlvZCA9PT0gMCkNCgkJCXRoaXMuaSA9IDA7
DQoJCWVsc2UNCgkJew0KCQkJdGhpcy5pID0gKHRoaXMucHJvcGVydGllc1s1XSAvIHRoaXMucGVy
aW9kKSAqIF8ycGk7CQkJCQkJCQkvLyBwZXJpb2Qgb2Zmc2V0DQoJCQl0aGlzLmkgKz0gKChNYXRo
LnJhbmRvbSgpICogdGhpcy5wcm9wZXJ0aWVzWzZdKSAvIHRoaXMucGVyaW9kKSAqIF8ycGk7CQkJ
Ly8gcGVyaW9kIG9mZnNldCByYW5kb20NCgkJfQ0KCQl0aGlzLm1hZyA9IHRoaXMucHJvcGVydGll
c1s3XTsJCQkJCQkJCQkJCQkJLy8gbWFnbml0dWRlDQoJCXRoaXMubWFnICs9IE1hdGgucmFuZG9t
KCkgKiB0aGlzLnByb3BlcnRpZXNbOF07CQkJCQkJCQkJLy8gbWFnbml0dWRlIHJhbmRvbQ0KCQl0
aGlzLmluaXRpYWxWYWx1ZSA9IDA7DQoJCXRoaXMuaW5pdGlhbFZhbHVlMiA9IDA7DQoJCXRoaXMu
cmF0aW8gPSAwOw0KCQlpZiAodGhpcy5tb3ZlbWVudCA9PT0gNSkJCQkvLyBhbmdsZQ0KCQkJdGhp
cy5tYWcgPSBjci50b19yYWRpYW5zKHRoaXMubWFnKTsNCgkJdGhpcy5pbml0KCk7DQoJfTsNCgli
ZWhpbnN0UHJvdG8uc2F2ZVRvSlNPTiA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gew0KCQkJ
ImkiOiB0aGlzLmksDQoJCQkiYSI6IHRoaXMuYWN0aXZlLA0KCQkJIm12IjogdGhpcy5tb3ZlbWVu
dCwNCgkJCSJ3IjogdGhpcy53YXZlLA0KCQkJInAiOiB0aGlzLnBlcmlvZCwNCgkJCSJtYWciOiB0
aGlzLm1hZywNCgkJCSJpdiI6IHRoaXMuaW5pdGlhbFZhbHVlLA0KCQkJIml2MiI6IHRoaXMuaW5p
dGlhbFZhbHVlMiwNCgkJCSJyIjogdGhpcy5yYXRpbywNCgkJCSJsa3YiOiB0aGlzLmxhc3RLbm93
blZhbHVlLA0KCQkJImxrdjIiOiB0aGlzLmxhc3RLbm93blZhbHVlMg0KCQl9Ow0KCX07DQoJYmVo
aW5zdFByb3RvLmxvYWRGcm9tSlNPTiA9IGZ1bmN0aW9uIChvKQ0KCXsNCgkJdGhpcy5pID0gb1si
aSJdOw0KCQl0aGlzLmFjdGl2ZSA9IG9bImEiXTsNCgkJdGhpcy5tb3ZlbWVudCA9IG9bIm12Il07
DQoJCXRoaXMud2F2ZSA9IG9bInciXTsNCgkJdGhpcy5wZXJpb2QgPSBvWyJwIl07DQoJCXRoaXMu
bWFnID0gb1sibWFnIl07DQoJCXRoaXMuaW5pdGlhbFZhbHVlID0gb1siaXYiXTsNCgkJdGhpcy5p
bml0aWFsVmFsdWUyID0gb1siaXYyIl0gfHwgMDsNCgkJdGhpcy5yYXRpbyA9IG9bInIiXTsNCgkJ
dGhpcy5sYXN0S25vd25WYWx1ZSA9IG9bImxrdiJdOw0KCQl0aGlzLmxhc3RLbm93blZhbHVlMiA9
IG9bImxrdjIiXSB8fCAwOw0KCX07DQoJYmVoaW5zdFByb3RvLmluaXQgPSBmdW5jdGlvbiAoKQ0K
CXsNCgkJc3dpdGNoICh0aGlzLm1vdmVtZW50KSB7DQoJCWNhc2UgMDoJCS8vIGhvcml6b250YWwN
CgkJCXRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy5pbnN0Lng7DQoJCQlicmVhazsNCgkJY2FzZSAx
OgkJLy8gdmVydGljYWwNCgkJCXRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy5pbnN0Lnk7DQoJCQli
cmVhazsNCgkJY2FzZSAyOgkJLy8gc2l6ZQ0KCQkJdGhpcy5pbml0aWFsVmFsdWUgPSB0aGlzLmlu
c3Qud2lkdGg7DQoJCQl0aGlzLnJhdGlvID0gdGhpcy5pbnN0LmhlaWdodCAvIHRoaXMuaW5zdC53
aWR0aDsNCgkJCWJyZWFrOw0KCQljYXNlIDM6CQkvLyB3aWR0aA0KCQkJdGhpcy5pbml0aWFsVmFs
dWUgPSB0aGlzLmluc3Qud2lkdGg7DQoJCQlicmVhazsNCgkJY2FzZSA0OgkJLy8gaGVpZ2h0DQoJ
CQl0aGlzLmluaXRpYWxWYWx1ZSA9IHRoaXMuaW5zdC5oZWlnaHQ7DQoJCQlicmVhazsNCgkJY2Fz
ZSA1OgkJLy8gYW5nbGUNCgkJCXRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy5pbnN0LmFuZ2xlOw0K
CQkJYnJlYWs7DQoJCWNhc2UgNjoJCS8vIG9wYWNpdHkNCgkJCXRoaXMuaW5pdGlhbFZhbHVlID0g
dGhpcy5pbnN0Lm9wYWNpdHk7DQoJCQlicmVhazsNCgkJY2FzZSA3Og0KCQkJdGhpcy5pbml0aWFs
VmFsdWUgPSAwOw0KCQkJYnJlYWs7DQoJCWNhc2UgODoJCS8vIGZvcndhcmRzL2JhY2t3YXJkcw0K
CQkJdGhpcy5pbml0aWFsVmFsdWUgPSB0aGlzLmluc3QueDsNCgkJCXRoaXMuaW5pdGlhbFZhbHVl
MiA9IHRoaXMuaW5zdC55Ow0KCQkJYnJlYWs7DQoJCWRlZmF1bHQ6DQo7DQoJCX0NCgkJdGhpcy5s
YXN0S25vd25WYWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlOw0KCQl0aGlzLmxhc3RLbm93blZhbHVl
MiA9IHRoaXMuaW5pdGlhbFZhbHVlMjsNCgl9Ow0KCWJlaGluc3RQcm90by53YXZlRnVuYyA9IGZ1
bmN0aW9uICh4KQ0KCXsNCgkJeCA9IHggJSBfMnBpOw0KCQlzd2l0Y2ggKHRoaXMud2F2ZSkgew0K
CQljYXNlIDA6CQkvLyBzaW5lDQoJCQlyZXR1cm4gTWF0aC5zaW4oeCk7DQoJCWNhc2UgMToJCS8v
IHRyaWFuZ2xlDQoJCQlpZiAoeCA8PSBfcGlfMikNCgkJCQlyZXR1cm4geCAvIF9waV8yOw0KCQkJ
ZWxzZSBpZiAoeCA8PSBfM3BpXzIpDQoJCQkJcmV0dXJuIDEgLSAoMiAqICh4IC0gX3BpXzIpIC8g
TWF0aC5QSSk7DQoJCQllbHNlDQoJCQkJcmV0dXJuICh4IC0gXzNwaV8yKSAvIF9waV8yIC0gMTsN
CgkJY2FzZSAyOgkJLy8gc2F3dG9vdGgNCgkJCXJldHVybiAyICogeCAvIF8ycGkgLSAxOw0KCQlj
YXNlIDM6CQkvLyByZXZlcnNlIHNhd3Rvb3RoDQoJCQlyZXR1cm4gLTIgKiB4IC8gXzJwaSArIDE7
DQoJCWNhc2UgNDoJCS8vIHNxdWFyZQ0KCQkJcmV0dXJuIHggPCBNYXRoLlBJID8gLTEgOiAxOw0K
CQl9Ow0KCQlyZXR1cm4gMDsNCgl9Ow0KCWJlaGluc3RQcm90by50aWNrID0gZnVuY3Rpb24gKCkN
Cgl7DQoJCXZhciBkdCA9IHRoaXMucnVudGltZS5nZXREdCh0aGlzLmluc3QpOw0KCQlpZiAoIXRo
aXMuYWN0aXZlIHx8IGR0ID09PSAwKQ0KCQkJcmV0dXJuOw0KCQlpZiAodGhpcy5wZXJpb2QgPT09
IDApDQoJCQl0aGlzLmkgPSAwOw0KCQllbHNlDQoJCXsNCgkJCXRoaXMuaSArPSAoZHQgLyB0aGlz
LnBlcmlvZCkgKiBfMnBpOw0KCQkJdGhpcy5pID0gdGhpcy5pICUgXzJwaTsNCgkJfQ0KCQl0aGlz
LnVwZGF0ZUZyb21QaGFzZSgpOw0KCX07DQoJYmVoaW5zdFByb3RvLnVwZGF0ZUZyb21QaGFzZSA9
IGZ1bmN0aW9uICgpDQoJew0KCQlzd2l0Y2ggKHRoaXMubW92ZW1lbnQpIHsNCgkJY2FzZSAwOgkJ
Ly8gaG9yaXpvbnRhbA0KCQkJaWYgKHRoaXMuaW5zdC54ICE9PSB0aGlzLmxhc3RLbm93blZhbHVl
KQ0KCQkJCXRoaXMuaW5pdGlhbFZhbHVlICs9IHRoaXMuaW5zdC54IC0gdGhpcy5sYXN0S25vd25W
YWx1ZTsNCgkJCXRoaXMuaW5zdC54ID0gdGhpcy5pbml0aWFsVmFsdWUgKyB0aGlzLndhdmVGdW5j
KHRoaXMuaSkgKiB0aGlzLm1hZzsNCgkJCXRoaXMubGFzdEtub3duVmFsdWUgPSB0aGlzLmluc3Qu
eDsNCgkJCWJyZWFrOw0KCQljYXNlIDE6CQkvLyB2ZXJ0aWNhbA0KCQkJaWYgKHRoaXMuaW5zdC55
ICE9PSB0aGlzLmxhc3RLbm93blZhbHVlKQ0KCQkJCXRoaXMuaW5pdGlhbFZhbHVlICs9IHRoaXMu
aW5zdC55IC0gdGhpcy5sYXN0S25vd25WYWx1ZTsNCgkJCXRoaXMuaW5zdC55ID0gdGhpcy5pbml0
aWFsVmFsdWUgKyB0aGlzLndhdmVGdW5jKHRoaXMuaSkgKiB0aGlzLm1hZzsNCgkJCXRoaXMubGFz
dEtub3duVmFsdWUgPSB0aGlzLmluc3QueTsNCgkJCWJyZWFrOw0KCQljYXNlIDI6CQkvLyBzaXpl
DQoJCQl0aGlzLmluc3Qud2lkdGggPSB0aGlzLmluaXRpYWxWYWx1ZSArIHRoaXMud2F2ZUZ1bmMo
dGhpcy5pKSAqIHRoaXMubWFnOw0KCQkJdGhpcy5pbnN0LmhlaWdodCA9IHRoaXMuaW5zdC53aWR0
aCAqIHRoaXMucmF0aW87DQoJCQlicmVhazsNCgkJY2FzZSAzOgkJLy8gd2lkdGgNCgkJCXRoaXMu
aW5zdC53aWR0aCA9IHRoaXMuaW5pdGlhbFZhbHVlICsgdGhpcy53YXZlRnVuYyh0aGlzLmkpICog
dGhpcy5tYWc7DQoJCQlicmVhazsNCgkJY2FzZSA0OgkJLy8gaGVpZ2h0DQoJCQl0aGlzLmluc3Qu
aGVpZ2h0ID0gdGhpcy5pbml0aWFsVmFsdWUgKyB0aGlzLndhdmVGdW5jKHRoaXMuaSkgKiB0aGlz
Lm1hZzsNCgkJCWJyZWFrOw0KCQljYXNlIDU6CQkvLyBhbmdsZQ0KCQkJaWYgKHRoaXMuaW5zdC5h
bmdsZSAhPT0gdGhpcy5sYXN0S25vd25WYWx1ZSkNCgkJCQl0aGlzLmluaXRpYWxWYWx1ZSA9IGNy
LmNsYW1wX2FuZ2xlKHRoaXMuaW5pdGlhbFZhbHVlICsgKHRoaXMuaW5zdC5hbmdsZSAtIHRoaXMu
bGFzdEtub3duVmFsdWUpKTsNCgkJCXRoaXMuaW5zdC5hbmdsZSA9IGNyLmNsYW1wX2FuZ2xlKHRo
aXMuaW5pdGlhbFZhbHVlICsgdGhpcy53YXZlRnVuYyh0aGlzLmkpICogdGhpcy5tYWcpOw0KCQkJ
dGhpcy5sYXN0S25vd25WYWx1ZSA9IHRoaXMuaW5zdC5hbmdsZTsNCgkJCWJyZWFrOw0KCQljYXNl
IDY6CQkvLyBvcGFjaXR5DQoJCQl0aGlzLmluc3Qub3BhY2l0eSA9IHRoaXMuaW5pdGlhbFZhbHVl
ICsgKHRoaXMud2F2ZUZ1bmModGhpcy5pKSAqIHRoaXMubWFnKSAvIDEwMDsNCgkJCWlmICh0aGlz
Lmluc3Qub3BhY2l0eSA8IDApDQoJCQkJdGhpcy5pbnN0Lm9wYWNpdHkgPSAwOw0KCQkJZWxzZSBp
ZiAodGhpcy5pbnN0Lm9wYWNpdHkgPiAxKQ0KCQkJCXRoaXMuaW5zdC5vcGFjaXR5ID0gMTsNCgkJ
CWJyZWFrOw0KCQljYXNlIDg6CQkvLyBmb3J3YXJkcy9iYWNrd2FyZHMNCgkJCWlmICh0aGlzLmlu
c3QueCAhPT0gdGhpcy5sYXN0S25vd25WYWx1ZSkNCgkJCQl0aGlzLmluaXRpYWxWYWx1ZSArPSB0
aGlzLmluc3QueCAtIHRoaXMubGFzdEtub3duVmFsdWU7DQoJCQlpZiAodGhpcy5pbnN0LnkgIT09
IHRoaXMubGFzdEtub3duVmFsdWUyKQ0KCQkJCXRoaXMuaW5pdGlhbFZhbHVlMiArPSB0aGlzLmlu
c3QueSAtIHRoaXMubGFzdEtub3duVmFsdWUyOw0KCQkJdGhpcy5pbnN0LnggPSB0aGlzLmluaXRp
YWxWYWx1ZSArIE1hdGguY29zKHRoaXMuaW5zdC5hbmdsZSkgKiB0aGlzLndhdmVGdW5jKHRoaXMu
aSkgKiB0aGlzLm1hZzsNCgkJCXRoaXMuaW5zdC55ID0gdGhpcy5pbml0aWFsVmFsdWUyICsgTWF0
aC5zaW4odGhpcy5pbnN0LmFuZ2xlKSAqIHRoaXMud2F2ZUZ1bmModGhpcy5pKSAqIHRoaXMubWFn
Ow0KCQkJdGhpcy5sYXN0S25vd25WYWx1ZSA9IHRoaXMuaW5zdC54Ow0KCQkJdGhpcy5sYXN0S25v
d25WYWx1ZTIgPSB0aGlzLmluc3QueTsNCgkJCWJyZWFrOw0KCQl9DQoJCXRoaXMuaW5zdC5zZXRf
YmJveF9jaGFuZ2VkKCk7DQoJfTsNCgliZWhpbnN0UHJvdG8ub25TcHJpdGVGcmFtZUNoYW5nZWQg
PSBmdW5jdGlvbiAocHJldl9mcmFtZSwgbmV4dF9mcmFtZSkNCgl7DQoJCXN3aXRjaCAodGhpcy5t
b3ZlbWVudCkgew0KCQljYXNlIDI6CS8vIHNpemUNCgkJCXRoaXMuaW5pdGlhbFZhbHVlICo9IChu
ZXh0X2ZyYW1lLndpZHRoIC8gcHJldl9mcmFtZS53aWR0aCk7DQoJCQl0aGlzLnJhdGlvID0gbmV4
dF9mcmFtZS5oZWlnaHQgLyBuZXh0X2ZyYW1lLndpZHRoOw0KCQkJYnJlYWs7DQoJCWNhc2UgMzoJ
Ly8gd2lkdGgNCgkJCXRoaXMuaW5pdGlhbFZhbHVlICo9IChuZXh0X2ZyYW1lLndpZHRoIC8gcHJl
dl9mcmFtZS53aWR0aCk7DQoJCQlicmVhazsNCgkJY2FzZSA0OgkvLyBoZWlnaHQNCgkJCXRoaXMu
aW5pdGlhbFZhbHVlICo9IChuZXh0X2ZyYW1lLmhlaWdodCAvIHByZXZfZnJhbWUuaGVpZ2h0KTsN
CgkJCWJyZWFrOw0KCQl9DQoJfTsNCglmdW5jdGlvbiBDbmRzKCkge307DQoJQ25kcy5wcm90b3R5
cGUuSXNBY3RpdmUgPSBmdW5jdGlvbiAoKQ0KCXsNCgkJcmV0dXJuIHRoaXMuYWN0aXZlOw0KCX07
DQoJQ25kcy5wcm90b3R5cGUuQ29tcGFyZU1vdmVtZW50ID0gZnVuY3Rpb24gKG0pDQoJew0KCQly
ZXR1cm4gdGhpcy5tb3ZlbWVudCA9PT0gbTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVQ
ZXJpb2QgPSBmdW5jdGlvbiAoY21wLCB2KQ0KCXsNCgkJcmV0dXJuIGNyLmRvX2NtcCh0aGlzLnBl
cmlvZCwgY21wLCB2KTsNCgl9Ow0KCUNuZHMucHJvdG90eXBlLkNvbXBhcmVNYWduaXR1ZGUgPSBm
dW5jdGlvbiAoY21wLCB2KQ0KCXsNCgkJaWYgKHRoaXMubW92ZW1lbnQgPT09IDUpDQoJCQlyZXR1
cm4gY3IuZG9fY21wKHRoaXMubWFnLCBjbXAsIGNyLnRvX3JhZGlhbnModikpOw0KCQllbHNlDQoJ
CQlyZXR1cm4gY3IuZG9fY21wKHRoaXMubWFnLCBjbXAsIHYpOw0KCX07DQoJQ25kcy5wcm90b3R5
cGUuQ29tcGFyZVdhdmUgPSBmdW5jdGlvbiAodykNCgl7DQoJCXJldHVybiB0aGlzLndhdmUgPT09
IHc7DQoJfTsNCgliZWhhdmlvclByb3RvLmNuZHMgPSBuZXcgQ25kcygpOw0KCWZ1bmN0aW9uIEFj
dHMoKSB7fTsNCglBY3RzLnByb3RvdHlwZS5TZXRBY3RpdmUgPSBmdW5jdGlvbiAoYSkNCgl7DQoJ
CXRoaXMuYWN0aXZlID0gKGEgPT09IDEpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0UGVyaW9k
ID0gZnVuY3Rpb24gKHgpDQoJew0KCQl0aGlzLnBlcmlvZCA9IHg7DQoJfTsNCglBY3RzLnByb3Rv
dHlwZS5TZXRNYWduaXR1ZGUgPSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMubWFnID0geDsNCgkJ
aWYgKHRoaXMubW92ZW1lbnQgPT09IDUpCS8vIGFuZ2xlDQoJCQl0aGlzLm1hZyA9IGNyLnRvX3Jh
ZGlhbnModGhpcy5tYWcpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0TW92ZW1lbnQgPSBmdW5j
dGlvbiAobSkNCgl7DQoJCWlmICh0aGlzLm1vdmVtZW50ID09PSA1ICYmIG0gIT09IDUpDQoJCQl0
aGlzLm1hZyA9IGNyLnRvX2RlZ3JlZXModGhpcy5tYWcpOw0KCQl0aGlzLm1vdmVtZW50ID0gbTsN
CgkJdGhpcy5pbml0KCk7DQoJfTsNCglBY3RzLnByb3RvdHlwZS5TZXRXYXZlID0gZnVuY3Rpb24g
KHcpDQoJew0KCQl0aGlzLndhdmUgPSB3Ow0KCX07DQoJQWN0cy5wcm90b3R5cGUuU2V0UGhhc2Ug
PSBmdW5jdGlvbiAoeCkNCgl7DQoJCXRoaXMuaSA9ICh4ICogXzJwaSkgJSBfMnBpOw0KCQl0aGlz
LnVwZGF0ZUZyb21QaGFzZSgpOw0KCX07DQoJQWN0cy5wcm90b3R5cGUuVXBkYXRlSW5pdGlhbFN0
YXRlID0gZnVuY3Rpb24gKCkNCgl7DQoJCXRoaXMuaW5pdCgpOw0KCX07DQoJYmVoYXZpb3JQcm90
by5hY3RzID0gbmV3IEFjdHMoKTsNCglmdW5jdGlvbiBFeHBzKCkge307DQoJRXhwcy5wcm90b3R5
cGUuQ3ljbGVQb3NpdGlvbiA9IGZ1bmN0aW9uIChyZXQpDQoJew0KCQlyZXQuc2V0X2Zsb2F0KHRo
aXMuaSAvIF8ycGkpOw0KCX07DQoJRXhwcy5wcm90b3R5cGUuUGVyaW9kID0gZnVuY3Rpb24gKHJl
dCkNCgl7DQoJCXJldC5zZXRfZmxvYXQodGhpcy5wZXJpb2QpOw0KCX07DQoJRXhwcy5wcm90b3R5
cGUuTWFnbml0dWRlID0gZnVuY3Rpb24gKHJldCkNCgl7DQoJCWlmICh0aGlzLm1vdmVtZW50ID09
PSA1KQkvLyBhbmdsZQ0KCQkJcmV0LnNldF9mbG9hdChjci50b19kZWdyZWVzKHRoaXMubWFnKSk7
DQoJCWVsc2UNCgkJCXJldC5zZXRfZmxvYXQodGhpcy5tYWcpOw0KCX07DQoJRXhwcy5wcm90b3R5
cGUuVmFsdWUgPSBmdW5jdGlvbiAocmV0KQ0KCXsNCgkJcmV0LnNldF9mbG9hdCh0aGlzLndhdmVG
dW5jKHRoaXMuaSkgKiB0aGlzLm1hZyk7DQoJfTsNCgliZWhhdmlvclByb3RvLmV4cHMgPSBuZXcg
RXhwcygpOw0KfSgpKTsNCjsNCjsNCmNyLmJlaGF2aW9ycy5zb2xpZCA9IGZ1bmN0aW9uKHJ1bnRp
bWUpDQp7DQoJdGhpcy5ydW50aW1lID0gcnVudGltZTsNCn07DQooZnVuY3Rpb24gKCkNCnsNCgl2
YXIgYmVoYXZpb3JQcm90byA9IGNyLmJlaGF2aW9ycy5zb2xpZC5wcm90b3R5cGU7DQoJYmVoYXZp
b3JQcm90by5UeXBlID0gZnVuY3Rpb24oYmVoYXZpb3IsIG9ianR5cGUpDQoJew0KCQl0aGlzLmJl
aGF2aW9yID0gYmVoYXZpb3I7DQoJCXRoaXMub2JqdHlwZSA9IG9ianR5cGU7DQoJCXRoaXMucnVu
dGltZSA9IGJlaGF2aW9yLnJ1bnRpbWU7DQoJfTsNCgl2YXIgYmVodHlwZVByb3RvID0gYmVoYXZp
b3JQcm90by5UeXBlLnByb3RvdHlwZTsNCgliZWh0eXBlUHJvdG8ub25DcmVhdGUgPSBmdW5jdGlv
bigpDQoJew0KCX07DQoJYmVoYXZpb3JQcm90by5JbnN0YW5jZSA9IGZ1bmN0aW9uKHR5cGUsIGlu
c3QpDQoJew0KCQl0aGlzLnR5cGUgPSB0eXBlOw0KCQl0aGlzLmJlaGF2aW9yID0gdHlwZS5iZWhh
dmlvcjsNCgkJdGhpcy5pbnN0ID0gaW5zdDsJCQkJLy8gYXNzb2NpYXRlZCBvYmplY3QgaW5zdGFu
Y2UgdG8gbW9kaWZ5DQoJCXRoaXMucnVudGltZSA9IHR5cGUucnVudGltZTsNCgl9Ow0KCXZhciBi
ZWhpbnN0UHJvdG8gPSBiZWhhdmlvclByb3RvLkluc3RhbmNlLnByb3RvdHlwZTsNCgliZWhpbnN0
UHJvdG8ub25DcmVhdGUgPSBmdW5jdGlvbigpDQoJew0KCQl0aGlzLmluc3QuZXh0cmFbInNvbGlk
RW5hYmxlZCJdID0gKHRoaXMucHJvcGVydGllc1swXSAhPT0gMCk7DQoJfTsNCgliZWhpbnN0UHJv
dG8udGljayA9IGZ1bmN0aW9uICgpDQoJew0KCX07DQoJZnVuY3Rpb24gQ25kcygpIHt9Ow0KCUNu
ZHMucHJvdG90eXBlLklzRW5hYmxlZCA9IGZ1bmN0aW9uICgpDQoJew0KCQlyZXR1cm4gdGhpcy5p
bnN0LmV4dHJhWyJzb2xpZEVuYWJsZWQiXTsNCgl9Ow0KCWJlaGF2aW9yUHJvdG8uY25kcyA9IG5l
dyBDbmRzKCk7DQoJZnVuY3Rpb24gQWN0cygpIHt9Ow0KCUFjdHMucHJvdG90eXBlLlNldEVuYWJs
ZWQgPSBmdW5jdGlvbiAoZSkNCgl7DQoJCXRoaXMuaW5zdC5leHRyYVsic29saWRFbmFibGVkIl0g
PSAhIWU7DQoJfTsNCgliZWhhdmlvclByb3RvLmFjdHMgPSBuZXcgQWN0cygpOw0KfSgpKTsNCmNy
LmdldE9iamVjdFJlZlRhYmxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gWw0KCWNyLnBsdWdpbnNf
LkF1ZGlvLA0KCWNyLnBsdWdpbnNfLkJyb3dzZXIsDQoJY3IucGx1Z2luc18uRnVuY3Rpb24sDQoJ
Y3IucGx1Z2luc18uTG9jYWxTdG9yYWdlLA0KCWNyLnBsdWdpbnNfLlBhcnRpY2xlcywNCgljci5w
bHVnaW5zXy5UaWxlZEJnLA0KCWNyLnBsdWdpbnNfLlRvdWNoLA0KCWNyLnBsdWdpbnNfLlNwcml0
ZSwNCgljci5wbHVnaW5zXy5UZXh0LA0KCWNyLmJlaGF2aW9ycy5CdWxsZXQsDQoJY3IuYmVoYXZp
b3JzLnNvbGlkLA0KCWNyLmJlaGF2aW9ycy5GYWRlLA0KCWNyLmJlaGF2aW9ycy5QbGF0Zm9ybSwN
Cgljci5iZWhhdmlvcnMuU2luLA0KCWNyLmJlaGF2aW9ycy5QaHlzaWNzLA0KCWNyLmJlaGF2aW9y
cy5Sb3RhdGUsDQoJY3IuYmVoYXZpb3JzLlBpbiwNCgljci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlw
ZS5jbmRzLk9uTGF5b3V0U3RhcnQsDQoJY3IuYmVoYXZpb3JzLkJ1bGxldC5wcm90b3R5cGUuYWN0
cy5TZXRBbmdsZU9mTW90aW9uLA0KCWNyLnBsdWdpbnNfLlNwcml0ZS5wcm90b3R5cGUuYWN0cy5T
dG9wQW5pbSwNCgljci5iZWhhdmlvcnMuUGluLnByb3RvdHlwZS5hY3RzLlBpbiwNCgljci5wbHVn
aW5zXy5UZXh0LnByb3RvdHlwZS5hY3RzLlNldFZpc2libGUsDQoJY3Iuc3lzdGVtX29iamVjdC5w
cm90b3R5cGUuYWN0cy5TZXRWYXIsDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5hY3Rz
LlNldFgsDQoJY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuZXhwcy52aWV3cG9ydGxlZnQsDQoJ
Y3IuYmVoYXZpb3JzLkJ1bGxldC5wcm90b3R5cGUuYWN0cy5TZXRHcmF2aXR5LA0KCWNyLnN5c3Rl
bV9vYmplY3QucHJvdG90eXBlLmNuZHMuQ29tcGFyZVZhciwNCgljci5wbHVnaW5zXy5TcHJpdGUu
cHJvdG90eXBlLmFjdHMuU2V0VmlzaWJsZSwNCgljci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UucHJv
dG90eXBlLmFjdHMuR2V0SXRlbSwNCgljci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLklz
TW9iaWxlLA0KCWNyLnBsdWdpbnNfLlRpbGVkQmcucHJvdG90eXBlLmNuZHMuQ29tcGFyZVgsDQoJ
Y3IucGx1Z2luc18uVGlsZWRCZy5wcm90b3R5cGUuYWN0cy5TZXRYLA0KCWNyLnBsdWdpbnNfLlRv
dWNoLnByb3RvdHlwZS5jbmRzLk9uVG91Y2hTdGFydCwNCgljci5iZWhhdmlvcnMuUGxhdGZvcm0u
cHJvdG90eXBlLmFjdHMuU2V0VmVjdG9yWSwNCgljci5iZWhhdmlvcnMuQnVsbGV0LnByb3RvdHlw
ZS5hY3RzLlNldFNwZWVkLA0KCWNyLnBsdWdpbnNfLkF1ZGlvLnByb3RvdHlwZS5hY3RzLlBsYXlC
eU5hbWUsDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5jbmRzLkNvbXBhcmVYLA0KCWNy
LnN5c3RlbV9vYmplY3QucHJvdG90eXBlLmNuZHMuRXZlcnksDQoJY3IucGx1Z2luc18uU3ByaXRl
LnByb3RvdHlwZS5leHBzLlgsDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5jbmRzLk9u
Q29sbGlzaW9uLA0KCWNyLnBsdWdpbnNfLlNwcml0ZS5wcm90b3R5cGUuYWN0cy5EZXN0cm95LA0K
CWNyLnN5c3RlbV9vYmplY3QucHJvdG90eXBlLmFjdHMuQWRkVmFyLA0KCWNyLmJlaGF2aW9ycy5G
YWRlLnByb3RvdHlwZS5hY3RzLlJlc3RhcnRGYWRlLA0KCWNyLmJlaGF2aW9ycy5Sb3RhdGUucHJv
dG90eXBlLmFjdHMuU2V0U3BlZWQsDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5hY3Rz
LlNldEFuZ2xlLA0KCWNyLmJlaGF2aW9ycy5TaW4ucHJvdG90eXBlLmFjdHMuU2V0QWN0aXZlLA0K
CWNyLmJlaGF2aW9ycy5QaHlzaWNzLnByb3RvdHlwZS5hY3RzLlNldFByZXZlbnRSb3RhdGUsDQoJ
Y3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5jbmRzLkNvbXBhcmVJbnN0YW5jZVZhciwNCglj
ci5wbHVnaW5zXy5UZXh0LnByb3RvdHlwZS5hY3RzLlNldFRleHQsDQoJY3Iuc3lzdGVtX29iamVj
dC5wcm90b3R5cGUuY25kcy5QaWNrQWxsLA0KCWNyLmJlaGF2aW9ycy5CdWxsZXQucHJvdG90eXBl
LmFjdHMuU2V0RW5hYmxlZCwNCgljci5wbHVnaW5zXy5TcHJpdGUucHJvdG90eXBlLmFjdHMuU2V0
SW5zdGFuY2VWYXIsDQoJY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuYWN0cy5DcmVhdGVPYmpl
Y3QsDQoJY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuZXhwc1siaW50Il0sDQoJY3Iuc3lzdGVt
X29iamVjdC5wcm90b3R5cGUuZXhwcy5yYW5kb20sDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3Rv
dHlwZS5hY3RzLlNldEFuaW1GcmFtZSwNCgljci5wbHVnaW5zXy5TcHJpdGUucHJvdG90eXBlLmV4
cHMuWSwNCgljci5zeXN0ZW1fb2JqZWN0LnByb3RvdHlwZS5jbmRzLkNvbXBhcmUsDQoJY3Iuc3lz
dGVtX29iamVjdC5wcm90b3R5cGUuZXhwcy5jaG9vc2UsDQoJY3IucGx1Z2luc18uVG91Y2gucHJv
dG90eXBlLmNuZHMuT25UYXBHZXN0dXJlLA0KCWNyLnBsdWdpbnNfLkZ1bmN0aW9uLnByb3RvdHlw
ZS5hY3RzLkNhbGxGdW5jdGlvbiwNCgljci5wbHVnaW5zXy5Ub3VjaC5wcm90b3R5cGUuY25kcy5P
blRhcEdlc3R1cmVPYmplY3QsDQoJY3IucGx1Z2luc18uU3ByaXRlLnByb3RvdHlwZS5jbmRzLklz
VmlzaWJsZSwNCgljci5wbHVnaW5zXy5GdW5jdGlvbi5wcm90b3R5cGUuY25kcy5PbkZ1bmN0aW9u
LA0KCWNyLmJlaGF2aW9ycy5QbGF0Zm9ybS5wcm90b3R5cGUuYWN0cy5TZXRFbmFibGVkLA0KCWNy
LnN5c3RlbV9vYmplY3QucHJvdG90eXBlLmV4cHMuZHQsDQoJY3IucGx1Z2luc18uUGFydGljbGVz
LnByb3RvdHlwZS5hY3RzLlNldFJhdGUsDQoJY3Iuc3lzdGVtX29iamVjdC5wcm90b3R5cGUuYWN0
cy5XYWl0LA0KCWNyLnN5c3RlbV9vYmplY3QucHJvdG90eXBlLmFjdHMuUmVzdGFydExheW91dCwN
Cgljci5wbHVnaW5zXy5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLmNuZHMuT25JdGVtR2V0LA0KCWNy
LnBsdWdpbnNfLkxvY2FsU3RvcmFnZS5wcm90b3R5cGUuZXhwcy5JdGVtVmFsdWUsDQoJY3IucGx1
Z2luc18uTG9jYWxTdG9yYWdlLnByb3RvdHlwZS5hY3RzLlNldEl0ZW0sDQoJY3IucGx1Z2luc18u
TG9jYWxTdG9yYWdlLnByb3RvdHlwZS5jbmRzLk9uSXRlbU1pc3NpbmcNCl07fTsNCg==
